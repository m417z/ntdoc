<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="IO_ERROR_LOG_PACKET - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>IO_ERROR_LOG_PACKET - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            IO_ERROR_LOG_PACKET - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _IO_ERROR_LOG_PACKET {
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>         MajorFunctionCode;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>         RetryCount;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>        DumpDataSize;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>        NumberOfStrings;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>        StringOffset;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>        EventCategory;
  <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a>      ErrorCode;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         UniqueErrorValue;
  <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a>      FinalStatus;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         SequenceNumber;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         IoControlCode;
  LARGE_INTEGER DeviceOffset;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         DumpData[1];
} IO_ERROR_LOG_PACKET, *PIO_ERROR_LOG_PACKET;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_io_error_log_packet">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/io_error_log_packet.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-wdm-_io_error_log_packet)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_io_error_log_packet-structure">_IO_ERROR_LOG_PACKET structure</h1>

<h2 id="description">Description</h2>

<p>The <strong>IO_ERROR_LOG_PACKET</strong> structure serves as the header for an error log entry.</p>

<h2 id="members">Members</h2>

<h3 id="majorfunctioncode"><code>MajorFunctionCode</code></h3>

<p>Indicates the <strong>IRP_MJ_*XXX</strong>* major function code of the <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a> the driver was handling when the error occurred. Setting this value is optional.</p>

<h3 id="retrycount"><code>RetryCount</code></h3>

<p>Indicates the number of times the driver has retried the operation and encountered this error. Use zero to indicate the driver attempted the operation once, or add one for each retry beyond the initial attempt.</p>

<h3 id="dumpdatasize"><code>DumpDataSize</code></h3>

<p>Indicates the size, in bytes, of the variable-length <strong>DumpData</strong> member of this structure. The specified value must be a multiple of <strong>sizeof</strong>(<a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>).</p>

<h3 id="numberofstrings"><code>NumberOfStrings</code></h3>

<p>Indicates the number of insertion strings the driver will supply with this error log entry. Drivers set this value to zero for errors that need no insertion strings. The Event Viewer uses these strings to fill in the "%2" through "%<em>n</em>" entries in the string template for this error code.</p>

<p>The null-terminated Unicode strings themselves follow the <strong>IO_ERROR_LOG_PACKET</strong> structure in memory.</p>

<h3 id="stringoffset"><code>StringOffset</code></h3>

<p>Indicates the offset, in bytes, from the beginning of the structure, at which any driver-supplied insertion string data begins. Normally this will be <strong>sizeof</strong>(<strong>IO_ERROR_LOG_PACKET</strong>) plus the value of the <strong>DumpDataSize</strong> member. If there are no driver-supplied insertion strings, <strong>StringOffset</strong> can be zero.</p>

<h3 id="eventcategory"><code>EventCategory</code></h3>

<p>Specifies the event category for the error. A driver specifies the event categories it supports and corresponding descriptive strings in its message catalog. The Event Viewer displays the descriptive string as the <strong>Category</strong> value for the error.</p>

<h3 id="errorcode"><code>ErrorCode</code></h3>

<p>Specifies the type of error. The Event Viewer uses the error code to determine which string to display as the Description value for the error. The Event Viewer takes the string template for the error supplied in the driver's message catalog, replaces "%1" in the template with the name of the driver's device object, and replaces "%2" through "%<em>n</em>" with the insertion strings supplied with the error log entry.</p>

<p><strong>ErrorCode</strong> is a system-defined or driver-defined constant; see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/logging-errors">Logging Errors</a> for more information.</p>

<h3 id="uniqueerrorvalue"><code>UniqueErrorValue</code></h3>

<p>A driver-specific value that indicates where the error was detected in the driver. Setting this value is optional.</p>

<h3 id="finalstatus"><code>FinalStatus</code></h3>

<p>Specifies the <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> value to be returned for the operation that triggered the error. Setting this value is optional.</p>

<h3 id="sequencenumber"><code>SequenceNumber</code></h3>

<p>Specifies a driver-assigned sequence number for the current <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a>, which should be constant for the life of a given request. Setting this value is optional.</p>

<h3 id="iocontrolcode"><code>IoControlCode</code></h3>

<p>For an <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ifs/irp-mj-device-control">IRP_MJ_DEVICE_CONTROL</a> or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mj-internal-device-control">IRP_MJ_INTERNAL_DEVICE_CONTROL</a> <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a>, this member specifies the I/O control code for the request that trigged the error. Otherwise, this value is zero. Setting this value is optional.</p>

<h3 id="deviceoffset"><code>DeviceOffset</code></h3>

<p>Specifies the driver-specified offset into the device where the error occurred. Setting this value is optional.</p>

<h3 id="dumpdata"><code>DumpData</code></h3>

<p>A variable-size array that can be used to store driver-specific binary data, such as register values or any other information useful in identifying the cause of the error. Drivers must specify the size, in bytes, of the array in the <strong>DumpDataSize</strong> member of this structure.</p>

<h2 id="remarks">Remarks</h2>

<p>Drivers use the <a href="ioallocateerrorlogentry" title="PVOID IoAllocateErrorLogEntry(&#10;  [in] PVOID IoObject,&#10;  [in] UCHAR EntrySize&#10;);">IoAllocateErrorLogEntry</a> routine to allocate an error log entry. The <strong>IO_ERROR_LOG_PACKET</strong> structure serves as the header for the returned buffer. It is followed in memory by any insertion strings for the log entry.</p>

<p>Note that the I/O manager itself inserts some information into the system error log, such as the name of the device and driver. The I/O manager reserves 80 bytes to hold this information. If the size of this information exceeds 80 bytes, then the I/O manager truncates the driver's insertion strings as necessary.</p>

<p>For more information about how to use this structure, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/logging-errors">Logging Errors</a>.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ifs/irp-mj-device-control">IRP_MJ_DEVICE_CONTROL</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mj-internal-device-control">IRP_MJ_INTERNAL_DEVICE_CONTROL</a></p>

<p><a href="ioallocateerrorlogentry" title="PVOID IoAllocateErrorLogEntry(&#10;  [in] PVOID IoObject,&#10;  [in] UCHAR EntrySize&#10;);">IoAllocateErrorLogEntry</a></p>

<p><a href="iofreeerrorlogentry" title="VOID IoFreeErrorLogEntry(&#10;  [in] PVOID ElEntry&#10;);">IoFreeErrorLogEntry</a></p>

<p><a href="iowriteerrorlogentry" title="VOID IoWriteErrorLogEntry(&#10;  [in] PVOID ElEntry&#10;);">IoWriteErrorLogEntry</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_io_error_log_packet">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/ns-wdm-_io_error_log_packet.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
