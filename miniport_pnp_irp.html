<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="MINIPORT_PNP_IRP - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>MINIPORT_PNP_IRP - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            MINIPORT_PNP_IRP - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">MINIPORT_PNP_IRP MiniportPnpIrp;

NDIS_STATUS MiniportPnpIrp(
  [in] NDIS_HANDLE MiniportAddDeviceContext,
  [in] PIRP Irp
)
{...}</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_pnp_irp">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/miniport_pnp_irp.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-ndis-miniport_pnp_irp)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="miniport_pnp_irp-callback-function">MINIPORT_PNP_IRP callback function</h1>

<h2 id="description">Description</h2>

<p>The <em>MiniportPnpIrp</em> function enables a miniport driver to optionally manage its Plug and Play (PnP) resources. <em>MiniportPnpIrp</em> itself is never defined by miniport drivers directly. Instead, it is defined either as <em>MiniportFilterResourceRequirements</em> or <em>MiniportStartDevice</em>.</p>

<p>If defined as <em>MiniportFilterResourceRequirements</em>, this function enables a miniport driver to modify
the resource requirements for a device. If defined as <em>MiniportStartDevice</em>, this function enables the miniport driver to remove resources that it added in the
<em>MiniportFilterResourceRequirements</em> function.</p>

<p><strong>Note</strong> You must declare this function by using the either the <strong>MINIPORT_FILTER_RESOURCE_REQUIREMENTS</strong> type or the <strong>MINIPORT_START_DEVICE</strong> type. For more
information, see the following Examples section.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="miniportadddevicecontext-in"><code>MiniportAddDeviceContext</code> [in]</h3>

<p>A handle for a driver-allocated context area that the miniport driver registered with NDIS in the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_add_device">MiniportAddDevice</a> function.</p>

<h3 id="irp-in"><code>Irp</code> [in]</h3>

<p>If this function is defined as <em>MiniportFilterResourceRequirements</em>, this parameter is a pointer to the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mn-filter-resource-requirements">IRP_MN_FILTER_RESOURCE_REQUIREMENTS</a> for the driver to handle.</p>

<p>If this function is defined as <em>MiniportStartDevice</em>, this parameter is a pointer to an
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mn-start-device">IRP_MN_START_DEVICE</a> <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a>.</p>

<h2 id="return-value">Return value</h2>

<p><em>MiniportPnpIrp</em> returns one of the following values:</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>NDIS_STATUS_SUCCESS</strong></td>
  <td>The miniport driver handled the start device request successfully.</td>
</tr>
<tr>
  <td><strong>NDIS_STATUS_RESOURCES</strong></td>
  <td>The miniport driver could not handle the start device request because of low resources.</td>
</tr>
<tr>
  <td><strong>NDIS_STATUS_FAILURE</strong></td>
  <td><em>MiniportFilterResourceRequirements</em> failed for reasons other than insufficient resources.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<h3 id="miniportfilterresourcerequirements-remarks">MiniportFilterResourceRequirements Remarks</h3>

<p>The
<em>MiniportFilterResourceRequirements</em> function is an optional function. Miniport
drivers should register this function if they support MSI-X and at least one of the following is
true:</p>

<ul>
<li>The driver requires the ability to change the interrupt affinity for each MSI-X message.</li>
<li>The driver will register for line-based interrupts in the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a> function.</li>
</ul>

<p>To register
<em>MiniportFilterResourceRequirements</em>, specify the entry point in the
<a href="ndis_miniport_pnp_characteristics" title="typedef struct _NDIS_MINIPORT_PNP_CHARACTERISTICS {&#10;  NDIS_OBJECT_HEADER                            Header;&#10;  MINIPORT_ADD_DEVICE_HANDLER                   MiniportAddDeviceHandler;&#10;  MINIPORT_REMOVE_DEVICE_HANDLER                MiniportRemoveDeviceHandler;&#10;  MINIPORT_FILTER_RESOURCE_REQUIREMENTS_HANDLER MiniportFilterResourceRequirementsHandler;&#10;  MINIPORT_START_DEVICE_HANDLER                 MiniportStartDeviceHandler;&#10;  ULONG                                         Flags;&#10;} NDIS_MINIPORT_PNP_CHARACTERISTICS, *PNDIS_MINIPORT_PNP_CHARACTERISTICS;">NDIS_MINIPORT_PNP_CHARACTERISTICS</a> structure.</p>

<p>NDIS calls the
<em>MiniportFilterResourceRequirements</em> function after NDIS receives an
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mn-filter-resource-requirements">IRP_MN_FILTER_RESOURCE_REQUIREMENTS</a> <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a> for a network interface card (NIC). NDIS calls
<em>MiniportFilterResourceRequirements</em> after the underlying function drivers in the
device stack have completed the processing of the <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a>.</p>

<p>The miniport driver must be prepared to handle <a href="irp_mn_filter_resource_requirements" title="#define IRP_MN_FILTER_RESOURCE_REQUIREMENTS 0x0D">IRP_MN_FILTER_RESOURCE_REQUIREMENTS</a> from
<em>MiniportFilterResourceRequirements</em> immediately after the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_add_device">MiniportAddDevice</a> function returns
NDIS_STATUS_SUCCESS.</p>

<p>A miniport driver can set an affinity policy for each resource of type
<strong>CmResourceTypeInterrupt</strong> that describes an MSI-X message. If an affinity policy requests targeting
for a specific set of processors, the miniport driver also sets a
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/interrupt-affinity-and-priority#about-kaffinity"><strong>KAFFINITY</strong></a> mask at the
<strong>Interrupt.TargetedProcessors</strong> member in the
<a href="io_resource_descriptor" title="typedef struct _IO_RESOURCE_DESCRIPTOR {&#10;  UCHAR  Option;&#10;  UCHAR  Type;&#10;  UCHAR  ShareDisposition;&#10;  UCHAR  Spare1;&#10;  USHORT Flags;&#10;  USHORT Spare2;&#10;  union {&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Port;&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Memory;&#10;...">IO_RESOURCE_DESCRIPTOR</a> structure.</p>

<p>If an NDIS 6.1 or later miniport driver requires more message interrupt resources, it can add more
message interrupt resources to the resources list. If the operating system can provide more message
interrupt resources, the miniport adapter receives the added message interrupt resources when it is
started.</p>

<p>Each message interrupt resource in the list is assigned a message number that corresponds to the order
it has in the resource list. The messages are numbered from 0 through the total number of message
interrupt resources minus one.</p>

<p>To assign an MSI-X table entry to a CPU at run time, the miniport driver can call the
<a href="ndismconfigmsixtableentry" title="NDIS_STATUS NdisMConfigMSIXTableEntry(&#10;  [in] NDIS_HANDLE                  NdisMiniportHandle,&#10;  [in] PNDIS_MSIX_CONFIG_PARAMETERS MSIXConfigParameters&#10;);">NdisMConfigMSIXTableEntry</a> function.</p>

<p>A miniport driver can remove all of the resources of type
<strong>CmResourceTypeInterrupt</strong> that are message interrupt resources. The driver can then register for
line-based interrupts in the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a> function. If
the miniport driver does not remove these message interrupt resources, the operating system will fail if
the driver tries to register line-based interrupt in
<em>MiniportInitializeEx</em>.</p>

<p>To allocate memory for a new resource-requirements list, use the
<a href="ndisallocatememorywithtagpriority" title="PVOID NdisAllocateMemoryWithTagPriority(&#10;  [in] NDIS_HANDLE      NdisHandle,&#10;  [in] UINT             Length,&#10;  [in] ULONG            Tag,&#10;  [in] EX_POOL_PRIORITY Priority&#10;);">NdisAllocateMemoryWithTagPriority</a> function. The miniport driver can free the memory for the old
resources-requirement list with the
<a href="ndisfreememory" title="VOID NdisFreeMemory(&#10;  [in] PVOID VirtualAddress,&#10;  [in] UINT  Length,&#10;  [in] UINT  MemoryFlags&#10;);">NdisFreeMemory</a> function. The PnP manager
frees any driver-allocated memory after the associated <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a> is complete.</p>

<p>Miniport drivers should not modify other resources, such as
<strong>CmResourceTypeMemory</strong> and
<strong>CmResourceTypePort</strong> resources. Miniport drivers should avoid adding a new resource to the resource
list. However, miniport drivers can add more message interrupt resources. If the miniport driver adds
more message interrupt resources, the driver must not remove them from the
<em>MiniportStartDevice</em> function.</p>

<p>If a miniport driver returns NDIS_STATUS_RESOURCES or NDIS_STATUS_FAILURE from <em>MiniportFilterResourceRequirements</em>, NDIS will use the resource requirements as specified by the parent bus driver.</p>

<p>NDIS can call
<em>MiniportFilterResourceRequirements</em> several times before NDIS calls the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_remove_device">MiniportRemoveDevice</a> function. But
NDIS calls
<em>MiniportFilterResourceRequirements</em> only when a device is in the halted
state.</p>

<p>NDIS calls
<em>MiniportFilterResourceRequirements</em> at IRQL = PASSIVE_LEVEL.</p>

<h3 id="miniportfilterresourcerequirements-example">MiniportFilterResourceRequirements Example</h3>

<p>To define a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_pnp_irp">MiniportFilterResourceRequirements</a> function, you must first provide a function declaration that identifies the type of function you're defining. Windows provides a set of function types for drivers. Declaring a function using the function types helps <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/code-analysis-for-drivers">Code Analysis for Drivers</a>, <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/static-driver-verifier">Static Driver Verifier</a> (SDV), and other verification tools find errors, and it's a requirement for writing drivers for the Windows operating system.</p>

<p>For example, to define a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_pnp_irp">MiniportFilterResourceRequirements</a> function that is named "MyFilterResourceRequirements", use the <strong>MINIPORT_FILTER_RESOURCE_REQUIREMENTS</strong> type as shown in this code example:</p>

<p><!-- CODE_MARKER --></p>

<pre><code>MINIPORT_FILTER_RESOURCE_REQUIREMENTS MyFilterResourceRequirements;
</code></pre>

<p>Then, implement your function as follows:</p>

<p><!-- CODE_MARKER --></p>

<pre><code>_Use_decl_annotations_
NDIS_STATUS
 MyFilterResourceRequirements(
    NDIS_HANDLE  MiniportAddDeviceContext,
    PIRP  Irp
    )
  {...}
</code></pre>

<p>The <strong>MINIPORT_FILTER_RESOURCE_REQUIREMENTS</strong> function type is defined in the Ndis.h header file. To more accurately identify errors when you run the code analysis tools, be sure to add the <em>Use_decl_annotations</em> annotation to your function definition. The <em>Use_decl_annotations</em> annotation ensures that the annotations that are applied to the <strong>MINIPORT_FILTER_RESOURCE_REQUIREMENTS</strong> function type in the header file are used. For more information about the requirements for function declarations, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/declaring-functions-by-using-function-role-types-for-ndis-drivers">Declaring Functions by Using Function Role Types for NDIS Drivers</a>.</p>

<p>For information about <em>Use_decl_annotations</em>, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/visualstudio/code-quality/annotating-function-behavior">Annotating Function Behavior</a>.</p>

<h3 id="miniportstartdevice-remarks">MiniportStartDevice Remarks</h3>

<p><em>MiniportStartDevice</em> is an optional function. Miniport drivers that support
MSI-X can specify an entry point for this function in the
<a href="ndis_miniport_pnp_characteristics" title="typedef struct _NDIS_MINIPORT_PNP_CHARACTERISTICS {&#10;  NDIS_OBJECT_HEADER                            Header;&#10;  MINIPORT_ADD_DEVICE_HANDLER                   MiniportAddDeviceHandler;&#10;  MINIPORT_REMOVE_DEVICE_HANDLER                MiniportRemoveDeviceHandler;&#10;  MINIPORT_FILTER_RESOURCE_REQUIREMENTS_HANDLER MiniportFilterResourceRequirementsHandler;&#10;  MINIPORT_START_DEVICE_HANDLER                 MiniportStartDeviceHandler;&#10;  ULONG                                         Flags;&#10;} NDIS_MINIPORT_PNP_CHARACTERISTICS, *PNDIS_MINIPORT_PNP_CHARACTERISTICS;">NDIS_MINIPORT_PNP_CHARACTERISTICS</a> structure. When NDIS receives a request from the Plug and Play
(PnP) manager to start a device, NDIS calls the
<em>MiniportStartDevice</em> function, if any. If a miniport driver adds new resources
in the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_pnp_irp">MiniportFilterResourceRequirements</a> function, it should provide a
<em>MiniportStartDevice</em> function to remove the resources.</p>

<p>If a miniport driver modifies resources in such a way that an underlying bus driver cannot recognize
the resources, the driver should provide a
<em>MiniportStartDevice</em> function to remove the resources. An underlying bus driver
might fail a start device request if it does not recognize resources that a miniport driver added in
<em>MiniportFilterResourceRequirements</em>. If the miniport driver adds message
interrupt resources, it must not remove them from
<em>MiniportStartDevice</em>.</p>

<p>NDIS calls
<em>MiniportStartDevice</em> before it forwards the start device request to the
underlying drivers. If an underlying driver successfully completes the request, NDIS calls the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a> function to
initialize the miniport adapter.</p>

<p>NDIS calls
<em>MiniportStartDevice</em> at IRQL = PASSIVE_LEVEL.</p>

<h3 id="miniportstartdevice-example">MiniportStartDevice Example</h3>

<p>To define a <em>MiniportStartDevice</em> function, you must first provide a function declaration that identifies the type of function you're defining. Windows provides a set of function types for drivers. Declaring a function using the function types helps <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/code-analysis-for-drivers">Code Analysis for Drivers</a>, <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/static-driver-verifier">Static Driver Verifier</a> (SDV), and other verification tools find errors, and it's a requirement for writing drivers for the Windows operating system.</p>

<p>For example, to define a <em>MiniportStartDevice</em> function that is named "MyStartDevice", use the <strong>MINIPORT_START_DEVICE</strong> type as shown in this code example:</p>

<p><!-- CODE_MARKER --></p>

<pre><code>MINIPORT_START_DEVICE MyStartDevice;
</code></pre>

<p>Then, implement your function as follows:</p>

<p><!-- CODE_MARKER --></p>

<pre><code>_Use_decl_annotations_
NDIS_STATUS
 MyStartDevice(
    NDIS_HANDLE  MiniportAddDeviceContext,
    PIRP  Irp
    )
  {...}
</code></pre>

<p>The <strong>MINIPORT_START_DEVICE</strong> function type is defined in the Ndis.h header file. To more accurately identify errors when you run the code analysis tools, be sure to add the <em>Use_decl_annotations</em> annotation to your function definition. The <em>Use_decl_annotations</em> annotation ensures that the annotations that are applied to the <strong>MINIPORT_START_DEVICE</strong> function type in the header file are used. For more information about the requirements for function declarations, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/declaring-functions-by-using-function-role-types-for-ndis-drivers">Declaring Functions by Using Function Role Types for NDIS Drivers</a>.</p>

<p>For information about <em>Use_decl_annotations</em>, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/visualstudio/code-quality/annotating-function-behavior">Annotating Function Behavior</a>.</p>

<h2 id="see-also">See also</h2>

<p><a href="io_resource_descriptor" title="typedef struct _IO_RESOURCE_DESCRIPTOR {&#10;  UCHAR  Option;&#10;  UCHAR  Type;&#10;  UCHAR  ShareDisposition;&#10;  UCHAR  Spare1;&#10;  USHORT Flags;&#10;  USHORT Spare2;&#10;  union {&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Port;&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Memory;&#10;...">IO_RESOURCE_DESCRIPTOR</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mn-filter-resource-requirements">IRP_MN_FILTER_RESOURCE_REQUIREMENTS</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mn-start-device">IRP_MN_START_DEVICE</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/interrupt-affinity-and-priority#about-kaffinity"><strong>KAFFINITY</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_add_device">MiniportAddDevice</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_pnp_irp">MiniportFilterResourceRequirements</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_remove_device">MiniportRemoveDevice</a></p>

<p><strong>MiniportStartDevice</strong></p>

<p><a href="ndis_miniport_pnp_characteristics" title="typedef struct _NDIS_MINIPORT_PNP_CHARACTERISTICS {&#10;  NDIS_OBJECT_HEADER                            Header;&#10;  MINIPORT_ADD_DEVICE_HANDLER                   MiniportAddDeviceHandler;&#10;  MINIPORT_REMOVE_DEVICE_HANDLER                MiniportRemoveDeviceHandler;&#10;  MINIPORT_FILTER_RESOURCE_REQUIREMENTS_HANDLER MiniportFilterResourceRequirementsHandler;&#10;  MINIPORT_START_DEVICE_HANDLER                 MiniportStartDeviceHandler;&#10;  ULONG                                         Flags;&#10;} NDIS_MINIPORT_PNP_CHARACTERISTICS, *PNDIS_MINIPORT_PNP_CHARACTERISTICS;">NDIS_MINIPORT_PNP_CHARACTERISTICS</a></p>

<p><a href="ndisallocatememorywithtagpriority" title="PVOID NdisAllocateMemoryWithTagPriority(&#10;  [in] NDIS_HANDLE      NdisHandle,&#10;  [in] UINT             Length,&#10;  [in] ULONG            Tag,&#10;  [in] EX_POOL_PRIORITY Priority&#10;);">NdisAllocateMemoryWithTagPriority</a></p>

<p><a href="ndisfreememory" title="VOID NdisFreeMemory(&#10;  [in] PVOID VirtualAddress,&#10;  [in] UINT  Length,&#10;  [in] UINT  MemoryFlags&#10;);">NdisFreeMemory</a></p>

<p><a href="ndismconfigmsixtableentry" title="NDIS_STATUS NdisMConfigMSIXTableEntry(&#10;  [in] NDIS_HANDLE                  NdisMiniportHandle,&#10;  [in] PNDIS_MSIX_CONFIG_PARAMETERS MSIXConfigParameters&#10;);">NdisMConfigMSIXTableEntry</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_pnp_irp">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ndis/nc-ndis-miniport_pnp_irp.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
