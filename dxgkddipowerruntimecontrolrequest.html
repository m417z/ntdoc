<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DXGKDDIPOWERRUNTIMECONTROLREQUEST - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DXGKDDIPOWERRUNTIMECONTROLREQUEST - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DXGKDDIPOWERRUNTIMECONTROLREQUEST - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3dkmddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">DXGKDDIPOWERRUNTIMECONTROLREQUEST Dxgkddipowerruntimecontrolrequest;

<a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> Dxgkddipowerruntimecontrolrequest(
  IN_CONST_HANDLE DriverContext,
  IN LPCGUID PowerControlCode,
  IN PVOID InBuffer,
  IN <a href="size_t-2" title="typedef ULONG_PTR SIZE_T;">SIZE_T</a> InBufferSize,
  OUT PVOID OutBuffer,
  IN <a href="size_t-2" title="typedef ULONG_PTR SIZE_T;">SIZE_T</a> OutBufferSize,
  OUT PSIZE_T BytesReturned
)
{...}</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkddipowerruntimecontrolrequest">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/dxgkddipowerruntimecontrolrequest.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-d3dkmddi-dxgkddipowerruntimecontrolrequest)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="dxgkddipowerruntimecontrolrequest-callback-function">DXGKDDIPOWERRUNTIMECONTROLREQUEST callback function</h1>

<h2 id="description">Description</h2>

<p>Called by the Power Engine Plug-in (PEP) to exchange information with the display miniport driver. Also called by the Microsoft DirectX graphics kernel subsystem to notify the display miniport driver about certain events.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="drivercontext"><code>DriverContext</code></h3>

<p>A handle to a context block associated with a display adapter. The display miniport driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_add_device">DxgkDdiAddDevice</a> function previously provided this handle to the DirectX graphics kernel subsystem.</p>

<h3 id="powercontrolcode"><code>PowerControlCode</code></h3>

<p>A pointer to a GUID that defines the meaning of the PEP's control request. For more information, see Remarks.</p>

<h3 id="inbuffer"><code>InBuffer</code></h3>

<p>An optional pointer to an input buffer.</p>

<h3 id="inbuffersize"><code>InBufferSize</code></h3>

<p>The size, in bytes, of the buffer that <em>InBuffer</em> points to.</p>

<h3 id="outbuffer"><code>OutBuffer</code></h3>

<p>An optional pointer to an output buffer.</p>

<h3 id="outbuffersize"><code>OutBufferSize</code></h3>

<p>The size, in bytes, of the buffer that <em>OutBuffer</em> points to.</p>

<h3 id="bytesreturned"><code>BytesReturned</code></h3>

<p>An optional pointer to a buffer that contains the number of bytes that are written by the display miniport driver to the output buffer.</p>

<h2 id="return-value">Return value</h2>

<p>Returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if it succeeds. Otherwise, it returns one of the error codes defined in Ntstatus.h.</p>

<h2 id="remarks">Remarks</h2>

<p>The operating system calls <em>DxgkDdiPowerRuntimeControlRequest</em> only if the display miniport driver indicates support by setting <a href="dxgk_drivercaps" title="typedef struct _DXGK_DRIVERCAPS {&#10;  [out] PHYSICAL_ADDRESS                   HighestAcceptableAddress;&#10;  [out] UINT                               MaxAllocationListSlotId;&#10;  [out] SIZE_T                             ApertureSegmentCommitLimit;&#10;  [out] UINT                               MaxPointerWidth;&#10;  [out] UINT                               MaxPointerHeight;&#10;  [out] DXGK_POINTERFLAGS                  PointerCaps;&#10;  [out] UINT                               InterruptMessageNumber;&#10;  [out] UINT                               NumberOfSwizzlingRanges;&#10;  [out] UINT                               MaxOverlays;&#10;  union {&#10;    [out] DXGK_GAMMARAMPCAPS      GammaRampCaps;&#10;    [out] DXGK_COLORTRANSFORMCAPS ColorTransformCaps;&#10;  };&#10;  [out] DXGK_PRESENTATIONCAPS              PresentationCaps;&#10;  [out] UINT                               MaxQueuedFlipOnVSync;&#10;  [out] DXGK_FLIPCAPS                      FlipCaps;&#10;  [out] DXGK_VIDSCHCAPS                    SchedulingCaps;&#10;  [out] DXGK_VIDMMCAPS                     MemoryManagementCaps;&#10;  [out] DXGK_GPUENGINETOPOLOGY             GpuEngineTopology;&#10;...">DXGK_DRIVERCAPS</a>.<strong>SupportRuntimePowerManagement</strong> to <strong>TRUE</strong>.</p>

<h3 id="guids-used-by-the-power-engine-plugin-pep">GUIDs used by the Power Engine Plugin (PEP)</h3>

<p>The PEP uses the following GUIDs that are defined in D3dkmddi.h to exchange information with the display miniport driver. The display port driver uses these GUIDs to issue Event Tracing for Windows (ETW) events, which are useful to profile driver performance issues.</p>

<p>GUID_DXGKDDI_POWER_VOLTAGE_UP</p>

<p>Increase the voltage.</p>

<p>GUID_DXGKDDI_POWER_VOLTAGE_DOWN</p>

<p>Decrease the voltage.</p>

<p>GUID_DXGKDDI_POWER_VOLTAGE</p>

<p>Change the voltage, but the driver doesn't know if the change is an increase or decrease.</p>

<p>GUID_DXGKDDI_POWER_CLOCK_UP</p>

<p>Increase the clock setting.</p>

<p>GUID_DXGKDDI_POWER_CLOCK_DOWN</p>

<p>Decrease the clock setting.</p>

<p>GUID_DXGKDDI_POWER_CLOCK</p>

<p>Change the clock setting, but the driver doesn't know if the change is an increase or decrease.</p>

<p>GUID_DXGKDDI_POWER_BANDWIDTH_UP</p>

<p>Increase the bandwidth.</p>

<p>GUID_DXGKDDI_POWER_BANDWIDTH_DOWN</p>

<p>Decrease the bandwidth.</p>

<p>GUID_DXGKDDI_POWER_BANDWIDTH</p>

<p>Change the bandwidth, but the driver doesn't know if the change is an increase or decrease.</p>

<h3 id="guids-used-by-the-directx-graphics-kernel-subsystem">GUIDs used by the DirectX graphics kernel subsystem</h3>

<p>The DirectX graphics kernel subsystem uses the following GUIDs that are defined in D3dkmddi.h to notify the display miniport driver about certain events.</p>

<p>GUID_DXGKDDI_POWER_MANAGEMENT_PREPARE_TO_START</p>

<p>Used after the DirectX graphics kernel subsystem registers the device for runtime power management, but before the device is started. After this function has been called with this GUID, the display miniport driver can call these functions:</p>

<ul>
<li><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkcb_setpowercomponentactive">DxgkCbSetPowerComponentActive</a></li>
<li><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkcb_setpowercomponentlatency">DxgkCbSetPowerComponentLatency</a></li>
<li><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkcb_setpowercomponentresidency">DxgkCbSetPowerComponentResidency</a></li>
</ul>

<p>GUID_DXGKDDI_POWER_MANAGEMENT_STARTED</p>

<p>Used after the DirectX graphics kernel subsystem starts runtime power management. After this function has been called with this GUID, the display miniport driver can call any power runtime functions.</p>

<p>GUID_DXGKDDI_POWER_MANAGEMENT_STOPPED</p>

<p>Used immediately before the DirectX graphics kernel subsystem unregisters the device for runtime power management. After this function has been called with this GUID, the display miniport driver should not call any power runtime functions.</p>

<h3 id="synchronization">Synchronization</h3>

<p>This function can be called simultaneously from multiple execution threads.</p>

<p>The operating system guarantees that this function follows the zero level synchronization mode as defined in <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/threading-and-synchronization-zero-level">Threading and Synchronization Zero Level</a>.</p>

<h2 id="see-also">See also</h2>

<p><a href="dxgkarg_queryadapterinfo" title="typedef struct _DXGKARG_QUERYADAPTERINFO {&#10;  [in]  DXGK_QUERYADAPTERINFOTYPE  Type;&#10;  [in]  VOID                       *pInputData;&#10;  [in]  UINT                       InputDataSize;&#10;  [out] VOID                       *pOutputData;&#10;  [in]  UINT                       OutputDataSize;&#10;  [in]  DXGK_QUERYADAPTERINFOFLAGS Flags;&#10;  [in]  HANDLE                     hKmdProcessHandle;&#10;} DXGKARG_QUERYADAPTERINFO;">DXGKARG_QUERYADAPTERINFO</a></p>

<p><a href="dxgk_drivercaps" title="typedef struct _DXGK_DRIVERCAPS {&#10;  [out] PHYSICAL_ADDRESS                   HighestAcceptableAddress;&#10;  [out] UINT                               MaxAllocationListSlotId;&#10;  [out] SIZE_T                             ApertureSegmentCommitLimit;&#10;  [out] UINT                               MaxPointerWidth;&#10;  [out] UINT                               MaxPointerHeight;&#10;  [out] DXGK_POINTERFLAGS                  PointerCaps;&#10;  [out] UINT                               InterruptMessageNumber;&#10;  [out] UINT                               NumberOfSwizzlingRanges;&#10;  [out] UINT                               MaxOverlays;&#10;  union {&#10;    [out] DXGK_GAMMARAMPCAPS      GammaRampCaps;&#10;    [out] DXGK_COLORTRANSFORMCAPS ColorTransformCaps;&#10;  };&#10;  [out] DXGK_PRESENTATIONCAPS              PresentationCaps;&#10;  [out] UINT                               MaxQueuedFlipOnVSync;&#10;  [out] DXGK_FLIPCAPS                      FlipCaps;&#10;  [out] DXGK_VIDSCHCAPS                    SchedulingCaps;&#10;  [out] DXGK_VIDMMCAPS                     MemoryManagementCaps;&#10;  [out] DXGK_GPUENGINETOPOLOGY             GpuEngineTopology;&#10;...">DXGK_DRIVERCAPS</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkcb_setpowercomponentactive">DxgkCbSetPowerComponentActive</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkcb_setpowercomponentlatency">DxgkCbSetPowerComponentLatency</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkcb_setpowercomponentresidency">DxgkCbSetPowerComponentResidency</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_add_device">DxgkDdiAddDevice</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkddipowerruntimecontrolrequest">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3dkmddi/nc-d3dkmddi-dxgkddipowerruntimecontrolrequest.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
