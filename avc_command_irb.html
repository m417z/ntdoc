<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="AVC_COMMAND_IRB - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>AVC_COMMAND_IRB - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            AVC_COMMAND_IRB - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// avc.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _AVC_COMMAND_IRB {
  <a href="avc_irb" title="typedef struct _AVC_IRB {&#10;  AVC_FUNCTION Function;&#10;} AVC_IRB, *PAVC_IRB;">AVC_IRB</a>       Common;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>         SubunitAddrFlag : 1;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>         AlternateOpcodesFlag : 1;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>         TimeoutFlag : 1;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>         RetryFlag : 1;
  union {
    <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> CommandType;
    <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> ResponseCode;
  };
  PUCHAR        SubunitAddr;
  PUCHAR        AlternateOpcodes;
  LARGE_INTEGER Timeout;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>         Retries;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>         Opcode;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         OperandLength;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>         Operands[MAX_AVC_OPERAND_BYTES];
  <a href="node_address" title="typedef struct _NODE_ADDRESS {&#10;  USHORT NA_Node_Number : 6;&#10;  USHORT NA_Bus_Number : 10;&#10;} NODE_ADDRESS, *PNODE_ADDRESS;">NODE_ADDRESS</a>  NodeAddress;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         Generation;
} AVC_COMMAND_IRB, *PAVC_COMMAND_IRB;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/avc/ns-avc-_avc_command_irb">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/avc_command_irb.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-avc-_avc_command_irb)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_avc_command_irb-structure">_AVC_COMMAND_IRB structure</h1>

<h2 id="description">Description</h2>

<p>The AVC_COMMAND_IRB structure defines a structure that contains an AV/C command and response pair.</p>

<h2 id="members">Members</h2>

<h3 id="common"><code>Common</code></h3>

<p>This must be set to the <strong>AVC_FUNCTION_COMMAND</strong> enumerator from the <a href="avc_function" title="typedef enum _tagAVC_FUNCTION {&#10;  AVC_FUNCTION_COMMAND,&#10;  AVC_FUNCTION_GET_PIN_COUNT,&#10;  AVC_FUNCTION_GET_PIN_DESCRIPTOR,&#10;  AVC_FUNCTION_GET_CONNECTINFO,&#10;  AVC_FUNCTION_SET_CONNECTINFO,&#10;  AVC_FUNCTION_ACQUIRE,&#10;  AVC_FUNCTION_RELEASE,&#10;  AVC_FUNCTION_CLR_CONNECTINFO,&#10;  AVC_FUNCTION_GET_EXT_PLUG_COUNTS,&#10;  AVC_FUNCTION_GET_UNIQUE_ID,&#10;  AVC_FUNCTION_GET_REQUEST,&#10;  AVC_FUNCTION_SEND_RESPONSE,&#10;  AVC_FUNCTION_FIND_PEER_DO,&#10;  AVC_FUNCTION_PEER_DO_LIST,&#10;  AVC_FUNCTION_GET_SUBUNIT_INFO&#10;} AVC_FUNCTION;">AVC_FUNCTION</a> enumeration.</p>

<h3 id="subunitaddrflag"><code>SubunitAddrFlag</code></h3>

<p>This is a flag indicating if the <strong>SubunitAddr</strong> member specifies an address. Set to one if it does, otherwise set to zero.</p>

<h3 id="alternateopcodesflag"><code>AlternateOpcodesFlag</code></h3>

<p>This is a flag indicating if the <strong>AlternateOpcodes</strong> member is valid. Set to one if it is, otherwise set to zero.</p>

<h3 id="timeoutflag"><code>TimeoutFlag</code></h3>

<p>Set this to one if the default time-out is not appropriate for the subunit. If this is set, the <strong>Timeout</strong> member must be set to the desired time-out (in 100-ns units).</p>

<h3 id="retryflag"><code>RetryFlag</code></h3>

<p>Set this to one if the default retry count is not appropriate for the subunit. If this is set, the <strong>Retries</strong> member must be set to the desired retry count.</p>

<h3 id="commandtype"><code>CommandType</code></h3>

<p>This specifies a value from the <a href="avccommandtype" title="typedef enum _tagAvcCommandType {&#10;  AVC_CTYPE_CONTROL,&#10;  AVC_CTYPE_STATUS,&#10;  AVC_CTYPE_SPEC_INQ,&#10;  AVC_CTYPE_NOTIFY,&#10;  AVC_CTYPE_GEN_INQ&#10;} AvcCommandType;">AvcCommandType</a> enumeration. This member is used only during AVC_FUNCTION_GET_REQUEST. It is ignored otherwise.</p>

<h3 id="responsecode"><code>ResponseCode</code></h3>

<p>This specifies a value from the <a href="avcresponsecode" title="typedef enum _tagAvcResponseCode {&#10;  AVC_RESPONSE_NOTIMPL,&#10;  AVC_RESPONSE_ACCEPTED,&#10;  AVC_RESPONSE_REJECTED,&#10;  AVC_RESPONSE_IN_TRANSITION,&#10;  AVC_RESPONSE_STABLE,&#10;  AVC_RESPONSE_IMPLEMENTED,&#10;  AVC_RESPONSE_CHANGED,&#10;  AVC_RESPONSE_INTERIM&#10;} AvcResponseCode;">AvcResponseCode</a> enumeration. This member is used only during AVC_FUNCTION_SEND_RESPONSE. It is ignored otherwise.</p>

<h3 id="subunitaddr"><code>SubunitAddr</code></h3>

<p>Set this to the address of nonpaged memory containing the desired subunit address encoded according to Section 5.3.3 of the AV/C Digital Interface Command Set General Specification, Rev 3.0. No length is necessary because the subunit address encoding implies this. This parameter is ignored if <strong>SubunitAddrFlag</strong> is zero.</p>

<h3 id="alternateopcodes"><code>AlternateOpcodes</code></h3>

<p>Set this to the address of nonpaged memory containing the desired alternate opcode list. The first byte of the opcode list is the count of opcodes to follow (equivalent to the number of bytes). The total length of the memory containing the alternate opcode list is AlternateOpcodes[0]+1. This parameter is ignored if <strong>AlternateOpcodesFlag</strong> is zero.</p>

<h3 id="timeout"><code>Timeout</code></h3>

<p>Set this to the desired time-out in 100-ns units. For example, the default time-out value is: <strong>Timeout.QuadPart</strong> = 1000000 (100ms in 100ns units). This parameter is ignored if <strong>TimeoutFlag</strong> is zero.</p>

<h3 id="retries"><code>Retries</code></h3>

<p>Set this to the desired number of times <em>avc.sys</em> should attempt to retry requests after each time-out without a response. Note that a retry count of zero means that the request is tried once. The total amount of time spent trying to process a command without getting a response is Timeout * (Retries + 1). This parameter is ignored if <strong>RetryFlag</strong> is zero.</p>

<h3 id="opcode"><code>Opcode</code></h3>

<p>Set this to the desired AV/C opcode (appropriate for the subunit type). This is a required parameter. On response, if <strong>AlternateOpcodesFlag</strong> was set, and one of the alternate opcodes was used to match the response, this is set to that alternate opcode.</p>

<h3 id="operandlength"><code>OperandLength</code></h3>

<p>Set this to the number of bytes used to store the operands in the <strong>Operands</strong> member. This is a required parameter. On response, this parameter is set to the number of bytes in the operand list used by the response.</p>

<h3 id="operands"><code>Operands</code></h3>

<p>Set this to the operand list appropriate for the subunit type and opcode. This is a required parameter. On response, this parameter contains the operand list of the response.</p>

<h3 id="nodeaddress"><code>NodeAddress</code></h3>

<p>Reserved. This member must be zero.</p>

<h3 id="generation"><code>Generation</code></h3>

<p>Reserved. This member must be zero.</p>

<h2 id="remarks">Remarks</h2>

<p>This structure is used with the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/stream/avc-function-command">AVC_FUNCTION_COMMAND</a>, <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/stream/avc-function-get-request">AVC_FUNCTION_GET_REQUEST</a> and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/stream/avc-function-send-response">AVC_FUNCTION_SEND_RESPONSE</a> function codes.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/avc/ne-avc-_tagavc_function">AVC_FUNCTION</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/stream/avc-function-command">AVC_FUNCTION_COMMAND</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/stream/avc-function-get-request">AVC_FUNCTION_GET_REQUEST</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/stream/avc-function-send-response">AVC_FUNCTION_SEND_RESPONSE</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/avc/ns-avc-_avc_command_irb">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/avc/ns-avc-_avc_command_irb.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
