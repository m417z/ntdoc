<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NdisRegisterProtocol - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NdisRegisterProtocol - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NdisRegisterProtocol - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">VOID NdisRegisterProtocol(
  [out] PNDIS_STATUS                   Status,
  [out] PNDIS_HANDLE                   NdisProtocolHandle,
  [in]  PNDIS_PROTOCOL_CHARACTERISTICS ProtocolCharacteristics,
  [in]  <a href="uint" title="typedef unsigned int UINT;">UINT</a>                           CharacteristicsLength
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisregisterprotocol">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndisregisterprotocol.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ndis-ndisregisterprotocol)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="ndisregisterprotocol-function">NdisRegisterProtocol function</h1>

<h2 id="description">Description</h2>

<p><strong>Note</strong> NDIS 5. <em>x</em> has been deprecated and is superseded by NDIS 6. <em>x</em>. For new NDIS driver development, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/_netvista/">Network Drivers Starting with Windows Vista</a>. For information about porting NDIS 5. <em>x</em> drivers to NDIS 6. <em>x</em>, see <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/Ff570059">Porting NDIS 5.x Drivers to NDIS 6.0</a>.</p>

<p><strong>NdisRegisterProtocol</strong> registers an NDIS driver's <em>ProtocolXxx</em> entry points and name with the NDIS library when the driver initializes.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="status-out"><code>Status</code> [out]</h3>

<p>Pointer to a caller-supplied variable that can be one of the following values on return from this function:</p>

<ul>
<li><p>NDIS_STATUS_SUCCESS
The NDIS library registered the caller as a protocol driver.</p></li>
<li><p>NDIS_STATUS_BAD_CHARACTERISTICS
The <em>CharacteristicsLength</em> is too small for the <strong>MajorNdisVersion</strong> specified in the buffer at <em>ProtocolCharacteristics</em>.</p></li>
<li><p>NDIS_STATUS_BAD_VERSION
The <strong>MajorNdisVersion</strong> specified in the buffer at <em>ProtocolCharacteristics</em> is invalid.</p></li>
<li><p>NDIS_STATUS_RESOURCES
A shortage of resources, possibly memory, prevented the NDIS library from registering the caller.</p></li>
</ul>

<h3 id="ndisprotocolhandle-out"><code>NdisProtocolHandle</code> [out]</h3>

<p>Pointer to a caller-supplied variable in which this function returns a handle representing the registered driver.</p>

<h3 id="protocolcharacteristics-in"><code>ProtocolCharacteristics</code> [in]</h3>

<p>Pointer to an NDIS_PROTOCOL_CHARACTERISTICS structure set up by the caller. The structure at <em>ProtocolCharacteristics</em> is defined as follows:</p>

<p><!-- CODE_MARKER --></p>

<div class="codehilite">
<pre><span></span><code><span class="w">        </span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">_NDIS_PROTOCOL_CHARACTERISTICS</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n"><a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a></span><span class="w"> </span><span class="n">MajorNdisVersion</span><span class="p">;</span>
<span class="w">            </span><span class="n"><a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a></span><span class="w"> </span><span class="n">MinorNdisVersion</span><span class="p">;</span>
<span class="w">            </span><span class="n"><a href="uint" title="typedef unsigned int UINT;">UINT</a></span><span class="w"> </span><span class="n">Reserved</span><span class="p">;</span>
<span class="w">            </span><span class="n">OPEN_ADAPTER_COMPLETE_HANDLER</span><span class="w"> </span><span class="n">OpenAdapterCompleteHandler</span><span class="p">;</span>
<span class="w">            </span><span class="n">CLOSE_ADAPTER_COMPLETE_HANDLER</span><span class="w"> </span><span class="n">CloseAdapterCompleteHandler</span><span class="p">;</span>
<span class="w">            </span><span class="n">SEND_COMPLETE_HANDLER</span><span class="w"> </span><span class="n">SendCompleteHandler</span><span class="p">;</span>
<span class="w">            </span><span class="n">TRANSFER_DATA_COMPLETE_HANDLER</span><span class="w"> </span><span class="n">TransferDataCompleteHandler</span><span class="p">;</span>
<span class="w">            </span><span class="n">RESET_COMPLETE_HANDLER</span><span class="w"> </span><span class="n">ResetCompleteHandler</span><span class="p">;</span>
<span class="w">            </span><span class="n">REQUEST_COMPLETE_HANDLER</span><span class="w"> </span><span class="n">RequestCompleteHandler</span><span class="p">;</span>
<span class="w">            </span><span class="n">RECEIVE_HANDLER</span><span class="w"> </span><span class="n">ReceiveHandler</span><span class="p">;</span>
<span class="w">            </span><span class="n">RECEIVE_COMPLETE_HANDLER</span><span class="w"> </span><span class="n">ReceiveCompleteHandler</span><span class="p">;</span>
<span class="w">            </span><span class="n">STATUS_HANDLER</span><span class="w"> </span><span class="n">StatusHandler</span><span class="p">;</span>
<span class="w">            </span><span class="n">STATUS_COMPLETE_HANDLER</span><span class="w"> </span><span class="n">StatusCompleteHandler</span><span class="p">;</span>
<span class="w">            </span><span class="n">NDIS_STRING</span><span class="w"> </span><span class="n">Name</span><span class="p">;</span>
<span class="w">        </span><span class="c1">//</span>
<span class="w">        </span><span class="c1">// MajorNdisVersion must be set to 0x04 or 0x05</span>
<span class="w">        </span><span class="c1">// with any of the following members.</span>
<span class="w">        </span><span class="c1">//</span>
<span class="w">            </span><span class="n">RECEIVE_PACKET_HANDLER</span><span class="w"> </span><span class="n">ReceivePacketHandler</span><span class="p">;</span>
<span class="w">            </span><span class="n">BIND_HANDLER</span><span class="w"> </span><span class="n">BindAdapterHandler</span><span class="p">;</span>
<span class="w">            </span><span class="n">UNBIND_HANDLER</span><span class="w"> </span><span class="n">UnbindAdapterHandler</span><span class="p">;</span>
<span class="w">            </span><span class="n">PNP_EVENT_HANDLER</span><span class="w"> </span><span class="n">PnPEventHandler</span><span class="p">;</span>
<span class="w">            </span><span class="n">UNLOAD_PROTOCOL_HANDLER</span><span class="w"> </span><span class="n">UnloadHandler</span><span class="p">;</span>
<span class="w">        </span><span class="c1">//</span>
<span class="w">        </span><span class="c1">// MajorNdisVersion must be set to 0x05</span>
<span class="w">        </span><span class="c1">// with any of the following members.</span>
<span class="w">        </span><span class="c1">//</span>
<span class="w">            </span><span class="n">CO_SEND_COMPLETE_HANDLER</span><span class="w"> </span><span class="n">CoSendCompleteHandler</span><span class="p">;</span>
<span class="w">            </span><span class="n">CO_STATUS_HANDLER</span><span class="w"> </span><span class="n">CoStatusHandler</span><span class="p">;</span>
<span class="w">            </span><span class="n">CO_RECEIVE_PACKET_HANDLER</span><span class="w"> </span><span class="n">CoReceivePacketHandler</span><span class="p">;</span>
<span class="w">            </span><span class="n">CO_AF_REGISTER_NOTIFY_HANDLER</span><span class="w"> </span><span class="n">CoAfRegisterNotifyHandler</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="n">NDIS_PROTOCOL_CHARACTERISTICS</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">PNDIS_PROTOCOL_CHARACTERISTICS</span><span class="p">;</span>
</code></pre>
</div>

<p>The driver should initialize this structure with zeros before setting up the following members:</p>

<ul>
<li><p><strong>MajorNdisVersion</strong>
Specifies the major version of the NDIS library the driver is using. The current value is 0x05, although the NDIS library continues to support existing drivers developed for NDIS V4.0. NDIS no longer supports V3.0 protocols.</p></li>
<li><p><strong>MinorNdisVersion</strong>
Specifies the minor NDIS version. The current value is 0x00.</p></li>
<li><p><strong>Reserved</strong>
This member is reserved for system use.</p></li>
<li><p><strong>OpenAdapterCompleteHandler</strong>
Specifies the entry point of the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563238/(v=vs.85/)"><strong>ProtocolOpenAdapterComplete</strong></a> function.</p></li>
<li><p><strong>CloseAdapterCompleteHandler</strong>
Specifies the entry point of the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff562502/(v=vs.85/)"><strong>ProtocolCloseAdapterComplete</strong></a> function.</p></li>
<li><p><strong>SendCompleteHandler</strong>
Specifies the entry point of the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563256/(v=vs.85/)"><strong>ProtocolSendComplete</strong></a> function, if any.</p></li>
<li><p><strong>TransferDataCompleteHandler</strong>
Specifies the entry point of the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563259/(v=vs.85/)"><strong>ProtocolTransferDataComplete</strong></a> function, if any.</p></li>
<li><p><strong>ResetCompleteHandler</strong>
Specifies the entry point of the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563255/(v=vs.85/)"><strong>ProtocolResetComplete</strong></a> function.</p></li>
<li><p><strong>RequestCompleteHandler</strong>
Specifies the entry point of the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563254/(v=vs.85/)"><strong>ProtocolRequestComplete</strong></a> function.</p></li>
<li><p><strong>ReceiveHandler</strong>
Specifies the entry point of the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563246/(v=vs.85/)"><strong>ProtocolReceive</strong></a> function, if any.</p></li>
<li><p><strong>ReceiveCompleteHandler</strong>
Specifies the entry point of the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563249/(v=vs.85/)"><strong>ProtocolReceiveComplete</strong></a> function.</p></li>
<li><p><strong>StatusHandler</strong>
Specifies the entry point of the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563257/(v=vs.85/)"><strong>ProtocolStatus</strong></a> function, if any.</p></li>
<li><p><strong>StatusCompleteHandler</strong>
Specifies the entry point of the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563258/(v=vs.85/)"><strong>ProtocolStatusComplete</strong></a> function.</p></li>
<li><p><strong>Name</strong>
An NDIS_STRING type containing a caller-initialized counted string, in the system-default character set, naming the driver. For Windows 2000 and later drivers, this string contains Unicode characters. That is, for Windows 2000 and later, NDIS defines the NDIS_STRING type as a <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/Ff564879"><strong>UNICODE_STRING</strong></a> type. This string must match that specified in the registry (under <em>Services</em>) when the protocol was installed.</p>

<p><strong>NdisRegisterProtocol</strong> converts the supplied string to upper case, so a protocol driver writer cannot assume that changing the case of an already registered protocol name creates a unique name for the driver.</p></li>
<li><p><strong>ReceivePacketHandler</strong>
Specifies the entry point of the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563251/(v=vs.85/)"><strong>ProtocolReceivePacket</strong></a> function, if any, or <strong>NULL</strong>. Protocols that bind to any NIC driver that supports multipacket receive indications should supply a <em>ProtocolReceivePacket</em> function to enhance their performance. However, a protocol that binds itself exclusively to connection-oriented miniports also can set this member to <strong>NULL</strong>.</p></li>
<li><p><strong>BindAdapterHandler</strong>
Specifies the entry point of the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff562465/(v=vs.85/)"><strong>ProtocolBindAdapter</strong></a> function. Callers that set the value in the <strong>MajorNdisVersion</strong> member to 0x05 or 0x04 must supply a <em>ProtocolBindAdapter</em> function and support Plug and Play. NDIS intermediate drivers also must supply a <em>ProtocolBindAdapter</em> function, which allows those intermediate drivers to call <strong><a href="ndisimregisterlayeredminiport" title="NDIS_STATUS NdisIMRegisterLayeredMiniport(&#10;  [in]  NDIS_HANDLE                    NdisWrapperHandle,&#10;  [in]  PNDIS_MINIPORT_CHARACTERISTICS MiniportCharacteristics,&#10;  [in]  UINT                           CharacteristicsLength,&#10;  [out] PNDIS_HANDLE                   DriverHandle&#10;);">NdisIMRegisterLayeredMiniport</a></strong> and to defer full driver initialization until underlying NIC drivers have initialized.</p></li>
<li><p><strong>UnbindAdapterHandler</strong>
Specifies the entry point of the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563260/(v=vs.85/)"><strong>ProtocolUnbindAdapter</strong></a> function. NDIS drivers that supply a <em>ProtocolBindAdapter</em> function also must supply a <em>ProtocolUnbindAdapter</em> function.</p></li>
<li><p><strong>PnPEventHandler</strong>
Specifies the entry point of the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563243/(v=vs.85/)"><strong>ProtocolPnPEvent</strong></a> function, if any.</p></li>
<li><p><strong>UnloadHandler</strong>
Specifies the entry point of the caller's <strong>ProtocolUnbind</strong> function, if any, or <strong>NULL</strong>.</p></li>
<li><p><strong>CoSendCompleteHandler</strong>
Specifies the entry point of the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563230/(v=vs.85/)"><strong>ProtocolCoSendComplete</strong></a> function, which a connection-oriented client or call manager must supply. A connection-oriented client supplies a <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563256/(v=vs.85/)"><strong>ProtocolSendComplete</strong></a> function if it also binds itself to connectionless miniports.</p></li>
<li><p><strong>CoStatusHandlerCoStatusHandler</strong>
Specifies the entry point of the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563235/(v=vs.85/)"><strong>ProtocolCoStatus</strong></a> function, which a connection-oriented client or call manager must supply. A connection-oriented client supplies a <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563257/(v=vs.85/)"><strong>ProtocolStatus</strong></a> function if it also binds itself to connectionless miniports.</p></li>
<li><p><strong>CoReceivePacketHandler</strong>
Specifies the entry point of the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563224/(v=vs.85/)"><strong>ProtocolCoReceivePacket</strong></a> function, which a connection-oriented client or call manager must supply. A connection-oriented client supplies a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/ms893547(v=msdn.10)"><strong>ProtocolReceivePacket</strong></a> function and/or <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563246/(v=vs.85/).md"><strong>ProtocolReceive</strong></a> and <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563259/(v=vs.85/)"><strong>ProtocolTransferDataComplete</strong></a> functions if it also binds itself to connectionless miniports.</p></li>
<li><p><strong>CoAfRegisterNotifyHandler</strong>
Specifies the entry point of the caller's <strong>ProtocolAfRegisterNotify</strong> function, which a connection-oriented client must supply.</p></li>
</ul>

<h3 id="characteristicslength-in"><code>CharacteristicsLength</code> [in]</h3>

<p>Specifies the size in bytes of the structure at <em>ProtocolCharacteristics</em>. If the build directive -DNDIS50=1 or -DNDIS40=1 is specified in the <em>sources</em> file ahead of <strong>#include</strong><em>Ndis.h</em> , the sizeof(NDIS_PROTOCOL_CHARACTERISTICS) is automatically set to the appropriate value. If neither directive is specified, NDIS assumes the V3.0 characteristics structure is being used.</p>

<p>The values set in the <strong>MajorNdisVersion</strong> and <strong>MinorNdisVersion</strong> members of the characteristics structure must be consistent with the build directive, or they must be 0x03 and 0x00, respectively.</p>

<h2 id="remarks">Remarks</h2>

<p>A protocol driver must specify a <strong>MajorNdisVersion</strong> of 0x05 (the current version) or 0x04. NDIS no longer supports V.30 protocols and therefore does not load a protocol that specifies a <strong>MajorNdisVersion</strong> of 0x03.</p>

<p>All protocols must be Plug and Play (PnP) capable. A protocol must therefore specify entry points for <strong>BindAdapterHandler</strong> and <strong>UnbindAdapterHandler</strong>. NDIS does not load a protocol that specifies <strong>NULL</strong> for these handlers.</p>

<p>For the best possible performance, any protocol that will layer itself above a connectionless NIC driver that supports multipacket receives should provide a <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563251/(v=vs.85/)"><strong>ProtocolReceivePacket</strong></a> function. Such a protocol driver also must provide a <em>ProtocolReceive</em> function. Any connectionless NIC driver that supports multipacket sends is also likely to indicate multipacket receives.</p>

<p>All connection-oriented protocols, whether clients or call managers, must register a <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563224/(v=vs.85/)"><strong>ProtocolCoReceivePacket</strong></a> function. Client protocols that also bind themselves to connectionless NIC drivers provide <em>ProtocolReceivePacket</em> and <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563246/(v=vs.85/).md"><strong>ProtocolReceive</strong></a> functions as well. Connection-oriented protocols must register additional connection-oriented entry points with NDIS by calling either <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff550895/(v=vs.85/).md"><strong>NdisClOpenAddressFamily</strong></a> for clients or <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff551006/(v=vs.85/)"><strong>NdisCmRegisterAddressFamily</strong></a> for call managers from their <em>ProtocolBindAdapter</em> functions.</p>

<p>After a successful call to <strong>NdisRegisterProtocol</strong>, a driver cannot alter the set of <em>ProtocolXxx</em> functions it supplied.</p>

<p>A successfully registered driver should save the handle returned at <em>NdisProtocolHandle</em>. It is a required parameter to other <em>NdisXxx</em> functions that the driver calls subsequently.</p>

<p>After a successful call to <strong>NdisRegisterProtocol</strong>, the <strong><a href="driverentry" title="NTSTATUS DriverEntry(&#10;  [in] PDRIVER_OBJECT  DriverObject,&#10;  [in] PUNICODE_STRING RegistryPath&#10;);">DriverEntry</a></strong> function of a PnP-aware or connection-oriented protocol returns control because such a driver's <em>ProtocolBindAdapter</em> function will be called subsequently one or more times to set up bindings to underlying NIC(s). Otherwise, the protocol driver can call <strong><a href="ndisopenadapter" title="VOID NdisOpenAdapter(&#10;  [out]          PNDIS_STATUS Status,&#10;  [out]          PNDIS_STATUS OpenErrorStatus,&#10;  [out]          PNDIS_HANDLE NdisBindingHandle,&#10;  [out]          PUINT        SelectedMediumIndex,&#10;  [in]           PNDIS_MEDIUM MediumArray,&#10;  [in]           UINT         MediumArraySize,&#10;  [in]           NDIS_HANDLE  NdisProtocolHandle,&#10;  [in]           NDIS_HANDLE  ProtocolBindingContext,&#10;  [in]           PNDIS_STRING AdapterName,&#10;  [in]           UINT         OpenOptions,&#10;  [in, optional] PSTRING      AddressingInformation&#10;);">NdisOpenAdapter</a></strong> to set up a binding to the underlying NIC driver or to layer itself above any NDIS driver that registered a set of NDIS <em>MiniportXxx</em> functions.</p>

<ul>
<li>Target platform: <a rel="noopener" target="_blank" href="https://go.microsoft.com/fwlink/p/?linkid=531356">Universal</a></li>
<li>Version: Not supported for NDIS 6.0 drivers in Windows Vista. Use <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/Ff564520"><strong>NdisRegisterProtocolDriver</strong></a>instead. Supported for NDIS 5.1 drivers in Windows Vista and Windows XP.</li>
</ul>

<h2 id="see-also">See also</h2>

<ul>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/Ff540605"><strong>ANSI_STRING</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/Ff548821"><strong>DriverEntry of NDIS Protocol Drivers</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff550895/(v=vs.85/)"><strong>NdisClOpenAddressFamily</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff551006/(v=vs.85/)"><strong>NdisCmRegisterAddressFamily</strong></a></li>
<li><strong><a href="ndisderegisterprotocol" title="VOID NdisDeregisterProtocol(&#10;  [out] PNDIS_STATUS Status,&#10;  [in]  NDIS_HANDLE  NdisProtocolHandle&#10;);">NdisDeregisterProtocol</a></strong></li>
<li><strong><a href="ndisimregisterlayeredminiport" title="NDIS_STATUS NdisIMRegisterLayeredMiniport(&#10;  [in]  NDIS_HANDLE                    NdisWrapperHandle,&#10;  [in]  PNDIS_MINIPORT_CHARACTERISTICS MiniportCharacteristics,&#10;  [in]  UINT                           CharacteristicsLength,&#10;  [out] PNDIS_HANDLE                   DriverHandle&#10;);">NdisIMRegisterLayeredMiniport</a></strong></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/Ff562741"><strong>NdisInitializeString</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/Ff562745"><strong>NdisInitUnicodeString</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff553429/(v=vs.85/)"><strong>NdisMCmRegisterAddressFamily</strong></a></li>
<li><strong><a href="ndisopenadapter" title="VOID NdisOpenAdapter(&#10;  [out]          PNDIS_STATUS Status,&#10;  [out]          PNDIS_STATUS OpenErrorStatus,&#10;  [out]          PNDIS_HANDLE NdisBindingHandle,&#10;  [out]          PUINT        SelectedMediumIndex,&#10;  [in]           PNDIS_MEDIUM MediumArray,&#10;  [in]           UINT         MediumArraySize,&#10;  [in]           NDIS_HANDLE  NdisProtocolHandle,&#10;  [in]           NDIS_HANDLE  ProtocolBindingContext,&#10;  [in]           PNDIS_STRING AdapterName,&#10;  [in]           UINT         OpenOptions,&#10;  [in, optional] PSTRING      AddressingInformation&#10;);">NdisOpenAdapter</a></strong></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/Ff564698"><strong>NdisZeroMemory</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff562465/(v=vs.85/)"><strong>ProtocolBindAdapter</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff562502/(v=vs.85/)"><strong>ProtocolCloseAdapterComplete</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/Ff570251"><strong>ProtocolCoAfRegisterNotify</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563224/(v=vs.85/)"><strong>ProtocolCoReceivePacket</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563230/(v=vs.85/)"><strong>ProtocolCoSendComplete</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563235/(v=vs.85/)"><strong>ProtocolCoStatus</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563238/(v=vs.85/)"><strong>ProtocolOpenAdapterComplete</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563243/(v=vs.85/)"><strong>ProtocolPnPEvent</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563246/(v=vs.85/)"><strong>ProtocolReceive</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563249/(v=vs.85/)"><strong>ProtocolReceiveComplete</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563251/(v=vs.85/)"><strong>ProtocolReceivePacket</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563254/(v=vs.85/)"><strong>ProtocolRequestComplete</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563255/(v=vs.85/)"><strong>ProtocolResetComplete</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563256/(v=vs.85/)"><strong>ProtocolSendComplete</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563257/(v=vs.85/)"><strong>ProtocolStatus</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563258/(v=vs.85/)"><strong>ProtocolStatusComplete</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563259/(v=vs.85/)"><strong>ProtocolTransferDataComplete</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563260/(v=vs.85/)"><strong>ProtocolUnbindAdapter</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/Ff564879"><strong>UNICODE_STRING</strong></a></li>
</ul>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisregisterprotocol">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ndis/nf-ndis-ndisregisterprotocol.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
