<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="IDDCX_METADATA - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>IDDCX_METADATA - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            IDDCX_METADATA - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// iddcx.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">struct IDDCX_METADATA {
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>          Size;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>          PresentationFrameNumber;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>          DirtyRectCount;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>          MoveRegionCount;
  BOOL          HwProtectedSurface;
  <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a>        PresentDisplayQPCTime;
  IDXGIResource *pSurface;
};</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/iddcx/ns-iddcx-iddcx_metadata">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/iddcx_metadata.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-iddcx-iddcx_metadata)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="iddcx_metadata-structure">IDDCX_METADATA structure</h1>

<h2 id="description">Description</h2>

<p><strong>IDDCX_METADATA</strong> provides information about the current provided surface and what is displayed on it.</p>

<h2 id="members">Members</h2>

<h3 id="size"><code>Size</code></h3>

<p>Total size of the structure, in bytes.</p>

<h3 id="presentationframenumber"><code>PresentationFrameNumber</code></h3>

<p>Presentation frame number of this surface.</p>

<h3 id="dirtyrectcount"><code>DirtyRectCount</code></h3>

<p>Number of dirty rects for this frame. Call <strong><a href="iddcxswapchaingetdirtyrects" title="HRESULT IddCxSwapChainGetDirtyRects(&#10;  [in]  IDDCX_SWAPCHAIN              SwapChainObject,&#10;  [in]  const IDARG_IN_GETDIRTYRECTS *pInArgs,&#10;  [out] IDARG_OUT_GETDIRTYRECTS      *pOutArgs&#10;);">IddCxSwapChainGetDirtyRects</a></strong> to get the dirty rects.</p>

<p>A MoveRegionCount of zero and DirtyRectCount of 1, where the single dirty rect has all values set to zero, indicates that there has not been any image updates from the previous frame. This is an opportunity for the driver to re-encode the desktop image again to increase the visual quality. Once there are no more updates, the OS presents the same frame as many times as indicated by the <strong><a href="iddcx_adapter_caps" title="struct IDDCX_ADAPTER_CAPS {&#10;  UINT                           Size;&#10;  IDDCX_ADAPTER_FLAGS            Flags;&#10;  UINT64                         MaxDisplayPipelineRate;&#10;  UINT                           MaxMonitorsSupported;&#10;  IDDCX_ENDPOINT_DIAGNOSTIC_INFO EndPointDiagnostics;&#10;  UINT                           StaticDesktopReencodeFrameCount;&#10;};">IDDCX_ADAPTER_CAPS</a></strong> value <strong>StaticDesktopReencodeFrameCount</strong>, then stops presenting until the next update.</p>

<h3 id="moveregioncount"><code>MoveRegionCount</code></h3>

<p>Starting in IddCx v1.7, the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/iddcx1.7-updates"><strong>IDDCX_ADAPTER_FLAGS_CAN_USE_MOVE_REGIONS</strong> flag was deprecated</a> and move regions are no longer provided at acquire frame time, so this field will always be zero.</p>

<p>Number of move regions in this frame. Call <strong><a href="iddcxswapchaingetmoveregions" title="HRESULT IddCxSwapChainGetMoveRegions(&#10;  [in]  IDDCX_SWAPCHAIN               SwapChainObject,&#10;  [in]  const IDARG_IN_GETMOVEREGIONS *pInArgs,&#10;  [out] IDARG_OUT_GETMOVEREGIONS      *pOutArgs&#10;);">IddCxSwapChainGetMoveRegions</a></strong> to get the move regions.</p>

<h3 id="hwprotectedsurface"><code>HwProtectedSurface</code></h3>

<p>Indicates whether the provided surface is hardware protected.</p>

<h3 id="presentdisplayqpctime"><code>PresentDisplayQPCTime</code></h3>

<p>System QPC time of when this surface should be displayed on the indirect display monitor.</p>

<h3 id="psurface"><code>pSurface</code></h3>

<p>Pointer to a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/dxgi/nn-dxgi-idxgiresource"><strong>IDXGIResource</strong></a> DX surface that contains the image to encode and transmit. The driver can use this DX surface anytime until <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/iddcx/nf-iddcx-iddcxswapchainreleaseandacquirebuffer"><strong>IddCxSwapChainReleaseAndAcquire</strong></a> is called again.</p>

<blockquote>
  <p>[!NOTE]
  This surface is always a A8R8G8B8 formatted surface.</p>
</blockquote>

<h2 id="remarks">Remarks</h2>

<p>A single empty dirty rect indicates there were no desktop updates.</p>

<h3 id="see-also">See also</h3>

<p><strong><a href="iddcx_frame_statistics" title="struct IDDCX_FRAME_STATISTICS {&#10;  UINT                         Size;&#10;  UINT                         PresentationFrameNumber;&#10;  IDDCX_FRAME_STATUS           FrameStatus;&#10;  UINT                         ReEncodeNumber;&#10;  UINT                         FrameSliceTotal;&#10;  UINT                         CurrentSlice;&#10;  UINT64                       FrameAcquireQpcTime;&#10;  UINT                         FrameProcessingStepsCount;&#10;  IDDCX_FRAME_STATISTICS_STEP  *pFrameProcessingStep;&#10;  UINT64                       SendStartQpcTime;&#10;  UINT64                       SendStopQpcTime;&#10;  UINT64                       SendCompleteQpcTime;&#10;  IDDCX_FRAME_STATISTICS_FLAGS Flags;&#10;  UINT                         ProcessedPixelCount;&#10;  UINT                         FrameSizeInBytes;&#10;};">IDDCX_FRAME_STATISTICS</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/iddcx/ns-iddcx-iddcx_metadata">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/iddcx/ns-iddcx-iddcx_metadata.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
