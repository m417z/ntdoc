<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="KeRemoveByKeyDeviceQueue - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>KeRemoveByKeyDeviceQueue - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            KeRemoveByKeyDeviceQueue - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">PKDEVICE_QUEUE_ENTRY KeRemoveByKeyDeviceQueue(
  [in, out] PKDEVICE_QUEUE DeviceQueue,
  [in]      <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>          SortKey
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-keremovebykeydevicequeue">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/keremovebykeydevicequeue.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-wdm-keremovebykeydevicequeue)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="keremovebykeydevicequeue-function">KeRemoveByKeyDeviceQueue function</h1>

<h2 id="description">Description</h2>

<p>The <strong>KeRemoveByKeyDeviceQueue</strong> routine removes an entry, selected according to a sort key value, from the specified device queue.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="devicequeue-in-out"><code>DeviceQueue</code> [in, out]</h3>

<p>Pointer to an initialized device queue object for which the caller provides the storage.</p>

<h3 id="sortkey-in"><code>SortKey</code> [in]</h3>

<p>Specifies the key to be used when searching the <em>DeviceQueue</em>.</p>

<h2 id="return-value">Return value</h2>

<p><strong>KeRemoveByKeyDeviceQueue</strong> returns the device queue entry that was removed; returns <strong>NULL</strong> if the queue was empty.</p>

<h2 id="remarks">Remarks</h2>

<p>This routine searches for the first entry in the device queue that has a value greater than or equal to the <em>SortKey</em>. After this entry is found, this routine removes the entry from the device queue and returns it. If no such entry is found, then the first entry in the queue is returned. If the device queue is empty, then the device is set to a not-busy state and a <strong>NULL</strong> pointer is returned.</p>

<p>It is an error to call <strong>KeRemoveByKeyDeviceQueue</strong> when the device queue object is set to a not-busy state.</p>

<h2 id="see-also">See also</h2>

<p><a href="keinitializedevicequeue" title="VOID KeInitializeDeviceQueue(&#10;  [out] PKDEVICE_QUEUE DeviceQueue&#10;);">KeInitializeDeviceQueue</a></p>

<p><a href="keinsertbykeydevicequeue" title="BOOLEAN KeInsertByKeyDeviceQueue(&#10;  [in, out] PKDEVICE_QUEUE       DeviceQueue,&#10;  [in, out] PKDEVICE_QUEUE_ENTRY DeviceQueueEntry,&#10;  [in]      ULONG                SortKey&#10;);">KeInsertByKeyDeviceQueue</a></p>

<p><a href="keinsertdevicequeue" title="BOOLEAN KeInsertDeviceQueue(&#10;  [in, out] PKDEVICE_QUEUE       DeviceQueue,&#10;  [in, out] PKDEVICE_QUEUE_ENTRY DeviceQueueEntry&#10;);">KeInsertDeviceQueue</a></p>

<p><a href="keremovedevicequeue" title="PKDEVICE_QUEUE_ENTRY KeRemoveDeviceQueue(&#10;  [in, out] PKDEVICE_QUEUE DeviceQueue&#10;);">KeRemoveDeviceQueue</a></p>

<p><a href="keremoveentrydevicequeue" title="BOOLEAN KeRemoveEntryDeviceQueue(&#10;  [in, out] PKDEVICE_QUEUE       DeviceQueue,&#10;  [in, out] PKDEVICE_QUEUE_ENTRY DeviceQueueEntry&#10;);">KeRemoveEntryDeviceQueue</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-keremovebykeydevicequeue">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/nf-wdm-keremovebykeydevicequeue.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
