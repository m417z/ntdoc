<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="KE_PROCESSOR_CHANGE_NOTIFY_CONTEXT - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>KE_PROCESSOR_CHANGE_NOTIFY_CONTEXT - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            KE_PROCESSOR_CHANGE_NOTIFY_CONTEXT - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _KE_PROCESSOR_CHANGE_NOTIFY_CONTEXT {
  <a href="ke_processor_change_notify_state" title="typedef enum {&#10;  KeProcessorAddStartNotify,&#10;  KeProcessorAddCompleteNotify,&#10;  KeProcessorAddFailureNotify&#10;} KE_PROCESSOR_CHANGE_NOTIFY_STATE;">KE_PROCESSOR_CHANGE_NOTIFY_STATE</a> State;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                            NtNumber;
  <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a>                         Status;
  <a href="processor_number" title="typedef struct _PROCESSOR_NUMBER {&#10;  USHORT Group;&#10;  UCHAR  Number;&#10;  UCHAR  Reserved;&#10;} PROCESSOR_NUMBER, *PPROCESSOR_NUMBER;">PROCESSOR_NUMBER</a>                 ProcNumber;
} KE_PROCESSOR_CHANGE_NOTIFY_CONTEXT, *PKE_PROCESSOR_CHANGE_NOTIFY_CONTEXT;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_ke_processor_change_notify_context">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ke_processor_change_notify_context.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-wdm-_ke_processor_change_notify_context)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>_KE_PROCESSOR_CHANGE_NOTIFY_CONTEXT structure</h1>
<h2>Description</h2>
<p>The <strong>KE_PROCESSOR_CHANGE_NOTIFY_CONTEXT</strong> structure describes the notification context that is passed to a registered callback function when a new processor is dynamically added to a hardware partition.</p>
<h2>Members</h2>
<h3><code>State</code></h3>
<p>The state of the processor add operation. Possible values are as follows:</p>
<h4>KeProcessorAddStartNotify</h4>
<p>The operating system is about to add the processor. At this state, a device driver that receives this notification can allocate any per-processor data structures and perform any other required tasks to prepare the driver for execution on the new processor.</p>
<h4>KeProcessorAddCompleteNotify</h4>
<p>The operating system has successfully added the processor. At this state, a device driver that receives this notification can start scheduling threads on the new processor.</p>
<h4>KeProcessorAddFailureNotify</h4>
<p>The operating system failed to add the processor. If a device driver receives this notification, it should free any per-processor data structures that it allocated for the new processor when it received the <strong>KeProcessorAddStartNotify</strong> notification.</p>
<h3><code>NtNumber</code></h3>
<p>The processor index of the new processor. For information about the relationship between a processor index and a processor number, see <a href="kegetprocessornumberfromindex" title="NTSTATUS KeGetProcessorNumberFromIndex(&#10;  [in]  ULONG             ProcIndex,&#10;  [out] PPROCESSOR_NUMBER ProcNumber&#10;);">KeGetProcessorNumberFromIndex</a>.</p>
<h3><code>Status</code></h3>
<p>If the <strong>State</strong> member contains <strong>KeProcessorAddFailureNotify</strong>, this member contains the error status that indicates why the processor add operation failed.</p>
<h3><code>ProcNumber</code></h3>
<p>The processor number of the new processor. This member is a <a href="processor_number" title="typedef struct _PROCESSOR_NUMBER {&#10;  USHORT Group;&#10;  UCHAR  Number;&#10;  UCHAR  Reserved;&#10;} PROCESSOR_NUMBER, *PPROCESSOR_NUMBER;">PROCESSOR_NUMBER</a> structure that specifies a group number and a group-relative processor number.</p>
<h2>Remarks</h2>
<p>The <strong>KE_PROCESSOR_CHANGE_NOTIFY_CONTEXT</strong> structure is available starting with Windows Server 2008.</p>
<p>A device driver registers to receive notification when a new processor is dynamically added to the hardware partition by calling the <a href="keregisterprocessorchangecallback" title="PVOID KeRegisterProcessorChangeCallback(&#10;  [in]           PPROCESSOR_CALLBACK_FUNCTION CallbackFunction,&#10;  [in, optional] PVOID                        CallbackContext,&#10;  [in]           ULONG                        Flags&#10;);">KeRegisterProcessorChangeCallback</a> function. For more information about registering for this notification, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/registering-for-synchronous-driver-notification">Registering for Synchronous Driver Notification</a>.</p>
<p>When a new processor is dynamically added to the hardware partition, the operating system calls each registered callback function two times. The operating system calls each registered callback function the first time with the <strong>KeProcessorAddStartNotify</strong> state, and the second time with either the <strong>KeProcessorAddCompleteNotify</strong> state or the <strong>KeProcessorAddFailureNotify</strong> state.</p>
<p>A device driver's callback function that receives these notifications must not modify the contents of the <strong>KE_PROCESSOR_CHANGE_NOTIFY_CONTEXT</strong> structure.</p>
<h2>See also</h2>
<p><a href="kegetprocessornumberfromindex" title="NTSTATUS KeGetProcessorNumberFromIndex(&#10;  [in]  ULONG             ProcIndex,&#10;  [out] PPROCESSOR_NUMBER ProcNumber&#10;);">KeGetProcessorNumberFromIndex</a></p>
<p><a href="keregisterprocessorchangecallback" title="PVOID KeRegisterProcessorChangeCallback(&#10;  [in]           PPROCESSOR_CALLBACK_FUNCTION CallbackFunction,&#10;  [in, optional] PVOID                        CallbackContext,&#10;  [in]           ULONG                        Flags&#10;);">KeRegisterProcessorChangeCallback</a></p>
<p><a href="processor_number" title="typedef struct _PROCESSOR_NUMBER {&#10;  USHORT Group;&#10;  UCHAR  Number;&#10;  UCHAR  Reserved;&#10;} PROCESSOR_NUMBER, *PPROCESSOR_NUMBER;">PROCESSOR_NUMBER</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_ke_processor_change_notify_context">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/ns-wdm-_ke_processor_change_notify_context.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
