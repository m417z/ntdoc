<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="MIB_IPFORWARD_ROW2 - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>MIB_IPFORWARD_ROW2 - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            MIB_IPFORWARD_ROW2 - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// netioapi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _MIB_IPFORWARD_ROW2 {
  NET_LUID          InterfaceLuid;
  NET_IFINDEX       InterfaceIndex;
  <a href="ip_address_prefix" title="typedef struct _IP_ADDRESS_PREFIX {&#10;  SOCKADDR_INET Prefix;&#10;  UINT8         PrefixLength;&#10;} IP_ADDRESS_PREFIX, *PIP_ADDRESS_PREFIX;">IP_ADDRESS_PREFIX</a> DestinationPrefix;
  SOCKADDR_INET     NextHop;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>             SitePrefixLength;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>             ValidLifetime;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>             PreferredLifetime;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>             Metric;
  NL_ROUTE_PROTOCOL Protocol;
  BOOLEAN           Loopback;
  BOOLEAN           AutoconfigureAddress;
  BOOLEAN           Publish;
  BOOLEAN           Immortal;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>             Age;
  NL_ROUTE_ORIGIN   Origin;
} MIB_IPFORWARD_ROW2, *PMIB_IPFORWARD_ROW2;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/mib-ipforward-row2">View the official Windows hardware development documentation</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/mib_ipforward_row2.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows hardware development documentation (mib-ipforward-row2)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="mib_ipforward_row2-structure">MIB_IPFORWARD_ROW2 structure</h1>

<p>The MIB_IPFORWARD_ROW2 structure stores information about an IP route entry.</p>

<h2 id="members">Members</h2>

<ul>
<li><p><strong>InterfaceLuid</strong>
The locally unique identifier (<a href="luid" title="typedef struct _LUID {&#10;  DWORD LowPart;&#10;  LONG  HighPart;&#10;} LUID, *PLUID;">LUID</a>) for the network interface that is associated with this IP route entry.</p></li>
<li><p><strong>InterfaceIndex</strong>
The local index value for the network interface that is associated with this IP route entry. This index value might change when a network adapter is disabled and then enabled, or under other circumstances, and should not be considered persistent.</p></li>
<li><p><strong>DestinationPrefix</strong>
The IP address prefix for the destination IP address for this route.</p></li>
<li><p><strong>NextHop</strong>
For a remote route, the IP address of the next system or gateway that is along the route. If the route is to a local loopback address or an IP address on the local link, the next hop is unspecified (all zeros). For a local loopback route, this member should be an IPv4 address of 0.0.0.0 for an IPv4 route entry or an IPv6 address address of 0::0 for an IPv6 route entry.</p></li>
<li><p><strong>SitePrefixLength</strong>
The length, in bits, of the site prefix or network part of the IP address for this route. For an IPv4 route entry, any value that is greater than 32 is an illegal value. For an IPv6 route entry, any value that is greater than 128 is an illegal value. A value of 255 is typically used to represent an illegal value.</p></li>
<li><p><strong>ValidLifetime</strong>
The maximum time, in seconds, that the IP route entry is valid. A value of 0xffffffff is considered to be infinite.</p></li>
<li><p><strong>PreferredLifetime</strong>
The preferred time, in seconds, that the IP route entry is valid. A value of 0xffffffff is considered to be infinite.</p></li>
<li><p><strong>Metric</strong>
The route metric offset value for this IP route entry. Note the actual route metric that is used to compute the route preference is the interface metric that is specified in the <strong>Metric</strong> member of the <strong><a href="mib_ipinterface_row" title="typedef struct _MIB_IPINTERFACE_ROW {&#10;  ADDRESS_FAMILY                 Family;&#10;  NET_LUID                       InterfaceLuid;&#10;  NET_IFINDEX                    InterfaceIndex;&#10;  ULONG                          MaxReassemblySize;&#10;  ULONG64                        InterfaceIdentifier;&#10;  ULONG                          MinRouterAdvertisementInterval;&#10;  ULONG                          MaxRouterAdvertisementInterval;&#10;  BOOLEAN                        AdvertisingEnabled;&#10;  BOOLEAN                        ForwardingEnabled;&#10;  BOOLEAN                        WeakHostSend;&#10;  BOOLEAN                        WeakHostReceive;&#10;  BOOLEAN                        UseAutomaticMetric;&#10;  BOOLEAN                        UseNeighborUnreachabilityDetection;&#10;  BOOLEAN                        ManagedAddressConfigurationSupported;&#10;  BOOLEAN                        OtherStatefulConfigurationSupported;&#10;  BOOLEAN                        AdvertiseDefaultRoute;&#10;  NL_ROUTER_DISCOVERY_BEHAVIOR   RouterDiscoveryBehavior;&#10;  ULONG                          DadTransmits;&#10;  ULONG                          BaseReachableTime;&#10;...">MIB_IPINTERFACE_ROW</a></strong> structure added to the route metric offset that is specified in this <strong>Metric</strong> member. The semantics of this metric are determined by the routing protocol that is specified in the <strong>Protocol</strong> member. If this metric is not used, its value should be set to -1. This value is documented in RFC 4292. For more information, see <a rel="noopener" target="_blank" href="https://go.microsoft.com/fwlink/p/?linkid=84065">IP Forwarding Table MIB</a>.</p></li>
<li><p><strong>Protocol</strong>
The <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/nldef/ne-nldef-nl_route_protocol"><strong>NL_ROUTE_PROTOCOL</strong></a> routing mechanism type that this IP route was added with.</p></li>
<li><p><strong>Loopback</strong>
A value that specifies if the route is a loopback route (the gateway is on the local host).</p></li>
<li><p><strong>AutoconfigureAddress</strong>
A value that specifies if the IP address is autoconfigured.</p></li>
<li><p><strong>Publish</strong>
A value that specifies if the route is published.</p></li>
<li><p><strong>Immortal</strong>
A value that specifies if the route is immortal.</p></li>
<li><p><strong>Age</strong>
The number of seconds since the route was added or modified in the network routing table.</p></li>
<li><p><strong>Origin</strong>
A <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/nldef/ne-nldef-nl_route_origin"><strong>NL_ROUTE_ORIGIN</strong></a> IP route origin type.</p></li>
</ul>

<h2 id="remarks">Remarks</h2>

<p>The <strong><a href="getipforwardtable2" title="NETIOAPI_API GetIpForwardTable2(&#10;  _In_  ADDRESS_FAMILY        Family,&#10;  _Out_ PMIB_IPFORWARD_TABLE2 *Table&#10;);">GetIpForwardTable2</a></strong> function enumerates the IP route entries on a local computer and returns this information in a <strong><a href="mib_ipforward_table2" title="typedef struct _MIB_IPFORWARD_TABLE2 {&#10;  ULONG              NumEntries;&#10;  MIB_IPFORWARD_ROW2 Table[ANY_SIZE];&#10;} MIB_IPFORWARD_TABLE2, *PMIB_IPFORWARD_TABLE2;">MIB_IPFORWARD_TABLE2</a></strong> structure as an array of MIB_IPFORWARD_ROW2 entries.</p>

<p>The <strong><a href="getipforwardentry2" title="NETIOAPI_API GetIpForwardEntry2(&#10;  _Inout_ PMIB_IPFORWARD_ROW2 Row&#10;);">GetIpForwardEntry2</a></strong> function retrieves a single IP route entry and returns this information in a MIB_IPFORWARD_ROW2 structure.</p>

<p>An entry with the <strong>Prefix</strong> and the <strong>PrefixLength</strong> members of <strong><a href="ip_address_prefix" title="typedef struct _IP_ADDRESS_PREFIX {&#10;  SOCKADDR_INET Prefix;&#10;  UINT8         PrefixLength;&#10;} IP_ADDRESS_PREFIX, *PIP_ADDRESS_PREFIX;">IP_ADDRESS_PREFIX</a></strong> set to zero in the <strong>DestinationPrefix</strong> member in the MIB_IPFORWARD_ROW2 structure is considered a default route. The <strong><a href="mib_ipforward_table2" title="typedef struct _MIB_IPFORWARD_TABLE2 {&#10;  ULONG              NumEntries;&#10;  MIB_IPFORWARD_ROW2 Table[ANY_SIZE];&#10;} MIB_IPFORWARD_TABLE2, *PMIB_IPFORWARD_TABLE2;">MIB_IPFORWARD_TABLE2</a></strong> might contain multiple MIB_IPFORWARD_ROW2 entries with the <strong>Prefix</strong> and the <strong>PrefixLength</strong> members of the <a href="ip_address_prefix" title="typedef struct _IP_ADDRESS_PREFIX {&#10;  SOCKADDR_INET Prefix;&#10;  UINT8         PrefixLength;&#10;} IP_ADDRESS_PREFIX, *PIP_ADDRESS_PREFIX;">IP_ADDRESS_PREFIX</a> set to zero in the <strong>DestinationPrefix</strong> member when there are multiple network adapters installed.</p>

<p>The <strong>Metric</strong> member of a MIB_IPFORWARD_ROW2 entry is a value that is assigned to an IP route for a particular network interface that identifies the cost that is associated with using that route. For example, the metric can be valued in terms of link speed, hop count, or time delay. Automatic metric is a feature on Windows XP and later versions of the Windows operating systems that automatically configures the metric for the local routes that are based on link speed. By default, the automatic metric feature is enabled (the <strong>UseAutomaticMetric</strong> member of the <a href="mib_ipinterface_row" title="typedef struct _MIB_IPINTERFACE_ROW {&#10;  ADDRESS_FAMILY                 Family;&#10;  NET_LUID                       InterfaceLuid;&#10;  NET_IFINDEX                    InterfaceIndex;&#10;  ULONG                          MaxReassemblySize;&#10;  ULONG64                        InterfaceIdentifier;&#10;  ULONG                          MinRouterAdvertisementInterval;&#10;  ULONG                          MaxRouterAdvertisementInterval;&#10;  BOOLEAN                        AdvertisingEnabled;&#10;  BOOLEAN                        ForwardingEnabled;&#10;  BOOLEAN                        WeakHostSend;&#10;  BOOLEAN                        WeakHostReceive;&#10;  BOOLEAN                        UseAutomaticMetric;&#10;  BOOLEAN                        UseNeighborUnreachabilityDetection;&#10;  BOOLEAN                        ManagedAddressConfigurationSupported;&#10;  BOOLEAN                        OtherStatefulConfigurationSupported;&#10;  BOOLEAN                        AdvertiseDefaultRoute;&#10;  NL_ROUTER_DISCOVERY_BEHAVIOR   RouterDiscoveryBehavior;&#10;  ULONG                          DadTransmits;&#10;  ULONG                          BaseReachableTime;&#10;...">MIB_IPINTERFACE_ROW</a> structure is set to <strong>TRUE</strong>) on Windows XP and later. You can also manually configure this feature to assign a specific metric to an IP route.</p>

<p>The route metric that is specified in the <strong>Metric</strong> member of the MIB_IPFORWARD_ROW2 structure represents only the route metric offset. The complete metric is a combination of this route metric offset added to the interface metric that is specified in the <strong>Metric</strong> member of the <strong><a href="mib_ipinterface_row" title="typedef struct _MIB_IPINTERFACE_ROW {&#10;  ADDRESS_FAMILY                 Family;&#10;  NET_LUID                       InterfaceLuid;&#10;  NET_IFINDEX                    InterfaceIndex;&#10;  ULONG                          MaxReassemblySize;&#10;  ULONG64                        InterfaceIdentifier;&#10;  ULONG                          MinRouterAdvertisementInterval;&#10;  ULONG                          MaxRouterAdvertisementInterval;&#10;  BOOLEAN                        AdvertisingEnabled;&#10;  BOOLEAN                        ForwardingEnabled;&#10;  BOOLEAN                        WeakHostSend;&#10;  BOOLEAN                        WeakHostReceive;&#10;  BOOLEAN                        UseAutomaticMetric;&#10;  BOOLEAN                        UseNeighborUnreachabilityDetection;&#10;  BOOLEAN                        ManagedAddressConfigurationSupported;&#10;  BOOLEAN                        OtherStatefulConfigurationSupported;&#10;  BOOLEAN                        AdvertiseDefaultRoute;&#10;  NL_ROUTER_DISCOVERY_BEHAVIOR   RouterDiscoveryBehavior;&#10;  ULONG                          DadTransmits;&#10;  ULONG                          BaseReachableTime;&#10;...">MIB_IPINTERFACE_ROW</a></strong> structure of the associated interface. A driver can retrieve the interface metric by calling the <strong><a href="getipinterfaceentry" title="NETIOAPI_API GetIpInterfaceEntry(&#10;  _Inout_ PMIB_IPINTERFACE_ROW Row&#10;);">GetIpInterfaceEntry</a></strong> function.</p>

<h2 id="requirements">Requirements</h2>

<table>
<thead>
<tr>
  <th></th>
  <th></th>
</tr>
</thead>
<tbody>
<tr>
  <td>Version</td>
  <td>Available in Windows Vista and later versions of the Windows operating systems.</td>
</tr>
<tr>
  <td>Header</td>
  <td>Netioapi.h (include Netioapi.h)</td>
</tr>
</tbody>
</table>

<h2 id="see-also">See also</h2>

<p><strong><a href="createipforwardentry2" title="NETIOAPI_API CreateIpForwardEntry2(&#10;  _In_ const MIB_IPFORWARD_ROW2 *Row&#10;);">CreateIpForwardEntry2</a></strong></p>

<p><strong><a href="deleteipforwardentry2" title="NETIOAPI_API DeleteIpForwardEntry2(&#10;  _In_ const MIB_IPFORWARD_ROW2 *Row&#10;);">DeleteIpForwardEntry2</a></strong></p>

<p><strong><a href="getipforwardentry2" title="NETIOAPI_API GetIpForwardEntry2(&#10;  _Inout_ PMIB_IPFORWARD_ROW2 Row&#10;);">GetIpForwardEntry2</a></strong></p>

<p><strong><a href="getipforwardtable2" title="NETIOAPI_API GetIpForwardTable2(&#10;  _In_  ADDRESS_FAMILY        Family,&#10;  _Out_ PMIB_IPFORWARD_TABLE2 *Table&#10;);">GetIpForwardTable2</a></strong></p>

<p><strong><a href="getipinterfaceentry" title="NETIOAPI_API GetIpInterfaceEntry(&#10;  _Inout_ PMIB_IPINTERFACE_ROW Row&#10;);">GetIpInterfaceEntry</a></strong></p>

<p><strong><a href="ip_address_prefix" title="typedef struct _IP_ADDRESS_PREFIX {&#10;  SOCKADDR_INET Prefix;&#10;  UINT8         PrefixLength;&#10;} IP_ADDRESS_PREFIX, *PIP_ADDRESS_PREFIX;">IP_ADDRESS_PREFIX</a></strong></p>

<p><strong><a href="mib_ipforward_table2" title="typedef struct _MIB_IPFORWARD_TABLE2 {&#10;  ULONG              NumEntries;&#10;  MIB_IPFORWARD_ROW2 Table[ANY_SIZE];&#10;} MIB_IPFORWARD_TABLE2, *PMIB_IPFORWARD_TABLE2;">MIB_IPFORWARD_TABLE2</a></strong></p>

<p><strong><a href="mib_ipinterface_row" title="typedef struct _MIB_IPINTERFACE_ROW {&#10;  ADDRESS_FAMILY                 Family;&#10;  NET_LUID                       InterfaceLuid;&#10;  NET_IFINDEX                    InterfaceIndex;&#10;  ULONG                          MaxReassemblySize;&#10;  ULONG64                        InterfaceIdentifier;&#10;  ULONG                          MinRouterAdvertisementInterval;&#10;  ULONG                          MaxRouterAdvertisementInterval;&#10;  BOOLEAN                        AdvertisingEnabled;&#10;  BOOLEAN                        ForwardingEnabled;&#10;  BOOLEAN                        WeakHostSend;&#10;  BOOLEAN                        WeakHostReceive;&#10;  BOOLEAN                        UseAutomaticMetric;&#10;  BOOLEAN                        UseNeighborUnreachabilityDetection;&#10;  BOOLEAN                        ManagedAddressConfigurationSupported;&#10;  BOOLEAN                        OtherStatefulConfigurationSupported;&#10;  BOOLEAN                        AdvertiseDefaultRoute;&#10;  NL_ROUTER_DISCOVERY_BEHAVIOR   RouterDiscoveryBehavior;&#10;  ULONG                          DadTransmits;&#10;  ULONG                          BaseReachableTime;&#10;...">MIB_IPINTERFACE_ROW</a></strong></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/nldef/ne-nldef-nl_route_origin"><strong>NL_ROUTE_ORIGIN</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/nldef/ne-nldef-nl_route_protocol"><strong>NL_ROUTE_PROTOCOL</strong></a></p>

<p><strong><a href="setipforwardentry2" title="NETIOAPI_API SetIpForwardEntry2(&#10;  _In_ const MIB_IPFORWARD_ROW2 *Route&#10;);">SetIpForwardEntry2</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/mib-ipforward-row2">View the official Windows hardware development documentation</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs/blob/staging/windows-driver-docs-pr/network/mib-ipforward-row2.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
