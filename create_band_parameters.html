<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="CREATE_BAND_PARAMETERS - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>CREATE_BAND_PARAMETERS - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            CREATE_BAND_PARAMETERS - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ehstorbandmgmt.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _CREATE_BAND_PARAMETERS {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> StructSize;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> Flags;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> BandLocationInfoOffset;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> BandSecurityInfoOffset;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> AuthKeyOffset;
} CREATE_BAND_PARAMETERS, *PCREATE_BAND_PARAMETERS;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ehstorbandmgmt/ns-ehstorbandmgmt-_create_band_parameters">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/create_band_parameters.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ehstorbandmgmt-_create_band_parameters)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_create_band_parameters-structure">_CREATE_BAND_PARAMETERS structure</h1>

<h2 id="description">Description</h2>

<p>The parameters to create a band on a storage device for an <a href="ioctl_ehstor_bandmgmt_create_band" title="// CTL_CODE(0x002d, 0x524, METHOD_BUFFERED, FILE_READ_ACCESS | FILE_WRITE_ACCESS)&#10;#define IOCTL_EHSTOR_BANDMGMT_CREATE_BAND 0x002DD490">IOCTL_EHSTOR_BANDMGMT_CREATE_BAND</a> request are specified in a <strong>CREATE_BAND_PARAMETERS</strong> structure.</p>

<h2 id="members">Members</h2>

<h3 id="structsize"><code>StructSize</code></h3>

<p>The size of this structure in bytes. Set to <strong>sizeof</strong>(CREATE_BAND_PARAMETERS).</p>

<h3 id="flags"><code>Flags</code></h3>

<p>Band creation flags. This value is a bitwise OR combination of the following.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>CREATEBAND_AUTHKEY_CACHING_ENABLED</strong></td>
  <td>The authentication key for this band is cached, which allows automation of later operations. The authentication key is cached when this flag is set and the band is not locked for both reading and writing.</td>
</tr>
</tbody>
</table>

<h3 id="bandlocationinfooffset"><code>BandLocationInfoOffset</code></h3>

<p>The offset, in bytes, of a <a href="band_location_info" title="typedef struct _BAND_LOCATION_INFO {&#10;  ULONG         StructSize;&#10;  ULONG         Reserved;&#10;  LARGE_INTEGER BandStart;&#10;  LARGE_INTEGER BandSize;&#10;  BYTE          Metadata[32];&#10;} BAND_LOCATION_INFO, *PBAND_LOCATION_INFO;">BAND_LOCATION_INFO</a> structure. The offset is from the beginning of <strong>CREATE_BAND_PARAMETERS</strong>.</p>

<h3 id="bandsecurityinfooffset"><code>BandSecurityInfoOffset</code></h3>

<p>The offset, in bytes, of a <a href="band_security_info" title="typedef struct _BAND_SECURITY_INFO {&#10;  ULONG      StructSize;&#10;  LOCKSTATE  ReadLock;&#10;  LOCKSTATE  WriteLock;&#10;  ALGOIDTYPE CryptoAlgoIdType;&#10;  union {&#10;    struct {&#10;      ULONG Offset;&#10;      ULONG Length;&#10;    } CryptoAlgoOidString;&#10;    ULONG CryptoAlgoNumericId;&#10;  };&#10;  BYTE       Metadata[32];&#10;} BAND_SECURITY_INFO, *PBAND_SECURITY_INFO;">BAND_SECURITY_INFO</a> structure. The offset is from the beginning of <strong>CREATE_BAND_PARAMETERS</strong>. If this value is 0, meaning band security info is not present, key manager metadata for the band is set to all zeros. Also, when this member is 0, the read and write lock states default to PERSISTANT_UNLOCK.</p>

<h3 id="authkeyoffset"><code>AuthKeyOffset</code></h3>

<p>The offset, in bytes, of an  <strong>AUTH_KEY</strong> structure that contains the authorization key for the new band. The offset is from the beginning of <strong>CREATE_BAND_PARAMETERS</strong>. <strong>AUTH_KEY</strong> is declared in <em>ehstorbandmgmt.h</em> as the following.</p>

<p><!-- CODE_MARKER --></p>

<pre><code>typedef struct _AUTH_KEY
{
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>   KeySize;
    <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>   Key[ANYSIZE_ARRAY];
} AUTH_KEY;
</code></pre>

<h4 id="keysize">KeySize</h4>

<p>The size of the key, in bytes, of the key data at <strong>Key</strong>. If <strong>KeySize</strong> is set to 0, a default key is used.</p>

<h4 id="key">Key</h4>

<p>A variable length byte array that contains the key data.</p>

<p>To assign a default authorization key to the band, set <strong>AuthKeyOffset</strong> = <strong>EHSTOR_BANDMGR_NO_KEY</strong>.</p>

<h2 id="remarks">Remarks</h2>

<p>The <strong>CryptoAlgoIdType</strong> and <strong>CryptoAlgoOidString</strong> members of the <a href="band_security_info" title="typedef struct _BAND_SECURITY_INFO {&#10;  ULONG      StructSize;&#10;  LOCKSTATE  ReadLock;&#10;  LOCKSTATE  WriteLock;&#10;  ALGOIDTYPE CryptoAlgoIdType;&#10;  union {&#10;    struct {&#10;      ULONG Offset;&#10;      ULONG Length;&#10;    } CryptoAlgoOidString;&#10;    ULONG CryptoAlgoNumericId;&#10;  };&#10;  BYTE       Metadata[32];&#10;} BAND_SECURITY_INFO, *PBAND_SECURITY_INFO;">BAND_SECURITY_INFO</a> structure at <strong>BandSecurityInfoOffset</strong> are not used in a band creation request and must be set to 0.</p>

<h2 id="see-also">See also</h2>

<p><a href="band_location_info" title="typedef struct _BAND_LOCATION_INFO {&#10;  ULONG         StructSize;&#10;  ULONG         Reserved;&#10;  LARGE_INTEGER BandStart;&#10;  LARGE_INTEGER BandSize;&#10;  BYTE          Metadata[32];&#10;} BAND_LOCATION_INFO, *PBAND_LOCATION_INFO;">BAND_LOCATION_INFO</a></p>

<p><a href="band_security_info" title="typedef struct _BAND_SECURITY_INFO {&#10;  ULONG      StructSize;&#10;  LOCKSTATE  ReadLock;&#10;  LOCKSTATE  WriteLock;&#10;  ALGOIDTYPE CryptoAlgoIdType;&#10;  union {&#10;    struct {&#10;      ULONG Offset;&#10;      ULONG Length;&#10;    } CryptoAlgoOidString;&#10;    ULONG CryptoAlgoNumericId;&#10;  };&#10;  BYTE       Metadata[32];&#10;} BAND_SECURITY_INFO, *PBAND_SECURITY_INFO;">BAND_SECURITY_INFO</a></p>

<p><a href="ioctl_ehstor_bandmgmt_create_band" title="// CTL_CODE(0x002d, 0x524, METHOD_BUFFERED, FILE_READ_ACCESS | FILE_WRITE_ACCESS)&#10;#define IOCTL_EHSTOR_BANDMGMT_CREATE_BAND 0x002DD490">IOCTL_EHSTOR_BANDMGMT_CREATE_BAND</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ehstorbandmgmt/ns-ehstorbandmgmt-_create_band_parameters">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ehstorbandmgmt/ns-ehstorbandmgmt-_create_band_parameters.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
