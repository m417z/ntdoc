<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="RDF_IOCTL_VENDOR - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>RDF_IOCTL_VENDOR - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            RDF_IOCTL_VENDOR - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// smclib.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> (*ReaderFunction[RDF_IOCTL_VENDOR])(
   <a href="smartcard_extension" title="typedef struct _SMARTCARD_EXTENSION {&#10;  ULONG                     Version;&#10;  VENDOR_ATTR               VendorAttr;&#10;  NTSTATUS(                 *ReaderFunction[16];&#10;  SCARD_CARD_CAPABILITIES   CardCapabilities;&#10;  ULONG                     LastError;&#10;  struct {&#10;    PULONG Information;&#10;    PUCHAR RequestBuffer;&#10;    ULONG  RequestBufferLength;&#10;    PUCHAR ReplyBuffer;&#10;    ULONG  ReplyBufferLength;&#10;  } IoRequest;&#10;  ULONG                     MajorIoControlCode;&#10;  ULONG                     MinorIoControlCode;&#10;  POS_DEP_DATA              OsData;&#10;  SCARD_READER_CAPABILITIES ReaderCapabilities;&#10;  PREADER_EXTENSION         ReaderExtension;&#10;  SMARTCARD_REPLY           SmartcardReply;&#10;  SMARTCARD_REQUEST         SmartcardRequest;&#10;...">PSMARTCARD_EXTENSION</a> SmartcardExtension
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/smartcard/smartcard-rdf-ioctl-vendor-callback">View the official Windows hardware development documentation</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/rdf_ioctl_vendor.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows hardware development documentation (smartcard-rdf-ioctl-vendor-callback)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>RDF_IOCTL_VENDOR callback function</h1>
<p>The RDF_IOCTL_VENDOR callback function performs vendor-specific IOCTL operations.</p>
<h2>Parameters</h2>
<ul>
<li><em>SmartcardExtension</em>
A pointer to the smart card extension, <strong><a href="smartcard_extension" title="typedef struct _SMARTCARD_EXTENSION {&#10;  ULONG                     Version;&#10;  VENDOR_ATTR               VendorAttr;&#10;  NTSTATUS(                 *ReaderFunction[16];&#10;  SCARD_CARD_CAPABILITIES   CardCapabilities;&#10;  ULONG                     LastError;&#10;  struct {&#10;    PULONG Information;&#10;    PUCHAR RequestBuffer;&#10;    ULONG  RequestBufferLength;&#10;    PUCHAR ReplyBuffer;&#10;    ULONG  ReplyBufferLength;&#10;  } IoRequest;&#10;  ULONG                     MajorIoControlCode;&#10;  ULONG                     MinorIoControlCode;&#10;  POS_DEP_DATA              OsData;&#10;  SCARD_READER_CAPABILITIES ReaderCapabilities;&#10;  PREADER_EXTENSION         ReaderExtension;&#10;  SMARTCARD_REPLY           SmartcardReply;&#10;  SMARTCARD_REQUEST         SmartcardRequest;&#10;...">SMARTCARD_EXTENSION</a></strong>, of the device. For more information about the members of this structure, see Remarks.</li>
</ul>
<h2>Return value</h2>
<p>This function returns an <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> value. Because this function executes a vendor-defined IOCTL call, the value returned depends upon the function that is performed. The possible <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> values are:</p>
<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong><a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a></strong></td>
  <td>Function successfully executed.</td>
</tr>
<tr>
  <td><strong>STATUS_NO_MEDIA</strong></td>
  <td>No smart card is inserted in the reader.</td>
</tr>
<tr>
  <td><strong>STATUS_IO_TIMEOUT</strong></td>
  <td>The request timed out.</td>
</tr>
<tr>
  <td><strong>STATUS_BUFFER_TOO_SMALL</strong></td>
  <td>The user's reply buffer is too small.</td>
</tr>
<tr>
  <td><strong>STATUS_INVALID_DEVICE_REQUEST</strong></td>
  <td>The request is not valid for the IOCTL.</td>
</tr>
<tr>
  <td><strong>STATUS_PENDING</strong></td>
  <td>The operation is pending.</td>
</tr>
</tbody>
</table>
<h2>Remarks</h2>
<p>It is optional for smart card reader drivers to implement this callback function.</p>
<p>On input, the caller must pass the following values to the function:</p>
<ul>
<li><p><strong>SmartcardExtension-&gt;MajorIoControlCode</strong>
Contains a vendor-specific IOCTL code. Refer to the macro SCARD_CTL_CODE in <em>Winsmcrd.h</em> for information about how to define a vendor-specific IOCTL code. Note that the code must be between 2048 and 4095.</p></li>
<li><p><strong>SmartcardExtension-&gt;IoRequest.RequestBuffer</strong>
A pointer to the user's input buffer.</p></li>
<li><p><strong>SmartcardExtension-&gt;IoRequest.RequestBufferLength</strong>
The size, in bytes, of the user's input buffer.</p></li>
<li><p><strong>SmartcardExtension-&gt;IoRequest.ReplyBuffer</strong>
A pointer to the user's output buffer.</p></li>
<li><p><strong>SmartcardExtension-&gt;IoRequest.ReplyBufferLength</strong>
The size, in bytes, of the user's output buffer.</p></li>
<li><p><strong>SmartcardExtension-&gt;IoRequest.Information</strong>
The value supplied by the request. Must be set to the number of bytes returned.</p></li>
</ul>
<p>As with all other IOCTLs, a user-mode application dispatches a vendor-defined IOCTL to a smart card reader device by calling the <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/aa363216/(v=vs.85/)"><strong>DeviceIoControl</strong></a> function. When the IOCTL is vendor-defined, however, the application must first open the reader device for "overlapped" (that is, asynchronous) access. The application must also define an OVERLAPPED structure and pass it to the system in the last argument of <strong>DeviceIoControl</strong> (The OVERLAPPED structure is also described in the Windows SDK documentation.). When the operating system calls the driver's I/O control dispatch routine, it passes a DIOCPARAMETERS structure to the driver. The <strong>lpoOverlapped</strong> member of the DIOCPARAMETERS structure contains a pointer to the OVERLAPPED structure.</p>
<h2>Requirements</h2>
<table>
<thead>
<tr>
  <th></th>
  <th></th>
</tr>
</thead>
<tbody>
<tr>
  <td>Target platform</td>
  <td>Desktop</td>
</tr>
<tr>
  <td>Header</td>
  <td>Smclib.h (include Smclib.h)</td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<p><strong><a href="smartcard_extension" title="typedef struct _SMARTCARD_EXTENSION {&#10;  ULONG                     Version;&#10;  VENDOR_ATTR               VendorAttr;&#10;  NTSTATUS(                 *ReaderFunction[16];&#10;  SCARD_CARD_CAPABILITIES   CardCapabilities;&#10;  ULONG                     LastError;&#10;  struct {&#10;    PULONG Information;&#10;    PUCHAR RequestBuffer;&#10;    ULONG  RequestBufferLength;&#10;    PUCHAR ReplyBuffer;&#10;    ULONG  ReplyBufferLength;&#10;  } IoRequest;&#10;  ULONG                     MajorIoControlCode;&#10;  ULONG                     MinorIoControlCode;&#10;  POS_DEP_DATA              OsData;&#10;  SCARD_READER_CAPABILITIES ReaderCapabilities;&#10;  PREADER_EXTENSION         ReaderExtension;&#10;  SMARTCARD_REPLY           SmartcardReply;&#10;  SMARTCARD_REQUEST         SmartcardRequest;&#10;...">SMARTCARD_EXTENSION</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/smartcard/smartcard-rdf-ioctl-vendor-callback">View the official Windows hardware development documentation</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs/blob/staging/windows-driver-docs-pr/smartcard/smartcard-rdf-ioctl-vendor-callback.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
