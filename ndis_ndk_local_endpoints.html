<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NDIS_NDK_LOCAL_ENDPOINTS - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NDIS_NDK_LOCAL_ENDPOINTS - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NDIS_NDK_LOCAL_ENDPOINTS - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _NDIS_NDK_LOCAL_ENDPOINTS {
  <a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a>            Header;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                         Flags;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                         Count;
  BOOLEAN                       NDLocalEndpointsMappedtoTCPLocalEndpoints;
  <a href="ndis_ndk_local_endpoint_entry" title="typedef struct _NDIS_NDK_LOCAL_ENDPOINT_ENTRY {&#10;  SOCKADDR_INET Local;&#10;  BOOLEAN       UserModeOwner;&#10;  BOOLEAN       Listener;&#10;  ULONG         OwnerPid;&#10;} NDIS_NDK_LOCAL_ENDPOINT_ENTRY;">NDIS_NDK_LOCAL_ENDPOINT_ENTRY</a> LocalEndpoints[1];
} NDIS_NDK_LOCAL_ENDPOINTS;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddndis/ns-ntddndis-_ndis_ndk_local_endpoints">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndis_ndk_local_endpoints.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntddndis-_ndis_ndk_local_endpoints)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_ndis_ndk_local_endpoints-structure">_NDIS_NDK_LOCAL_ENDPOINTS structure</h1>

<h2 id="description">Description</h2>

<p>The <strong>NDIS_NDK_LOCAL_ENDPOINTS</strong> structure describes the NDK local endpoints that are on a miniport adapter.</p>

<h2 id="members">Members</h2>

<h3 id="header"><code>Header</code></h3>

<p>An <a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a> structure that describes this <strong>NDIS_NDK_LOCAL_ENDPOINTS</strong> structure. Set the members of the <strong><a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a></strong> structure as follows:</p>

<ul>
<li>Set the <strong>Type</strong> member to <strong>NDIS_OBJECT_TYPE_DEFAULT</strong>.</li>
<li>Set the <strong>Revision</strong> member to <strong>NDIS_NDK_LOCAL_ENDPOINTS_REVISION_1</strong>.</li>
<li>Set the <strong>Size</strong> member to (<a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>)min(<a href="maxushort" title="#define MAXUSHORT 0xffff // winnt">MAXUSHORT</a>, NDIS_SIZEOF_NDK_ENDPOINTS_REVISION_1(n)).</li>
</ul>

<h3 id="flags"><code>Flags</code></h3>

<h3 id="count"><code>Count</code></h3>

<p>The number of elements in the endpoints array that is passed in the <strong>LocalEndpoints</strong> member. Each element in the array is an <a href="ndis_ndk_local_endpoint_entry" title="typedef struct _NDIS_NDK_LOCAL_ENDPOINT_ENTRY {&#10;  SOCKADDR_INET Local;&#10;  BOOLEAN       UserModeOwner;&#10;  BOOLEAN       Listener;&#10;  ULONG         OwnerPid;&#10;} NDIS_NDK_LOCAL_ENDPOINT_ENTRY;">NDIS_NDK_LOCAL_ENDPOINT_ENTRY</a> structure.</p>

<h3 id="ndlocalendpointsmappedtotcplocalendpoints"><code>NDLocalEndpointsMappedtoTCPLocalEndpoints</code></h3>

<p>A <strong>BOOLEAN</strong> value that specifies how the endpoints are mapped. If the RDMA technology for the NDK provider requires the provider to map ND local endpoints to TCP local endpoints, the NDK provider must set the <strong>NDLocalEndpointsMappedtoTCPLocalEndpoints</strong> member to TRUE. Otherwise, <strong>NDLocalEndpointsMappedtoTCPLocalEndpoints</strong> is FALSE.</p>

<h3 id="localendpoints"><code>LocalEndpoints</code></h3>

<p>A variable-sized array of <a href="ndis_ndk_local_endpoint_entry" title="typedef struct _NDIS_NDK_LOCAL_ENDPOINT_ENTRY {&#10;  SOCKADDR_INET Local;&#10;  BOOLEAN       UserModeOwner;&#10;  BOOLEAN       Listener;&#10;  ULONG         OwnerPid;&#10;} NDIS_NDK_LOCAL_ENDPOINT_ENTRY;">NDIS_NDK_LOCAL_ENDPOINT_ENTRY</a> structures where the size of the array is determined by the number of local endpoints being returned. The <strong>Count</strong> member specifies the number of elements in the local endpoint array.</p>

<h2 id="remarks">Remarks</h2>

<p>The <strong>NDIS_NDK_LOCAL_ENDPOINTS</strong> structure is returned with the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-ndk-local-endpoints">OID_NDK_LOCAL_ENDPOINTS</a> OID. The <strong>InformationBuffer</strong> member of the <a href="ndis_oid_request" title="typedef struct _NDIS_OID_REQUEST {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  NDIS_REQUEST_TYPE        RequestType;&#10;  NDIS_PORT_NUMBER         PortNumber;&#10;  UINT                     Timeout;&#10;  PVOID                    RequestId;&#10;  NDIS_HANDLE              RequestHandle;&#10;  union {&#10;    NDIS_OID Oid;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;      UINT     BytesWritten;&#10;      UINT     BytesNeeded;&#10;    } QUERY_INFORMATION;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;...">NDIS_OID_REQUEST</a> structure contains a pointer to this structure.</p>

<p>This structure is variable-sized and contains elements equal in number to the number of local endpoints that are returned. The actual size of the local endpoint array as an element count is indicated by the <strong>Count</strong> member.</p>

<p>If the RDMA technology for the NDK provider requires the provider to map ND local endpoints to TCP local endpoints, the NDK provider must also report the underlying TCP local endpoint for each ND local endpoint as follows:</p>

<ul>
<li>Set the <strong>NDLocalEndpointsMappedtoTCPLocalEndpoints</strong> member to TRUE.</li>
<li>Use two consecutive entries for each ND local endpoint. The first entry contains the ND addressing information (local IP address, and ND port number) and the immediate next entry contains the corresponding TCP local endpoint's addressing information (local IP address, and TCP port number).</li>
<li>Members other than addressing information (For example, <strong>UserModeOwner</strong>, <strong>Listener</strong> and <strong>OwnerPid</strong>) must be set only in the first entry and left untouched in the next entry. Therefore, entries at index 0, 2, 4, and so on, contain ND addressing information (plus properly filled-in other members) and entries at index 1, 3, 5 and so on, contain TCP addressing info (where other members are left untouched).</li>
</ul>

<h2 id="see-also">See also</h2>

<p><a href="ndis_ndk_local_endpoint_entry" title="typedef struct _NDIS_NDK_LOCAL_ENDPOINT_ENTRY {&#10;  SOCKADDR_INET Local;&#10;  BOOLEAN       UserModeOwner;&#10;  BOOLEAN       Listener;&#10;  ULONG         OwnerPid;&#10;} NDIS_NDK_LOCAL_ENDPOINT_ENTRY;">NDIS_NDK_LOCAL_ENDPOINT_ENTRY</a></p>

<p><a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a></p>

<p><a href="ndis_oid_request" title="typedef struct _NDIS_OID_REQUEST {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  NDIS_REQUEST_TYPE        RequestType;&#10;  NDIS_PORT_NUMBER         PortNumber;&#10;  UINT                     Timeout;&#10;  PVOID                    RequestId;&#10;  NDIS_HANDLE              RequestHandle;&#10;  union {&#10;    NDIS_OID Oid;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;      UINT     BytesWritten;&#10;      UINT     BytesNeeded;&#10;    } QUERY_INFORMATION;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;...">NDIS_OID_REQUEST</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-ndk-local-endpoints">OID_NDK_LOCAL_ENDPOINTS</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddndis/ns-ntddndis-_ndis_ndk_local_endpoints">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddndis/ns-ntddndis-_ndis_ndk_local_endpoints.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
