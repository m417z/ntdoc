<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="CLS_INFORMATION - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>CLS_INFORMATION - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            CLS_INFORMATION - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _CLS_INFORMATION {
  <a href="longlong" title="typedef __int64 LONGLONG;">LONGLONG</a>  TotalAvailable;
  <a href="longlong" title="typedef __int64 LONGLONG;">LONGLONG</a>  CurrentAvailable;
  <a href="longlong" title="typedef __int64 LONGLONG;">LONGLONG</a>  TotalReservation;
  <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> BaseFileSize;
  <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> ContainerSize;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>     TotalContainers;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>     FreeContainers;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>     TotalClients;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>     Attributes;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>     FlushThreshold;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>     SectorSize;
  <a href="cls_lsn" title="typedef struct _CLS_LSN {&#10;  ULONGLONG Internal;&#10;} CLS_LSN, *PCLS_LSN, PPCLS_LSN;">CLS_LSN</a>   MinArchiveTailLsn;
  <a href="cls_lsn" title="typedef struct _CLS_LSN {&#10;  ULONGLONG Internal;&#10;} CLS_LSN, *PCLS_LSN, PPCLS_LSN;">CLS_LSN</a>   BaseLsn;
  <a href="cls_lsn" title="typedef struct _CLS_LSN {&#10;  ULONGLONG Internal;&#10;} CLS_LSN, *PCLS_LSN, PPCLS_LSN;">CLS_LSN</a>   LastFlushedLsn;
  <a href="cls_lsn" title="typedef struct _CLS_LSN {&#10;  ULONGLONG Internal;&#10;} CLS_LSN, *PCLS_LSN, PPCLS_LSN;">CLS_LSN</a>   LastLsn;
  <a href="cls_lsn" title="typedef struct _CLS_LSN {&#10;  ULONGLONG Internal;&#10;} CLS_LSN, *PCLS_LSN, PPCLS_LSN;">CLS_LSN</a>   RestartLsn;
  GUID      Identity;
} CLS_INFORMATION, *PCLS_INFORMATION, *PPCLS_INFORMATION;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_cls_information">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/cls_information.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-wdm-_cls_information)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_cls_information-structure">_CLS_INFORMATION structure</h1>

<h2 id="description">Description</h2>

<p>The <strong>CLFS_INFORMATION</strong> structure holds metadata and state information for a Common Log File System (CLFS) stream and/or its underlying physical log.</p>

<h2 id="members">Members</h2>

<h3 id="totalavailable"><code>TotalAvailable</code></h3>

<p>The total available space allocated to the log. This is calculated as the sum of the sizes of all containers in the log.</p>

<h3 id="currentavailable"><code>CurrentAvailable</code></h3>

<p>The amount of space available in the log for new records and reservation allocations. This space is the total available space minus the undo commitment space and space used for storing owner pages in a multiplexed log.</p>

<h3 id="totalreservation"><code>TotalReservation</code></h3>

<p>The amount of space reserved in the stream (or physical log) for undo operations.</p>

<h3 id="basefilesize"><code>BaseFileSize</code></h3>

<p>The size, in bytes, of the base log file.</p>

<h3 id="containersize"><code>ContainerSize</code></h3>

<p>The size, in bytes, of an individual container in the log. Note that all containers in the log are the same size.</p>

<h3 id="totalcontainers"><code>TotalContainers</code></h3>

<p>The number of containers in the log.</p>

<h3 id="freecontainers"><code>FreeContainers</code></h3>

<p>The number of containers in the log that are not active.</p>

<h3 id="totalclients"><code>TotalClients</code></h3>

<p>The number of streams that share the log.</p>

<h3 id="attributes"><code>Attributes</code></h3>

<p>A set of flags that specify stream (or physical log) attributes. See the <em>fFlagsAndAttributes</em> parameter of the <a href="clfscreatelogfile" title="CLFSUSER_API NTSTATUS ClfsCreateLogFile(&#10;  [out]          PPLOG_FILE_OBJECT    pplfoLog,&#10;  [in]           PUNICODE_STRING      puszLogFileName,&#10;  [in]           ACCESS_MASK          fDesiredAccess,&#10;  [in]           ULONG                dwShareMode,&#10;  [in, optional] PSECURITY_DESCRIPTOR psdLogFile,&#10;  [in]           ULONG                fCreateDisposition,&#10;  [in]           ULONG                fCreateOptions,&#10;  [in]           ULONG                fFlagsAndAttributes,&#10;  [in]           ULONG                fLogOptionFlag,&#10;  [in, optional] PVOID                pvContext,&#10;  [in]           ULONG                cbContext&#10;);">ClfsCreateLogFile</a> function.</p>

<h3 id="flushthreshold"><code>FlushThreshold</code></h3>

<p>The number of bytes of data (including headers) that are allowed to remain pending on the internal flush queue before CLFS automatically schedules a thread to write the flush queue to stable storage.</p>

<h3 id="sectorsize"><code>SectorSize</code></h3>

<p>The sector size, in bytes, of the underlying disk geometry. The sector size is assumed to be a multiple of 512 and consistent across containers.</p>

<h3 id="minarchivetaillsn"><code>MinArchiveTailLsn</code></h3>

<p>The LSN of the oldest record in the log for which archiving has not taken place. The minimum of this and the base LSN determines the last container that can be reused when containers are recycled.</p>

<h3 id="baselsn"><code>BaseLsn</code></h3>

<p>The LSN of the oldest record in the stream (or physical log) that is still needed by the stream (or log) clients.</p>

<h3 id="lastflushedlsn"><code>LastFlushedLsn</code></h3>

<p>The LSN of the last record that was flushed to stable storage.</p>

<h3 id="lastlsn"><code>LastLsn</code></h3>

<p>The LSN of the youngest record in the stream (or physical log) that is still needed by the stream (or log) clients.</p>

<h3 id="restartlsn"><code>RestartLsn</code></h3>

<p>The LSN of the last restart record written to the stream (or physical log). If there are no restart records, this member is equal to CLFS_LSN_INVALID.</p>

<h3 id="identity"><code>Identity</code></h3>

<p>A GUID that serves as a unique identifier for the log.</p>

<h2 id="remarks">Remarks</h2>

<p>The <a href="clfsquerylogfileinformation" title="CLFSUSER_API NTSTATUS ClfsQueryLogFileInformation(&#10;  [in]  PLOG_FILE_OBJECT           plfoLog,&#10;  [in]  CLFS_LOG_INFORMATION_CLASS eInformationClass,&#10;        PVOID                      pinfoInputBuffer,&#10;        ULONG                      cbinfoInputBuffer,&#10;  [out] PVOID                      pinfoBuffer,&#10;        PULONG                     pcbInfoBuffer&#10;);">ClfsQueryLogFileInformation</a> function returns information about a CLFS stream and/or its underlying physical log. The type of information returned depends on the <em>eInformationClass</em> parameter.</p>

<p>If the <em>eInformationClass</em> parameter is equal to <strong>ClfsLogBasicInformationPhysical</strong>, <strong><a href="clfsquerylogfileinformation" title="CLFSUSER_API NTSTATUS ClfsQueryLogFileInformation(&#10;  [in]  PLOG_FILE_OBJECT           plfoLog,&#10;  [in]  CLFS_LOG_INFORMATION_CLASS eInformationClass,&#10;        PVOID                      pinfoInputBuffer,&#10;        ULONG                      cbinfoInputBuffer,&#10;  [out] PVOID                      pinfoBuffer,&#10;        PULONG                     pcbInfoBuffer&#10;);">ClfsQueryLogFileInformation</a></strong> returns information in a <strong>CLFS_INFORMATION</strong> structure, and every structure member holds a piece of information about a physical CLFS log. Even if the log is multiplexed (that is, it has several streams), all structure members hold information about the underlying physical log rather than information about one of the streams.</p>

<p>If <em>eInformationClass</em> parameter is equal to <strong>ClfsLogBasicInformation</strong>, <strong><a href="clfsquerylogfileinformation" title="CLFSUSER_API NTSTATUS ClfsQueryLogFileInformation(&#10;  [in]  PLOG_FILE_OBJECT           plfoLog,&#10;  [in]  CLFS_LOG_INFORMATION_CLASS eInformationClass,&#10;        PVOID                      pinfoInputBuffer,&#10;        ULONG                      cbinfoInputBuffer,&#10;  [out] PVOID                      pinfoBuffer,&#10;        PULONG                     pcbInfoBuffer&#10;);">ClfsQueryLogFileInformation</a></strong> returns information in a <strong>CLFS_INFORMATION</strong> structure. Most of the structure members hold information about a CLFS physical log, but if the log is multiplexed, certain members hold information that is specific to a particular stream. The following structure members hold information that is specific to a stream rather than the underlying physical log:</p>

<ul>
<li><strong>TotalUndoCommitment</strong></li>
<li><strong>Attributes</strong></li>
<li><strong>BaseLsn</strong></li>
<li><strong>LastLsn</strong></li>
<li><strong>RestartLsn</strong></li>
</ul>

<h2 id="see-also">See also</h2>

<p><a href="clfscreatelogfile" title="CLFSUSER_API NTSTATUS ClfsCreateLogFile(&#10;  [out]          PPLOG_FILE_OBJECT    pplfoLog,&#10;  [in]           PUNICODE_STRING      puszLogFileName,&#10;  [in]           ACCESS_MASK          fDesiredAccess,&#10;  [in]           ULONG                dwShareMode,&#10;  [in, optional] PSECURITY_DESCRIPTOR psdLogFile,&#10;  [in]           ULONG                fCreateDisposition,&#10;  [in]           ULONG                fCreateOptions,&#10;  [in]           ULONG                fFlagsAndAttributes,&#10;  [in]           ULONG                fLogOptionFlag,&#10;  [in, optional] PVOID                pvContext,&#10;  [in]           ULONG                cbContext&#10;);">ClfsCreateLogFile</a></p>

<p><a href="clfsquerylogfileinformation" title="CLFSUSER_API NTSTATUS ClfsQueryLogFileInformation(&#10;  [in]  PLOG_FILE_OBJECT           plfoLog,&#10;  [in]  CLFS_LOG_INFORMATION_CLASS eInformationClass,&#10;        PVOID                      pinfoInputBuffer,&#10;        ULONG                      cbinfoInputBuffer,&#10;  [out] PVOID                      pinfoBuffer,&#10;        PULONG                     pcbInfoBuffer&#10;);">ClfsQueryLogFileInformation</a></p>

<p><a href="clfssetlogfileinformation" title="CLFSUSER_API NTSTATUS ClfsSetLogFileInformation(&#10;  [in] PLOG_FILE_OBJECT           plfoLog,&#10;  [in] CLFS_LOG_INFORMATION_CLASS eInformationClass,&#10;  [in] PVOID                      pinfoBuffer,&#10;  [in] ULONG                      cbBuffer&#10;);">ClfsSetLogFileInformation</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_cls_information">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/ns-wdm-_cls_information.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
