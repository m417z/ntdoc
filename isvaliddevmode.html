<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="IsValidDevmode - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>IsValidDevmode - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            IsValidDevmode - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// winspool.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">BOOL IsValidDevmodeA(
  [in, optional] PDEVMODEA pDevmode,
                 <a href="size_t" title="typedef unsigned __int64 size_t;">size_t</a>    DevmodeSize
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/winspool/nf-winspool-isvaliddevmodea">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// winspool.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">BOOL IsValidDevmodeW(
  [in, optional] PDEVMODEW pDevmode,
                 <a href="size_t" title="typedef unsigned __int64 size_t;">size_t</a>    DevmodeSize
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/winspool/nf-winspool-isvaliddevmodew">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/isvaliddevmode.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-winspool-isvaliddevmodea)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The print spooler's <strong>IsValidDevmode</strong> function verifies that the contents of a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/wingdi/ns-wingdi-devmodew">DEVMODE</a> structure are valid.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="pdevmode-in-optional"><code>pDevmode</code> [in, optional]</h3>

<p>Pointer to the DEVMODE structure to be validated.</p>

<h3 id="devmodesize"><code>DevmodeSize</code></h3>

<p>Size, in bytes, of the buffer pointed to by <em>pDevmode</em>.</p>

<h2 id="return-value">Return value</h2>

<p>If the DEVMODE structure is valid, or if the function succeeds in repairing the structure to make it valid, the function returns <strong>TRUE</strong>. Otherwise, the function returns <strong>FALSE</strong>. The caller can obtain an error code by calling <strong>GetLastError</strong>.</p>

<h2 id="remarks">Remarks</h2>

<p>Before using a DEVMODE structure obtained from a possibly unreliable source, a printer driver can call this function to verify that the structure is valid. This function validates only the public members of the DEVMODE structure. It does not check the private members of the structure.</p>

<p>The <strong>dmSize</strong> member of the DEVMODE structure specifies the size of the DEVMODE structure, not including any private, driver-specified data appended to the structure. The <strong>dmDriverExtra</strong> member specifies the size of the private data appended to the structure, if there is any. Callers should set <em>DevModeSize</em> to <strong>dmSize</strong>+<strong>dmDriverExtra</strong> only if they can guarantee that the input buffer size is at least that large.</p>

<p>This function does not require the caller to obtain elevated privileges.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/wingdi/ns-wingdi-devmodew">DEVMODE</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/winspool/nf-winspool-isvaliddevmodea">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/winspool/nf-winspool-isvaliddevmodea.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-winspool-isvaliddevmodew)</h1>
</div>
<div class="ntdoc-description">
<h2>Description</h2>

<p>The print spooler's <strong>IsValidDevmode</strong> function verifies that the contents of a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/wingdi/ns-wingdi-devmodew">DEVMODE</a> structure are valid.</p>

<h2>Parameters</h2>

<h3><code>pDevmode</code> [in, optional]</h3>

<p>Pointer to the DEVMODE structure to be validated.</p>

<h3><code>DevmodeSize</code></h3>

<p>Size, in bytes, of the buffer pointed to by <em>pDevmode</em>.</p>

<h2>Return value</h2>

<p>If the DEVMODE structure is valid, or if the function succeeds in repairing the structure to make it valid, the function returns <strong>TRUE</strong>. Otherwise, the function returns <strong>FALSE</strong>. The caller can obtain an error code by calling <strong>GetLastError</strong>.</p>

<h2>Remarks</h2>

<p>Before using a DEVMODE structure obtained from a possibly unreliable source, a printer driver can call this function to verify that the structure is valid. This function validates only the public members of the DEVMODE structure. It does not check the private members of the structure.</p>

<p>The <strong>dmSize</strong> member of the DEVMODE structure specifies the size of the DEVMODE structure, not including any private, driver-specified data appended to the structure. The <strong>dmDriverExtra</strong> member specifies the size of the private data appended to the structure, if there is any. Callers should set <em>DevModeSize</em> to <strong>dmSize</strong>+<strong>dmDriverExtra</strong> only if they can guarantee that the input buffer size is at least that large.</p>

<p>This function does not require the caller to obtain elevated privileges.</p>

<h2>See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/wingdi/ns-wingdi-devmodew">DEVMODE</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/winspool/nf-winspool-isvaliddevmodew">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/winspool/nf-winspool-isvaliddevmodew.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
