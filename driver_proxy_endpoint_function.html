<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DRIVER_PROXY_ENDPOINT_FUNCTION - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DRIVER_PROXY_ENDPOINT_FUNCTION - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DRIVER_PROXY_ENDPOINT_FUNCTION - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">DRIVER_PROXY_ENDPOINT_FUNCTION DriverProxyEndpointFunction;

VOID DriverProxyEndpointFunction()
{...}</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-driver_proxy_endpoint_function">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/driver_proxy_endpoint_function.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-wdm-driver_proxy_endpoint_function)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2>Description</h2>
<p>The <strong>DRIVER_PROXY_ENDPOINT_FUNCTION</strong> callback defines the function signature for a hot-swappable endpoint function in the DriverProxy system. This is a generic function pointer type that represents any driver function that can be made hot-swappable through the Driver Hot-Swap framework.</p>
<h2>Remarks</h2>
<p>Endpoint functions are driver-implemented functions that can be replaced at runtime without unloading the driver. The DriverProxy system creates wrapper functions that redirect calls to the current implementation of each endpoint function, enabling hot-swap functionality.</p>
<p>This callback type serves as a generic function pointer for the DriverProxy system. In practice, endpoint functions will have different signatures depending on their specific purpose, but they are all treated as <strong>DRIVER_PROXY_ENDPOINT_FUNCTION</strong> pointers within the DriverProxy infrastructure.</p>
<p>In Driver Hot-Swap V2, endpoint functions are automatically discovered during the build process through compiler and linker analysis. The compiler identifies functions that should be hot-swappable and places information about them in the <code>.shsept</code> section of the binary.</p>
<p>Key characteristics of endpoint functions:</p>
<ul>
<li>
They can be replaced at runtime through the DriverProxy system
</li>
<li>
They are accessed through wrapper functions returned by <strong><a href="iogetdriverproxywrapperfromendpoint" title="void IoGetDriverProxyWrapperFromEndpoint(&#10;  DriverProxyExtension,&#10;  Endpoint,&#10;  Wrapper&#10;);">IoGetDriverProxyWrapperFromEndpoint</a></strong>
</li>
<li>
They must be associated with a DriverProxy extension created by <strong><a href="iocreatedriverproxyextension" title="NTSTATUS IoCreateDriverProxyExtension(&#10;  PDRIVER_OBJECT                        OwningDriverObject,&#10;  DRIVER_PROXY_EXTENSION_CREATION_FLAGS Flags,&#10;  PDRIVER_PROXY_EXTENSION               *DriverProxyExtension&#10;);">IoCreateDriverProxyExtension</a></strong>
</li>
<li>
Their replacement is coordinated through the DriverProxy infrastructure to ensure thread safety
</li>
</ul>
<p>The actual IRQL requirements for endpoint functions depend on the specific function being implemented. Drivers should design their endpoint functions according to the IRQL constraints of their intended usage.</p>
<h2>See also</h2>
<p><strong><a href="iogetdriverproxywrapperfromendpoint" title="void IoGetDriverProxyWrapperFromEndpoint(&#10;  DriverProxyExtension,&#10;  Endpoint,&#10;  Wrapper&#10;);">IoGetDriverProxyWrapperFromEndpoint</a></strong></p>
<p><strong><a href="iofgetdriverproxywrapperfromendpoint" title="NTSTATUS IofGetDriverProxyWrapperFromEndpoint(&#10;  PDRIVER_PROXY_EXTENSION                 DriverProxyExtension,&#10;  PDRIVER_PROXY_ENDPOINT_FUNCTION         Endpoint,&#10;  PDRIVER_PROXY_WRAPPED_ENDPOINT_FUNCTION *Wrapper&#10;);">IofGetDriverProxyWrapperFromEndpoint</a></strong></p>
<p><strong><a href="iocreatedriverproxyextension" title="NTSTATUS IoCreateDriverProxyExtension(&#10;  PDRIVER_OBJECT                        OwningDriverObject,&#10;  DRIVER_PROXY_EXTENSION_CREATION_FLAGS Flags,&#10;  PDRIVER_PROXY_EXTENSION               *DriverProxyExtension&#10;);">IoCreateDriverProxyExtension</a></strong></p>
<p><strong><a href="driver_proxy_endpoint_information" title="typedef struct _DRIVER_PROXY_ENDPOINT_INFORMATION {&#10;  DRIVER_PROXY_ENDPOINT_FUNCTION_ID Id;&#10;  PDRIVER_PROXY_ENDPOINT_FUNCTION   EndpointFunction;&#10;  ULONG                             ParameterCount;&#10;} DRIVER_PROXY_ENDPOINT_INFORMATION, *PDRIVER_PROXY_ENDPOINT_INFORMATION;">DRIVER_PROXY_ENDPOINT_INFORMATION</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-driver_proxy_endpoint_function">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/nc-wdm-driver_proxy_endpoint_function.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
