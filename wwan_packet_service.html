<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="WWAN_PACKET_SERVICE - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>WWAN_PACKET_SERVICE - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            WWAN_PACKET_SERVICE - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wwan.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _WWAN_PACKET_SERVICE {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                     uNwError;
  <a href="wwan_packet_service_state" title="typedef enum _WWAN_PACKET_SERVICE_STATE {&#10;  WwanPacketServiceStateUnknown,&#10;  WwanPacketServiceStateAttaching,&#10;  WwanPacketServiceStateAttached,&#10;  WwanPacketServiceStateDetaching,&#10;  WwanPacketServiceStateDetached&#10;} WWAN_PACKET_SERVICE_STATE, *PWWAN_PACKET_SERVICE_STATE;">WWAN_PACKET_SERVICE_STATE</a> PacketServiceState;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                     AvailableDataClass;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                     CurrentDataClass;
  <a href="wwan_5g_frequency_range" title="typedef enum _WWAN_5G_FREQUENCY_RANGE {&#10;  Wwan5GFrequencyRangeUnknown,&#10;  Wwan5GFrequencyRange1,&#10;  Wwan5GFrequencyRange2,&#10;  Wwan5GFrequencyRange1AndRange2&#10;} WWAN_5G_FREQUENCY_RANGE, *PWWAN_5G_FREQUENCY_RANGE;">WWAN_5G_FREQUENCY_RANGE</a>   FrequencyRange;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                     CurrentDataSubClass;
  <a href="wwan_single_tai" title="typedef struct _WWAN_SINGLE_TAI {&#10;  UINT16 Mcc;&#10;  UINT16 Mnc;&#10;  UINT32 Tac;&#10;} WWAN_SINGLE_TAI, *PWWAN_SINGLE_TAI;">WWAN_SINGLE_TAI</a>           CurrentTai;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                     Rel3GppVer;
} WWAN_PACKET_SERVICE, *PWWAN_PACKET_SERVICE;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wwan/ns-wwan-_wwan_packet_service">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/wwan_packet_service.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-wwan-_wwan_packet_service)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_wwan_packet_service-structure">_WWAN_PACKET_SERVICE structure</h1>

<h2 id="description">Description</h2>

<p>The WWAN_PACKET_SERVICE structure represents the packet service attachment state of the MB
device.</p>

<h2 id="members">Members</h2>

<h3 id="unwerror"><code>uNwError</code></h3>

<p>A network specific error, in the event of a packet-attach or packet-detach failure. For more
information about this member, see the following
"Remarks" section.</p>

<h3 id="packetservicestate"><code>PacketServiceState</code></h3>

<p>The packet service state of the device.</p>

<h3 id="availabledataclass"><code>AvailableDataClass</code></h3>

<p>A bitmap that represents which data-classes are available to the device in the current network.
For a detailed list of values, see the
<strong>WwanDataClass</strong> member of
<a href="wwan_device_caps" title="typedef struct _WWAN_DEVICE_CAPS {&#10;  WWAN_DEVICE_TYPE    WwanDeviceType;&#10;  WWAN_CELLULAR_CLASS WwanCellularClass;&#10;  WWAN_VOICE_CLASS    WwanVoiceClass;&#10;  WWAN_SIM_CLASS      WwanSimClass;&#10;  ULONG               WwanDataClass;&#10;  WCHAR               CustomDataClass[WWAN_CUSTOM_DATA_CLASS_LEN];&#10;  ULONG               WwanGsmBandClass;&#10;  ULONG               WwanCdmaBandClass;&#10;  WCHAR               CustomBandClass[WWAN_CUSTOM_BAND_CLASS_LEN];&#10;  ULONG               WwanSmsCaps;&#10;  ULONG               WwanControlCaps;&#10;  WCHAR               DeviceId[WWAN_DEVICEID_LEN];&#10;  WCHAR               Manufacturer[WWAN_MANUFACTURER_LEN];&#10;  WCHAR               Model[WWAN_MODEL_LEN];&#10;  WCHAR               FirmwareInfo[WWAN_FIRMWARE_LEN];&#10;  ULONG               MaxActivatedContexts;&#10;  ULONG               WwanAuthAlgoCaps;&#10;  WWAN_LIST_HEADER    CellularClassListHeader;&#10;} WWAN_DEVICE_CAPS, *PWWAN_DEVICE_CAPS;">WWAN_DEVICE_CAPS</a>.</p>

<p>Miniport drivers must set this member to WWAN_DATA_CLASS_NONE when the device is not registered to a
network, or when there is no data-class, or when the supported data-class is not available. Miniport
drivers must set this member with a valid value when the device is registered to a network.</p>

<h3 id="currentdataclass"><code>CurrentDataClass</code></h3>

<p>A single value from the
<strong>WwanDataClass</strong> member in
<a href="wwan_device_caps" title="typedef struct _WWAN_DEVICE_CAPS {&#10;  WWAN_DEVICE_TYPE    WwanDeviceType;&#10;  WWAN_CELLULAR_CLASS WwanCellularClass;&#10;  WWAN_VOICE_CLASS    WwanVoiceClass;&#10;  WWAN_SIM_CLASS      WwanSimClass;&#10;  ULONG               WwanDataClass;&#10;  WCHAR               CustomDataClass[WWAN_CUSTOM_DATA_CLASS_LEN];&#10;  ULONG               WwanGsmBandClass;&#10;  ULONG               WwanCdmaBandClass;&#10;  WCHAR               CustomBandClass[WWAN_CUSTOM_BAND_CLASS_LEN];&#10;  ULONG               WwanSmsCaps;&#10;  ULONG               WwanControlCaps;&#10;  WCHAR               DeviceId[WWAN_DEVICEID_LEN];&#10;  WCHAR               Manufacturer[WWAN_MANUFACTURER_LEN];&#10;  WCHAR               Model[WWAN_MODEL_LEN];&#10;  WCHAR               FirmwareInfo[WWAN_FIRMWARE_LEN];&#10;  ULONG               MaxActivatedContexts;&#10;  ULONG               WwanAuthAlgoCaps;&#10;  WWAN_LIST_HEADER    CellularClassListHeader;&#10;} WWAN_DEVICE_CAPS, *PWWAN_DEVICE_CAPS;">WWAN_DEVICE_CAPS</a> that represents which
data-class is currently being used by the device.</p>

<p>For all data services, except HSPA, miniport drivers should set this member to a single
WWAN_DATA_CLASS_XXX value. For HSPA data services, miniport drivers should specify a bit-wise OR of
WWAN_DATA_CLASS_HSDPA and WWAN_DATA_CLASS_HSUPA.</p>

<p>Miniport drivers must set this member with a valid value and send the appropriate notification when
the device changes services, for example, from 1xRTT to 1xEV-DO.</p>

<p>Miniport drivers should set this member to WWAN_DATA_CLASS_CUSTOM if the data-class is not one of the
predefined values in the
<strong>WwanDataClass</strong> member of
<a href="wwan_device_caps" title="typedef struct _WWAN_DEVICE_CAPS {&#10;  WWAN_DEVICE_TYPE    WwanDeviceType;&#10;  WWAN_CELLULAR_CLASS WwanCellularClass;&#10;  WWAN_VOICE_CLASS    WwanVoiceClass;&#10;  WWAN_SIM_CLASS      WwanSimClass;&#10;  ULONG               WwanDataClass;&#10;  WCHAR               CustomDataClass[WWAN_CUSTOM_DATA_CLASS_LEN];&#10;  ULONG               WwanGsmBandClass;&#10;  ULONG               WwanCdmaBandClass;&#10;  WCHAR               CustomBandClass[WWAN_CUSTOM_BAND_CLASS_LEN];&#10;  ULONG               WwanSmsCaps;&#10;  ULONG               WwanControlCaps;&#10;  WCHAR               DeviceId[WWAN_DEVICEID_LEN];&#10;  WCHAR               Manufacturer[WWAN_MANUFACTURER_LEN];&#10;  WCHAR               Model[WWAN_MODEL_LEN];&#10;  WCHAR               FirmwareInfo[WWAN_FIRMWARE_LEN];&#10;  ULONG               MaxActivatedContexts;&#10;  ULONG               WwanAuthAlgoCaps;&#10;  WWAN_LIST_HEADER    CellularClassListHeader;&#10;} WWAN_DEVICE_CAPS, *PWWAN_DEVICE_CAPS;">WWAN_DEVICE_CAPS</a>.</p>

<h3 id="frequencyrange"><code>FrequencyRange</code></h3>

<p>A <strong><a href="wwan_5g_frequency_range" title="typedef enum _WWAN_5G_FREQUENCY_RANGE {&#10;  Wwan5GFrequencyRangeUnknown,&#10;  Wwan5GFrequencyRange1,&#10;  Wwan5GFrequencyRange2,&#10;  Wwan5GFrequencyRange1AndRange2&#10;} WWAN_5G_FREQUENCY_RANGE, *PWWAN_5G_FREQUENCY_RANGE;">WWAN_5G_FREQUENCY_RANGE</a></strong> value that specifies the frequency ranges that the device is using. This member is only valid if <strong>CurrentDataClass</strong> is either <strong>WWAN_DATA_CLASS_5G_NSA</strong> or <strong>WWAN_DATA_CLASS_SA</strong>.</p>

<h3 id="currentdatasubclass"><code>CurrentDataSubClass</code></h3>

<p>This field is only used for NDIS_WWAN_PACKET_SERVICE_STATE_REVISION_3.</p>

<h3 id="currenttai"><code>CurrentTai</code></h3>

<p>A <strong><a href="wwan_single_tai" title="typedef struct _WWAN_SINGLE_TAI {&#10;  UINT16 Mcc;&#10;  UINT16 Mnc;&#10;  UINT32 Tac;&#10;} WWAN_SINGLE_TAI, *PWWAN_SINGLE_TAI;">WWAN_SINGLE_TAI</a></strong> structure representing the current single Tracking Area Identity (TAI). This field is only used for NDIS_WWAN_PACKET_SERVICE_STATE_REVISION_3.</p>

<h3 id="rel3gppver"><code>Rel3GppVer</code></h3>

<p>0xFFFFFFFF will be used if unknown. Unknown means either MBIM_TLV_TYPE_3GPP_REL_VERSION is not contained in MBIM_PACKET_SERVICE_INFO_V3, the device directly returns 0xFFFFFFFF,
or the device is using MBIM 3.0 or older.</p>

<h2 id="remarks">Remarks</h2>

<p>The current packet-attach service state is typically reflected in the device's user interface.</p>

<p>The MB Service combines the data-classes that are represented in
<strong>AvailableDataClass</strong> with the supported data-classes that are reported with the device's capabilities
to display the intersection of the available choices to the user.</p>

<p>If a device also supports a data-class that is anything other than the predefined values in the
<strong>WwanDataClass</strong> member of
<a href="wwan_device_caps" title="typedef struct _WWAN_DEVICE_CAPS {&#10;  WWAN_DEVICE_TYPE    WwanDeviceType;&#10;  WWAN_CELLULAR_CLASS WwanCellularClass;&#10;  WWAN_VOICE_CLASS    WwanVoiceClass;&#10;  WWAN_SIM_CLASS      WwanSimClass;&#10;  ULONG               WwanDataClass;&#10;  WCHAR               CustomDataClass[WWAN_CUSTOM_DATA_CLASS_LEN];&#10;  ULONG               WwanGsmBandClass;&#10;  ULONG               WwanCdmaBandClass;&#10;  WCHAR               CustomBandClass[WWAN_CUSTOM_BAND_CLASS_LEN];&#10;  ULONG               WwanSmsCaps;&#10;  ULONG               WwanControlCaps;&#10;  WCHAR               DeviceId[WWAN_DEVICEID_LEN];&#10;  WCHAR               Manufacturer[WWAN_MANUFACTURER_LEN];&#10;  WCHAR               Model[WWAN_MODEL_LEN];&#10;  WCHAR               FirmwareInfo[WWAN_FIRMWARE_LEN];&#10;  ULONG               MaxActivatedContexts;&#10;  ULONG               WwanAuthAlgoCaps;&#10;  WWAN_LIST_HEADER    CellularClassListHeader;&#10;} WWAN_DEVICE_CAPS, *PWWAN_DEVICE_CAPS;">WWAN_DEVICE_CAPS</a>, the miniport driver
should set the WWAN_DATA_CLASS_CUSTOM flag along with the appropriate bitmask defined for the data-class
in this member.</p>

<p><em>Query</em> and
<em>set</em> OID requests as well as unsolicited status events use the
<strong>uNwError</strong> member. If there is no network specific error or the network specific error is not known,
miniport drivers should set this member to zero. The
"Status Indication Structure" section in
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/mb-operational-semantics">MB Operational Semantics</a> shows the
packet-attach or packet-detach cause code failure values that are defined in the
<em>3GPP TS 24.008 Specification</em>.</p>

<p>The following points provide guidelines on returning network specific error in different
scenarios:</p>

<ul>
<li>If the packet-attach operation fails because of network specific error, miniport drivers should
return the network specific error in response to
<em>query</em> requests. In this case, miniport drivers should set the
<strong>uStatus</strong> member of the <a href="ndis_wwan_packet_service_state" title="typedef struct _NDIS_WWAN_PACKET_SERVICE_STATE {&#10;  NDIS_OBJECT_HEADER  Header;&#10;  WWAN_STATUS         uStatus;&#10;  WWAN_PACKET_SERVICE PacketService;&#10;} NDIS_WWAN_PACKET_SERVICE_STATE, *PNDIS_WWAN_PACKET_SERVICE_STATE;">NDIS_WWAN_PACKET_SERVICE_STATE</a> structure to WWAN_STATUS_SUCCESS and set the
<strong>uNwError</strong> member to the network specific error code.</li>
<li>If a
<em>set</em> request fails, miniport drivers should return the network specific error code. In this case,
miniport drivers should set the
<strong>uStatus</strong> member of the <a href="ndis_wwan_packet_service_state" title="typedef struct _NDIS_WWAN_PACKET_SERVICE_STATE {&#10;  NDIS_OBJECT_HEADER  Header;&#10;  WWAN_STATUS         uStatus;&#10;  WWAN_PACKET_SERVICE PacketService;&#10;} NDIS_WWAN_PACKET_SERVICE_STATE, *PNDIS_WWAN_PACKET_SERVICE_STATE;">NDIS_WWAN_PACKET_SERVICE_STATE</a> structure to WWAN_STATUS_FAILURE and set the
<strong>uNwError</strong> member to the network specific error code.</li>
<li>Whenever the device registration state changes because the network packet-detaches the device then
unsolicited status events should include the network specific error. In this case, the miniport driver
should set the
<strong>uStatus</strong> member of the <a href="ndis_wwan_packet_service_state" title="typedef struct _NDIS_WWAN_PACKET_SERVICE_STATE {&#10;  NDIS_OBJECT_HEADER  Header;&#10;  WWAN_STATUS         uStatus;&#10;  WWAN_PACKET_SERVICE PacketService;&#10;} NDIS_WWAN_PACKET_SERVICE_STATE, *PNDIS_WWAN_PACKET_SERVICE_STATE;">NDIS_WWAN_PACKET_SERVICE_STATE</a> structure to WWAN_STATUS_SUCCESS and set the
<strong>uNwError</strong> member to the network specific error code.</li>
</ul>

<p>Miniport drivers can provide additional error codes as defined by the GSM standards specification of
packet-attach error codes returned by the network. For example, miniport drivers can communicate the 3GPP
specification TS 24.008 packet-attach error codes, such as error code 12 (Location area not allowed), to
the MB Service through the
<strong>uNwError</strong> member.</p>

<p>Miniport drivers must report the cause code at the earliest possible instance. For example, if the MB
device encounters one of these codes when attempting to register the device on with a network provider,
the miniport driver should report it at that time.</p>

<h2 id="see-also">See also</h2>

<p><a href="ndis_wwan_packet_service_state" title="typedef struct _NDIS_WWAN_PACKET_SERVICE_STATE {&#10;  NDIS_OBJECT_HEADER  Header;&#10;  WWAN_STATUS         uStatus;&#10;  WWAN_PACKET_SERVICE PacketService;&#10;} NDIS_WWAN_PACKET_SERVICE_STATE, *PNDIS_WWAN_PACKET_SERVICE_STATE;">NDIS_WWAN_PACKET_SERVICE_STATE</a></p>

<p><a href="wwan_packet_service_state" title="typedef enum _WWAN_PACKET_SERVICE_STATE {&#10;  WwanPacketServiceStateUnknown,&#10;  WwanPacketServiceStateAttaching,&#10;  WwanPacketServiceStateAttached,&#10;  WwanPacketServiceStateDetaching,&#10;  WwanPacketServiceStateDetached&#10;} WWAN_PACKET_SERVICE_STATE, *PWWAN_PACKET_SERVICE_STATE;">WWAN_PACKET_SERVICE_STATE</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wwan/ns-wwan-_wwan_packet_service">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wwan/ns-wwan-_wwan_packet_service.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
