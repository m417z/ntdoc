<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="KSAUDIO_CHANNEL_CONFIG - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>KSAUDIO_CHANNEL_CONFIG - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            KSAUDIO_CHANNEL_CONFIG - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ksmedia.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct {
  <a href="long" title="typedef long LONG;">LONG</a> ActiveSpeakerPositions;
} KSAUDIO_CHANNEL_CONFIG, *PKSAUDIO_CHANNEL_CONFIG;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ksmedia/ns-ksmedia-ksaudio_channel_config">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ksaudio_channel_config.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ksmedia-ksaudio_channel_config)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>KSAUDIO_CHANNEL_CONFIG</strong> structure specifies the configuration of channels within the data format of an audio stream.</p>

<h2 id="members">Members</h2>

<h3 id="activespeakerpositions"><code>ActiveSpeakerPositions</code></h3>

<p>Specifies both the number of channels and the assignment of those channels to speaker positions. This member is a bitmask in which each bit within the mask corresponds to a particular speaker position. If a mask bit is set, the audio stream contains a channel that is assigned to the speaker position that the mask bit represents. The number of channels in the stream is obtained by counting how many number ones appear in the bitmask. For more information, see the following Remarks section.</p>

<h2 id="remarks">Remarks</h2>

<p>This structure is used to set or get the data value for the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/audio/ksproperty-audio-channel-config">KSPROPERTY_AUDIO_CHANNEL_CONFIG</a> property.</p>

<p>The following table shows the flag bits that are defined for the <strong>ActiveSpeakerPositions</strong> member.</p>

<table>
<thead>
<tr>
  <th>Speaker position</th>
  <th>Flag bit</th>
</tr>
</thead>
<tbody>
<tr>
  <td>SPEAKER_FRONT_LEFT</td>
  <td>0x1</td>
</tr>
<tr>
  <td>SPEAKER_FRONT_RIGHT</td>
  <td>0x2</td>
</tr>
<tr>
  <td>SPEAKER_FRONT_CENTER</td>
  <td>0x4</td>
</tr>
<tr>
  <td>SPEAKER_LOW_FREQUENCY</td>
  <td>0x8</td>
</tr>
<tr>
  <td>SPEAKER_BACK_LEFT</td>
  <td>0x10</td>
</tr>
<tr>
  <td>SPEAKER_BACK_RIGHT</td>
  <td>0x20</td>
</tr>
<tr>
  <td>SPEAKER_FRONT_LEFT_OF_CENTER</td>
  <td>0x40</td>
</tr>
<tr>
  <td>SPEAKER_FRONT_RIGHT_OF_CENTER</td>
  <td>0x80</td>
</tr>
<tr>
  <td>SPEAKER_BACK_CENTER</td>
  <td>0x100</td>
</tr>
<tr>
  <td>SPEAKER_SIDE_LEFT</td>
  <td>0x200</td>
</tr>
<tr>
  <td>SPEAKER_SIDE_RIGHT</td>
  <td>0x400</td>
</tr>
<tr>
  <td>SPEAKER_TOP_CENTER</td>
  <td>0x800</td>
</tr>
<tr>
  <td>SPEAKER_TOP_FRONT_LEFT</td>
  <td>0x1000</td>
</tr>
<tr>
  <td>SPEAKER_TOP_FRONT_CENTER</td>
  <td>0x2000</td>
</tr>
<tr>
  <td>SPEAKER_TOP_FRONT_RIGHT</td>
  <td>0x4000</td>
</tr>
<tr>
  <td>SPEAKER_TOP_BACK_LEFT</td>
  <td>0x8000</td>
</tr>
<tr>
  <td>SPEAKER_TOP_BACK_CENTER</td>
  <td>0x10000</td>
</tr>
<tr>
  <td>SPEAKER_TOP_BACK_RIGHT</td>
  <td>0x20000</td>
</tr>
</tbody>
</table>

<p>Each audio data format contains channels for one or more of the preceding speaker positions. The number of channels simply equals the number of nonzero flag bits in the <strong>ActiveSpeakerPositions</strong> member.</p>

<p>The relative positions of the channels within each block of audio data always follow the same relative ordering as the flag bits in the preceding table. For example, if <strong>ActiveSpeakerPositions</strong> contains the value 0x00000033, the format defines four audio channels that are assigned for playback to the front-left, front-right, back-left, and back-right speakers, respectively. The channel data should be interleaved in that order within each block. (This is the KSAUDIO_SPEAKER_QUAD configuration that appears in the second of the two following tables.)</p>

<p>The following table shows the speaker configurations that are defined for DVD.</p>

<table>
<thead>
<tr>
  <th>Configuration</th>
  <th>Speaker position</th>
</tr>
</thead>
<tbody>
<tr>
  <td>KSAUDIO_SPEAKER_GROUND_FRONT_LEFT</td>
  <td>SPEAKER_FRONT_LEFT</td>
</tr>
<tr>
  <td>KSAUDIO_SPEAKER_GROUND_FRONT_CENTER</td>
  <td>SPEAKER_FRONT_CENTER</td>
</tr>
<tr>
  <td>KSAUDIO_SPEAKER_GROUND_FRONT_RIGHT</td>
  <td>SPEAKER_FRONT_RIGHT</td>
</tr>
<tr>
  <td>KSAUDIO_SPEAKER_GROUND_REAR_LEFT</td>
  <td>SPEAKER_BACK_LEFT</td>
</tr>
<tr>
  <td>KSAUDIO_SPEAKER_GROUND_REAR_RIGHT</td>
  <td>SPEAKER_BACK_RIGHT</td>
</tr>
<tr>
  <td>KSAUDIO_SPEAKER_TOP_MIDDLE</td>
  <td>SPEAKER_TOP_CENTER</td>
</tr>
<tr>
  <td>KSAUDIO_SPEAKER_SUPER_WOOFER</td>
  <td>SPEAKER_LOW_FREQUENCY</td>
</tr>
</tbody>
</table>

<p>The following table shows the speaker configurations that are defined for DirectSound.</p>

<table>
<thead>
<tr>
  <th>Configuration</th>
  <th>Speaker positions</th>
</tr>
</thead>
<tbody>
<tr>
  <td>KSAUDIO_SPEAKER_DIRECTOUT</td>
  <td>0 (no speakers)</td>
</tr>
<tr>
  <td>KSAUDIO_SPEAKER_MONO</td>
  <td>SPEAKER_FRONT_CENTER</td>
</tr>
<tr>
  <td>KSAUDIO_SPEAKER_STEREO</td>
  <td>SPEAKER_FRONT_LEFT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_FRONT_RIGHT</td>
</tr>
<tr>
  <td>KSAUDIO_SPEAKER_QUAD</td>
  <td>SPEAKER_FRONT_LEFT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_FRONT_RIGHT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_BACK_LEFT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_BACK_RIGHT</td>
</tr>
<tr>
  <td>KSAUDIO_SPEAKER_SURROUND</td>
  <td>SPEAKER_FRONT_LEFT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_FRONT_RIGHT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_FRONT_CENTER</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_BACK_CENTER</td>
</tr>
<tr>
  <td>KSAUDIO_SPEAKER_5POINT1</td>
  <td>SPEAKER_FRONT_LEFT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_FRONT_RIGHT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_FRONT_CENTER</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_LOW_FREQUENCY</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_BACK_LEFT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_BACK_RIGHT</td>
</tr>
<tr>
  <td>KSAUDIO_SPEAKER_5POINT1_SURROUND</td>
  <td>SPEAKER_FRONT_LEFT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_FRONT_RIGHT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_FRONT_CENTER</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_LOW_FREQUENCY</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_SIDE_LEFT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_SIDE_RIGHT</td>
</tr>
<tr>
  <td>KSAUDIO_SPEAKER_7POINT1</td>
  <td>SPEAKER_FRONT_LEFT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_FRONT_RIGHT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_FRONT_CENTER</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_LOW_FREQUENCY</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_BACK_LEFT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_BACK_RIGHT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_FRONT_LEFT_OF_CENTER</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_FRONT_RIGHT_OF_CENTER</td>
</tr>
<tr>
  <td>KSAUDIO_SPEAKER_7POINT1_SURROUND</td>
  <td>SPEAKER_FRONT_LEFT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_FRONT_RIGHT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_FRONT_CENTER</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_LOW_FREQUENCY</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_BACK_LEFT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_BACK_RIGHT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_SIDE_LEFT</td>
</tr>
<tr>
  <td></td>
  <td>SPEAKER_SIDE_RIGHT</td>
</tr>
</tbody>
</table>

<p>The KSAUDIO_SPEAKER_7POINT1 speaker configuration, is obsolete and no longer supported.</p>

<p>In the preceding table, the constant KSAUDIO_SPEAKER_DIRECTOUT has a value of zero, which means that no speaker positions are assigned to the channels in the multichannel stream. For example, channel zero might represent percussion, channel 1 might represent trumpet, channel 2 might represent voice, and so on. In this configuration, the channels in the input stream are output directly to the hardware without modification and without being interpreted as speaker positions. For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/audio/dsspeaker-directout-speaker-configuration">DSSPEAKER_DIRECTOUT Speaker Configuration</a>.</p>

<p>The speaker configuration for a 5.1-channel surround format is defined by the constant KSAUDIO_SPEAKER_5POINT1_SURROUND in the preceding table. The geometric layout of the speakers is shown in the following figure, which shows the positions of the front-left, front-right, front-center, side-left, and side-right speakers. The figure omits the low-frequency speaker because it is nondirectional.</p>

<p><img src="https://learn.microsoft.com/windows-hardware/drivers/ddi/images/audio-spkrposn-new.png" alt="Diagram illustrating a 5.1-channel surround speaker configuration; the low-frequency speaker is not shown." /></p>

<p>For this example, the following list shows the ordering of the six channels within each block of audio data:</p>

<ol>
<li><p>SPEAKER_FRONT_LEFT</p></li>
<li><p>SPEAKER_FRONT_RIGHT</p></li>
<li><p>SPEAKER_FRONT_CENTER</p></li>
<li><p>SPEAKER_LOW_FREQUENCY</p></li>
<li><p>SPEAKER_SIDE_LEFT</p></li>
<li><p>SPEAKER_SIDE_RIGHT</p></li>
</ol>

<p>For a PCM format with a 16-bit sample size, each block of audio data occupies 12 bytes, which are ordered as shown in the following table.</p>

<table>
<thead>
<tr>
  <th>Byte</th>
  <th>Audio data</th>
</tr>
</thead>
<tbody>
<tr>
  <td>0</td>
  <td>Front Left (8 LSBs)</td>
</tr>
<tr>
  <td>1</td>
  <td>Front Left (8 MSBs)</td>
</tr>
<tr>
  <td>2</td>
  <td>Front Right (8 LSBs)</td>
</tr>
<tr>
  <td>3</td>
  <td>Front Right (8 MSBs)</td>
</tr>
<tr>
  <td>4</td>
  <td>Front Center (8 LSBs)</td>
</tr>
<tr>
  <td>5</td>
  <td>Front Center (8 MSBs)</td>
</tr>
<tr>
  <td>6</td>
  <td>Low Freq (8 LSBs)</td>
</tr>
<tr>
  <td>7</td>
  <td>Low Freq (8 MSBs)</td>
</tr>
<tr>
  <td>8</td>
  <td>Side Left (8 LSBs)</td>
</tr>
<tr>
  <td>9</td>
  <td>Side Left (8 MSBs)</td>
</tr>
<tr>
  <td>10</td>
  <td>Side Right (8 LSBs)</td>
</tr>
<tr>
  <td>11</td>
  <td>Side Right (8 MSBs)</td>
</tr>
</tbody>
</table>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/audio/ksproperty-audio-channel-config">KSPROPERTY_AUDIO_CHANNEL_CONFIG</a></p>

<p><a rel="noopener" target="_blank" href="waveformatextensible">WAVEFORMATEXTENSIBLE</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ksmedia/ns-ksmedia-ksaudio_channel_config">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ksmedia/ns-ksmedia-ksaudio_channel_config.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
