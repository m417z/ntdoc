<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="IOCTL_VIDEO_QUERY_DISPLAY_BRIGHTNESS - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>IOCTL_VIDEO_QUERY_DISPLAY_BRIGHTNESS - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            IOCTL_VIDEO_QUERY_DISPLAY_BRIGHTNESS - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddvdeo.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">// <a href="ctl_code" title="void CTL_CODE(&#10;  DeviceType,&#10;  Function,&#10;  Method,&#10;  Access&#10;);">CTL_CODE</a>(0x0023, 0x126, METHOD_BUFFERED, FILE_ANY_ACCESS)
#define IOCTL_VIDEO_QUERY_DISPLAY_BRIGHTNESS 0x00230498</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddvdeo/ni-ntddvdeo-ioctl_video_query_display_brightness">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddvdeo.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">// <a href="ctl_code" title="void CTL_CODE(&#10;  DeviceType,&#10;  Function,&#10;  Method,&#10;  Access&#10;);">CTL_CODE</a>(0x0023, 0x126, METHOD_BUFFERED, FILE_ANY_ACCESS)
#define IOCTL_VIDEO_QUERY_DISPLAY_BRIGHTNESS 0x00230498</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows/win32/power/ioctl-video-query-display-brightness">View the official Win32 development documentation</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ioctl_video_query_display_brightness.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ni-ntddvdeo-ioctl_video_query_display_brightness)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>IOCTL_VIDEO_QUERY_DISPLAY_BRIGHTNESS IOCTL</h1>
<h2>Description</h2>
<p>This IOCTL is not handled by video miniport drivers. It is handled entirely by the system-supplied video port driver.</p>
<h2>Parameters</h2>
<h3>Major code</h3>
<h3>Input buffer</h3>
<h3>Input buffer length</h3>
<h3>Output buffer</h3>
<h3>Output buffer length</h3>
<h3>Input/output buffer</h3>
<h3>Input/output buffer length</h3>
<h3>Status block</h3>
<p>Irp->IoStatus.Status is set to <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if the request is successful.</p>
<p>Otherwise, Status to the appropriate error condition as a <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> code.</p>
<p>For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/ntstatus-values">NTSTATUS Values</a>.</p>
<h2>Remarks</h2>
<p><strong>Note</strong> This IOCTL is obsolete in Windows Vista. Instead, use the Windows Management Instrumentation (WMI) monitor brightness class. For information about WMI, see the documentation in the Microsoft Windows SDK.</p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddvdeo/ni-ntddvdeo-ioctl_video_query_display_brightness">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddvdeo/ni-ntddvdeo-ioctl_video_query_display_brightness.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Win32 development documentation (ioctl-video-query-display-brightness)</h1>
</div>
<div class="ntdoc-description">
<h1>IOCTL_VIDEO_QUERY_DISPLAY_BRIGHTNESS control code</h1>
<p>[This control code is available for use in the operating systems specified in the Requirements section. Support for this control code was removed in Windows Server 2008 and Windows Vista. Use the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/WmiCoreProv/wmimonitorbrightness"><strong>WmiMonitorBrightness</strong></a> class instead.]</p>
<p>Retrieves the current AC and DC backlight levels and the current power state.</p>
<p>To perform this operation, call the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol"><strong>DeviceIoControl</strong></a> function with the following parameters.</p>
<pre><code>BOOL DeviceIoControl(
(HANDLE) hDevice,                // handle to device
IOCTL_VIDEO_QUERY_DISPLAY_BRIGHTNESS,  // dwIoControlCode
NULL,                            // lpInBuffer
0,                               // nInBufferSize
(LPVOID) lpOutBuffer,            // output buffer
(<a href="dword" title="typedef unsigned long DWORD;">DWORD</a>) nOutBufferSize,          // size of output buffer
(LPDWORD) lpBytesReturned,       // number of bytes returned
(LPOVERLAPPED) lpOverlapped      // OVERLAPPED structure
);
</code></pre>
<h2>Parameters</h2>
<p><em>hDevice</em></p>
<p>A handle to the \\.\LCD device. To retrieve a device handle, call the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/fileapi/nf-fileapi-createfilea"><strong>CreateFile</strong></a> function.</p>
<p><em>dwIoControlCode</em></p>
<p>The control code for the operation. This value identifies the specific operation to be performed and the type of device on which to perform it. Use <strong>IOCTL_VIDEO_QUERY_DISPLAY_BRIGHTNESS</strong> for this operation.</p>
<p><em>lpInBuffer</em></p>
<p>Not used with this operation; set to <strong>NULL</strong>.</p>
<p><em>nInBufferSize</em></p>
<p>Not used with this operation; set to zero.</p>
<p><em>lpOutBuffer</em></p>
<p>A pointer to a buffer that will receive a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/windows/desktop/legacy/aa372686(v=vs.85)"><strong>DISPLAY_BRIGHTNESS</strong></a> structure.</p>
<p><em>nOutBufferSize</em></p>
<p>The size of the output buffer, in bytes.</p>
<p><em>lpBytesReturned</em></p>
<p>A pointer to a variable that receives the size, in bytes, of output data returned.</p>
<p>If the output buffer is too small to return any data, then the call fails, <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror"><strong>GetLastError</strong></a> returns the error code ERROR_INSUFFICIENT_BUFFER, and the returned byte count is zero.</p>
<p>If the output buffer is too small to hold all of the data but can hold some entries, then the operating system returns as much as fits, the call fails, <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror"><strong>GetLastError</strong></a> returns the error code ERROR_MORE_DATA, and <em>lpBytesReturned</em> indicates the amount of data returned. Your application should call <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol"><strong>DeviceIoControl</strong></a> again with the same operation, specifying a new starting point.</p>
<p>If <em>lpOverlapped</em> is <strong>NULL</strong> (nonoverlapped I/O), <em>lpBytesReturned</em> cannot be <strong>NULL</strong>.</p>
<p>If <em>lpOverlapped</em> is not <strong>NULL</strong> (overlapped I/O), <em>lpBytesReturned</em> can be <strong>NULL</strong>. If this is an overlapped operation, you can retrieve the number of bytes returned by calling the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/ioapiset/nf-ioapiset-getoverlappedresult"><strong>GetOverlappedResult</strong></a> function. If <em>hDevice</em> is associated with an I/O completion port, you can get the number of bytes returned by calling the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/ioapiset/nf-ioapiset-getqueuedcompletionstatus"><strong>GetQueuedCompletionStatus</strong></a> function.</p>
<p><em>lpOverlapped</em></p>
<p>A pointer to an <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/minwinbase/ns-minwinbase-overlapped"><strong>OVERLAPPED</strong></a> structure.</p>
<p>If <em>hDevice</em> was opened with the FILE_FLAG_OVERLAPPED flag, <em>lpOverlapped</em> must point to a valid <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/minwinbase/ns-minwinbase-overlapped"><strong>OVERLAPPED</strong></a> structure. In this case, the operation is performed as an overlapped (asynchronous) operation. If the device was opened with the FILE_FLAG_OVERLAPPED flag and <em>lpOverlapped</em> is <strong>NULL</strong>, the function fails in unpredictable ways.</p>
<p>If <em>hDevice</em> was opened without specifying the FILE_FLAG_OVERLAPPED flag, <em>lpOverlapped</em> is ignored and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol"><strong>DeviceIoControl</strong></a> does not return until the operation has been completed, or until an error occurs.</p>
<h2>Return value</h2>
<p>If the operation completes successfully, <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol"><strong>DeviceIoControl</strong></a> returns a nonzero value.</p>
<p>If the operation fails or is pending, <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol"><strong>DeviceIoControl</strong></a> returns zero. To get extended error information, call <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror"><strong>GetLastError</strong></a>.</p>
<h2>Remarks</h2>
<p>The header file used to build applications that include this functionality, Ntddvdeo.h, is included in the Microsoft Windows Driver Development Kit (DDK). For information on obtaining the DDK, see <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/windows/hardware/gg454513">https://www.microsoft.com/whdc/devtools/ddk/default.mspx</a>.</p>
<p>Alternatively, you can define this control code as follows:</p>
<pre><code>#define IOCTL_VIDEO_QUERY_DISPLAY_BRIGHTNESS \
<a href="ctl_code" title="void CTL_CODE(&#10;  DeviceType,&#10;  Function,&#10;  Method,&#10;  Access&#10;);">CTL_CODE</a>(FILE_DEVICE_VIDEO, 0x126, METHOD_BUFFERED, FILE_ANY_ACCESS)
</code></pre>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minimum supported client<br /></td>
<td>Windows XP with SP1 [desktop apps only]<br /></td>
</tr>
<tr>
<td>Minimum supported server<br /></td>
<td>Windows Server 2003 [desktop apps only]<br /></td>
</tr>
<tr>
<td>End of client support<br /></td>
<td>Windows XP with SP2<br /></td>
</tr>
<tr>
<td>End of server support<br /></td>
<td>Windows Server 2003 R2<br /></td>
</tr>
<tr>
<td>Header<br /></td>
<td>Ntddvdeo.h</td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/power/backlight-control-interface">Backlight Control Interface</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol"><strong>DeviceIoControl</strong></a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/windows/desktop/legacy/aa372686(v=vs.85)"><strong>DISPLAY_BRIGHTNESS</strong></a></p>
<p><strong><a href="ioctl_video_set_display_brightness" title="// CTL_CODE(0x0023, 0x127, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_VIDEO_SET_DISPLAY_BRIGHTNESS 0x0023049C">IOCTL_VIDEO_SET_DISPLAY_BRIGHTNESS</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows/win32/power/ioctl-video-query-display-brightness">View the official Win32 development documentation</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/win32/blob/docs/desktop-src/Power/ioctl-video-query-display-brightness.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
