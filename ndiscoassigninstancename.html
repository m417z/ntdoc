<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NdisCoAssignInstanceName - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NdisCoAssignInstanceName - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NdisCoAssignInstanceName - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NDIS_STATUS NdisCoAssignInstanceName(
  [in]            NDIS_HANDLE  NdisVcHandle,
  [in]            PNDIS_STRING BaseInstanceName,
  [out, optional] PNDIS_STRING VcInstanceName
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndiscoassigninstancename">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndiscoassigninstancename.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ndis-ndiscoassigninstancename)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>NdisCoAssignInstanceName function</h1>
<h2>Description</h2>
<p><strong>NdisCoAssignInstanceName</strong> assigns an instance name to a VC and causes NDIS to register a GUID
(globally unique identifier) for the assigned name with Windows Management Instrumentation (WMI).</p>
<h2>Parameters</h2>
<h3><code>NdisVcHandle</code> [in]</h3>
<p>Specifies the handle to the VC being named. This handle was supplied by NDIS when the VC was
originally created with
<a href="ndiscocreatevc" title="NDIS_STATUS NdisCoCreateVc(&#10;  [in]           NDIS_HANDLE  NdisBindingHandle,&#10;  [in, optional] NDIS_HANDLE  NdisAfHandle,&#10;  [in]           NDIS_HANDLE  ProtocolVcContext,&#10;  [in, out]      PNDIS_HANDLE NdisVcHandle&#10;);">NdisCoCreateVc</a>, whether by the client in
preparation for making an outgoing call or by the call manager in preparation for dispatching an
incoming call to the client.</p>
<h3><code>BaseInstanceName</code> [in]</h3>
<p>Pointer to an NDIS_STRING type that describes a caller-supplied Unicode string that specifies the
base name of the VC. The base name can be any localizable Unicode string that uniquely identifies the VC
with respect to the other named VCs within the scope of the miniport driver. For Windows Vista and
later, NDIS defines the NDIS_STRING type as a
<a href="unicode_string" title="typedef struct _UNICODE_STRING&#10;{&#10;    USHORT Length;&#10;    USHORT MaximumLength;&#10;    _Field_size_bytes_part_opt_(MaximumLength, Length) PWCH Buffer;&#10;} UNICODE_STRING, *PUNICODE_STRING;">UNICODE_STRING</a> type.</p>
<h3><code>VcInstanceName</code> [out, optional]</h3>
<p>Pointer to a caller-allocated NDIS_STRING type in which this routine returns a Unicode string that
specifies the NDIS-assigned instance name assigned for the VC.</p>
<h2>Return value</h2>
<p><strong>NdisCoAssignInstanceName</strong> can return any of the following:</p>
<table>
<thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>NDIS_STATUS_SUCCESS</strong></td>
<td>NDIS assigned an instance name to the specified VC and registered a GUID for the instance name with WMI.</td>
</tr>
<tr>
<td><strong>NDIS_STATUS_FAILURE</strong></td>
<td>The attempt to assign an instance name to the VC failed.</td>
</tr>
<tr>
<td><strong>NDIS_STATUS_RESOURCES</strong></td>
<td>NDIS could not allocate a buffer for the instance name.</td>
</tr>
</tbody>
</table>
<h2>Remarks</h2>
<p>After initiating the setup of a VC with
<a href="ndiscocreatevc" title="NDIS_STATUS NdisCoCreateVc(&#10;  [in]           NDIS_HANDLE  NdisBindingHandle,&#10;  [in, optional] NDIS_HANDLE  NdisAfHandle,&#10;  [in]           NDIS_HANDLE  ProtocolVcContext,&#10;  [in, out]      PNDIS_HANDLE NdisVcHandle&#10;);">NdisCoCreateVc</a>, a call manager or
connection-oriented client can name the VC with
<strong>NdisCoAssignInstanceName</strong>. Calling
<strong>NdisCoAssignInstanceName</strong>, causes NDIS to assign the VC an instance name and register the instance
name with WMI. WMI clients can then enumerate the VC and query or set OIDs relative to the VC.</p>
<p>An integrated miniport call manager (MCM) driver cannot use
<strong>NdisCoAssignInstanceName</strong> to name its VCs. Instead, an MCM driver should create a custom GUID and
OID for the VC and register the GUID-to-OID mapping with NDIS.</p>
<p>NDIS creates an instance name for the specified VC by appending an index to the base name pointed to
by the caller. NDIS returns the complete instance name (base name + index) to the caller and then
registers a GUID for the instance name with WMI. Only named VCs can be enumerated and queried by WMI
clients. Unnamed VCs are not visible to WMI clients.</p>
<p>If the specified VC already has an instance name (assigned in a previous call to
<strong>NdisCoAssignInstanceName</strong>), NDIS returns NDIS_STATUS_SUCCESS and the
<em>original</em> instance name assigned to the VC. An instance name remains assigned to a VC until that VC
is deleted.</p>
<p>The caller can associate the returned instance name with the handle for the named VC that NDIS
previously returned to the caller from
<strong><a href="ndiscocreatevc" title="NDIS_STATUS NdisCoCreateVc(&#10;  [in]           NDIS_HANDLE  NdisBindingHandle,&#10;  [in, optional] NDIS_HANDLE  NdisAfHandle,&#10;  [in]           NDIS_HANDLE  ProtocolVcContext,&#10;  [in, out]      PNDIS_HANDLE NdisVcHandle&#10;);">NdisCoCreateVc</a></strong>. NDIS, however, will continue to use the VC handle--not the instance name--to refer
to the VC in subsequent calls. The caller of
<strong>NdisCoAssignInstanceName</strong> might find the need to return the instance name to some other management
entity.</p>
<p>The caller is responsible for freeing the buffer containing the returned instance name. After deleting
the named VC with
<a href="ndiscodeletevc" title="NDIS_STATUS NdisCoDeleteVc(&#10;  [in] NDIS_HANDLE NdisVcHandle&#10;);">NdisCoDeleteVc</a>, the caller must free the
buffer with
<a href="ndisfreestring" title="void NdisFreeString(&#10;  [in] String&#10;);">NdisFreeString</a>.</p>
<h2>See also</h2>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_co_oid_request">MiniportCoOidRequest</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_oid_request">MiniportOidRequest</a></p>
<p><a href="ndiscocreatevc" title="NDIS_STATUS NdisCoCreateVc(&#10;  [in]           NDIS_HANDLE  NdisBindingHandle,&#10;  [in, optional] NDIS_HANDLE  NdisAfHandle,&#10;  [in]           NDIS_HANDLE  ProtocolVcContext,&#10;  [in, out]      PNDIS_HANDLE NdisVcHandle&#10;);">NdisCoCreateVc</a></p>
<p><a href="ndiscodeletevc" title="NDIS_STATUS NdisCoDeleteVc(&#10;  [in] NDIS_HANDLE NdisVcHandle&#10;);">NdisCoDeleteVc</a></p>
<p><a href="ndisfreestring" title="void NdisFreeString(&#10;  [in] String&#10;);">NdisFreeString</a></p>
<p><a href="unicode_string" title="typedef struct _UNICODE_STRING&#10;{&#10;    USHORT Length;&#10;    USHORT MaximumLength;&#10;    _Field_size_bytes_part_opt_(MaximumLength, Length) PWCH Buffer;&#10;} UNICODE_STRING, *PUNICODE_STRING;">UNICODE_STRING</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndiscoassigninstancename">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ndis/nf-ndis-ndiscoassigninstancename.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
