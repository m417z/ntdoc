<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="ExEnterCriticalRegionAndAcquireResourceExclusive - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>ExEnterCriticalRegionAndAcquireResourceExclusive - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            ExEnterCriticalRegionAndAcquireResourceExclusive - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">PVOID ExEnterCriticalRegionAndAcquireResourceExclusive(
  PERESOURCE Resource
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-exentercriticalregionandacquireresourceexclusive">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/exentercriticalregionandacquireresourceexclusive.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-wdm-exentercriticalregionandacquireresourceexclusive)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>ExEnterCriticalRegionAndAcquireResourceExclusive</strong> routine first enters a critical region, and then acquires exclusive access to the specified resource.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="resource"><code>Resource</code></h3>

<p>[in, out] A pointer to the resource to acquire for exclusive access. This parameter points to a caller-allocated <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/introduction-to-eresource-routines"><strong>ERESOURCE</strong></a> structure. The caller previously allocated this structure from nonpaged pool and initialized it by calling the <strong><a href="exinitializeresourcelite" title="NTSTATUS ExInitializeResourceLite(&#10;  [out] PERESOURCE Resource&#10;);">ExInitializeResourceLite</a></strong> or <strong><a href="exreinitializeresourcelite" title="NTSTATUS ExReinitializeResourceLite(&#10;  [in, out] PERESOURCE Resource&#10;);">ExReinitializeResourceLite</a></strong> routine.</p>

<h2 id="return-value">Return value</h2>

<p>A pointer to an opaque system structure. Drivers should ignore this return value.</p>

<h2 id="remarks">Remarks</h2>

<p>If this routine is called when the specified resource is not immediately available for exclusive access, the calling thread is blocked until the resource is available.</p>

<p>While a driver thread runs in the critical region, the driver's user APCs and normal kernel APCs are not executed. Special kernel APCs are still executed. For more information about these APC types, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/types-of-apcs">Types of APCs</a>.</p>

<p>By temporarily disabling normal kernel APCs, <strong>ExEnterCriticalRegionAndAcquireResourceExclusive</strong> prevents a passive-level calling thread from being preempted by an APC while the thread holds a shared resource that the APC might try to access.</p>

<p>The calling thread should stay in the critical region and hold the specified resource for no longer than is necessary. To release the specified resource and leave the critical region, call the <strong><a href="exreleaseresourceandleavecriticalregion" title="VOID ExReleaseResourceAndLeaveCriticalRegion(&#10;  PERESOURCE Resource&#10;);">ExReleaseResourceAndLeaveCriticalRegion</a></strong> routine.</p>

<p>For more information about using an <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/introduction-to-eresource-routines"><strong>ERESOURCE</strong></a> structure to synchronize exclusive access to a resource, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/introduction-to-eresource-routines">Introduction to ERESOURCE Routines</a>. For more information about entering and leaving a critical region, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/critical-regions-and-guarded-regions">Critical Regions and Guarded Regions</a>.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/introduction-to-eresource-routines"><strong>ERESOURCE</strong></a></p>

<p><strong><a href="exacquireresourceexclusivelite" title="BOOLEAN ExAcquireResourceExclusiveLite(&#10;  [in, out] PERESOURCE Resource,&#10;  [in]      BOOLEAN    Wait&#10;);">ExAcquireResourceExclusiveLite</a></strong></p>

<p><strong><a href="exinitializeresourcelite" title="NTSTATUS ExInitializeResourceLite(&#10;  [out] PERESOURCE Resource&#10;);">ExInitializeResourceLite</a></strong></p>

<p><strong><a href="exreinitializeresourcelite" title="NTSTATUS ExReinitializeResourceLite(&#10;  [in, out] PERESOURCE Resource&#10;);">ExReinitializeResourceLite</a></strong></p>

<p><strong><a href="exreleaseresourcelite" title="VOID ExReleaseResourceLite(&#10;  [in, out] PERESOURCE Resource&#10;);">ExReleaseResourceLite</a></strong></p>

<p><strong><a href="exreleaseresourceandleavecriticalregion" title="VOID ExReleaseResourceAndLeaveCriticalRegion(&#10;  PERESOURCE Resource&#10;);">ExReleaseResourceAndLeaveCriticalRegion</a></strong></p>

<p><strong><a href="keentercriticalregion" title="VOID KeEnterCriticalRegion();">KeEnterCriticalRegion</a></strong></p>

<p><strong><a href="keleavecriticalregion" title="VOID KeLeaveCriticalRegion();">KeLeaveCriticalRegion</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-exentercriticalregionandacquireresourceexclusive">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/nf-wdm-exentercriticalregionandacquireresourceexclusive.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
