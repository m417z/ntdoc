<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="IOCTL_ACPI_GET_DEVICE_INFORMATION - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>IOCTL_ACPI_GET_DEVICE_INFORMATION - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github.ntdoc.min.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github-dark-dimmed.ntdoc.min.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            IOCTL_ACPI_GET_DEVICE_INFORMATION - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header language-cpp">// acpiioct.h

</span><span class="ntdoc-code-intro language-cpp"></span><span class="ntdoc-code-body language-cpp">// <a href="ctl_code" title="void CTL_CODE(&#10;  DeviceType,&#10;  Function,&#10;  Method,&#10;  Access&#10;);">CTL_CODE</a>(0x0032, 0x00a, METHOD_BUFFERED, FILE_READ_ACCESS | FILE_WRITE_ACCESS)
#define IOCTL_ACPI_GET_DEVICE_INFORMATION 0x0032C028</span><span class="ntdoc-code-footer language-cpp"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/acpiioct/ni-acpiioct-ioctl_acpi_get_device_information">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ioctl_acpi_get_device_information.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ni-acpiioct-ioctl_acpi_get_device_information)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>IOCTL_ACPI_GET_DEVICE_INFORMATION IOCTL</h1>
<h2>Description</h2>
<p>A driver for a device can use the IOCTL_ACPI_GET_DEVICE_INFORMATION device control request to obtain fine-grained identification information about its device. This IOCTL is typically used by drivers that support multiple versions or revisions of a device, and need to examine the component parts that make up the device's HW ID string to identify the exact device. The driver should call <a href="iobuilddeviceiocontrolrequest" title="__drv_aliasesMem PIRP IoBuildDeviceIoControlRequest(&#10;  [in]            ULONG            IoControlCode,&#10;  [in]            PDEVICE_OBJECT   DeviceObject,&#10;  [in, optional]  PVOID            InputBuffer,&#10;  [in]            ULONG            InputBufferLength,&#10;  [out, optional] PVOID            OutputBuffer,&#10;  [in]            ULONG            OutputBufferLength,&#10;  [in]            BOOLEAN          InternalDeviceIoControl,&#10;  [in, optional]  PKEVENT          Event,&#10;  [out]           PIO_STATUS_BLOCK IoStatusBlock&#10;);">IoBuildDeviceIoControlRequest</a> and pass the following input and output parameters to build this request.</p>
<h2>Parameters</h2>
<h3>Major code</h3>
<h3>Input buffer</h3>
<p>Set the <strong><a href="iobuilddeviceiocontrolrequest" title="__drv_aliasesMem PIRP IoBuildDeviceIoControlRequest(&#10;  [in]            ULONG            IoControlCode,&#10;  [in]            PDEVICE_OBJECT   DeviceObject,&#10;  [in, optional]  PVOID            InputBuffer,&#10;  [in]            ULONG            InputBufferLength,&#10;  [out, optional] PVOID            OutputBuffer,&#10;  [in]            ULONG            OutputBufferLength,&#10;  [in]            BOOLEAN          InternalDeviceIoControl,&#10;  [in, optional]  PKEVENT          Event,&#10;  [out]           PIO_STATUS_BLOCK IoStatusBlock&#10;);">IoBuildDeviceIoControlRequest</a></strong> input parameters as follows:</p>
<ul>
<li><em>IoControlCode</em> is set to IOCTL_ACPI_GET_DEVICE_INFORMATION.</li>
<li><em>DeviceObject</em> is set to a pointer to the physical device object (PDO) of the device.</li>
<li><em>InputBuffer</em> is set to a pointer to an input buffer structure that depends on the type of input arguments to be passed to the control method. For more information about the type of input arguments that this IOCTL supports, see the Remarks section later in this topic.</li>
<li><em>InputBufferLength</em> is set to the size, in bytes, of the input buffer that is supplied by <em>InputBuffer</em>.</li>
<li><em>OutputBufferLength</em> supplies the size, in bytes, of the output buffer that is supplied by <em>OutputBuffer</em>.</li>
<li><em>InternalDeviceIoControl</em> is set to <strong>FALSE</strong>.</li>
<li><em>Event</em> is set to <strong>NULL</strong>.</li>
</ul>
<h3>Input buffer length</h3>
<p><em>InputBufferLength</em> is set to the size, in bytes, of the input buffer that is supplied by <em>InputBuffer</em>.</p>
<h3>Output buffer</h3>
<p>Set the <strong><a href="iobuilddeviceiocontrolrequest" title="__drv_aliasesMem PIRP IoBuildDeviceIoControlRequest(&#10;  [in]            ULONG            IoControlCode,&#10;  [in]            PDEVICE_OBJECT   DeviceObject,&#10;  [in, optional]  PVOID            InputBuffer,&#10;  [in]            ULONG            InputBufferLength,&#10;  [out, optional] PVOID            OutputBuffer,&#10;  [in]            ULONG            OutputBufferLength,&#10;  [in]            BOOLEAN          InternalDeviceIoControl,&#10;  [in, optional]  PKEVENT          Event,&#10;  [out]           PIO_STATUS_BLOCK IoStatusBlock&#10;);">IoBuildDeviceIoControlRequest</a></strong> output parameters as follows:</p>
<ul>
<li><em>OutputBuffer</em> supplies a pointer to an <a href="acpi_device_information_output_buffer" title="typedef struct _ACPI_DEVICE_INFORMATION_OUTPUT_BUFFER {&#10;  ULONG  Signature;&#10;  USHORT Size;&#10;  UCHAR  Revision;&#10;  UCHAR  Reserved0;&#10;  USHORT VendorIdStringOffset;&#10;  USHORT VendorStringLength;&#10;  USHORT DeviceIdStringOffset;&#10;  USHORT SubSystemIdStringOffset;&#10;  USHORT SubSystemStringLength;&#10;  USHORT SubDeviceIdStringOffset;&#10;  USHORT InstanceIdLength;&#10;  USHORT InstanceIdOffset;&#10;  USHORT BaseClassCode;&#10;  USHORT HardwareRevision;&#10;  UCHAR  ProgrammingInterface;&#10;  UCHAR  Reserved1;&#10;  USHORT SubClassCode;&#10;} ACPI_DEVICE_INFORMATION_OUTPUT_BUFFER, *PACPI_DEVICE_INFORMATION_OUTPUT_BUFFER;">ACPI_DEVICE_INFORMATION_OUTPUT_BUFFER</a> structure that contains the output arguments from the control method.</li>
<li><em>IoStatusBlock</em> is set to an <a href="io_status_block" title="typedef struct _IO_STATUS_BLOCK&#10;{&#10;    union&#10;    {&#10;        NTSTATUS Status;&#10;        PVOID Pointer;&#10;    };&#10;    ULONG_PTR Information;&#10;} IO_STATUS_BLOCK, *PIO_STATUS_BLOCK;">IO_STATUS_BLOCK</a> structure.</li>
</ul>
<h3>Output buffer length</h3>
<p><em>OutputBufferLength</em> supplies the size, in bytes, of the output buffer that is supplied by <em>OutputBuffer</em>.</p>
<h3>Input/output buffer</h3>
<h3>Input/output buffer length</h3>
<h3>Status block</h3>
<p>If the request succeeds, <em>IoStatusBlock</em>-&gt;<strong>Status</strong> is set to <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a>; otherwise, the <strong>Status</strong> member is set to an error code. If the output buffer is not large enough to contain the output buffer header, the <strong>Status</strong> member is set to STATUS_BUFFER_TOO_SMALL. If the output buffer is large enough to contain the output buffer header, but is not large enough to contain all the output arguments from the control method, the <strong>Status</strong> member is set to STATUS_BUFFER_OVERFLOW, and <em>OutputBuffer</em>-&gt;<strong>Length</strong> is set to the required length of the output buffer.</p>
<p>If the request succeeds, the <em>IoStatusBlock</em>-&gt;<strong>Information</strong> member is set to the number of bytes that is returned in the output buffer; otherwise, the <strong>Information</strong> member is set to zero.</p>
<h2>Remarks</h2>
<p>A driver for a device can use IOCTL_ACPI_GET_DEVICE_INFORMATION to obtain fine-grained identification information about its device. This IOCTL is typically used with drivers that support multiple hardware versions or revisions of a device, and need to examine the component parts that make up the device's HW ID string to identify the exact device. For example, a driver may support different revisions of the same device, in which some aspect of the programing interface or the device's behavior is different. The driver can identify exactly which revision it is running on.</p>
<p>The output arguments from the request are returned in the variable-length <a href="acpi_device_information_output_buffer" title="typedef struct _ACPI_DEVICE_INFORMATION_OUTPUT_BUFFER {&#10;  ULONG  Signature;&#10;  USHORT Size;&#10;  UCHAR  Revision;&#10;  UCHAR  Reserved0;&#10;  USHORT VendorIdStringOffset;&#10;  USHORT VendorStringLength;&#10;  USHORT DeviceIdStringOffset;&#10;  USHORT SubSystemIdStringOffset;&#10;  USHORT SubSystemStringLength;&#10;  USHORT SubDeviceIdStringOffset;&#10;  USHORT InstanceIdLength;&#10;  USHORT InstanceIdOffset;&#10;  USHORT BaseClassCode;&#10;  USHORT HardwareRevision;&#10;  UCHAR  ProgrammingInterface;&#10;  UCHAR  Reserved1;&#10;  USHORT SubClassCode;&#10;} ACPI_DEVICE_INFORMATION_OUTPUT_BUFFER, *PACPI_DEVICE_INFORMATION_OUTPUT_BUFFER;">ACPI_DEVICE_INFORMATION_OUTPUT_BUFFER</a> structure that is supplied by the <em>OutBuffer</em> pointer. The <a href="acpi_device_information_output_buffer" title="typedef struct _ACPI_DEVICE_INFORMATION_OUTPUT_BUFFER {&#10;  ULONG  Signature;&#10;  USHORT Size;&#10;  UCHAR  Revision;&#10;  UCHAR  Reserved0;&#10;  USHORT VendorIdStringOffset;&#10;  USHORT VendorStringLength;&#10;  USHORT DeviceIdStringOffset;&#10;  USHORT SubSystemIdStringOffset;&#10;  USHORT SubSystemStringLength;&#10;  USHORT SubDeviceIdStringOffset;&#10;  USHORT InstanceIdLength;&#10;  USHORT InstanceIdOffset;&#10;  USHORT BaseClassCode;&#10;  USHORT HardwareRevision;&#10;  UCHAR  ProgrammingInterface;&#10;  UCHAR  Reserved1;&#10;  USHORT SubClassCode;&#10;} ACPI_DEVICE_INFORMATION_OUTPUT_BUFFER, *PACPI_DEVICE_INFORMATION_OUTPUT_BUFFER;">ACPI_DEVICE_INFORMATION_OUTPUT_BUFFER</a> includes an array of variable-length arrays, each of which returns an output argument representing the sub-system ID string, vendor ID string, and instance ID string, respectively.</p>
<p>IOCTL_ACPI_GET_DEVICE_INFORMATION can be used only at IRQL &lt;= DISPATCH_LEVEL.</p>
<h2>See also</h2>
<p><a href="acpi_device_information_output_buffer" title="typedef struct _ACPI_DEVICE_INFORMATION_OUTPUT_BUFFER {&#10;  ULONG  Signature;&#10;  USHORT Size;&#10;  UCHAR  Revision;&#10;  UCHAR  Reserved0;&#10;  USHORT VendorIdStringOffset;&#10;  USHORT VendorStringLength;&#10;  USHORT DeviceIdStringOffset;&#10;  USHORT SubSystemIdStringOffset;&#10;  USHORT SubSystemStringLength;&#10;  USHORT SubDeviceIdStringOffset;&#10;  USHORT InstanceIdLength;&#10;  USHORT InstanceIdOffset;&#10;  USHORT BaseClassCode;&#10;  USHORT HardwareRevision;&#10;  UCHAR  ProgrammingInterface;&#10;  UCHAR  Reserved1;&#10;  USHORT SubClassCode;&#10;} ACPI_DEVICE_INFORMATION_OUTPUT_BUFFER, *PACPI_DEVICE_INFORMATION_OUTPUT_BUFFER;">ACPI_DEVICE_INFORMATION_OUTPUT_BUFFER</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/acpiioct/ni-acpiioct-ioctl_acpi_get_device_information">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/acpiioct/ni-acpiioct-ioctl_acpi_get_device_information.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script src="modules/highlight.js/highlight.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
