<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NDIS_PCI_DEVICE_CUSTOM_PROPERTIES - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NDIS_PCI_DEVICE_CUSTOM_PROPERTIES - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NDIS_PCI_DEVICE_CUSTOM_PROPERTIES - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _NDIS_PCI_DEVICE_CUSTOM_PROPERTIES {
  <a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a> Header;
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a>             DeviceType;
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a>             CurrentSpeedAndMode;
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a>             CurrentPayloadSize;
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a>             MaxPayloadSize;
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a>             MaxReadRequestSize;
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a>             CurrentLinkSpeed;
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a>             CurrentLinkWidth;
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a>             MaxLinkSpeed;
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a>             MaxLinkWidth;
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a>             PciExpressVersion;
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a>             InterruptType;
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a>             MaxInterruptMessages;
} NDIS_PCI_DEVICE_CUSTOM_PROPERTIES, *PNDIS_PCI_DEVICE_CUSTOM_PROPERTIES;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddndis/ns-ntddndis-_ndis_pci_device_custom_properties">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndis_pci_device_custom_properties.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntddndis-_ndis_pci_device_custom_properties)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_ndis_pci_device_custom_properties-structure">_NDIS_PCI_DEVICE_CUSTOM_PROPERTIES structure</h1>

<h2 id="description">Description</h2>

<p>The NDIS_PCI_DEVICE_CUSTOM_PROPERTIES structure defines the type and speed of the PCI bus that a NIC
is running on.</p>

<h2 id="members">Members</h2>

<h3 id="header"><code>Header</code></h3>

<p>The
<a rel="noopener" target="_blank" href="ndis_object_header">NDIS_OBJECT_HEADER</a> structure for the
NDIS_PCI_DEVICE_CUSTOM_PROPERTIES structure. NDIS sets the
<strong>Type</strong> member of the structure that
<strong>Header</strong> specifies to NDIS_OBJECT_TYPE_DEFAULT, the
**Revision** member to NDIS_OBJECT_TYPE_PCI_DEVICE_CUSTOM_PROPERTIES_REVISION_1, and the
**Size** member to
sizeof(NDIS_PCI_DEVICE_CUSTOM_PROPERTIES).</p>

<h3 id="devicetype"><code>DeviceType</code></h3>

<p>The PCI device type. For example, conventional, PCI-X, PCI-E, and so on. See the definitions for
DevProp_PciDevice_DeviceType_xxx in pciprop.h.</p>

<h3 id="currentspeedandmode"><code>CurrentSpeedAndMode</code></h3>

<p>The speed and mode of conventional PCI or PCI-X devices. For conventional PCI devices, see the
definitions for DevProp_PciDevice_CurrentSpeedAndMode_Pci_Conventional_xxx. For PCI-X devices, see the
definitions for DevProp_PciDevice_CurrentSpeedAndMode_Pci_X_xxx. This property is valid only for
conventional PCI and PCI-X devices.</p>

<h3 id="currentpayloadsize"><code>CurrentPayloadSize</code></h3>

<p>The current payload size in the transaction layer for a PCI Express device. See definitions for
DevProp_PciExpressDevice_PayloadOrRequestSize_xxx. This property is valid only for PCI Express
devices.</p>

<h3 id="maxpayloadsize"><code>MaxPayloadSize</code></h3>

<p>The maximum payload size in the transaction layer that is supported by a PCI Express device. See
definitions for DevProp_PciExpressDevice_PayloadOrRequestSize_xxx. This property is valid only for PCI
Express devices.</p>

<h3 id="maxreadrequestsize"><code>MaxReadRequestSize</code></h3>

<p>The maximum read request size for a PCI Express device. See definitions for
DevProp_PciExpressDevice_PayloadOrRequestSize_xxx. This property is valid only for PCI Express
devices..</p>

<h3 id="currentlinkspeed"><code>CurrentLinkSpeed</code></h3>

<p>The current link speed for the device. This property is applicable to a PCI Express device. See
the definitions for DevProp_PciExpressDevice_LinkSpeed_xxx. This property is valid only for PCI Express
devices.</p>

<h3 id="currentlinkwidth"><code>CurrentLinkWidth</code></h3>

<p>The current link width of the device. This property is applicable to a PCI express device. See the
definitions for DevProp_PciExpressDevice_LinkWidth_xxx. This property is valid only for PCI Express
devices.</p>

<h3 id="maxlinkspeed"><code>MaxLinkSpeed</code></h3>

<p>The maximum link speed of an express link for a PCI Express device. See the definitions for
DevProp_PciExpressDevice_LinkSpeed_xxx. This property is valid only for PCI Express devices..</p>

<h3 id="maxlinkwidth"><code>MaxLinkWidth</code></h3>

<p>The maximum link width that is implemented by an express link for a PCI Express device. See the
definitions for DevProp_PciExpressDevice_LinkWidth_xxx. This property is valid only for PCI Express
devices.</p>

<h3 id="pciexpressversion"><code>PciExpressVersion</code></h3>

<p>The specification version to which an PCI Express device was built. See the definitions for
DevProp_PciExpressDevice_Spec_Version_xxx. This property is valid only for PCI Express devices.</p>

<h3 id="interrupttype"><code>InterruptType</code></h3>

<p>The hardware support for interrupts on the PCI Express device. See the definitions for
DevProp_PciDevice_InterruptType_xxx. This property is valid only for PCI Express devices.</p>

<h3 id="maxinterruptmessages"><code>MaxInterruptMessages</code></h3>

<p>The number of message interrupts that a PCI Express device supports in hardware. See the
definition for DevProp_PciDevice_InterruptMessageMaximum. This property is valid only for PCI Express
devices that support message interrupts.</p>

<h2 id="remarks">Remarks</h2>

<p>Some high performance miniport adapters can adjust the hardware configuration and resource allocation
based on the type and speed of the PCI bus that the NIC is running on. To provide miniport drivers with
this information during initialization, NDIS queries the custom PCI properties of PCI adapters and
provides the results in
<strong>PciDeviceCustomProperties</strong> member of the
<a rel="noopener" target="_blank" href="ndis_miniport_init_parameters">NDIS_MINIPORT_INIT_PARAMETERS</a> structure. The type and speed of the PCI bus is also available
through the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-gen-pci-device-custom-properties">OID_GEN_PCI_DEVICE_CUSTOM_PROPERTIES</a> OID request and the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddndis/ns-ntddndis-_ndis_pci_device_custom_properties">GUID_NDIS_GEN_PCI_DEVICE_CUSTOM_PROPERTIES</a> WMI GUID.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddndis/ns-ntddndis-_ndis_pci_device_custom_properties">GUID_NDIS_GEN_PCI_DEVICE_CUSTOM_PROPERTIES</a></p>

<p><a rel="noopener" target="_blank" href="ndis_miniport_init_parameters">NDIS_MINIPORT_INIT_PARAMETERS</a></p>

<p><a rel="noopener" target="_blank" href="ndis_object_header">NDIS_OBJECT_HEADER</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-gen-pci-device-custom-properties">OID_GEN_PCI_DEVICE_CUSTOM_PROPERTIES</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddndis/ns-ntddndis-_ndis_pci_device_custom_properties">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddndis/ns-ntddndis-_ndis_pci_device_custom_properties.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
