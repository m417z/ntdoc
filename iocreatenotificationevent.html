<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="IoCreateNotificationEvent - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>IoCreateNotificationEvent - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            IoCreateNotificationEvent - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">PKEVENT IoCreateNotificationEvent(
  [in]  <a href="unicode_string" title="typedef struct _UNICODE_STRING&#10;{&#10;    USHORT Length;&#10;    USHORT MaximumLength;&#10;    _Field_size_bytes_part_opt_(MaximumLength, Length) PWCH Buffer;&#10;} UNICODE_STRING, *PUNICODE_STRING;">PUNICODE_STRING</a> EventName,
  [out] PHANDLE         EventHandle
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iocreatenotificationevent">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/iocreatenotificationevent.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-wdm-iocreatenotificationevent)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="iocreatenotificationevent-function">IoCreateNotificationEvent function</h1>

<h2 id="description">Description</h2>

<p>The <strong>IoCreateNotificationEvent</strong> routine creates or opens a named notification event used to notify one or more threads of execution that an event has occurred.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="eventname-in"><code>EventName</code> [in]</h3>

<p>Pointer to a buffer containing a null-terminated Unicode string that names the event.</p>

<h3 id="eventhandle-out"><code>EventHandle</code> [out]</h3>

<p>Pointer to a location in which to return a kernel handle for the event object.</p>

<h2 id="return-value">Return value</h2>

<p><strong>IoCreateNotificationEvent</strong> returns a pointer to the created or opened event object or <strong>NULL</strong> if the event object could not be created or opened.</p>

<h2 id="remarks">Remarks</h2>

<p>If the event object does not already exist, <strong>IoCreateNotificationEvent</strong> creates and opens it, and sets its state to Signaled.</p>

<p>If the event object already exists, <strong>IoCreateNotificationEvent</strong> just opens the event object.</p>

<p>Both notification events and synchronization events are used to coordinate execution. However, while a synchronization event resets itself, a notification event remains in the Signaled state until the driver calls <strong><a href="keclearevent" title="VOID KeClearEvent(&#10;  [in, out] PRKEVENT Event&#10;);">KeClearEvent</a></strong> or <strong><a href="keresetevent" title="LONG KeResetEvent(&#10;  [in, out] PRKEVENT Event&#10;);">KeResetEvent</a></strong>.</p>

<p>To synchronize on a notification event:</p>

<ol>
<li>Open the notification event with <strong>IoCreateNotificationEvent</strong>. Identify the event with the <em>EventName</em> string.</li>
<li>Wait for the event to be signaled by calling <strong><a href="kewaitforsingleobject" title="NTSTATUS&#10;KeWaitForSingleObject (&#10;    PVOID Object,&#10;    KWAIT_REASON WaitReason,&#10;    KPROCESSOR_MODE WaitMode,&#10;    BOOLEAN Alertable,&#10;    PLARGE_INTEGER Timeout&#10;    );">KeWaitForSingleObject</a></strong> with the PKEVENT returned by <strong>IoCreateNotificationEvent</strong>. More than one thread of execution can wait for a given notification event. To poll instead of stall, specify a <em>Timeout</em> of zero to <strong><a href="kewaitforsingleobject" title="NTSTATUS&#10;KeWaitForSingleObject (&#10;    PVOID Object,&#10;    KWAIT_REASON WaitReason,&#10;    KPROCESSOR_MODE WaitMode,&#10;    BOOLEAN Alertable,&#10;    PLARGE_INTEGER Timeout&#10;    );">KeWaitForSingleObject</a></strong>.</li>
<li>Close the handle to the notification event with <strong><a href="ntclose" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtClose(&#10;    _In_ _Post_ptr_invalid_ HANDLE Handle&#10;    );">ZwClose</a></strong> when access to the event is no longer needed.</li>
</ol>

<p>There are two main methods for sharing event objects:</p>

<ul>
<li><p>The user-mode application creates the event object and passes a handle to the object to the driver by sending an IOCTL to the driver. The driver must handle the IOCTL in the context of the process that created the event object and must validate the handle by calling <strong><a href="obreferenceobjectbyhandle" title="NTSTATUS ObReferenceObjectByHandle(&#10;  [in]            HANDLE                     Handle,&#10;  [in]            ACCESS_MASK                DesiredAccess,&#10;  [in, optional]  POBJECT_TYPE               ObjectType,&#10;  [in]            KPROCESSOR_MODE            AccessMode,&#10;  [out]           PVOID                      *Object,&#10;  [out, optional] POBJECT_HANDLE_INFORMATION HandleInformation&#10;);">ObReferenceObjectByHandle</a></strong>. This method is the recommended method for sharing event objects between user and kernel modes.</p></li>
<li><p>The driver creates a named event object in the global <code>\BaseNamedObjects</code> object directory. To access a kernel-mode event from user-mode, use the name <code>Global\\</code><em>Xxx</em>. Note that security settings can prevent an application from opening the event. The <code>\\BaseNamedObjects</code> object directory is not created until the Microsoft Win32 subsystem initializes, so drivers that are loaded at boot time cannot create event objects in the <code>\\BaseNamedObjects</code> directory in their <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/storage/driverentry-of-ide-controller-minidriver"><em>DriverEntry</em></a> routines.</p></li>
</ul>

<p>For more information about events, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/event-objects">Event Objects</a>.</p>

<h2 id="see-also">See also</h2>

<p><a href="iocreatesynchronizationevent" title="PKEVENT IoCreateSynchronizationEvent(&#10;  [in]  PUNICODE_STRING EventName,&#10;  [out] PHANDLE         EventHandle&#10;);">IoCreateSynchronizationEvent</a></p>

<p><a href="keclearevent" title="VOID KeClearEvent(&#10;  [in, out] PRKEVENT Event&#10;);">KeClearEvent</a></p>

<p><a href="keresetevent" title="LONG KeResetEvent(&#10;  [in, out] PRKEVENT Event&#10;);">KeResetEvent</a></p>

<p><a href="kesetevent" title="LONG KeSetEvent(&#10;  [in, out] PRKEVENT  Event,&#10;  [in]      KPRIORITY Increment,&#10;  [in]      BOOLEAN   Wait&#10;);">KeSetEvent</a></p>

<p><a href="kewaitforsingleobject" title="NTSTATUS&#10;KeWaitForSingleObject (&#10;    PVOID Object,&#10;    KWAIT_REASON WaitReason,&#10;    KPROCESSOR_MODE WaitMode,&#10;    BOOLEAN Alertable,&#10;    PLARGE_INTEGER Timeout&#10;    );">KeWaitForSingleObject</a></p>

<p><a href="rtlinitunicodestring" title="FORCEINLINE&#10;VOID&#10;NTAPI_INLINE&#10;RtlInitUnicodeString(&#10;    _Out_ PUNICODE_STRING DestinationString,&#10;    _In_opt_z_ PCWSTR SourceString&#10;    )&#10;{&#10;    if (SourceString)&#10;        DestinationString-&gt;MaximumLength = (DestinationString-&gt;Length = (USHORT)(wcslen(SourceString) * sizeof(WCHAR))) + sizeof(UNICODE_NULL);&#10;    else&#10;        DestinationString-&gt;MaximumLength = DestinationString-&gt;Length = 0;&#10;&#10;    DestinationString-&gt;Buffer = (PWCH)SourceString;&#10;}">RtlInitUnicodeString</a></p>

<p><a href="ntclose" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtClose(&#10;    _In_ _Post_ptr_invalid_ HANDLE Handle&#10;    );">ZwClose</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iocreatenotificationevent">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/nf-wdm-iocreatenotificationevent.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
