<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="LPDXVA_BufferDescription - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>LPDXVA_BufferDescription - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            LPDXVA_BufferDescription - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// dxva.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _DXVA_BufferDescription {
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwTypeIndex;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwBufferIndex;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwDataOffset;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwDataSize;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwFirstMBaddress;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwNumMBsInBuffer;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwWidth;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwHeight;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwStride;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwReservedBits;
} DXVA_BufferDescription, *LPDXVA_BufferDescription;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxva/ns-dxva-_dxva_bufferdescription">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/lpdxva_bufferdescription.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-dxva-_dxva_bufferdescription)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_dxva_bufferdescription-structure">_DXVA_BufferDescription structure</h1>

<h2 id="description">Description</h2>

<p>The DXVA_BufferDescription structure is sent by the host decoder to the accelerator to provide information to the accelerator about the buffer that is currently being passed from the host to the accelerator.</p>

<h2 id="members">Members</h2>

<h3 id="dwtypeindex"><code>dwTypeIndex</code></h3>

<p>Identifies the type of buffer passed to the accelerator. The following table lists the numeric identifiers and the associated buffer type.</p>

<table>
<thead>
<tr>
  <th style="text-align:left;"><strong>Value</strong></th>
  <th style="text-align:left;"><strong>Buffer Type</strong></th>
</tr>
</thead>
<tbody>
<tr>
  <td style="text-align:left;">1</td>
  <td style="text-align:left;">Picture decoding parameter buffers.</td>
</tr>
<tr>
  <td style="text-align:left;">2</td>
  <td style="text-align:left;"><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/macroblock-oriented-picture-decoding">Macroblock control command buffers</a> (closely associated with and having a 1:1 correspondence with residual difference block data buffers).</td>
</tr>
<tr>
  <td style="text-align:left;">3</td>
  <td style="text-align:left;">Residual difference block data buffers. See <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/macroblock-oriented-picture-decoding">Macroblock-Oriented Picture Decoding</a> for more information.</td>
</tr>
<tr>
  <td style="text-align:left;">4</td>
  <td style="text-align:left;">Deblocking filter control command buffers (with or without a restriction on the effect of the filter).</td>
</tr>
<tr>
  <td style="text-align:left;">5</td>
  <td style="text-align:left;">Inverse-quantization matrix buffers (only used with off-host VLD processing).</td>
</tr>
<tr>
  <td style="text-align:left;">6</td>
  <td style="text-align:left;">Slice-control buffers (closely associated with and having a 1:1 correspondence with bitstream data buffers).</td>
</tr>
<tr>
  <td style="text-align:left;">7</td>
  <td style="text-align:left;">Bitstream data buffers.</td>
</tr>
<tr>
  <td style="text-align:left;">8</td>
  <td style="text-align:left;">AYUV alpha-blending sample buffers.</td>
</tr>
<tr>
  <td style="text-align:left;">9</td>
  <td style="text-align:left;">IA44/AI44 alpha-blending surface buffers.</td>
</tr>
<tr>
  <td style="text-align:left;">10</td>
  <td style="text-align:left;">DPXD alpha-blending surface buffers.</td>
</tr>
<tr>
  <td style="text-align:left;">11</td>
  <td style="text-align:left;">Highlight data buffers.</td>
</tr>
<tr>
  <td style="text-align:left;">12</td>
  <td style="text-align:left;">DCCMD data buffers.</td>
</tr>
<tr>
  <td style="text-align:left;">13</td>
  <td style="text-align:left;">Alpha-blend combination buffers.</td>
</tr>
<tr>
  <td style="text-align:left;">14</td>
  <td style="text-align:left;">Picture resampling control buffers.</td>
</tr>
<tr>
  <td style="text-align:left;">15</td>
  <td style="text-align:left;">Read-back command buffers containing commands to read macroblocks of the resulting picture back to the host.</td>
</tr>
</tbody>
</table>

<h3 id="dwbufferindex"><code>dwBufferIndex</code></h3>

<p>Specifies the sequence number of the buffer within the buffers of the same type that were passed in the same <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/buffer-description-list">buffer description list</a>.</p>

<h3 id="dwdataoffset"><code>dwDataOffset</code></h3>

<p>Specifies the offset of the relevant data from the beginning of the buffer in bytes. The use of this member is currently restricted to the value zero.</p>

<h3 id="dwdatasize"><code>dwDataSize</code></h3>

<p>Specifies the amount of relevant data in the buffer in bytes. The location of the last byte of content in the buffer is <strong>dwDataOffset</strong>, plus <strong>dwDataSize</strong> minus 1.</p>

<h3 id="dwfirstmbaddress"><code>dwFirstMBaddress</code></h3>

<p>Specifies the macroblock address of the first macroblock in the buffer passed to the accelerator. The macroblock address is given in raster scan order. The address is determined by the members of <a href="lpdxva_pictureparameters" title="typedef struct _DXVA_PictureParameters {&#10;  WORD wDecodedPictureIndex;&#10;  WORD wDeblockedPictureIndex;&#10;  WORD wForwardRefPictureIndex;&#10;  WORD wBackwardRefPictureIndex;&#10;  WORD wPicWidthInMBminus1;&#10;  WORD wPicHeightInMBminus1;&#10;  BYTE bMacroblockWidthMinus1;&#10;  BYTE bMacroblockHeightMinus1;&#10;  BYTE bBlockWidthMinus1;&#10;  BYTE bBlockHeightMinus1;&#10;  BYTE bBPPminus1;&#10;  BYTE bPicStructure;&#10;  BYTE bSecondField;&#10;  BYTE bPicIntra;&#10;  BYTE bPicBackwardPrediction;&#10;  BYTE bBidirectionalAveragingMode;&#10;  BYTE bMVprecisionAndChromaRelation;&#10;  BYTE bChromaFormat;&#10;  BYTE bPicScanFixed;&#10;...">DXVA_PictureParameters</a>. Examples of macroblock addresses are as follows.</p>

<table>
<thead>
<tr>
  <th style="text-align:left;"><strong>Macroblock</strong></th>
  <th style="text-align:left;"><strong>Address</strong></th>
</tr>
</thead>
<tbody>
<tr>
  <td style="text-align:left;">top-left</td>
  <td style="text-align:left;">zero</td>
</tr>
<tr>
  <td style="text-align:left;">top-right</td>
  <td style="text-align:left;"><strong>wPicWidthInMBminus1</strong></td>
</tr>
<tr>
  <td style="text-align:left;">lower-left</td>
  <td style="text-align:left;">wPicHeightInMBminus1 x (wPicWidthInMBminus1+1)</td>
</tr>
<tr>
  <td style="text-align:left;">lower-right</td>
  <td style="text-align:left;">(wPicHeightInMBminus1+1) x (wPicWidthInMBminus1+1)-1</td>
</tr>
</tbody>
</table>

<p>This member must be zero if the data buffer is among the following types: picture decoding parameters, inverse-quantization matrix, slice control, bitstream data, AYUV, IA44/AI44, DPXD, Highlight, and DCCMD.</p>

<p>If the data buffer is a residual difference block data buffer, <strong>dwFirstMBaddress</strong> must have the same value as for the corresponding macroblock control command buffer. See <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/macroblock-oriented-picture-decoding">Macroblock-Oriented Picture Decoding</a> for more information.</p>

<h3 id="dwnummbsinbuffer"><code>dwNumMBsInBuffer</code></h3>

<p>Specifies the number of macroblocks of data in the buffer. This count includes skipped macroblocks. Must be zero if the data buffer is among the following types: picture decoding parameters, inverse-quantization matrix, AYUV, IA44/AI44, DPXD, Highlight, or DCCMD.</p>

<p>The value for <strong>dwNumMBsInBuffer</strong> depends on the type of data buffer being used as shown in the following table.</p>

<table>
<thead>
<tr>
  <th style="text-align:left;"><strong>Buffer Type</strong></th>
  <th style="text-align:left;"><strong>Value of dwNumMBsInBuffer</strong></th>
</tr>
</thead>
<tbody>
<tr>
  <td style="text-align:left;">Macroblock control command</td>
  <td style="text-align:left;">Must be equal to the sum of all values for MBskipsFollowing, added to the number of macroblock control commands in the macroblock control command buffer.</td>
</tr>
<tr>
  <td style="text-align:left;">Residual difference block</td>
  <td style="text-align:left;">Must have the same value as for the corresponding macroblock control command buffer.</td>
</tr>
<tr>
  <td style="text-align:left;">Slice-control command</td>
  <td style="text-align:left;">Must be equal to the value of the wNumberMBsInSlice member of the <a href="lpdxva_sliceinfo" title="typedef struct _DXVA_SliceInfo {&#10;  WORD  wHorizontalPosition;&#10;  WORD  wVerticalPosition;&#10;  DWORD dwSliceBitsInBuffer;&#10;  DWORD dwSliceDataLocation;&#10;  BYTE  bStartCodeBitOffset;&#10;  BYTE  bReservedBits;&#10;  WORD  wMBbitOffset;&#10;  WORD  wNumberMBsInSlice;&#10;  WORD  wQuantizerScaleCode;&#10;  WORD  wBadSliceChopping;&#10;} DXVA_SliceInfo, *LPDXVA_SliceInfo;">DXVA_SliceInfo</a> structure in the slice-control buffer.</td>
</tr>
<tr>
  <td style="text-align:left;">Bitstream</td>
  <td style="text-align:left;">Must have the same value as for the corresponding slice-control command buffer.</td>
</tr>
</tbody>
</table>

<h3 id="dwwidth"><code>dwWidth</code></h3>

<p>Specifies the width of the data in the buffer as the number of units of bits for the following types of data: AYUV (data is specified in 32-bit units), IA44/AI44 (data is specified in 8-bit units), or DPXD (data is specified in 2-bit units). This member must be zero if the data buffer is not among the preceding types.</p>

<h3 id="dwheight"><code>dwHeight</code></h3>

<p>Specifies the height of the data in the buffer as the number of units of bits for the following types of data: AYUV (data is specified in 32-bit units), IA44/AI44 (data is specified in 8-bit units), or DPXD (data is specified in 2-bit units).This member must be zero if the data buffer is not among the preceding types.</p>

<h3 id="dwstride"><code>dwStride</code></h3>

<p>Specifies the stride of the data in the buffer as the number of units of bits for the following types of data: AYUV (data is specified in 32-bit units), IA44/AI44 (data is specified in 8-bit units), or DPXD (data is specified in 2-bit units). The stride for the applicable buffer types is determined from the buffer allocation setup performed by the accelerator. This member must be zero if the data buffer is not among the preceding types.</p>

<h3 id="dwreservedbits"><code>dwReservedBits</code></h3>

<p>Reserved bits used for packing and alignment. Must be zero.</p>

<h2 id="remarks">Remarks</h2>

<p>An array of DXVA_BufferDescription structures is referred to as a buffer description list. When a set of buffers is sent from the host decoder to the hardware accelerator, a buffer description list is sent to describe the buffers. The buffer description list contains one DXVA_BufferDescription structure for each buffer in this set. The buffer description list starts with a DXVA_BufferDescription structure for the first buffer of the first type, followed by a DXVA_BufferDescription structure for the next buffer of the same type, and so on. The buffer description list then continues with a DXVA_BufferDescription structure for the first buffer of the next type, and so on.</p>

<h2 id="see-also">See also</h2>

<p><a href="lpdxva_pictureparameters" title="typedef struct _DXVA_PictureParameters {&#10;  WORD wDecodedPictureIndex;&#10;  WORD wDeblockedPictureIndex;&#10;  WORD wForwardRefPictureIndex;&#10;  WORD wBackwardRefPictureIndex;&#10;  WORD wPicWidthInMBminus1;&#10;  WORD wPicHeightInMBminus1;&#10;  BYTE bMacroblockWidthMinus1;&#10;  BYTE bMacroblockHeightMinus1;&#10;  BYTE bBlockWidthMinus1;&#10;  BYTE bBlockHeightMinus1;&#10;  BYTE bBPPminus1;&#10;  BYTE bPicStructure;&#10;  BYTE bSecondField;&#10;  BYTE bPicIntra;&#10;  BYTE bPicBackwardPrediction;&#10;  BYTE bBidirectionalAveragingMode;&#10;  BYTE bMVprecisionAndChromaRelation;&#10;  BYTE bChromaFormat;&#10;  BYTE bPicScanFixed;&#10;...">DXVA_PictureParameters</a></p>

<p><a href="lpdxva_sliceinfo" title="typedef struct _DXVA_SliceInfo {&#10;  WORD  wHorizontalPosition;&#10;  WORD  wVerticalPosition;&#10;  DWORD dwSliceBitsInBuffer;&#10;  DWORD dwSliceDataLocation;&#10;  BYTE  bStartCodeBitOffset;&#10;  BYTE  bReservedBits;&#10;  WORD  wMBbitOffset;&#10;  WORD  wNumberMBsInSlice;&#10;  WORD  wQuantizerScaleCode;&#10;  WORD  wBadSliceChopping;&#10;} DXVA_SliceInfo, *LPDXVA_SliceInfo;">DXVA_SliceInfo</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxva/ns-dxva-_dxva_bufferdescription">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/dxva/ns-dxva-_dxva_bufferdescription.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
