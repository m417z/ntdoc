<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="PVIDEO_HW_GET_CHILD_DESCRIPTOR - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>PVIDEO_HW_GET_CHILD_DESCRIPTOR - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            PVIDEO_HW_GET_CHILD_DESCRIPTOR - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// video.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">PVIDEO_HW_GET_CHILD_DESCRIPTOR PvideoHwGetChildDescriptor;

VP_STATUS PvideoHwGetChildDescriptor(
  [in]  IN PVOID HwDeviceExtension,
  [in]  IN <a href="video_child_enum_info" title="typedef struct _VIDEO_CHILD_ENUM_INFO {&#10;  ULONG Size;&#10;  ULONG ChildDescriptorSize;&#10;  ULONG ChildIndex;&#10;  ULONG ACPIHwId;&#10;  PVOID ChildHwDeviceExtension;&#10;} VIDEO_CHILD_ENUM_INFO, *PVIDEO_CHILD_ENUM_INFO;">PVIDEO_CHILD_ENUM_INFO</a> ChildEnumInfo,
  [out] OUT <a href="video_child_type" title="typedef enum {&#10;  Monitor,&#10;  NonPrimaryChip,&#10;  VideoChip,&#10;  Other&#10;} VIDEO_CHILD_TYPE, *PVIDEO_CHILD_TYPE;">PVIDEO_CHILD_TYPE</a> VideoChildType,
  [out] OUT PUCHAR pChildDescriptor,
  [out] OUT PULONG UId,
  [out] OUT PULONG pUnused
)
{...}</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/nc-video-pvideo_hw_get_child_descriptor">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/pvideo_hw_get_child_descriptor.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-video-pvideo_hw_get_child_descriptor)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>PVIDEO_HW_GET_CHILD_DESCRIPTOR callback function</h1>
<h2>Description</h2>
<p><em>HwVidGetVideoChildDescriptor</em> returns a descriptor, a type, and an identification number for a particular child device of the display adapter.</p>
<h2>Parameters</h2>
<h3><code>HwDeviceExtension</code> [in]</h3>
<p>Pointer to the miniport driver's per-adapter storage area. For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/device-extensions">Device Extensions</a>.</p>
<h3><code>ChildEnumInfo</code> [in]</h3>
<p>Is a <a href="video_child_enum_info" title="typedef struct _VIDEO_CHILD_ENUM_INFO {&#10;  ULONG Size;&#10;  ULONG ChildDescriptorSize;&#10;  ULONG ChildIndex;&#10;  ULONG ACPIHwId;&#10;  PVOID ChildHwDeviceExtension;&#10;} VIDEO_CHILD_ENUM_INFO, *PVIDEO_CHILD_ENUM_INFO;">VIDEO_CHILD_ENUM_INFO</a> structure that describes the device being enumerated.</p>
<h3><code>VideoChildType</code> [out]</h3>
<p>Pointer to a location in which the miniport driver returns the type of child being enumerated. This member can be one of the following from the <a href="video_child_type" title="typedef enum {&#10;  Monitor,&#10;  NonPrimaryChip,&#10;  VideoChip,&#10;  Other&#10;} VIDEO_CHILD_TYPE, *PVIDEO_CHILD_TYPE;">VIDEO_CHILD_TYPE</a> enumeration:</p>
<table>
<thead>
<tr>
<th align="left"><strong>Value</strong></th>
<th align="left"><strong>Meaning</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><strong>Monitor</strong></td>
<td align="left">The child device is a monitor. If the miniport driver detects that the monitor has a DDC2-compliant <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/">EDID</a> structure associated with it, the miniport driver should extract the EDID information from the monitor and return it in the buffer to which pChildDescriptor points. The miniport driver can more easily obtain the EDID from the monitor by calling <a href="videoportddcmonitorhelper" title="VIDEOPORT_DEPRECATED VIDEOPORT_API BOOLEAN VideoPortDDCMonitorHelper(&#10;  [in]      IN PVOID      HwDeviceExtension,&#10;  [in]      IN PVOID      DDCControl,&#10;  [in, out] IN OUT PUCHAR EdidBuffer,&#10;  [in]      IN ULONG      EdidBufferSize&#10;);">VideoPortDDCMonitorHelper</a>. <br />If the detected monitor is not DDC2-compliant, the miniport driver should not return anything in pChildDescriptor.</td>
</tr>
<tr>
<td align="left"><strong>NonPrimaryChip</strong></td>
<td align="left">Is reserved for system use.</td>
</tr>
<tr>
<td align="left"><strong>VideoChip</strong></td>
<td align="left">The child device is the graphics chip.<br />The miniport driver should return this type when ChildEnumInfo.ChildIndex is DISPLAY_ADAPTER_HW_ID. The miniport driver should not return anything in pChildDescriptor.</td>
</tr>
<tr>
<td align="left"><strong>Other</strong></td>
<td align="left">The child device has a separate device driver associated with it.<br />The miniport driver should return the device's PnP hardware identifier as a Unicode string in the buffer to which pChildDescriptor points. This string must match the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/">device ID</a> specified in the driver's INF file. It will be used by the operating system as the hardware ID for this device.</td>
</tr>
</tbody>
</table>
<h3><code>pChildDescriptor</code> [out]</h3>
<p>Pointer to a buffer in which the miniport driver can return data that identifies the device. The information returned depends on the child type specified in <em>VideoChildType</em>. The size of this buffer is specified by the video port driver in the <strong>ChildDescriptorSize</strong> member of <a href="video_child_enum_info" title="typedef struct _VIDEO_CHILD_ENUM_INFO {&#10;  ULONG Size;&#10;  ULONG ChildDescriptorSize;&#10;  ULONG ChildIndex;&#10;  ULONG ACPIHwId;&#10;  PVOID ChildHwDeviceExtension;&#10;} VIDEO_CHILD_ENUM_INFO, *PVIDEO_CHILD_ENUM_INFO;">VIDEO_CHILD_ENUM_INFO</a>.</p>
<h3><code>UId</code> [out]</h3>
<p>Pointer to the location in which the miniport driver returns a unique 32-bit <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/">device ID</a> for this device. The miniport driver should set <em>UId</em> to be DISPLAY_ADAPTER_HW_ID when the device is the actual display adapter.</p>
<h3><code>pUnused</code> [out]</h3>
<p>Is unused and must be set to zero.</p>
<h2>Return value</h2>
<p><em>HwVidGetVideoChildDescriptor</em> returns one of the following values:</p>
<table>
<thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>VIDEO_ENUM_INVALID_DEVICE</td>
<td>Call again. The miniport driver could not enumerate the child device identified in ChildEnumInfo but there are more devices to be enumerated.</td>
</tr>
<tr>
<td>VIDEO_ENUM_MORE_DEVICES</td>
<td>A new child device is enumerated. The video port will call HwVidGetVideoChildDescriptor again in this case.</td>
</tr>
<tr>
<td>VIDEO_ENUM_NO_MORE_DEVICES</td>
<td>The miniport driver could not enumerate the child device identified in ChildEnumInfo. Stop enumeration. There are no more devices to be enumerated.</td>
</tr>
</tbody>
</table>
<h2>Remarks</h2>
<p>By default, <em>HwVidGetVideoChildDescriptor</em> is not called until after the device is started by <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/nc-video-pvideo_hw_find_adapter">HwVidFindAdapter</a>. To allow the enumeration of a device's children before the device is started, set the <strong>AllowEarlyEnumeration</strong> member of <a href="video_hw_initialization_data" title="typedef struct _VIDEO_HW_INITIALIZATION_DATA {&#10;  ULONG                          HwInitDataSize;&#10;  INTERFACE_TYPE                 AdapterInterfaceType;&#10;  PVIDEO_HW_FIND_ADAPTER         HwFindAdapter;&#10;  PVIDEO_HW_INITIALIZE           HwInitialize;&#10;  PVIDEO_HW_INTERRUPT            HwInterrupt;&#10;  PVIDEO_HW_START_IO             HwStartIO;&#10;  ULONG                          HwDeviceExtensionSize;&#10;  ULONG                          StartingDeviceNumber;&#10;  PVIDEO_HW_RESET_HW             HwResetHw;&#10;  PVIDEO_HW_TIMER                HwTimer;&#10;  PVIDEO_HW_START_DMA            HwStartDma;&#10;  PVIDEO_HW_POWER_SET            HwSetPowerState;&#10;  PVIDEO_HW_POWER_GET            HwGetPowerState;&#10;  PVIDEO_HW_GET_CHILD_DESCRIPTOR HwGetVideoChildDescriptor;&#10;  PVIDEO_HW_QUERY_INTERFACE      HwQueryInterface;&#10;  ULONG                          HwChildDeviceExtensionSize;&#10;  PVIDEO_ACCESS_RANGE            HwLegacyResourceList;&#10;  ULONG                          HwLegacyResourceCount;&#10;  PVIDEO_HW_LEGACYRESOURCES      HwGetLegacyResources;&#10;...">VIDEO_HW_INITIALIZATION_DATA</a>. When <strong>AllowEarlyEnumeration</strong> is set, <em>HwVidGetVideoChildDescriptor</em> can be called at any time.</p>
<p><em>HwVidGetVideoChildDescriptor</em> should do the following:</p>
<ul>
<li>Determine the type of the child device based on the data supplied in <em>ChildEnumInfo</em>, and return this type in <em>VideoChildType</em>.</li>
<li>Fill in the buffer to which <em>pChildDescriptor</em> points with the appropriate data, depending on the value of <em>VideoChildType</em>.</li>
<li>Write a 32-bit value in <em>UId</em> that uniquely identifies the child device being enumerated. The video port driver will pass this handle back to the miniport driver for operations such as power management.</li>
</ul>
<p><em>HwVidGetVideoChildDescriptor</em> should be made pageable.</p>
<h2>See also</h2>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/nc-video-pvideo_hw_power_get">HwVidGetPowerState</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/nc-video-pvideo_hw_power_set">HwVidSetPowerState</a></p>
<p><a href="video_child_enum_info" title="typedef struct _VIDEO_CHILD_ENUM_INFO {&#10;  ULONG Size;&#10;  ULONG ChildDescriptorSize;&#10;  ULONG ChildIndex;&#10;  ULONG ACPIHwId;&#10;  PVOID ChildHwDeviceExtension;&#10;} VIDEO_CHILD_ENUM_INFO, *PVIDEO_CHILD_ENUM_INFO;">VIDEO_CHILD_ENUM_INFO</a></p>
<p><a href="videoportddcmonitorhelper" title="VIDEOPORT_DEPRECATED VIDEOPORT_API BOOLEAN VideoPortDDCMonitorHelper(&#10;  [in]      IN PVOID      HwDeviceExtension,&#10;  [in]      IN PVOID      DDCControl,&#10;  [in, out] IN OUT PUCHAR EdidBuffer,&#10;  [in]      IN ULONG      EdidBufferSize&#10;);">VideoPortDDCMonitorHelper</a></p>
<p><a href="videoportenumeratechildren" title="VIDEOPORT_DEPRECATED VIDEOPORT_API VP_STATUS VideoPortEnumerateChildren(&#10;  [in] IN PVOID HwDeviceExtension,&#10;  [in] IN PVOID Reserved&#10;);">VideoPortEnumerateChildren</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/nc-video-pvideo_hw_get_child_descriptor">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/video/nc-video-pvideo_hw_get_child_descriptor.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
