<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NDIS_PD_POST_AND_DRAIN_BUFFER_LIST - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NDIS_PD_POST_AND_DRAIN_BUFFER_LIST - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NDIS_PD_POST_AND_DRAIN_BUFFER_LIST - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NDIS_PD_POST_AND_DRAIN_BUFFER_LIST NdisPdPostAndDrainBufferList;

VOID() NdisPdPostAndDrainBufferList(
  [in, out] <a href="ndis_pd_queue" title="typedef struct _NDIS_PD_QUEUE {&#10;  NDIS_OBJECT_HEADER           Header;&#10;  ULONG                        Flags;&#10;  const NDIS_PD_QUEUE_DISPATCH *Dispatch;&#10;  PVOID                        PDPlatformReserved[2];&#10;  PVOID                        PDClientReserved[2];&#10;} NDIS_PD_QUEUE;">NDIS_PD_QUEUE</a> *Queue,
  [in, out] <a href="pd_buffer" title="typedef struct _PD_BUFFER {&#10;  struct _PD_BUFFER   *NextPDBuffer;&#10;  struct _PD_BUFFER   *NextPartialPDBuffer;&#10;  PVOID               PDClientReserved;&#10;  PVOID               PDClientContext;&#10;  PUCHAR              DataBufferVirtualAddress;&#10;  DMA_LOGICAL_ADDRESS DataBufferDmaLogicalAddress;&#10;  ULONG               DataBufferSize;&#10;  USHORT              PDClientContextSize;&#10;  USHORT              Attributes;&#10;  USHORT              Flags;&#10;  USHORT              DataStart;&#10;  ULONG               DataLength;&#10;  union {&#10;    struct {&#10;      union {&#10;        ULONG64 RxFilterContext;&#10;        ULONG64 GftFlowEntryId;&#10;      };&#10;      ULONG                         RxHashValue;&#10;...">PD_BUFFER</a> **PostBufferListHead,
  [in, out] <a href="pd_buffer" title="typedef struct _PD_BUFFER {&#10;  struct _PD_BUFFER   *NextPDBuffer;&#10;  struct _PD_BUFFER   *NextPartialPDBuffer;&#10;  PVOID               PDClientReserved;&#10;  PVOID               PDClientContext;&#10;  PUCHAR              DataBufferVirtualAddress;&#10;  DMA_LOGICAL_ADDRESS DataBufferDmaLogicalAddress;&#10;  ULONG               DataBufferSize;&#10;  USHORT              PDClientContextSize;&#10;  USHORT              Attributes;&#10;  USHORT              Flags;&#10;  USHORT              DataStart;&#10;  ULONG               DataLength;&#10;  union {&#10;    struct {&#10;      union {&#10;        ULONG64 RxFilterContext;&#10;        ULONG64 GftFlowEntryId;&#10;      };&#10;      ULONG                         RxHashValue;&#10;...">PD_BUFFER</a> ***DrainBufferListTail,
  [in]      <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> MaxDrainCount
)
{...}</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-ndis_pd_post_and_drain_buffer_list">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndis_pd_post_and_drain_buffer_list.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-ndis-ndis_pd_post_and_drain_buffer_list)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="ndis_pd_post_and_drain_buffer_list-callback-function">NDIS_PD_POST_AND_DRAIN_BUFFER_LIST callback function</h1>

<h2 id="description">Description</h2>

<p>The PacketDirect (PD) platform calls a PD-capable miniport driver's
<em>PDPostAndDrainBufferList</em> function to post <a href="pd_buffer" title="typedef struct _PD_BUFFER {&#10;  struct _PD_BUFFER   *NextPDBuffer;&#10;  struct _PD_BUFFER   *NextPartialPDBuffer;&#10;  PVOID               PDClientReserved;&#10;  PVOID               PDClientContext;&#10;  PUCHAR              DataBufferVirtualAddress;&#10;  DMA_LOGICAL_ADDRESS DataBufferDmaLogicalAddress;&#10;  ULONG               DataBufferSize;&#10;  USHORT              PDClientContextSize;&#10;  USHORT              Attributes;&#10;  USHORT              Flags;&#10;  USHORT              DataStart;&#10;  ULONG               DataLength;&#10;  union {&#10;    struct {&#10;      union {&#10;        ULONG64 RxFilterContext;&#10;        ULONG64 GftFlowEntryId;&#10;      };&#10;      ULONG                         RxHashValue;&#10;...">PD_BUFFER</a> structures to PD transmit/receive queues and draining any previously posted <strong><a href="pd_buffer" title="typedef struct _PD_BUFFER {&#10;  struct _PD_BUFFER   *NextPDBuffer;&#10;  struct _PD_BUFFER   *NextPartialPDBuffer;&#10;  PVOID               PDClientReserved;&#10;  PVOID               PDClientContext;&#10;  PUCHAR              DataBufferVirtualAddress;&#10;  DMA_LOGICAL_ADDRESS DataBufferDmaLogicalAddress;&#10;  ULONG               DataBufferSize;&#10;  USHORT              PDClientContextSize;&#10;  USHORT              Attributes;&#10;  USHORT              Flags;&#10;  USHORT              DataStart;&#10;  ULONG               DataLength;&#10;  union {&#10;    struct {&#10;      union {&#10;        ULONG64 RxFilterContext;&#10;        ULONG64 GftFlowEntryId;&#10;      };&#10;      ULONG                         RxHashValue;&#10;...">PD_BUFFER</a></strong> structures that have been completed.</p>

<p><strong>Note</strong> You must declare the function by using the <strong>NDIS_PD_POST_AND_DRAIN_BUFFER_LIST</strong> type. For more
information, see the following Examples section.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="queue-in-out"><code>Queue</code> [in, out]</h3>

<p>A pointer to the transmit or receive queue that will receive posted buffers and will have completed buffers removed.</p>

<h3 id="postbufferlisthead-in-out"><code>PostBufferListHead</code> [in, out]</h3>

<p>The head of the post list. The provider removes the buffers in this list and adds them into the <strong>Queue</strong>.</p>

<h3 id="drainbufferlisttail-in-out"><code>DrainBufferListTail</code> [in, out]</h3>

<p>The tail of the drain list. The provider removes any completed buffers from the <strong>Queue</strong> and adds them to this list.</p>

<h3 id="maxdraincount-in"><code>MaxDrainCount</code> [in]</h3>

<p>The maximum amount of <a href="pd_buffer" title="typedef struct _PD_BUFFER {&#10;  struct _PD_BUFFER   *NextPDBuffer;&#10;  struct _PD_BUFFER   *NextPartialPDBuffer;&#10;  PVOID               PDClientReserved;&#10;  PVOID               PDClientContext;&#10;  PUCHAR              DataBufferVirtualAddress;&#10;  DMA_LOGICAL_ADDRESS DataBufferDmaLogicalAddress;&#10;  ULONG               DataBufferSize;&#10;  USHORT              PDClientContextSize;&#10;  USHORT              Attributes;&#10;  USHORT              Flags;&#10;  USHORT              DataStart;&#10;  ULONG               DataLength;&#10;  union {&#10;    struct {&#10;      union {&#10;        ULONG64 RxFilterContext;&#10;        ULONG64 GftFlowEntryId;&#10;      };&#10;      ULONG                         RxHashValue;&#10;...">PD_BUFFER</a> structures to drain. The provider must ensure not exceed this amount. A set of partial <strong><a href="pd_buffer" title="typedef struct _PD_BUFFER {&#10;  struct _PD_BUFFER   *NextPDBuffer;&#10;  struct _PD_BUFFER   *NextPartialPDBuffer;&#10;  PVOID               PDClientReserved;&#10;  PVOID               PDClientContext;&#10;  PUCHAR              DataBufferVirtualAddress;&#10;  DMA_LOGICAL_ADDRESS DataBufferDmaLogicalAddress;&#10;  ULONG               DataBufferSize;&#10;  USHORT              PDClientContextSize;&#10;  USHORT              Attributes;&#10;  USHORT              Flags;&#10;  USHORT              DataStart;&#10;  ULONG               DataLength;&#10;  union {&#10;    struct {&#10;      union {&#10;        ULONG64 RxFilterContext;&#10;        ULONG64 GftFlowEntryId;&#10;      };&#10;      ULONG                         RxHashValue;&#10;...">PD_BUFFER</a></strong> structures that make up a single L2 packet count is 1.</p>

<h2 id="return-value">Return value</h2>

<p>This callback function does not return a value.</p>

<h2 id="remarks">Remarks</h2>

<p>The provider removes buffers from the PostBufferList and places them into the queue, starting with the head buffer in the list and advancing to the next buffer until either the PostBufferList is empty or the queue is full (or near full). The provider advanced to the PostListHead and returns the new list head to the caller. The provider also removes any completed buffers from the queue and inserts them into the tail of the DrainBufferList and returns the new DrainBufferList tail to the client.</p>

<p><strong>Note</strong> The provider should drain as many buffers as it can in order to open up room for the buffers being posted. The PostBufferList and DrainBufferList are guaranteed to be disjoint buffer lists (The client never provides the head of a buffer list as the PostBufferListHead and the tail of that same list as DrainBufferListTail).</p>

<p>The client can also pass an empty post buffer list to just drain completed buffers without posting any new buffers. The client can also set the MaxDrainCount to 0 to just post new buffers without draining any completed buffers. In rare cases, the client may invoke the call with both an empty post buffer list and the MaxDrainCount to 0. The provider must not assume otherwise and handle such a call properly such as a no-operation.</p>

<h3 id="examples">Examples</h3>

<p>To define a <em>PDPostAndDrainBufferList</em> function, you must first provide a function declaration that identifies the type of function you're defining. Windows provides a set of function types for drivers. Declaring a function using the function types helps <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/code-analysis-for-drivers">Code Analysis for Drivers</a>, <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/static-driver-verifier">Static Driver Verifier</a> (SDV), and other verification tools find errors, and it's a requirement for writing drivers for the Windows operating system.</p>

<p>For example, to define a <em>PDPostAndDrainBufferList</em> function that is named "MyPDPostAndDrainBufferList", use the <strong>NDIS_PD_POST_AND_DRAIN_BUFFER_LIST</strong> type as shown in this code example:</p>

<p><!-- CODE_MARKER --></p>

<pre><code>NDIS_PD_POST_AND_DRAIN_BUFFER_LIST MyPDPostAndDrainBufferList;
</code></pre>

<p>Then, implement your function as follows:</p>

<p><!-- CODE_MARKER --></p>

<pre><code>_Use_decl_annotations_
VOID
 MyPDPostAndDrainBufferList(
    <a href="ndis_pd_queue" title="typedef struct _NDIS_PD_QUEUE {&#10;  NDIS_OBJECT_HEADER           Header;&#10;  ULONG                        Flags;&#10;  const NDIS_PD_QUEUE_DISPATCH *Dispatch;&#10;  PVOID                        PDPlatformReserved[2];&#10;  PVOID                        PDClientReserved[2];&#10;} NDIS_PD_QUEUE;">NDIS_PD_QUEUE</a>*  Queue,
    <a href="pd_buffer" title="typedef struct _PD_BUFFER {&#10;  struct _PD_BUFFER   *NextPDBuffer;&#10;  struct _PD_BUFFER   *NextPartialPDBuffer;&#10;  PVOID               PDClientReserved;&#10;  PVOID               PDClientContext;&#10;  PUCHAR              DataBufferVirtualAddress;&#10;  DMA_LOGICAL_ADDRESS DataBufferDmaLogicalAddress;&#10;  ULONG               DataBufferSize;&#10;  USHORT              PDClientContextSize;&#10;  USHORT              Attributes;&#10;  USHORT              Flags;&#10;  USHORT              DataStart;&#10;  ULONG               DataLength;&#10;  union {&#10;    struct {&#10;      union {&#10;        ULONG64 RxFilterContext;&#10;        ULONG64 GftFlowEntryId;&#10;      };&#10;      ULONG                         RxHashValue;&#10;...">PD_BUFFER</a>**  PostBufferListHead,
    <a href="pd_buffer" title="typedef struct _PD_BUFFER {&#10;  struct _PD_BUFFER   *NextPDBuffer;&#10;  struct _PD_BUFFER   *NextPartialPDBuffer;&#10;  PVOID               PDClientReserved;&#10;  PVOID               PDClientContext;&#10;  PUCHAR              DataBufferVirtualAddress;&#10;  DMA_LOGICAL_ADDRESS DataBufferDmaLogicalAddress;&#10;  ULONG               DataBufferSize;&#10;  USHORT              PDClientContextSize;&#10;  USHORT              Attributes;&#10;  USHORT              Flags;&#10;  USHORT              DataStart;&#10;  ULONG               DataLength;&#10;  union {&#10;    struct {&#10;      union {&#10;        ULONG64 RxFilterContext;&#10;        ULONG64 GftFlowEntryId;&#10;      };&#10;      ULONG                         RxHashValue;&#10;...">PD_BUFFER</a>*** DrainBufferListTail,
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  MaxDrainCount
    )
  {...}
</code></pre>

<p>The <strong>NDIS_PD_POST_AND_DRAIN_BUFFER_LIST</strong> function type is defined in the Ntddndis.h header file. To more accurately identify errors when you run the code analysis tools, be sure to add the _Use_decl_annotations_ annotation to your function definition. The _Use_decl_annotations_ annotation ensures that the annotations that are applied to the <strong>NDIS_PD_POST_AND_DRAIN_BUFFER_LIST</strong> function type in the header file are used. For more information about the requirements for function declarations, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/declaring-functions-by-using-function-role-types-for-ndis-drivers">Declaring Functions by Using Function Role Types for NDIS Drivers</a>.</p>

<p>For information about _Use_decl_annotations_, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/visualstudio/code-quality/annotating-function-behavior">Annotating Function Behavior</a>.</p>

<p>The following is an example code snippet that illustrates the pointer indirections for this function.</p>

<p><!-- CODE_MARKER --></p>

<div class="codehilite">
<pre><span></span><code><span class="n"><a href="pd_buffer" title="typedef struct _PD_BUFFER {&#10;  struct _PD_BUFFER   *NextPDBuffer;&#10;  struct _PD_BUFFER   *NextPartialPDBuffer;&#10;  PVOID               PDClientReserved;&#10;  PVOID               PDClientContext;&#10;  PUCHAR              DataBufferVirtualAddress;&#10;  DMA_LOGICAL_ADDRESS DataBufferDmaLogicalAddress;&#10;  ULONG               DataBufferSize;&#10;  USHORT              PDClientContextSize;&#10;  USHORT              Attributes;&#10;  USHORT              Flags;&#10;  USHORT              DataStart;&#10;  ULONG               DataLength;&#10;  union {&#10;    struct {&#10;      union {&#10;        ULONG64 RxFilterContext;&#10;        ULONG64 GftFlowEntryId;&#10;      };&#10;      ULONG                         RxHashValue;&#10;...">PD_BUFFER</a></span><span class="o">*</span><span class="w"> </span><span class="n">PostHead</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="n"><a href="pd_buffer" title="typedef struct _PD_BUFFER {&#10;  struct _PD_BUFFER   *NextPDBuffer;&#10;  struct _PD_BUFFER   *NextPartialPDBuffer;&#10;  PVOID               PDClientReserved;&#10;  PVOID               PDClientContext;&#10;  PUCHAR              DataBufferVirtualAddress;&#10;  DMA_LOGICAL_ADDRESS DataBufferDmaLogicalAddress;&#10;  ULONG               DataBufferSize;&#10;  USHORT              PDClientContextSize;&#10;  USHORT              Attributes;&#10;  USHORT              Flags;&#10;  USHORT              DataStart;&#10;  ULONG               DataLength;&#10;  union {&#10;    struct {&#10;      union {&#10;        ULONG64 RxFilterContext;&#10;        ULONG64 GftFlowEntryId;&#10;      };&#10;      ULONG                         RxHashValue;&#10;...">PD_BUFFER</a></span><span class="o">**</span><span class="w"> </span><span class="n">PostTail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">PostHead</span><span class="p">;</span>
<span class="n"><a href="pd_buffer" title="typedef struct _PD_BUFFER {&#10;  struct _PD_BUFFER   *NextPDBuffer;&#10;  struct _PD_BUFFER   *NextPartialPDBuffer;&#10;  PVOID               PDClientReserved;&#10;  PVOID               PDClientContext;&#10;  PUCHAR              DataBufferVirtualAddress;&#10;  DMA_LOGICAL_ADDRESS DataBufferDmaLogicalAddress;&#10;  ULONG               DataBufferSize;&#10;  USHORT              PDClientContextSize;&#10;  USHORT              Attributes;&#10;  USHORT              Flags;&#10;  USHORT              DataStart;&#10;  ULONG               DataLength;&#10;  union {&#10;    struct {&#10;      union {&#10;        ULONG64 RxFilterContext;&#10;        ULONG64 GftFlowEntryId;&#10;      };&#10;      ULONG                         RxHashValue;&#10;...">PD_BUFFER</a></span><span class="o">*</span><span class="w"> </span><span class="n">DrainHead</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="n"><a href="pd_buffer" title="typedef struct _PD_BUFFER {&#10;  struct _PD_BUFFER   *NextPDBuffer;&#10;  struct _PD_BUFFER   *NextPartialPDBuffer;&#10;  PVOID               PDClientReserved;&#10;  PVOID               PDClientContext;&#10;  PUCHAR              DataBufferVirtualAddress;&#10;  DMA_LOGICAL_ADDRESS DataBufferDmaLogicalAddress;&#10;  ULONG               DataBufferSize;&#10;  USHORT              PDClientContextSize;&#10;  USHORT              Attributes;&#10;  USHORT              Flags;&#10;  USHORT              DataStart;&#10;  ULONG               DataLength;&#10;  union {&#10;    struct {&#10;      union {&#10;        ULONG64 RxFilterContext;&#10;        ULONG64 GftFlowEntryId;&#10;      };&#10;      ULONG                         RxHashValue;&#10;...">PD_BUFFER</a></span><span class="o">**</span><span class="w"> </span><span class="n">DrainTail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">DrainHead</span><span class="p">;</span>

<span class="n"><a href="pd_buffer" title="typedef struct _PD_BUFFER {&#10;  struct _PD_BUFFER   *NextPDBuffer;&#10;  struct _PD_BUFFER   *NextPartialPDBuffer;&#10;  PVOID               PDClientReserved;&#10;  PVOID               PDClientContext;&#10;  PUCHAR              DataBufferVirtualAddress;&#10;  DMA_LOGICAL_ADDRESS DataBufferDmaLogicalAddress;&#10;  ULONG               DataBufferSize;&#10;  USHORT              PDClientContextSize;&#10;  USHORT              Attributes;&#10;  USHORT              Flags;&#10;  USHORT              DataStart;&#10;  ULONG               DataLength;&#10;  union {&#10;    struct {&#10;      union {&#10;        ULONG64 RxFilterContext;&#10;        ULONG64 GftFlowEntryId;&#10;      };&#10;      ULONG                         RxHashValue;&#10;...">PD_BUFFER</a></span><span class="o">*</span><span class="w"> </span><span class="n">bufX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">allocated</span><span class="w"> </span><span class="n"><a href="pd_buffer" title="typedef struct _PD_BUFFER {&#10;  struct _PD_BUFFER   *NextPDBuffer;&#10;  struct _PD_BUFFER   *NextPartialPDBuffer;&#10;  PVOID               PDClientReserved;&#10;  PVOID               PDClientContext;&#10;  PUCHAR              DataBufferVirtualAddress;&#10;  DMA_LOGICAL_ADDRESS DataBufferDmaLogicalAddress;&#10;  ULONG               DataBufferSize;&#10;  USHORT              PDClientContextSize;&#10;  USHORT              Attributes;&#10;  USHORT              Flags;&#10;  USHORT              DataStart;&#10;  ULONG               DataLength;&#10;  union {&#10;    struct {&#10;      union {&#10;        ULONG64 RxFilterContext;&#10;        ULONG64 GftFlowEntryId;&#10;      };&#10;      ULONG                         RxHashValue;&#10;...">PD_BUFFER</a></span><span class="o">&gt;</span><span class="p">;</span>

<span class="n">bufX</span><span class="o">-&gt;</span><span class="n">NextPDBuffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="o">*</span><span class="n">PostTail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bufX</span><span class="p">;</span>
<span class="n">PostTail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bufX</span><span class="o">-&gt;</span><span class="n">NextPDBuffer</span><span class="p">;</span>

<span class="c1">// BEFORE:</span>
<span class="c1">//PostHead == bufX</span>
<span class="c1">//PostTail == &amp;bufZ-&gt;NextPDBuffer</span>
<span class="c1">//DrainHead == NULL</span>
<span class="c1">//DrainTail == &amp;DrainHead</span>

<span class="n">NDIS_PD_POST_AND_DRAIN_BUFFER_LIST</span><span class="p">(</span>
<span class="w">          </span><span class="n">Queue</span><span class="p">,</span>
<span class="w">          </span><span class="o">&amp;</span><span class="n">PostHead</span><span class="p">,</span>
<span class="w">          </span><span class="o">&amp;</span><span class="n">DrainTail</span><span class="p">,</span>
<span class="w">          </span><span class="mi">32</span><span class="p">);</span>

<span class="c1">// AFTER:</span>
<span class="c1">//PostHead == bufY</span>
<span class="c1">//PostTail == &amp;bufZ-&gt;NextPDBuffer</span>
<span class="c1">//DrainHead == buf1</span>
<span class="c1">//DrainTail == &amp;buf5-&gt;NextPDBuffer</span>
</code></pre>
</div>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-ndis_pd_post_and_drain_buffer_list">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ndis/nc-ndis-ndis_pd_post_and_drain_buffer_list.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
