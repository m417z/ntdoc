<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NdisIfRegisterInterface - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NdisIfRegisterInterface - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NdisIfRegisterInterface - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NDIS_STATUS NdisIfRegisterInterface(
  [in] NDIS_HANDLE         NdisProviderHandle,
  [in] NET_LUID            NetLuid,
  [in] NDIS_HANDLE         ProviderIfContext,
  [in] <a href="net_if_information" title="typedef struct _NET_IF_INFORMATION {&#10;  NDIS_OBJECT_HEADER     Header;&#10;  ULONG                  Flags;&#10;  NET_PHYSICAL_LOCATION  PhysicalLocation;&#10;  ULONG                  WanTunnelType;&#10;  ULONG                  PortNumber;&#10;  NET_IF_ACCESS_TYPE     AccessType;&#10;  NET_IF_DIRECTION_TYPE  DirectionType;&#10;  NET_IF_CONNECTION_TYPE ConnectionType;&#10;  BOOLEAN                ifConnectorPresent;&#10;  USHORT                 PhysAddressLength;&#10;  USHORT                 PhysAddressOffset;&#10;  USHORT                 PermanentPhysAddressOffset;&#10;  USHORT                 FriendlyNameLength;&#10;  USHORT                 FriendlyNameOffset;&#10;  GUID                   InterfaceGuid;&#10;  NET_IF_NETWORK_GUID    NetworkGuid;&#10;  ULONG                  SupportedStatistics;&#10;  NDIS_MEDIUM            MediaType;&#10;  NDIS_PHYSICAL_MEDIUM   PhysicalMediumType;&#10;...">PNET_IF_INFORMATION</a> pIfInfo,
       PNET_IFINDEX        pfIndex
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisifregisterinterface">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndisifregisterinterface.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ndis-ndisifregisterinterface)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="ndisifregisterinterface-function">NdisIfRegisterInterface function</h1>

<h2 id="description">Description</h2>

<p>The
<strong>NdisIfRegisterInterface</strong> function registers an NDIS network interface.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="ndisproviderhandle-in"><code>NdisProviderHandle</code> [in]</h3>

<p>A handle that identifies the network interface provider that is registering the interface. The
caller obtained this handle from a previous call to the
<a href="ndisifregisterprovider" title="NDIS_STATUS NdisIfRegisterProvider(&#10;  [in] PNDIS_IF_PROVIDER_CHARACTERISTICS ProviderCharacteristics,&#10;  [in] NDIS_HANDLE                       IfProviderContext,&#10;       PNDIS_HANDLE                      pNdisIfProviderHandle&#10;);">NdisIfRegisterProvider</a> function.</p>

<h3 id="netluid-in"><code>NetLuid</code> [in]</h3>

<p>The caller-supplied
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/ifdef/ns-ifdef-net_luid_lh">NET_LUID</a> value that is associated with the
interface. The interface provider used the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/ndis-make-net-luid">NDIS_MAKE_NET_LUID</a> macro to create this
NET_LUID value. The interface provider should recover the NET_LUID value from persistent storage after
the computer restarts and provide the same NET_LUID value each time it registers a particular
interface.</p>

<h3 id="providerifcontext-in"><code>ProviderIfContext</code> [in]</h3>

<p>A handle to a caller-allocated context area that is associated with the interface. NDIS passes
this handle to the callback functions that the caller registered with
<strong><a href="ndisifregisterprovider" title="NDIS_STATUS NdisIfRegisterProvider(&#10;  [in] PNDIS_IF_PROVIDER_CHARACTERISTICS ProviderCharacteristics,&#10;  [in] NDIS_HANDLE                       IfProviderContext,&#10;       PNDIS_HANDLE                      pNdisIfProviderHandle&#10;);">NdisIfRegisterProvider</a></strong>.</p>

<h3 id="pifinfo-in"><code>pIfInfo</code> [in]</h3>

<p>A pointer to a caller-allocated
<a href="net_if_information" title="typedef struct _NET_IF_INFORMATION {&#10;  NDIS_OBJECT_HEADER     Header;&#10;  ULONG                  Flags;&#10;  NET_PHYSICAL_LOCATION  PhysicalLocation;&#10;  ULONG                  WanTunnelType;&#10;  ULONG                  PortNumber;&#10;  NET_IF_ACCESS_TYPE     AccessType;&#10;  NET_IF_DIRECTION_TYPE  DirectionType;&#10;  NET_IF_CONNECTION_TYPE ConnectionType;&#10;  BOOLEAN                ifConnectorPresent;&#10;  USHORT                 PhysAddressLength;&#10;  USHORT                 PhysAddressOffset;&#10;  USHORT                 PermanentPhysAddressOffset;&#10;  USHORT                 FriendlyNameLength;&#10;  USHORT                 FriendlyNameOffset;&#10;  GUID                   InterfaceGuid;&#10;  NET_IF_NETWORK_GUID    NetworkGuid;&#10;  ULONG                  SupportedStatistics;&#10;  NDIS_MEDIUM            MediaType;&#10;  NDIS_PHYSICAL_MEDIUM   PhysicalMediumType;&#10;...">NET_IF_INFORMATION</a> structure that
provides information about the interface. This structure contains information that remains constant
while the interface exists.</p>

<h3 id="pfindex"><code>pfIndex</code></h3>

<p>A pointer to a caller-supplied interface index variable. If NDIS successfully registers an
interface, NDIS allocates an interface index for that interface and sets the value at
<em>pIfIndex</em> . The interface index is a 24-bit value that is unique on the local computer. NDIS might
not return the same interface index every time a provider registers an interface with the same NET_LUID
value . The interface index value zero is reserved, and NDIS does not assign it to any interface. Do not
confuse the interface index with a NET_LUID index.</p>

<h2 id="return-value">Return value</h2>

<p><strong>NdisIfRegisterInterface</strong> returns one of the following status values:</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>NDIS_STATUS_SUCCESS</strong></td>
  <td>The operation completed successfully.</td>
</tr>
<tr>
  <td><strong>NDIS_STATUS_RESOURCES</strong></td>
  <td>The operation failed because of insufficient resources.</td>
</tr>
<tr>
  <td><strong>NDIS_STATUS_INVALID_PARAMETER</strong></td>
  <td><strong>NdisIfRegisterInterface</strong> failed because some of the input parameters are invalid.</td>
</tr>
<tr>
  <td><strong>NDIS_STATUS_DUPLICATE_OBJECTID</strong></td>
  <td><strong>NdisIfRegisterInterface</strong> failed because there is already an interface registered with the same NET_LUID value that the <em>NetLuid</em> parameter specified.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p>NDIS interface providers call the
<strong>NdisIfRegisterInterface</strong> function to register a network interface. A call to this function does not
imply that the interface is active.</p>

<p>Whenever a computer restarts, NDIS starts with an empty list of registered network interfaces. An
interface provider calls the
<strong>NdisIfRegisterInterface</strong> function whenever an interface is started (or detected) and the interface's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/ifdef/ns-ifdef-net_luid_lh">NET_LUID</a> is known.</p>

<p>The method for detecting or starting an interface is application dependent. For example, if an LBFO
MUX intermediate driver is an interface provider, that driver might register an internal interface when
NDIS calls the driver's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_bind_adapter_ex">ProtocolBindAdapterEx</a> function
for the first underlying miniport adapter.</p>

<p>An interface provider can put information about an interface in persistent storage and restore the
interface as required for the particular application. For example, the provider can store additional
information about the interface with the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/ifdef/ns-ifdef-net_luid_lh">NET_LUID</a> and it can reregister the interface after
the computer restarts.</p>

<p>If
<strong>NdisIfRegisterInterface</strong> is successful, NDIS adds the interface to the list of known interfaces and
allocates a new interface index for this interface. Interface providers should register both enabled and
disabled interfaces, wherever possible. All enabled interfaces
must be registered.</p>

<p>NDIS might not return the same interface index every time a provider registers an interface with the
same NET_LUID value. For example, NDIS does not necessarily assign the same interface index when an
interface is reregistered after a computer restarts or when the interface is deregistered and
re-registered. The interface index value zero is reserved, and NDIS does not assign it to any
interface.</p>

<p>To indicate that an interface should be removed from the list of known interfaces on the computer, an
interface provider calls the
<a href="ndisifderegisterinterface" title="VOID NdisIfDeregisterInterface(&#10;  NET_IFINDEX ifIndex&#10;);">NdisIfDeregisterInterface</a> function, for example, because the interface has been uninstalled. .</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/ndis-make-net-luid">NDIS_MAKE_NET_LUID</a></p>

<p><a href="net_if_information" title="typedef struct _NET_IF_INFORMATION {&#10;  NDIS_OBJECT_HEADER     Header;&#10;  ULONG                  Flags;&#10;  NET_PHYSICAL_LOCATION  PhysicalLocation;&#10;  ULONG                  WanTunnelType;&#10;  ULONG                  PortNumber;&#10;  NET_IF_ACCESS_TYPE     AccessType;&#10;  NET_IF_DIRECTION_TYPE  DirectionType;&#10;  NET_IF_CONNECTION_TYPE ConnectionType;&#10;  BOOLEAN                ifConnectorPresent;&#10;  USHORT                 PhysAddressLength;&#10;  USHORT                 PhysAddressOffset;&#10;  USHORT                 PermanentPhysAddressOffset;&#10;  USHORT                 FriendlyNameLength;&#10;  USHORT                 FriendlyNameOffset;&#10;  GUID                   InterfaceGuid;&#10;  NET_IF_NETWORK_GUID    NetworkGuid;&#10;  ULONG                  SupportedStatistics;&#10;  NDIS_MEDIUM            MediaType;&#10;  NDIS_PHYSICAL_MEDIUM   PhysicalMediumType;&#10;...">NET_IF_INFORMATION</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/ifdef/ns-ifdef-net_luid_lh">NET_LUID</a></p>

<p><a href="ndisifderegisterinterface" title="VOID NdisIfDeregisterInterface(&#10;  NET_IFINDEX ifIndex&#10;);">NdisIfDeregisterInterface</a></p>

<p><a href="ndisifregisterprovider" title="NDIS_STATUS NdisIfRegisterProvider(&#10;  [in] PNDIS_IF_PROVIDER_CHARACTERISTICS ProviderCharacteristics,&#10;  [in] NDIS_HANDLE                       IfProviderContext,&#10;       PNDIS_HANDLE                      pNdisIfProviderHandle&#10;);">NdisIfRegisterProvider</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_bind_adapter_ex">ProtocolBindAdapterEx</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisifregisterinterface">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ndis/nf-ndis-ndisifregisterinterface.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
