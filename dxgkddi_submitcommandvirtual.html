<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DXGKDDI_SUBMITCOMMANDVIRTUAL - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DXGKDDI_SUBMITCOMMANDVIRTUAL - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DXGKDDI_SUBMITCOMMANDVIRTUAL - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3dkmddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">DXGKDDI_SUBMITCOMMANDVIRTUAL DxgkddiSubmitcommandvirtual;

<a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> DxgkddiSubmitcommandvirtual(
  IN_CONST_HANDLE hAdapter,
  IN_CONST_PDXGKARG_SUBMITCOMMANDVIRTUAL pSubmitCommand
)
{...}</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkddi_submitcommandvirtual">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/dxgkddi_submitcommandvirtual.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-d3dkmddi-dxgkddi_submitcommandvirtual)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>DXGKDDI_SUBMITCOMMANDVIRTUAL callback function</h1>
<h2>Description</h2>
<p>The <strong>DxgkDdiSubmitCommandVirtual</strong> command submits a DMA buffer to a context that supports virtual addressing.</p>
<h2>Parameters</h2>
<h3><code>hAdapter</code></h3>
<p>A handle to a context block that is associated with a display adapter. The display miniport driver (KMD) previously provided this handle to <em>Dxgkrnl</em> in the <strong>MiniportDeviceContext</strong> output parameter of the <a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_add_device"><strong>DxgkDdiAddDevice</strong></a> function.</p>
<h3><code>pSubmitCommand</code></h3>
<p>A pointer to a <strong><a href="dxgkarg_submitcommandvirtual" title="typedef struct _DXGKARG_SUBMITCOMMANDVIRTUAL {&#10;  HANDLE                         hContext;&#10;  D3DGPU_VIRTUAL_ADDRESS         DmaBufferVirtualAddress;&#10;  UINT                           DmaBufferSize;&#10;  VOID                           *pDmaBufferPrivateData;&#10;  UINT                           DmaBufferPrivateDataSize;&#10;  UINT                           DmaBufferUmdPrivateDataSize;&#10;  UINT                           SubmissionFenceId;&#10;  D3DDDI_VIDEO_PRESENT_SOURCE_ID VidPnSourceId;&#10;  D3DDDI_FLIPINTERVAL_TYPE       FlipInterval;&#10;  DXGK_SUBMITCOMMANDFLAGS        Flags;&#10;  UINT                           EngineOrdinal;&#10;  UINT                           NodeOrdinal;&#10;} DXGKARG_SUBMITCOMMANDVIRTUAL;">DXGKARG_SUBMITCOMMANDVIRTUAL</a></strong> structure that describes operation.</p>
<h2>Return value</h2>
<table>
<thead>
<tr>
<th><strong>Value</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a></td>
<td>The submitted command is well-formed.</td>
</tr>
<tr>
<td>STATUS_INVALID_PARAMETER</td>
<td>The DMA or private data is determined to be malformed. In this case, the OS will put the calling device in an error state and all subsequent calls on it will fail. The <strong>SubmissionFenceId</strong> value passed to this call will be considered completed after all previous packets on the hardware finished and at that point the driver notion of the last completed fence ID should be updated to this value. This behavior is different from a call to<a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkddi_submitcommand"><strong>DxgkDdiSubmitCommand</strong></a>, where no error is allowed to be returned due to the ability to validate the data in a prior <a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkddi_render"><strong>DxgkDdiRender</strong></a> call.</td>
</tr>
</tbody>
</table>
<p>All other return values will lead to an OS bugcheck.</p>
<h2>Remarks</h2>
<p><strong>DxgkDdiSubmitCommandVirtual</strong> works with virtual memory addressing, whereas <a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkddi_submitcommand"><strong>DxgkDdiSubmitCommand</strong></a> is called with physical memory. <strong>DxgkDdiSubmitCommandVirtual</strong> allows the driver to manage memory more flexibly.</p>
<p>The GPU might have previously worked with a different address space, perhaps for another process or context. The driver is responsible for making sure the correct address space is restored ahead of submitting a particular DMA buffer.</p>
<h2>See also</h2>
<p><strong><a href="dxgkarg_submitcommandvirtual" title="typedef struct _DXGKARG_SUBMITCOMMANDVIRTUAL {&#10;  HANDLE                         hContext;&#10;  D3DGPU_VIRTUAL_ADDRESS         DmaBufferVirtualAddress;&#10;  UINT                           DmaBufferSize;&#10;  VOID                           *pDmaBufferPrivateData;&#10;  UINT                           DmaBufferPrivateDataSize;&#10;  UINT                           DmaBufferUmdPrivateDataSize;&#10;  UINT                           SubmissionFenceId;&#10;  D3DDDI_VIDEO_PRESENT_SOURCE_ID VidPnSourceId;&#10;  D3DDDI_FLIPINTERVAL_TYPE       FlipInterval;&#10;  DXGK_SUBMITCOMMANDFLAGS        Flags;&#10;  UINT                           EngineOrdinal;&#10;  UINT                           NodeOrdinal;&#10;} DXGKARG_SUBMITCOMMANDVIRTUAL;">DXGKARG_SUBMITCOMMANDVIRTUAL</a></strong></p>
<p><a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkddi_render"><strong>DxgkDdiRender</strong></a></p>
<p><a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkddi_submitcommand"><strong>DxgkDdiSubmitCommand</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkddi_submitcommandvirtual">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3dkmddi/nc-d3dkmddi-dxgkddi_submitcommandvirtual.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
