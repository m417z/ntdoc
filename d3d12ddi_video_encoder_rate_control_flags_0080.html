<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAGS_0080 - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAGS_0080 - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAGS_0080 - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3d12umddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef enum D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAGS_0080 {
  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_NONE = 0x0,
  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_DELTA_QP = 0x1,
  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_FRAME_ANALYSIS = 0x2,
  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_QP_RANGE = 0x4,
  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_INITIAL_QP = 0x8,
  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_MAX_FRAME_SIZE = 0x10,
  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_1_ENABLE_VBV_SIZES = 0x20,
  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0096_ENABLE_EXTENSION1_SUPPORT = 0x40,
  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0096_ENABLE_QUALITY_VS_SPEED = 0x80
} ;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ne-d3d12umddi-d3d12ddi_video_encoder_rate_control_flags_0080">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/d3d12ddi_video_encoder_rate_control_flags_0080.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ne-d3d12umddi-d3d12ddi_video_encoder_rate_control_flags_0080)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAGS_0080</strong> enumeration specifies the flags for <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ns-d3d12umddi-d3d12ddi_video_encoder_rate_control_0080_2">rate control</a>.</p>

<h2 id="constants">Constants</h2>

<h3 id="d3d12ddi_video_encoder_rate_control_flag_0080_none0x0"><code>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_NONE:0x0</code></h3>

<p>No rate control flags.</p>

<h3 id="d3d12ddi_video_encoder_rate_control_flag_0080_enable_delta_qp0x1"><code>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_DELTA_QP:0x1</code></h3>

<p>If the selected rate control mode is <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ne-d3d12umddi-d3d12ddi_video_encoder_rate_control_mode_0080"><strong>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_MODE_ABSOLUTE_QP_MAP</strong></a>, this flag has no effect since the QP values in <strong>pRateControlQPMap</strong> field are used as absolute QP values.</p>

<p>For the other rate control modes, this flag enables <strong>pRateControlQPMap</strong> to be interpreted as a delta QP map to be used for the current <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/nc-d3d12umddi-pfnd3d12ddi_video_encode_frame_0082_0">frame encode operation</a>. The values provided in the map are incremented/decremented on top of the QP values decided by the rate control algorithm or the baseline QP constant set in CQP mode.</p>

<p>Using delta QP adjustment along with some active rate control modes might violate bitrate constraints as it explicitly alters the QP values that were selected by the rate control budgeting algorithm.</p>

<h3 id="d3d12ddi_video_encoder_rate_control_flag_0080_enable_frame_analysis0x2"><code>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_FRAME_ANALYSIS:0x2</code></h3>

<p>If support is indicated in <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ne-d3d12umddi-d3d12ddi_video_encoder_support_flags_0083_0"><strong>D3D12DDI_VIDEO_ENCODER_SUPPORT_FLAGS</strong></a>, this flag enables the rate control algorithm to optimize bitrate usage by selecting QP values based on statistics collected by doing frame analysis on a first pass.</p>

<h3 id="d3d12ddi_video_encoder_rate_control_flag_0080_enable_qp_range0x4"><code>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_QP_RANGE:0x4</code></h3>

<p>When set, use the <strong>MinQp</strong> and <strong>MaxQp</strong> values as a range for the rate control algorithm.</p>

<h3 id="d3d12ddi_video_encoder_rate_control_flag_0080_enable_initial_qp0x8"><code>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_INITIAL_QP:0x8</code></h3>

<p>When set, use the <strong>InitialQP</strong> values as a range for the rate control algorithm.</p>

<h3 id="d3d12ddi_video_encoder_rate_control_flag_0080_enable_max_frame_size0x10"><code>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_MAX_FRAME_SIZE:0x10</code></h3>

<p>When <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ne-d3d12umddi-d3d12ddi_video_encoder_support_flags_0083_0"><strong>D3D12DDI_VIDEO_ENCODER_SUPPORT_FLAG_0083_0_RATE_CONTROL_MAX_FRAME_SIZE_AVAILABLE</strong></a> is supported, the rate control algorithm should limit the maximum size per frame to the specified parameter in the rate control configuration.</p>

<h3 id="d3d12ddi_video_encoder_rate_control_flag_0080_1_enable_vbv_sizes0x20"><code>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_1_ENABLE_VBV_SIZES:0x20</code></h3>

<p>When set, enable the usage of <strong>VBVCapacity</strong> and <strong>InitialVBVFullness</strong>.</p>

<h3 id="d3d12ddi_video_encoder_rate_control_flag_0096_enable_extension1_support0x40"><code>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0096_ENABLE_EXTENSION1_SUPPORT:0x40</code></h3>

<p>Requires <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ne-d3d12umddi-d3d12ddi_video_encoder_support_flags_0083_0"><strong>D3D12DDI_VIDEO_ENCODER_SUPPORT_FLAG_RATE_CONTROL_EXTENSION1_SUPPORT</strong></a> to be set. See Remarks.</p>

<h3 id="d3d12ddi_video_encoder_rate_control_flag_0096_enable_quality_vs_speed0x80"><code>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0096_ENABLE_QUALITY_VS_SPEED:0x80</code></h3>

<p>Requires <strong>D3D12DDI_VIDEO_ENCODER_SUPPORT_FLAG_RATE_CONTROL_EXTENSION1_SUPPORT</strong> and <strong>D3D12DDI_VIDEO_ENCODER_SUPPORT_FLAG_RATE_CONTROL_QUALITY_VS_SPEED_AVAILABLE</strong>. When enabled, indicates the use of <strong>QualityVsSpeed</strong> in the rate control structure.</p>

<h2 id="remarks">Remarks</h2>

<p>When <strong>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0096_ENABLE_EXTENSION1_SUPPORT</strong> is enabled, this indicates that the rate control structures extended for AV1 encoding will be used in <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ns-d3d12umddi-d3d12ddi_video_encoder_rate_control_configuration_params_0080_2"><strong>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CONFIGURATION_PARAMS.pConfiguration_*Xxx*</strong></a>, as per the following table.</p>

<table>
<thead>
<tr>
  <th>Rate control mode when flag is enabled</th>
  <th>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CONFIGURATION_PARAMS type</th>
  <th>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CONFIGURATION_PARAMS DataSize</th>
</tr>
</thead>
<tbody>
<tr>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_MODE_ABSOLUTE_QP_MAP</td>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_ABSOLUTE_QP_MAP</td>
  <td>sizeof(D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_ABSOLUTE_QP_MAP)</td>
</tr>
<tr>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_MODE_CQP</td>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CQP1</td>
  <td>sizeof(D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CQP1)</td>
</tr>
<tr>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_MODE_CBR</td>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CBR1</td>
  <td>sizeof(D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CBR1)</td>
</tr>
<tr>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_MODE_VBR</td>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_VBR1</td>
  <td>sizeof(D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_VBR1)</td>
</tr>
<tr>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_MODE_QVBR</td>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_QVBR1</td>
  <td>sizeof(D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_QVBR1)</td>
</tr>
</tbody>
</table>

<p>Otherwise, the legacy structures will be used when disabled, as per the following table.</p>

<table>
<thead>
<tr>
  <th>Rate control mode when flag is disabled</th>
  <th>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CONFIGURATION_PARAMS type</th>
  <th>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CONFIGURATION_PARAMS DataSize</th>
</tr>
</thead>
<tbody>
<tr>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_MODE_ABSOLUTE_QP_MAP</td>
  <td>NULL</td>
  <td>0</td>
</tr>
<tr>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_MODE_CQP</td>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CQP</td>
  <td>sizeof(D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CQP)</td>
</tr>
<tr>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_MODE_CBR</td>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CBR</td>
  <td>sizeof(D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CBR)</td>
</tr>
<tr>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_MODE_VBR</td>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_VBR</td>
  <td>sizeof(D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_VBR)</td>
</tr>
<tr>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_MODE_QVBR</td>
  <td>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_QVBR</td>
  <td>sizeof(D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_QVBR)</td>
</tr>
</tbody>
</table>

<p>See <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/video-encoding-d3d12">D3D12 video encoding</a> for general information.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ns-d3d12umddi-d3d12ddi_video_encoder_rate_control_0080_2"><strong>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_0080_2</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ns-d3d12umddi-d3d12ddi_video_encoder_rate_control_cbr_0080"><strong>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CBR_0080</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ns-d3d12umddi-d3d12ddi_video_encoder_rate_control_qvbr_0080_2"><strong>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_QVBR_0080_2</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ns-d3d12umddi-d3d12ddi_video_encoder_rate_control_vbr_0080"><strong>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_VBR_0080</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ne-d3d12umddi-d3d12ddi_video_encoder_support_flags_0083_0"><strong>D3D12DDI_VIDEO_ENCODER_SUPPORT_FLAGS_0083_0</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/nc-d3d12umddi-pfnd3d12ddi_video_encode_frame_0082_0"><strong>PFND3D12DDI_VIDEO_ENCODE_FRAME_0082_0</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ne-d3d12umddi-d3d12ddi_video_encoder_rate_control_flags_0080">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3d12umddi/ne-d3d12umddi-d3d12ddi_video_encoder_rate_control_flags_0080.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
