<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="LPDXVA_SliceInfo - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>LPDXVA_SliceInfo - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            LPDXVA_SliceInfo - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// dxva.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _DXVA_SliceInfo {
  <a href="word" title="typedef unsigned short WORD;">WORD</a>  wHorizontalPosition;
  <a href="word" title="typedef unsigned short WORD;">WORD</a>  wVerticalPosition;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwSliceBitsInBuffer;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwSliceDataLocation;
  <a href="byte" title="typedef unsigned char BYTE;">BYTE</a>  bStartCodeBitOffset;
  <a href="byte" title="typedef unsigned char BYTE;">BYTE</a>  bReservedBits;
  <a href="word" title="typedef unsigned short WORD;">WORD</a>  wMBbitOffset;
  <a href="word" title="typedef unsigned short WORD;">WORD</a>  wNumberMBsInSlice;
  <a href="word" title="typedef unsigned short WORD;">WORD</a>  wQuantizerScaleCode;
  <a href="word" title="typedef unsigned short WORD;">WORD</a>  wBadSliceChopping;
} DXVA_SliceInfo, *LPDXVA_SliceInfo;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxva/ns-dxva-_dxva_sliceinfo">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/lpdxva_sliceinfo.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-dxva-_dxva_sliceinfo)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_dxva_sliceinfo-structure">_DXVA_SliceInfo structure</h1>

<h2 id="description">Description</h2>

<p>The DXVA_SliceInfo structure is sent by the host decoder to the accelerator to specify the slice-level parameters of a slice of bitstream data for off-host bitstream compressed picture decoding.</p>

<h2 id="members">Members</h2>

<h3 id="whorizontalposition"><code>wHorizontalPosition</code></h3>

<p>Specifies the horizontal position of the first macroblock of the slice expressed in units of macroblocks, with zero indicating the left-most or top-most macroblock of the picture.</p>

<h3 id="wverticalposition"><code>wVerticalPosition</code></h3>

<p>Specifies the vertical position of the first macroblock of the slice expressed in units of macroblocks, with zero indicating the left-most or top-most macroblock of the picture.</p>

<h3 id="dwslicebitsinbuffer"><code>dwSliceBitsInBuffer</code></h3>

<p>Specifies the total number of bits in the corresponding bitstream data buffer that contain data for the current slice. This must be a multiple of eight for MPEG-1, MPEG-2, MPEG-4. It must also be in the slice-structured mode of H.263, because slice start codes in these cases are byte-aligned.</p>

<h3 id="dwslicedatalocation"><code>dwSliceDataLocation</code></h3>

<p>Specifies the location of the first byte containing data for the slice (for example, the location of a slice start code) in the bitstream data buffer. Must be zero if the start of the slice is not within the corresponding bitstream data buffer.</p>

<h3 id="bstartcodebitoffset"><code>bStartCodeBitOffset</code></h3>

<p>Specifies the number of most significant bits of the byte at <strong>dwSliceDataLocation</strong> that do not contain data for the slice. <strong>bStartCodeBitOffset</strong> must be zero for MPEG-1, MPEG-2, and MPEG-4, because slice start codes in these specifications are byte-aligned. <strong>bStartCodeBitOffset</strong> could possibly be nonzero for H.261 and H.263, because these standards do not force byte alignment of GOB (group of blocks) start codes. This member must be in the range of zero through 7, and must be zero if the start of the slice is not within the corresponding bitstream data buffer. The most significant bits marked irrelevant for the current slice by <strong>bStartCodeBitOffset</strong> may contain data for a previous slice in the case of start codes that are not byte aligned (for example, in H.263 baseline mode).</p>

<h3 id="breservedbits"><code>bReservedBits</code></h3>

<p>Reserved bits used for packing and alignment. Must be zero.</p>

<h3 id="wmbbitoffset"><code>wMBbitOffset</code></h3>

<p>Specifies the number of bits of slice header data prior to the first bit of macroblock layer data in the bitstream buffer. For example, if <strong>wMBbitOffset</strong> is 83, the macroblock layer data for the slice starts after 83 bits of slice header data. Must be zero if the start of the slice is not within the corresponding bitstream data buffer.</p>

<h3 id="wnumbermbsinslice"><code>wNumberMBsInSlice</code></h3>

<p>Specifies the number of macroblocks of data in the slice, including skipped macroblocks. May be zero if this number cannot be readily determined from the header of the picture and the headers and initial macroblock data of the current and next slice in the bitstream, such as in the rectangular slice and arbitrary slice ordering submodes of the slice mode of H.263. Must not be zero for H.261, MPEG-1, MPEG-2, MPEG-4, or when not using the rectangular slice or arbitrary slice submodes of the slice-structured mode in H.263.</p>

<h3 id="wquantizerscalecode"><code>wQuantizerScaleCode</code></h3>

<p>The quantizer scaling code from the slice level of the bitstream, as specified in the particular video coding specification (ranging from 1 through 31 for H.261, H.262/MPEG-2, H.263, MPEG-1, and MPEG-4).</p>

<h3 id="wbadslicechopping"><code>wBadSliceChopping</code></h3>

<p>Specifies the location of data within a slice for a corresponding bitstream data buffer. If zero, indicates that all bits for the slice are in the bitstream data buffer. If nonzero, indicates what part of the bits for the slice are missing from the corresponding bitstream data buffer as follows.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td>1</td>
  <td>The bits for the start of the slice are within the corresponding bitstream data buffer, and the bits for the end of the slice are not (because the bitstream data buffer is full).</td>
</tr>
<tr>
  <td>2</td>
  <td>The bits for the start of the slice are not within the corresponding bitstream data buffer (because the previous bitstream data buffer was full), but the bits for the end of the slice are within the corresponding bitstream data buffer.</td>
</tr>
<tr>
  <td>3</td>
  <td>The bits for the start of the slice are not within the corresponding bitstream data buffer (because the previous bitstream data buffer was full), and the bits for the end of the slice are also not within the corresponding bitstream data buffer (because the corresponding bitstream data buffer is also full).</td>
</tr>
</tbody>
</table>

<blockquote>
  <p>[!NOTES]
  Nonzero values of <strong>wBadSliceChopping</strong> should generally be avoided by the host software decoder.</p>
</blockquote>

<h2 id="remarks">Remarks</h2>

<p>Slice-control buffers are provided to guide the operation of off-host VLD bitstream processing. Slice-control buffers are sent only when the <strong>bConfigBitstreamRaw</strong> member of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxva/ns-dxva-_dxva_configpicturedecode">DXVA_ConfigPictureDecode</a> is 1. The host software decoder must determine the location of slice-level resynchronization points in the bitstream. A <em>slice</em> is defined to be a multimacroblock layer that includes a resynchronization point in the bitstream data.</p>

<p>In H.261 bitstreams, a GOB is considered a slice. In H.263 bitstreams, a sequence of one or more GOBs starting with a GOB start code and containing no additional GOB start codes, is considered a slice. A slice-control buffer must contain one or more DXVA_SliceInfo structures, according to the contents of a corresponding bitstream data buffer.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxva/ns-dxva-_dxva_configpicturedecode">DXVA_ConfigPictureDecode</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxva/ns-dxva-_dxva_sliceinfo">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/dxva/ns-dxva-_dxva_sliceinfo.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
