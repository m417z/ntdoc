<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NmrClientAttachProvider - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NmrClientAttachProvider - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NmrClientAttachProvider - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// netioddk.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> NmrClientAttachProvider(
  [in]  HANDLE                 NmrBindingHandle,
  [in]  __drv_aliasesMem PVOID ClientBindingContext,
  [in]  const VOID             *ClientDispatch,
  [out] PVOID                  *ProviderBindingContext,
  [out] const VOID             **ProviderDispatch
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/netioddk/nf-netioddk-nmrclientattachprovider">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/nmrclientattachprovider.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-netioddk-nmrclientattachprovider)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="nmrclientattachprovider-function">NmrClientAttachProvider function</h1>

<h2 id="description">Description</h2>

<p>The
<strong>NmrClientAttachProvider</strong> function attaches a client module to a provider module.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="nmrbindinghandle-in"><code>NmrBindingHandle</code> [in]</h3>

<p>A handle used by the NMR to represent the binding between the client module and the provider
module. The NMR passes this handle to the client module when it calls the client module's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/netioddk/nc-netioddk-npi_client_attach_provider_fn">ClientAttachProvider</a> callback
function.</p>

<h3 id="clientbindingcontext-in"><code>ClientBindingContext</code> [in]</h3>

<p>A pointer to a caller-supplied context for the binding between the client module and the provider
module. The client module uses this context to keep track of the state of the binding. The contents of
the client module's binding context are opaque to the provider module. The provider module passes this
pointer to the client module whenever it calls any of the client module's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/network-programming-interface">NPI</a> callback functions that
require the client module's binding context. The client module must make sure that this context remains
valid and resident in memory as long as the provider module is attached to the client module.</p>

<h3 id="clientdispatch-in"><code>ClientDispatch</code> [in]</h3>

<p>A pointer to a constant structure that contains the dispatch table of
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/network-programming-interface">NPI</a> callback functions for the
client module. The client module must make sure that this structure remains valid and resident in memory
as long as the provider module is attached to the client module. The contents of the structure are
NPI-specific. If the
NPI does not define a client
dispatch table structure, the client module must set this parameter to <strong>NULL</strong>.</p>

<h3 id="providerbindingcontext-out"><code>ProviderBindingContext</code> [out]</h3>

<p>A pointer to a variable that receives a pointer to the provider module's context for the binding
between the client module and the provider module. The provider module uses this context to keep track
of the state of the binding. The contents of the provider module's binding context are opaque to the
client module. The client module passes this pointer to the provider module whenever it calls any of the
provider module's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/network-programming-interface">NPI</a> functions that require the
provider module's binding context.</p>

<h3 id="providerdispatch-out"><code>ProviderDispatch</code> [out]</h3>

<p>A pointer to a variable that receives a pointer to a structure that contains the dispatch table of
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/network-programming-interface">NPI</a> functions for the provider
module. The contents of the structure are
NPI-specific.</p>

<h2 id="return-value">Return value</h2>

<p>The
<strong>NmrClientAttachProvider</strong> function returns one of the following <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> codes:</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong><a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a></strong></td>
  <td>The client module was successfully attached to the provider module.</td>
</tr>
<tr>
  <td><strong>STATUS_NOINTERFACE</strong></td>
  <td>The provider module did not attach to the client module.</td>
</tr>
<tr>
  <td><strong>Other status codes</strong></td>
  <td>An error occurred.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p>A client module calls the
<strong>NmrClientAttachProvider</strong> function from its
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/netioddk/nc-netioddk-npi_client_attach_provider_fn">ClientAttachProvider</a> callback
function to attach itself to a provider module.</p>

<p>When a client module calls the
<strong>NmrClientAttachProvider</strong> function, the NMR calls the provider module's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/netioddk/nc-netioddk-npi_provider_attach_client_fn">ProviderAttachClient</a> callback
function to complete the attachment process. The
<strong>NmrClientAttachProvider</strong> function returns the status code that is returned by the provider module's
<em>ProviderAttachClient</em> callback
function.</p>

<p>If the
<strong>NmrClientAttachProvider</strong> function does not return <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a>, the client module should perform
any necessary cleanup of the data contained within its binding context structure. The client module
should then free the memory for its binding context structure if it dynamically allocated the memory for
the structure.</p>

<p>If the
<strong>NmrClientAttachProvider</strong> function returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> and the client module dynamically allocated
the memory for its binding context, the client module should free that allocated memory when the NMR
calls the client module's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/netioddk/nc-netioddk-npi_client_cleanup_binding_context_fn">ClientCleanupBindingContext</a> callback function after the client module and provider module are
detached from each other.</p>

<p>If the
<strong>NmrClientAttachProvider</strong> function returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a>, the client module must save the pointers
returned in the
<em>ProviderBindingContext</em> and
<em>ProviderDispatch</em> parameters so that it can call the provider module's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/network-programming-interface">NPI</a> functions.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/netioddk/nc-netioddk-npi_client_attach_provider_fn">ClientAttachProvider</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/netioddk/nc-netioddk-npi_client_cleanup_binding_context_fn">ClientCleanupBindingContext</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/netioddk/nc-netioddk-npi_provider_attach_client_fn">ProviderAttachClient</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/netioddk/nf-netioddk-nmrclientattachprovider">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/netioddk/nf-netioddk-nmrclientattachprovider.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
