<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="StorPortGetVirtualAddress - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>StorPortGetVirtualAddress - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            StorPortGetVirtualAddress - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// storport.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">STORPORT_API PVOID StorPortGetVirtualAddress(
  [in] PVOID                 HwDeviceExtension,
  [in] STOR_PHYSICAL_ADDRESS PhysicalAddress
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/storport/nf-storport-storportgetvirtualaddress">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/storportgetvirtualaddress.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-storport-storportgetvirtualaddress)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>StorPortGetVirtualAddress function</h1>
<h2>Description</h2>
<p>The <strong>StorPortGetVirtualAddress</strong> routine obtains a virtual address that maps to the indicated physical address.</p>
<h2>Parameters</h2>
<h3><code>HwDeviceExtension</code> [in]</h3>
<p>A pointer to the hardware device extension. This is a per HBA storage area that the port driver allocates and initializes on behalf of the miniport driver. Miniport drivers usually store HBA-specific information in this extension, such as the state of the HBA and the mapped access ranges for the HBA. This area is available to the miniport driver immediately after the miniport driver calls <a href="storportinitialize" title="STORPORT_API ULONG StorPortInitialize(&#10;  [in]           PVOID                   Argument1,&#10;  [in]           PVOID                   Argument2,&#10;  [in]           _HW_INITIALIZATION_DATA *HwInitializationData,&#10;  [in, optional] PVOID                   HwContext&#10;);">StorPortInitialize</a>. The port driver frees this memory when it removes the device.</p>
<h3><code>PhysicalAddress</code> [in]</h3>
<p>Specifies the physical address to be mapped. This value must have been returned by <a href="storportgetphysicaladdress" title="STORPORT_API STOR_PHYSICAL_ADDRESS StorPortGetPhysicalAddress(&#10;  [in]           PVOID               HwDeviceExtension,&#10;  [in, optional] PSCSI_REQUEST_BLOCK Srb,&#10;  [in]           PVOID               VirtualAddress,&#10;  [out]          ULONG               *Length&#10;);">StorPortGetPhysicalAddress</a> and must be from an uncached device extension or SRB extension.</p>
<h2>Return value</h2>
<p><strong>StorPortGetVirtualAddress</strong> returns a virtual address associated with the physical address indicated in the <em>PhysicalAddress</em> parameter. Typically, this physical address was obtained by a call to <a href="storportgetphysicaladdress" title="STORPORT_API STOR_PHYSICAL_ADDRESS StorPortGetPhysicalAddress(&#10;  [in]           PVOID               HwDeviceExtension,&#10;  [in, optional] PSCSI_REQUEST_BLOCK Srb,&#10;  [in]           PVOID               VirtualAddress,&#10;  [out]          ULONG               *Length&#10;);">StorPortGetPhysicalAddress</a>.</p>
<h2>Remarks</h2>
<p>The physical address must be an address that is obtained through a call to <a href="storportgetphysicaladdress" title="STORPORT_API STOR_PHYSICAL_ADDRESS StorPortGetPhysicalAddress(&#10;  [in]           PVOID               HwDeviceExtension,&#10;  [in, optional] PSCSI_REQUEST_BLOCK Srb,&#10;  [in]           PVOID               VirtualAddress,&#10;  [out]          ULONG               *Length&#10;);">StorPortGetPhysicalAddress</a>.</p>
<p><strong>StorPortGetVirtualAddress</strong> uses <strong>STOR_PHYSICAL_ADDRESS</strong> to represent physical addresses.</p>
<pre lang="cpp"><code>typedef <a href="physical_address" title="typedef LARGE_INTEGER PHYSICAL_ADDRESS, *PPHYSICAL_ADDRESS;">PHYSICAL_ADDRESS</a> STOR_PHYSICAL_ADDRESS, *PSTOR_PHYSICAL_ADDRESS;

</code></pre>
<p>The <strong>STOR_PHYSICAL_ADDRESS</strong> type is an operating system-independent data type that Storport miniport drivers use to represent either a physical addresses or a bus-relative address.</p>
<h2>See also</h2>
<p><a href="scsiportgetvirtualaddress" title="SCSIPORT_API PVOID ScsiPortGetVirtualAddress(&#10;  [in] PVOID                 HwDeviceExtension,&#10;  [in] SCSI_PHYSICAL_ADDRESS PhysicalAddress&#10;);">ScsiPortGetVirtualAddress</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/storport/nf-storport-storportgetvirtualaddress">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/storport/nf-storport-storportgetvirtualaddress.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
