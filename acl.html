<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="ACL - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>ACL - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            ACL - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _ACL {
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>  AclRevision;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>  Sbz1;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> AclSize;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> AceCount;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> Sbz2;
} ACL;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_acl">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/acl.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-wdm-_acl)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_acl-structure">_ACL structure</h1>

<h2 id="description">Description</h2>

<p>The ACL structure is the header of an access-control list (ACL). A complete ACL consists of an ACL structure followed by an ordered list of zero or more access-control entries (ACE).</p>

<h2 id="members">Members</h2>

<h3 id="aclrevision"><code>AclRevision</code></h3>

<p>Revision level of the ACL.</p>

<p><strong>Microsoft Windows NT 4.0 and earlier:</strong> This value must be ACL_REVISION.</p>

<p><strong>Microsoft Windows 2000 and later:</strong> This value can be ACL_REVISION or ACL_REVISION_DS. It must be ACL_REVISION_DS if the ACL contains an object-specific ACE.</p>

<h3 id="sbz1"><code>Sbz1</code></h3>

<p>A zero byte of padding that aligns the <strong>AclRevision</strong> member on a 16-bit boundary.</p>

<h3 id="aclsize"><code>AclSize</code></h3>

<p>Size, in bytes, of the ACL. This value includes both the ACL structure and all the ACEs.</p>

<h3 id="acecount"><code>AceCount</code></h3>

<p>Number of ACEs stored in the ACL.</p>

<h3 id="sbz2"><code>Sbz2</code></h3>

<p>Two zero bytes of padding that align the ACL structure on a 32-bit boundary.</p>

<h2 id="remarks">Remarks</h2>

<p>An ACL includes a sequential list of zero or more ACEs. The individual ACEs in an ACL are numbered from 0 to <em>n</em>, where <em>n</em>+1 is the number of ACEs in the ACL. When editing an ACL, a driver refers to an ACE within the ACL by its index.</p>

<p>There are two types of ACL: discretionary and system.</p>

<p>A discretionary ACL (DACL) is controlled by the owner of an object or anyone granted WRITE_DAC access to the object. It specifies the access particular users and groups can have to an object. For example, the owner of a file can use a DACL to control which users and groups can and cannot have access to the file.</p>

<p>An object may also have system-level security information associated with it, in the form of a system ACL (SACL) controlled by a system administrator. A SACL can allow the system administrator to audit any attempts to gain access to an object.</p>

<p>Three ACE structures are currently defined:</p>

<table>
<thead>
<tr>
  <th>Attribute</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><a href="access_allowed_ace" title="typedef struct _ACCESS_ALLOWED_ACE {&#10;  ACE_HEADER  Header;&#10;  ACCESS_MASK Mask;&#10;  ULONG       SidStart;&#10;} ACCESS_ALLOWED_ACE;">ACCESS_ALLOWED_ACE</a></td>
  <td>Grants specified rights to a user or group. This ACE is stored in a DACL.</td>
</tr>
<tr>
  <td><a href="access_denied_ace" title="typedef struct _ACCESS_DENIED_ACE {&#10;  ACE_HEADER  Header;&#10;  ACCESS_MASK Mask;&#10;  ULONG       SidStart;&#10;} ACCESS_DENIED_ACE;">ACCESS_DENIED_ACE</a></td>
  <td>Denies specified rights to a user or group. This ACE is stored in a DACL.</td>
</tr>
<tr>
  <td><a href="system_audit_ace" title="typedef struct _SYSTEM_AUDIT_ACE {&#10;  ACE_HEADER  Header;&#10;  ACCESS_MASK Mask;&#10;  ULONG       SidStart;&#10;} SYSTEM_AUDIT_ACE;">SYSTEM_AUDIT_ACE</a></td>
  <td>Specifies what types of access will cause system-level audits. This ACE is stored in a SACL.</td>
</tr>
</tbody>
</table>

<p>A fourth ACE structure, <a href="system_alarm_ace" title="typedef struct _SYSTEM_ALARM_ACE {&#10;  ACE_HEADER  Header;&#10;  ACCESS_MASK Mask;&#10;  ULONG       SidStart;&#10;} SYSTEM_ALARM_ACE;">SYSTEM_ALARM_ACE</a>, is not currently supported.</p>

<p>The ACL structure is to be treated as though it were opaque, and drivers should not attempt to work with its members directly. To ensure that ACLs are semantically correct, drivers can use the functions listed in the See Also section to create and manipulate ACLs.</p>

<p>ACL and ACE structures must be aligned on 32-bit boundaries.</p>

<h2 id="see-also">See also</h2>

<p><a href="access_allowed_ace" title="typedef struct _ACCESS_ALLOWED_ACE {&#10;  ACE_HEADER  Header;&#10;  ACCESS_MASK Mask;&#10;  ULONG       SidStart;&#10;} ACCESS_ALLOWED_ACE;">ACCESS_ALLOWED_ACE</a></p>

<p><a href="access_denied_ace" title="typedef struct _ACCESS_DENIED_ACE {&#10;  ACE_HEADER  Header;&#10;  ACCESS_MASK Mask;&#10;  ULONG       SidStart;&#10;} ACCESS_DENIED_ACE;">ACCESS_DENIED_ACE</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ifs/ace">ACE</a></p>

<p><a href="rtladdaccessallowedace" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlAddAccessAllowedAce(&#10;    _Inout_ PACL Acl,&#10;    _In_ ULONG AceRevision,&#10;    _In_ ACCESS_MASK AccessMask,&#10;    _In_ PSID Sid&#10;    );">RtlAddAccessAllowedAce</a></p>

<p><a href="rtlcreateacl" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlCreateAcl(&#10;    _Out_writes_bytes_(AclLength) PACL Acl,&#10;    _In_ ULONG AclLength,&#10;    _In_ ULONG AclRevision&#10;    );">RtlCreateAcl</a></p>

<p><a href="rtlgetace" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlGetAce(&#10;    _In_ PACL Acl,&#10;    _In_ ULONG AceIndex,&#10;    _Outptr_ PVOID *Ace&#10;    );">RtlGetAce</a></p>

<p><a href="rtlsetdaclsecuritydescriptor" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlSetDaclSecurityDescriptor(&#10;    _Inout_ PSECURITY_DESCRIPTOR SecurityDescriptor,&#10;    _In_ BOOLEAN DaclPresent,&#10;    _In_opt_ PACL Dacl,&#10;    _In_ BOOLEAN DaclDefaulted&#10;    );">RtlSetDaclSecurityDescriptor</a></p>

<p><a href="system_alarm_ace" title="typedef struct _SYSTEM_ALARM_ACE {&#10;  ACE_HEADER  Header;&#10;  ACCESS_MASK Mask;&#10;  ULONG       SidStart;&#10;} SYSTEM_ALARM_ACE;">SYSTEM_ALARM_ACE</a></p>

<p><a href="system_audit_ace" title="typedef struct _SYSTEM_AUDIT_ACE {&#10;  ACE_HEADER  Header;&#10;  ACCESS_MASK Mask;&#10;  ULONG       SidStart;&#10;} SYSTEM_AUDIT_ACE;">SYSTEM_AUDIT_ACE</a></p>

<p><a href="token_default_dacl" title="typedef struct _TOKEN_DEFAULT_DACL {&#10;  PACL DefaultDacl;&#10;} TOKEN_DEFAULT_DACL, *PTOKEN_DEFAULT_DACL;">TOKEN_DEFAULT_DACL</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_acl">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/ns-wdm-_acl.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
