<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="IDE_ADAPTER_CONTROL - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>IDE_ADAPTER_CONTROL - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            IDE_ADAPTER_CONTROL - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// irb.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">IDE_ADAPTER_CONTROL IdeAdapterControl;

BOOLEAN IdeAdapterControl(
  [in]      PVOID ControllerExtension,
  [in]      <a href="ide_control_action" title="typedef enum {&#10;  IdeStart,&#10;  IdeStop,&#10;  IdePowerUp,&#10;  IdePowerDown,&#10;  IdeVendorDefined&#10;} IDE_CONTROL_ACTION;">IDE_CONTROL_ACTION</a> ControlAction,
  [in, out] PVOID Parameters
)
{...}</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/irb/nc-irb-ide_adapter_control">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ide_adapter_control.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-irb-ide_adapter_control)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="ide_adapter_control-callback-function">IDE_ADAPTER_CONTROL callback function</h1>

<h2 id="description">Description</h2>

<p>The <em>AtaAdapterControl</em> miniport driver routine is called to perform Plug and Play (PnP) and Power Management operations on the HBA.</p>

<blockquote>
  <p>[!NOTE]
  The ATA port driver and ATA miniport driver models may be altered or unavailable in the future. Instead, we recommend using the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/storage/storport-driver">Storport driver</a> and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/storage/storport-miniport-drivers">Storport miniport</a> driver models.</p>
</blockquote>

<h2 id="parameters">Parameters</h2>

<h3 id="controllerextension-in"><code>ControllerExtension</code> [in]</h3>

<p>A pointer to the controller extension.</p>

<h3 id="controlaction-in"><code>ControlAction</code> [in]</h3>

<p>One of five actions that the miniport driver must perform as defined in the following table.</p>

<table>
<thead>
<tr>
  <th>ControlAction</th>
  <th>Parameters</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td>IdeStart</td>
  <td><a href="ide_controller_configuration" title="typedef struct _IDE_CONTROLLER_CONFIGURATION {&#10;  USHORT                  Version;&#10;  UCHAR                   NumberOfChannels;&#10;  IDE_OPERATION_MODE      ControllerMode;&#10;  UCHAR                   NumberOfPhysicalBreaks;&#10;  ULONG                   MaximumTransferLength;&#10;  BOOLEAN                 Reserved;&#10;  BOOLEAN                 NativeModeEnabled;&#10;  BOOLEAN                 Dma64BitAddress;&#10;  BOOLEAN                 BusMaster;&#10;  IDE_BUS_TYPE            AtaBusType;&#10;  PIDE_MINIPORT_RESOURCES ControllerResources;&#10;} IDE_CONTROLLER_CONFIGURATION, *PIDE_CONTROLLER_CONFIGURATION;">IDE_CONTROLLER_CONFIGURATION</a></td>
  <td>Indicates that the adapter is being started. The miniport driver should update the member in the <strong><a href="ide_controller_configuration" title="typedef struct _IDE_CONTROLLER_CONFIGURATION {&#10;  USHORT                  Version;&#10;  UCHAR                   NumberOfChannels;&#10;  IDE_OPERATION_MODE      ControllerMode;&#10;  UCHAR                   NumberOfPhysicalBreaks;&#10;  ULONG                   MaximumTransferLength;&#10;  BOOLEAN                 Reserved;&#10;  BOOLEAN                 NativeModeEnabled;&#10;  BOOLEAN                 Dma64BitAddress;&#10;  BOOLEAN                 BusMaster;&#10;  IDE_BUS_TYPE            AtaBusType;&#10;  PIDE_MINIPORT_RESOURCES ControllerResources;&#10;} IDE_CONTROLLER_CONFIGURATION, *PIDE_CONTROLLER_CONFIGURATION;">IDE_CONTROLLER_CONFIGURATION</a></strong> structure. If it is required, the miniport driver could obtain its hardware resources from the <strong><a href="ide_controller_configuration" title="typedef struct _IDE_CONTROLLER_CONFIGURATION {&#10;  USHORT                  Version;&#10;  UCHAR                   NumberOfChannels;&#10;  IDE_OPERATION_MODE      ControllerMode;&#10;  UCHAR                   NumberOfPhysicalBreaks;&#10;  ULONG                   MaximumTransferLength;&#10;  BOOLEAN                 Reserved;&#10;  BOOLEAN                 NativeModeEnabled;&#10;  BOOLEAN                 Dma64BitAddress;&#10;  BOOLEAN                 BusMaster;&#10;  IDE_BUS_TYPE            AtaBusType;&#10;  PIDE_MINIPORT_RESOURCES ControllerResources;&#10;} IDE_CONTROLLER_CONFIGURATION, *PIDE_CONTROLLER_CONFIGURATION;">IDE_CONTROLLER_CONFIGURATION</a></strong> structure.</td>
</tr>
<tr>
  <td>IdeStop</td>
  <td>None</td>
  <td>The miniport driver should stop using any resources that are allocated for this controller. Be aware that the port driver guarantees that all the channels that are exposed by the adapter are stopped before it stops the adapter.</td>
</tr>
<tr>
  <td>IdePowerUp</td>
  <td>None</td>
  <td>Indicates that the adapter is being turned on. Anything that does not persist across a power cycle must be configured during IdePowerUp.</td>
</tr>
<tr>
  <td>IdePowerDown</td>
  <td>None</td>
  <td>Indicates that the adapter is being turned off.</td>
</tr>
<tr>
  <td>IdeVendorDefined</td>
  <td>None</td>
  <td>Indicates that the miniport driver should perform a vendor-defined control action.</td>
</tr>
</tbody>
</table>

<h3 id="parameters-in-out"><code>Parameters</code> [in, out]</h3>

<p>Parameters associated with the given action.</p>

<h2 id="return-value">Return value</h2>

<p>The miniport driver must return <strong>TRUE</strong> to acknowledge the completion of the requested action. A return value of <strong>FALSE</strong> indicates that the miniport driver was unable to complete the action successfully. A return value of <strong>FALSE</strong> for certain actions might cause the device installation to fail.</p>

<h2 id="remarks">Remarks</h2>

<p>The port driver guarantees that there is no outstanding I/O on the adapter before it invokes the <em>AtaAdapterControl</em> routine.</p>

<h2 id="see-also">See also</h2>

<p><strong><a href="ide_controller_configuration" title="typedef struct _IDE_CONTROLLER_CONFIGURATION {&#10;  USHORT                  Version;&#10;  UCHAR                   NumberOfChannels;&#10;  IDE_OPERATION_MODE      ControllerMode;&#10;  UCHAR                   NumberOfPhysicalBreaks;&#10;  ULONG                   MaximumTransferLength;&#10;  BOOLEAN                 Reserved;&#10;  BOOLEAN                 NativeModeEnabled;&#10;  BOOLEAN                 Dma64BitAddress;&#10;  BOOLEAN                 BusMaster;&#10;  IDE_BUS_TYPE            AtaBusType;&#10;  PIDE_MINIPORT_RESOURCES ControllerResources;&#10;} IDE_CONTROLLER_CONFIGURATION, *PIDE_CONTROLLER_CONFIGURATION;">IDE_CONTROLLER_CONFIGURATION</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/irb/nc-irb-ide_adapter_control">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/irb/nc-irb-ide_adapter_control.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
