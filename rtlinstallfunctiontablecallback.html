<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="RtlInstallFunctionTableCallback - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>RtlInstallFunctionTableCallback - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            RtlInstallFunctionTableCallback - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">#ifndef _NTRTL_H
#if defined(_M_AMD64) &amp;&amp; defined(_M_ARM64EC)

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NTSYSAPI
BOOLEAN
STDAPIVCALLTYPE
RtlInstallFunctionTableCallback(
    _In_ <a href="ulong64" title="typedef unsigned __int64 ULONG64;">ULONG64</a> TableIdentifier,
    _In_ <a href="ulong64" title="typedef unsigned __int64 ULONG64;">ULONG64</a> BaseAddress,
    _In_ <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> Length,
    _In_ PGET_RUNTIME_FUNCTION_CALLBACK Callback,
    _In_opt_ PVOID Context,
    _In_opt_ PCWSTR OutOfProcessCallbackDll
    );
</span><span class="ntdoc-code-footer">
#endif
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/443d121781061210978931c1766974f1372e359a/phnt/include/ntrtl.h#L10883">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// winnt.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NTSYSAPI BOOLEAN RtlInstallFunctionTableCallback(
  [in] <a href="dword64" title="typedef unsigned __int64 DWORD64;">DWORD64</a>                        TableIdentifier,
  [in] <a href="dword64" title="typedef unsigned __int64 DWORD64;">DWORD64</a>                        BaseAddress,
  [in] <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>                          Length,
  [in] PGET_RUNTIME_FUNCTION_CALLBACK Callback,
  [in] PVOID                          Context,
  [in] PCWSTR                         OutOfProcessCallbackDll
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winnt/nf-winnt-rtlinstallfunctiontablecallback">View the official Win32 API reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/rtlinstallfunctiontablecallback.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Win32 API reference (nf-winnt-rtlinstallfunctiontablecallback)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="rtlinstallfunctiontablecallback-function">RtlInstallFunctionTableCallback function</h1>

<h2 id="description">Description</h2>

<p>Adds a dynamic function table to the dynamic function table list.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="tableidentifier-in"><code>TableIdentifier</code> [in]</h3>

<p>The identifier for the dynamic function table callback. The two low-order bits must be set. For example,
<em>BaseAddress</em>|0x3.</p>

<h3 id="baseaddress-in"><code>BaseAddress</code> [in]</h3>

<p>The base address of the region of memory managed by the callback function.</p>

<h3 id="length-in"><code>Length</code> [in]</h3>

<p>The size of the region of memory managed by the callback function, in bytes.</p>

<h3 id="callback-in"><code>Callback</code> [in]</h3>

<p>A pointer to the callback function that is called to retrieve the function table entries for the functions
in the specified region of memory. For a definition of the
<strong>PGET_RUNTIME_FUNCTION_CALLBACK</strong> type, see WinNT.h.</p>

<h3 id="context-in"><code>Context</code> [in]</h3>

<p>A pointer to the user-defined data to be passed to the callback function.</p>

<h3 id="outofprocesscallbackdll-in"><code>OutOfProcessCallbackDll</code> [in]</h3>

<p>An optional pointer to a string that specifies the path of a DLL that provides function table entries that
are outside the process.</p>

<p>When a debugger unwinds to a function in the range of addresses managed by the callback function, it loads
this DLL and calls the <strong>OUT_OF_PROCESS_FUNCTION_TABLE_CALLBACK_EXPORT_NAME</strong>
function, whose type is <strong>POUT_OF_PROCESS_FUNCTION_TABLE_CALLBACK</strong>. For more
information, see the definitions of these items in WinNT.h.</p>

<h2 id="return-value">Return value</h2>

<p>If the function succeeds, the return value is <strong>TRUE</strong>. If the function fails, the
return value is <strong>FALSE</strong>.</p>

<h2 id="remarks">Remarks</h2>

<p>Function tables are used on 64-bit Windows to determine how to unwind or walk the stack. These tables are
usually generated by the compiler and stored as part of the image. However, applications must provide the function
table for dynamically generated code. For more information about function tables, see the architecture guide for
your system.</p>

<p>This function is useful for very dynamic code. The application specifies the memory range for the generated
code, but does not need to generate a table until it is needed by an unwind request. At that time, the system
calls the callback function with the <em>Context</em> and the control address. The callback
function must return the runtime function entry for the specified address. Be sure to avoid creating a deadlock
between the callback function and the code generator.</p>

<p>For code that is generated from a template or generated only once during the life of the process, use the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/winnt/nf-winnt-rtladdfunctiontable">RtlAddFunctionTable</a> function.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/winnt/nf-winnt-rtladdfunctiontable">RtlAddFunctionTable</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/winnt/nf-winnt-rtldeletefunctiontable">RtlDeleteFunctionTable</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winnt/nf-winnt-rtlinstallfunctiontablecallback">View the official Win32 API reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/sdk-api/blob/docs/sdk-api-src/content/winnt/nf-winnt-rtlinstallfunctiontablecallback.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
