<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_QVBR1_0096 - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_QVBR1_0096 - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_QVBR1_0096 - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3d12umddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_QVBR1_0096 {
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>   InitialQP;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>   MinQP;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>   MaxQP;
  <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a> MaxFrameBitSize;
  <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a> TargetAvgBitRate;
  <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a> PeakBitRate;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>   ConstantQualityTarget;
  <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a> VBVCapacity;
  <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a> InitialVBVFullness;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>   QualityVsSpeed;
} D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_QVBR1_0096;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ns-d3d12umddi-d3d12ddi_video_encoder_rate_control_qvbr1_0096">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/d3d12ddi_video_encoder_rate_control_qvbr1_0096.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-d3d12umddi-d3d12ddi_video_encoder_rate_control_qvbr1_0096)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_QVBR1_0096</strong> structure contains the rate control definition for enhanced QVBR rate control mode.</p>

<h2 id="members">Members</h2>

<h3 id="initialqp"><code>InitialQP</code></h3>

<p>When the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ne-d3d12umddi-d3d12ddi_video_encoder_rate_control_flags_0080"><strong>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_INITIAL_QP</strong></a> flag is set, <strong>InitialQP</strong> can be used by the rate control algorithm.</p>

<h3 id="minqp"><code>MinQP</code></h3>

<p>When the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ne-d3d12umddi-d3d12ddi_video_encoder_rate_control_flags_0080"><strong>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_QP_RANGE</strong></a> flag is set, <strong>MinQP</strong> limits the quantization parameter (QP) range of the rate control algorithm.</p>

<h3 id="maxqp"><code>MaxQP</code></h3>

<p>When the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ne-d3d12umddi-d3d12ddi_video_encoder_rate_control_flags_0080"><strong>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_QP_RANGE</strong></a> flag is set, <strong>MaxQP</strong> limits the QP range of the rate control algorithm.</p>

<h3 id="maxframebitsize"><code>MaxFrameBitSize</code></h3>

<p>Maximum size for each frame to be encoded, in bits. When <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ne-d3d12umddi-d3d12ddi_video_encoder_rate_control_flags_0080"><strong>D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_MAX_FRAME_SIZE</strong></a> is set, <strong>MaxFrameBitSize</strong> limits each frame's maximum size in the rate control algorithm.</p>

<h3 id="targetavgbitrate"><code>TargetAvgBitRate</code></h3>

<p>Average bitrate to be used, in bits per second.</p>

<h3 id="peakbitrate"><code>PeakBitRate</code></h3>

<p>Maximum bitrate that can be reached, in bits per second.</p>

<h3 id="constantqualitytarget"><code>ConstantQualityTarget</code></h3>

<p>Indicates the quality level. Values are codec-specific as each standard defines the range for this argument (for example, H.264 / HEVC 0-51, et cetera).</p>

<h3 id="vbvcapacity"><code>VBVCapacity</code></h3>

<p>The Video Buffering Verifier (VBV) buffer capacity, in bits.</p>

<h3 id="initialvbvfullness"><code>InitialVBVFullness</code></h3>

<p>The initial fullness of the VBV buffer, in bits.</p>

<h3 id="qualityvsspeed"><code>QualityVsSpeed</code></h3>

<p>The quality versus speed trade-off. This value must be in the range [0, D3D12_FEATURE_DATA_VIDEO_ENCODER_SUPPORT1.MaxQualityVsSpeed]. The lower the value, the faster the encode operation.</p>

<p>The settings associated to each of the levels exposed by <strong>QualityVsSpeed</strong> must only refer to hardware/driver implementation optimizations and heuristics that aren't related to specific codec configurations or encoding tools selection, which are already independently exposed in the D3D12 API to the user individually. Please note that other codec configurations and codec encoding tools exposed through this API may also affect quality and speed.</p>

<h2 id="remarks">Remarks</h2>

<p>See <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/video-encoding-d3d12-av1">D3D12 AV1 video encoding</a> for more information.</p>

<h2 id="see-also">See also</h2>

<p><strong><a href="d3d12ddi_video_encoder_rate_control_configuration_params_0080_2" title="typedef struct D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CONFIGURATION_PARAMS_0080_2 {&#10;  UINT  DataSize;&#10;  union {&#10;    const D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CQP_0080             *pConfiguration_CQP;&#10;    const D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CBR_0080             *pConfiguration_CBR;&#10;    const D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_VBR_0080             *pConfiguration_VBR;&#10;    const D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_QVBR_0080_2          *pConfiguration_QVBR;&#10;    const D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CQP1_0096            *pConfiguration_CQP1;&#10;    const D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CBR1_0096            *pConfiguration_CBR1;&#10;    const D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_VBR1_0096            *pConfiguration_VBR1;&#10;    const D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_QVBR1_0096           *pConfiguration_QVBR1;&#10;    const D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_ABSOLUTE_QP_MAP_0096 *pConfiguration_AbsoluteQPMap;&#10;  };&#10;} D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CONFIGURATION_PARAMS_0080_2;">D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_CONFIGURATION_PARAMS_0080_2</a></strong></p>

<p><strong><a href="d3d12ddi_video_encoder_rate_control_flags_0080" title="typedef enum D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAGS_0080 {&#10;  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_NONE = 0x0,&#10;  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_DELTA_QP = 0x1,&#10;  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_FRAME_ANALYSIS = 0x2,&#10;  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_QP_RANGE = 0x4,&#10;  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_INITIAL_QP = 0x8,&#10;  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_ENABLE_MAX_FRAME_SIZE = 0x10,&#10;  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0080_1_ENABLE_VBV_SIZES = 0x20,&#10;  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0096_ENABLE_EXTENSION1_SUPPORT = 0x40,&#10;  D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAG_0096_ENABLE_QUALITY_VS_SPEED = 0x80&#10;} ;">D3D12DDI_VIDEO_ENCODER_RATE_CONTROL_FLAGS_0080</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/ns-d3d12umddi-d3d12ddi_video_encoder_rate_control_qvbr1_0096">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3d12umddi/ns-d3d12umddi-d3d12ddi_video_encoder_rate_control_qvbr1_0096.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
