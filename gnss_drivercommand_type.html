<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="GNSS_DRIVERCOMMAND_TYPE - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>GNSS_DRIVERCOMMAND_TYPE - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            GNSS_DRIVERCOMMAND_TYPE - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// gnssdriver.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef enum {
  GNSS_SetLocationServiceEnabled,
  GNSS_SetLocationNIRequestAllowed,
  GNSS_ForceSatelliteSystem,
  GNSS_ForceOperationMode,
  GNSS_ResetEngine,
  GNSS_ClearAgnssData,
  GNSS_SetSuplVersion,
  GNSS_SetNMEALogging,
  GNSS_SetUplServerAccessInterval,
  GNSS_SetNiTimeoutInterval,
  GNSS_ResetGeofencesTracking,
  GNSS_SetSuplVersion2,
  GNSS_CustomCommand
} GNSS_DRIVERCOMMAND_TYPE;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/gnssdriver/ne-gnssdriver-gnss_drivercommand_type">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/gnss_drivercommand_type.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ne-gnssdriver-gnss_drivercommand_type)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>GNSS_DRIVERCOMMAND_TYPE enumeration</h1>
<h2>Description</h2>
<p>This enumeration indicates the type of driver command or configuration for the GNSS driver provided in the <a href="gnss_drivercommand_param" title="typedef struct {&#10;  ULONG                   Size;&#10;  ULONG                   Version;&#10;  GNSS_DRIVERCOMMAND_TYPE CommandType;&#10;  ULONG                   Reserved;&#10;  ULONG                   CommandDataSize;&#10;  BYTE                    Unused[512];&#10;  BYTE                    CommandData[ANYSIZE_ARRAY];&#10;} GNSS_DRIVERCOMMAND_PARAM, *PGNSS_DRIVERCOMMAND_PARAM;">GNSS_DRIVERCOMMAND_PARAM</a> structure.</p>
<h2>Constants</h2>
<h3><code>GNSS_SetLocationServiceEnabled</code></h3>
<p>Informs the driver whether location is enabled on the device. This command is issued each time the location service is enabled/disabled on the device.</p>
<p>The associated command data is a <strong>BOOL</strong>.</p>
<p>Upon receiving this command set to FALSE the GNSS driver and GNSS device must:</p>
<ul>
<li>

</li>
<li>

</li>
</ul>
<p>In relation to location requests from the mobile operator:</p>
<ul>
<li>

</li>
<li>

</li>
</ul>
<p>If the HLOS needs to initiate any new location request, for example, to enable the user to remotely find the device, the GNSS adapter will send a command to set the <strong>GNSS_SetLocationServiceEnabled</strong> to TRUE, initiate the fix session, and when the results are received it will send another command to set the <strong>GNSS_SetLocationServiceEnabled</strong> to FALSE:</p>
<ul>
<li>

</li>
<li>

</li>
</ul>
<p>Unless this command is issued by the GNSS adapter, the driver must assume that the location service is disabled on the system.</p>
<h3><code>GNSS_SetLocationNIRequestAllowed</code></h3>
<p>Informs the driver if it is allowed to entertain network initiated location requests coming from the mobile network. The command only needs to be supported if required by the mobile operator. As of Windows 10, Microsoft is not aware of any mobile operator requiring this any longer, but this remains to avoid any blocking issues during commercialization. If the command is not implemented, the GNSS driver should simply keep its default behavior.</p>
<p>The associated command data is a <strong>BOOL</strong>:</p>
<ul>
<li>

</li>
<li>

</li>
</ul>
<p>Unless this command is explicitly issued by the GNSS adapter, the driver must assume that the NI requests are enabled on the system.</p>
<p>The GNSS adapter maintains a system-wide state indicating whether NI requests are allowed. This state is determined by the location master switch (the setting that the user can toggle to turn location on or off) and a setting configured by the mobile operator to indicate if NI requests depend on the location master switch or not.</p>
<p>The GNSS adapter will evaluate the value of these two settings and will indicate to the GNSS driver if NI requests are allowed or not.</p>
<p>The location requests for emergency services or for CALEA (for example, the case of privacy override being set) must be served regardless of the value of this setting.</p>
<h3><code>GNSS_ForceSatelliteSystem</code></h3>
<p>This command causes the GNSS driver to use the specified satellite system(s) for getting fixes. The parameter is a <strong><a href="dword" title="typedef unsigned long DWORD;">DWORD</a></strong> with the following values:</p>
<ul>
<li>

</li>
<li>

</li>
<li>

</li>
<li>

</li>
<li>

</li>
</ul>
<p>0x10-0xFF are reserved.</p>
<p>This is expected to be used only for test purposes. Some mobile operators do require validations using a single satellite system.</p>
<h3><code>GNSS_ForceOperationMode</code></h3>
<p>This command causes the GNSS driver to use the specified operation mode.</p>
<p>The parameter is a <strong><a href="dword" title="typedef unsigned long DWORD;">DWORD</a></strong> with the following values:</p>
<ul>
<li>

</li>
<li>

</li>
<li>

</li>
<li>

</li>
<li>

</li>
<li>

</li>
<li>

</li>
</ul>
<p>0x40-0xFF are reserved.</p>
<p>This command is used for two purposes:</p>
<ul>
<li>

</li>
<li>

</li>
</ul>
<p>Setting the SUPL <strong>GNSS_ForceOperationMode</strong> to <strong>GNSS_OPERMODE_MSS</strong> is an indication to the GNSS system to not do any kind of interaction with the SUPL server for AGNSS data.</p>
<h3><code>GNSS_ResetEngine</code></h3>
<p>This command clears up the state of the GNSS engine. After this command is issued the engine will be ready for a cold start fix:</p>
<ul>
<li>

</li>
<li>

</li>
<li>

</li>
</ul>
<p>This command should only be called when there is no active fix session. This command is typically used for recursively testing the GNSS time to first fix on cold start.</p>
<h3><code>GNSS_ClearAgnssData</code></h3>
<p>This command clears the AGNSS assistance data from the GNSS engine. This is used mainly for testing purpose to ensure that the driver requests for assistance data when a fix is requested. The associated command data contains the specific <a href="gnss_agnss_request_type" title="typedef enum {&#10;  GNSS_AGNSS_TimeInjection,&#10;  GNSS_AGNSS_PositionInjection,&#10;  GNSS_AGNSS_BlobInjection&#10;} GNSS_AGNSS_REQUEST_TYPE;">GNSS_AGNSS_REQUEST_TYPE</a> enumeration to indicate the specific data element to be cleared:</p>
<ul>
<li>

</li>
<li>

</li>
<li>

</li>
</ul>
<p>It is highly recommended that this command is supported for test purposes even if the assistance data is not obtained from the OS location platform.</p>
<h3><code>GNSS_SetSuplVersion</code></h3>
<p>This command sets the SUPL version that the mobile operator wants supported. The command data contains a value of <a href="gnss_supl_version" title="typedef struct {&#10;  ULONG MajorVersion;&#10;  ULONG MinorVersion;&#10;} GNSS_SUPL_VERSION, *PGNSS_SUPL_VERSION;">GNSS_SUPL_VERSION</a> structure which includes both the major and the minor SUPL versions indicated by the mobile operator.</p>
<p>The SUPL client should use the SUPL version as specifies in the OMA SUPL standards, summarizing as follows:</p>
<ul>
<li>

</li>
<li>

</li>
</ul>
<h3><code>GNSS_SetNMEALogging</code></h3>
<p>This command sets the status for NMEA logging.</p>
<p>This command causes the GNSS driver to start/stop providing the data fix information via NMEA strings. The GNSS driver must continue providing fixes in the <a href="gnss_fixdata" title="typedef struct {&#10;  ULONG                  Size;&#10;  ULONG                  Version;&#10;  ULONG                  FixSessionID;&#10;  FILETIME               FixTimeStamp;&#10;  BOOL                   IsFinalFix;&#10;  NTSTATUS               FixStatus;&#10;  ULONG                  FixLevelOfDetails;&#10;  GNSS_FIXDATA_BASIC     BasicData;&#10;  GNSS_FIXDATA_ACCURACY  AccuracyData;&#10;  GNSS_FIXDATA_SATELLITE SatelliteData;&#10;} GNSS_FIXDATA, *PGNSS_FIXDATA;">GNSS_FIXDATA</a> structure.</p>
<p>The parameter is a <strong><a href="dword" title="typedef unsigned long DWORD;">DWORD</a></strong> with the following values:</p>
<ul>
<li>

</li>
<li>

</li>
</ul>
<p>The default value for this command is no NMEA logging (GNSS_NMEALOGGING_NONE).</p>
<p>This command should not persist across system restart.</p>
<p>This command has been introduced to support OEM testing.</p>
<p>This command is not used by the location framework or by Microsoft test tools.</p>
<h3><code>GNSS_SetUplServerAccessInterval</code></h3>
<p>This command sets the minimum time in between requests to the server for assisted position to prevent service overload. The time interval is specified in seconds.</p>
<p>Mobile operators may use the configuration service provider to tune this setting, if they require it. If this parameter is not supported, if can be ignored, but the SUPL configuration commands must not fail.</p>
<h3><code>GNSS_SetNiTimeoutInterval</code></h3>
<p>This command sets how much time the device must wait for input from a user before it responds to the NI request executing the default action. The time interval is specified in seconds and the default value is 35 seconds. This timeout is 5 seconds larger than the timeout used by the operating system to wait for response from the user, and it is simply a failsafe in case of the operating system not responding.</p>
<p>This command is applicable only to network initiated requests in which the verification from the user is requested. Mobile operators may use the configuration service provider to override the default value from the operating system. In such case the default values specified above should be replaced by the values provided by the mobile operator.</p>
<h3><code>GNSS_ResetGeofencesTracking</code></h3>
<p>This command resets the geofence tracking operation. The GNSS driver must delete all geofences from the GNSS engine, stop geofence tracking and stop monitoring for signal conditions. The geofence tracking operation will begin as usual only when the HLOS creates one or more new geofences.</p>
<h3><code>GNSS_SetSuplVersion2</code></h3>
<p>This command sets the SUPL 2 version for the GNSS driver.</p>
<h3><code>GNSS_CustomCommand</code></h3>
<p>Range for custom IHV-specific GNSS commands: 0x0100 â€“ 0x01FF.</p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/gnssdriver/ne-gnssdriver-gnss_drivercommand_type">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/gnssdriver/ne-gnssdriver-gnss_drivercommand_type.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
