<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="IOCTL_MIPI_DSI_RESET - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>IOCTL_MIPI_DSI_RESET - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            IOCTL_MIPI_DSI_RESET - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddvdeo.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">// <a href="ctl_code" title="void CTL_CODE(&#10;  DeviceType,&#10;  Function,&#10;  Method,&#10;  Access&#10;);">CTL_CODE</a>(0x0023, 0x502, METHOD_BUFFERED, FILE_ANY_ACCESS)
#define IOCTL_MIPI_DSI_RESET 0x00231408</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddvdeo/ni-ntddvdeo-ioctl_mipi_dsi_reset">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ioctl_mipi_dsi_reset.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ni-ntddvdeo-ioctl_mipi_dsi_reset)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="ioctl_mipi_dsi_reset-ioctl">IOCTL_MIPI_DSI_RESET IOCTL</h1>

<h3 id="major-code-irp_mj_device_controlhttpslearnmicrosoftcomwindows-hardwaredriverskernelirp-mj-device-control">Major Code: <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mj-device-control">IRP_MJ_DEVICE_CONTROL</a></h3>

<h2 id="description">Description</h2>

<p><strong>IOCTL_MIPI_DSI_RESET</strong> requests the reset of a device under graphics driver and OS control.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="major-code">Major code</h3>

<h3 id="input-buffer">Input buffer</h3>

<p>n/a</p>

<h3 id="input-buffer-length">Input buffer length</h3>

<p>n/a</p>

<h3 id="output-buffer">Output buffer</h3>

<p>n/a</p>

<h3 id="output-buffer-length">Output buffer length</h3>

<p>n/a</p>

<h3 id="inputoutput-buffer">Input/output buffer</h3>

<p>A <strong><a href="dxgk_dsi_reset" title="typedef struct _DXGK_DSI_RESET {&#10;  UINT  Flags;&#10;  union {&#10;    struct {&#10;      UINT MipiErrors : 16;&#10;      UINT ResetFailed : 1;&#10;      UINT NeedModeSet : 1;&#10;    };&#10;    UINT Results;&#10;  };&#10;} DXGK_DSI_RESET, *PDXGK_DSI_RESET;">DXGK_DSI_RESET</a></strong> structure.</p>

<h3 id="inputoutput-buffer-length">Input/output buffer length</h3>

<p>At least <code>sizeof(<a href="dxgk_dsi_reset" title="typedef struct _DXGK_DSI_RESET {&#10;  UINT  Flags;&#10;  union {&#10;    struct {&#10;      UINT MipiErrors : 16;&#10;      UINT ResetFailed : 1;&#10;      UINT NeedModeSet : 1;&#10;    };&#10;    UINT Results;&#10;  };&#10;} DXGK_DSI_RESET, *PDXGK_DSI_RESET;">DXGK_DSI_RESET</a>)</code></p>

<h3 id="status-block">Status block</h3>

<p>Irp->IoStatus.Status is set to <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if the request is successful.
Otherwise, Status to the appropriate error condition as a <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> code.</p>

<p>For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/ntstatus-values">NTSTATUS Values</a>.</p>

<h2 id="remarks">Remarks</h2>

<p>Mobile Industry Processor Interface (MIPI) Digital Serial Interface(DSI) IOCTLs must be handled by the monitor, oem-panel, or port/miniport driver.</p>

<p>If an OEM panel driver detects that the panel is in a bad state, it should send <strong>IOCTL_MIPI_DSI_RESET</strong> to request a reset of the device under graphics driver and OS control. The OS will coordinate the reset with the graphics driver. A reset is a heavy-weight operation that will cause display blanking for multiple frames, and should therefore be used only as a last resort.</p>

<p>Normal panel operation cannot continue while processing a reset, so the OS will treat is similarly to a display mode change, flushing pending GPU activity, including any flips, and blocking new work until complete. The OS translates the IOCTL into a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_dsireset"><strong>DsiReset</strong></a> DDI call. The driver should completely remove power from the panel and reinitialize it from scratch, and after the appropriate delay, perform any actions it needs to in order to restore the panel to a workable state before returning. When set, the <strong>SecondaryPort</strong> flag indicates that the reset should be targeted to a secondary panel rather than the primary.</p>

<p>If the graphics driver requires a full mode set in order to perform or restore from a panel reset, it should set the output flag <strong>NeedModeSet</strong>. If set upon return from the call, the OS will respond with a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkddi_settimingsfromvidpn"><strong>DxgkDdiSetTimingsFromVidPn</strong></a> call before unblocking normal activity. The driver may chose to defer some of the reset work to this call if needed, provided that a workable state is expected following the set timings call.</p>

<p>The graphics driver should report any low-level MIPI errors detected and not handled by the driver via the <strong>MipiErrors</strong> output field.</p>

<p>If an unrecoverable error occurs during the reset, the graphics driver should set the <strong>ResetFailed</strong> output flag. This is expected to be a catastrophic failure. The graphics driver should also signal that no display is available on the target by indicating that an unplug has occurred using the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkcb_indicate_connector_change"><strong>DxgkCbIndicateConnectorChange</strong></a> callback and then responding to <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkddi_queryconnectionchange"><strong>DxgkDdiQueryConnectionChange</strong></a> by reporting a <strong>TargetStatusDisconnected</strong> for the target which has failed.</p>

<p>The output fields will be propagated back to the output buffer of the IOCTL.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_dsireset"><strong>DsiReset</strong></a></p>

<p><strong><a href="dxgk_dsi_reset" title="typedef struct _DXGK_DSI_RESET {&#10;  UINT  Flags;&#10;  union {&#10;    struct {&#10;      UINT MipiErrors : 16;&#10;      UINT ResetFailed : 1;&#10;      UINT NeedModeSet : 1;&#10;    };&#10;    UINT Results;&#10;  };&#10;} DXGK_DSI_RESET, *PDXGK_DSI_RESET;">DXGK_DSI_RESET</a></strong></p>

<p><strong><a href="ioctl_mipi_dsi_query_caps" title="// CTL_CODE(0x0023, 0x500, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_MIPI_DSI_QUERY_CAPS 0x00231400">IOCTL_MIPI_DSI_QUERY_CAPS</a></strong></p>

<p><strong><a href="ioctl_mipi_dsi_transmission" title="// CTL_CODE(0x0023, 0x501, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_MIPI_DSI_TRANSMISSION 0x00231404">IOCTL_MIPI_DSI_TRANSMISSION</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddvdeo/ni-ntddvdeo-ioctl_mipi_dsi_reset">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddvdeo/ni-ntddvdeo-ioctl_mipi_dsi_reset.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
