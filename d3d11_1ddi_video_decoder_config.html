<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="D3D11_1DDI_VIDEO_DECODER_CONFIG - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>D3D11_1DDI_VIDEO_DECODER_CONFIG - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            D3D11_1DDI_VIDEO_DECODER_CONFIG - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3d10umddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct D3D11_1DDI_VIDEO_DECODER_CONFIG {
  GUID   guidConfigBitstreamEncryption;
  GUID   guidConfigMBcontrolEncryption;
  GUID   guidConfigResidDiffEncryption;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>   ConfigBitstreamRaw;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>   ConfigMBcontrolRasterOrder;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>   ConfigResidDiffHost;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>   ConfigSpatialResid8;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>   ConfigResid8Subtraction;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>   ConfigSpatialHost8or9Clipping;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>   ConfigSpatialResidInterleaved;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>   ConfigIntraResidUnsigned;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>   ConfigResidDiffAccelerator;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>   ConfigHostInverseScan;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>   ConfigSpecificIDCT;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>   Config4GroupedCoefs;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> ConfigMinRenderTargetBuffCount;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> ConfigDecoderSpecific;
} D3D11_1DDI_VIDEO_DECODER_CONFIG;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/ns-d3d10umddi-d3d11_1ddi_video_decoder_config">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/d3d11_1ddi_video_decoder_config.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-d3d10umddi-d3d11_1ddi_video_decoder_config)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="d3d11_1ddi_video_decoder_config-structure">D3D11_1DDI_VIDEO_DECODER_CONFIG structure</h1>

<h2 id="description">Description</h2>

<p>Describes the configuration of a Microsoft Direct3D 11 decoder device for Microsoft DirectX Video Acceleration (DXVA).</p>

<h2 id="members">Members</h2>

<h3 id="guidconfigbitstreamencryption"><code>guidConfigBitstreamEncryption</code></h3>

<p>Defines the encryption protocol type for bit-stream data buffers. If no encryption is applied, the value is <strong>DXVA_NoEncrypt</strong> (a GUID name defined in Dxva.h). If <strong>ConfigBitstreamRaw</strong> is 0, the value must be <strong>DXVA_NoEncrypt</strong>.</p>

<p>If set to <strong>D3DWDDM2_0DDI_DECODER_ENCRYPTION_HW_CENC</strong>, this indicates that the following parameters will be passed in to the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d11_1ddi_videodecoderbeginframe">VideoDecoderBeginFrame</a> call:</p>

<table>
<thead>
<tr>
  <th style="text-align:left;"><strong>Value</strong></th>
  <th style="text-align:left;"><strong>Meaning</strong></th>
</tr>
</thead>
<tbody>
<tr>
  <td style="text-align:left;"><strong>pContentKey</strong></td>
  <td style="text-align:left;">A pointer to the <a href="d3dwddm2_0ddi_video_decoder_begin_frame_crypto_session" title="typedef struct D3DWDDM2_0DDI_VIDEO_DECODER_BEGIN_FRAME_CRYPTO_SESSION {&#10;  D3D11_1DDI_HCRYPTOSESSION hCryptoSession;&#10;  void                      *pBlob;&#10;  UINT                      BlobSize;&#10;  GUID                      *pKeyInfoId;&#10;  void                      *pPrivateData;&#10;  UINT                      PrivateDataSize;&#10;} D3DWDDM2_0DDI_VIDEO_DECODER_BEGIN_FRAME_CRYPTO_SESSION;">D3DWDDM2_0DDI_VIDEO_DECODER_BEGIN_FRAME_CRYPTO_SESSION</a> structure, indicating which CryptoSession and the key information used to decrypt the frame.</td>
</tr>
<tr>
  <td style="text-align:left;"><strong>ContentKeySize</strong></td>
  <td style="text-align:left;">Set to the size of the <a href="d3dwddm2_0ddi_video_decoder_begin_frame_crypto_session" title="typedef struct D3DWDDM2_0DDI_VIDEO_DECODER_BEGIN_FRAME_CRYPTO_SESSION {&#10;  D3D11_1DDI_HCRYPTOSESSION hCryptoSession;&#10;  void                      *pBlob;&#10;  UINT                      BlobSize;&#10;  GUID                      *pKeyInfoId;&#10;  void                      *pPrivateData;&#10;  UINT                      PrivateDataSize;&#10;} D3DWDDM2_0DDI_VIDEO_DECODER_BEGIN_FRAME_CRYPTO_SESSION;">D3DWDDM2_0DDI_VIDEO_DECODER_BEGIN_FRAME_CRYPTO_SESSION</a> structure.</td>
</tr>
</tbody>
</table>

<h3 id="guidconfigmbcontrolencryption"><code>guidConfigMBcontrolEncryption</code></h3>

<p>Defines the encryption protocol type for macro block control data buffers. If no encryption is applied, the value is <strong>DXVA_NoEncrypt</strong> (a GUID name defined in Dxva.h). If <strong>ConfigBitstreamRaw</strong> is 1, the value must be <strong>DXVA_NoEncrypt</strong>.</p>

<h3 id="guidconfigresiddiffencryption"><code>guidConfigResidDiffEncryption</code></h3>

<p>Defines the encryption protocol type for residual difference decoding data buffers (buffers containing spatial-domain data or sets of transform-domain coefficients for accelerator-based inverse discrete cosine transform [IDCT]). If no encryption is applied, the value is <strong>DXVA_NoEncrypt</strong> (a GUID name defined in Dxva.h). If <strong>ConfigBitstreamRaw</strong> is 1, the value must be <strong>DXVA_NoEncrypt</strong>.</p>

<h3 id="configbitstreamraw"><code>ConfigBitstreamRaw</code></h3>

<p>Indicates whether the host-decoder sends raw bit-stream data. If the value is 1, the data for the pictures will be sent in bit-stream buffers as raw bit-stream content. If the value is 0, picture data will be sent using macroblock control command buffers. If either <strong>ConfigResidDiffHost</strong> or <strong>ConfigResidDiffAccelerator</strong> is 1, the value must be 0.</p>

<h3 id="configmbcontrolrasterorder"><code>ConfigMBcontrolRasterOrder</code></h3>

<p>Specifies whether macroblock control commands are in raster scan order or in arbitrary order. If the value is 1, the macroblock control commands within each macroblock control command buffer are in raster-scan order. If the value is 0, the order is arbitrary. For some types of bit streams, forcing raster order either greatly increases the number of required macroblock control buffers that must be processed, or requires host reordering of the control information. Therefore, supporting arbitrary order can be more efficient.</p>

<h3 id="configresiddiffhost"><code>ConfigResidDiffHost</code></h3>

<p>Contains the host residual difference configuration. If the value is 1, some residual difference decoding data may be sent as blocks in the spatial domain from the host. If the value is 0, spatial domain data will not be sent.</p>

<h3 id="configspatialresid8"><code>ConfigSpatialResid8</code></h3>

<p>Indicates the word size used to represent residual difference spatial-domain blocks for predicted (non-intra) pictures when using host-based residual difference decoding.</p>

<p>If <strong>ConfigResidDiffHost</strong> is 1 and <strong>ConfigSpatialResid8</strong> is 1, the host will send residual difference spatial-domain blocks for non-intra macroblocks using 8-bit signed samples and for intra macroblocks in predicted (non-intra) pictures in a format that depends on the value of <strong>ConfigIntraResidUnsigned</strong>:</p>

<ul>
<li>If <strong>ConfigIntraResidUnsigned</strong> is 0, spatial-domain blocks for intra macroblocks are sent as 8-bit signed integer values relative to a constant reference value of 2^(BPP–1).</li>
<li>If <strong>ConfigIntraResidUnsigned</strong> is 1, spatial-domain blocks for intra macroblocks are sent as 8-bit unsigned integer values relative to a constant reference value of 0.</li>
</ul>

<p>If <strong>ConfigResidDiffHost</strong> is 1 and <strong>ConfigSpatialResid8</strong> is 0, the host will send residual difference spatial-domain blocks of data for non-intra macroblocks using 16-bit signed samples and for intra macroblocks in predicted (non-intra) pictures in a format that depends on the value of <strong>ConfigIntraResidUnsigned</strong>:</p>

<ul>
<li>If <strong>ConfigIntraResidUnsigned</strong> is 0, spatial domain blocks for intra macroblocks are sent as 16-bit signed integer values relative to a constant reference value of 2^(BPP–1).</li>
<li>If <strong>ConfigIntraResidUnsigned</strong> is 1, spatial domain blocks for intra macroblocks are sent as 16-bit unsigned integer values relative to a constant reference value of 0.</li>
<li>If <strong>ConfigResidDiffHost</strong> is 0, <strong>ConfigSpatialResid8</strong> must be 0.
For intra pictures, spatial-domain blocks must be sent using 8-bit samples if bits-per-pixel (BPP) is 8, and using 16-bit samples if BPP &gt; 8. If <strong>ConfigIntraResidUnsigned</strong> is 0, these samples are sent as signed integer values relative to a constant reference value of 2^(BPP–1), and if <strong>ConfigIntraResidUnsigned</strong> is 1, these samples are sent as unsigned integer values relative to a constant reference value of 0.</li>
</ul>

<h3 id="configresid8subtraction"><code>ConfigResid8Subtraction</code></h3>

<p>If the value is 1, 8-bit difference overflow blocks are subtracted rather than added. The value must be 0 unless <strong>ConfigSpatialResid8</strong> is 1.</p>

<p>The ability to subtract differences rather than add them enables 8-bit difference decoding to be fully compliant with the full Â±255 range of values required in video decoder specifications, because +255 cannot be represented as the addition of two signed 8-bit numbers, but any number in the range Â±255 can be represented as the difference between two signed 8-bit numbers (+255 = +127 minus –128).</p>

<h3 id="configspatialhost8or9clipping"><code>ConfigSpatialHost8or9Clipping</code></h3>

<p>If the value is 1, spatial-domain blocks for intra macroblocks must be clipped to an 8-bit range on the host and spatial-domain blocks for non-intra macroblocks must be clipped to a 9-bit range on the host. If the value is 0, no such clipping is necessary by the host.</p>

<p>The value must be 0 unless <strong>ConfigSpatialResid8</strong> is 0 and <strong>ConfigResidDiffHost</strong> is 1.</p>

<h3 id="configspatialresidinterleaved"><code>ConfigSpatialResidInterleaved</code></h3>

<p>If the value is 1, any spatial-domain residual difference data must be sent in a chrominance-interleaved form matching the YUV format chrominance interleaving pattern. The value must be 0 unless <strong>ConfigResidDiffHost</strong> is 1 and the YUV format is NV12 or NV21.</p>

<h3 id="configintraresidunsigned"><code>ConfigIntraResidUnsigned</code></h3>

<p>Indicates the method of representation of spatial-domain blocks of residual difference data for intra blocks when using host-based difference decoding.</p>

<p>If <strong>ConfigResidDiffHost</strong> is 1 and <strong>ConfigIntraResidUnsigned</strong> is 0, spatial-domain residual difference data blocks for intra macroblocks must be sent as follows:</p>

<ul>
<li>In a non-intra picture, if ConfigSpatialResid8 is 0, the spatial-domain residual difference data blocks for intra macroblocks are sent as 16-bit signed integer values relative to a constant reference value of 2^(BPP–1).</li>
<li>In a non-intra picture, if ConfigSpatialResid8 is 1, the spatial-domain residual difference data blocks for intra macroblocks are sent as 8-bit signed integer values relative to a constant reference value of 2^(BPP–1).</li>
<li>In an intra picture, if BPP is 8, the spatial-domain residual difference data blocks for intra macroblocks are sent as 8-bit signed integer values relative to a constant reference value of 2^(BPP–1), regardless of the value of ConfigSpatialResid8.</li>
</ul>

<p>If <strong>ConfigResidDiffHost</strong> is 1 and <strong>ConfigIntraResidUnsigned</strong> is 1, spatial-domain residual difference data blocks for intra macroblocks must be sent as follows:</p>

<ul>
<li>In a non-intra picture, if ConfigSpatialResid8 is 0, the spatial-domain residual difference data blocks for intra macroblocks must be sent as 16-bit unsigned integer values relative to a constant reference value of 0.</li>
<li>In a non-intra picture, if ConfigSpatialResid8 is 1, the spatial-domain residual difference data blocks for intra macroblocks are sent as 8-bit unsigned integer values relative to a constant reference value of 0.</li>
<li>In an intra picture, if BPP is 8, the spatial-domain residual difference data blocks for intra macroblocks are sent as 8-bit unsigned integer values relative to a constant reference value of 0, regardless of the value of ConfigSpatialResid8.</li>
</ul>

<p>The value of the member must be 0 unless <strong>ConfigResidDiffHost</strong> is 1.</p>

<h3 id="configresiddiffaccelerator"><code>ConfigResidDiffAccelerator</code></h3>

<p>If the value is 1, transform-domain blocks of coefficient data may be sent from the host for accelerator-based IDCT. If the value is 0, accelerator-based IDCT will not be used. If both <strong>ConfigResidDiffHost</strong> and <strong>ConfigResidDiffAccelerator</strong> are 1, this indicates that some residual difference decoding will be done on the host and some on the accelerator, as indicated by macroblock-level control commands.</p>

<p>The value must be 0 if <strong>ConfigBitstreamRaw</strong> is 1.</p>

<h3 id="confighostinversescan"><code>ConfigHostInverseScan</code></h3>

<p>If the value is 1, the inverse scan for transform-domain block processing will be performed on the host, and absolute indices will be sent instead for any transform coefficients. If the value is 0, the inverse scan will be performed on the accelerator.</p>

<p>The value must be 0 if <strong>ConfigResidDiffAccelerator</strong> is 0 or if <strong>Config4GroupedCoefs</strong> is 1.</p>

<h3 id="configspecificidct"><code>ConfigSpecificIDCT</code></h3>

<p>If the value is 1, the IDCT specified in Annex W of ITU-T Recommendation H.263 is used. If the value is 0, any compliant IDCT can be used for off-host IDCT.</p>

<p>The H.263 annex does not comply with the IDCT requirements of MPEG-2 corrigendum 2, so the value must not be 1 for use with MPEG-2 video.</p>

<p>The value must be 0 if <strong>ConfigResidDiffAccelerator</strong> is 0, indicating purely host-based residual difference decoding.</p>

<h3 id="config4groupedcoefs"><code>Config4GroupedCoefs</code></h3>

<p>If the value is 1, transform coefficients for off-host IDCT will be sent using the <a href="lpdxva_tcoef4group" title="typedef struct _DXVA_TCoef4Group {&#10;  BYTE  TCoefIDX[4];&#10;  SHORT TCoefValue[4];&#10;} DXVA_TCoef4Group, *LPDXVA_TCoef4Group;">DXVA_TCoef4Group</a> structure. If the value is 0, the <a href="lpdxva_tcoefsingle" title="typedef struct _DXVA_TCoefSingle {&#10;  WORD  wIndexWithEOB;&#10;  SHORT TCoefValue;&#10;} DXVA_TCoefSingle, *LPDXVA_TCoefSingle;">DXVA_TCoefSingle</a> structure is used. The value must be 0 if <strong>ConfigResidDiffAccelerator</strong> is 0 or if <strong>ConfigHostInverseScan</strong> is 1.</p>

<h3 id="configminrendertargetbuffcount"><code>ConfigMinRenderTargetBuffCount</code></h3>

<p>Specifies how many frames the decoder device processes at any one time.</p>

<h3 id="configdecoderspecific"><code>ConfigDecoderSpecific</code></h3>

<p>Contains decoder-specific configuration information.</p>

<h2 id="see-also">See also</h2>

<p><a href="d3dwddm2_0ddi_video_decoder_begin_frame_crypto_session" title="typedef struct D3DWDDM2_0DDI_VIDEO_DECODER_BEGIN_FRAME_CRYPTO_SESSION {&#10;  D3D11_1DDI_HCRYPTOSESSION hCryptoSession;&#10;  void                      *pBlob;&#10;  UINT                      BlobSize;&#10;  GUID                      *pKeyInfoId;&#10;  void                      *pPrivateData;&#10;  UINT                      PrivateDataSize;&#10;} D3DWDDM2_0DDI_VIDEO_DECODER_BEGIN_FRAME_CRYPTO_SESSION;">D3DWDDM2_0DDI_VIDEO_DECODER_BEGIN_FRAME_CRYPTO_SESSION</a></p>

<p><a href="lpdxva_tcoef4group" title="typedef struct _DXVA_TCoef4Group {&#10;  BYTE  TCoefIDX[4];&#10;  SHORT TCoefValue[4];&#10;} DXVA_TCoef4Group, *LPDXVA_TCoef4Group;">DXVA_TCoef4Group</a></p>

<p><a href="lpdxva_tcoefsingle" title="typedef struct _DXVA_TCoefSingle {&#10;  WORD  wIndexWithEOB;&#10;  SHORT TCoefValue;&#10;} DXVA_TCoefSingle, *LPDXVA_TCoefSingle;">DXVA_TCoefSingle</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/ns-d3d10umddi-d3d11_1ddi_video_decoder_config">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3d10umddi/ns-d3d10umddi-d3d11_1ddi_video_decoder_config.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
