<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="FILE_FS_FULL_SIZE_INFORMATION_EX - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>FILE_FS_FULL_SIZE_INFORMATION_EX - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            FILE_FS_FULL_SIZE_INFORMATION_EX - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">#ifndef _NTIOAPI_H

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _FILE_FS_FULL_SIZE_INFORMATION_EX
{
    <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> ActualTotalAllocationUnits;
    <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> ActualAvailableAllocationUnits;
    <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> ActualPoolUnavailableAllocationUnits;
    <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> CallerTotalAllocationUnits;
    <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> CallerAvailableAllocationUnits;
    <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> CallerPoolUnavailableAllocationUnits;
    <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> UsedAllocationUnits;
    <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> TotalReservedAllocationUnits;
    <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> VolumeStorageReserveAllocationUnits;
    <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> AvailableCommittedAllocationUnits;
    <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> PoolAvailableAllocationUnits;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> SectorsPerAllocationUnit;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> BytesPerSector;
} FILE_FS_FULL_SIZE_INFORMATION_EX, *PFILE_FS_FULL_SIZE_INFORMATION_EX;
</span><span class="ntdoc-code-footer">
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/66e9024965df1192a53aee9b345a8df8f08d8beb/phnt/include/ntioapi.h#L1740">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddk.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _FILE_FS_FULL_SIZE_INFORMATION_EX {
  <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> ActualTotalAllocationUnits;
  <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> ActualAvailableAllocationUnits;
  <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> ActualPoolUnavailableAllocationUnits;
  <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> CallerTotalAllocationUnits;
  <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> CallerAvailableAllocationUnits;
  <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> CallerPoolUnavailableAllocationUnits;
  <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> UsedAllocationUnits;
  <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> TotalReservedAllocationUnits;
  <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> VolumeStorageReserveAllocationUnits;
  <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> AvailableCommittedAllocationUnits;
  <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> PoolAvailableAllocationUnits;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>     SectorsPerAllocationUnit;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>     BytesPerSector;
} FILE_FS_FULL_SIZE_INFORMATION_EX, *PFILE_FS_FULL_SIZE_INFORMATION_EX;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/ns-ntddk-_file_fs_full_size_information_ex">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<p>This structure is <a rel="noopener" target="_blank" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/ntddk/ns-ntddk-_file_fs_full_size_information_ex">documented in Windows Driver Kit</a>.</p>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/file_fs_full_size_information_ex.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntddk-_file_fs_full_size_information_ex)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_file_fs_full_size_information_ex-structure">_FILE_FS_FULL_SIZE_INFORMATION_EX structure</h1>

<h2 id="description">Description</h2>

<p>Used in a request to query sector size information for a file system volume.</p>

<h2 id="members">Members</h2>

<h3 id="actualtotalallocationunits"><code>ActualTotalAllocationUnits</code></h3>

<p>Total space (in clusters) on the volume without considering the quota setting.</p>

<h3 id="actualavailableallocationunits"><code>ActualAvailableAllocationUnits</code></h3>

<p>Total space available (in clusters) on the volume (in clusters) without considering the quota setting.</p>

<h3 id="actualpoolunavailableallocationunits"><code>ActualPoolUnavailableAllocationUnits</code></h3>

<p>Total unavailable space (in clusters) for the volume due to insufficient free pool space indicated by <strong>PoolAvailableAllocationUnits</strong>.</p>

<h3 id="callertotalallocationunits"><code>CallerTotalAllocationUnits</code></h3>

<p>Total space (in clusters) on the volume including available, unavailable, used, and reserved space.</p>

<h3 id="calleravailableallocationunits"><code>CallerAvailableAllocationUnits</code></h3>

<p>Total space (in clusters) on the volume that is available to the user associated with the calling thread.</p>

<h3 id="callerpoolunavailableallocationunits"><code>CallerPoolUnavailableAllocationUnits</code></h3>

<p>Total space (in clusters) that is the unavailable space for the volume due to insufficient free pool space.</p>

<h3 id="usedallocationunits"><code>UsedAllocationUnits</code></h3>

<p>Total used space (in clusters) on the volume.</p>

<h3 id="totalreservedallocationunits"><code>TotalReservedAllocationUnits</code></h3>

<p>Total reserved space (in clusters) on the volume.</p>

<h3 id="volumestoragereserveallocationunits"><code>VolumeStorageReserveAllocationUnits</code></h3>

<p>A special type of reserved space (in clusters) for per-volume storage reserve. This value is included in <strong>TotalReservedAllocationUnits</strong>.</p>

<h3 id="availablecommittedallocationunits"><code>AvailableCommittedAllocationUnits</code></h3>

<p>Total space (in clusters) that has been committed by storage pool but has not been allocated by file system.</p>

<h3 id="poolavailableallocationunits"><code>PoolAvailableAllocationUnits</code></h3>

<p>Total available space (in clusters) in corresponding storage pool. If the volume is not a spaces volume, the <strong>PoolAvailableAllocationUnits</strong> is set to zero.</p>

<h3 id="sectorsperallocationunit"><code>SectorsPerAllocationUnit</code></h3>

<p>Number of sectors in each allocation unit.</p>

<h3 id="bytespersector"><code>BytesPerSector</code></h3>

<p>Number of bytes in each sector.</p>

<h2 id="remarks">Remarks</h2>

<p>This information can be queried in either of the following ways:</p>

<ul>
<li><p>Call <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/fltkernel/nf-fltkernel-fltqueryvolumeinformation"><strong>FltQueryVolumeInformation</strong></a> or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/nf-ntifs-ntqueryvolumeinformationfile"><strong>ZwQueryVolumeInformationFile</strong></a>, passing FileFsFullSizeInformationEx as the value of _FileInformationClass_ and passing a caller-allocated, *<em>FILE_FS_FULL_SIZE_INFORMATION_EX</em>*-structured buffer as the value of FileInformation.</p></li>
<li><p>Create an <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a> with major function code <a href="irp_mj_query_volume_information" title="#define IRP_MJ_QUERY_VOLUME_INFORMATION 0x0a">IRP_MJ_QUERY_VOLUME_INFORMATION</a>.</p></li>
</ul>

<p>No specific access rights are required to query this information. Thus this information is available as long as the volume is accessed through an open handle to the volume itself, or to a file or directory on the volume.</p>

<p>The size of the buffer passed in the _FileInformation_ parameter to <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/fltkernel/nf-fltkernel-fltqueryvolumeinformation"><strong>FltQueryVolumeInformation</strong></a> or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/nf-ntifs-ntqueryvolumeinformationfile"><strong>ZwQueryVolumeInformationFile</strong></a> must be at least sizeof (FILE_FS_FULL_SIZE_INFORMATION_EX).</p>

<p>This structure must be aligned on a <a href="longlong" title="typedef __int64 LONGLONG;">LONGLONG</a> (8-byte) boundary.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/fltkernel/nf-fltkernel-fltqueryvolumeinformation"><strong>FltQueryVolumeInformation</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/nf-ntifs-ntqueryvolumeinformationfile"><strong>ZwQueryVolumeInformationFile</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/ns-ntddk-_file_fs_full_size_information_ex">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddk/ns-ntddk-_file_fs_full_size_information_ex.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
