<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="D3DDDIARG_COMPOSERECTS - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>D3DDDIARG_COMPOSERECTS - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            D3DDDIARG_COMPOSERECTS - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3dumddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _D3DDDIARG_COMPOSERECTS {
  [in] HANDLE                hSrcResource;
  [in] <a href="uint" title="typedef unsigned int UINT;">UINT</a>                  SrcSubResourceIndex;
  [in] HANDLE                hDstResource;
  [in] <a href="uint" title="typedef unsigned int UINT;">UINT</a>                  DstSubResourceIndex;
  [in] HANDLE                hSrcRectDescsVB;
  [in] <a href="uint" title="typedef unsigned int UINT;">UINT</a>                  NumRects;
  [in] HANDLE                hDstRectDescsVB;
  [in] <a href="d3dddi_composerectsop" title="typedef enum _D3DDDI_COMPOSERECTSOP {&#10;  D3DDDICOMPOSERECTS_COPY,&#10;  D3DDDICOMPOSERECTS_OR,&#10;  D3DDDICOMPOSERECTS_AND,&#10;  D3DDDICOMPOSERECTS_NEG,&#10;  D3DDDICOMPOSERECTS_FORCE_UINT&#10;} D3DDDI_COMPOSERECTSOP;">D3DDDI_COMPOSERECTSOP</a> Operation;
  [in] <a href="int" title="typedef int INT;">INT</a>                   XOffset;
  [in] <a href="int" title="typedef int INT;">INT</a>                   YOffset;
} D3DDDIARG_COMPOSERECTS;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/ns-d3dumddi-_d3dddiarg_composerects">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/d3dddiarg_composerects.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-d3dumddi-_d3dddiarg_composerects)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>_D3DDDIARG_COMPOSERECTS structure</h1>
<h2>Description</h2>
<p>The D3DDDIARG_COMPOSERECTS structure describes the parameters that are used to compose rectangular areas.</p>
<h2>Members</h2>
<h3><code>hSrcResource</code> [in]</h3>
<p>A handle to the source resource that contains the source surface. When the surface is created, the user-mode display driver receives the D3DDDIFMT_A1 (one bit per pixel) value in the <strong>Format</strong> member and the <strong>TextApi</strong> bit-field flag in the <strong>Flags</strong> member of the <a href="d3dddiarg_createresource" title="typedef struct _D3DDDIARG_CREATERESOURCE {&#10;  [in]     D3DDDIFORMAT                   Format;&#10;  [in]     D3DDDI_POOL                    Pool;&#10;  [in]     D3DDDIMULTISAMPLE_TYPE         MultisampleType;&#10;  [in]     UINT                           MultisampleQuality;&#10;  [in]     const D3DDDI_SURFACEINFO       *pSurfList;&#10;  [in]     UINT                           SurfCount;&#10;  [in]     UINT                           MipLevels;&#10;  [in]     UINT                           Fvf;&#10;  [in]     D3DDDI_VIDEO_PRESENT_SOURCE_ID VidPnSourceId;&#10;  [in]     D3DDDI_RATIONAL                RefreshRate;&#10;  [in/out] HANDLE                         hResource;&#10;  [in]     D3DDDI_RESOURCEFLAGS           Flags;&#10;  [in]     D3DDDI_ROTATION                Rotation;&#10;} D3DDDIARG_CREATERESOURCE;">D3DDDIARG_CREATERESOURCE</a> structure in a call to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_createresource">CreateResource</a> function. The surface must be created as part of a texture.</p>
<h3><code>SrcSubResourceIndex</code> [in]</h3>
<p>The index to the source surface within the source resource.</p>
<h3><code>hDstResource</code> [in]</h3>
<p>A handle to the destination resource that contains the destination surface. When the surface is created, the user-mode display driver receives the D3DDDIFMT_A1 (one bit per pixel) value in the <strong>Format</strong> member of <a href="d3dddiarg_createresource" title="typedef struct _D3DDDIARG_CREATERESOURCE {&#10;  [in]     D3DDDIFORMAT                   Format;&#10;  [in]     D3DDDI_POOL                    Pool;&#10;  [in]     D3DDDIMULTISAMPLE_TYPE         MultisampleType;&#10;  [in]     UINT                           MultisampleQuality;&#10;  [in]     const D3DDDI_SURFACEINFO       *pSurfList;&#10;  [in]     UINT                           SurfCount;&#10;  [in]     UINT                           MipLevels;&#10;  [in]     UINT                           Fvf;&#10;  [in]     D3DDDI_VIDEO_PRESENT_SOURCE_ID VidPnSourceId;&#10;  [in]     D3DDDI_RATIONAL                RefreshRate;&#10;  [in/out] HANDLE                         hResource;&#10;  [in]     D3DDDI_RESOURCEFLAGS           Flags;&#10;  [in]     D3DDDI_ROTATION                Rotation;&#10;} D3DDDIARG_CREATERESOURCE;">D3DDDIARG_CREATERESOURCE</a> in a call to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_createresource">CreateResource</a>. The surface must be created as part of a texture. The surface might have been created with the <strong>TextApi</strong> bit-field flag.</p>
<h3><code>DstSubResourceIndex</code> [in]</h3>
<p>The index to the destination surface within the destination resource.</p>
<h3><code>hSrcRectDescsVB</code> [in]</h3>
<p>A handle to a vertex buffer that contains an array of D3DCOMPOSERECTSRCDESC structures. Each element in the array defines a rectangle on the source surface. When the vertex buffer is created, the user-mode display driver receives the <strong>TextApi</strong> bit-field flag in the <strong>Flags</strong> member of the <a href="d3dddiarg_createresource" title="typedef struct _D3DDDIARG_CREATERESOURCE {&#10;  [in]     D3DDDIFORMAT                   Format;&#10;  [in]     D3DDDI_POOL                    Pool;&#10;  [in]     D3DDDIMULTISAMPLE_TYPE         MultisampleType;&#10;  [in]     UINT                           MultisampleQuality;&#10;  [in]     const D3DDDI_SURFACEINFO       *pSurfList;&#10;  [in]     UINT                           SurfCount;&#10;  [in]     UINT                           MipLevels;&#10;  [in]     UINT                           Fvf;&#10;  [in]     D3DDDI_VIDEO_PRESENT_SOURCE_ID VidPnSourceId;&#10;  [in]     D3DDDI_RATIONAL                RefreshRate;&#10;  [in/out] HANDLE                         hResource;&#10;  [in]     D3DDDI_RESOURCEFLAGS           Flags;&#10;  [in]     D3DDDI_ROTATION                Rotation;&#10;} D3DDDIARG_CREATERESOURCE;">D3DDDIARG_CREATERESOURCE</a> structure in a call to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_createresource">CreateResource</a> function.</p>
<h3><code>NumRects</code> [in]</h3>
<p>The number of rectangular areas to copy, which is the number of D3DCOMPOSERECTDSTDESC structures in the vertex buffer that is identified by the <strong>hDstRectDescsVB</strong> member. Drivers should ignore calls to <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_composerects">ComposeRects</a> with <strong>NumRects</strong> set to greater than 0xFFFF.</p>
<h3><code>hDstRectDescsVB</code> [in]</h3>
<p>A handle to a vertex buffer that contains an array of D3DCOMPOSERECTDSTDESC structures. Each element in the array defines where to copy a source rectangle on the destination surface. For more information, see the following Remarks section. When the vertex buffer is created, the user-mode display driver receives the <strong>TextApi</strong> bit-field flag in the <strong>Flags</strong> member of the <a href="d3dddiarg_createresource" title="typedef struct _D3DDDIARG_CREATERESOURCE {&#10;  [in]     D3DDDIFORMAT                   Format;&#10;  [in]     D3DDDI_POOL                    Pool;&#10;  [in]     D3DDDIMULTISAMPLE_TYPE         MultisampleType;&#10;  [in]     UINT                           MultisampleQuality;&#10;  [in]     const D3DDDI_SURFACEINFO       *pSurfList;&#10;  [in]     UINT                           SurfCount;&#10;  [in]     UINT                           MipLevels;&#10;  [in]     UINT                           Fvf;&#10;  [in]     D3DDDI_VIDEO_PRESENT_SOURCE_ID VidPnSourceId;&#10;  [in]     D3DDDI_RATIONAL                RefreshRate;&#10;  [in/out] HANDLE                         hResource;&#10;  [in]     D3DDDI_RESOURCEFLAGS           Flags;&#10;  [in]     D3DDDI_ROTATION                Rotation;&#10;} D3DDDIARG_CREATERESOURCE;">D3DDDIARG_CREATERESOURCE</a> structure in a call to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_createresource">CreateResource</a> function.</p>
<h3><code>Operation</code> [in]</h3>
<p>A <a href="d3dddi_composerectsop" title="typedef enum _D3DDDI_COMPOSERECTSOP {&#10;  D3DDDICOMPOSERECTS_COPY,&#10;  D3DDDICOMPOSERECTS_OR,&#10;  D3DDDICOMPOSERECTS_AND,&#10;  D3DDDICOMPOSERECTS_NEG,&#10;  D3DDDICOMPOSERECTS_FORCE_UINT&#10;} D3DDDI_COMPOSERECTSOP;">D3DDDI_COMPOSERECTSOP</a> value that describes how to compose the rectangular areas. This member can be one of the following values.</p>
<table>
<thead>
<tr>
  <th style="text-align:left;"><strong>Value</strong></th>
  <th style="text-align:left;"><strong>Meaning</strong></th>
</tr>
</thead>
<tbody>
<tr>
  <td style="text-align:left;">D3DDDICOMPOSERECTS_COPY</td>
  <td style="text-align:left;">Copy each source bit to the destination.</td>
</tr>
<tr>
  <td style="text-align:left;">D3DDDICOMPOSERECTS_OR</td>
  <td style="text-align:left;">Combine source and destination bits in an OR operation and copy to the destination.</td>
</tr>
<tr>
  <td style="text-align:left;">D3DDDICOMPOSERECTS_AND</td>
  <td style="text-align:left;">Combine source and destination bits in an AND operation and copy to the destination.</td>
</tr>
<tr>
  <td style="text-align:left;">D3DDDICOMPOSERECTS_NEG</td>
  <td style="text-align:left;">Combine the negative of the source bits with the destination bits and copy to the destination. [Dest bit &amp; (~ Src bit)]</td>
</tr>
</tbody>
</table>
<h3><code>XOffset</code> [in]</h3>
<p>An offset to add to the <em>x</em>-coordinates of all of the destination rectangular areas. The offset can be negative, which might cause the resultant rectangles to be rejected or clipped.</p>
<h3><code>YOffset</code> [in]</h3>
<p>An offset to add to the <em>y</em>-coordinates of all of the destination rectangular areas. The offset can be negative, which might cause the resultant rectangles to be rejected or clipped.</p>
<h2>Remarks</h2>
<p>The vertex buffers that contain the composing instructions are created with D3DUSAGE_TEXTAPI usage. The following code defines the structures that are contained in the vertex buffer arrays. For more information about these structures, see the DirectX SDK documentation.</p>
<pre><code>struct D3DCOMPOSERECTSRCDESC {
<a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> X, Y;          // Coordinates of top-left corner
<a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> width, height; // Width and height of the glyph in bits
};
struct D3DCOMPOSERECTDSTDESC {
<a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> RectDescIndex; // Index of one of the D3DCOMPOSERECTSRCDESC structures in the vertex buffer represented by hSrcRectDescsVB
<a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> reserved;      // Use to align the struct and fields to good boundaries
<a href="short" title="typedef short SHORT;">SHORT</a> X, Y;            // Position in bits in the destination surface
};
</code></pre>
<h2>See also</h2>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_composerects">ComposeRects</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/windef/ns-windef-rect">RECT</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/ns-d3dumddi-_d3dddiarg_composerects">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3dumddi/ns-d3dumddi-_d3dddiarg_composerects.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
