<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NdisWriteEventLogEntry - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NdisWriteEventLogEntry - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NdisWriteEventLogEntry - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NDIS_STATUS NdisWriteEventLogEntry(
  [in]           PVOID       LogHandle,
  [in]           NDIS_STATUS EventCode,
  [in]           <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>       UniqueEventValue,
  [in]           <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>      NumStrings,
  [in, optional] PVOID       StringsList,
  [in]           <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>       DataSize,
  [in, optional] PVOID       Data
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndiswriteeventlogentry">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndiswriteeventlogentry.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ndis-ndiswriteeventlogentry)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="ndiswriteeventlogentry-function">NdisWriteEventLogEntry function</h1>

<h2 id="description">Description</h2>

<p><strong>NdisWriteEventLogEntry</strong> logs an event to the Win32 event log.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="loghandle-in"><code>LogHandle</code> [in]</h3>

<p>Pointer to the driver object of the protocol that is logging this event.</p>

<h3 id="eventcode-in"><code>EventCode</code> [in]</h3>

<p>Specifies the NDIS_STATUS_<em>XXX</em> code describing the event.</p>

<h3 id="uniqueeventvalue-in"><code>UniqueEventValue</code> [in]</h3>

<p>Identifies this instance of the error message.</p>

<h3 id="numstrings-in"><code>NumStrings</code> [in]</h3>

<p>Specifies the number of pointers to Unicode strings in the optional
<em>StringsList</em>. If
<em>StringsList</em> is <strong>NULL</strong>,
<em>NumStrings</em> must be zero.</p>

<h3 id="stringslist-in-optional"><code>StringsList</code> [in, optional]</h3>

<p>Either <strong>NULL</strong> or points to buffered Unicode strings. These strings, which describe the event, are
inserted into the Win32 event log and can be examined with the Win32 event viewer. Each string must be a
NUL-terminated Unicode string.</p>

<h3 id="datasize-in"><code>DataSize</code> [in]</h3>

<p>Specifies the number of bytes in the buffer for the binary data at
<em>Data</em> . If
<em>Data</em> is <strong>NULL</strong>,
<em>DataSize</em> must be zero.</p>

<h3 id="data-in-optional"><code>Data</code> [in, optional]</h3>

<p>Either <strong>NULL</strong> or points to buffered binary dump data that is useful for understanding the event.
This data can be examined with the Win32 event viewer.</p>

<h2 id="return-value">Return value</h2>

<p><strong>NdisWriteEventLogEntry</strong> can return one of the following values:</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>NDIS_STATUS_SUCCESS</strong></td>
  <td>The event was successfully logged.</td>
</tr>
<tr>
  <td><strong>NDIS_STATUS_BUFFER_TOO_SHORT</strong></td>
  <td>The optionally supplied Unicode strings and binary dump data exceed the maximum-allowed size (MAX_EVENT_LOG_DATA_SIZE).</td>
</tr>
<tr>
  <td><strong>NDIS_STATUS_RESOURCES</strong></td>
  <td>NDIS was unable to allocate memory for the I/O error log record.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p><strong>NdisWriteEventLogEntry</strong> allocates an I/O error log record, fills in the record with the supplied
information about the event, and then writes the record to the I/O error log file. A user can view the
logged event, including an optional description of the event and/or optional binary dump data, with the
Win32 event viewer.</p>

<p>The NT error-logging thread uses any strings supplied in the optional
<em>StringsList</em> to fill in messages written into the Win32 event log. Each string must be a
NUL-terminated Unicode string. The I/O manager assumes that the initial string is either the name of the
driver reporting the error or the name of the device that caused the error.</p>

<p>The Unicode strings supplied by the caller should be read from the registry or should be
language-independent (that is, the strings should be the same in any language -- for example, the string
could be a file name).</p>

<p>Caller-supplied dump data can be any binary data (such as register values) that is useful in
understanding the event. The caller does not have to pad the binary data. If necessary,
<strong>NdisWriteEventLogEntry</strong> pads the binary dump data so that the final data size is a multiple integral
of
<strong>sizeof</strong>(<a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>).</p>

<p>The system limits the total size of the optional data supplied to
<strong>NdisWriteEventLogEntry</strong>. The combined size of the strings list and the (possibly padded) binary
dump must be less than or equal to MAX_EVENT_LOG_DATA_SIZE.</p>

<p><strong>NdisWriteEventLogEntry</strong> is called only by protocol drivers. Miniport drivers should call
<strong><a href="ndiswriteerrorlogentry" title="VOID NdisWriteErrorLogEntry(&#10;  [in] NDIS_HANDLE     NdisAdapterHandle,&#10;  [in] NDIS_ERROR_CODE ErrorCode,&#10;  [in] ULONG           NumberOfErrorValues,&#10;       ...             &#10;);">NdisWriteErrorLogEntry</a></strong> to log events and errors.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_reset">MiniportResetEx</a></p>

<p><a rel="noopener" target="_blank" href="ndismsetminiportattributes">NdisMSetMiniportAttributes</a></p>

<p><a rel="noopener" target="_blank" href="ndiswriteerrorlogentry">NdisWriteErrorLogEntry</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndiswriteeventlogentry">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ndis/nf-ndis-ndiswriteeventlogentry.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
