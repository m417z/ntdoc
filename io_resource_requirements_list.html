<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="IO_RESOURCE_REQUIREMENTS_LIST - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>IO_RESOURCE_REQUIREMENTS_LIST - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github.ntdoc.min.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github-dark-dimmed.ntdoc.min.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            IO_RESOURCE_REQUIREMENTS_LIST - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header language-cpp">// miniport.h

</span><span class="ntdoc-code-intro language-cpp"></span><span class="ntdoc-code-body language-cpp">typedef struct _IO_RESOURCE_REQUIREMENTS_LIST {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>            ListSize;
  <a href="interface_type" title="typedef enum _INTERFACE_TYPE&#10;{&#10;    InterfaceTypeUndefined = -1,&#10;    Internal = 0,&#10;    Isa = 1,&#10;    Eisa = 2,&#10;    MicroChannel = 3,&#10;    TurboChannel = 4,&#10;    PCIBus = 5,&#10;    VMEBus = 6,&#10;    NuBus = 7,&#10;    PCMCIABus = 8,&#10;    CBus = 9,&#10;    MPIBus = 10,&#10;    MPSABus = 11,&#10;    ProcessorInternal = 12,&#10;    InternalPowerBus = 13,&#10;    PNPISABus = 14,&#10;    PNPBus = 15,&#10;    Vmcs = 16,&#10;...">INTERFACE_TYPE</a>   InterfaceType;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>            BusNumber;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>            SlotNumber;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>            Reserved[3];
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>            AlternativeLists;
  <a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a> List[1];
} IO_RESOURCE_REQUIREMENTS_LIST, *PIO_RESOURCE_REQUIREMENTS_LIST;</span><span class="ntdoc-code-footer language-cpp"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/miniport/ns-miniport-_io_resource_requirements_list">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header language-cpp">// wdm.h

</span><span class="ntdoc-code-intro language-cpp"></span><span class="ntdoc-code-body language-cpp">typedef struct _IO_RESOURCE_REQUIREMENTS_LIST {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>            ListSize;
  <a href="interface_type" title="typedef enum _INTERFACE_TYPE&#10;{&#10;    InterfaceTypeUndefined = -1,&#10;    Internal = 0,&#10;    Isa = 1,&#10;    Eisa = 2,&#10;    MicroChannel = 3,&#10;    TurboChannel = 4,&#10;    PCIBus = 5,&#10;    VMEBus = 6,&#10;    NuBus = 7,&#10;    PCMCIABus = 8,&#10;    CBus = 9,&#10;    MPIBus = 10,&#10;    MPSABus = 11,&#10;    ProcessorInternal = 12,&#10;    InternalPowerBus = 13,&#10;    PNPISABus = 14,&#10;    PNPBus = 15,&#10;    Vmcs = 16,&#10;...">INTERFACE_TYPE</a>   InterfaceType;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>            BusNumber;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>            SlotNumber;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>            Reserved[3];
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>            AlternativeLists;
  <a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a> List[1];
} IO_RESOURCE_REQUIREMENTS_LIST, *PIO_RESOURCE_REQUIREMENTS_LIST;</span><span class="ntdoc-code-footer language-cpp"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_io_resource_requirements_list">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/io_resource_requirements_list.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-miniport-_io_resource_requirements_list)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2>Description</h2>
<p>The <strong>IO_RESOURCE_REQUIREMENTS_LIST</strong> structure describes sets of resource configurations that can be used by a device. Each configuration represents a range of raw resources, of various types, that can be used by a device.</p>
<h2>Members</h2>
<h3><code>ListSize</code></h3>
<p>The total number of bytes that constitute the <strong>IO_RESOURCE_REQUIREMENTS_LIST</strong> structure, its <a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a> array, and the latter's <a href="io_resource_descriptor" title="typedef struct _IO_RESOURCE_DESCRIPTOR {&#10;  UCHAR  Option;&#10;  UCHAR  Type;&#10;  UCHAR  ShareDisposition;&#10;  UCHAR  Spare1;&#10;  USHORT Flags;&#10;  USHORT Spare2;&#10;  union {&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Port;&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Memory;&#10;...">IO_RESOURCE_DESCRIPTOR</a> array.</p>
<h3><code>InterfaceType</code></h3>
<p>Specifies an interface type. This must be one of the types defined by <a href="interface_type" title="typedef enum _INTERFACE_TYPE&#10;{&#10;    InterfaceTypeUndefined = -1,&#10;    Internal = 0,&#10;    Isa = 1,&#10;    Eisa = 2,&#10;    MicroChannel = 3,&#10;    TurboChannel = 4,&#10;    PCIBus = 5,&#10;    VMEBus = 6,&#10;    NuBus = 7,&#10;    PCMCIABus = 8,&#10;    CBus = 9,&#10;    MPIBus = 10,&#10;    MPSABus = 11,&#10;    ProcessorInternal = 12,&#10;    InternalPowerBus = 13,&#10;    PNPISABus = 14,&#10;    PNPBus = 15,&#10;    Vmcs = 16,&#10;...">INTERFACE_TYPE</a>, in Wdm.h or Ntddk.h. (Not used by WDM drivers.)</p>
<h3><code>BusNumber</code></h3>
<p>A system-assigned, zero-based bus number. (Not used by WDM drivers.)</p>
<h3><code>SlotNumber</code></h3>
<p>A system slot number. (Not used by WDM drivers.)</p>
<h3><code>Reserved</code></h3>
<p>Not used.</p>
<h3><code>AlternativeLists</code></h3>
<p>The number of alternative lists (or configurations) of hardware resources that are described by this <strong>IO_RESOURCE_REQUIREMENTS_LIST</strong> structure. The <strong>List</strong> member is the header for the first alternative list.</p>
<h3><code>List</code></h3>
<p>The <strong><a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a></strong> structure that serves as the header for the first alternative list of hardware resources. If the <strong>IO_RESOURCE_REQUIREMENTS_LIST</strong> structure describes more than one alternative list, the second alternative list immediately follows the first alternative list in memory, and so on. The size of each alternative list depends on the length of the <strong><a href="io_resource_descriptor" title="typedef struct _IO_RESOURCE_DESCRIPTOR {&#10;  UCHAR  Option;&#10;  UCHAR  Type;&#10;  UCHAR  ShareDisposition;&#10;  UCHAR  Spare1;&#10;  USHORT Flags;&#10;  USHORT Spare2;&#10;  union {&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Port;&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Memory;&#10;...">IO_RESOURCE_DESCRIPTOR</a></strong> array that it contains. For more information, see the following Remarks section.</p>
<h2>Remarks</h2>
<p>This structure is used by the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mn-filter-resource-requirements">IRP_MN_FILTER_RESOURCE_REQUIREMENTS</a> and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mn-query-resource-requirements">IRP_MN_QUERY_RESOURCE_REQUIREMENTS</a> IRPs to describe one or more alternative configurations of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/hardware-resources">hardware resources</a>.</p>
<p>The <strong>IO_RESOURCE_REQUIREMENTS_LIST</strong> structure is a header for a larger data structure, of variable size, that specifies one or more alternative lists of resources. All of the data in this larger structure occupies a contiguous block of memory, whose size is specified by the <strong>ListSize</strong> member. Each alternative list occupies a subblock within the larger block.</p>
<p>Each alternative list begins with an <strong><a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a></strong> structure, which serves as a header for an array of <strong><a href="io_resource_descriptor" title="typedef struct _IO_RESOURCE_DESCRIPTOR {&#10;  UCHAR  Option;&#10;  UCHAR  Type;&#10;  UCHAR  ShareDisposition;&#10;  UCHAR  Spare1;&#10;  USHORT Flags;&#10;  USHORT Spare2;&#10;  union {&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Port;&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Memory;&#10;...">IO_RESOURCE_DESCRIPTOR</a></strong> structures. The length of this array determines the size of the list, which can vary from one alternative list to the next. Driver code can use pointer arithmetic to step from one alternative list to the next. For example, if a parameter named <em>list</em> is a pointer to the <strong><a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a></strong> structure at the start of one alternative list, <em>list</em> can be updated to point to the start of the next list as follows:</p>
<pre><code class="language-cpp">list = (<a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">PIO_RESOURCE_LIST</a>)(list-&gt;Descriptors + list-&gt;Count);
</code></pre>
<p>In this example, <code>list-&gt;Descriptors</code> is a pointer to the start of the <strong><a href="io_resource_descriptor" title="typedef struct _IO_RESOURCE_DESCRIPTOR {&#10;  UCHAR  Option;&#10;  UCHAR  Type;&#10;  UCHAR  ShareDisposition;&#10;  UCHAR  Spare1;&#10;  USHORT Flags;&#10;  USHORT Spare2;&#10;  union {&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Port;&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Memory;&#10;...">IO_RESOURCE_DESCRIPTOR</a></strong> array, and <code>list-&gt;Count</code> is the number of elements in the array. For more information about the <strong>Descriptors</strong> and <strong>Count</strong> members, see <strong><a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a></strong>.</p>
<h3>Examples</h3>
<p>If a driver contains a handler for an <strong><a href="irp_mn_filter_resource_requirements" title="#define IRP_MN_FILTER_RESOURCE_REQUIREMENTS 0x0D">IRP_MN_FILTER_RESOURCE_REQUIREMENTS</a></strong> <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a>, the handler typically walks the resource list that is pointed to by the <strong>IoStatus.Information</strong> field in the <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a>. The following code example contains a function—named FilterResources—that is called in the handler to walk the list. This function either verifies that a particular resource is specified in the list, or changes the resource requirements in the list without changing the size of the list. (A function that changes the size of the list would need to allocate a buffer for the updated list, write the list to this buffer, update the <strong>IoStatus.Information</strong> field in the <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a> to point to the updated list, and free the buffer that contains the original list.)</p>
<p>The FilterResources function returns <strong>TRUE</strong> (probably from the <strong>switch</strong> statement, although the details are omitted to simplify the code example) if it finds the resource that it is looking for in the list, or if it makes a change to the list that does not change the size of the list. Otherwise, it returns <strong>FALSE</strong>.</p>
<pre><code class="language-cpp">/* Modify the resource list in place (without changing its size). */

BOOLEAN FilterResources(PIO_RESOURCE_REQUIREMENTS_LIST reqlist)
{
    <a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">PIO_RESOURCE_LIST</a> list;

    list = reqlist-&gt;List;

    for (int ix = 0; ix &lt; reqlist-&gt;AlternativeLists; ++ix)
    {
        /* Process resources in <a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a> block number ix. */

        for (int jx = 0; jx &lt; list-&gt;Count; ++jx)
        {
            <a href="io_resource_descriptor" title="typedef struct _IO_RESOURCE_DESCRIPTOR {&#10;  UCHAR  Option;&#10;  UCHAR  Type;&#10;  UCHAR  ShareDisposition;&#10;  UCHAR  Spare1;&#10;  USHORT Flags;&#10;  USHORT Spare2;&#10;  union {&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Port;&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Memory;&#10;...">PIO_RESOURCE_DESCRIPTOR</a> desc;

            desc = list-&gt;Descriptors + jx;

            switch (desc-&gt;Type)
            {
               /* Process element jx in Descriptors array. */

               ...

            }
        }

        /* Advance to next <a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a> block in memory. */

        list = (<a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">PIO_RESOURCE_LIST</a>)(list-&gt;Descriptors + list-&gt;Count);
    }

    return FALSE;
}
</code></pre>
<h2>See also</h2>
<p><strong><a href="io_resource_descriptor" title="typedef struct _IO_RESOURCE_DESCRIPTOR {&#10;  UCHAR  Option;&#10;  UCHAR  Type;&#10;  UCHAR  ShareDisposition;&#10;  UCHAR  Spare1;&#10;  USHORT Flags;&#10;  USHORT Spare2;&#10;  union {&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Port;&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Memory;&#10;...">IO_RESOURCE_DESCRIPTOR</a></strong></p>
<p><strong><a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a></strong></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mn-filter-resource-requirements">IRP_MN_FILTER_RESOURCE_REQUIREMENTS</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mn-query-resource-requirements">IRP_MN_QUERY_RESOURCE_REQUIREMENTS</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/miniport/ns-miniport-_io_resource_requirements_list">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/miniport/ns-miniport-_io_resource_requirements_list.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-wdm-_io_resource_requirements_list)</h1>
</div>
<div class="ntdoc-description">
<h2>Description</h2>
<p>The <strong>IO_RESOURCE_REQUIREMENTS_LIST</strong> structure describes sets of resource configurations that can be used by a device. Each configuration represents a range of raw resources, of various types, that can be used by a device.</p>
<h2>Members</h2>
<h3><code>ListSize</code></h3>
<p>The total number of bytes that constitute the <strong>IO_RESOURCE_REQUIREMENTS_LIST</strong> structure, its <a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a> array, and the latter's <a href="io_resource_descriptor" title="typedef struct _IO_RESOURCE_DESCRIPTOR {&#10;  UCHAR  Option;&#10;  UCHAR  Type;&#10;  UCHAR  ShareDisposition;&#10;  UCHAR  Spare1;&#10;  USHORT Flags;&#10;  USHORT Spare2;&#10;  union {&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Port;&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Memory;&#10;...">IO_RESOURCE_DESCRIPTOR</a> array.</p>
<h3><code>InterfaceType</code></h3>
<p>Specifies an interface type. This must be one of the types defined by <a href="interface_type" title="typedef enum _INTERFACE_TYPE&#10;{&#10;    InterfaceTypeUndefined = -1,&#10;    Internal = 0,&#10;    Isa = 1,&#10;    Eisa = 2,&#10;    MicroChannel = 3,&#10;    TurboChannel = 4,&#10;    PCIBus = 5,&#10;    VMEBus = 6,&#10;    NuBus = 7,&#10;    PCMCIABus = 8,&#10;    CBus = 9,&#10;    MPIBus = 10,&#10;    MPSABus = 11,&#10;    ProcessorInternal = 12,&#10;    InternalPowerBus = 13,&#10;    PNPISABus = 14,&#10;    PNPBus = 15,&#10;    Vmcs = 16,&#10;...">INTERFACE_TYPE</a>, in Wdm.h or Ntddk.h. (Not used by WDM drivers.)</p>
<h3><code>BusNumber</code></h3>
<p>A system-assigned, zero-based bus number. (Not used by WDM drivers.)</p>
<h3><code>SlotNumber</code></h3>
<p>A system slot number. (Not used by WDM drivers.)</p>
<h3><code>Reserved</code></h3>
<p>Reserved.</p>
<h3><code>AlternativeLists</code></h3>
<p>The number of alternative lists (or configurations) of hardware resources that are described by this <strong>IO_RESOURCE_REQUIREMENTS_LIST</strong> structure. The <strong>List</strong> member is the header for the first alternative list.</p>
<h3><code>List</code></h3>
<p>The <strong><a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a></strong> structure that serves as the header for the first alternative list of hardware resources. If the <strong>IO_RESOURCE_REQUIREMENTS_LIST</strong> structure describes more than one alternative list, the second alternative list immediately follows the first alternative list in memory, and so on. The size of each alternative list depends on the length of the <strong><a href="io_resource_descriptor" title="typedef struct _IO_RESOURCE_DESCRIPTOR {&#10;  UCHAR  Option;&#10;  UCHAR  Type;&#10;  UCHAR  ShareDisposition;&#10;  UCHAR  Spare1;&#10;  USHORT Flags;&#10;  USHORT Spare2;&#10;  union {&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Port;&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Memory;&#10;...">IO_RESOURCE_DESCRIPTOR</a></strong> array that it contains. For more information, see the following Remarks section.</p>
<h2>Remarks</h2>
<p>This structure is used by the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mn-filter-resource-requirements">IRP_MN_FILTER_RESOURCE_REQUIREMENTS</a> and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mn-query-resource-requirements">IRP_MN_QUERY_RESOURCE_REQUIREMENTS</a> IRPs to describe one or more alternative configurations of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/hardware-resources">hardware resources</a>.</p>
<p>The <strong>IO_RESOURCE_REQUIREMENTS_LIST</strong> structure is a header for a larger data structure, of variable size, that specifies one or more alternative lists of resources. All of the data in this larger structure occupies a contiguous block of memory, whose size is specified by the <strong>ListSize</strong> member. Each alternative list occupies a subblock within the larger block.</p>
<p>Each alternative list begins with an <strong><a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a></strong> structure, which serves as a header for an array of <strong><a href="io_resource_descriptor" title="typedef struct _IO_RESOURCE_DESCRIPTOR {&#10;  UCHAR  Option;&#10;  UCHAR  Type;&#10;  UCHAR  ShareDisposition;&#10;  UCHAR  Spare1;&#10;  USHORT Flags;&#10;  USHORT Spare2;&#10;  union {&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Port;&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Memory;&#10;...">IO_RESOURCE_DESCRIPTOR</a></strong> structures. The length of this array determines the size of the list, which can vary from one alternative list to the next. Driver code can use pointer arithmetic to step from one alternative list to the next. For example, if a parameter named <em>list</em> is a pointer to the <strong><a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a></strong> structure at the start of one alternative list, <em>list</em> can be updated to point to the start of the next list as follows:</p>
<pre><code class="language-cpp">list = (<a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">PIO_RESOURCE_LIST</a>)(list-&gt;Descriptors + list-&gt;Count);
</code></pre>
<p>In this example, <code>list-&gt;Descriptors</code> is a pointer to the start of the <strong><a href="io_resource_descriptor" title="typedef struct _IO_RESOURCE_DESCRIPTOR {&#10;  UCHAR  Option;&#10;  UCHAR  Type;&#10;  UCHAR  ShareDisposition;&#10;  UCHAR  Spare1;&#10;  USHORT Flags;&#10;  USHORT Spare2;&#10;  union {&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Port;&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Memory;&#10;...">IO_RESOURCE_DESCRIPTOR</a></strong> array, and <code>list-&gt;Count</code> is the number of elements in the array. For more information about the <strong>Descriptors</strong> and <strong>Count</strong> members, see <a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a>.</p>
<h3>Examples</h3>
<p>If a driver contains a handler for an <strong><a href="irp_mn_filter_resource_requirements" title="#define IRP_MN_FILTER_RESOURCE_REQUIREMENTS 0x0D">IRP_MN_FILTER_RESOURCE_REQUIREMENTS</a></strong> <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a>, the handler typically walks the resource list that is pointed to by the <strong>IoStatus.Information</strong> field in the <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a>. The following code example contains a function—named FilterResources—that is called in the handler to walk the list. This function either verifies that a particular resource is specified in the list, or changes the resource requirements in the list without changing the size of the list. (A function that changes the size of the list would need to allocate a buffer for the updated list, write the list to this buffer, update the <strong>IoStatus.Information</strong> field in the <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a> to point to the updated list, and free the buffer that contains the original list.)</p>
<p>The FilterResources function returns <strong>TRUE</strong> (probably from the <strong>switch</strong> statement, although the details are omitted to simplify the code example) if it finds the resource that it is looking for in the list, or if it makes a change to the list that does not change the size of the list. Otherwise, it returns <strong>FALSE</strong>.</p>
<pre><code class="language-cpp">/* Modify the resource list in place (without changing its size). */

BOOLEAN FilterResources(PIO_RESOURCE_REQUIREMENTS_LIST reqlist)
{
    <a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">PIO_RESOURCE_LIST</a> list;

    list = reqlist-&gt;List;

    for (int ix = 0; ix &lt; reqlist-&gt;AlternativeLists; ++ix)
    {
        /* Process resources in <a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a> block number ix. */

        for (int jx = 0; jx &lt; list-&gt;Count; ++jx)
        {
            <a href="io_resource_descriptor" title="typedef struct _IO_RESOURCE_DESCRIPTOR {&#10;  UCHAR  Option;&#10;  UCHAR  Type;&#10;  UCHAR  ShareDisposition;&#10;  UCHAR  Spare1;&#10;  USHORT Flags;&#10;  USHORT Spare2;&#10;  union {&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Port;&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Memory;&#10;...">PIO_RESOURCE_DESCRIPTOR</a> desc;

            desc = list-&gt;Descriptors + jx;

            switch (desc-&gt;Type)
            {
               /* Process element jx in Descriptors array. */

               ...

            }
        }

        /* Advance to next <a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a> block in memory. */

        list = (<a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">PIO_RESOURCE_LIST</a>)(list-&gt;Descriptors + list-&gt;Count);
    }

    return FALSE;
}
</code></pre>
<h2>See also</h2>
<p><strong><a href="io_resource_descriptor" title="typedef struct _IO_RESOURCE_DESCRIPTOR {&#10;  UCHAR  Option;&#10;  UCHAR  Type;&#10;  UCHAR  ShareDisposition;&#10;  UCHAR  Spare1;&#10;  USHORT Flags;&#10;  USHORT Spare2;&#10;  union {&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Port;&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Memory;&#10;...">IO_RESOURCE_DESCRIPTOR</a></strong></p>
<p><strong><a href="io_resource_list" title="typedef struct _IO_RESOURCE_LIST {&#10;  USHORT                 Version;&#10;  USHORT                 Revision;&#10;  ULONG                  Count;&#10;  IO_RESOURCE_DESCRIPTOR Descriptors[1];&#10;} IO_RESOURCE_LIST, *PIO_RESOURCE_LIST;">IO_RESOURCE_LIST</a></strong></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mn-filter-resource-requirements">IRP_MN_FILTER_RESOURCE_REQUIREMENTS</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mn-query-resource-requirements">IRP_MN_QUERY_RESOURCE_REQUIREMENTS</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_io_resource_requirements_list">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/ns-wdm-_io_resource_requirements_list.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script src="modules/highlight.js/highlight.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
