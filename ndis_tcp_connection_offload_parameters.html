<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NDIS_TCP_CONNECTION_OFFLOAD_PARAMETERS - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NDIS_TCP_CONNECTION_OFFLOAD_PARAMETERS - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NDIS_TCP_CONNECTION_OFFLOAD_PARAMETERS - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ndischimney.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _NDIS_TCP_CONNECTION_OFFLOAD_PARAMETERS {
  <a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a>         Header;
  <a href="ndis_offload_encapsulation" title="typedef struct _NDIS_OFFLOAD_ENCAPSULATION {&#10;  NDIS_OBJECT_HEADER Header;&#10;  struct {&#10;    ULONG Enabled;&#10;    ULONG EncapsulationType;&#10;    ULONG HeaderSize;&#10;  } IPv4;&#10;  struct {&#10;    ULONG Enabled;&#10;    ULONG EncapsulationType;&#10;    ULONG HeaderSize;&#10;  } IPv6;&#10;} NDIS_OFFLOAD_ENCAPSULATION, *PNDIS_OFFLOAD_ENCAPSULATION;">NDIS_OFFLOAD_ENCAPSULATION</a> Encapsulation;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                      TicksPerSecond;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>                      TcpAckFrequency;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>                      TcpDelayedAckTicks;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>                      TcpMaximumRetransmissions;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>                      TcpDoubtReachabilityRetransmissions;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                      TcpSwsPreventionTicks;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                      TcpDuplicateAckThreshold;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                      TcpPushTicks;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                      NceStaleTicks;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                      CongestionAlgorithm;
} NDIS_TCP_CONNECTION_OFFLOAD_PARAMETERS, *PNDIS_TCP_CONNECTION_OFFLOAD_PARAMETERS;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndischimney/ns-ndischimney-_ndis_tcp_connection_offload_parameters">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndis_tcp_connection_offload_parameters.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ndischimney-_ndis_tcp_connection_offload_parameters)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_ndis_tcp_connection_offload_parameters-structure">_NDIS_TCP_CONNECTION_OFFLOAD_PARAMETERS structure</h1>

<h2 id="description">Description</h2>

<p>[The TCP chimney offload feature is deprecated and should not be used.]</p>

<p>The NDIS_TCP_CONNECTION_OFFLOAD_PARAMETERS structure provides TCP chimney offload information in the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/windows/embedded/gg158102(v=winembedded.80)">OID_TCP_CONNECTION_OFFLOAD_PARAMETERS</a> OID.</p>

<h2 id="members">Members</h2>

<h3 id="header"><code>Header</code></h3>

<p>The
<a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a> structure for the
NDIS_TCP_CONNECTION_OFFLOAD_PARAMETERS structure. Set the
<strong>Type</strong> member of the structure that
<strong>Header</strong> specifies to
<strong>NDIS_OBJECT_TYPE_DEFAULT</strong>, the
<strong>Revision</strong> member to
<strong>NDIS_TCP_CONNECTION_OFFLOAD_PARAMETERS_ 1</strong>, and the
<strong>Size</strong> member to
<code>sizeof(NDIS_TCP_CONNECTION_OFFLOAD_PARAMETERS)</code>.</p>

<h3 id="encapsulation"><code>Encapsulation</code></h3>

<p>An
<a href="ndis_offload_encapsulation" title="typedef struct _NDIS_OFFLOAD_ENCAPSULATION {&#10;  NDIS_OBJECT_HEADER Header;&#10;  struct {&#10;    ULONG Enabled;&#10;    ULONG EncapsulationType;&#10;    ULONG HeaderSize;&#10;  } IPv4;&#10;  struct {&#10;    ULONG Enabled;&#10;    ULONG EncapsulationType;&#10;    ULONG HeaderSize;&#10;  } IPv6;&#10;} NDIS_OFFLOAD_ENCAPSULATION, *PNDIS_OFFLOAD_ENCAPSULATION;">NDIS_OFFLOAD_ENCAPSULATION</a> structure that contains encapsulation settings for TCP chimney
offload.</p>

<h3 id="tickspersecond"><code>TicksPerSecond</code></h3>

<p>A <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> value that the TCP/IP driver stack sets to specify how many ticks of the host's clock
equal one second. The default value is 1000 (that is, 1 tick = 1 millisecond). An offload target must
support this member.</p>

<h3 id="tcpackfrequency"><code>TcpAckFrequency</code></h3>

<p>A <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> value that the TCP/IP driver stack sets to specify the maximum number of segments that the
offload target can receive before the target sends an ACK. An offload target must support this
member.</p>

<h3 id="tcpdelayedackticks"><code>TcpDelayedAckTicks</code></h3>

<p>A <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> value that the TCP/IP driver stack sets to specify how many ticks, starting from the
reception of a segment, that the offload target should wait for additional receive segments before the
target sends an ACK. An offload target uses this value to initialize its delayed-ACK timer. An offload
target must support this member.</p>

<h3 id="tcpmaximumretransmissions"><code>TcpMaximumRetransmissions</code></h3>

<p>A <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> value that the TCP/IP driver stack sets to specify the maximum number of times that the
offload target should retransmit a segment on a TCP connection. When the retransmit counter for a TCP
connection exceeds this limit, the offload target can call the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndischimney/nc-ndischimney-ndis_tcp_offload_event_indicate">NdisTcpOffloadEventHandler</a> function with an
<strong>EventType</strong> parameter of
<strong>TcpIndicateRetrieve</strong> to request that the TCP/IP driver stack terminate the
offload of the connection. An offload target must support this member.</p>

<h3 id="tcpdoubtreachabilityretransmissions"><code>TcpDoubtReachabilityRetransmissions</code></h3>

<p>A <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> value that the TCP/IP driver stack sets to specify the maximum number of times that the
offload target should retransmit a segment before the target indicates to the TCP/IP driver stack that
the reachability of a neighbor is in doubt. For more information about this indication, see
<a href="ndismoffloadeventindicate" title="VOID NdisMOffloadEventIndicate(&#10;  [in] IN NDIS_HANDLE                       NdisMiniportHandle,&#10;  [in] IN PNDIS_MINIPORT_OFFLOAD_BLOCK_LIST OffloadBlockList,&#10;  [in] IN ULONG                             IndicationCode&#10;);">NdisMOffloadEventIndicate</a>. An
offload target should support this member.</p>

<h3 id="tcpswspreventionticks"><code>TcpSwsPreventionTicks</code></h3>

<p>A <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> value that the TCP/IP driver stack sets to specify the number of ticks for the offload
target's silly window syndrome (SWS) send and receive timers. When the SWS send timer times out, the
offload target sends a partial segment. When the SWS receive timer times out, the offload target sends a
window update. An offload target should support this member.</p>

<h3 id="tcpduplicateackthreshold"><code>TcpDuplicateAckThreshold</code></h3>

<p>A <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> value that the TCP/IP driver stack sets to specify the number of duplicate acknowledgments
that the offload target must receive before the target performs a fast retransmission. An offload target
must support this member.</p>

<h3 id="tcppushticks"><code>TcpPushTicks</code></h3>

<p>A <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> value that the TCP/IP driver stack sets to specify the number of ticks that an offload
target must wait before the target completes a pre-posted receive buffer. This interval starts
immediately after the offload target places the first byte in the pre-posted receive buffer. An offload
target uses this value to initialize its push timer. An offload target must support this member.</p>

<h3 id="ncestaleticks"><code>NceStaleTicks</code></h3>

<p>A <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> value that the TCP/IP driver stack sets to indicate the number of ticks of inactivity that
make a neighbor state object stale. An offload target must support this member.</p>

<h3 id="congestionalgorithm"><code>CongestionAlgorithm</code></h3>

<p>Reserved for future use.</p>

<p>If you are an independent hardware vendor (IHV) and you want to implement nondefault congestion control algorithms, for example Compound TCP, contact Microsoft at <a rel="noopener" target="_blank" href="mailto:offloadt@microsoft.com">External TCP Offload Triage</a>.</p>

<h2 id="remarks">Remarks</h2>

<p>In NDIS 6.0 and later versions, the NDIS_TCP_CONNECTION_OFFLOAD_PARAMETERS structure specifies the
current or requested parameters that a miniport adapter provides for TCP chimney offload.</p>

<p>To specify various offload parameter settings, NDIS and overlying drivers supply an
NDIS_TCP_CONNECTION_OFFLOAD_PARAMETERS structure when they set the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/windows/embedded/gg158102(v=winembedded.80)">OID_TCP_CONNECTION_OFFLOAD_PARAMETERS</a> OID.</p>

<p>To obtain the current settings of various offload parameters, NDIS and overlying drivers query
OID_TCP_CONNECTION_OFFLOAD_PARAMETERS. The miniport driver returns the current settings in the
NDIS_TCP_CONNECTION_OFFLOAD_PARAMETERS structure.</p>

<p>The
<strong>Encapsulation</strong> member of NDIS_TCP_CONNECTION_OFFLOAD_PARAMETERS defines the TCP
chimney offload encapsulation settings for the miniport adapter. For more information, see the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/full-tcp-offload">NDIS 6.0 TCP chimney offload
documentation</a>.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/full-tcp-offload">Full TCP Offload</a></p>

<p><a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a></p>

<p><a href="ndis_offload_encapsulation" title="typedef struct _NDIS_OFFLOAD_ENCAPSULATION {&#10;  NDIS_OBJECT_HEADER Header;&#10;  struct {&#10;    ULONG Enabled;&#10;    ULONG EncapsulationType;&#10;    ULONG HeaderSize;&#10;  } IPv4;&#10;  struct {&#10;    ULONG Enabled;&#10;    ULONG EncapsulationType;&#10;    ULONG HeaderSize;&#10;  } IPv6;&#10;} NDIS_OFFLOAD_ENCAPSULATION, *PNDIS_OFFLOAD_ENCAPSULATION;">NDIS_OFFLOAD_ENCAPSULATION</a></p>

<p><a href="ndismoffloadeventindicate" title="VOID NdisMOffloadEventIndicate(&#10;  [in] IN NDIS_HANDLE                       NdisMiniportHandle,&#10;  [in] IN PNDIS_MINIPORT_OFFLOAD_BLOCK_LIST OffloadBlockList,&#10;  [in] IN ULONG                             IndicationCode&#10;);">NdisMOffloadEventIndicate</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndischimney/nc-ndischimney-ndis_tcp_offload_event_indicate">NdisTcpOffloadEventHandler</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/windows/embedded/gg158102(v=winembedded.80)">OID_TCP_CONNECTION_OFFLOAD_PARAMETERS</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndischimney/ns-ndischimney-_ndis_tcp_connection_offload_parameters">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ndischimney/ns-ndischimney-_ndis_tcp_connection_offload_parameters.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
