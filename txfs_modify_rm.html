<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="TXFS_MODIFY_RM - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>TXFS_MODIFY_RM - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            TXFS_MODIFY_RM - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// winioctl.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _TXFS_MODIFY_RM {
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>     Flags;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>     LogContainerCountMax;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>     LogContainerCountMin;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>     LogContainerCount;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>     LogGrowthIncrement;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>     LogAutoShrinkPercentage;
  <a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a> Reserved;
  <a href="word" title="typedef unsigned short WORD;">WORD</a>      LoggingMode;
} TXFS_MODIFY_RM, *PTXFS_MODIFY_RM;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ns-winioctl-txfs_modify_rm">View the official Win32 API reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/txfs_modify_rm.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Win32 API reference (ns-winioctl-txfs_modify_rm)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="txfs_modify_rm-structure">TXFS_MODIFY_RM structure</h1>

<h2 id="description">Description</h2>

<p>[Microsoft strongly recommends developers utilize alternative means to achieve your
applicationâ€™s needs. Many scenarios that TxF was developed for can be achieved through simpler and more readily
available techniques. Furthermore, TxF may not be available in future versions of Microsoft Windows. For more
information, and alternatives to TxF, please see
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/FileIO/deprecation-of-txf">Alternatives to using Transactional NTFS</a>.]</p>

<p>Contains the information required when modifying log parameters and logging mode for a secondary
resource manager.</p>

<h2 id="members">Members</h2>

<h3 id="flags"><code>Flags</code></h3>

<p>The log parameters to be set.</p>

<p>This member can be one or more of the following values.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>TXFS_RM_FLAG_LOGGING_MODE</strong><br><br>0x00000001</td>
  <td>If this flag is set, the <strong>LoggingMode</strong> member of this structure is being used. If the flag is not set, the <strong>LoggingMode</strong> member is ignored.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_RENAME_RM</strong><br><br>0x00000002</td>
  <td>If this flag is set, the RM is instructed to rename itself (creating a new <strong>GUID</strong>).</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_LOG_CONTAINER_COUNT_MAX</strong><br><br>0x00000004</td>
  <td>If this flag is set, the <strong>LogContainerCountMax</strong> member is being used. If the flag is not set, the <strong>LogContainerCountMax</strong> member is ignored. This flag is mutually exclusive with <strong>TXFS_RM_FLAG_LOG_NO_CONTAINER_COUNT_MIN</strong>.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_LOG_CONTAINER_COUNT_MIN</strong><br><br>0x00000008</td>
  <td>If this flag is set, the <strong>LogContainerCountMin</strong> member is being used. If the flag is not set, the <strong>LogContainerCountMin</strong> member is ignored. This flag is mutually exclusive with <strong>TXFS_RM_FLAG_LOG_NO_CONTAINER_COUNT_MAX</strong>.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_LOG_GROWTH_INCREMENT_NUM_CONTAINERS</strong><br><br>0x00000010</td>
  <td>If this flag is set, the <strong>LogGrowthIncrement</strong> member is being used. If the flag is not set, the <strong>LogGrowthIncrement</strong> member is ignored. This flag indicates that the log should grow by the number of containers specified in the <strong>LogGrowthIncrement</strong> member. This flag is mutually exclusive with <strong>TXFS_RM_FLAG_LOG_GROWTH_INCREMENT_PERCENT</strong>.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_LOG_GROWTH_INCREMENT_PERCENT</strong><br><br>0x00000020</td>
  <td>If this flag is set, the <strong>LogGrowthIncrement</strong> member is being used. If the flag is not set, the <strong>LogGrowthIncrement</strong> member is ignored. This flag indicates that the log should grow by the percentage of the log size specified in the <strong>LogGrowthIncrement</strong> member. This flag is mutually exclusive with <strong>TXFS_RM_FLAG_LOG_GROWTH_INCREMENT_NUM_CONTAINERS</strong>.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_LOG_AUTO_SHRINK_PERCENTAGE</strong><br><br>0x00000040</td>
  <td>If this flag is set, the <strong>LogAutoShrinkPercentage</strong> member is being used. If the flag is not set, the <strong>LogAutoShrinkPercentage</strong> is ignored.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_LOG_NO_CONTAINER_COUNT_MAX</strong><br><br>0x00000080</td>
  <td>If this flag is set, the RM is instructed to allow its log to grow without bounds. This flag is mutually exclusive with <strong>TXFS_RM_FLAG_LOG_NO_CONTAINER_COUNT_MIN</strong>.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_LOG_NO_CONTAINER_COUNT_MIN</strong><br><br>0x00000100</td>
  <td>If this flag is set, the RM is instructed to allow its log to shrink the log to only two containers. This flag is mutually exclusive with <strong>TXFS_RM_FLAG_LOG_NO_CONTAINER_COUNT_MAX</strong>.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_GROW_LOG</strong><br><br>0x00000400</td>
  <td>If this flag is set, the log is instructed to immediately increase its size to the size specified in <strong>LogContainerCount</strong>. If the flag is not set, the <strong>LogContainerCount</strong> is ignored.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_SHRINK_LOG</strong><br><br>0x00000800</td>
  <td>If this flag is set, the log is instructed to immediately decrease its size to the size specified in <strong>LogContainerCount</strong>. If this flag and <strong>TXFS_RM_FLAG_ENFORCE_MINIMUM_SIZE</strong> are set, the log is instructed to shrink to its minimum allowable size, and <strong>LogContainerCount</strong> is ignored.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_ENFORCE_MINIMUM_SIZE</strong><br><br>0x00001000</td>
  <td>If this flag and <strong>TXFS_RM_FLAG_SHRINK_LOG</strong> are set, the log is instructed to shrink to its minimum allowable size, and <strong>LogContainerCount</strong> is ignored. If this flag is set, the <strong>TXFS_RM_FLAG_SHRINK_LOG</strong> must be set.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_PRESERVE_CHANGES</strong><br><br>0x00002000</td>
  <td>If this flag is set, the log is instructed to preserve the changes on disk. If this flag is not set, any changes made are temporary (that is, until the RM is shut down and restarted).</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_RESET_RM_AT_NEXT_START</strong><br><br>0x00004000</td>
  <td>This flag is only valid for default RMs, not secondary RMs. If this flag is set, the RM is instructed to reset itself the next time it is started. The log and the associated metadata are deleted.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_DO_NOT_RESET_RM_AT_NEXT_START</strong><br><br>0x00008000</td>
  <td>This flag is only valid for default RMs, not secondary RMs. If this flag is set, a previous call to <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/winioctl/ni-winioctl-fsctl_txfs_modify_rm">FSCTL_TXFS_MODIFY_RM</a> is canceled with the <strong>TXFS_RM_FLAG_RESET_RM_AT_NEXT_START</strong> flag set.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_PREFER_CONSISTENCY</strong><br><br>0x00010000</td>
  <td>Indicates that the RM is to prefer transaction <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/fileio/glossary">consistency</a> over system <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/fileio/glossary">availability</a>. This flag is mutually exclusive with <strong>TXFS_RM_FLAG_PREFER_AVAILABILITY</strong> and is not supported by the default RM on the system volume.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_PREFER_AVAILABILITY</strong><br><br>0x00020000</td>
  <td>Indicates that the RM is to prefer system <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/fileio/glossary">availability</a> over transaction <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/fileio/glossary">consistency</a>. This flag is mutually exclusive with <strong>TXFS_RM_FLAG_PREFER_CONSISTENCY</strong> and is forced by the default RM on the system volume.</td>
</tr>
</tbody>
</table>

<h3 id="logcontainercountmax"><code>LogContainerCountMax</code></h3>

<p>The maximum size of the log, in containers.</p>

<h3 id="logcontainercountmin"><code>LogContainerCountMin</code></h3>

<p>The minimum size of the log, in containers.</p>

<h3 id="logcontainercount"><code>LogContainerCount</code></h3>

<p>The actual size of the log, in containers.</p>

<h3 id="loggrowthincrement"><code>LogGrowthIncrement</code></h3>

<p>The number of containers or percentage of space that should be added to the log.</p>

<h3 id="logautoshrinkpercentage"><code>LogAutoShrinkPercentage</code></h3>

<p>The percentage of log space to keep free. This member is used when the
<strong>TXFS_RM_FLAG_LOG_AUTO_SHRINK_PERCENTAGE</strong> flag is used, and instructs the log to
automatically shrink itself, so no more than <strong>LogAutoShrinkPercentage</strong> of the log is
free at any given time.</p>

<h3 id="reserved"><code>Reserved</code></h3>

<p>Reserved.</p>

<h3 id="loggingmode"><code>LoggingMode</code></h3>

<p>The current logging mode.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>**TXFS_LOGGING_MODE_SIMPLE**</strong><br><br>1</td>
  <td>Simple logging is used.</td>
</tr>
<tr>
  <td><strong>**TXFS_LOGGING_MODE_FULL**</strong><br><br>2</td>
  <td>Full logging is used</td>
</tr>
</tbody>
</table>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/winioctl/ni-winioctl-fsctl_txfs_modify_rm">FSCTL_TXFS_MODIFY_RM</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ns-winioctl-txfs_modify_rm">View the official Win32 API reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/sdk-api/blob/docs/sdk-api-src/content/winioctl/ns-winioctl-txfs_modify_rm.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
