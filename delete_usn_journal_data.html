<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DELETE_USN_JOURNAL_DATA - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DELETE_USN_JOURNAL_DATA - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DELETE_USN_JOURNAL_DATA - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntifs.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct {
  <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> UsnJournalID;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>     DeleteFlags;
} DELETE_USN_JOURNAL_DATA, *PDELETE_USN_JOURNAL_DATA;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/ns-ntifs-delete_usn_journal_data">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// winioctl.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct {
  <a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a> UsnJournalID;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>     DeleteFlags;
} DELETE_USN_JOURNAL_DATA, *PDELETE_USN_JOURNAL_DATA;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ns-winioctl-delete_usn_journal_data">View the official Win32 API reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/delete_usn_journal_data.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntifs-delete_usn_journal_data)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>DELETE_USN_JOURNAL_DATA</strong> structure contains information for the deletion of an update sequence number (USN) change journal.</p>

<h2 id="members">Members</h2>

<h3 id="usnjournalid"><code>UsnJournalID</code></h3>

<p>The identifier of the change journal to be deleted.</p>

<p>If the journal is active and deletion is requested by setting the <strong>USN_DELETE_FLAG_DELETE</strong> flag in the <strong>DeleteFlags</strong> member, then this identifier must specify the change journal for the current volume. Use <strong><a href="fsctl_query_usn_journal" title="// CTL_CODE(0x0009, 0x03d, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_QUERY_USN_JOURNAL 0x000900F4">FSCTL_QUERY_USN_JOURNAL</a></strong>
to retrieve the identifier of this change journal. If in this case the identifier is not for the current volume's change journal, <strong><a href="fsctl_delete_usn_journal" title="// CTL_CODE(0x0009, 0x03e, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_DELETE_USN_JOURNAL 0x000900F8">FSCTL_DELETE_USN_JOURNAL</a></strong> fails.</p>

<p>If notification instead of deletion is requested by setting only the <strong>USN_DELETE_FLAG_NOTIFY</strong> flag in <strong>DeleteFlags</strong>, <strong>UsnJournalID</strong> is ignored.</p>

<h3 id="deleteflags"><code>DeleteFlags</code></h3>

<p>Indicates whether deletion or notification regarding deletion is performed, or both. The <strong>DeleteFlags</strong> member must contain one or both of the following values.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td>USN_DELETE_FLAG_DELETE (0x00000001)</td>
  <td>If this flag is set and USN_DELETE_FLAG_NOTIFY is not set, the <strong><a href="fsctl_delete_usn_journal" title="// CTL_CODE(0x0009, 0x03e, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_DELETE_USN_JOURNAL 0x000900F8">FSCTL_DELETE_USN_JOURNAL</a></strong> operation starts the journal deletion process and returns immediately. The journal deletion process continues, if necessary, across system restarts. If this flag is set and the USN_DELETE_FLAG_NOTIFY flag is also set, both deletion and notification occur. If this flag is set and the journal is active, you must provide the identifier for the change journal for the current volume in <strong>UsnJournalID</strong> or the operation fails. If the journal is not active, then <strong>UsnJournalID</strong> is ignored and the journal is deleted.</td>
</tr>
<tr>
  <td>USN_DELETE_FLAG_NOTIFY (0x00000002)</td>
  <td>If this flag is set, the call sets up notification about when deletion is complete. The journal deletion request is completed when the journal deletion process is complete. If this flag is set and the <strong>USN_DELETE_FLAG_DELETE</strong> flag is not set, then the call sets up notification of a deletion that may already be in progress. For example, when your application starts, it might use this flag to determine if a deletion is in progress. If this flag is set and the USN_DELETE_FLAG_DELETE flag is also set, both deletion and notification occur. The notification is performed using an I/O completion port or another mechanism for asynchronous event notification.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p>For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/fileio/creating-modifying-and-deleting-a-change-journal">Creating, Modifying, and Deleting a Change Journal</a>.</p>

<h2 id="see-also">See also</h2>

<p><strong><a href="fsctl_delete_usn_journal" title="// CTL_CODE(0x0009, 0x03e, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_DELETE_USN_JOURNAL 0x000900F8">FSCTL_DELETE_USN_JOURNAL</a></strong></p>

<p><strong><a href="fsctl_query_usn_journal" title="// CTL_CODE(0x0009, 0x03d, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_QUERY_USN_JOURNAL 0x000900F4">FSCTL_QUERY_USN_JOURNAL</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/ns-ntifs-delete_usn_journal_data">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntifs/ns-ntifs-delete_usn_journal_data.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Win32 API reference (ns-winioctl-delete_usn_journal_data)</h1>
</div>
<div class="ntdoc-description">
<h1>DELETE_USN_JOURNAL_DATA structure</h1>

<h2>Description</h2>

<p>Contains information on the deletion of an update sequence number (USN) change journal using the
<a href="fsctl_delete_usn_journal" title="// CTL_CODE(0x0009, 0x03e, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_DELETE_USN_JOURNAL 0x000900F8">FSCTL_DELETE_USN_JOURNAL</a> control code.</p>

<h2>Members</h2>

<h3><code>UsnJournalID</code></h3>

<p>The identifier of the change journal to be deleted.</p>

<p>If the journal is active and deletion is requested by setting the USN_DELETE_FLAG_DELETE flag in the <strong>DeleteFlags</strong> member, then this identifier must specify the change journal for the current volume. Use
<a href="fsctl_query_usn_journal" title="// CTL_CODE(0x0009, 0x03d, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_QUERY_USN_JOURNAL 0x000900F4">FSCTL_QUERY_USN_JOURNAL</a> to retrieve the identifier of this change journal. If in this case the identifier is not for the current volume's change journal,
<a href="fsctl_delete_usn_journal" title="// CTL_CODE(0x0009, 0x03e, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_DELETE_USN_JOURNAL 0x000900F8">FSCTL_DELETE_USN_JOURNAL</a> fails.</p>

<p>If notification instead of deletion is requested by setting only the USN_DELETE_FLAG_NOTIFY flag in <strong>DeleteFlags</strong>, <strong>UsnJournalID</strong> is ignored.</p>

<h3><code>DeleteFlags</code></h3>

<p>Indicates whether deletion or notification regarding deletion is performed, or both. The <strong>DeleteFlags</strong> member must contain one or both of the following values.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>USN_DELETE_FLAG_DELETE</strong><br><br>0x00000001</td>
  <td>If this flag is set and the USN_DELETE_FLAG_NOTIFY flag is not set, the <a href="fsctl_delete_usn_journal" title="// CTL_CODE(0x0009, 0x03e, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_DELETE_USN_JOURNAL 0x000900F8">FSCTL_DELETE_USN_JOURNAL</a> operation starts the journal deletion process and returns immediately. The journal deletion process continues, if necessary, across system restarts.<br><br>If this flag is set and the USN_DELETE_FLAG_NOTIFY flag is also set, both deletion and notification occur. If this flag is set and the journal is active, you must provide the identifier for the change journal for the current volume in <strong>UsnJournalID</strong> or the operation fails. If the journal is not active, then <strong>UsnJournalID</strong> is ignored and the journal is deleted.</td>
</tr>
<tr>
  <td><strong>USN_DELETE_FLAG_NOTIFY</strong><br><br>0x00000002</td>
  <td>If this flag is set, the call sets up notification about when deletion is complete. The journal deletion request is completed when the journal deletion process is complete. If this flag is set and the USN_DELETE_FLAG_DELETE flag is not set, then the call sets up notification of a deletion that may already be in progress. For example, when your application starts, it might use this flag to determine if a deletion is in progress.<br><br>If this flag is set and the USN_DELETE_FLAG_DELETE flag is also set, both deletion and notification occur. The notification is performed using an I/O completion port or another mechanism for asynchronous event notification.</td>
</tr>
</tbody>
</table>

<h2>Remarks</h2>

<p>For more information, see
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/FileIO/creating-modifying-and-deleting-a-change-journal">Creating, Modifying, and Deleting a Change Journal</a>.</p>

<h2>See also</h2>

<p><a href="fsctl_delete_usn_journal" title="// CTL_CODE(0x0009, 0x03e, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_DELETE_USN_JOURNAL 0x000900F8">FSCTL_DELETE_USN_JOURNAL</a></p>

<p><a href="fsctl_query_usn_journal" title="// CTL_CODE(0x0009, 0x03d, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_QUERY_USN_JOURNAL 0x000900F4">FSCTL_QUERY_USN_JOURNAL</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ns-winioctl-delete_usn_journal_data">View the official Win32 API reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/sdk-api/blob/docs/sdk-api-src/content/winioctl/ns-winioctl-delete_usn_journal_data.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
