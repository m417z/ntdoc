<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DOT11_WFD_DISCOVER_REQUEST - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DOT11_WFD_DISCOVER_REQUEST - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DOT11_WFD_DISCOVER_REQUEST - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// windot11.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _DOT11_WFD_DISCOVER_REQUEST {
  <a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a>      Header;
  <a href="dot11_wfd_discover_type" title="typedef enum _DOT11_WFD_DISCOVER_TYPE {&#10;  dot11_wfd_discover_type_scan_only             = 1,&#10;  dot11_wfd_discover_type_find_only             = 2,&#10;  dot11_wfd_discover_type_auto                  = 3,&#10;  dot11_wfd_discover_type_scan_social_channels  = 4,&#10;  dot11_wfd_discover_type_forced                = 0x80000000&#10;} DOT11_WFD_DISCOVER_TYPE;">DOT11_WFD_DISCOVER_TYPE</a> DiscoverType;
  <a href="dot11_wfd_scan_type" title="typedef enum _DOT11_WFD_SCAN_TYPE {&#10;  dot11_wfd_scan_type_active   = 1,&#10;  dot11_wfd_scan_type_passive  = 2,&#10;  dot11_wfd_scan_type_auto     = 3&#10;} DOT11_WFD_SCAN_TYPE;">DOT11_WFD_SCAN_TYPE</a>     ScanType;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                   uDiscoverTimeout;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                   uDeviceFilterListOffset;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                   uNumDeviceFilters;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                   uIEsOffset;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                   uIEsLength;
  BOOLEAN                 bForceScanLegacyNetworks;
} DOT11_WFD_DISCOVER_REQUEST, *PDOT11_WFD_DISCOVER_REQUEST;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/windot11/ns-windot11-_dot11_wfd_discover_request">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/dot11_wfd_discover_request.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-windot11-_dot11_wfd_discover_request)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_dot11_wfd_discover_request-structure">_DOT11_WFD_DISCOVER_REQUEST structure</h1>

<h2 id="description">Description</h2>

<blockquote>
  <p>[!Important]
  <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/netcx/wifi-wdf-class-extension-wificx">WiFiCx</a> is the new Wi-Fi driver model released in Windows 11. We recommend that you use WiFiCx to take advantage of the latest features. The WDI driver model is now in maintenance mode and will only receive high priority fixes.</p>
</blockquote>

<p>The <strong>OID_DOT11_WFD_DISCOVER_REQUEST</strong> structure is the input data for an <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-dot11-wfd-discover-request">OID_DOT11_WFD_DISCOVER_REQUEST</a> request. The structure contains the parameters for a Wi-Fi Direct device discovery.</p>

<h2 id="members">Members</h2>

<h3 id="header"><code>Header</code></h3>

<p>The type, revision, and size of the<strong>OID_DOT11_WFD_DISCOVER_REQUEST</strong> structure. This member is formatted as an
<a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a> structure.</p>

<p>The miniport driver must set the members of
<strong>Header</strong> to the following values:</p>

<h4 id="type">Type</h4>

<p>This member must be set to <strong>NDIS_OBJECT_TYPE_DEFAULT</strong>.</p>

<h4 id="revision">Revision</h4>

<p>This member must be set to <strong>DOT11_WFD_DISCOVER_REQUEST_REVISION_1</strong>.</p>

<h4 id="size">Size</h4>

<p>This member must be set to
<strong>sizeof</strong>(<strong>DOT11_SIZEOF_WFD_DISCOVER_REQUEST_REVISION_1</strong>).</p>

<p>For more information about these members, see
<a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a>.</p>

<h3 id="discovertype"><code>DiscoverType</code></h3>

<p>The device discovery mode to use.</p>

<h3 id="scantype"><code>ScanType</code></h3>

<p>Scanning type used during the scan phase of device discovery.</p>

<h3 id="udiscovertimeout"><code>uDiscoverTimeout</code></h3>

<p>Maximum time, in milliseconds, to complete the discovery operation. A miniport can complete a discovery in less time, however, it should not use any more time than specified by this value. This is the total time allowed for completion of all phases of device discovery.</p>

<h3 id="udevicefilterlistoffset"><code>uDeviceFilterListOffset</code></h3>

<p>The offset to the list of P2P Device filters, which specifies the P2P devices and Group Owners to search for during Wi-Fi Direct device discovery. This offset is specified in bytes and is relative to the start of the buffer that contains the DOT11_WFD_DISCOVER_REQUEST structure. Each entry in the list is formatted as a <a href="dot11_wfd_discover_device_filter" title="typedef struct _DOT11_WFD_DISCOVER_DEVICE_FILTER {&#10;  DOT11_MAC_ADDRESS DeviceID;&#10;  UCHAR             ucBitmask;&#10;  DOT11_SSID        GroupSSID;&#10;} DOT11_WFD_DISCOVER_DEVICE_FILTER, *PDOT11_WFD_DISCOVER_DEVICE_FILTER;">DOT11_WFD_DISCOVER_DEVICE_FILTER</a>.</p>

<p>When a list entry specifies a non-broadcast MAC address as the Device ID, the driver must use this MAC address in the Device ID Attribute of the P2P IEs it includes in the probe requests.</p>

<p>The offset in the <strong>InformationBuffer</strong> of the <a href="ndis_oid_request" title="typedef struct _NDIS_OID_REQUEST {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  NDIS_REQUEST_TYPE        RequestType;&#10;  NDIS_PORT_NUMBER         PortNumber;&#10;  UINT                     Timeout;&#10;  PVOID                    RequestId;&#10;  NDIS_HANDLE              RequestHandle;&#10;  union {&#10;    NDIS_OID Oid;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;      UINT     BytesWritten;&#10;      UINT     BytesNeeded;&#10;    } QUERY_INFORMATION;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;...">NDIS_OID_REQUEST</a> where a list of P2P device identifiers begins. These are the identifiers to for during device discovery.</p>

<h3 id="unumdevicefilters"><code>uNumDeviceFilters</code></h3>

<p>The number of P2P device filters to use during WFD device discovery. The default value for this field is 0.</p>

<h3 id="uiesoffset"><code>uIEsOffset</code></h3>

<p>The offset in the <strong>InformationBuffer</strong> of the <a href="ndis_oid_request" title="typedef struct _NDIS_OID_REQUEST {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  NDIS_REQUEST_TYPE        RequestType;&#10;  NDIS_PORT_NUMBER         PortNumber;&#10;  UINT                     Timeout;&#10;  PVOID                    RequestId;&#10;  NDIS_HANDLE              RequestHandle;&#10;  union {&#10;    NDIS_OID Oid;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;      UINT     BytesWritten;&#10;      UINT     BytesNeeded;&#10;    } QUERY_INFORMATION;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;...">NDIS_OID_REQUEST</a> structure where the additional Informational Elements (IEs) begin.</p>

<h3 id="uieslength"><code>uIEsLength</code></h3>

<p>The length, in bytes, of the additional IEs which the Wi-Fi Direct device port must add to the probe request packet. If this value is 0, the system did not provide any IEs and the miniport must insert the default IEs in the probe request packet. The default IEs are in <strong>DefaultRequestIEs</strong> received earlier with an <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-dot11-wfd-additional-ie">OID_DOT11_WFD_ADDITIONAL_IE</a> request.</p>

<h3 id="bforcescanlegacynetworks"><code>bForceScanLegacyNetworks</code></h3>

<p>When TRUE, the Wi-Fi Direct device must also attempt to discover legacy networks. Otherwise, scanning for legacy networks is not necessary.</p>

<h2 id="syntax">Syntax</h2>

<p><!-- CODE_MARKER --></p>

<div class="codehilite">
<pre><span></span><code><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">_DOT11_WFD_DISCOVER_REQUEST</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n"><a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a></span><span class="w">      </span><span class="n">Header</span><span class="p">;</span>
<span class="w">  </span><span class="n"><a href="dot11_wfd_discover_type" title="typedef enum _DOT11_WFD_DISCOVER_TYPE {&#10;  dot11_wfd_discover_type_scan_only             = 1,&#10;  dot11_wfd_discover_type_find_only             = 2,&#10;  dot11_wfd_discover_type_auto                  = 3,&#10;  dot11_wfd_discover_type_scan_social_channels  = 4,&#10;  dot11_wfd_discover_type_forced                = 0x80000000&#10;} DOT11_WFD_DISCOVER_TYPE;">DOT11_WFD_DISCOVER_TYPE</a></span><span class="w"> </span><span class="n">DiscoverType</span><span class="p">;</span>
<span class="w">  </span><span class="n"><a href="dot11_wfd_scan_type" title="typedef enum _DOT11_WFD_SCAN_TYPE {&#10;  dot11_wfd_scan_type_active   = 1,&#10;  dot11_wfd_scan_type_passive  = 2,&#10;  dot11_wfd_scan_type_auto     = 3&#10;} DOT11_WFD_SCAN_TYPE;">DOT11_WFD_SCAN_TYPE</a></span><span class="w">     </span><span class="n">ScanType</span><span class="p">;</span>
<span class="w">  </span><span class="n"><a href="ulong" title="typedef unsigned long ULONG;">ULONG</a></span><span class="w">                   </span><span class="n">uDiscoverTimeout</span><span class="p">;</span>
<span class="w">  </span><span class="n"><a href="ulong" title="typedef unsigned long ULONG;">ULONG</a></span><span class="w">                   </span><span class="n">uDeviceFilterListOffset</span><span class="p">;</span>
<span class="w">  </span><span class="n"><a href="ulong" title="typedef unsigned long ULONG;">ULONG</a></span><span class="w">                   </span><span class="n">uNumDeviceFilters</span><span class="p">;</span>
<span class="w">  </span><span class="n"><a href="ulong" title="typedef unsigned long ULONG;">ULONG</a></span><span class="w">                   </span><span class="n">uIEsOffset</span><span class="p">;</span>
<span class="w">  </span><span class="n"><a href="ulong" title="typedef unsigned long ULONG;">ULONG</a></span><span class="w">                   </span><span class="n">uIEsLength</span><span class="p">;</span>
<span class="w">  </span><span class="n">BOOLEAN</span><span class="w">                 </span><span class="n">bForceScanLegacyNetworks</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">DOT11_WFD_DISCOVER_REQUEST</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">PDOT11_WFD_DISCOVER_REQUEST</span><span class="p">;</span>
</code></pre>
</div>

<h2 id="remarks">Remarks</h2>

<p>Each entry in the device identifier list at <strong>uDeviceFilterListOffset</strong> is formatted as a <a href="dot11_mac_address" title="typedef struct _DOT11_MAC_ADDRESS {&#10;  UCHAR ucDot11MacAddress[6];&#10;} DOT11_MAC_ADDRESS, *PDOT11_MAC_ADDRESS;">DOT11_MAC_ADDRESS</a> structure. When a non-broadcast MAC address is specified in this list, the driver must use this address in the Device ID attribute of the P2P IEs probe requests it transmits</p>

<p>The IEs present at <strong>uIEsOffset</strong>, for the duration of the device discovery, will temporarily replace IEs found at <strong>DefaultRequestIEs</strong> in input structure of the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-dot11-wfd-additional-ie">OID_DOT11_WFD_ADDITIONAL_IE</a> request.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-dot11-wfd-discover-request">OID_DOT11_WFD_DISCOVER_REQUEST</a></p>

<p><a href="dot11_wfd_scan_type" title="typedef enum _DOT11_WFD_SCAN_TYPE {&#10;  dot11_wfd_scan_type_active   = 1,&#10;  dot11_wfd_scan_type_passive  = 2,&#10;  dot11_wfd_scan_type_auto     = 3&#10;} DOT11_WFD_SCAN_TYPE;">DOT11_WFD_SCAN_TYPE</a></p>

<p><a href="dot11_wfd_discover_type" title="typedef enum _DOT11_WFD_DISCOVER_TYPE {&#10;  dot11_wfd_discover_type_scan_only             = 1,&#10;  dot11_wfd_discover_type_find_only             = 2,&#10;  dot11_wfd_discover_type_auto                  = 3,&#10;  dot11_wfd_discover_type_scan_social_channels  = 4,&#10;  dot11_wfd_discover_type_forced                = 0x80000000&#10;} DOT11_WFD_DISCOVER_TYPE;">DOT11_WFD_DISCOVER_TYPE</a></p>

<p><a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/windot11/ns-windot11-_dot11_wfd_discover_request">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/windot11/ns-windot11-_dot11_wfd_discover_request.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
