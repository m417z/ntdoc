<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="USBPM_CONNECTOR_STATE - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>USBPM_CONNECTOR_STATE - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github.ntdoc.min.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github-dark-dimmed.ntdoc.min.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            USBPM_CONNECTOR_STATE - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// usbpmapi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _USBPM_CONNECTOR_STATE {
  USBPM_CONNECTOR             ConnectorHandle;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                       ChangeToken;
  BOOLEAN                     Attached;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                       AttachCount;
  <a href="usbc_partner" title="typedef enum _USBC_PARTNER {&#10;  UsbCPartnerInvalid,&#10;  UsbCPartnerUfp,&#10;  UsbCPartnerDfp,&#10;  UsbCPartnerPoweredCableNoUfp,&#10;  UsbCPartnerPoweredCableWithUfp,&#10;  UsbCPartnerAudioAccessory,&#10;  UsbCPartnerDebugAccessory&#10;} USBC_PARTNER;">USBC_PARTNER</a>                Partner;
  <a href="usbc_current" title="typedef enum _USBC_CURRENT {&#10;  UsbCCurrentInvalid,&#10;  UsbCCurrentDefaultUsb,&#10;  UsbCCurrent1500mA,&#10;  UsbCCurrent3000mA&#10;} USBC_CURRENT;">USBC_CURRENT</a>                CurrentAdvertisement;
  <a href="usbc_pd_conn_state" title="typedef enum _USBC_PD_CONN_STATE {&#10;  UsbCPdConnStateInvalid,&#10;  UsbCPdConnStateNotSupported,&#10;  UsbCPdConnStateNegotiationFailed,&#10;  UsbCPdConnStateNegotiationSucceeded&#10;} USBC_PD_CONN_STATE;">USBC_PD_CONN_STATE</a>          PdConnState;
  <a href="usbc_pd_request_data_object" title="typedef union _USBC_PD_REQUEST_DATA_OBJECT {&#10;  UINT32 U;&#10;  struct {&#10;    UINT32 Reserved1 : 28;&#10;    UINT32 ObjectPosition : 3;&#10;    UINT32 Reserved2 : 1;&#10;  } Common;&#10;  struct {&#10;    UINT32 MaximumOperatingCurrentIn10mA : 10;&#10;    UINT32 OperatingCurrentIn10mA : 10;&#10;    UINT32 Reserved1 : 6;&#10;    UINT32 CapabilityMismatch : 1;&#10;    UINT32 GiveBackFlag : 1;&#10;    UINT32 ObjectPosition : 3;&#10;    UINT32 Reserved2 : 1;&#10;  } FixedAndVariableRdo;&#10;  struct {&#10;    UINT32 MaximumOperatingPowerIn250mW : 10;&#10;    UINT32 OperatingPowerIn250mW : 10;&#10;    UINT32 Reserved1 : 6;&#10;...">USBC_PD_REQUEST_DATA_OBJECT</a> Rdo;
  <a href="usbc_data_role" title="typedef enum _USBC_DATA_ROLE {&#10;  UsbCDataRoleInvalid,&#10;  UsbCDataRoleDfp,&#10;  UsbCDataRoleUfp&#10;} USBC_DATA_ROLE;">USBC_DATA_ROLE</a>              DataRole;
  <a href="usbc_power_role" title="typedef enum _USBC_POWER_ROLE {&#10;  UsbCPowerRoleInvalid,&#10;  UsbCPowerRoleSink,&#10;  UsbCPowerRoleSource&#10;} USBC_POWER_ROLE;">USBC_POWER_ROLE</a>             PowerRole;
  <a href="uint8" title="typedef unsigned char UINT8;">UINT8</a>                       SourceCapsCount;
  <a href="usbc_pd_power_data_object" title="typedef union _USBC_PD_POWER_DATA_OBJECT {&#10;  UINT32 U;&#10;  struct {&#10;    UINT32 Reserved : 30;&#10;    UINT32 Type : 2;&#10;  } Common;&#10;  struct {&#10;    UINT32 MaximumCurrentIn10mA : 10;&#10;    UINT32 VoltageIn50mV : 10;&#10;    UINT32 PeakCurrent : 2;&#10;    UINT32 Reserved1 : 3;&#10;    UINT32 DataRoleSwap : 1;&#10;    UINT32 UsbCommunicationCapable : 1;&#10;    UINT32 ExternallyPowered : 1;&#10;    UINT32 UsbSuspendSupported : 1;&#10;    UINT32 DualRolePower : 1;&#10;    UINT32 FixedSupply : 2;&#10;  } FixedSupplyPdo;&#10;  struct {&#10;    UINT32 MaximumAllowablePowerIn250mW : 10;&#10;...">USBC_PD_POWER_DATA_OBJECT</a>   SourceCaps[USBPM_MAX_CAPS_COUNT];
  <a href="uint8" title="typedef unsigned char UINT8;">UINT8</a>                       SinkCapsCount;
  <a href="usbc_pd_power_data_object" title="typedef union _USBC_PD_POWER_DATA_OBJECT {&#10;  UINT32 U;&#10;  struct {&#10;    UINT32 Reserved : 30;&#10;    UINT32 Type : 2;&#10;  } Common;&#10;  struct {&#10;    UINT32 MaximumCurrentIn10mA : 10;&#10;    UINT32 VoltageIn50mV : 10;&#10;    UINT32 PeakCurrent : 2;&#10;    UINT32 Reserved1 : 3;&#10;    UINT32 DataRoleSwap : 1;&#10;    UINT32 UsbCommunicationCapable : 1;&#10;    UINT32 ExternallyPowered : 1;&#10;    UINT32 UsbSuspendSupported : 1;&#10;    UINT32 DualRolePower : 1;&#10;    UINT32 FixedSupply : 2;&#10;  } FixedSupplyPdo;&#10;  struct {&#10;    UINT32 MaximumAllowablePowerIn250mW : 10;&#10;...">USBC_PD_POWER_DATA_OBJECT</a>   SinkCaps[USBPM_MAX_CAPS_COUNT];
  <a href="uint8" title="typedef unsigned char UINT8;">UINT8</a>                       PartnerSourceCapsCount;
  <a href="usbc_pd_power_data_object" title="typedef union _USBC_PD_POWER_DATA_OBJECT {&#10;  UINT32 U;&#10;  struct {&#10;    UINT32 Reserved : 30;&#10;    UINT32 Type : 2;&#10;  } Common;&#10;  struct {&#10;    UINT32 MaximumCurrentIn10mA : 10;&#10;    UINT32 VoltageIn50mV : 10;&#10;    UINT32 PeakCurrent : 2;&#10;    UINT32 Reserved1 : 3;&#10;    UINT32 DataRoleSwap : 1;&#10;    UINT32 UsbCommunicationCapable : 1;&#10;    UINT32 ExternallyPowered : 1;&#10;    UINT32 UsbSuspendSupported : 1;&#10;    UINT32 DualRolePower : 1;&#10;    UINT32 FixedSupply : 2;&#10;  } FixedSupplyPdo;&#10;  struct {&#10;    UINT32 MaximumAllowablePowerIn250mW : 10;&#10;...">USBC_PD_POWER_DATA_OBJECT</a>   PartnerSourceCaps[USBPM_MAX_CAPS_COUNT];
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                       PdAlternateModesEnteredCount;
} USBPM_CONNECTOR_STATE, *PUSBPM_CONNECTOR_STATE;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/usbpmapi/ns-usbpmapi-_usbpm_connector_state">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/usbpm_connector_state.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-usbpmapi-_usbpm_connector_state)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>_USBPM_CONNECTOR_STATE structure</h1>
<h2>Description</h2>
<p>Describes the state of a connector. This structure is used in the <strong><a href="usbpm_retrieveconnectorstate" title="NTSTATUS UsbPm_RetrieveConnectorState(&#10;  [In]  USBPM_CLIENT           ClientHandle,&#10;  [In]  USBPM_CONNECTOR        ConnectorHandle,&#10;  [Out] PUSBPM_CONNECTOR_STATE ConnectorState&#10;);">UsbPm_RetrieveConnectorState</a></strong> call. The client driver must initialize this structure by calling <strong><a href="usbpm_connector_state_init" title="VOID USBPM_CONNECTOR_STATE_INIT(&#10;  PUSBPM_CONNECTOR_STATE ConnectorState&#10;);">USBPM_CONNECTOR_STATE_INIT</a></strong>.</p>
<h2>Members</h2>
<h3><code>ConnectorHandle</code></h3>
<p>A handle to this connector.</p>
<h3><code>ChangeToken</code></h3>
<p>The change token number of this state. This value is changed for every connector state change.</p>
<h3><code>Attached</code></h3>
<p>Indicates whether this connector is attached.</p>
<h3><code>AttachCount</code></h3>
<p>Indicates the number of attached events that have occurred on this connector. If client driver sees the transition from one “Attached” state to another “Attached” state but with different “AttachCount”, it indicates two attaches and with two different port partners.</p>
<h3><code>Partner</code></h3>
<p>The type of the port partner, defined in the <strong><a href="usbc_partner" title="typedef enum _USBC_PARTNER {&#10;  UsbCPartnerInvalid,&#10;  UsbCPartnerUfp,&#10;  UsbCPartnerDfp,&#10;  UsbCPartnerPoweredCableNoUfp,&#10;  UsbCPartnerPoweredCableWithUfp,&#10;  UsbCPartnerAudioAccessory,&#10;  UsbCPartnerDebugAccessory&#10;} USBC_PARTNER;">USBC_PARTNER</a></strong> enumeration.</p>
<h3><code>CurrentAdvertisement</code></h3>
<p>The amount of Type-C current advertised.</p>
<h3><code>PdConnState</code></h3>
<p>Indicates the PD contract state over the connection on this connector.</p>
<h3><code>Rdo</code></h3>
<p>The PD Request Data Object that has sent to the port partner of this connector. See <strong><a href="usbc_pd_request_data_object" title="typedef union _USBC_PD_REQUEST_DATA_OBJECT {&#10;  UINT32 U;&#10;  struct {&#10;    UINT32 Reserved1 : 28;&#10;    UINT32 ObjectPosition : 3;&#10;    UINT32 Reserved2 : 1;&#10;  } Common;&#10;  struct {&#10;    UINT32 MaximumOperatingCurrentIn10mA : 10;&#10;    UINT32 OperatingCurrentIn10mA : 10;&#10;    UINT32 Reserved1 : 6;&#10;    UINT32 CapabilityMismatch : 1;&#10;    UINT32 GiveBackFlag : 1;&#10;    UINT32 ObjectPosition : 3;&#10;    UINT32 Reserved2 : 1;&#10;  } FixedAndVariableRdo;&#10;  struct {&#10;    UINT32 MaximumOperatingPowerIn250mW : 10;&#10;    UINT32 OperatingPowerIn250mW : 10;&#10;    UINT32 Reserved1 : 6;&#10;...">USBC_PD_REQUEST_DATA_OBJECT</a></strong>.</p>
<h3><code>DataRole</code></h3>
<p>Indicates the USB Type-C data role of the connector, defined in the <strong><a href="usbc_data_role" title="typedef enum _USBC_DATA_ROLE {&#10;  UsbCDataRoleInvalid,&#10;  UsbCDataRoleDfp,&#10;  UsbCDataRoleUfp&#10;} USBC_DATA_ROLE;">USBC_DATA_ROLE</a></strong> enumeration.</p>
<h3><code>PowerRole</code></h3>
<p>Indicates the USB Type-C power role of the connector, defined in the <strong><a href="usbc_power_role" title="typedef enum _USBC_POWER_ROLE {&#10;  UsbCPowerRoleInvalid,&#10;  UsbCPowerRoleSink,&#10;  UsbCPowerRoleSource&#10;} USBC_POWER_ROLE;">USBC_POWER_ROLE</a></strong> enumeration.</p>
<h3><code>SourceCapsCount</code></h3>
<p>The number of power data objects in the source caps array.</p>
<h3><code>SourceCaps</code></h3>
<p>The source capabilities of the connector. See <strong><a href="usbc_pd_power_data_object" title="typedef union _USBC_PD_POWER_DATA_OBJECT {&#10;  UINT32 U;&#10;  struct {&#10;    UINT32 Reserved : 30;&#10;    UINT32 Type : 2;&#10;  } Common;&#10;  struct {&#10;    UINT32 MaximumCurrentIn10mA : 10;&#10;    UINT32 VoltageIn50mV : 10;&#10;    UINT32 PeakCurrent : 2;&#10;    UINT32 Reserved1 : 3;&#10;    UINT32 DataRoleSwap : 1;&#10;    UINT32 UsbCommunicationCapable : 1;&#10;    UINT32 ExternallyPowered : 1;&#10;    UINT32 UsbSuspendSupported : 1;&#10;    UINT32 DualRolePower : 1;&#10;    UINT32 FixedSupply : 2;&#10;  } FixedSupplyPdo;&#10;  struct {&#10;    UINT32 MaximumAllowablePowerIn250mW : 10;&#10;...">USBC_PD_POWER_DATA_OBJECT</a></strong>.</p>
<h3><code>SinkCapsCount</code></h3>
<p>The number of power data objects in the corresponding array.</p>
<h3><code>SinkCaps</code></h3>
<p>The sink capability of the connector. See <strong><a href="usbc_pd_power_data_object" title="typedef union _USBC_PD_POWER_DATA_OBJECT {&#10;  UINT32 U;&#10;  struct {&#10;    UINT32 Reserved : 30;&#10;    UINT32 Type : 2;&#10;  } Common;&#10;  struct {&#10;    UINT32 MaximumCurrentIn10mA : 10;&#10;    UINT32 VoltageIn50mV : 10;&#10;    UINT32 PeakCurrent : 2;&#10;    UINT32 Reserved1 : 3;&#10;    UINT32 DataRoleSwap : 1;&#10;    UINT32 UsbCommunicationCapable : 1;&#10;    UINT32 ExternallyPowered : 1;&#10;    UINT32 UsbSuspendSupported : 1;&#10;    UINT32 DualRolePower : 1;&#10;    UINT32 FixedSupply : 2;&#10;  } FixedSupplyPdo;&#10;  struct {&#10;    UINT32 MaximumAllowablePowerIn250mW : 10;&#10;...">USBC_PD_POWER_DATA_OBJECT</a></strong>.</p>
<h3><code>PartnerSourceCapsCount</code></h3>
<p>The number of power data objects in the corresponding array.</p>
<h3><code>PartnerSourceCaps</code></h3>
<p>The source capabilities of the port partner in the corresponding array. See <strong><a href="usbc_pd_power_data_object" title="typedef union _USBC_PD_POWER_DATA_OBJECT {&#10;  UINT32 U;&#10;  struct {&#10;    UINT32 Reserved : 30;&#10;    UINT32 Type : 2;&#10;  } Common;&#10;  struct {&#10;    UINT32 MaximumCurrentIn10mA : 10;&#10;    UINT32 VoltageIn50mV : 10;&#10;    UINT32 PeakCurrent : 2;&#10;    UINT32 Reserved1 : 3;&#10;    UINT32 DataRoleSwap : 1;&#10;    UINT32 UsbCommunicationCapable : 1;&#10;    UINT32 ExternallyPowered : 1;&#10;    UINT32 UsbSuspendSupported : 1;&#10;    UINT32 DualRolePower : 1;&#10;    UINT32 FixedSupply : 2;&#10;  } FixedSupplyPdo;&#10;  struct {&#10;    UINT32 MaximumAllowablePowerIn250mW : 10;&#10;...">USBC_PD_POWER_DATA_OBJECT</a></strong>.</p>
<h3><code>PdAlternateModesEnteredCount</code></h3>
<p>The number of alternate modes entered.</p>
<h2>Remarks</h2>
<h2>See also</h2>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/usbpmapi/ns-usbpmapi-_usbpm_connector_state">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/usbpmapi/ns-usbpmapi-_usbpm_connector_state.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script src="modules/highlight.js/highlight.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
