<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="USBD_ParseDescriptors - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>USBD_ParseDescriptors - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            USBD_ParseDescriptors - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// usbdlib.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body"><a href="usb_common_descriptor" title="typedef struct _USB_COMMON_DESCRIPTOR {&#10;  UCHAR bLength;&#10;  UCHAR bDescriptorType;&#10;} USB_COMMON_DESCRIPTOR, *PUSB_COMMON_DESCRIPTOR;">PUSB_COMMON_DESCRIPTOR</a> USBD_ParseDescriptors(
  [in] PVOID DescriptorBuffer,
  [in] <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> TotalLength,
  [in] PVOID StartPosition,
  [in] <a href="long" title="typedef long LONG;">LONG</a>  DescriptorType
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/usbdlib/nf-usbdlib-usbd_parsedescriptors">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/usbd_parsedescriptors.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-usbdlib-usbd_parsedescriptors)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="usbd_parsedescriptors-function">USBD_ParseDescriptors function</h1>

<h2 id="description">Description</h2>

<p>The <strong>USBD_ParseDescriptors</strong> routine searches a given configuration descriptor and returns a pointer to the first descriptor that matches the search criteria.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="descriptorbuffer-in"><code>DescriptorBuffer</code> [in]</h3>

<p>Pointer to a configuration descriptor that contains the descriptor for which to search.</p>

<h3 id="totallength-in"><code>TotalLength</code> [in]</h3>

<p>Specifies the size, in bytes, of the buffer pointed to by <em>DescriptorBuffer</em>.</p>

<h3 id="startposition-in"><code>StartPosition</code> [in]</h3>

<p>Pointer to the address within the configuration descriptor, provided at <em>DescriptorBuffer</em>, to begin searching from. To search from the beginning of the configuration descriptor, the parameters <em>DescriptorBuffer</em> and <em>StartPosition</em> must be the same address.</p>

<h3 id="descriptortype-in"><code>DescriptorType</code> [in]</h3>

<p>Specifies the descriptor type code as assigned by USB. The following values are valid for USB-defined descriptor types:</p>

<h4 id="usb_string_descriptor_type">USB_STRING_DESCRIPTOR_TYPE</h4>

<p>Specifies that the descriptor being searched for is a string descriptor.</p>

<h4 id="usb_interface_descriptor_type">USB_INTERFACE_DESCRIPTOR_TYPE</h4>

<p>Specifies that the descriptor being searched for is an interface descriptor.</p>

<h4 id="usb_endpoint_descriptor_type">USB_ENDPOINT_DESCRIPTOR_TYPE</h4>

<p>Specifies that the descriptor being searched for is an endpoint descriptor.</p>

<h2 id="return-value">Return value</h2>

<p><strong>USBD_ParseDescriptors</strong> returns a pointer to a <a href="usb_common_descriptor" title="typedef struct _USB_COMMON_DESCRIPTOR {&#10;  UCHAR bLength;&#10;  UCHAR bDescriptorType;&#10;} USB_COMMON_DESCRIPTOR, *PUSB_COMMON_DESCRIPTOR;">USB_COMMON_DESCRIPTOR</a> structure that is the head of the first descriptor that matches the given search criteria, or <strong>NULL</strong> is returned if no match is found:</p>

<h2 id="remarks">Remarks</h2>

<p>This structure is used to hold a portion of a descriptor, so that the caller of <strong>USBD_ParseDescriptors</strong> can determine the correct structure to use to access the remaining data in the descriptor. Every descriptor type has these fields at the beginning of the data and callers can use the <strong>bLength</strong> and <strong>bDescriptorType</strong> members to correctly identify the type of this descriptor.</p>

<p>When this routine parses the configuration descriptor looking for the descriptor that matches the search criteria, it returns the first match, terminating the search.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/_usbref/">USB device driver programming reference</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/usbdlib/nf-usbdlib-usbd_parsedescriptors">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/usbdlib/nf-usbdlib-usbd_parsedescriptors.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
