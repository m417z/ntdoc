<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="GET_D3COLD_CAPABILITY - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>GET_D3COLD_CAPABILITY - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            GET_D3COLD_CAPABILITY - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">GET_D3COLD_CAPABILITY GetD3coldCapability;

<a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> GetD3coldCapability(
  [in, optional] PVOID Context,
  [out]          PBOOLEAN D3ColdSupported
)
{...}</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-get_d3cold_capability">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/get_d3cold_capability.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-wdm-get_d3cold_capability)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="get_d3cold_capability-callback-function">GET_D3COLD_CAPABILITY callback function</h1>

<h2 id="description">Description</h2>

<p>The <strong>GET_D3COLD_CAPABILITY</strong> callback routine is used for two different functions in the <strong><a href="d3cold_support_interface" title="typedef struct _D3COLD_SUPPORT_INTERFACE {&#10;  USHORT                             Size;&#10;  USHORT                             Version;&#10;  PVOID                              Context;&#10;  PINTERFACE_REFERENCE               InterfaceReference;&#10;  PINTERFACE_DEREFERENCE             InterfaceDereference;&#10;  PSET_D3COLD_SUPPORT                SetD3ColdSupport;&#10;  PGET_IDLE_WAKE_INFO                GetIdleWakeInfo;&#10;  PGET_D3COLD_CAPABILITY             GetD3ColdCapability;&#10;  PGET_D3COLD_CAPABILITY             GetBusDriverD3ColdSupport;&#10;  PGET_D3COLD_LAST_TRANSITION_STATUS GetLastTransitionStatus;&#10;} D3COLD_SUPPORT_INTERFACE, *PD3COLD_SUPPORT_INTERFACE;">D3COLD_SUPPORT_INTERFACE</a></strong>:</p>

<ul>
<li><strong>GetD3ColdCapability</strong> - Reports whether this device is capable of entering the D3cold device power state.</li>
<li><strong>GetBusDriverD3ColdSupport</strong> - Reports whether the underlying bus driver and ACPI system firmware support D3cold for this device.</li>
</ul>

<h2 id="parameters">Parameters</h2>

<h3 id="context-in-optional"><code>Context</code> [in, optional]</h3>

<p>A pointer to interface-specific context information. The caller sets this parameter to the value of the <strong>Context</strong> member of the <strong><a href="d3cold_support_interface" title="typedef struct _D3COLD_SUPPORT_INTERFACE {&#10;  USHORT                             Size;&#10;  USHORT                             Version;&#10;  PVOID                              Context;&#10;  PINTERFACE_REFERENCE               InterfaceReference;&#10;  PINTERFACE_DEREFERENCE             InterfaceDereference;&#10;  PSET_D3COLD_SUPPORT                SetD3ColdSupport;&#10;  PGET_IDLE_WAKE_INFO                GetIdleWakeInfo;&#10;  PGET_D3COLD_CAPABILITY             GetD3ColdCapability;&#10;  PGET_D3COLD_CAPABILITY             GetBusDriverD3ColdSupport;&#10;  PGET_D3COLD_LAST_TRANSITION_STATUS GetLastTransitionStatus;&#10;} D3COLD_SUPPORT_INTERFACE, *PD3COLD_SUPPORT_INTERFACE;">D3COLD_SUPPORT_INTERFACE</a></strong> structure for the interface.</p>

<h3 id="d3coldsupported-out"><code>D3ColdSupported</code> [out]</h3>

<p>A pointer to a BOOLEAN variable to which the routine writes a value to indicate the D3cold support status. The meaning of this value depends on which function is being called:</p>

<ul>
<li><strong>GetD3ColdCapability</strong>: If TRUE, the device is capable of entering D3cold. If FALSE, the device isn't capable of entering D3cold.</li>
<li><strong>GetBusDriverD3ColdSupport</strong>: If TRUE, the bus driver supports D3cold. If FALSE, the bus driver doesn't support D3cold.</li>
</ul>

<p>If the call fails, the routine returns an error status code and doesn't write anything to this variable.</p>

<h2 id="return-value">Return value</h2>

<p>The <strong>GET_D3COLD_CAPABILITY</strong> routine returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if it is successful. Otherwise, it returns an appropriate error status code.</p>

<h2 id="remarks">Remarks</h2>

<p>This callback function type is used for two different routines in the <strong><a href="d3cold_support_interface" title="typedef struct _D3COLD_SUPPORT_INTERFACE {&#10;  USHORT                             Size;&#10;  USHORT                             Version;&#10;  PVOID                              Context;&#10;  PINTERFACE_REFERENCE               InterfaceReference;&#10;  PINTERFACE_DEREFERENCE             InterfaceDereference;&#10;  PSET_D3COLD_SUPPORT                SetD3ColdSupport;&#10;  PGET_IDLE_WAKE_INFO                GetIdleWakeInfo;&#10;  PGET_D3COLD_CAPABILITY             GetD3ColdCapability;&#10;  PGET_D3COLD_CAPABILITY             GetBusDriverD3ColdSupport;&#10;  PGET_D3COLD_LAST_TRANSITION_STATUS GetLastTransitionStatus;&#10;} D3COLD_SUPPORT_INTERFACE, *PD3COLD_SUPPORT_INTERFACE;">D3COLD_SUPPORT_INTERFACE</a></strong>:</p>

<ul>
<li><strong>GetD3ColdCapability</strong> - Reports whether this device is capable of entering the D3cold device power state.</li>
<li><strong>GetBusDriverD3ColdSupport</strong> - Reports whether the underlying bus driver and ACPI system firmware support D3cold for this device.</li>
</ul>

<h3 id="getbusdriverd3coldsupport-usage">GetBusDriverD3ColdSupport Usage</h3>

<p>The driver for the device calls the version of this routine that is implemented by the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/acpi-driver">Windows ACPI driver</a>, Acpi.sys. This routine checks the parent bus driver for the device to determine whether this bus driver supports the D3cold power state.</p>

<p>For example, starting with Windows 8, Microsoft supplies an inbox USB 3.0 eXtensible Host Controller Interface (xHCI) driver that supports D3cold. Some third-party hardware vendors supply Windows drivers for their xHCI controllers, but these drivers might not support D3cold. The driver for a USB 3.0 device can call the <em>GetBusDriverD3ColdSupport</em> routine to determine whether the parent xHCI controller driver supports D3cold.</p>

<p>A bus driver supports D3cold if all of the following are true:</p>

<ul>
<li>The bus driver implements the GUID_D3COLD_SUPPORT_INTERFACE driver interface.</li>
<li>The bus driver implements the <em>GetBusDriverD3ColdSupport</em> routine in this interface.</li>
<li>The output value from the <em>GetBusDriverD3ColdSupport</em> routine indicates that the bus driver supports D3cold.</li>
</ul>

<p>The driver for a device can call the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-get_idle_wake_info"><strong>GetIdleWakeInfo</strong></a> routine to determine whether the underlying bus drivers and ACPI system firmware support D3cold for the device. If this call fails and returns an error status code, the device driver can call the <em>GetBusDriverD3ColdSupport</em> routine to determine whether the failure is caused by lack of D3cold support by the parent bus driver.</p>

<p>A device on a bus can make a transition to the D3cold substate only if the bus driver supports this transition. If the bus driver doesn't support D3cold, the device never enters D3cold, even if the function driver for the device calls the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-set_d3cold_support"><strong>SetD3ColdSupport</strong></a> routine to enable the transition to D3cold. In this case, <em>SetD3ColdSupport</em> calls have no effect, but are harmless.</p>

<p>For this reason, most device drivers never need to call the <em>GetBusDriverD3ColdSupport</em> routine.</p>

<h2 id="see-also">See also</h2>

<p><strong><a href="d3cold_support_interface" title="typedef struct _D3COLD_SUPPORT_INTERFACE {&#10;  USHORT                             Size;&#10;  USHORT                             Version;&#10;  PVOID                              Context;&#10;  PINTERFACE_REFERENCE               InterfaceReference;&#10;  PINTERFACE_DEREFERENCE             InterfaceDereference;&#10;  PSET_D3COLD_SUPPORT                SetD3ColdSupport;&#10;  PGET_IDLE_WAKE_INFO                GetIdleWakeInfo;&#10;  PGET_D3COLD_CAPABILITY             GetD3ColdCapability;&#10;  PGET_D3COLD_CAPABILITY             GetBusDriverD3ColdSupport;&#10;  PGET_D3COLD_LAST_TRANSITION_STATUS GetLastTransitionStatus;&#10;} D3COLD_SUPPORT_INTERFACE, *PD3COLD_SUPPORT_INTERFACE;">D3COLD_SUPPORT_INTERFACE</a></strong></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-get_idle_wake_info"><strong>GetIdleWakeInfo</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-set_d3cold_support"><strong>SetD3ColdSupport</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-get_d3cold_capability">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/nc-wdm-get_d3cold_capability.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
