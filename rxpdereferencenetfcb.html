<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="RxpDereferenceNetFcb - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>RxpDereferenceNetFcb - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            RxpDereferenceNetFcb - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// fcb.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body"><a href="long" title="typedef long LONG;">LONG</a> RxpDereferenceNetFcb(
  PFCB Fcb
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/fcb/nf-fcb-rxpdereferencenetfcb">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/rxpdereferencenetfcb.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-fcb-rxpdereferencenetfcb)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="rxpdereferencenetfcb-function">RxpDereferenceNetFcb function</h1>

<h2 id="description">Description</h2>

<p><strong>RxpDereferenceNetFcb</strong> decrements the reference count on an FCB structure.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="fcb"><code>Fcb</code></h3>

<p>A pointer to the FCB structure to be dereferenced.</p>

<h2 id="return-value">Return value</h2>

<p><strong>RxpDereferenceNetFcb</strong> returns the final reference count after the dereference.</p>

<h2 id="remarks">Remarks</h2>

<p>The referencing and dereferencing of FCBs is different from those of the other data structures because of the embedded resource in the FCB. This implies that the caller requires information regarding the status of the FCB (whether it was finalized or not ). To finalize the FCB, two locks need to be held, the NET_ROOT name table lock as well as the FCB resource. These considerations lead to a different approach in dereferencing FCBs. Consequently, <strong>RxpDereferenceNetFcb</strong> does not attempt to finalize the FCB.</p>

<p>A number of macros are defined in <em>fcb.h</em> for debugging that are the preferred way to call this routine. These macros provide a wrapper around the <strong><a href="rxpreferencenetfcb" title="LONG RxpReferenceNetFcb(&#10;  PFCB Fcb&#10;);">RxpReferenceNetFcb</a></strong> or <strong>RxpDereferenceNetFcb</strong> routines used for file structure management operations on FCB structures. The <strong>RxDereferenceNetFcb</strong> macro is the preferred way to call this routine. This macro first calls the <strong><a href="rxptrackdereference" title="BOOLEAN RxpTrackDereference(&#10;  [in] ULONG TraceType,&#10;  [in] PCSTR FileName,&#10;  [in] ULONG Line,&#10;       PVOID Instance&#10;);">RxpTrackDereference</a></strong> routine to log diagnostic information about the request before calling the <strong>RxpDereferenceNetFcb</strong> routine.</p>

<p>On checked builds, <strong>RxpDereferenceNetFcb</strong> causes the system to <a href="assert" title="#define ASSERT( exp ) \&#10;    ((!(exp)) ? \&#10;        (RtlAssert( (PVOID)#exp, (PVOID)__FILE__, __LINE__, NULL ),FALSE) : \&#10;        TRUE)">ASSERT</a> if the node type for the structure is not an FCB or if the final reference count is less than 0.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="rxpreferencenetfcb">RxpReferenceNetFcb</a></p>

<p><a rel="noopener" target="_blank" href="rxptrackdereference">RxpTrackDereference</a></p>

<p><a rel="noopener" target="_blank" href="rxptrackreference">RxpTrackReference</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ifs/the-fcb-structure">The FCB Structure</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/fcb/nf-fcb-rxpdereferencenetfcb">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/fcb/nf-fcb-rxpdereferencenetfcb.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
