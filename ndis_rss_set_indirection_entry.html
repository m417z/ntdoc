<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NDIS_RSS_SET_INDIRECTION_ENTRY - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NDIS_RSS_SET_INDIRECTION_ENTRY - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NDIS_RSS_SET_INDIRECTION_ENTRY - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _NDIS_RSS_SET_INDIRECTION_ENTRY {
  NDIS_NIC_SWITCH_ID       SwitchId;
  NDIS_NIC_SWITCH_VPORT_ID VPortId;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                    Flags;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>                   IndirectionTableIndex;
  <a href="processor_number" title="typedef struct _PROCESSOR_NUMBER {&#10;  USHORT Group;&#10;  UCHAR  Number;&#10;  UCHAR  Reserved;&#10;} PROCESSOR_NUMBER, *PPROCESSOR_NUMBER;">PROCESSOR_NUMBER</a>         TargetProcessorNumber;
  NDIS_STATUS              EntryStatus;
} NDIS_RSS_SET_INDIRECTION_ENTRY, *PNDIS_RSS_SET_INDIRECTION_ENTRY;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddndis/ns-ntddndis-_ndis_rss_set_indirection_entry">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndis_rss_set_indirection_entry.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntddndis-_ndis_rss_set_indirection_entry)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_ndis_rss_set_indirection_entry-structure">_NDIS_RSS_SET_INDIRECTION_ENTRY structure</h1>

<h2 id="description">Description</h2>

<blockquote>
  <p>[!WARNING]
  Some information in this topic relates to prereleased product, which may be substantially modified before it's commercially released. Microsoft makes no warranties, express or implied, with respect to the information provided here.</p>
  
  <p>RSSv2 is preview only in Windows 10, version 1803.</p>
</blockquote>

<p>The <strong>NDIS_RSS_SET_INDIRECTION_ENTRY</strong> structure represents a command to set a single indirection table entry. It is contained in an <a href="ndis_rss_set_indirection_entries" title="typedef struct _NDIS_RSS_SET_INDIRECTION_ENTRIES {&#10;  NDIS_OBJECT_HEADER Header;&#10;  ULONG              Flags;&#10;  ULONG              RssEntrySize;&#10;  ULONG              RssEntryTableOffset;&#10;  ULONG              NumberOfRssEntries;&#10;} NDIS_RSS_SET_INDIRECTION_ENTRIES, *PNDIS_RSS_SET_INDIRECTION_ENTRIES;">NDIS_RSS_SET_INDIRECTION_ENTRIES</a> structure, which is used in the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-gen-rss-set-indirection-table-entries">OID_GEN_RSS_SET_INDIRECTION_TABLE_ENTRIES</a> OID. OID_GEN_RSS_SET_INDIRECTION_TABLE_ENTRIES is a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/synchronous-oid-request-interface-in-ndis-6-80">Synchronous OID</a> for <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/receive-side-scaling-version-2-rssv2-">RSS Version 2 (RSSv2)</a>.</p>

<h2 id="members">Members</h2>

<h3 id="switchid"><code>SwitchId</code></h3>

<p>An NDIS_NIC_SWITCH_ID value that represents the NIC switch where the VPort resides.</p>

<p>The switch identifier is an integer between zero and the number of switches that the network adapter supports. An NDIS_DEFAULT_SWITCH_ID value indicates the default network adapter switch.</p>

<p>This field should be set to <strong>0</strong> in the Native RSS case.</p>

<h3 id="vportid"><code>VPortId</code></h3>

<p>An NDIS_NIC_SWITCH_VPORT_ID value that represents the VPort identifier.</p>

<p>This field should be set to <strong>0</strong> in the Native RSS case.</p>

<h3 id="flags"><code>Flags</code></h3>

<p>A <strong><a href="ulong" title="typedef unsigned long ULONG;">ULONG</a></strong> value that contains a bitwise OR of flags. This member qualifies the information in this structure.</p>

<p>Possible flags are as follows:</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>NDIS_RSS_SET_INDIRECTION_ENTRY_FLAG_PRIMARY_PROCESSOR</strong></td>
  <td>Indicates that the <strong>NDIS_RSS_SET_INDIRECTION_ENTRY</strong> is referring to the primary processor of the scaling entity. The indirection table is not used. When the primary processor is <em>inactive</em> (RSS is enabled), the miniport driver should track updates to entries with this flag set so it knows which processor will be the primary when RSS is disabled.</td>
</tr>
<tr>
  <td><strong>NDIS_RSS_SET_INDIRECTION_ENTRY_FLAG_DEFAULT_PROCESSOR</strong></td>
  <td>Indicates that the <strong>NDIS_RSS_SET_INDIRECTION_ENTRY</strong> is referring to the default processor of the scaling entity. The default processor handles unhashed packets. The indirection table is not used. When the default processor is <em>inactive</em> (RSS is disabled), the miniport driver should track updates to entries with this flag set so it knows which processor will be default when RSS is enabled.</td>
</tr>
</tbody>
</table>

<h3 id="indirectiontableindex"><code>IndirectionTableIndex</code></h3>

<p>The hash index of the ITE that currently points to the current CPU and is being modified to point to another processor. When the indirection table is <em>inactive</em> (RSS is disabled), the miniport driver should track updates to indirection table entries so it has the correct indirection table when RSS is enabled.</p>

<h3 id="targetprocessornumber"><code>TargetProcessorNumber</code></h3>

<p>The target processor number to which the ITE should point upon completion. The miniport driver should succeed ITE moves from current to current processor.</p>

<h3 id="entrystatus"><code>EntryStatus</code></h3>

<p>An NDIS_STATUS code indicating the status of the move operation for this entry. Because <strong>NDIS_RSS_SET_INDIRECTION_ENTRY</strong> is used in the context of a Synchronous OID call, the miniport driver cannot return <strong>NDIS_STATUS_PENDING</strong> for this member.</p>

<p>To simplify miniport drivers' implementation, the upper layer protocol will initialize this field to NDIS_STATUS_PENDING. Miniport drivers must overwrite NDIS_STATUS_PENDING with either a success or failure NDIS status code. If the upper layer detects that this field is still NDIS_STATUS_PENDING upon completion of the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-gen-rss-set-indirection-table-entries">OID_GEN_RSS_SET_INDIRECTION_TABLE_ENTRIES</a> OID, it will cause a system bug check and indicate that the miniport driver is at fault.</p>

<blockquote>
  <p>[!IMPORTANT]
  All <strong>NDIS_RSS_SET_INDIRECTION_ENTRY</strong> structures in a group, contained in an <strong><a href="ndis_rss_set_indirection_entries" title="typedef struct _NDIS_RSS_SET_INDIRECTION_ENTRIES {&#10;  NDIS_OBJECT_HEADER Header;&#10;  ULONG              Flags;&#10;  ULONG              RssEntrySize;&#10;  ULONG              RssEntryTableOffset;&#10;  ULONG              NumberOfRssEntries;&#10;} NDIS_RSS_SET_INDIRECTION_ENTRIES, *PNDIS_RSS_SET_INDIRECTION_ENTRIES;">NDIS_RSS_SET_INDIRECTION_ENTRIES</a></strong> structure, must be marked with the same <strong>EntryStatus</strong>.</p>
</blockquote>

<p>If an error occurs with this move command, set <strong>EntryStatus</strong> to one of the following status codes for that error condition:</p>

<table>
<thead>
<tr>
  <th>Status code</th>
  <th>Error condition</th>
</tr>
</thead>
<tbody>
<tr>
  <td>NDIS_STATUS_INVALID_PARAMETER</td>
</tr>
</tbody>
</table>

<ul>
<li>The <strong>SwitchId</strong> or <strong>VPortId</strong> member was invalid.</li>
<li>The <strong>Flags</strong> member was invalid.</li>
<li>The <strong>IndirectionTableIndex</strong> member exceeds the currently configured <strong>NumberOfIndirectionTableEntries</strong> from the <strong><a href="ndis_receive_scale_parameters_v2" title="typedef struct _NDIS_RECEIVE_SCALE_PARAMETERS_V2 {&#10;  NDIS_OBJECT_HEADER Header;&#10;  ULONG              Flags;&#10;  ULONG              HashInformation;&#10;  ULONG              HashSecretKeySize;&#10;  ULONG              HashSecretKeyOffset;&#10;  ULONG              NumberOfQueues;&#10;  ULONG              NumberOfIndirectionTableEntries;&#10;} NDIS_RECEIVE_SCALE_PARAMETERS_V2, *PNDIS_RECEIVE_SCALE_PARAMETERS_V2;">NDIS_RECEIVE_SCALE_PARAMETERS_V2</a></strong> structure.</li>
</ul>

<p>|
| NDIS_STATUS_INVALID_PORT_STATE | The VPort is not activated or is in some other state that prevents it from accepting RSSv2 OIDs. |
| NDIS_STATUS_NOT_ACCEPTED | The actor CPU was invalid. |
| NDIS_STATUS_INVALID_DATA | For an <em>active</em> steering parameter, the new processor is not part of the adapter's RSS processor set. Note that <em>inactive</em> parameters only need to be tracked. They are validated later, during RSS state transition (to <em>on</em> or <em>off</em>). |
| NDIS_STATUS_NO_QUEUES | A group of command entries fails the "number of queues" check for the VPort specified by that group. |</p>

<h2 id="see-also">See also</h2>

<p><a href="ndis_rss_set_indirection_entries" title="typedef struct _NDIS_RSS_SET_INDIRECTION_ENTRIES {&#10;  NDIS_OBJECT_HEADER Header;&#10;  ULONG              Flags;&#10;  ULONG              RssEntrySize;&#10;  ULONG              RssEntryTableOffset;&#10;  ULONG              NumberOfRssEntries;&#10;} NDIS_RSS_SET_INDIRECTION_ENTRIES, *PNDIS_RSS_SET_INDIRECTION_ENTRIES;">NDIS_RSS_SET_INDIRECTION_ENTRIES</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-gen-rss-set-indirection-table-entries">OID_GEN_RSS_SET_INDIRECTION_TABLE_ENTRIES</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/receive-side-scaling-version-2-rssv2-">Receive Side Scaling Version 2 (RSSv2)</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/synchronous-oid-request-interface-in-ndis-6-80">Synchronous OID request interface in NDIS 6.80</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddndis/ns-ntddndis-_ndis_rss_set_indirection_entry">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddndis/ns-ntddndis-_ndis_rss_set_indirection_entry.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
