<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="VideoPortInitialize - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>VideoPortInitialize - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            VideoPortInitialize - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// video.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">VIDEOPORT_API <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> VideoPortInitialize(
  PVOID                         Argument1,
  PVOID                         Argument2,
  <a href="video_hw_initialization_data" title="typedef struct _VIDEO_HW_INITIALIZATION_DATA {&#10;  ULONG                          HwInitDataSize;&#10;  INTERFACE_TYPE                 AdapterInterfaceType;&#10;  PVIDEO_HW_FIND_ADAPTER         HwFindAdapter;&#10;  PVIDEO_HW_INITIALIZE           HwInitialize;&#10;  PVIDEO_HW_INTERRUPT            HwInterrupt;&#10;  PVIDEO_HW_START_IO             HwStartIO;&#10;  ULONG                          HwDeviceExtensionSize;&#10;  ULONG                          StartingDeviceNumber;&#10;  PVIDEO_HW_RESET_HW             HwResetHw;&#10;  PVIDEO_HW_TIMER                HwTimer;&#10;  PVIDEO_HW_START_DMA            HwStartDma;&#10;  PVIDEO_HW_POWER_SET            HwSetPowerState;&#10;  PVIDEO_HW_POWER_GET            HwGetPowerState;&#10;  PVIDEO_HW_GET_CHILD_DESCRIPTOR HwGetVideoChildDescriptor;&#10;  PVIDEO_HW_QUERY_INTERFACE      HwQueryInterface;&#10;  ULONG                          HwChildDeviceExtensionSize;&#10;  PVIDEO_ACCESS_RANGE            HwLegacyResourceList;&#10;  ULONG                          HwLegacyResourceCount;&#10;  PVIDEO_HW_LEGACYRESOURCES      HwGetLegacyResources;&#10;...">PVIDEO_HW_INITIALIZATION_DATA</a> HwInitializationData,
  PVOID                         HwContext
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/nf-video-videoportinitialize">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/videoportinitialize.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-video-videoportinitialize)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="videoportinitialize-function">VideoPortInitialize function</h1>

<h2 id="description">Description</h2>

<p>The <strong>VideoPortInitialize</strong> function performs part of the miniport driver initialization, allocating system resources for the miniport driver.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="argument1"><code>Argument1</code></h3>

<p>A pointer with which the operating system called <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/driverentry-of-video-miniport-driver">DriverEntry of Video Miniport Driver</a>.</p>

<h3 id="argument2"><code>Argument2</code></h3>

<p>A second pointer with which the operating system called <strong><a href="driverentry" title="NTSTATUS DriverEntry(&#10;  [in] PDRIVER_OBJECT  DriverObject,&#10;  [in] PUNICODE_STRING RegistryPath&#10;);">DriverEntry</a></strong>.</p>

<h3 id="hwinitializationdata"><code>HwInitializationData</code></h3>

<p>Pointer to the <a rel="noopener" target="_blank" href="video_hw_initialization_data">VIDEO_HW_INITIALIZATION_DATA</a> structure on the stack. The miniport driver's <strong><a href="driverentry" title="NTSTATUS DriverEntry(&#10;  [in] PDRIVER_OBJECT  DriverObject,&#10;  [in] PUNICODE_STRING RegistryPath&#10;);">DriverEntry</a></strong> routine zero-initialized this structure and then filled it in with driver-specific configuration information describing a video adapter that the miniport driver can support.</p>

<h3 id="hwcontext"><code>HwContext</code></h3>

<p>Must be <strong>NULL</strong>.</p>

<h2 id="return-value">Return value</h2>

<p><strong>VideoPortInitialize</strong> returns the final status of the initialization operation.</p>

<h2 id="remarks">Remarks</h2>

<p>Every video miniport driver must call <strong>VideoPortInitialize</strong> from its <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/storage/driverentry-of-ide-controller-minidriver">DriverEntry</a> function. <strong><a href="driverentry" title="NTSTATUS DriverEntry(&#10;  [in] PDRIVER_OBJECT  DriverObject,&#10;  [in] PUNICODE_STRING RegistryPath&#10;);">DriverEntry</a></strong> can call <strong>VideoPortInitialize</strong> only after it has first zero-initialized and then set up the <a rel="noopener" target="_blank" href="video_hw_initialization_data">VIDEO_HW_INITIALIZATION_DATA</a> structure. <strong>VideoPortInitialize</strong> can be called only from a miniport driver's <strong><a href="driverentry" title="NTSTATUS DriverEntry(&#10;  [in] PDRIVER_OBJECT  DriverObject,&#10;  [in] PUNICODE_STRING RegistryPath&#10;);">DriverEntry</a></strong> function.</p>

<p>The <strong>VideoPortInitialize</strong> function:</p>

<ul>
<li>Checks the validity of the miniport driver's <a href="video_hw_initialization_data" title="typedef struct _VIDEO_HW_INITIALIZATION_DATA {&#10;  ULONG                          HwInitDataSize;&#10;  INTERFACE_TYPE                 AdapterInterfaceType;&#10;  PVIDEO_HW_FIND_ADAPTER         HwFindAdapter;&#10;  PVIDEO_HW_INITIALIZE           HwInitialize;&#10;  PVIDEO_HW_INTERRUPT            HwInterrupt;&#10;  PVIDEO_HW_START_IO             HwStartIO;&#10;  ULONG                          HwDeviceExtensionSize;&#10;  ULONG                          StartingDeviceNumber;&#10;  PVIDEO_HW_RESET_HW             HwResetHw;&#10;  PVIDEO_HW_TIMER                HwTimer;&#10;  PVIDEO_HW_START_DMA            HwStartDma;&#10;  PVIDEO_HW_POWER_SET            HwSetPowerState;&#10;  PVIDEO_HW_POWER_GET            HwGetPowerState;&#10;  PVIDEO_HW_GET_CHILD_DESCRIPTOR HwGetVideoChildDescriptor;&#10;  PVIDEO_HW_QUERY_INTERFACE      HwQueryInterface;&#10;  ULONG                          HwChildDeviceExtensionSize;&#10;  PVIDEO_ACCESS_RANGE            HwLegacyResourceList;&#10;  ULONG                          HwLegacyResourceCount;&#10;  PVIDEO_HW_LEGACYRESOURCES      HwGetLegacyResources;&#10;...">VIDEO_HW_INITIALIZATION_DATA</a> specifications.</li>
<li>Allocates memory for and zero-initializes a <a rel="noopener" target="_blank" href="video_port_config_info">VIDEO_PORT_CONFIG_INFO</a> structure.</li>
<li>Fills in as much adapter configuration information as it can in <a href="video_port_config_info" title="typedef struct _VIDEO_PORT_CONFIG_INFO {&#10;  ULONG                        Length;&#10;  ULONG                        SystemIoBusNumber;&#10;  INTERFACE_TYPE               AdapterInterfaceType;&#10;  ULONG                        BusInterruptLevel;&#10;  ULONG                        BusInterruptVector;&#10;  KINTERRUPT_MODE              InterruptMode;&#10;  ULONG                        NumEmulatorAccessEntries;&#10;  PEMULATOR_ACCESS_ENTRY       EmulatorAccessEntries;&#10;  ULONG_PTR                    EmulatorAccessEntriesContext;&#10;  PHYSICAL_ADDRESS             VdmPhysicalVideoMemoryAddress;&#10;  ULONG                        VdmPhysicalVideoMemoryLength;&#10;  ULONG                        HardwareStateSize;&#10;  ULONG                        DmaChannel;&#10;  ULONG                        DmaPort;&#10;  UCHAR                        DmaShareable;&#10;  UCHAR                        InterruptShareable;&#10;  BOOLEAN                      Master;&#10;  DMA_WIDTH                    DmaWidth;&#10;  DMA_SPEED                    DmaSpeed;&#10;...">VIDEO_PORT_CONFIG_INFO</a>.</li>
<li>Fills in some of the public members of the device object created by the system to represent the graphics adapter. The video port driver manages the device objects, therefore, the miniport driver need not be concerned with device object details.</li>
<li>Allocates memory for, and zero-initializes the device extension of, the device object. A <em>device extension</em> is each miniport driver's primary and only global storage area for adapter-specific state information. The miniport driver specifies the size of the device extension in the <strong>HwDeviceExtensionSize</strong> member of <a href="video_hw_initialization_data" title="typedef struct _VIDEO_HW_INITIALIZATION_DATA {&#10;  ULONG                          HwInitDataSize;&#10;  INTERFACE_TYPE                 AdapterInterfaceType;&#10;  PVIDEO_HW_FIND_ADAPTER         HwFindAdapter;&#10;  PVIDEO_HW_INITIALIZE           HwInitialize;&#10;  PVIDEO_HW_INTERRUPT            HwInterrupt;&#10;  PVIDEO_HW_START_IO             HwStartIO;&#10;  ULONG                          HwDeviceExtensionSize;&#10;  ULONG                          StartingDeviceNumber;&#10;  PVIDEO_HW_RESET_HW             HwResetHw;&#10;  PVIDEO_HW_TIMER                HwTimer;&#10;  PVIDEO_HW_START_DMA            HwStartDma;&#10;  PVIDEO_HW_POWER_SET            HwSetPowerState;&#10;  PVIDEO_HW_POWER_GET            HwGetPowerState;&#10;  PVIDEO_HW_GET_CHILD_DESCRIPTOR HwGetVideoChildDescriptor;&#10;  PVIDEO_HW_QUERY_INTERFACE      HwQueryInterface;&#10;  ULONG                          HwChildDeviceExtensionSize;&#10;  PVIDEO_ACCESS_RANGE            HwLegacyResourceList;&#10;  ULONG                          HwLegacyResourceCount;&#10;  PVIDEO_HW_LEGACYRESOURCES      HwGetLegacyResources;&#10;...">VIDEO_HW_INITIALIZATION_DATA</a>. The video port driver passes this device extension to most of the miniport driver functions that it calls.</li>
<li>Collects and stores pertinent information in the device extension.</li>
</ul>

<p>The miniport driver's <strong><a href="driverentry" title="NTSTATUS DriverEntry(&#10;  [in] PDRIVER_OBJECT  DriverObject,&#10;  [in] PUNICODE_STRING RegistryPath&#10;);">DriverEntry</a></strong> routine propagates the value returned by <strong>VideoPortInitialize</strong> back to its caller. Miniport drivers should not use this return value.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/driverentry-of-video-miniport-driver">DriverEntry of Video Miniport Driver</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/nc-video-pvideo_hw_find_adapter">HwVidFindAdapter</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/nc-video-pvideo_hw_initialize">HwVidInitialize</a></p>

<p><a rel="noopener" target="_blank" href="video_hw_initialization_data">VIDEO_HW_INITIALIZATION_DATA</a></p>

<p><a rel="noopener" target="_blank" href="video_port_config_info">VIDEO_PORT_CONFIG_INFO</a></p>

<p><a rel="noopener" target="_blank" href="videoportzeromemory">VideoPortZeroMemory</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/nf-video-videoportinitialize">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/video/nf-video-videoportinitialize.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
