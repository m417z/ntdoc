<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="WdmlibIoGetAffinityInterrupt - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>WdmlibIoGetAffinityInterrupt - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            WdmlibIoGetAffinityInterrupt - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// iointex.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> WdmlibIoGetAffinityInterrupt(
  [in]  PKINTERRUPT     InterruptObject,
  [out] <a href="group_affinity" title="typedef struct _GROUP_AFFINITY {&#10;  KAFFINITY Mask;&#10;  USHORT    Group;&#10;  USHORT    Reserved[3];&#10;} GROUP_AFFINITY, *PGROUP_AFFINITY;">PGROUP_AFFINITY</a> GroupAffinity
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/iointex/nf-iointex-wdmlibiogetaffinityinterrupt">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/wdmlibiogetaffinityinterrupt.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-iointex-wdmlibiogetaffinityinterrupt)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="wdmlibiogetaffinityinterrupt-function">WdmlibIoGetAffinityInterrupt function</h1>

<h2 id="description">Description</h2>

<p>The <strong>WdmlibIoGetAffinityInterrupt</strong> function gets the group affinity of an interrupt object.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="interruptobject-in"><code>InterruptObject</code> [in]</h3>

<p>A pointer to an interrupt object. This parameter points to a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/eprocess">KINTERRUPT</a> structure that represents a registration by a driver to receive device interrupts. The structure is opaque. The caller obtained this pointer value in a previous call to the <a href="wdmlibioconnectinterruptex" title="NTSTATUS WdmlibIoConnectInterruptEx(&#10;  [in, out] PIO_CONNECT_INTERRUPT_PARAMETERS Parameters&#10;);">WdmlibIoConnectInterruptEx</a> or <a href="ioconnectinterrupt" title="NTSTATUS IoConnectInterrupt(&#10;  [out]          PKINTERRUPT       *InterruptObject,&#10;  [in]           PKSERVICE_ROUTINE ServiceRoutine,&#10;  [in, optional] PVOID             ServiceContext,&#10;  [in, optional] PKSPIN_LOCK       SpinLock,&#10;  [in]           ULONG             Vector,&#10;  [in]           KIRQL             Irql,&#10;  [in]           KIRQL             SynchronizeIrql,&#10;  [in]           KINTERRUPT_MODE   InterruptMode,&#10;  [in]           BOOLEAN           ShareVector,&#10;  [in]           KAFFINITY         ProcessorEnableMask,&#10;  [in]           BOOLEAN           FloatingSave&#10;);">IoConnectInterrupt</a> routine.</p>

<h3 id="groupaffinity-out"><code>GroupAffinity</code> [out]</h3>

<p>A pointer to a caller-allocated buffer into which the routine writes a <a href="group_affinity" title="typedef struct _GROUP_AFFINITY {&#10;  KAFFINITY Mask;&#10;  USHORT    Group;&#10;  USHORT    Reserved[3];&#10;} GROUP_AFFINITY, *PGROUP_AFFINITY;">GROUP_AFFINITY</a> structure that specifies the group affinity of the interrupt object that <em>InterruptObject</em> points to. This buffer must be large enough to contain the structure.</p>

<h2 id="return-value">Return value</h2>

<p><strong>WdmlibIoGetAffinityInterrupt</strong> returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if the call is successful. Possible error return values include the following:</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>STATUS_INVALID_PARAMETER</strong></td>
  <td>The <em>InterruptObject</em> parameter does not point to a valid interrupt object.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p>A kernel-mode driver calls this routine to get the set of logical processors on which the driver's registered interrupt service routine (ISR) can receive device interrupts. This set of processors is described by a <strong><a href="group_affinity" title="typedef struct _GROUP_AFFINITY {&#10;  KAFFINITY Mask;&#10;  USHORT    Group;&#10;  USHORT    Reserved[3];&#10;} GROUP_AFFINITY, *PGROUP_AFFINITY;">GROUP_AFFINITY</a></strong> structure, which specifies a group number and an affinity mask. All the processors that are assigned to a particular ISR registration must belong to the same group.</p>

<p>The driver registered the ISR in a previous call to the <a href="wdmlibioconnectinterruptex" title="NTSTATUS WdmlibIoConnectInterruptEx(&#10;  [in, out] PIO_CONNECT_INTERRUPT_PARAMETERS Parameters&#10;);">WdmlibIoConnectInterruptEx</a> or <strong><a href="ioconnectinterrupt" title="NTSTATUS IoConnectInterrupt(&#10;  [out]          PKINTERRUPT       *InterruptObject,&#10;  [in]           PKSERVICE_ROUTINE ServiceRoutine,&#10;  [in, optional] PVOID             ServiceContext,&#10;  [in, optional] PKSPIN_LOCK       SpinLock,&#10;  [in]           ULONG             Vector,&#10;  [in]           KIRQL             Irql,&#10;  [in]           KIRQL             SynchronizeIrql,&#10;  [in]           KINTERRUPT_MODE   InterruptMode,&#10;  [in]           BOOLEAN           ShareVector,&#10;  [in]           KAFFINITY         ProcessorEnableMask,&#10;  [in]           BOOLEAN           FloatingSave&#10;);">IoConnectInterrupt</a></strong> routine.</p>

<p>In Windows 7, <a href="wdmlibioconnectinterruptex" title="NTSTATUS WdmlibIoConnectInterruptEx(&#10;  [in, out] PIO_CONNECT_INTERRUPT_PARAMETERS Parameters&#10;);">WdmlibIoConnectInterruptEx</a> and <strong><a href="ioconnectinterrupt" title="NTSTATUS IoConnectInterrupt(&#10;  [out]          PKINTERRUPT       *InterruptObject,&#10;  [in]           PKSERVICE_ROUTINE ServiceRoutine,&#10;  [in, optional] PVOID             ServiceContext,&#10;  [in, optional] PKSPIN_LOCK       SpinLock,&#10;  [in]           ULONG             Vector,&#10;  [in]           KIRQL             Irql,&#10;  [in]           KIRQL             SynchronizeIrql,&#10;  [in]           KINTERRUPT_MODE   InterruptMode,&#10;  [in]           BOOLEAN           ShareVector,&#10;  [in]           KAFFINITY         ProcessorEnableMask,&#10;  [in]           BOOLEAN           FloatingSave&#10;);">IoConnectInterrupt</a></strong> assign device interrupts only to logical processors in group 0. This is by default. A driver can specify a different interrupt affinity for its device in an INF file or in its response to an <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mn-filter-resource-requirements">IRP_MN_FILTER_RESOURCE_REQUIREMENTS</a> request. For more information about how to change the interrupt affinity, see the <a rel="noopener" target="_blank" href="https://go.microsoft.com/fwlink/p/?linkid=147914">Supporting Systems That Have More Than 64 Processors</a> white paper on the WHDC website.</p>

<h2 id="see-also">See also</h2>

<p><a href="group_affinity" title="typedef struct _GROUP_AFFINITY {&#10;  KAFFINITY Mask;&#10;  USHORT    Group;&#10;  USHORT    Reserved[3];&#10;} GROUP_AFFINITY, *PGROUP_AFFINITY;">GROUP_AFFINITY</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mn-filter-resource-requirements">IRP_MN_FILTER_RESOURCE_REQUIREMENTS</a></p>

<p><a href="ioconnectinterrupt" title="NTSTATUS IoConnectInterrupt(&#10;  [out]          PKINTERRUPT       *InterruptObject,&#10;  [in]           PKSERVICE_ROUTINE ServiceRoutine,&#10;  [in, optional] PVOID             ServiceContext,&#10;  [in, optional] PKSPIN_LOCK       SpinLock,&#10;  [in]           ULONG             Vector,&#10;  [in]           KIRQL             Irql,&#10;  [in]           KIRQL             SynchronizeIrql,&#10;  [in]           KINTERRUPT_MODE   InterruptMode,&#10;  [in]           BOOLEAN           ShareVector,&#10;  [in]           KAFFINITY         ProcessorEnableMask,&#10;  [in]           BOOLEAN           FloatingSave&#10;);">IoConnectInterrupt</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/eprocess">KINTERRUPT</a></p>

<p><a href="wdmlibioconnectinterruptex" title="NTSTATUS WdmlibIoConnectInterruptEx(&#10;  [in, out] PIO_CONNECT_INTERRUPT_PARAMETERS Parameters&#10;);">WdmlibIoConnectInterruptEx</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/iointex/nf-iointex-wdmlibiogetaffinityinterrupt">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/iointex/nf-iointex-wdmlibiogetaffinityinterrupt.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
