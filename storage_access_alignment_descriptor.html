<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="STORAGE_ACCESS_ALIGNMENT_DESCRIPTOR - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>STORAGE_ACCESS_ALIGNMENT_DESCRIPTOR - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            STORAGE_ACCESS_ALIGNMENT_DESCRIPTOR - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddstor.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _STORAGE_ACCESS_ALIGNMENT_DESCRIPTOR {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> Version;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> Size;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> BytesPerCacheLine;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> BytesOffsetForCacheAlignment;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> BytesPerLogicalSector;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> BytesPerPhysicalSector;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> BytesOffsetForSectorAlignment;
} STORAGE_ACCESS_ALIGNMENT_DESCRIPTOR, *PSTORAGE_ACCESS_ALIGNMENT_DESCRIPTOR;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddstor/ns-ntddstor-_storage_access_alignment_descriptor">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// winioctl.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _STORAGE_ACCESS_ALIGNMENT_DESCRIPTOR {
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> Version;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> Size;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> BytesPerCacheLine;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> BytesOffsetForCacheAlignment;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> BytesPerLogicalSector;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> BytesPerPhysicalSector;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> BytesOffsetForSectorAlignment;
} STORAGE_ACCESS_ALIGNMENT_DESCRIPTOR, *PSTORAGE_ACCESS_ALIGNMENT_DESCRIPTOR;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ns-winioctl-storage_access_alignment_descriptor">View the official Win32 API reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/storage_access_alignment_descriptor.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntddstor-_storage_access_alignment_descriptor)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_storage_access_alignment_descriptor-structure">_STORAGE_ACCESS_ALIGNMENT_DESCRIPTOR structure</h1>

<h2 id="description">Description</h2>

<p>The STORAGE_ACCESS_ALIGNMENT_DESCRIPTOR structure is used in conjunction with the <a href="ioctl_storage_query_property" title="// CTL_CODE(0x002d, 0x500, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_STORAGE_QUERY_PROPERTY 0x002D1400">IOCTL_STORAGE_QUERY_PROPERTY</a> request to retrieve the storage access alignment descriptor data for a device.</p>

<h2 id="members">Members</h2>

<h3 id="version"><code>Version</code></h3>

<p>Contains the size of the structure STORAGE_ACCESS_ALIGNMENT_DESCRIPTOR. The value of this member will change as members are added to the structure.</p>

<h3 id="size"><code>Size</code></h3>

<p>Specifies the total size of the descriptor, in bytes.</p>

<h3 id="bytespercacheline"><code>BytesPerCacheLine</code></h3>

<p>The number of bytes in a cache line of the device.</p>

<h3 id="bytesoffsetforcachealignment"><code>BytesOffsetForCacheAlignment</code></h3>

<p>The address offset necessary for proper cache access alignment, in bytes.</p>

<h3 id="bytesperlogicalsector"><code>BytesPerLogicalSector</code></h3>

<p>The number of bytes in a logical sector of the device.</p>

<h3 id="bytesperphysicalsector"><code>BytesPerPhysicalSector</code></h3>

<p>The number of bytes in a physical sector of the device.</p>

<h3 id="bytesoffsetforsectoralignment"><code>BytesOffsetForSectorAlignment</code></h3>

<p>The logical sector offset within the first physical sector where the first logical sector is placed, in bytes.</p>

<p>Example: Offset = 3 Logical sectors</p>

<pre><code>+- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
|LBA      |X|X|X|0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|
|- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
|Physical |               |                  |
|Sector   |      0        |        1         |         2
+- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
</code></pre>

<p>In this example, BytesOffsetForSectorAlignment = 3 * size_of_logical_sector.</p>

<h2 id="remarks">Remarks</h2>

<p>Storage class drivers issue a device-control request with the I/O control code <a href="ioctl_storage_query_property" title="// CTL_CODE(0x002d, 0x500, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_STORAGE_QUERY_PROPERTY 0x002D1400">IOCTL_STORAGE_QUERY_PROPERTY</a> to retrieve this structure, which contains access alignment information for data transfer operations. The structure can be retrieved either from the device object for the bus or from an FDO, which forwards the request to the underlying bus.</p>

<h2 id="see-also">See also</h2>

<p><a href="ioctl_storage_query_property" title="// CTL_CODE(0x002d, 0x500, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_STORAGE_QUERY_PROPERTY 0x002D1400">IOCTL_STORAGE_QUERY_PROPERTY</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddstor/ns-ntddstor-_storage_access_alignment_descriptor">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddstor/ns-ntddstor-_storage_access_alignment_descriptor.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Win32 API reference (ns-winioctl-storage_access_alignment_descriptor)</h1>
</div>
<div class="ntdoc-description">
<h1>STORAGE_ACCESS_ALIGNMENT_DESCRIPTOR structure</h1>

<h2>Description</h2>

<p>Used in conjunction with the
<a href="ioctl_storage_query_property" title="// CTL_CODE(0x002d, 0x500, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_STORAGE_QUERY_PROPERTY 0x002D1400">IOCTL_STORAGE_QUERY_PROPERTY</a> control code to
retrieve the storage access alignment descriptor data for a device.</p>

<h2>Members</h2>

<h3><code>Version</code></h3>

<p>Contains the size of this structure, in bytes. The value of this member will change as members are added to
the structure.</p>

<h3><code>Size</code></h3>

<p>Specifies the total size of the data returned, in bytes. This may include data that follows this
structure.</p>

<h3><code>BytesPerCacheLine</code></h3>

<p>The number of bytes in a cache line of the device.</p>

<h3><code>BytesOffsetForCacheAlignment</code></h3>

<p>The address offset necessary for proper cache access alignment, in bytes.</p>

<h3><code>BytesPerLogicalSector</code></h3>

<p>The number of bytes in a logical sector of the device.</p>

<h3><code>BytesPerPhysicalSector</code></h3>

<p>The number of bytes in a physical sector of the device.</p>

<h3><code>BytesOffsetForSectorAlignment</code></h3>

<p>The logical sector offset within the first physical sector where the first logical sector is placed, in bytes.</p>

<p>Example: Offset = 3 Logical sectors</p>

<pre><code>+---------+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|LBA      |##|##|##|00|01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|
+---------+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|Physical |                       |                       |                ...
|Sector   |           0           |           1           |           2
+---------+-----------------------+-----------------------+---------------
</code></pre>

<p>In this example, <code>BytesOffsetForSectorAlignment = 3 * BytesPerLogicalSector</code>.</p>

<h2>See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/FileIO/disk-management-structures">Disk Management Structures</a></p>

<p><a href="ioctl_storage_query_property" title="// CTL_CODE(0x002d, 0x500, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_STORAGE_QUERY_PROPERTY 0x002D1400">IOCTL_STORAGE_QUERY_PROPERTY</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ns-winioctl-storage_access_alignment_descriptor">View the official Win32 API reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/sdk-api/blob/docs/sdk-api-src/content/winioctl/ns-winioctl-storage_access_alignment_descriptor.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
