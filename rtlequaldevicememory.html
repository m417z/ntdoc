<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="RtlEqualDeviceMemory - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>RtlEqualDeviceMemory - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            RtlEqualDeviceMemory - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">BOOL RtlEqualDeviceMemory(
   [in] const void* Source1,
   [in] const void* Source2,
   [in] <a href="size_t" title="typedef unsigned __int64 size_t;">size_t</a>      Length
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-rtlequaldevicememory">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/rtlequaldevicememory.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-wdm-rtlequaldevicememory)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>RtlEqualDeviceMemory</strong> routine compares two blocks of device memory to determine whether the specified number of bytes are identical. This function is safe for use on device memory because it uses strict alignment requirements.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="source1-in"><code>Source1</code> [in]</h3>

<p>A pointer to a caller-allocated block of device memory to compare.</p>

<h3 id="source2-in"><code>Source2</code> [in]</h3>

<p>A pointer to a caller-allocated block of device memory that is compared to the block of memory to which <strong>Source1</strong> points.</p>

<h3 id="length-in"><code>Length</code> [in]</h3>

<p>Specifies the number of bytes to be compared.</p>

<h2 id="syntax">Syntax</h2>

<div class="codehilite">
<pre><span></span><code><span class="n">BOOL</span><span class="w"> </span><span class="nf">RtlEqualDeviceMemory</span><span class="p">(</span>
<span class="w">   </span><span class="p">[</span><span class="n">in</span><span class="p">]</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">Source1</span><span class="p">,</span>
<span class="w">   </span><span class="p">[</span><span class="n">in</span><span class="p">]</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">Source2</span><span class="p">,</span>
<span class="w">   </span><span class="p">[</span><span class="n">in</span><span class="p">]</span><span class="w"> </span><span class="kt"><a href="size_t" title="typedef unsigned __int64 size_t;">size_t</a></span><span class="w">      </span><span class="n">Length</span>
<span class="p">);</span>
</code></pre>
</div>

<h2 id="return-value">Return value</h2>

<p><strong>RtlEqualDeviceMemory</strong> returns TRUE if <strong>Source1</strong> and <strong>Source2</strong> are equivalent; otherwise, it returns FALSE.</p>

<h2 id="remarks">Remarks</h2>

<p><strong>RtlEqualDeviceMemory</strong> begins the comparison with byte zero of each block.</p>

<p>The <strong>RtlEqualDeviceMemory</strong> routine is designed for safe comparison of device memory regions where standard memory comparison functions might not be appropriate due to the special characteristics of device memory.</p>

<ul>
<li>The function uses strict alignment requirements to ensure proper handling of device memory that may have side effects or special access requirements.</li>
</ul>

<p>Callers of <strong>RtlEqualDeviceMemory</strong> can be running at any IRQL if both blocks of memory are resident.</p>

<p>This function works on all versions of Windows, not just the latest. You need to consume the latest WDK to get the function declaration from the wdm.h header. You also need the library (volatileaccessk.lib) from the latest WDK. However, the resulting driver will run fine on older versions of Windows.</p>

<h3 id="example">Example</h3>

<div class="codehilite">
<pre><span></span><code><span class="n"><a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a></span><span class="w"> </span><span class="n">DeviceBuffer1</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
<span class="n"><a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a></span><span class="w"> </span><span class="n">DeviceBuffer2</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>

<span class="c1">// Read data from device memory into buffers</span>
<span class="n">ReadFromDevice</span><span class="p">(</span><span class="n">DeviceBuffer1</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">DeviceBuffer1</span><span class="p">));</span>
<span class="n">ReadFromDevice</span><span class="p">(</span><span class="n">DeviceBuffer2</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">DeviceBuffer2</span><span class="p">));</span>

<span class="c1">// Compare the device memory buffers</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">RtlEqualDeviceMemory</span><span class="p">(</span><span class="n">DeviceBuffer1</span><span class="p">,</span><span class="w"> </span><span class="n">DeviceBuffer2</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">DeviceBuffer1</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n"><a href="dbgprint" title="NTSYSAPI&#10;ULONG&#10;STDAPIVCALLTYPE&#10;DbgPrint(&#10;    _In_z_ _Printf_format_string_ PCCH Format,&#10;    ...&#10;    );">DbgPrint</a></span><span class="p">(</span><span class="s">&quot;Device buffers are identical</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n"><a href="dbgprint" title="NTSYSAPI&#10;ULONG&#10;STDAPIVCALLTYPE&#10;DbgPrint(&#10;    _In_z_ _Printf_format_string_ PCCH Format,&#10;    ...&#10;    );">DbgPrint</a></span><span class="p">(</span><span class="s">&quot;Device buffers are different</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-rtlequalmemory"><strong>RtlEqualMemory</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-rtlcomparedevicememory"><strong>RtlCompareDeviceMemory</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-rtlequaldevicememory">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/nf-wdm-rtlequaldevicememory.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
