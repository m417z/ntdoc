<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="FILE_COMPRESSION_INFORMATION - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>FILE_COMPRESSION_INFORMATION - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            FILE_COMPRESSION_INFORMATION - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">#ifndef _NTIOAPI_H

</span><span class="ntdoc-code-intro">/**
 * The FILE_COMPRESSION_INFORMATION structure describes the state of a compressed data buffer.
 * \sa https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/ntifs/ns-ntifs-_file_compression_information
 */
</span><span class="ntdoc-code-body">typedef struct _FILE_COMPRESSION_INFORMATION
{
    LARGE_INTEGER CompressedFileSize;
    <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> CompressionFormat;
    <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> CompressionUnitShift;
    <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> ChunkShift;
    <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> ClusterShift;
    <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> Reserved[3];
} FILE_COMPRESSION_INFORMATION, *PFILE_COMPRESSION_INFORMATION;
</span><span class="ntdoc-code-footer">
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/3d935379c6ac1f147cc4e3b25bed778f0d140c69/phnt/include/ntioapi.h#L516">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntifs.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _FILE_COMPRESSION_INFORMATION {
  LARGE_INTEGER CompressedFileSize;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>        CompressionFormat;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>         CompressionUnitShift;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>         ChunkShift;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>         ClusterShift;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>         Reserved[3];
} FILE_COMPRESSION_INFORMATION, *PFILE_COMPRESSION_INFORMATION;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/ns-ntifs-_file_compression_information">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<p>This structure is <a rel="noopener" target="_blank" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/ntifs/ns-ntifs-_file_compression_information">documented in Windows Driver Kit</a>.</p>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/file_compression_information.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntifs-_file_compression_information)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_file_compression_information-structure">_FILE_COMPRESSION_INFORMATION structure</h1>

<h2 id="description">Description</h2>

<p>The FILE_COMPRESSION_INFORMATION structure describes the state of a compressed data buffer.</p>

<h2 id="members">Members</h2>

<h3 id="compressedfilesize"><code>CompressedFileSize</code></h3>

<p>The size, in bytes, of the compressed file.</p>

<h3 id="compressionformat"><code>CompressionFormat</code></h3>

<p>The compression format. This member must have one of the following values:</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td><a href="compression_format_none" title="#define COMPRESSION_FORMAT_NONE (0x0000)">COMPRESSION_FORMAT_NONE</a></td>
  <td>No compression format.</td>
</tr>
<tr>
  <td><a href="compression_format_default" title="#define COMPRESSION_FORMAT_DEFAULT (0x0001)">COMPRESSION_FORMAT_DEFAULT</a></td>
  <td>Default compression format.</td>
</tr>
<tr>
  <td><a href="compression_format_lznt1" title="#define COMPRESSION_FORMAT_LZNT1 (0x0002)">COMPRESSION_FORMAT_LZNT1</a></td>
  <td>LZNT1 compression format.</td>
</tr>
</tbody>
</table>

<h3 id="compressionunitshift"><code>CompressionUnitShift</code></h3>

<p>The log, base 2, of the number of clusters per compression</p>

<p>unit. In the NTFS file system, this value is NTFS_CLUSTERS_PER_COMPRESSION.</p>

<h3 id="chunkshift"><code>ChunkShift</code></h3>

<p>The log, base 2, of the number of bytes in a chunk. In other words, the size in bytes of the chunk is 2 ** <strong>ChunkShift</strong>, or (1 &lt;&lt; <strong>ChunkShift</strong>).</p>

<h3 id="clustershift"><code>ClusterShift</code></h3>

<p>The log, base 2, of the minimum number of clusters by which compression must reduce the size of the compression unit. If compression does not reduce the size of the compression unit by at least 2 ** <strong>ClusterShift</strong> clusters (or 1 &lt;&lt; <strong>ClusterShift</strong> clusters), compression will not occur. Each compression unit must occupy at least one cluster less than the uncompressed data would occupy.</p>

<h3 id="reserved"><code>Reserved</code></h3>

<p>Reserved</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ifs/flt-parameters-for-irp-mj-query-information">FLT_PARAMETERS for IRP_MJ_QUERY_INFORMATION</a></p>

<p><a href="fltqueryinformationfile" title="NTSTATUS FLTAPI FltQueryInformationFile(&#10;  [in]            PFLT_INSTANCE          Instance,&#10;  [in]            PFILE_OBJECT           FileObject,&#10;  [out]           PVOID                  FileInformation,&#10;  [in]            ULONG                  Length,&#10;  [in]            FILE_INFORMATION_CLASS FileInformationClass,&#10;  [out, optional] PULONG                 LengthReturned&#10;);">FltQueryInformationFile</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ifs/irp-mj-query-information">IRP_MJ_QUERY_INFORMATION</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/ns-ntifs-_file_compression_information">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntifs/ns-ntifs-_file_compression_information.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
