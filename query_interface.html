<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="QUERY_INTERFACE - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>QUERY_INTERFACE - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            QUERY_INTERFACE - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// video.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _QUERY_INTERFACE {
  const GUID *InterfaceType;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>     Size;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>     Version;
  <a href="interface" title="typedef struct _INTERFACE {&#10;  USHORT                 Size;&#10;  USHORT                 Version;&#10;  PVOID                  Context;&#10;  PINTERFACE_REFERENCE   InterfaceReference;&#10;  PINTERFACE_DEREFERENCE InterfaceDereference;&#10;} INTERFACE, *PINTERFACE;">PINTERFACE</a> Interface;
  PVOID      InterfaceSpecificData;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>      DeviceUid;
} QUERY_INTERFACE, *PQUERY_INTERFACE;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/ns-video-_query_interface">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/query_interface.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-video-_query_interface)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="query_interface-structure">QUERY_INTERFACE structure</h1>

<h2 id="description">Description</h2>

<p>The <strong>QUERY_INTERFACE</strong> structure describes the interface being requested.</p>

<h2 id="members">Members</h2>

<h3 id="interfacetype"><code>InterfaceType</code></h3>

<p>Pointer to a GUID that identifies the interface being requested. If the kernel-mode display miniport driver (KMD) (or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/windows/drivers/display/video-miniport-driver-within-the-graphics-architecture--windows-2000-m">legacy video miniport driver</a>) doesn't support the specified <strong>InterfaceType</strong>, it should fail the call and return immediately.</p>

<p>The parent generates this GUID with <em>uuidgen.exe</em>. See <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/defining-and-exporting-new-guids">Defining and Exporting New GUIDs</a> for details.</p>

<h3 id="size"><code>Size</code></h3>

<p>Specifies the size in bytes of the <strong><a href="interface" title="typedef struct _INTERFACE {&#10;  USHORT                 Size;&#10;  USHORT                 Version;&#10;  PVOID                  Context;&#10;  PINTERFACE_REFERENCE   InterfaceReference;&#10;  PINTERFACE_DEREFERENCE InterfaceDereference;&#10;} INTERFACE, *PINTERFACE;">INTERFACE</a></strong> structure to which <strong>Interface</strong> points. The driver must not return an <strong><a href="interface" title="typedef struct _INTERFACE {&#10;  USHORT                 Size;&#10;  USHORT                 Version;&#10;  PVOID                  Context;&#10;  PINTERFACE_REFERENCE   InterfaceReference;&#10;  PINTERFACE_DEREFERENCE InterfaceDereference;&#10;} INTERFACE, *PINTERFACE;">INTERFACE</a></strong> structure larger than <strong>Size</strong> bytes.</p>

<h3 id="version"><code>Version</code></h3>

<p>Specifies the version of the interface being requested.</p>

<p>If a parent supports more than one version of an interface, its driver should return the specified version or, if possible, the closest supported version without exceeding the requested version. The caller is responsible for examining the returned <strong>Version</strong> and determine what to do based on that value.</p>

<h3 id="interface"><code>Interface</code></h3>

<p>Pointer to an <strong><a href="interface" title="typedef struct _INTERFACE {&#10;  USHORT                 Size;&#10;  USHORT                 Version;&#10;  PVOID                  Context;&#10;  PINTERFACE_REFERENCE   InterfaceReference;&#10;  PINTERFACE_DEREFERENCE InterfaceDereference;&#10;} INTERFACE, *PINTERFACE;">INTERFACE</a></strong> structure in which the driver returns the requested interface information. The caller is responsible for allocating this structure before calling <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_query_interface"><strong>DxgkddiQueryInterface</strong></a> (or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/nc-video-pvideo_hw_query_interface"><strong>HwVidQueryInterface</strong></a>).</p>

<h3 id="interfacespecificdata"><code>InterfaceSpecificData</code></h3>

<p>Specifies additional information about the interface being requested. Typically, this member is NULL, and the <strong>InterfaceType</strong> and <strong>Version</strong> members are sufficient for the parent to identify the interface being requested.</p>

<h3 id="deviceuid"><code>DeviceUid</code></h3>

<p>A positive integer that identifies the device for which the interface is being queried. If <strong>DeviceUid</strong> is equal to DISPLAY_ADAPTER_HW_ID (defined in <em>Video.h</em>), the device is the display adapter itself. Otherwise, <strong>DeviceUid</strong> is the identifier of a child device of the display adapter. Child device identifiers were previously assigned by the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_query_child_relations"><strong>DxgkDdiQueryChildRelations</strong></a> function. Available starting with Windows 8.1 (WDDM 1.3).</p>

<h2 id="remarks">Remarks</h2>

<p>The <strong>QueryInterface</strong> parameter of the KMD's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_query_interface"><strong>DxgkddiQueryInterface</strong></a> callback (or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/windows/drivers/display/video-miniport-driver-within-the-graphics-architecture--windows-2000-m">legacy video miniport driver</a>'s <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/nc-video-pvideo_hw_query_interface"><strong>HwVidQueryInterface</strong></a> function) is a pointer to a <strong>QUERY_INTERFACE</strong> structure.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_query_interface"><strong>DxgkddiQueryInterface</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/nc-video-pvideo_hw_query_interface"><strong>HwVidQueryInterface</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/ns-video-_query_interface">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/video/ns-video-_query_interface.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
