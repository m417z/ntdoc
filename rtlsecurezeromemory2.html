<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="RtlSecureZeroMemory2 - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>RtlSecureZeroMemory2 - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            RtlSecureZeroMemory2 - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">volatile void * RtlSecureZeroMemory2(
  [out] volatile void *Destination,
  [in]  <a href="size_t" title="typedef unsigned __int64 size_t;">size_t</a>        Length
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-rtlsecurezeromemory2">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/rtlsecurezeromemory2.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-wdm-rtlsecurezeromemory2)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>RtlSecureZeroMemory2</strong> function is a convenience wrapper around <a rel="noopener" target="_blank" href="rtlfillvolatilememory"><strong>RtlFillVolatileMemory</strong></a> and is identical to <a rel="noopener" target="_blank" href="rtlzerovolatilememory"><strong>RtlZeroVolatileMemory</strong></a>.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="destination-out"><code>Destination</code> [out]</h3>

<p>A pointer to the starting address of the block of memory to fill with zeros.</p>

<h3 id="length-in"><code>Length</code> [in]</h3>

<p>The size of the block of memory to fill with zeros, in bytes.</p>

<h2 id="return-value">Return value</h2>

<p>Returns the value of <em>Destination</em>.</p>

<h2 id="remarks">Remarks</h2>

<p>The <strong>RtlSecureZeroMemory2</strong> function is a convenience wrapper around <strong><a href="rtlfillvolatilememory" title="volatile void * RtlFillVolatileMemory(&#10;  [out] volatile void *Destination,&#10;  [in]  size_t        Length,&#10;  [in]  int           Fill&#10;);">RtlFillVolatileMemory</a></strong> and is identical to <strong><a href="rtlzerovolatilememory" title="volatile void * RtlZeroVolatileMemory(&#10;  [out] volatile void *Destination,&#10;  [in]  size_t        Length&#10;);">RtlZeroVolatileMemory</a></strong>.</p>

<p>For more information, see the remarks section of <a rel="noopener" target="_blank" href="rtlfillvolatilememory"><strong>RtlFillVolatileMemory</strong></a>.</p>

<blockquote>
  <p>[!NOTE]
  This function works on all versions of Windows, not just the latest. You need to consume the latest WDK to get the function declaration from the wdm.h header. You also need the library (volatileaccessk.lib) from the latest WDK. However, the resulting driver will run fine on older versions of Windows.</p>
</blockquote>

<h3 id="example">Example</h3>

<div class="codehilite">
<pre><span></span><code><span class="n"><a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a></span><span class="w"> </span><span class="n">SensitiveData</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>

<span class="c1">// Imagine we temporarily store some sensitive cryptographic</span>
<span class="c1">// material in a buffer.</span>

<span class="n">StoreCryptographicKey</span><span class="p">(</span><span class="o">&amp;</span><span class="n">SensitiveData</span><span class="p">);</span>

<span class="n">DoCryptographicOperation</span><span class="p">(</span><span class="o">&amp;</span><span class="n">SensitiveData</span><span class="p">);</span>

<span class="c1">// Now that we are done using the sensitive data we want to</span>
<span class="c1">// erase it from the stack. We cannot call <a href="rtlfillmemory" title="void RtlFillMemory(&#10;   void*  Destination,&#10;   size_t Length&#10;   int    Fill&#10;);">RtlFillMemory</a> because</span>
<span class="c1">// if the compiler realizes that &quot;SensitiveData&quot; is not</span>
<span class="c1">// referenced again the compiler can remove the call to <a href="rtlfillmemory" title="void RtlFillMemory(&#10;   void*  Destination,&#10;   size_t Length&#10;   int    Fill&#10;);">RtlFillMemory</a>.</span>
<span class="c1">// Instead we can call RtlSecureZeroMemory2, <a href="rtlzerovolatilememory" title="volatile void * RtlZeroVolatileMemory(&#10;  [out] volatile void *Destination,&#10;  [in]  size_t        Length&#10;);">RtlZeroVolatileMemory</a>, or <a href="rtlfillvolatilememory" title="volatile void * RtlFillVolatileMemory(&#10;  [out] volatile void *Destination,&#10;  [in]  size_t        Length,&#10;  [in]  int           Fill&#10;);">RtlFillVolatileMemory</a></span>
<span class="c1">// (the former two are convenience wrappers around the latter). These</span>
<span class="c1">// calls will not be optimized away by the compiler.</span>
<span class="c1">// Note that RtlSecureZeroMemory2 performs better than</span>
<span class="c1">// <a href="rtlsecurezeromemory" title="PVOID RtlSecureZeroMemory(&#10;  [in, out] PVOID  Ptr,&#10;  [in]      SIZE_T cnt&#10;);">RtlSecureZeroMemory</a> function.</span>

<span class="n">RtlSecureZeroMemory2</span><span class="p">(</span><span class="o">&amp;</span><span class="n">SensitiveData</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">SensitiveData</span><span class="p">));</span>
</code></pre>
</div>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="rtlfillvolatilememory"><strong>RtlFillVolatileMemory</strong></a></p>

<p><a rel="noopener" target="_blank" href="rtlzerovolatilememory"><strong>RtlZeroVolatileMemory</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-rtlsecurezeromemory2">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/nf-wdm-rtlsecurezeromemory2.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
