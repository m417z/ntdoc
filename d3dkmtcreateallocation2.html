<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="D3DKMTCreateAllocation2 - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>D3DKMTCreateAllocation2 - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            D3DKMTCreateAllocation2 - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3dkmthk.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> D3DKMTCreateAllocation2(
  <a href="d3dkmt_createallocation" title="typedef struct _D3DKMT_CREATEALLOCATION {&#10;  [in]     D3DKMT_HANDLE                hDevice;&#10;  [in/out] D3DKMT_HANDLE                hResource;&#10;  [out]    D3DKMT_HANDLE                hGlobalShare;&#10;  [in]     const VOID                   *pPrivateRuntimeData;&#10;  [in]     UINT                         PrivateRuntimeDataSize;&#10;  union {&#10;    [in]     D3DKMT_CREATESTANDARDALLOCATION *pStandardAllocation;&#10;    [in]     const VOID                      *pPrivateDriverData;&#10;  };&#10;  [in/out] UINT                         PrivateDriverDataSize;&#10;  [in]     UINT                         NumAllocations;&#10;  union {&#10;    [in]     D3DDDI_ALLOCATIONINFO  *pAllocationInfo;&#10;    [in]     D3DDDI_ALLOCATIONINFO2 *pAllocationInfo2;&#10;  };&#10;  [in]     D3DKMT_CREATEALLOCATIONFLAGS Flags;&#10;  [in]     HANDLE                       hPrivateRuntimeResourceHandle;&#10;} D3DKMT_CREATEALLOCATION;">D3DKMT_CREATEALLOCATION</a> *unnamedParam1
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmthk/nf-d3dkmthk-d3dkmtcreateallocation2">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/d3dkmtcreateallocation2.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-d3dkmthk-d3dkmtcreateallocation2)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="d3dkmtcreateallocation2-function">D3DKMTCreateAllocation2 function</h1>

<h2 id="description">Description</h2>

<p>The <strong>D3DKMTCreateAllocation2</strong> function creates or adds allocations of system or video memory.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="unnamedparam1"><code>unnamedParam1</code></h3>

<p>[in, out] <strong>pData</strong>: A pointer to a <strong><a href="d3dkmt_createallocation" title="typedef struct _D3DKMT_CREATEALLOCATION {&#10;  [in]     D3DKMT_HANDLE                hDevice;&#10;  [in/out] D3DKMT_HANDLE                hResource;&#10;  [out]    D3DKMT_HANDLE                hGlobalShare;&#10;  [in]     const VOID                   *pPrivateRuntimeData;&#10;  [in]     UINT                         PrivateRuntimeDataSize;&#10;  union {&#10;    [in]     D3DKMT_CREATESTANDARDALLOCATION *pStandardAllocation;&#10;    [in]     const VOID                      *pPrivateDriverData;&#10;  };&#10;  [in/out] UINT                         PrivateDriverDataSize;&#10;  [in]     UINT                         NumAllocations;&#10;  union {&#10;    [in]     D3DDDI_ALLOCATIONINFO  *pAllocationInfo;&#10;    [in]     D3DDDI_ALLOCATIONINFO2 *pAllocationInfo2;&#10;  };&#10;  [in]     D3DKMT_CREATEALLOCATIONFLAGS Flags;&#10;  [in]     HANDLE                       hPrivateRuntimeResourceHandle;&#10;} D3DKMT_CREATEALLOCATION;">D3DKMT_CREATEALLOCATION</a></strong> structure that contains information for creating allocations.</p>

<h2 id="return-value">Return value</h2>

<p><strong>D3DKMTCreateAllocation2</strong> returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if the operation succeeds. Otherwise, it might return an <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/ntstatus-values">NTSTATUS</a> code such as one of the following values:</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td>STATUS_DEVICE_REMOVED</td>
  <td>The graphics adapter was stopped or the display device was reset.</td>
</tr>
<tr>
  <td>STATUS_INVALID_PARAMETER</td>
  <td>Parameters were validated and determined to be incorrect.</td>
</tr>
<tr>
  <td>STATUS_NO_MEMORY</td>
  <td>This routine could not complete because of insufficient system memory.</td>
</tr>
<tr>
  <td>STATUS_NO_VIDEO_MEMORY</td>
  <td>This routine could not complete because of insufficient video memory. The video memory manager attempts to virtualize video memory. However, if the virtualization fails (such as when virtual address space runs out), the memory manager might return this error code.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p>A user-mode graphics client can call <strong>D3DKMTCreateAllocation2</strong> to create allocations and resources. An allocation can be associated with a resource or it can stand alone.</p>

<p><strong>D3DKMTCreateAllocation2</strong> can also be called to add additional allocations to a resource at anytime. The only restrictions are that all shared allocations must be associated with a resource and additional allocations cannot be added to an existing shared resource.</p>

<h3 id="examples">Examples</h3>

<h4 id="creating-a-stand-alone-allocation-in-video-memory-that-isnt-associated-with-a-resource">Creating a stand-alone allocation in video memory that isn't associated with a resource</h4>

<p>The following code example demonstrates how a user-mode graphics client can use <strong>D3DKMTCreateAllocation2</strong> to create a stand-alone allocation in video memory that is not associated with a resource.</p>

<p><!-- CODE_MARKER --></p>

<div class="codehilite">
<pre><span></span><code><span class="n">D3DKMT_HANDLE</span><span class="w"> </span><span class="nf">CreateStandAloneAllocation</span><span class="p">(</span><span class="n">D3DKMT_HANDLE</span><span class="w"> </span><span class="n">hDevice</span><span class="p">,</span><span class="w"> </span><span class="n">VOID</span><span class="o">*</span><span class="w"> </span><span class="n">pPrivateAllocationInfo</span><span class="p">,</span><span class="w"> </span><span class="n"><a href="uint" title="typedef unsigned int UINT;">UINT</a></span><span class="w"> </span><span class="n">Size</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n"><a href="d3dkmt_createallocation" title="typedef struct _D3DKMT_CREATEALLOCATION {&#10;  [in]     D3DKMT_HANDLE                hDevice;&#10;  [in/out] D3DKMT_HANDLE                hResource;&#10;  [out]    D3DKMT_HANDLE                hGlobalShare;&#10;  [in]     const VOID                   *pPrivateRuntimeData;&#10;  [in]     UINT                         PrivateRuntimeDataSize;&#10;  union {&#10;    [in]     D3DKMT_CREATESTANDARDALLOCATION *pStandardAllocation;&#10;    [in]     const VOID                      *pPrivateDriverData;&#10;  };&#10;  [in/out] UINT                         PrivateDriverDataSize;&#10;  [in]     UINT                         NumAllocations;&#10;  union {&#10;    [in]     D3DDDI_ALLOCATIONINFO  *pAllocationInfo;&#10;    [in]     D3DDDI_ALLOCATIONINFO2 *pAllocationInfo2;&#10;  };&#10;  [in]     D3DKMT_CREATEALLOCATIONFLAGS Flags;&#10;  [in]     HANDLE                       hPrivateRuntimeResourceHandle;&#10;} D3DKMT_CREATEALLOCATION;">D3DKMT_CREATEALLOCATION</a></span><span class="w"> </span><span class="n">CreateAllocation</span><span class="p">;</span>
<span class="w">    </span><span class="n"><a href="d3dddi_allocationinfo2" title="typedef struct _D3DDDI_ALLOCATIONINFO2 {&#10;  D3DKMT_HANDLE                         hAllocation;&#10;  union {&#10;    HANDLE     hSection;&#10;    const VOID *pSystemMem;&#10;  } D3DKMT_ALIGN64;&#10;  VOID                                  *pPrivateDriverData;&#10;  UINT                                  PrivateDriverDataSize;&#10;  D3DDDI_VIDEO_PRESENT_SOURCE_ID        VidPnSourceId;&#10;  union {&#10;    struct {&#10;      UINT Primary : 1;&#10;      UINT Stereo : 1;&#10;      UINT OverridePriority : 1;&#10;#if ...&#10;      UINT Reserved : 29;&#10;#elif&#10;      UINT Reserved : 30;&#10;#else&#10;      UINT Reserved : 31;&#10;...">D3DDDI_ALLOCATIONINFO2</a></span><span class="w"> </span><span class="n">AllocationInfo</span><span class="p">;</span>

<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">CreateAllocation</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">CreateAllocation</span><span class="p">));</span>
<span class="w">    </span><span class="n">CreateAllocation</span><span class="p">.</span><span class="n">hDevice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hDevice</span><span class="p">;</span>
<span class="w">    </span><span class="n">CreateAllocation</span><span class="p">.</span><span class="n">NumAllocations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="n">CreateAllocation</span><span class="p">.</span><span class="n">pAllocationInfo2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">AllocationInfo</span><span class="p">;</span>

<span class="w">    </span><span class="n">AllocationInfo</span><span class="p">.</span><span class="n">hAllocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="w">    </span><span class="n">AllocationInfo</span><span class="p">.</span><span class="n">pSystemMem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w">  </span><span class="c1">// Vidmem allocation</span>
<span class="w">    </span><span class="n">AllocationInfo</span><span class="p">.</span><span class="n">pPrivateDriverData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pPrivateAllocationInfo</span><span class="p">;</span><span class="w">  </span><span class="c1">// Contains format, size, and so on.</span>
<span class="w">    </span><span class="n">AllocationInfo</span><span class="p">.</span><span class="n">PrivateDriverDataSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Size</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n"><a href="nt_success" title="#define NT_SUCCESS(Status) (((NTSTATUS)(Status)) &gt;= 0)">NT_SUCCESS</a></span><span class="p">((</span><span class="o">*</span><span class="n">pfnKTCreateAllocation</span><span class="p">)(</span><span class="o">&amp;</span><span class="n">CreateAllocation</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">AllocationInfo</span><span class="p">.</span><span class="n">hAllocation</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<h3 id="creating-a-resource-with-a-single-system-memory-allocation">Creating a resource with a single system memory allocation</h3>

<p>The following code example demonstrates how a user-mode graphics client can use <strong>D3DKMTCreateAllocation2</strong> to create a resource with a single system memory allocation.</p>

<p><!-- CODE_MARKER --></p>

<div class="codehilite">
<pre><span></span><code><span class="n">HRESULT</span><span class="w"> </span><span class="nf">CreateSysmemResource</span><span class="p">(</span><span class="n">D3DKMT_HANDLE</span><span class="w"> </span><span class="n">hDevice</span><span class="p">,</span>
<span class="w">                             </span><span class="n"><a href="uint" title="typedef unsigned int UINT;">UINT</a></span><span class="w"> </span><span class="n">AllocationSize</span><span class="p">,</span>
<span class="w">                             </span><span class="n">VOID</span><span class="o">*</span><span class="w"> </span><span class="n">pResourceData</span><span class="p">,</span>
<span class="w">                             </span><span class="n"><a href="uint" title="typedef unsigned int UINT;">UINT</a></span><span class="w"> </span><span class="n">ResourceDataSize</span><span class="p">,</span>
<span class="w">                             </span><span class="n">VOID</span><span class="o">*</span><span class="w"> </span><span class="n">pAllocationData</span><span class="p">,</span>
<span class="w">                             </span><span class="n"><a href="uint" title="typedef unsigned int UINT;">UINT</a></span><span class="w"> </span><span class="n">AllocationDataSize</span><span class="p">,</span>
<span class="w">                             </span><span class="n">D3DKMT_HANDLE</span><span class="o">*</span><span class="w"> </span><span class="n">phResource</span><span class="p">,</span>
<span class="w">                             </span><span class="n">D3DKMT_HANDLE</span><span class="o">*</span><span class="w"> </span><span class="n">phAllocation</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n"><a href="d3dkmt_createallocation" title="typedef struct _D3DKMT_CREATEALLOCATION {&#10;  [in]     D3DKMT_HANDLE                hDevice;&#10;  [in/out] D3DKMT_HANDLE                hResource;&#10;  [out]    D3DKMT_HANDLE                hGlobalShare;&#10;  [in]     const VOID                   *pPrivateRuntimeData;&#10;  [in]     UINT                         PrivateRuntimeDataSize;&#10;  union {&#10;    [in]     D3DKMT_CREATESTANDARDALLOCATION *pStandardAllocation;&#10;    [in]     const VOID                      *pPrivateDriverData;&#10;  };&#10;  [in/out] UINT                         PrivateDriverDataSize;&#10;  [in]     UINT                         NumAllocations;&#10;  union {&#10;    [in]     D3DDDI_ALLOCATIONINFO  *pAllocationInfo;&#10;    [in]     D3DDDI_ALLOCATIONINFO2 *pAllocationInfo2;&#10;  };&#10;  [in]     D3DKMT_CREATEALLOCATIONFLAGS Flags;&#10;  [in]     HANDLE                       hPrivateRuntimeResourceHandle;&#10;} D3DKMT_CREATEALLOCATION;">D3DKMT_CREATEALLOCATION</a></span><span class="w"> </span><span class="n">CreateAllocation</span><span class="p">;</span>
<span class="w">    </span><span class="n"><a href="d3dddi_allocationinfo2" title="typedef struct _D3DDDI_ALLOCATIONINFO2 {&#10;  D3DKMT_HANDLE                         hAllocation;&#10;  union {&#10;    HANDLE     hSection;&#10;    const VOID *pSystemMem;&#10;  } D3DKMT_ALIGN64;&#10;  VOID                                  *pPrivateDriverData;&#10;  UINT                                  PrivateDriverDataSize;&#10;  D3DDDI_VIDEO_PRESENT_SOURCE_ID        VidPnSourceId;&#10;  union {&#10;    struct {&#10;      UINT Primary : 1;&#10;      UINT Stereo : 1;&#10;      UINT OverridePriority : 1;&#10;#if ...&#10;      UINT Reserved : 29;&#10;#elif&#10;      UINT Reserved : 30;&#10;#else&#10;      UINT Reserved : 31;&#10;...">D3DDDI_ALLOCATIONINFO2</a></span><span class="w"> </span><span class="n">AllocationInfo</span><span class="p">;</span>
<span class="w">    </span><span class="n">VOID</span><span class="o">*</span><span class="w"> </span><span class="n">pSysMem</span><span class="p">;</span>

<span class="w">    </span><span class="o">*</span><span class="n">phResource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="w">    </span><span class="o">*</span><span class="n">phAllocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// For a sysmem allocation, preallocate the memory.</span>
<span class="w">    </span><span class="n">pSysMem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MemAlloc</span><span class="p">(</span><span class="n">AllocationSize</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pSysMem</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">E_OUTOFMEMORY</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">CreateAllocation</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">CreateAllocation</span><span class="p">));</span>
<span class="w">    </span><span class="n">CreateAllocation</span><span class="p">.</span><span class="n">hDevice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hDevice</span><span class="p">;</span>
<span class="w">    </span><span class="n">CreateAllocation</span><span class="p">.</span><span class="n">Flags</span><span class="p">.</span><span class="n">CreateResource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TRUE</span><span class="p">;</span>
<span class="w">    </span><span class="n">CreateAllocation</span><span class="p">.</span><span class="n">pPrivateDriverData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pResourceData</span><span class="p">;</span>
<span class="w">    </span><span class="n">CreateAllocation</span><span class="p">.</span><span class="n">PrivateDriverDataSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ResourceDataSize</span><span class="p">;</span>
<span class="w">    </span><span class="n">CreateAllocation</span><span class="p">.</span><span class="n">NumAllocations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="n">CreateAllocation</span><span class="p">.</span><span class="n">pAllocationInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">AllocationInfo</span><span class="p">;</span>

<span class="w">    </span><span class="n">AllocationInfo</span><span class="p">.</span><span class="n">hAllocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="w">    </span><span class="n">AllocationInfo</span><span class="p">.</span><span class="n">pSystemMem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pSysMem</span><span class="p">;</span>
<span class="w">    </span><span class="n">AllocationInfo</span><span class="p">.</span><span class="n">pPrivateDriverData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pAllocationData</span><span class="p">;</span>
<span class="w">    </span><span class="n">AllocationInfo</span><span class="p">.</span><span class="n">PrivateDriverDataSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AllocationDataSize</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n"><a href="nt_success" title="#define NT_SUCCESS(Status) (((NTSTATUS)(Status)) &gt;= 0)">NT_SUCCESS</a></span><span class="p">((</span><span class="o">*</span><span class="n">pfnKTCreateAllocation</span><span class="p">)(</span><span class="o">&amp;</span><span class="n">CreateAllocation</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">*</span><span class="n">phResource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateAllocation</span><span class="p">.</span><span class="n">hResource</span><span class="p">;</span>
<span class="w">        </span><span class="o">*</span><span class="n">phAllocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AllocationInfo</span><span class="p">.</span><span class="n">hAllocation</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">S_OK</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">MemFree</span><span class="p">(</span><span class="n">pSysMem</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">E_FAIL</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<h2 id="see-also">See also</h2>

<p><strong><a href="d3dkmt_createallocation" title="typedef struct _D3DKMT_CREATEALLOCATION {&#10;  [in]     D3DKMT_HANDLE                hDevice;&#10;  [in/out] D3DKMT_HANDLE                hResource;&#10;  [out]    D3DKMT_HANDLE                hGlobalShare;&#10;  [in]     const VOID                   *pPrivateRuntimeData;&#10;  [in]     UINT                         PrivateRuntimeDataSize;&#10;  union {&#10;    [in]     D3DKMT_CREATESTANDARDALLOCATION *pStandardAllocation;&#10;    [in]     const VOID                      *pPrivateDriverData;&#10;  };&#10;  [in/out] UINT                         PrivateDriverDataSize;&#10;  [in]     UINT                         NumAllocations;&#10;  union {&#10;    [in]     D3DDDI_ALLOCATIONINFO  *pAllocationInfo;&#10;    [in]     D3DDDI_ALLOCATIONINFO2 *pAllocationInfo2;&#10;  };&#10;  [in]     D3DKMT_CREATEALLOCATIONFLAGS Flags;&#10;  [in]     HANDLE                       hPrivateRuntimeResourceHandle;&#10;} D3DKMT_CREATEALLOCATION;">D3DKMT_CREATEALLOCATION</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmthk/nf-d3dkmthk-d3dkmtcreateallocation2">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3dkmthk/nf-d3dkmthk-d3dkmtcreateallocation2.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
