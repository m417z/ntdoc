<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="WdfUsbTargetDeviceSelectConfig - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>WdfUsbTargetDeviceSelectConfig - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            WdfUsbTargetDeviceSelectConfig - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdfusb.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> WdfUsbTargetDeviceSelectConfig(
  [in]           WDFUSBDEVICE                         UsbDevice,
  [in, optional] <a href="wdf_object_attributes" title="typedef struct _WDF_OBJECT_ATTRIBUTES {&#10;  ULONG                          Size;&#10;  PFN_WDF_OBJECT_CONTEXT_CLEANUP EvtCleanupCallback;&#10;  PFN_WDF_OBJECT_CONTEXT_DESTROY EvtDestroyCallback;&#10;  WDF_EXECUTION_LEVEL            ExecutionLevel;&#10;  WDF_SYNCHRONIZATION_SCOPE      SynchronizationScope;&#10;  WDFOBJECT                      ParentObject;&#10;  size_t                         ContextSizeOverride;&#10;  PCWDF_OBJECT_CONTEXT_TYPE_INFO ContextTypeInfo;&#10;} WDF_OBJECT_ATTRIBUTES, *PWDF_OBJECT_ATTRIBUTES;">PWDF_OBJECT_ATTRIBUTES</a>               PipeAttributes,
  [in, out]      <a href="wdf_usb_device_select_config_params" title="typedef struct _WDF_USB_DEVICE_SELECT_CONFIG_PARAMS {&#10;  ULONG                              Size;&#10;  WdfUsbTargetDeviceSelectConfigType Type;&#10;  union {&#10;    struct {&#10;      PUSB_CONFIGURATION_DESCRIPTOR ConfigurationDescriptor;&#10;      PUSB_INTERFACE_DESCRIPTOR     *InterfaceDescriptors;&#10;      ULONG                         NumInterfaceDescriptors;&#10;    } Descriptor;&#10;    struct {&#10;      PURB Urb;&#10;    } Urb;&#10;    struct {&#10;      UCHAR           NumberConfiguredPipes;&#10;      WDFUSBINTERFACE ConfiguredUsbInterface;&#10;    } SingleInterface;&#10;    struct {&#10;      UCHAR                           NumberInterfaces;&#10;      PWDF_USB_INTERFACE_SETTING_PAIR Pairs;&#10;      UCHAR                           NumberOfConfiguredInterfaces;&#10;...">PWDF_USB_DEVICE_SELECT_CONFIG_PARAMS</a> Params
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfusb/nf-wdfusb-wdfusbtargetdeviceselectconfig">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/wdfusbtargetdeviceselectconfig.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-wdfusb-wdfusbtargetdeviceselectconfig)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="wdfusbtargetdeviceselectconfig-function">WdfUsbTargetDeviceSelectConfig function</h1>

<h2 id="description">Description</h2>

<p>[Applies to KMDF and UMDF]</p>

<p>The <strong>WdfUsbTargetDeviceSelectConfig</strong> method selects a USB configuration for a device, or it deconfigures the device.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="usbdevice-in"><code>UsbDevice</code> [in]</h3>

<p>A handle to a USB device object that was obtained from a previous call to <a href="wdfusbtargetdevicecreatewithparameters" title="NTSTATUS WdfUsbTargetDeviceCreateWithParameters(&#10;  [in]           WDFDEVICE                     Device,&#10;  [in]           PWDF_USB_DEVICE_CREATE_CONFIG Config,&#10;  [in, optional] PWDF_OBJECT_ATTRIBUTES        Attributes,&#10;  [out]          WDFUSBDEVICE                  *UsbDevice&#10;);">WdfUsbTargetDeviceCreateWithParameters</a>.</p>

<h3 id="pipeattributes-in-optional"><code>PipeAttributes</code> [in, optional]</h3>

<p>A pointer to a caller-allocated <a href="wdf_object_attributes" title="typedef struct _WDF_OBJECT_ATTRIBUTES {&#10;  ULONG                          Size;&#10;  PFN_WDF_OBJECT_CONTEXT_CLEANUP EvtCleanupCallback;&#10;  PFN_WDF_OBJECT_CONTEXT_DESTROY EvtDestroyCallback;&#10;  WDF_EXECUTION_LEVEL            ExecutionLevel;&#10;  WDF_SYNCHRONIZATION_SCOPE      SynchronizationScope;&#10;  WDFOBJECT                      ParentObject;&#10;  size_t                         ContextSizeOverride;&#10;  PCWDF_OBJECT_CONTEXT_TYPE_INFO ContextTypeInfo;&#10;} WDF_OBJECT_ATTRIBUTES, *PWDF_OBJECT_ATTRIBUTES;">WDF_OBJECT_ATTRIBUTES</a> structure that contains attributes for new framework USB pipe objects that the framework creates for the device's interfaces. For KMDF drivers, this parameter is optional and can be WDF_NO_OBJECT_ATTRIBUTES. UMDF drivers must set this parameter to NULL.</p>

<h3 id="params-in-out"><code>Params</code> [in, out]</h3>

<p>A pointer to a caller-allocated <a href="wdf_usb_device_select_config_params" title="typedef struct _WDF_USB_DEVICE_SELECT_CONFIG_PARAMS {&#10;  ULONG                              Size;&#10;  WdfUsbTargetDeviceSelectConfigType Type;&#10;  union {&#10;    struct {&#10;      PUSB_CONFIGURATION_DESCRIPTOR ConfigurationDescriptor;&#10;      PUSB_INTERFACE_DESCRIPTOR     *InterfaceDescriptors;&#10;      ULONG                         NumInterfaceDescriptors;&#10;    } Descriptor;&#10;    struct {&#10;      PURB Urb;&#10;    } Urb;&#10;    struct {&#10;      UCHAR           NumberConfiguredPipes;&#10;      WDFUSBINTERFACE ConfiguredUsbInterface;&#10;    } SingleInterface;&#10;    struct {&#10;      UCHAR                           NumberInterfaces;&#10;      PWDF_USB_INTERFACE_SETTING_PAIR Pairs;&#10;      UCHAR                           NumberOfConfiguredInterfaces;&#10;...">WDF_USB_DEVICE_SELECT_CONFIG_PARAMS</a> structure that the caller and the framework use to specify configuration parameters.</p>

<h2 id="return-value">Return value</h2>

<p><strong>WdfUsbTargetDeviceSelectConfig</strong> returns the I/O target's completion status value if the operation succeeds. Otherwise, this method can return one of the following values:</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>STATUS_INVALID_PARAMETER</strong></td>
  <td>An invalid parameter was detected.</td>
</tr>
<tr>
  <td><strong>STATUS_INFO_LENGTH_MISMATCH</strong></td>
  <td>The <strong>Size</strong> member of the <a href="wdf_usb_device_select_config_params" title="typedef struct _WDF_USB_DEVICE_SELECT_CONFIG_PARAMS {&#10;  ULONG                              Size;&#10;  WdfUsbTargetDeviceSelectConfigType Type;&#10;  union {&#10;    struct {&#10;      PUSB_CONFIGURATION_DESCRIPTOR ConfigurationDescriptor;&#10;      PUSB_INTERFACE_DESCRIPTOR     *InterfaceDescriptors;&#10;      ULONG                         NumInterfaceDescriptors;&#10;    } Descriptor;&#10;    struct {&#10;      PURB Urb;&#10;    } Urb;&#10;    struct {&#10;      UCHAR           NumberConfiguredPipes;&#10;      WDFUSBINTERFACE ConfiguredUsbInterface;&#10;    } SingleInterface;&#10;    struct {&#10;      UCHAR                           NumberInterfaces;&#10;      PWDF_USB_INTERFACE_SETTING_PAIR Pairs;&#10;      UCHAR                           NumberOfConfiguredInterfaces;&#10;...">WDF_USB_DEVICE_SELECT_CONFIG_PARAMS</a> structure that <em>Params</em> points to was incorrect.</td>
</tr>
<tr>
  <td><strong>STATUS_INSUFFICIENT_RESOURCES</strong></td>
  <td>A memory buffer could not be allocated.</td>
</tr>
<tr>
  <td><strong>STATUS_NOT_SUPPORTED</strong></td>
  <td>The framework returns this value if a UMDF driver calls WdfUsbTargetDeviceSelectConfig with <em>Params</em>-><strong>Type</strong> set to any of the following:&lt;br&gt;&lt;br&gt;* <strong>WdfUsbTargetDeviceSelectConfigTypeDeconfig</strong>&lt;br&gt;* <strong>WdfUsbTargetDeviceSelectConfigTypeInterfacesDescriptor</strong>&lt;br&gt;* <strong>WdfUsbTargetDeviceSelectConfigTypeUrb</strong>&lt;br&gt;&lt;br&gt;For more info, see <a href="wdfusbtargetdeviceselectconfigtype" title="typedef enum _WdfUsbTargetDeviceSelectConfigType {&#10;  WdfUsbTargetDeviceSelectConfigTypeInvalid = 0,&#10;  WdfUsbTargetDeviceSelectConfigTypeDeconfig = 1,&#10;  WdfUsbTargetDeviceSelectConfigTypeSingleInterface = 2,&#10;  WdfUsbTargetDeviceSelectConfigTypeMultiInterface = 3,&#10;  WdfUsbTargetDeviceSelectConfigTypeInterfacesPairs = 4,&#10;  WdfUsbTargetDeviceSelectConfigTypeInterfacesDescriptor = 5,&#10;  WdfUsbTargetDeviceSelectConfigTypeUrb = 6&#10;} WdfUsbTargetDeviceSelectConfigType;">WdfUsbTargetDeviceSelectConfigType</a>.</td>
</tr>
</tbody>
</table>

<p>This method also might return other <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/ntstatus-values">NTSTATUS values</a>.</p>

<p>A bug check occurs if the driver supplies an invalid object handle.</p>

<h2 id="remarks">Remarks</h2>

<p>Your driver can select a device configuration by using a <a href="wdf_usb_device_select_config_params" title="typedef struct _WDF_USB_DEVICE_SELECT_CONFIG_PARAMS {&#10;  ULONG                              Size;&#10;  WdfUsbTargetDeviceSelectConfigType Type;&#10;  union {&#10;    struct {&#10;      PUSB_CONFIGURATION_DESCRIPTOR ConfigurationDescriptor;&#10;      PUSB_INTERFACE_DESCRIPTOR     *InterfaceDescriptors;&#10;      ULONG                         NumInterfaceDescriptors;&#10;    } Descriptor;&#10;    struct {&#10;      PURB Urb;&#10;    } Urb;&#10;    struct {&#10;      UCHAR           NumberConfiguredPipes;&#10;      WDFUSBINTERFACE ConfiguredUsbInterface;&#10;    } SingleInterface;&#10;    struct {&#10;      UCHAR                           NumberInterfaces;&#10;      PWDF_USB_INTERFACE_SETTING_PAIR Pairs;&#10;      UCHAR                           NumberOfConfiguredInterfaces;&#10;...">WDF_USB_DEVICE_SELECT_CONFIG_PARAMS</a> structure to specify USB descriptors, a <a href="urb" title="typedef struct _URB {&#10;  union {&#10;#if ...&#10;    _URB_HEADER                                     UrbHeader;&#10;#else&#10;    struct _URB_HEADER                              UrbHeader;&#10;#endif&#10;#if ...&#10;    _URB_SELECT_INTERFACE                           UrbSelectInterface;&#10;#else&#10;    struct _URB_SELECT_INTERFACE                    UrbSelectInterface;&#10;#endif&#10;#if ...&#10;    _URB_SELECT_CONFIGURATION                       UrbSelectConfiguration;&#10;#else&#10;    struct _URB_SELECT_CONFIGURATION                UrbSelectConfiguration;&#10;#endif&#10;#if ...&#10;    _URB_PIPE_REQUEST                               UrbPipeRequest;&#10;#else&#10;...">URB</a>, or handles to framework USB interface objects.</p>

<p>The framework creates a framework USB pipe object for each pipe that is associated with each interface in the configuration, after deleting any pipe objects that the framework might have previously created for the configuration. The framework uses alternate setting zero for each interface, unless the driver specifies a different alternate setting.</p>

<p>To obtain information about an interface's pipe objects, the driver can call <a href="wdfusbinterfacegetnumconfiguredpipes" title="BYTE WdfUsbInterfaceGetNumConfiguredPipes(&#10;  [in] WDFUSBINTERFACE UsbInterface&#10;);">WdfUsbInterfaceGetNumConfiguredPipes</a> and <a href="wdfusbinterfacegetconfiguredpipe" title="WDFUSBPIPE WdfUsbInterfaceGetConfiguredPipe(&#10;  [in]                WDFUSBINTERFACE           UsbInterface,&#10;  [in]                UCHAR                     PipeIndex,&#10;  [in, out, optional] PWDF_USB_PIPE_INFORMATION PipeInfo&#10;);">WdfUsbInterfaceGetConfiguredPipe</a>.</p>

<p>For more information about the <strong>WdfUsbTargetDeviceSelectConfig</strong> method and USB I/O targets, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/wdf/usb-i-o-targets">USB I/O Targets</a>.</p>

<p><strong>Caution</strong></p>

<p>You can use <strong>WdfUsbTargetDeviceSelectConfig</strong> to select only the first USB configuration listed in the descriptor list, but you can select multiple interfaces within this single configuration.</p>

<h4 id="examples">Examples</h4>

<p>The following code example selects a configuration with a single, specified interface.</p>

<p><!-- CODE_MARKER --></p>

<div class="codehilite">
<pre><span></span><code><span class="n"><a href="wdf_usb_device_select_config_params" title="typedef struct _WDF_USB_DEVICE_SELECT_CONFIG_PARAMS {&#10;  ULONG                              Size;&#10;  WdfUsbTargetDeviceSelectConfigType Type;&#10;  union {&#10;    struct {&#10;      PUSB_CONFIGURATION_DESCRIPTOR ConfigurationDescriptor;&#10;      PUSB_INTERFACE_DESCRIPTOR     *InterfaceDescriptors;&#10;      ULONG                         NumInterfaceDescriptors;&#10;    } Descriptor;&#10;    struct {&#10;      PURB Urb;&#10;    } Urb;&#10;    struct {&#10;      UCHAR           NumberConfiguredPipes;&#10;      WDFUSBINTERFACE ConfiguredUsbInterface;&#10;    } SingleInterface;&#10;    struct {&#10;      UCHAR                           NumberInterfaces;&#10;      PWDF_USB_INTERFACE_SETTING_PAIR Pairs;&#10;      UCHAR                           NumberOfConfiguredInterfaces;&#10;...">WDF_USB_DEVICE_SELECT_CONFIG_PARAMS</a></span><span class="w">  </span><span class="n">configParams</span><span class="p">;</span>
<span class="n"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a></span><span class="w">  </span><span class="n">status</span><span class="p">;</span>

<span class="n"><a href="wdf_usb_device_select_config_params_init_single_interface" title="VOID WDF_USB_DEVICE_SELECT_CONFIG_PARAMS_INIT_SINGLE_INTERFACE(&#10;  [out] PWDF_USB_DEVICE_SELECT_CONFIG_PARAMS Params&#10;);">WDF_USB_DEVICE_SELECT_CONFIG_PARAMS_INIT_SINGLE_INTERFACE</a></span><span class="p">(</span><span class="o">&amp;</span><span class="n">configParams</span><span class="p">);</span>

<span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WdfUsbTargetDeviceSelectConfig</span><span class="p">(</span>
<span class="w">                                        </span><span class="n">UsbDevice</span><span class="p">,</span>
<span class="w">                                        </span><span class="n">WDF_NO_OBJECT_ATTRIBUTES</span><span class="p">,</span>
<span class="w">                                        </span><span class="o">&amp;</span><span class="n">configParams</span>
<span class="w">                                        </span><span class="p">);</span>
</code></pre>
</div>

<p>The following code example selects a configuration with multiple interfaces, using alternate setting zero on all interfaces. This example applies only to KMDF drivers.</p>

<p><!-- CODE_MARKER --></p>

<div class="codehilite">
<pre><span></span><code><span class="n"><a href="wdf_usb_device_select_config_params" title="typedef struct _WDF_USB_DEVICE_SELECT_CONFIG_PARAMS {&#10;  ULONG                              Size;&#10;  WdfUsbTargetDeviceSelectConfigType Type;&#10;  union {&#10;    struct {&#10;      PUSB_CONFIGURATION_DESCRIPTOR ConfigurationDescriptor;&#10;      PUSB_INTERFACE_DESCRIPTOR     *InterfaceDescriptors;&#10;      ULONG                         NumInterfaceDescriptors;&#10;    } Descriptor;&#10;    struct {&#10;      PURB Urb;&#10;    } Urb;&#10;    struct {&#10;      UCHAR           NumberConfiguredPipes;&#10;      WDFUSBINTERFACE ConfiguredUsbInterface;&#10;    } SingleInterface;&#10;    struct {&#10;      UCHAR                           NumberInterfaces;&#10;      PWDF_USB_INTERFACE_SETTING_PAIR Pairs;&#10;      UCHAR                           NumberOfConfiguredInterfaces;&#10;...">WDF_USB_DEVICE_SELECT_CONFIG_PARAMS</a></span><span class="w">  </span><span class="n">configParams</span><span class="p">;</span>
<span class="n"><a href="wdf_usb_interface_setting_pair" title="typedef struct _WDF_USB_INTERFACE_SETTING_PAIR {&#10;  WDFUSBINTERFACE UsbInterface;&#10;  UCHAR           SettingIndex;&#10;} WDF_USB_INTERFACE_SETTING_PAIR, *PWDF_USB_INTERFACE_SETTING_PAIR;">PWDF_USB_INTERFACE_SETTING_PAIR</a></span><span class="w"> </span><span class="n">settingPairs</span><span class="p">;</span>
<span class="n"><a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a></span><span class="w"> </span><span class="n">numInterfaces</span><span class="p">;</span>
<span class="n"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a></span><span class="w">  </span><span class="n">status</span><span class="p">;</span>

<span class="n">numInterfaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n"><a href="wdfusbtargetdevicegetnuminterfaces" title="UCHAR WdfUsbTargetDeviceGetNumInterfaces(&#10;  [in] WDFUSBDEVICE UsbDevice&#10;);">WdfUsbTargetDeviceGetNumInterfaces</a></span><span class="p">(</span><span class="n">UsbDevice</span><span class="p">);</span>

<span class="n">settingPairs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n"><a href="exallocatepoolwithtag" title="PVOID ExAllocatePoolWithTag(&#10;  [in] __drv_strictTypeMatch(__drv_typeExpr)POOL_TYPE PoolType,&#10;  [in] SIZE_T                                         NumberOfBytes,&#10;  [in] ULONG                                          Tag&#10;);">ExAllocatePoolWithTag</a></span><span class="p">(</span>
<span class="w">    </span><span class="n">PagedPool</span><span class="p">,</span>
<span class="w">    </span><span class="k">sizeof</span><span class="p">(</span><span class="n"><a href="wdf_usb_interface_setting_pair" title="typedef struct _WDF_USB_INTERFACE_SETTING_PAIR {&#10;  WDFUSBINTERFACE UsbInterface;&#10;  UCHAR           SettingIndex;&#10;} WDF_USB_INTERFACE_SETTING_PAIR, *PWDF_USB_INTERFACE_SETTING_PAIR;">WDF_USB_INTERFACE_SETTING_PAIR</a></span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">numInterfaces</span><span class="p">,</span>
<span class="w">    </span><span class="n">MY_DRIVER_TAG</span>
<span class="p">);</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">settingPairs</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">){</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">STATUS_INSUFFICIENT_RESOURCES</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">interfaceIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">interfaceIndex</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">numInterfaces</span><span class="p">;</span><span class="w"> </span><span class="n">interfaceIndex</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">settingPairs</span><span class="p">[</span><span class="n">interfaceIndex</span><span class="p">].</span><span class="n">UsbInterface</span><span class="w"> </span><span class="o">=</span>
<span class="w">                                    </span><span class="n"><a href="wdfusbtargetdevicegetinterface" title="WDFUSBINTERFACE WdfUsbTargetDeviceGetInterface(&#10;  [in] WDFUSBDEVICE UsbDevice,&#10;  [in] UCHAR        InterfaceIndex&#10;);">WdfUsbTargetDeviceGetInterface</a></span><span class="p">(</span>
<span class="w">                                        </span><span class="n">UsbDevice</span><span class="p">,</span>
<span class="w">                                        </span><span class="n">interfaceIndex</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Select alternate setting zero on all interfaces.</span>

<span class="w">    </span><span class="n">settingPairs</span><span class="p">[</span><span class="n">interfaceIndex</span><span class="p">].</span><span class="n">SettingIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="n"><a href="wdf_usb_device_select_config_params_init_multiple_interfaces" title="VOID WDF_USB_DEVICE_SELECT_CONFIG_PARAMS_INIT_MULTIPLE_INTERFACES(&#10;  [in, out]      PWDF_USB_DEVICE_SELECT_CONFIG_PARAMS Params,&#10;  [in, optional] UCHAR                                NumberInterfaces,&#10;  [in, optional] PWDF_USB_INTERFACE_SETTING_PAIR      SettingPairs&#10;);">WDF_USB_DEVICE_SELECT_CONFIG_PARAMS_INIT_MULTIPLE_INTERFACES</a></span><span class="p">(</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">configParams</span><span class="p">,</span>
<span class="w">    </span><span class="n">numInterfaces</span><span class="p">,</span>
<span class="w">    </span><span class="n">settingPairs</span>
<span class="p">);</span>

<span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WdfUsbTargetDeviceSelectConfig</span><span class="p">(</span>
<span class="w">    </span><span class="n">UsbDevice</span><span class="p">,</span>
<span class="w">    </span><span class="nb">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">configParams</span>
<span class="p">);</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">settingPairs</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n"><a href="exfreepoolwithtag" title="VOID ExFreePoolWithTag(&#10;  [in] PVOID P,&#10;  [in] ULONG Tag&#10;);">ExFreePoolWithTag</a></span><span class="p">(</span>
<span class="w">        </span><span class="n">settingPairs</span><span class="p">,</span>
<span class="w">        </span><span class="n">MY_DRIVER_TAG</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<h2 id="see-also">See also</h2>

<p><a href="wdf_object_attributes" title="typedef struct _WDF_OBJECT_ATTRIBUTES {&#10;  ULONG                          Size;&#10;  PFN_WDF_OBJECT_CONTEXT_CLEANUP EvtCleanupCallback;&#10;  PFN_WDF_OBJECT_CONTEXT_DESTROY EvtDestroyCallback;&#10;  WDF_EXECUTION_LEVEL            ExecutionLevel;&#10;  WDF_SYNCHRONIZATION_SCOPE      SynchronizationScope;&#10;  WDFOBJECT                      ParentObject;&#10;  size_t                         ContextSizeOverride;&#10;  PCWDF_OBJECT_CONTEXT_TYPE_INFO ContextTypeInfo;&#10;} WDF_OBJECT_ATTRIBUTES, *PWDF_OBJECT_ATTRIBUTES;">WDF_OBJECT_ATTRIBUTES</a></p>

<p><a href="wdf_usb_device_select_config_params" title="typedef struct _WDF_USB_DEVICE_SELECT_CONFIG_PARAMS {&#10;  ULONG                              Size;&#10;  WdfUsbTargetDeviceSelectConfigType Type;&#10;  union {&#10;    struct {&#10;      PUSB_CONFIGURATION_DESCRIPTOR ConfigurationDescriptor;&#10;      PUSB_INTERFACE_DESCRIPTOR     *InterfaceDescriptors;&#10;      ULONG                         NumInterfaceDescriptors;&#10;    } Descriptor;&#10;    struct {&#10;      PURB Urb;&#10;    } Urb;&#10;    struct {&#10;      UCHAR           NumberConfiguredPipes;&#10;      WDFUSBINTERFACE ConfiguredUsbInterface;&#10;    } SingleInterface;&#10;    struct {&#10;      UCHAR                           NumberInterfaces;&#10;      PWDF_USB_INTERFACE_SETTING_PAIR Pairs;&#10;      UCHAR                           NumberOfConfiguredInterfaces;&#10;...">WDF_USB_DEVICE_SELECT_CONFIG_PARAMS</a></p>

<p><a href="wdf_usb_device_select_config_params_init_multiple_interfaces" title="VOID WDF_USB_DEVICE_SELECT_CONFIG_PARAMS_INIT_MULTIPLE_INTERFACES(&#10;  [in, out]      PWDF_USB_DEVICE_SELECT_CONFIG_PARAMS Params,&#10;  [in, optional] UCHAR                                NumberInterfaces,&#10;  [in, optional] PWDF_USB_INTERFACE_SETTING_PAIR      SettingPairs&#10;);">WDF_USB_DEVICE_SELECT_CONFIG_PARAMS_INIT_MULTIPLE_INTERFACES</a></p>

<p><a href="wdf_usb_device_select_config_params_init_single_interface" title="VOID WDF_USB_DEVICE_SELECT_CONFIG_PARAMS_INIT_SINGLE_INTERFACE(&#10;  [out] PWDF_USB_DEVICE_SELECT_CONFIG_PARAMS Params&#10;);">WDF_USB_DEVICE_SELECT_CONFIG_PARAMS_INIT_SINGLE_INTERFACE</a></p>

<p><a href="wdfusbinterfacegetconfiguredpipe" title="WDFUSBPIPE WdfUsbInterfaceGetConfiguredPipe(&#10;  [in]                WDFUSBINTERFACE           UsbInterface,&#10;  [in]                UCHAR                     PipeIndex,&#10;  [in, out, optional] PWDF_USB_PIPE_INFORMATION PipeInfo&#10;);">WdfUsbInterfaceGetConfiguredPipe</a></p>

<p><a href="wdfusbinterfacegetnumconfiguredpipes" title="BYTE WdfUsbInterfaceGetNumConfiguredPipes(&#10;  [in] WDFUSBINTERFACE UsbInterface&#10;);">WdfUsbInterfaceGetNumConfiguredPipes</a></p>

<p><a href="wdfusbtargetdevicecreatewithparameters" title="NTSTATUS WdfUsbTargetDeviceCreateWithParameters(&#10;  [in]           WDFDEVICE                     Device,&#10;  [in]           PWDF_USB_DEVICE_CREATE_CONFIG Config,&#10;  [in, optional] PWDF_OBJECT_ATTRIBUTES        Attributes,&#10;  [out]          WDFUSBDEVICE                  *UsbDevice&#10;);">WdfUsbTargetDeviceCreateWithParameters</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfusb/nf-wdfusb-wdfusbtargetdeviceselectconfig">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdfusb/nf-wdfusb-wdfusbtargetdeviceselectconfig.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
