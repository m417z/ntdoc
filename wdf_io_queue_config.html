<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="WDF_IO_QUEUE_CONFIG - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>WDF_IO_QUEUE_CONFIG - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            WDF_IO_QUEUE_CONFIG - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdfio.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _WDF_IO_QUEUE_CONFIG {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                                       Size;
  <a href="wdf_io_queue_dispatch_type" title="typedef enum _WDF_IO_QUEUE_DISPATCH_TYPE {&#10;  WdfIoQueueDispatchInvalid = 0,&#10;  WdfIoQueueDispatchSequential,&#10;  WdfIoQueueDispatchParallel,&#10;  WdfIoQueueDispatchManual,&#10;  WdfIoQueueDispatchMax&#10;} WDF_IO_QUEUE_DISPATCH_TYPE;">WDF_IO_QUEUE_DISPATCH_TYPE</a>                  DispatchType;
  <a href="wdf_tri_state" title="typedef enum _WDF_TRI_STATE {&#10;  WdfFalse = FALSE,&#10;  WdfTrue = TRUE,&#10;  WdfUseDefault = 2&#10;} WDF_TRI_STATE, *PWDF_TRI_STATE;">WDF_TRI_STATE</a>                               PowerManaged;
  BOOLEAN                                     AllowZeroLengthRequests;
  BOOLEAN                                     DefaultQueue;
  PFN_WDF_IO_QUEUE_IO_DEFAULT                 EvtIoDefault;
  PFN_WDF_IO_QUEUE_IO_READ                    EvtIoRead;
  PFN_WDF_IO_QUEUE_IO_WRITE                   EvtIoWrite;
  PFN_WDF_IO_QUEUE_IO_DEVICE_CONTROL          EvtIoDeviceControl;
  PFN_WDF_IO_QUEUE_IO_INTERNAL_DEVICE_CONTROL EvtIoInternalDeviceControl;
  PFN_WDF_IO_QUEUE_IO_STOP                    EvtIoStop;
  PFN_WDF_IO_QUEUE_IO_RESUME                  EvtIoResume;
  PFN_WDF_IO_QUEUE_IO_CANCELED_ON_QUEUE       EvtIoCanceledOnQueue;
  union {
    struct {
      <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> NumberOfPresentedRequests;
    } Parallel;
  } Settings;
  WDFDRIVER                                   Driver;
} WDF_IO_QUEUE_CONFIG, *PWDF_IO_QUEUE_CONFIG;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfio/ns-wdfio-_wdf_io_queue_config">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/wdf_io_queue_config.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-wdfio-_wdf_io_queue_config)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_wdf_io_queue_config-structure">_WDF_IO_QUEUE_CONFIG structure</h1>

<h2 id="description">Description</h2>

<p>[Applies to KMDF and UMDF]</p>

<p>The <strong>WDF_IO_QUEUE_CONFIG</strong> structure contains configuration information for a framework queue object.</p>

<h2 id="members">Members</h2>

<h3 id="size"><code>Size</code></h3>

<p>The length, in bytes, of this structure.</p>

<h3 id="dispatchtype"><code>DispatchType</code></h3>

<p>A <a href="wdf_io_queue_dispatch_type" title="typedef enum _WDF_IO_QUEUE_DISPATCH_TYPE {&#10;  WdfIoQueueDispatchInvalid = 0,&#10;  WdfIoQueueDispatchSequential,&#10;  WdfIoQueueDispatchParallel,&#10;  WdfIoQueueDispatchManual,&#10;  WdfIoQueueDispatchMax&#10;} WDF_IO_QUEUE_DISPATCH_TYPE;">WDF_IO_QUEUE_DISPATCH_TYPE</a> enumerator that identifies the request dispatching type for the queue.</p>

<h3 id="powermanaged"><code>PowerManaged</code></h3>

<p>A <a href="wdf_tri_state" title="typedef enum _WDF_TRI_STATE {&#10;  WdfFalse = FALSE,&#10;  WdfTrue = TRUE,&#10;  WdfUseDefault = 2&#10;} WDF_TRI_STATE, *PWDF_TRI_STATE;">WDF_TRI_STATE</a>-typed value that, if set to <strong>WdfTrue</strong>, indicates that the framework handles power management of the queue.</p>

<p>If set to <strong>WdfFalse</strong>, the driver must handle power management of the queue.</p>

<p>If set to <strong>WdfUseDefault</strong>, the framework handles power management for the queue unless the driver calls <a href="wdffdoinitsetfilter" title="VOID WdfFdoInitSetFilter(&#10;  [in] PWDFDEVICE_INIT DeviceInit&#10;);">WdfFdoInitSetFilter</a>.</p>

<p>Drivers above the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/wdf/power-policy-ownership">power policy owner</a> in the driver stack must not set the <strong>PowerManaged</strong> member to <strong>WdfTrue</strong>.</p>

<p>For more information about power-managed I/O queues, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/wdf/power-management-for-i-o-queues">Power Management for I/O Queues</a>.</p>

<h3 id="allowzerolengthrequests"><code>AllowZeroLengthRequests</code></h3>

<p>A Boolean value that, if <strong>TRUE</strong>, indicates that the driver expects to receive read or write requests that have a buffer length of zero, so the framework delivers these requests to the driver. If <strong>FALSE</strong>, the framework does not deliver these requests to the driver; instead, it completes them with a completion status of <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a>.</p>

<h3 id="defaultqueue"><code>DefaultQueue</code></h3>

<p>A Boolean value that, if <strong>TRUE</strong>, indicates that the queue will be the device's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/wdf/creating-i-o-queues">default I/O queue</a>. If <strong>FALSE</strong>, the queue will not be the device's default queue.</p>

<h3 id="evtiodefault"><code>EvtIoDefault</code></h3>

<p>A pointer to the driver's queue-specific <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfio/nc-wdfio-evt_wdf_io_queue_io_default">EvtIoDefault</a> callback function, or <strong>NULL</strong>.</p>

<h3 id="evtioread"><code>EvtIoRead</code></h3>

<p>A pointer to the driver's queue-specific <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfio/nc-wdfio-evt_wdf_io_queue_io_read">EvtIoRead</a> callback function, or <strong>NULL</strong>.</p>

<h3 id="evtiowrite"><code>EvtIoWrite</code></h3>

<p>A pointer to the driver's queue-specific <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfio/nc-wdfio-evt_wdf_io_queue_io_write">EvtIoWrite</a> callback function, or <strong>NULL</strong>.</p>

<h3 id="evtiodevicecontrol"><code>EvtIoDeviceControl</code></h3>

<p>A pointer to the driver's queue-specific <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfio/nc-wdfio-evt_wdf_io_queue_io_device_control">EvtIoDeviceControl</a> callback function, or <strong>NULL</strong>.</p>

<h3 id="evtiointernaldevicecontrol"><code>EvtIoInternalDeviceControl</code></h3>

<p>A pointer to the driver's queue-specific <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfio/nc-wdfio-evt_wdf_io_queue_io_internal_device_control">EvtIoInternalDeviceControl</a> callback function, or <strong>NULL</strong>.</p>

<h3 id="evtiostop"><code>EvtIoStop</code></h3>

<p>A pointer to the driver's queue-specific <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfio/nc-wdfio-evt_wdf_io_queue_io_stop">EvtIoStop</a> callback function, or <strong>NULL</strong>.</p>

<h3 id="evtioresume"><code>EvtIoResume</code></h3>

<p>A pointer to the driver's queue-specific <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfio/nc-wdfio-evt_wdf_io_queue_io_resume">EvtIoResume</a> callback function, or <strong>NULL</strong>.</p>

<h3 id="evtiocanceledonqueue"><code>EvtIoCanceledOnQueue</code></h3>

<p>A pointer to the driver's queue-specific <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfio/nc-wdfio-evt_wdf_io_queue_io_canceled_on_queue">EvtIoCanceledOnQueue</a> callback function, or <strong>NULL</strong>.</p>

<h3 id="settings"><code>Settings</code></h3>

<h3 id="settingsparallel"><code>Settings.Parallel</code></h3>

<h3 id="settingsparallelnumberofpresentedrequests"><code>Settings.Parallel.NumberOfPresentedRequests</code></h3>

<p>For the parallel <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/wdf/dispatching-methods-for-i-o-requests">dispatching method</a>, the maximum number of I/O requests that the framework asynchronously delivers to the I/O queue's request handlers. For more information, see the following Remarks section. For the sequential and manual dispatching methods, this member must be zero. This member is available in version 1.9 and later versions of KMDF.</p>

<h3 id="driver"><code>Driver</code></h3>

<p>For internal use only. Set to NULL. This member is available in version 1.11 and later versions of KMDF.</p>

<h2 id="remarks">Remarks</h2>

<p>The driver must initialize the <strong>WDF_IO_QUEUE_CONFIG</strong> structure by calling <a href="wdf_io_queue_config_init" title="VOID WDF_IO_QUEUE_CONFIG_INIT(&#10;  [out] PWDF_IO_QUEUE_CONFIG       Config,&#10;  [in]  WDF_IO_QUEUE_DISPATCH_TYPE DispatchType&#10;);">WDF_IO_QUEUE_CONFIG_INIT</a> or <a href="wdf_io_queue_config_init_default_queue" title="VOID WDF_IO_QUEUE_CONFIG_INIT_DEFAULT_QUEUE(&#10;  [out] PWDF_IO_QUEUE_CONFIG       Config,&#10;  [in]  WDF_IO_QUEUE_DISPATCH_TYPE DispatchType&#10;);">WDF_IO_QUEUE_CONFIG_INIT_DEFAULT_QUEUE</a>.</p>

<p>The WDF_IO_QUEUE_CONFIG structure is used as an input parameter to <a href="wdfioqueuecreate" title="NTSTATUS WdfIoQueueCreate(&#10;  [in]            WDFDEVICE              Device,&#10;  [in]            PWDF_IO_QUEUE_CONFIG   Config,&#10;  [in, optional]  PWDF_OBJECT_ATTRIBUTES QueueAttributes,&#10;  [out, optional] WDFQUEUE               *Queue&#10;);">WdfIoQueueCreate</a>.</p>

<p>Beginning with version 1.9 of KMDF, drivers can use the <strong>NumberOfPresentedRequests</strong> member to specify the maximum number of I/O requests that the framework asynchronously delivers to a parallel I/O queue's request handlers. After the framework has delivered the specified number of I/O requests to the driver, it does not deliver more requests from the queue until the driver <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/wdf/completing-i-o-requests">completes</a>, <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/wdf/canceling-i-o-requests">cancels</a>, or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/wdf/requeuing-i-o-requests">requeues</a> at least one of the requests.</p>

<p>For parallel queues,
<a href="wdf_io_queue_config_init" title="VOID WDF_IO_QUEUE_CONFIG_INIT(&#10;  [out] PWDF_IO_QUEUE_CONFIG       Config,&#10;  [in]  WDF_IO_QUEUE_DISPATCH_TYPE DispatchType&#10;);">WDF_IO_QUEUE_CONFIG_INIT</a> and <a href="wdf_io_queue_config_init_default_queue" title="VOID WDF_IO_QUEUE_CONFIG_INIT_DEFAULT_QUEUE(&#10;  [out] PWDF_IO_QUEUE_CONFIG       Config,&#10;  [in]  WDF_IO_QUEUE_DISPATCH_TYPE DispatchType&#10;);">WDF_IO_QUEUE_CONFIG_INIT_DEFAULT_QUEUE</a> set the <strong>NumberOfPresentedRequests</strong> member to its default value (-1), which indicates that the framework can deliver an unlimited number of I/O requests to the driver.</p>

<h2 id="see-also">See also</h2>

<p><a href="wdf_io_queue_config_init" title="VOID WDF_IO_QUEUE_CONFIG_INIT(&#10;  [out] PWDF_IO_QUEUE_CONFIG       Config,&#10;  [in]  WDF_IO_QUEUE_DISPATCH_TYPE DispatchType&#10;);">WDF_IO_QUEUE_CONFIG_INIT</a></p>

<p><a href="wdf_io_queue_config_init_default_queue" title="VOID WDF_IO_QUEUE_CONFIG_INIT_DEFAULT_QUEUE(&#10;  [out] PWDF_IO_QUEUE_CONFIG       Config,&#10;  [in]  WDF_IO_QUEUE_DISPATCH_TYPE DispatchType&#10;);">WDF_IO_QUEUE_CONFIG_INIT_DEFAULT_QUEUE</a></p>

<p><a href="wdf_io_queue_dispatch_type" title="typedef enum _WDF_IO_QUEUE_DISPATCH_TYPE {&#10;  WdfIoQueueDispatchInvalid = 0,&#10;  WdfIoQueueDispatchSequential,&#10;  WdfIoQueueDispatchParallel,&#10;  WdfIoQueueDispatchManual,&#10;  WdfIoQueueDispatchMax&#10;} WDF_IO_QUEUE_DISPATCH_TYPE;">WDF_IO_QUEUE_DISPATCH_TYPE</a></p>

<p><a href="wdfioqueuecreate" title="NTSTATUS WdfIoQueueCreate(&#10;  [in]            WDFDEVICE              Device,&#10;  [in]            PWDF_IO_QUEUE_CONFIG   Config,&#10;  [in, optional]  PWDF_OBJECT_ATTRIBUTES QueueAttributes,&#10;  [out, optional] WDFQUEUE               *Queue&#10;);">WdfIoQueueCreate</a></p>

<p><a href="wdfioqueuereadynotify" title="NTSTATUS WdfIoQueueReadyNotify(&#10;  [in]           WDFQUEUE               Queue,&#10;  [in, optional] PFN_WDF_IO_QUEUE_STATE QueueReady,&#10;  [in, optional] WDFCONTEXT             Context&#10;);">WdfIoQueueReadyNotify</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfio/ns-wdfio-_wdf_io_queue_config">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdfio/ns-wdfio-_wdf_io_queue_config.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
