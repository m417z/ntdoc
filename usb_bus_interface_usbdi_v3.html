<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="USB_BUS_INTERFACE_USBDI_V3 - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>USB_BUS_INTERFACE_USBDI_V3 - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            USB_BUS_INTERFACE_USBDI_V3 - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// usbbusif.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _USB_BUS_INTERFACE_USBDI_V3 {
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>                             Size;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>                             Version;
  PVOID                              BusContext;
  <a href="pinterface_reference" title="PINTERFACE_REFERENCE PinterfaceReference;&#10;&#10;VOID PinterfaceReference(&#10;  [in] PVOID Context&#10;)&#10;{...}">PINTERFACE_REFERENCE</a>               InterfaceReference;
  <a href="pinterface_dereference" title="PINTERFACE_DEREFERENCE PinterfaceDereference;&#10;&#10;VOID PinterfaceDereference(&#10;  [in] PVOID Context&#10;)&#10;{...}">PINTERFACE_DEREFERENCE</a>             InterfaceDereference;
  <a href="pusb_busiffn_getusbdi_version" title="typedef VOID&#10;  (USB_BUSIFFN *PUSB_BUSIFFN_GETUSBDI_VERSION) (&#10;    IN PVOID,&#10;    IN OUT PUSBD_VERSION_INFORMATION,&#10;    IN OUT PULONG &#10;  );">PUSB_BUSIFFN_GETUSBDI_VERSION</a>      GetUSBDIVersion;
  <a href="pusb_busiffn_query_bus_time" title="typedef NTSTATUS&#10;  (USB_BUSIFFN *PUSB_BUSIFFN_QUERY_BUS_TIME) (&#10;    IN PVOID,&#10;    IN PULONG&#10;  );">PUSB_BUSIFFN_QUERY_BUS_TIME</a>        QueryBusTime;
  <a href="pusb_busiffn_submit_iso_out_urb" title="typedef NTSTATUS&#10;  (USB_BUSIFFN *PUSB_BUSIFFN_SUBMIT_ISO_OUT_URB) (&#10;    IN PVOID,&#10;    IN PURB&#10;  );">PUSB_BUSIFFN_SUBMIT_ISO_OUT_URB</a>    SubmitIsoOutUrb;
  <a href="pusb_busiffn_query_bus_information" title="typedef NTSTATUS&#10;  (USB_BUSIFFN *PUSB_BUSIFFN_QUERY_BUS_INFORMATION) (&#10;    IN PVOID,&#10;    IN ULONG,&#10;    IN OUT PVOID,&#10;    IN OUT PULONG,&#10;    OUT PULONG&#10;  );">PUSB_BUSIFFN_QUERY_BUS_INFORMATION</a> QueryBusInformation;
  <a href="pusb_busiffn_is_device_high_speed" title="typedef BOOLEAN&#10;  (USB_BUSIFFN *PUSB_BUSIFFN_IS_DEVICE_HIGH_SPEED) (&#10;    IN PVOID&#10;  );">PUSB_BUSIFFN_IS_DEVICE_HIGH_SPEED</a>  IsDeviceHighSpeed;
  <a href="pusb_busiffn_enum_log_entry" title="typedef NTSTATUS&#10;  (USB_BUSIFFN *PUSB_BUSIFFN_ENUM_LOG_ENTRY) (&#10;    IN PVOID,&#10;    IN ULONG,&#10;    IN ULONG,&#10;    IN ULONG,&#10;    IN ULONG&#10;);">PUSB_BUSIFFN_ENUM_LOG_ENTRY</a>        EnumLogEntry;
  <a href="pusb_busiffn_query_bus_time_ex" title="typedef NTSTATUS&#10;  (USB_BUSIFFN *PUSB_BUSIFFN_QUERY_BUS_TIME_EX) (&#10;    IN PVOID,&#10;    IN PULONG&#10;  );">PUSB_BUSIFFN_QUERY_BUS_TIME_EX</a>     QueryBusTimeEx;
  <a href="pusb_busiffn_query_controller_type" title="typedef NTSTATUS&#10;  (USB_BUSIFFN *PUSB_BUSIFFN_QUERY_CONTROLLER_TYPE) (&#10;    IN PVOID,&#10;    OUT PULONG,&#10;    OUT PUSHORT,&#10;    OUT PUSHORT,&#10;    OUT PUCHAR,&#10;    OUT PUCHAR,&#10;    OUT PUCHAR,&#10;    OUT PUCHAR&#10;  );">PUSB_BUSIFFN_QUERY_CONTROLLER_TYPE</a> QueryControllerType;
} USB_BUS_INTERFACE_USBDI_V3, *PUSB_BUS_INTERFACE_USBDI_V3;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/usbbusif/ns-usbbusif-_usb_bus_interface_usbdi_v3">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/usb_bus_interface_usbdi_v3.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-usbbusif-_usb_bus_interface_usbdi_v3)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>_USB_BUS_INTERFACE_USBDI_V3 structure</h1>
<h2>Description</h2>
<p>The <strong>USB_BUS_INTERFACE_USBDI_V3</strong> structure is provided by the USB hub driver to allow USB clients to make direct calls to the hub driver without allocating IRPs.</p>
<h2>Members</h2>
<h3><code>Size</code></h3>
<p>Specifies the size in bytes of the buffer that holds the interface pointers.</p>
<h3><code>Version</code></h3>
<p>Indicates, on input, the version of the interface. The values that this member can take are as follows.</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>USB_BUSIF_USBDI_VERSION_0</td>
<td>Version 0 of the interface.</td>
</tr>
<tr>
<td>USB_BUSIF_USBDI_VERSION_1</td>
<td>Version 1 of the interface.</td>
</tr>
<tr>
<td>USB_BUSIF_USBDI_VERSION_2</td>
<td>Version 2 of the interface.</td>
</tr>
<tr>
<td>USB_BUSIF_USBDI_VERSION_3</td>
<td>Version 3 of the interface.</td>
</tr>
</tbody>
</table>
<h3><code>BusContext</code></h3>
<p>Contains information that describes the USB bus and the USB bus driver that exposes this interface. This is an opaque entity that the caller must pass to the interface routines.</p>
<h3><code>InterfaceReference</code></h3>
<p>Pointer to a routine that increments the number of references to this interface. For more information about this routine, see <a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-pinterface_reference">InterfaceReference</a>.</p>
<h3><code>InterfaceDereference</code></h3>
<p>Pointer to a routine that decrements the number of references to this interface. For more information about this routine, see <a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-pinterface_dereference">InterfaceDereference</a>.</p>
<h3><code>GetUSBDIVersion</code></h3>
<p>Pointer to a routine that returns the USB interface version number, the version number of USB specification that defines the interface, along with host controller capabilities information. This routine returns the highest USBDI interface version supported by the port driver. For more information about this routine, see <a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/usbbusif/nc-usbbusif-pusb_busiffn_getusbdi_version">GetUSBDIVersion</a>.</p>
<h3><code>QueryBusTime</code></h3>
<p>Pointer to a routine that returns the current 32-bit USB frame number. This routine replaces the <a href="usbd_querybustime" title="NTSTATUS USBD_QueryBusTime(&#10;  [in]  PDEVICE_OBJECT RootHubPdo,&#10;  [out] PULONG         CurrentFrame&#10;);">USBD_QueryBusTime</a> function provided by usbd.sys. For more information about this routine, see <a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/usbbusif/nc-usbbusif-pusb_busiffn_query_bus_time">QueryBusTime</a>.</p>
<h3><code>SubmitIsoOutUrb</code></h3>
<p>Reserved. Do not use.</p>
<h3><code>QueryBusInformation</code></h3>
<p>Pointer to a routine that retrieves information about the bus. The information that is returned depends on the value of the <strong>Level</strong> member. If <strong>Level</strong> is 0, this routine returns bus bandwidth information. If <strong>Level</strong> is 1, it returns bus bandwidth information and the host controller's symbolic name. This routine replaces the <strong>USBD_QueryBusInformation</strong> function provided by usbd.sys. For more information about this routine, see <a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/usbbusif/nc-usbbusif-pusb_busiffn_query_bus_information">QueryBusInformation</a>.</p>
<h3><code>IsDeviceHighSpeed</code></h3>
<p>Pointer to a routine that determines if the USB device is operating at high speed. This routine returns <strong>TRUE</strong> if the USB device is operating at high speed USB 2.0 compliant device. Returns <strong>FALSE</strong> otherwise. For more information about this routine, see <a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/usbbusif/nc-usbbusif-pusb_busiffn_is_device_high_speed">IsDeviceHighSpeed</a>.</p>
<h3><code>EnumLogEntry</code></h3>
<p>Reserved. Do not use.</p>
<h3><code>QueryBusTimeEx</code></h3>
<p>This routine is not implemented.</p>
<h3><code>QueryControllerType</code></h3>
<p>Pointer to a routine that returns information about the USB host controller the USB device is attached to. For more information about this routine, see <a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/usbbusif/nc-usbbusif-pusb_busiffn_query_controller_type">QueryControllerType</a>.</p>
<h2>Remarks</h2>
<p>The <strong>IsDeviceHighSpeed</strong> routine does not indicate whether a device is capable of high-speed operation, but whether it is in fact operating at high speed.</p>
<p>The routines in this structure must be callable at IRQL &gt;= DISPATCH_LEVEL.</p>
<h2>See also</h2>
<p><a href="https://learn.microsoft.com/previous-versions/windows/hardware/drivers/ff540046(v=vs.85)">Bus Driver Interface Routines for USB Client Drivers</a></p>
<p><a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/_usbref/#structures">USB Structures</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/usbbusif/ns-usbbusif-_usb_bus_interface_usbdi_v3">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/usbbusif/ns-usbbusif-_usb_bus_interface_usbdi_v3.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
