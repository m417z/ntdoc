<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DXGK_HISTORY_BUFFER_HEADER - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DXGK_HISTORY_BUFFER_HEADER - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DXGK_HISTORY_BUFFER_HEADER - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3dkmddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _DXGK_HISTORY_BUFFER_HEADER {
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a> RenderCbSequence;
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a> NumTimestamps;
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a> PrivateDataSize;
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a> Reserved;
} DXGK_HISTORY_BUFFER_HEADER;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/ns-d3dkmddi-_dxgk_history_buffer_header">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/dxgk_history_buffer_header.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-d3dkmddi-_dxgk_history_buffer_header)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>_DXGK_HISTORY_BUFFER_HEADER structure</h1>

<h2>Description</h2>

<p>Specifies how data is stored in a <a href="dxgk_history_buffer" title="typedef struct _DXGK_HISTORY_BUFFER {&#10;  DXGK_HISTORY_BUFFER_HEADER Header;&#10;  UINT8                      DriverPrivateData[1];&#10;} DXGK_HISTORY_BUFFER;">DXGK_HISTORY_BUFFER</a> history buffer.</p>

<h2>Members</h2>

<h3><code>RenderCbSequence</code></h3>

<p>The value of the <a href="d3dddicb_renderflags" title="typedef struct _D3DDDICB_RENDERFLAGS {&#10;  union {&#10;    struct {&#10;      UINT ResizeCommandBuffer : 1;&#10;      UINT ResizeAllocationList : 1;&#10;      UINT ResizePatchLocationList : 1;&#10;      UINT NullRendering : 1;&#10;      UINT Reserved : 28;&#10;    };&#10;    UINT Value;&#10;  };&#10;} D3DDDICB_RENDERFLAGS;">D3DDDICB_RENDERFLAGS</a>.<strong>Value</strong> member that is to be used in a call to the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_rendercb">pfnRenderCb</a> function.</p>

<p>The display miniport driver should compute this value and enter it into <strong>DXGK_HISTORY_BUFFER_HEADER</strong> before calling <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_rendercb">pfnRenderCb</a>.</p>

<h3><code>NumTimestamps</code></h3>

<p>The number of time stamps that will be in the history buffer when the DMA buffer completes its execution.</p>

<p>The driver should include all time stamps that are logged, even if the buffer must be formatted before being logged to the Event Tracing for Windows (ETW) facility.</p>

<h3><code>PrivateDataSize</code></h3>

<p>The size, in bytes, of optional private data that the driver stores. The driver can use this data for any purpose.</p>

<p>If zero, the driver doesn't need to store private data in the history buffer.</p>

<p><strong>Note</strong> This value should be a multiple of 8 bytes to ensure that time stamp data is aligned to a 64-bit boundary.</p>

<p>If the history buffer doesn't need to be formatted when the DMA buffer completes its execution, then when the DirectX graphics kernel subsystem writes logs to ETW, it uses <strong>PrivateDataSize</strong> as a direct offset from the header to reference the time stamps.</p>

<h3><code>Reserved</code></h3>

<p>Reserved for system use and must be set to zero.</p>

<h2>Remarks</h2>

<p>Only the time stamp portion of the history buffer, along with the number of time stamps, will be logged to ETW. Header data and private driver data will not be logged to ETW as part of the time stamp buffer. However, parts of the header will be logged separately.</p>

<h2>See also</h2>

<p><a href="d3dddicb_renderflags" title="typedef struct _D3DDDICB_RENDERFLAGS {&#10;  union {&#10;    struct {&#10;      UINT ResizeCommandBuffer : 1;&#10;      UINT ResizeAllocationList : 1;&#10;      UINT ResizePatchLocationList : 1;&#10;      UINT NullRendering : 1;&#10;      UINT Reserved : 28;&#10;    };&#10;    UINT Value;&#10;  };&#10;} D3DDDICB_RENDERFLAGS;">D3DDDICB_RENDERFLAGS</a></p>

<p><a href="dxgk_history_buffer" title="typedef struct _DXGK_HISTORY_BUFFER {&#10;  DXGK_HISTORY_BUFFER_HEADER Header;&#10;  UINT8                      DriverPrivateData[1];&#10;} DXGK_HISTORY_BUFFER;">DXGK_HISTORY_BUFFER</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_rendercb">pfnRenderCb</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/ns-d3dkmddi-_dxgk_history_buffer_header">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3dkmddi/ns-d3dkmddi-_dxgk_history_buffer_header.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
