<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="IOCTL_SERIAL_SET_WAIT_MASK - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>IOCTL_SERIAL_SET_WAIT_MASK - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            IOCTL_SERIAL_SET_WAIT_MASK - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddser.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">// <a href="ctl_code" title="void CTL_CODE(&#10;  DeviceType,&#10;  Function,&#10;  Method,&#10;  Access&#10;);">CTL_CODE</a>(0x001b, 0x011, METHOD_BUFFERED, FILE_ANY_ACCESS)
#define IOCTL_SERIAL_SET_WAIT_MASK 0x001B0044</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddser/ni-ntddser-ioctl_serial_set_wait_mask">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ioctl_serial_set_wait_mask.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ni-ntddser-ioctl_serial_set_wait_mask)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="ioctl_serial_set_wait_mask-ioctl">IOCTL_SERIAL_SET_WAIT_MASK IOCTL</h1>

<h2 id="description">Description</h2>

<p>The <strong>IOCTL_SERIAL_SET_WAIT_MASK</strong> request configures the serial controller driver to notify a client after the occurrence of any one of a specified set of wait events.</p>

<p>A client can wait for the wait events represented by flag bits <strong>SERIAL_EV_RXCHAR</strong> through <strong>SERIAL_EV_EVENT2</strong>. For more information about these event flags, see the Remarks section.</p>

<p>A client specifies wait events by setting an input event wait mask to the bitwise-OR of one or more of the event flags. A client can clear all wait events by setting the input event wait mask to zero.</p>

<p>A client uses an <a href="ioctl_serial_wait_on_mask" title="// CTL_CODE(0x001b, 0x012, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_SERIAL_WAIT_ON_MASK 0x001B0048">IOCTL_SERIAL_WAIT_ON_MASK</a> request to wait for the occurrence of a wait event. If a wait-on-mask request is already pending when a set-wait-mask request is processed, the pending wait-on-event request is completed with a status of <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> and the output wait event mask is set to zero.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="major-code">Major code</h3>

<h3 id="input-buffer">Input buffer</h3>

<p>The <strong>AssociatedIrp.SystemBuffer</strong> member points to a <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> buffer that the client allocates and sets to an event wait mask. The wait mask is set to zero or to the bitwise-OR of one or more <strong>SERIAL_EV_</strong><em>XXX</em> flags bits.</p>

<h3 id="input-buffer-length">Input buffer length</h3>

<p>The <strong>Parameters.DeviceIoControl.InputBufferLength</strong> member is set to the size, in bytes, of a <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>.</p>

<h3 id="output-buffer">Output buffer</h3>

<p>None.</p>

<h3 id="output-buffer-length">Output buffer length</h3>

<p>None.</p>

<h3 id="inputoutput-buffer">Input/output buffer</h3>

<h3 id="inputoutput-buffer-length">Input/output buffer length</h3>

<h3 id="status-block">Status block</h3>

<p>The <strong>Information</strong> member is set to zero.</p>

<p>The <strong>Status</strong> member is set to one of the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/serports/serial-device-control-requests2">Generic Status Values for Serial Device Control Requests</a>. A status of STATUS_INVALID_PARAMETER indicates that the input wait mask is not valid.</p>

<h2 id="remarks">Remarks</h2>

<p>The <strong>SERIAL_EV_</strong><em>XXX</em> constants define the flag bits in the wait mask for a serial port.</p>

<p><!-- CODE_MARKER --></p>

<pre><code>#define SERIAL_EV_RXCHAR     0x0001
#define SERIAL_EV_RXFLAG     0x0002
#define SERIAL_EV_TXEMPTY    0x0004
#define SERIAL_EV_CTS        0x0008
#define SERIAL_EV_DSR        0x0010
#define SERIAL_EV_RLSD       0x0020
#define SERIAL_EV_BREAK      0x0040
#define SERIAL_EV_ERR        0x0080
#define SERIAL_EV_RING       0x0100
#define SERIAL_EV_PERR       0x0200
#define SERIAL_EV_RX80FULL   0x0400
#define SERIAL_EV_EVENT1     0x0800
#define SERIAL_EV_EVENT2     0x1000
</code></pre>

<p>The <strong>SERIAL_EV_</strong><em>XXX</em> constants define the types of events that can be specified in a wait mask. After a client (application or peripheral driver) opens a connection to a serial port, the client can specify a wait mask that indicates the types of events that the client needs to monitor. These events are changes in the hardware state of the serial port. When an event in the wait mask occurs, the client is notified.</p>

<p>The <strong>IOCTL_SERIAL_SET_WAIT_MASK</strong> and <a href="ioctl_serial_get_wait_mask" title="// CTL_CODE(0x001b, 0x010, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_SERIAL_GET_WAIT_MASK 0x001B0040">IOCTL_SERIAL_GET_WAIT_MASK</a> control requests use event wait masks to specify a set of events on which a client can wait. A wait mask value is either zero or the bitwise-OR of one or more <strong>SERIAL_EV_</strong><em>XXX</em> constants. A wait mask value of zero indicates that the client is not waiting for any events.</p>

<p>The client sends an <a href="ioctl_serial_wait_on_mask" title="// CTL_CODE(0x001b, 0x012, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_SERIAL_WAIT_ON_MASK 0x001B0048">IOCTL_SERIAL_WAIT_ON_MASK</a> control request to wait for an event in the currently set wait mask. The serial controller driver completes this request when an event in the wait mask occurs.</p>

<p>The following table shows which <strong>SERIAL_EV_</strong><em>XXX</em> flag bits are supported by SerCx2, SerCx, and Serial.sys. A <strong>Yes</strong> entry in the table indicates that the serial framework extension or driver supports the corresponding flag bit. A <strong>No</strong> entry indicates that the flag bit is not supported.</p>

<table>
<thead>
<tr>
  <th>Flag bit</th>
  <th>SerCx2</th>
  <th>SerCx</th>
  <th>Serial.sys</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>SERIAL_EV_RXCHAR</strong></td>
  <td>Yes</td>
  <td>Yes</td>
  <td>Yes</td>
</tr>
<tr>
  <td><strong>SERIAL_EV_RXFLAG</strong></td>
  <td>See note.</td>
  <td>No</td>
  <td>Yes</td>
</tr>
<tr>
  <td><strong>SERIAL_EV_TXEMPTY</strong></td>
  <td>Yes</td>
  <td>Yes</td>
  <td>Yes</td>
</tr>
<tr>
  <td><strong>SERIAL_EV_CTS</strong></td>
  <td>Yes</td>
  <td>Yes</td>
  <td>Yes</td>
</tr>
<tr>
  <td><strong>SERIAL_EV_DSR</strong></td>
  <td>Yes</td>
  <td>Yes</td>
  <td>Yes</td>
</tr>
<tr>
  <td><strong>SERIAL_EV_RLSD</strong></td>
  <td>See note.</td>
  <td>Yes</td>
  <td>Yes</td>
</tr>
<tr>
  <td><strong>SERIAL_EV_BREAK</strong></td>
  <td>Yes</td>
  <td>Yes</td>
  <td>Yes</td>
</tr>
<tr>
  <td><strong>SERIAL_EV_ERR</strong></td>
  <td>Yes</td>
  <td>Yes</td>
  <td>Yes</td>
</tr>
<tr>
  <td><strong>SERIAL_EV_RING</strong></td>
  <td>See note.</td>
  <td>Yes</td>
  <td>Yes</td>
</tr>
<tr>
  <td><strong>SERIAL_EV_PERR</strong></td>
  <td>See note.</td>
  <td>No</td>
  <td>No</td>
</tr>
<tr>
  <td><strong>SERIAL_EV_RX80FULL</strong></td>
  <td>See note.</td>
  <td>No</td>
  <td>Yes</td>
</tr>
<tr>
  <td><strong>SERIAL_EV_EVENT1</strong></td>
  <td>See note.</td>
  <td>No</td>
  <td>No</td>
</tr>
<tr>
  <td><strong>SERIAL_EV_EVENT2</strong></td>
  <td>See note.</td>
  <td>No</td>
  <td>No</td>
</tr>
</tbody>
</table>

<p><strong>Note</strong> SerCx2 may or may not support the flag bit in the indicated table entry, depending on the serial controller driver and the capabilities of the serial controller hardware.</p>

<p>For more information about SerCx2, SerCx, and Serial.sys, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/jj241971(v=vs.85)">Serial Controller Drivers Overview</a>.</p>

<h2 id="see-also">See also</h2>

<p><a href="ioctl_serial_get_chars" title="// CTL_CODE(0x001b, 0x016, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_SERIAL_GET_CHARS 0x001B0058">IOCTL_SERIAL_GET_CHARS</a></p>

<p><a href="ioctl_serial_get_wait_mask" title="// CTL_CODE(0x001b, 0x010, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_SERIAL_GET_WAIT_MASK 0x001B0040">IOCTL_SERIAL_GET_WAIT_MASK</a></p>

<p><a href="ioctl_serial_set_chars" title="// CTL_CODE(0x001b, 0x017, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_SERIAL_SET_CHARS 0x001B005C">IOCTL_SERIAL_SET_CHARS</a></p>

<p><a href="ioctl_serial_wait_on_mask" title="// CTL_CODE(0x001b, 0x012, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_SERIAL_WAIT_ON_MASK 0x001B0048">IOCTL_SERIAL_WAIT_ON_MASK</a></p>

<p><a href="serial_chars" title="typedef struct _SERIAL_CHARS {&#10;  UCHAR EofChar;&#10;  UCHAR ErrorChar;&#10;  UCHAR BreakChar;&#10;  UCHAR EventChar;&#10;  UCHAR XonChar;&#10;  UCHAR XoffChar;&#10;} SERIAL_CHARS, *PSERIAL_CHARS;">SERIAL_CHARS</a></p>

<p><a href="serial_status" title="typedef struct _SERIAL_STATUS {&#10;  ULONG   Errors;&#10;  ULONG   HoldReasons;&#10;  ULONG   AmountInInQueue;&#10;  ULONG   AmountInOutQueue;&#10;  BOOLEAN EofReceived;&#10;  BOOLEAN WaitForImmediate;&#10;} SERIAL_STATUS, *PSERIAL_STATUS;">SERIAL_STATUS</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddser/ni-ntddser-ioctl_serial_set_wait_mask">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddser/ni-ntddser-ioctl_serial_set_wait_mask.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
