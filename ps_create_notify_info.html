<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="PS_CREATE_NOTIFY_INFO - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>PS_CREATE_NOTIFY_INFO - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            PS_CREATE_NOTIFY_INFO - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddk.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _PS_CREATE_NOTIFY_INFO {
  <a href="size_t-2" title="typedef ULONG_PTR SIZE_T;">SIZE_T</a>              Size;
  union {
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> Flags;
    struct {
      <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> FileOpenNameAvailable : 1;
      <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> IsSubsystemProcess : 1;
      <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> Reserved : 30;
    };
  };
  HANDLE              ParentProcessId;
  <a href="client_id" title="typedef struct _CLIENT_ID&#10;{&#10;    HANDLE UniqueProcess;&#10;    HANDLE UniqueThread;&#10;} CLIENT_ID, *PCLIENT_ID;">CLIENT_ID</a>           CreatingThreadId;
  <a href="file_object" title="typedef struct _FILE_OBJECT {&#10;  CSHORT                                Type;&#10;  CSHORT                                Size;&#10;  PDEVICE_OBJECT                        DeviceObject;&#10;  PVPB                                  Vpb;&#10;  PVOID                                 FsContext;&#10;  PVOID                                 FsContext2;&#10;  PSECTION_OBJECT_POINTERS              SectionObjectPointer;&#10;  PVOID                                 PrivateCacheMap;&#10;  NTSTATUS                              FinalStatus;&#10;  struct _FILE_OBJECT                   *RelatedFileObject;&#10;  BOOLEAN                               LockOperation;&#10;  BOOLEAN                               DeletePending;&#10;  BOOLEAN                               ReadAccess;&#10;  BOOLEAN                               WriteAccess;&#10;  BOOLEAN                               DeleteAccess;&#10;  BOOLEAN                               SharedRead;&#10;  BOOLEAN                               SharedWrite;&#10;  BOOLEAN                               SharedDelete;&#10;  ULONG                                 Flags;&#10;...">struct _FILE_OBJECT</a> *FileObject;
  <a href="pcunicode_string" title="typedef const UNICODE_STRING *PCUNICODE_STRING;">PCUNICODE_STRING</a>    ImageFileName;
  <a href="pcunicode_string" title="typedef const UNICODE_STRING *PCUNICODE_STRING;">PCUNICODE_STRING</a>    CommandLine;
  <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a>            CreationStatus;
} PS_CREATE_NOTIFY_INFO, *PPS_CREATE_NOTIFY_INFO;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/ns-ntddk-_ps_create_notify_info">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ps_create_notify_info.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntddk-_ps_create_notify_info)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>PS_CREATE_NOTIFY_INFO</strong> structure provides information about a newly created process.</p>

<h2 id="members">Members</h2>

<h3 id="size"><code>Size</code></h3>

<p>The size, in bytes, of this structure. The operating system uses this size to indicate the type of structure that it passes to <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/nf-ntddk-pssetcreateprocessnotifyroutine">CreateProcessNotifyEx</a>. Currently, this member is always <strong>sizeof</strong>(<strong>PS_CREATE_NOTIFY_INFO</strong>).</p>

<h3 id="flags"><code>Flags</code></h3>

<p>Reserved. Use the <strong>FileOpenNameAvailable</strong> member instead.</p>

<h3 id="fileopennameavailable"><code>FileOpenNameAvailable</code></h3>

<p>A Boolean value that specifies whether the <strong>ImageFileName</strong> member contains the exact file name that is used to open the process executable file.</p>

<h3 id="issubsystemprocess"><code>IsSubsystemProcess</code></h3>

<p>A Boolean value that indicates the type of process subsystem is a subsystem other than Win32.</p>

<p><strong>IsSubsystemProcess</strong> is only populated for subsystem processes other than Win32 when a driver has registered through <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/nf-ntddk-pssetcreateprocessnotifyroutineex2">PsSetCreateProcessNotifyRoutineEx2</a> with a type that allows for notifications from subsystem processes. When <strong>IsSubsystemProcess</strong> is set, the <strong>FileObject</strong>, <strong>ImageFileName</strong>, and <strong>CommandLine</strong> may be NULL. Drivers should use <strong>ProcessSubsystemInformation</strong> to query the subsystem type if needed.</p>

<p>For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/winternl/nf-winternl-ntqueryinformationprocess">NtQueryInformationProcess</a>.</p>

<h3 id="reserved"><code>Reserved</code></h3>

<p>Reserved for system use.</p>

<h3 id="parentprocessid"><code>ParentProcessId</code></h3>

<p>The process ID of the parent process for the new process. Note that the parent process is not necessarily the same process as the process that created the new process. The new process can inherit certain properties of the parent process, such as handles or shared memory. (The process ID of the process creator is given by <strong>CreatingThreadId</strong>-><strong>UniqueProcess</strong>.)</p>

<h3 id="creatingthreadid"><code>CreatingThreadId</code></h3>

<p>The process ID and thread ID of the process and thread that created the new process. <strong>CreatingThreadId</strong>-><strong>UniqueProcess</strong> contains the process ID, and <strong>CreatingThreadId</strong>-><strong>UniqueThread</strong> contains the thread ID.</p>

<h3 id="fileobject"><code>FileObject</code></h3>

<p>A pointer to the file object for the process executable file.</p>

<p>If <strong>IsSubsystemProcess</strong> is TRUE, this value may be <strong>NULL</strong>.</p>

<h3 id="imagefilename"><code>ImageFileName</code></h3>

<p>A pointer to a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/ntdef/ns-ntdef-_unicode_string"><strong>UNICODE_STRING</strong></a> string that holds the file name of the executable. If the <strong>FileOpenNameAvailable</strong> member is <strong>TRUE</strong>, the string specifies the exact file name that is used to open the executable file. If <strong>FileOpenNameAvailable</strong> is <strong>FALSE</strong>, the operating system might provide only a partial name.</p>

<p>If <strong>IsSubsystemProcess</strong> is TRUE, this value maybe NULL.</p>

<h3 id="commandline"><code>CommandLine</code></h3>

<p>A pointer to a <strong><a href="unicode_string" title="typedef struct _UNICODE_STRING&#10;{&#10;    USHORT Length;&#10;    USHORT MaximumLength;&#10;    _Field_size_bytes_part_opt_(MaximumLength, Length) PWCH Buffer;&#10;} UNICODE_STRING, *PUNICODE_STRING;">UNICODE_STRING</a></strong> string that holds the command that is used to execute the process. If the command is not available, <strong>CommandLine</strong> is <strong>NULL</strong>.</p>

<p>If <strong>IsSubsystemProcess</strong> is TRUE, this value maybe NULL.</p>

<h3 id="creationstatus"><code>CreationStatus</code></h3>

<p>The <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> value to return for the process-creation operation. Drivers can change this value to an error code to prevent the process from being created.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/nf-ntddk-pssetcreateprocessnotifyroutine">CreateProcessNotifyEx</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/nf-ntddk-pssetcreateprocessnotifyroutineex">PsSetCreateProcessNotifyRoutineEx</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/ntdef/ns-ntdef-_unicode_string"><strong>UNICODE_STRING</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/ns-ntddk-_ps_create_notify_info">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddk/ns-ntddk-_ps_create_notify_info.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
