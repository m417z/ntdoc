<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="OSVERSIONINFOEXW - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>OSVERSIONINFOEXW - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            OSVERSIONINFOEXW - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _OSVERSIONINFOEXW {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  dwOSVersionInfoSize;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  dwMajorVersion;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  dwMinorVersion;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  dwBuildNumber;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  dwPlatformId;
  WCHAR  szCSDVersion[128];
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> wServicePackMajor;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> wServicePackMinor;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> wSuiteMask;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>  wProductType;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>  wReserved;
} OSVERSIONINFOEXW, *POSVERSIONINFOEXW, *LPOSVERSIONINFOEXW, RTL_OSVERSIONINFOEXW, *PRTL_OSVERSIONINFOEXW;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_osversioninfoexw">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/osversioninfoexw.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-wdm-_osversioninfoexw)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2>Description</h2>
<p>The <strong>RTL_OSVERSIONINFOEXW</strong> structure contains operating system version information.</p>
<h2>Members</h2>
<h3><code>dwOSVersionInfoSize</code></h3>
<p>The size, in bytes, of an <strong>RTL_OSVERSIONINFOEXW</strong> structure. This member must be set before the structure is used with <a href="rtlgetversion" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlGetVersion(&#10;    _Out_ PVOID VersionInformation&#10;    );">RtlGetVersion</a>.</p>
<h3><code>dwMajorVersion</code></h3>
<p>The major version number of the operating system. For example, for Windows 2000, the major version number is five. For more information, see the table in Remarks.</p>
<h3><code>dwMinorVersion</code></h3>
<p>The minor version number of the operating system. For example, for Windows 2000, the minor version number is zero. For more information, see the table in Remarks.</p>
<h3><code>dwBuildNumber</code></h3>
<p>The build number of the operating system.</p>
<h3><code>dwPlatformId</code></h3>
<p>The operating system platform. For Win32 on NT-based operating systems, <strong><a href="rtlgetversion" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlGetVersion(&#10;    _Out_ PVOID VersionInformation&#10;    );">RtlGetVersion</a></strong> returns the value VER_PLATFORM_WIN32_NT.</p>
<h3><code>szCSDVersion</code></h3>
<p>The service-pack version string. This member contains a null-terminated string, such as &quot;Service Pack 3&quot;, which indicates the latest service pack installed on the system. If no service pack is installed, <strong><a href="rtlgetversion" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlGetVersion(&#10;    _Out_ PVOID VersionInformation&#10;    );">RtlGetVersion</a></strong> might not initialize this string. Initialize <em>szCSDVersion</em> to zero (empty string) before the call to <strong><a href="rtlgetversion" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlGetVersion(&#10;    _Out_ PVOID VersionInformation&#10;    );">RtlGetVersion</a></strong>.</p>
<h3><code>wServicePackMajor</code></h3>
<p>The major version number of the latest service pack installed on the system. For example, for Service Pack 3, the major version number is three. If no service pack has been installed, the value is zero.</p>
<h3><code>wServicePackMinor</code></h3>
<p>The minor version number of the latest service pack installed on the system. For example, for Service Pack 3, the minor version number is zero.</p>
<h3><code>wSuiteMask</code></h3>
<p>The product suites available on the system. This member is set to zero or to the bitwise OR of one or more of the following values.</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>VER_SUITE_BACKOFFICE</td>
<td>Microsoft BackOffice components are installed.</td>
</tr>
<tr>
<td>VER_SUITE_BLADE</td>
<td>Windows Server 2003, Web Edition is installed.</td>
</tr>
<tr>
<td>VER_SUITE_COMPUTE_SERVER</td>
<td>Windows Server 2003, Compute Cluster Edition is installed.</td>
</tr>
<tr>
<td>VER_SUITE_DATACENTER</td>
<td>Windows Server 2008 Datacenter, Windows Server 2003, Datacenter Edition, or Windows 2000 Datacenter Server is installed.</td>
</tr>
<tr>
<td>VER_SUITE_ENTERPRISE</td>
<td>Windows Server 2008 Enterprise, Windows Server 2003, Enterprise Edition, or Windows 2000 Advanced Server is installed.</td>
</tr>
<tr>
<td>VER_SUITE_EMBEDDEDNT</td>
<td>Windows XP Embedded is installed.</td>
</tr>
<tr>
<td>VER_SUITE_PERSONAL</td>
<td>Windows Vista Home Premium, Windows Vista Home Basic, or Windows XP Home Edition is installed.</td>
</tr>
<tr>
<td>VER_SUITE_SINGLEUSERTS</td>
<td>Remote Desktop is supported, but only one interactive session is supported. This value is set unless the system is running in application server mode.</td>
</tr>
<tr>
<td>VER_SUITE_SMALLBUSINESS (see note)</td>
<td>Microsoft Small Business Server was once installed on the system, but may have been upgraded to another version of Windows. For more information about this flag bit, see the following Remarks section.</td>
</tr>
<tr>
<td>VER_SUITE_SMALLBUSINESS_RESTRICTED</td>
<td>Microsoft Small Business Server is installed with the restrictive client license in force. For more information about this flag bit, see the following Remarks section.</td>
</tr>
<tr>
<td>VER_SUITE_STORAGE_SERVER</td>
<td>Windows Storage Server 2003 R2 or Windows Storage Server 2003 is installed.</td>
</tr>
<tr>
<td>VER_SUITE_TERMINAL</td>
<td>Terminal Services is installed. This value is always set. If VER_SUITE_TERMINAL is set but VER_SUITE_SINGLEUSERTS is not set, the operating system is running in application server mode.</td>
</tr>
<tr>
<td>VER_SUITE_WH_SERVER</td>
<td>Windows Home Server is installed.</td>
</tr>
</tbody>
</table>
<p>You should not rely solely on the VER_SUITE_SMALLBUSINESS flag to determine whether Small Business Server is currently installed. Both this flag and the VER_SUITE_SMALLBUSINESS_RESTRICTED flag are set when this product suite is installed. If you upgrade this installation to Windows Server, Standard Edition, the VER_SUITE_SMALLBUSINESS_RESTRICTED flag is cleared, but the VER_SUITE_SMALLBUSINESS flag remains set, which, in this case, indicates that Small Business Server was previously installed on this system. If this installation is further upgraded to Windows Server, Enterprise Edition, the VER_SUITE_SMALLBUSINESS flag remains set.</p>
<h3><code>wProductType</code></h3>
<p>The product type. This member contains additional information about the system. This member can be one of the following values:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>VER_NT_WORKSTATION</td>
<td>Windows 2000 or later professional version</td>
</tr>
<tr>
<td>VER_NT_DOMAIN_CONTROLLER</td>
<td>Windows 2000 or later domain controller</td>
</tr>
<tr>
<td>VER_NT_SERVER</td>
<td>Windows 2000 or later server</td>
</tr>
</tbody>
</table>
<h3><code>wReserved</code></h3>
<p>Reserved for future use.</p>
<h2>Remarks</h2>
<p>The information in this structure includes the major and minor version numbers, the build number, the platform identifier, the installed product suites, and the latest service pack that is installed on the system. This structure is used with the <a href="rtlgetversion" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlGetVersion(&#10;    _Out_ PVOID VersionInformation&#10;    );">RtlGetVersion</a> and <a href="rtlverifyversioninfo" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlVerifyVersionInfo(&#10;    _In_ PVOID VersionInformation,&#10;    _In_ ULONG TypeMask,&#10;    _In_ ULONGLONG ConditionMask&#10;    );">RtlVerifyVersionInfo</a> routines.</p>
<p>Relying on version information is not always the best way to test whether a feature is available. For guidance, refer to the documentation for the feature you are interested in.</p>
<p>If possible, design the version detection code in your driver to enable the driver to run on future versions of Windows. If your driver requires a particular operating system version, be sure to treat this version as the minimum supported version, and not as the only version on which the driver can run.</p>
<p>The following table summarizes the version information that is returned by supported versions of Windows. Use the information in the &quot;Other&quot; column or build number to distinguish between operating systems with identical version numbers.</p>
<table>
<thead>
<tr>
<th>Operating system</th>
<th>Version number</th>
<th>dwMajorVersion</th>
<th>dwMinorVersion</th>
<th>Other</th>
</tr>
</thead>
<tbody>
<tr>
<td>Windows 11</td>
<td>10.0</td>
<td>10</td>
<td>0</td>
<td><strong>wProductType</strong> == VER_NT_WORKSTATION</td>
</tr>
<tr>
<td>Windows Server 2022</td>
<td>10.0</td>
<td>10</td>
<td>0</td>
<td><strong>wProductType</strong> != VER_NT_WORKSTATION</td>
</tr>
<tr>
<td>Windows Server 2019</td>
<td>10.0</td>
<td>10</td>
<td>0</td>
<td><strong>wProductType</strong> != VER_NT_WORKSTATION</td>
</tr>
<tr>
<td>Windows 10 (all releases)</td>
<td>10.0</td>
<td>10</td>
<td>0</td>
<td><strong>wProductType</strong> == VER_NT_WORKSTATION</td>
</tr>
<tr>
<td>Windows Server 2016</td>
<td>10.0</td>
<td>10</td>
<td>0</td>
<td><strong>wProductType</strong> != VER_NT_WORKSTATION</td>
</tr>
<tr>
<td>Windows Server 2012 R2</td>
<td>6.3</td>
<td>6</td>
<td>3</td>
<td><strong>wProductType</strong> != VER_NT_WORKSTATION</td>
</tr>
<tr>
<td>Windows 8.1</td>
<td>6.3</td>
<td>6</td>
<td>3</td>
<td><strong>wProductType</strong> == VER_NT_WORKSTATION</td>
</tr>
<tr>
<td>Windows 8</td>
<td>6.2</td>
<td>6</td>
<td>2</td>
<td><strong>wProductType</strong> == VER_NT_WORKSTATION</td>
</tr>
<tr>
<td>Windows Server 2012</td>
<td>6.2</td>
<td>6</td>
<td>2</td>
<td><strong>wProductType</strong> != VER_NT_WORKSTATION</td>
</tr>
<tr>
<td>Windows 7</td>
<td>6.1</td>
<td>6</td>
<td>1</td>
<td><strong>wProductType</strong> == VER_NT_WORKSTATION</td>
</tr>
<tr>
<td>Windows Server 2008 R2</td>
<td>6.1</td>
<td>6</td>
<td>1</td>
<td><strong>wProductType</strong> != VER_NT_WORKSTATION</td>
</tr>
<tr>
<td>Windows Server 2008</td>
<td>6.0</td>
<td>6</td>
<td>0</td>
<td><strong>wProductType</strong> != VER_NT_WORKSTATION</td>
</tr>
<tr>
<td>Windows Vista</td>
<td>6.0</td>
<td>6</td>
<td>0</td>
<td><strong>wProductType</strong> == VER_NT_WORKSTATION</td>
</tr>
<tr>
<td>Windows Home Server</td>
<td>5.2</td>
<td>5</td>
<td>2</td>
<td><strong>wSuiteMask</strong> == VER_SUITE_WH_SERVER</td>
</tr>
<tr>
<td>Windows Server 2003</td>
<td>5.2</td>
<td>5</td>
<td>2</td>
<td>Not applicable</td>
</tr>
<tr>
<td>Windows XP Professional x64 Edition (see note)</td>
<td>5.2</td>
<td>5</td>
<td>2</td>
<td><strong>wProductType</strong> == VER_NT_WORKSTATION</td>
</tr>
<tr>
<td>Windows XP</td>
<td>5.1</td>
<td>5</td>
<td>1</td>
<td>Not applicable</td>
</tr>
<tr>
<td>Windows 2000</td>
<td>5.0</td>
<td>5</td>
<td>0</td>
<td>Not applicable</td>
</tr>
</tbody>
</table>
<p>Only a 64-bit kernel-mode driver can run on Windows XP Professional x64 Edition. Therefore, a 32-bit kernel-mode driver can safely omit checking for this version of Windows.</p>
<h2>See also</h2>
<p><a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_osversioninfow"><strong>RTL_OSVERSIONINFOW</strong></a></p>
<p><a href="rtlgetversion" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlGetVersion(&#10;    _Out_ PVOID VersionInformation&#10;    );">RtlGetVersion</a></p>
<p><a href="rtlverifyversioninfo" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlVerifyVersionInfo(&#10;    _In_ PVOID VersionInformation,&#10;    _In_ ULONG TypeMask,&#10;    _In_ ULONGLONG ConditionMask&#10;    );">RtlVerifyVersionInfo</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_osversioninfoexw">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/ns-wdm-_osversioninfoexw.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
