<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NtQueryInformationFile - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NtQueryInformationFile - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NtQueryInformationFile - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">#ifndef _NTIOAPI_H

</span><span class="ntdoc-code-intro">/**
 * The NtQueryInformationFile routine returns various kinds of information about a file object.
 *
 * \param FileHandle A handle to the file object representing the file or directory.
 * \param IoStatusBlock A pointer to an <a href="io_status_block" title="typedef struct _IO_STATUS_BLOCK&#10;{&#10;    union&#10;    {&#10;        NTSTATUS Status;&#10;        PVOID Pointer;&#10;    };&#10;    ULONG_PTR Information;&#10;} IO_STATUS_BLOCK, *PIO_STATUS_BLOCK;">IO_STATUS_BLOCK</a> structure that receives the final completion status, and the number of bytes written to the buffer pointed to by FileInformation.
 * \param FileInformation Pointer to a caller-allocated buffer into which the routine writes the requested information about the file object.
 * \param Length The size, in bytes, of the buffer pointed to by FileInformation.
 * \param FileInformationClass Specifies the type of information to be returned about the file, in the buffer that FileInformation points to.
 * \return <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> Successful or errant status.
 * \sa https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/ntifs/nf-ntifs-ntqueryinformationfile
 */
</span><span class="ntdoc-code-body">NTSYSCALLAPI
<a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a>
NTAPI
NtQueryInformationFile(
    _In_ HANDLE FileHandle,
    _Out_ <a href="io_status_block" title="typedef struct _IO_STATUS_BLOCK&#10;{&#10;    union&#10;    {&#10;        NTSTATUS Status;&#10;        PVOID Pointer;&#10;    };&#10;    ULONG_PTR Information;&#10;} IO_STATUS_BLOCK, *PIO_STATUS_BLOCK;">PIO_STATUS_BLOCK</a> IoStatusBlock,
    _Out_writes_bytes_(Length) PVOID FileInformation,
    _In_ <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> Length,
    _In_ <a href="file_information_class" title="typedef enum _FILE_INFORMATION_CLASS&#10;{&#10;    FileDirectoryInformation = 1,                   // q: FILE_DIRECTORY_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileFullDirectoryInformation,                   // q: FILE_FULL_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBothDirectoryInformation,                   // q: FILE_BOTH_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBasicInformation,                           // qs: FILE_BASIC_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileStandardInformation,                        // q: FILE_STANDARD_INFORMATION, FILE_STANDARD_INFORMATION_EX&#10;    FileInternalInformation,                        // q: FILE_INTERNAL_INFORMATION&#10;    FileEaInformation,                              // q: FILE_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileAccessInformation,                          // q: FILE_ACCESS_INFORMATION&#10;    FileNameInformation,                            // q: FILE_NAME_INFORMATION&#10;    FileRenameInformation,                          // s: FILE_RENAME_INFORMATION (requires DELETE) // 10&#10;    FileLinkInformation,                            // s: FILE_LINK_INFORMATION&#10;    FileNamesInformation,                           // q: FILE_NAMES_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileDispositionInformation,                     // s: FILE_DISPOSITION_INFORMATION (requires DELETE)&#10;    FilePositionInformation,                        // qs: FILE_POSITION_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileFullEaInformation,                          // q: FILE_FULL_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileModeInformation,                            // qs: FILE_MODE_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileAlignmentInformation,                       // q: FILE_ALIGNMENT_INFORMATION&#10;    FileAllInformation,                             // q: FILE_ALL_INFORMATION&#10;...">FILE_INFORMATION_CLASS</a> FileInformationClass
    );
</span><span class="ntdoc-code-footer">
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/d9393a49b3707fc786047a2ca5ae4afefd760b30/phnt/include/ntioapi.h#L2037">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">#ifndef _NTZWAPI_H

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NTSYSCALLAPI
<a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a>
NTAPI
ZwQueryInformationFile(
    _In_ HANDLE FileHandle,
    _Out_ <a href="io_status_block" title="typedef struct _IO_STATUS_BLOCK&#10;{&#10;    union&#10;    {&#10;        NTSTATUS Status;&#10;        PVOID Pointer;&#10;    };&#10;    ULONG_PTR Information;&#10;} IO_STATUS_BLOCK, *PIO_STATUS_BLOCK;">PIO_STATUS_BLOCK</a> IoStatusBlock,
    _Out_writes_bytes_(Length) PVOID FileInformation,
    _In_ <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> Length,
    _In_ <a href="file_information_class" title="typedef enum _FILE_INFORMATION_CLASS&#10;{&#10;    FileDirectoryInformation = 1,                   // q: FILE_DIRECTORY_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileFullDirectoryInformation,                   // q: FILE_FULL_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBothDirectoryInformation,                   // q: FILE_BOTH_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBasicInformation,                           // qs: FILE_BASIC_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileStandardInformation,                        // q: FILE_STANDARD_INFORMATION, FILE_STANDARD_INFORMATION_EX&#10;    FileInternalInformation,                        // q: FILE_INTERNAL_INFORMATION&#10;    FileEaInformation,                              // q: FILE_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileAccessInformation,                          // q: FILE_ACCESS_INFORMATION&#10;    FileNameInformation,                            // q: FILE_NAME_INFORMATION&#10;    FileRenameInformation,                          // s: FILE_RENAME_INFORMATION (requires DELETE) // 10&#10;    FileLinkInformation,                            // s: FILE_LINK_INFORMATION&#10;    FileNamesInformation,                           // q: FILE_NAMES_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileDispositionInformation,                     // s: FILE_DISPOSITION_INFORMATION (requires DELETE)&#10;    FilePositionInformation,                        // qs: FILE_POSITION_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileFullEaInformation,                          // q: FILE_FULL_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileModeInformation,                            // qs: FILE_MODE_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileAlignmentInformation,                       // q: FILE_ALIGNMENT_INFORMATION&#10;    FileAllInformation,                             // q: FILE_ALL_INFORMATION&#10;...">FILE_INFORMATION_CLASS</a> FileInformationClass
    );
</span><span class="ntdoc-code-footer">
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/d9393a49b3707fc786047a2ca5ae4afefd760b30/phnt/include/ntzwapi.h#L3140">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntifs.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">__kernel_entry NTSYSCALLAPI <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> NtQueryInformationFile(
  [in]  HANDLE                 FileHandle,
  [out] <a href="io_status_block" title="typedef struct _IO_STATUS_BLOCK&#10;{&#10;    union&#10;    {&#10;        NTSTATUS Status;&#10;        PVOID Pointer;&#10;    };&#10;    ULONG_PTR Information;&#10;} IO_STATUS_BLOCK, *PIO_STATUS_BLOCK;">PIO_STATUS_BLOCK</a>       IoStatusBlock,
  [out] PVOID                  FileInformation,
  [in]  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                  Length,
  [in]  <a href="file_information_class" title="typedef enum _FILE_INFORMATION_CLASS&#10;{&#10;    FileDirectoryInformation = 1,                   // q: FILE_DIRECTORY_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileFullDirectoryInformation,                   // q: FILE_FULL_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBothDirectoryInformation,                   // q: FILE_BOTH_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBasicInformation,                           // qs: FILE_BASIC_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileStandardInformation,                        // q: FILE_STANDARD_INFORMATION, FILE_STANDARD_INFORMATION_EX&#10;    FileInternalInformation,                        // q: FILE_INTERNAL_INFORMATION&#10;    FileEaInformation,                              // q: FILE_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileAccessInformation,                          // q: FILE_ACCESS_INFORMATION&#10;    FileNameInformation,                            // q: FILE_NAME_INFORMATION&#10;    FileRenameInformation,                          // s: FILE_RENAME_INFORMATION (requires DELETE) // 10&#10;    FileLinkInformation,                            // s: FILE_LINK_INFORMATION&#10;    FileNamesInformation,                           // q: FILE_NAMES_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileDispositionInformation,                     // s: FILE_DISPOSITION_INFORMATION (requires DELETE)&#10;    FilePositionInformation,                        // qs: FILE_POSITION_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileFullEaInformation,                          // q: FILE_FULL_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileModeInformation,                            // qs: FILE_MODE_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileAlignmentInformation,                       // q: FILE_ALIGNMENT_INFORMATION&#10;    FileAllInformation,                             // q: FILE_ALL_INFORMATION&#10;...">FILE_INFORMATION_CLASS</a> FileInformationClass
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/nf-ntifs-ntqueryinformationfile">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NTSYSAPI <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> ZwQueryInformationFile(
  [in]  HANDLE                 FileHandle,
  [out] <a href="io_status_block" title="typedef struct _IO_STATUS_BLOCK&#10;{&#10;    union&#10;    {&#10;        NTSTATUS Status;&#10;        PVOID Pointer;&#10;    };&#10;    ULONG_PTR Information;&#10;} IO_STATUS_BLOCK, *PIO_STATUS_BLOCK;">PIO_STATUS_BLOCK</a>       IoStatusBlock,
  [out] PVOID                  FileInformation,
  [in]  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                  Length,
  [in]  <a href="file_information_class" title="typedef enum _FILE_INFORMATION_CLASS&#10;{&#10;    FileDirectoryInformation = 1,                   // q: FILE_DIRECTORY_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileFullDirectoryInformation,                   // q: FILE_FULL_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBothDirectoryInformation,                   // q: FILE_BOTH_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBasicInformation,                           // qs: FILE_BASIC_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileStandardInformation,                        // q: FILE_STANDARD_INFORMATION, FILE_STANDARD_INFORMATION_EX&#10;    FileInternalInformation,                        // q: FILE_INTERNAL_INFORMATION&#10;    FileEaInformation,                              // q: FILE_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileAccessInformation,                          // q: FILE_ACCESS_INFORMATION&#10;    FileNameInformation,                            // q: FILE_NAME_INFORMATION&#10;    FileRenameInformation,                          // s: FILE_RENAME_INFORMATION (requires DELETE) // 10&#10;    FileLinkInformation,                            // s: FILE_LINK_INFORMATION&#10;    FileNamesInformation,                           // q: FILE_NAMES_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileDispositionInformation,                     // s: FILE_DISPOSITION_INFORMATION (requires DELETE)&#10;    FilePositionInformation,                        // qs: FILE_POSITION_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileFullEaInformation,                          // q: FILE_FULL_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileModeInformation,                            // qs: FILE_MODE_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileAlignmentInformation,                       // q: FILE_ALIGNMENT_INFORMATION&#10;    FileAllInformation,                             // q: FILE_ALL_INFORMATION&#10;...">FILE_INFORMATION_CLASS</a> FileInformationClass
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-zwqueryinformationfile">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ntqueryinformationfile.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ntifs-ntqueryinformationfile)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>NtQueryInformationFile function</h1>
<h2>Description</h2>
<p>The <strong>NtQueryInformationFile</strong> routine returns various kinds of information about a file object. See also <strong><a href="ntqueryinformationbyname" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtQueryInformationByName(&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _Out_writes_bytes_(Length) PVOID FileInformation,&#10;    _In_ ULONG Length,&#10;    _In_ FILE_INFORMATION_CLASS FileInformationClass&#10;    );">NtQueryInformationByName</a></strong>, which can be more efficiently used for a few file information classes.</p>
<h2>Parameters</h2>
<h3><code>FileHandle</code> [in]</h3>
<p>Handle to a file object. The handle is created by a successful call to <strong><a href="ntcreatefile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_opt_ PLARGE_INTEGER AllocationSize,&#10;    _In_ ULONG FileAttributes,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG CreateDisposition,&#10;    _In_ ULONG CreateOptions,&#10;    _In_reads_bytes_opt_(EaLength) PVOID EaBuffer,&#10;    _In_ ULONG EaLength&#10;    );">NtCreateFile</a></strong> or <strong><a href="ntopenfile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtOpenFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG OpenOptions&#10;    );">NtOpenFile</a></strong>, or to an equivalent file create or open routine.</p>
<h3><code>IoStatusBlock</code> [out]</h3>
<p>Pointer to an <a href="io_status_block" title="typedef struct _IO_STATUS_BLOCK&#10;{&#10;    union&#10;    {&#10;        NTSTATUS Status;&#10;        PVOID Pointer;&#10;    };&#10;    ULONG_PTR Information;&#10;} IO_STATUS_BLOCK, *PIO_STATUS_BLOCK;">IO_STATUS_BLOCK</a> structure that receives the final completion status and information about the operation. The <strong>Information</strong> member receives the number of bytes that this routine actually writes to the <em>FileInformation</em> buffer.</p>
<h3><code>FileInformation</code> [out]</h3>
<p>Pointer to a caller-allocated buffer into which the routine writes the requested information about the file object. The <em>FileInformationClass</em> parameter specifies the type of information that the caller requests.</p>
<h3><code>Length</code> [in]</h3>
<p>The size, in bytes, of the buffer pointed to by <em>FileInformation</em>.</p>
<h3><code>FileInformationClass</code> [in]</h3>
<p>Specifies the type of information to be returned about the file, in the buffer that <em>FileInformation</em> points to. Device and intermediate drivers can specify any of the following <a href="file_information_class" title="typedef enum _FILE_INFORMATION_CLASS&#10;{&#10;    FileDirectoryInformation = 1,                   // q: FILE_DIRECTORY_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileFullDirectoryInformation,                   // q: FILE_FULL_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBothDirectoryInformation,                   // q: FILE_BOTH_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBasicInformation,                           // qs: FILE_BASIC_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileStandardInformation,                        // q: FILE_STANDARD_INFORMATION, FILE_STANDARD_INFORMATION_EX&#10;    FileInternalInformation,                        // q: FILE_INTERNAL_INFORMATION&#10;    FileEaInformation,                              // q: FILE_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileAccessInformation,                          // q: FILE_ACCESS_INFORMATION&#10;    FileNameInformation,                            // q: FILE_NAME_INFORMATION&#10;    FileRenameInformation,                          // s: FILE_RENAME_INFORMATION (requires DELETE) // 10&#10;    FileLinkInformation,                            // s: FILE_LINK_INFORMATION&#10;    FileNamesInformation,                           // q: FILE_NAMES_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileDispositionInformation,                     // s: FILE_DISPOSITION_INFORMATION (requires DELETE)&#10;    FilePositionInformation,                        // qs: FILE_POSITION_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileFullEaInformation,                          // q: FILE_FULL_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileModeInformation,                            // qs: FILE_MODE_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileAlignmentInformation,                       // q: FILE_ALIGNMENT_INFORMATION&#10;    FileAllInformation,                             // q: FILE_ALL_INFORMATION&#10;...">FILE_INFORMATION_CLASS</a> values (listed from lowest to highest enum value):</p>
<table>
<thead>
<tr>
<th><a href="file_information_class" title="typedef enum _FILE_INFORMATION_CLASS&#10;{&#10;    FileDirectoryInformation = 1,                   // q: FILE_DIRECTORY_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileFullDirectoryInformation,                   // q: FILE_FULL_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBothDirectoryInformation,                   // q: FILE_BOTH_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBasicInformation,                           // qs: FILE_BASIC_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileStandardInformation,                        // q: FILE_STANDARD_INFORMATION, FILE_STANDARD_INFORMATION_EX&#10;    FileInternalInformation,                        // q: FILE_INTERNAL_INFORMATION&#10;    FileEaInformation,                              // q: FILE_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileAccessInformation,                          // q: FILE_ACCESS_INFORMATION&#10;    FileNameInformation,                            // q: FILE_NAME_INFORMATION&#10;    FileRenameInformation,                          // s: FILE_RENAME_INFORMATION (requires DELETE) // 10&#10;    FileLinkInformation,                            // s: FILE_LINK_INFORMATION&#10;    FileNamesInformation,                           // q: FILE_NAMES_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileDispositionInformation,                     // s: FILE_DISPOSITION_INFORMATION (requires DELETE)&#10;    FilePositionInformation,                        // qs: FILE_POSITION_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileFullEaInformation,                          // q: FILE_FULL_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileModeInformation,                            // qs: FILE_MODE_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileAlignmentInformation,                       // q: FILE_ALIGNMENT_INFORMATION&#10;    FileAllInformation,                             // q: FILE_ALL_INFORMATION&#10;...">FILE_INFORMATION_CLASS</a> value</th>
<th>Type of information returned</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>FileBasicInformation</strong> (4)</td>
<td>A <a href="file_basic_information" title="typedef struct _FILE_BASIC_INFORMATION&#10;{&#10;    LARGE_INTEGER CreationTime;         // Specifies the time that the file was created.&#10;    LARGE_INTEGER LastAccessTime;       // Specifies the time that the file was last accessed.&#10;    LARGE_INTEGER LastWriteTime;        // Specifies the time that the file was last written to.&#10;    LARGE_INTEGER ChangeTime;           // Specifies the last time the file was changed.&#10;    ULONG FileAttributes;               // Specifies one or more FILE_ATTRIBUTE_XXX flags.&#10;} FILE_BASIC_INFORMATION, *PFILE_BASIC_INFORMATION;">FILE_BASIC_INFORMATION</a> structure. The caller must have opened the file with the FILE_READ_ATTRIBUTES flag specified in the <em>DesiredAccess</em> parameter.</td>
</tr>
<tr>
<td><strong>FileStandardInformation</strong> (5)</td>
<td>A <a href="file_standard_information" title="typedef struct _FILE_STANDARD_INFORMATION&#10;{&#10;    LARGE_INTEGER AllocationSize;       // The file allocation size in bytes. Usually, this value is a multiple of the sector or cluster size of the underlying physical device.&#10;    LARGE_INTEGER EndOfFile;            // The end of file location as a byte offset.&#10;    ULONG NumberOfLinks;                // The number of hard links to the file.&#10;    BOOLEAN DeletePending;              // The delete pending status. TRUE indicates that a file deletion has been requested.&#10;    BOOLEAN Directory;                  // The file directory status. TRUE indicates the file object represents a directory.&#10;} FILE_STANDARD_INFORMATION, *PFILE_STANDARD_INFORMATION;">FILE_STANDARD_INFORMATION</a> structure. The caller can query this information as long as the file is open, without any particular requirements for <em>DesiredAccess</em>.</td>
</tr>
<tr>
<td><strong>FileInternalInformation</strong> (6)</td>
<td>A <a href="file_internal_information" title="typedef struct _FILE_INTERNAL_INFORMATION&#10;{&#10;    union&#10;    {&#10;        ULARGE_INTEGER IndexNumber;&#10;        struct&#10;        {&#10;            ULONGLONG MftRecordIndex : 48; // rev&#10;            ULONGLONG SequenceNumber : 16; // rev&#10;        };&#10;    };&#10;} FILE_INTERNAL_INFORMATION, *PFILE_INTERNAL_INFORMATION;">FILE_INTERNAL_INFORMATION</a> structure. This structure specifies a 64-bit file ID that uniquely identifies a file in NTFS. On other file systems, this file ID is not guaranteed to be unique.</td>
</tr>
<tr>
<td><strong>FileEaInformation</strong> (7)</td>
<td>A <a href="file_ea_information" title="typedef struct _FILE_EA_INFORMATION&#10;{&#10;    ULONG EaSize;&#10;} FILE_EA_INFORMATION, *PFILE_EA_INFORMATION;">FILE_EA_INFORMATION</a> structure. This structure specifies the size of the extended attributes block that is associated with the file.</td>
</tr>
<tr>
<td><strong>FileAccessInformation</strong> (8)</td>
<td>A <a href="file_access_information" title="typedef struct _FILE_ACCESS_INFORMATION&#10;{&#10;    ACCESS_MASK AccessFlags;&#10;} FILE_ACCESS_INFORMATION, *PFILE_ACCESS_INFORMATION;">FILE_ACCESS_INFORMATION</a> structure. This structure contains an access mask. For more information about access masks, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/access-mask">ACCESS_MASK</a>.</td>
</tr>
<tr>
<td><strong>FileNameInformation</strong> (9)</td>
<td>A <a href="file_name_information" title="typedef struct _FILE_NAME_INFORMATION&#10;{&#10;    ULONG FileNameLength;&#10;    _Field_size_bytes_(FileNameLength) WCHAR FileName[1];&#10;} FILE_NAME_INFORMATION, *PFILE_NAME_INFORMATION;">FILE_NAME_INFORMATION</a> structure. The structure can contain the file's full path or only a portion of it. The caller can query this information as long as the file is open, without any particular requirements for <em>DesiredAccess</em>. For more information about the file-name syntax, see the Remarks section later in this topic.</td>
</tr>
<tr>
<td><strong>FilePositionInformation</strong> (14)</td>
<td>A <a href="file_position_information" title="typedef struct _FILE_POSITION_INFORMATION&#10;{&#10;    LARGE_INTEGER CurrentByteOffset;&#10;} FILE_POSITION_INFORMATION, *PFILE_POSITION_INFORMATION;">FILE_POSITION_INFORMATION</a> structure. The caller must have opened the file with the <em>DesiredAccess</em> FILE_READ_DATA or FILE_WRITE_DATA flag specified in the <em>DesiredAccess</em> parameter, and with the <a href="file_synchronous_io_alert" title="#define FILE_SYNCHRONOUS_IO_ALERT 0x00000010">FILE_SYNCHRONOUS_IO_ALERT</a> or <a href="file_synchronous_io_nonalert" title="#define FILE_SYNCHRONOUS_IO_NONALERT 0x00000020">FILE_SYNCHRONOUS_IO_NONALERT</a> flag specified in the <em>CreateOptions</em> parameter.</td>
</tr>
<tr>
<td><strong>FileModeInformation</strong> (16)</td>
<td>A <a href="file_mode_information" title="typedef struct _FILE_MODE_INFORMATION&#10;{&#10;    ULONG Mode;&#10;} FILE_MODE_INFORMATION, *PFILE_MODE_INFORMATION;">FILE_MODE_INFORMATION</a> structure. This structure contains a set of flags that specify the mode in which the file can be accessed. These flags are a subset of the options that can be specified in the <em>CreateOptions</em> parameter of the <strong><a href="iocreatefile" title="NTSTATUS IoCreateFile(&#10;  [out]          PHANDLE            FileHandle,&#10;  [in]           ACCESS_MASK        DesiredAccess,&#10;  [in]           POBJECT_ATTRIBUTES ObjectAttributes,&#10;  [out]          PIO_STATUS_BLOCK   IoStatusBlock,&#10;  [in, optional] PLARGE_INTEGER     AllocationSize,&#10;  [in]           ULONG              FileAttributes,&#10;  [in]           ULONG              ShareAccess,&#10;  [in]           ULONG              Disposition,&#10;  [in]           ULONG              CreateOptions,&#10;  [in, optional] PVOID              EaBuffer,&#10;  [in]           ULONG              EaLength,&#10;  [in]           CREATE_FILE_TYPE   CreateFileType,&#10;  [in, optional] PVOID              InternalParameters,&#10;  [in]           ULONG              Options&#10;);">IoCreateFile</a></strong> routine.</td>
</tr>
<tr>
<td><strong>FileAlignmentInformation</strong> (17)</td>
<td>A <a href="file_alignment_information" title="typedef struct _FILE_ALIGNMENT_INFORMATION&#10;{&#10;    ULONG AlignmentRequirement;&#10;} FILE_ALIGNMENT_INFORMATION, *PFILE_ALIGNMENT_INFORMATION;">FILE_ALIGNMENT_INFORMATION</a> structure. The caller can query this information as long as the file is open, without any particular requirements for <em>DesiredAccess</em>. This information is useful if the file was opened with the <a href="file_no_intermediate_buffering" title="#define FILE_NO_INTERMEDIATE_BUFFERING 0x00000008">FILE_NO_INTERMEDIATE_BUFFERING</a> flag specified in the <em>CreateOptions</em> parameter.</td>
</tr>
<tr>
<td><strong>FileAllInformation</strong> (18)</td>
<td>A <a href="file_all_information" title="typedef struct _FILE_ALL_INFORMATION&#10;{&#10;    FILE_BASIC_INFORMATION BasicInformation;&#10;    FILE_STANDARD_INFORMATION StandardInformation;&#10;    FILE_INTERNAL_INFORMATION InternalInformation;&#10;    FILE_EA_INFORMATION EaInformation;&#10;    FILE_ACCESS_INFORMATION AccessInformation;&#10;    FILE_POSITION_INFORMATION PositionInformation;&#10;    FILE_MODE_INFORMATION ModeInformation;&#10;    FILE_ALIGNMENT_INFORMATION AlignmentInformation;&#10;    FILE_NAME_INFORMATION NameInformation;&#10;} FILE_ALL_INFORMATION, *PFILE_ALL_INFORMATION;">FILE_ALL_INFORMATION</a> structure. By combining several file-information structures into a single structure, <strong><a href="file_all_information" title="typedef struct _FILE_ALL_INFORMATION&#10;{&#10;    FILE_BASIC_INFORMATION BasicInformation;&#10;    FILE_STANDARD_INFORMATION StandardInformation;&#10;    FILE_INTERNAL_INFORMATION InternalInformation;&#10;    FILE_EA_INFORMATION EaInformation;&#10;    FILE_ACCESS_INFORMATION AccessInformation;&#10;    FILE_POSITION_INFORMATION PositionInformation;&#10;    FILE_MODE_INFORMATION ModeInformation;&#10;    FILE_ALIGNMENT_INFORMATION AlignmentInformation;&#10;    FILE_NAME_INFORMATION NameInformation;&#10;} FILE_ALL_INFORMATION, *PFILE_ALL_INFORMATION;">FILE_ALL_INFORMATION</a></strong> reduces the number of queries required to obtain information about a file.</td>
</tr>
<tr>
<td><strong>FileAlternateNameInformation</strong> (21)</td>
<td>A <a href="file_all_information" title="typedef struct _FILE_ALL_INFORMATION&#10;{&#10;    FILE_BASIC_INFORMATION BasicInformation;&#10;    FILE_STANDARD_INFORMATION StandardInformation;&#10;    FILE_INTERNAL_INFORMATION InternalInformation;&#10;    FILE_EA_INFORMATION EaInformation;&#10;    FILE_ACCESS_INFORMATION AccessInformation;&#10;    FILE_POSITION_INFORMATION PositionInformation;&#10;    FILE_MODE_INFORMATION ModeInformation;&#10;    FILE_ALIGNMENT_INFORMATION AlignmentInformation;&#10;    FILE_NAME_INFORMATION NameInformation;&#10;} FILE_ALL_INFORMATION, *PFILE_ALL_INFORMATION;">FILE_ALL_INFORMATION</a> structure in which to return the alternate name information for a file (its 8.3 format name).</td>
</tr>
<tr>
<td><strong>FileStreamInformation</strong> (22)</td>
<td>A buffer of <a href="file_stream_information" title="_Struct_size_bytes_(NextEntryOffset)&#10;typedef struct _FILE_STREAM_INFORMATION&#10;{&#10;    ULONG NextEntryOffset;&#10;    ULONG StreamNameLength;&#10;    LARGE_INTEGER StreamSize;&#10;    LARGE_INTEGER StreamAllocationSize;&#10;    _Field_size_bytes_(StreamNameLength) WCHAR StreamName[1];&#10;} FILE_STREAM_INFORMATION, *PFILE_STREAM_INFORMATION;">FILE_STREAM_INFORMATION</a> structures in which to enumerate the data streams of a file or a directory.</td>
</tr>
<tr>
<td><strong>FileCompressionInformation</strong> (28)</td>
<td>A <a href="file_compression_information" title="typedef struct _FILE_COMPRESSION_INFORMATION&#10;{&#10;    LARGE_INTEGER CompressedFileSize;&#10;    USHORT CompressionFormat;&#10;    UCHAR CompressionUnitShift;&#10;    UCHAR ChunkShift;&#10;    UCHAR ClusterShift;&#10;    UCHAR Reserved[3];&#10;} FILE_COMPRESSION_INFORMATION, *PFILE_COMPRESSION_INFORMATION;">FILE_COMPRESSION_INFORMATION</a> structure in which to return compression information for a file.</td>
</tr>
<tr>
<td><strong>FileNetworkOpenInformation</strong> (34)</td>
<td>A <a href="file_network_open_information" title="typedef struct _FILE_NETWORK_OPEN_INFORMATION&#10;{&#10;    LARGE_INTEGER CreationTime;&#10;    LARGE_INTEGER LastAccessTime;&#10;    LARGE_INTEGER LastWriteTime;&#10;    LARGE_INTEGER ChangeTime;&#10;    LARGE_INTEGER AllocationSize;&#10;    LARGE_INTEGER EndOfFile;&#10;    ULONG FileAttributes;&#10;} FILE_NETWORK_OPEN_INFORMATION, *PFILE_NETWORK_OPEN_INFORMATION;">FILE_NETWORK_OPEN_INFORMATION</a> structure. The caller must have opened the file with the FILE_READ_ATTRIBUTES flag specified in the <em>DesiredAccess</em> parameter.</td>
</tr>
<tr>
<td><strong>FileAttributeTagInformation</strong> (35)</td>
<td>A <a href="file_attribute_tag_information" title="typedef struct _FILE_ATTRIBUTE_TAG_INFORMATION&#10;{&#10;    ULONG FileAttributes;&#10;    ULONG ReparseTag;&#10;} FILE_ATTRIBUTE_TAG_INFORMATION, *PFILE_ATTRIBUTE_TAG_INFORMATION;">FILE_ATTRIBUTE_TAG_INFORMATION</a> structure. The caller must have opened the file with the FILE_READ_ATTRIBUTES flag specified in the <em>DesiredAccess</em> parameter.</td>
</tr>
<tr>
<td><strong>FileIoPriorityHintInformation</strong> (43)</td>
<td>A <a href="file_io_priority_hint_information" title="typedef struct DECLSPEC_ALIGN(8) _FILE_IO_PRIORITY_HINT_INFORMATION&#10;{&#10;    IO_PRIORITY_HINT PriorityHint;&#10;} FILE_IO_PRIORITY_HINT_INFORMATION, *PFILE_IO_PRIORITY_HINT_INFORMATION;">FILE_IO_PRIORITY_HINT_INFORMATION</a> structure. The caller must have opened the file with the FILE_READ_DATA flag specified in the <em>DesiredAccess</em> parameter.</td>
</tr>
<tr>
<td><strong>FileSfioReserveInformation</strong> (44)</td>
<td>A <a href="file_sfio_reserve_information" title="typedef struct _FILE_SFIO_RESERVE_INFORMATION&#10;{&#10;    ULONG RequestsPerPeriod;&#10;    ULONG Period;&#10;    BOOLEAN RetryFailures;&#10;    BOOLEAN Discardable;&#10;    ULONG RequestSize;&#10;    ULONG NumOutstandingRequests;&#10;} FILE_SFIO_RESERVE_INFORMATION, *PFILE_SFIO_RESERVE_INFORMATION;">FILE_SFIO_RESERVE_INFORMATION</a> structure.</td>
</tr>
<tr>
<td><strong>FileHardLinkInformation</strong> (46)</td>
<td>A <a href="file_links_information" title="typedef struct _FILE_LINKS_INFORMATION&#10;{&#10;    ULONG BytesNeeded;&#10;    ULONG EntriesReturned;&#10;    FILE_LINK_ENTRY_INFORMATION Entry;&#10;} FILE_LINKS_INFORMATION, *PFILE_LINKS_INFORMATION;">FILE_LINKS_INFORMATION</a> structure.</td>
</tr>
<tr>
<td><strong>FileNormalizedNameInformation</strong> (48)</td>
<td>A <a href="file_name_information" title="typedef struct _FILE_NAME_INFORMATION&#10;{&#10;    ULONG FileNameLength;&#10;    _Field_size_bytes_(FileNameLength) WCHAR FileName[1];&#10;} FILE_NAME_INFORMATION, *PFILE_NAME_INFORMATION;">FILE_NAME_INFORMATION</a> structure in which to return the normalized name of a file.</td>
</tr>
<tr>
<td><strong>FileIsRemoteDeviceInformation</strong> (51)</td>
<td>A <a href="file_is_remote_device_information" title="typedef struct _FILE_IS_REMOTE_DEVICE_INFORMATION&#10;{&#10;    BOOLEAN IsRemote; // A value that indicates whether the file system that contains the file is a remote file system.&#10;} FILE_IS_REMOTE_DEVICE_INFORMATION, *PFILE_IS_REMOTE_DEVICE_INFORMATION;">FILE_IS_REMOTE_DEVICE_INFORMATION</a> structure. The caller can query this information as long as the file is open, without any particular requirements for <em>DesiredAccess</em>.</td>
</tr>
<tr>
<td><strong>FileStandardLinkInformation</strong> (54)</td>
<td>A <a href="file_standard_link_information" title="typedef struct _FILE_STANDARD_LINK_INFORMATION&#10;{&#10;    ULONG NumberOfAccessibleLinks;&#10;    ULONG TotalNumberOfLinks;&#10;    BOOLEAN DeletePending;&#10;    BOOLEAN Directory;&#10;} FILE_STANDARD_LINK_INFORMATION, *PFILE_STANDARD_LINK_INFORMATION;">FILE_STANDARD_LINK_INFORMATION</a> structure.</td>
</tr>
<tr>
<td><strong>FileIdInformation</strong> (59)</td>
<td>A <a href="file_id_information" title="typedef struct _FILE_ID_INFORMATION&#10;{&#10;    ULONGLONG VolumeSerialNumber;&#10;    union&#10;    {&#10;        FILE_ID_128 FileId;&#10;        struct&#10;        {&#10;            union&#10;            {&#10;                FILE_INTERNAL_INFORMATION FileInternal; // rev&#10;                LONGLONG FileIdLowPart; // rev&#10;            };&#10;            LONGLONG FileIdHighPart; // rev&#10;        };&#10;    };&#10;} FILE_ID_INFORMATION, *PFILE_ID_INFORMATION;">FILE_ID_INFORMATION</a> structure.</td>
</tr>
<tr>
<td><strong>FileDesiredStorageClassInformation</strong> (67)</td>
<td>A <a href="file_desired_storage_class_information" title="typedef struct _FILE_DESIRED_STORAGE_CLASS_INFORMATION {&#10;  FILE_STORAGE_TIER_CLASS Class;&#10;  ULONG                   Flags;&#10;} FILE_DESIRED_STORAGE_CLASS_INFORMATION, *PFILE_DESIRED_STORAGE_CLASS_INFORMATION;">FILE_DESIRED_STORAGE_CLASS_INFORMATION</a> structure.</td>
</tr>
<tr>
<td><strong>FileStatInformation</strong> (68)</td>
<td><a href="file_stat_information" title="typedef struct _FILE_STAT_INFORMATION&#10;{&#10;    LARGE_INTEGER FileId;&#10;    LARGE_INTEGER CreationTime;&#10;    LARGE_INTEGER LastAccessTime;&#10;    LARGE_INTEGER LastWriteTime;&#10;    LARGE_INTEGER ChangeTime;&#10;    LARGE_INTEGER AllocationSize;&#10;    LARGE_INTEGER EndOfFile;&#10;    ULONG FileAttributes;&#10;    ULONG ReparseTag;&#10;    ULONG NumberOfLinks;&#10;    ACCESS_MASK EffectiveAccess;&#10;} FILE_STAT_INFORMATION, *PFILE_STAT_INFORMATION;">FILE_STAT_INFORMATION</a></td>
</tr>
<tr>
<td><strong>FileStatLxInformation</strong> (70)</td>
<td><a href="file_stat_lx_information" title="typedef struct _FILE_STAT_LX_INFORMATION&#10;{&#10;    FILE_INTERNAL_INFORMATION FileId;&#10;    LARGE_INTEGER CreationTime;&#10;    LARGE_INTEGER LastAccessTime;&#10;    LARGE_INTEGER LastWriteTime;&#10;    LARGE_INTEGER ChangeTime;&#10;    LARGE_INTEGER AllocationSize;&#10;    LARGE_INTEGER EndOfFile;&#10;    ULONG FileAttributes;&#10;    ULONG ReparseTag;&#10;    ULONG NumberOfLinks;&#10;    ACCESS_MASK EffectiveAccess;&#10;    ULONG LxFlags;&#10;    ULONG LxUid;&#10;    ULONG LxGid;&#10;    ULONG LxMode;&#10;    ULONG LxDeviceIdMajor;&#10;    ULONG LxDeviceIdMinor;&#10;} FILE_STAT_LX_INFORMATION, *PFILE_STAT_LX_INFORMATION;">FILE_STAT_LX_INFORMATION</a></td>
</tr>
<tr>
<td><strong>FileCaseSensitiveInformation</strong> (71)</td>
<td>A <a href="file_case_sensitive_information" title="typedef struct _FILE_CASE_SENSITIVE_INFORMATION&#10;{&#10;    ULONG Flags;&#10;} FILE_CASE_SENSITIVE_INFORMATION, *PFILE_CASE_SENSITIVE_INFORMATION;">FILE_CASE_SENSITIVE_INFORMATION</a> structure. The caller must have opened the file with the FILE_READ_ATTRIBUTES flag specified in the <em>DesiredAccess</em> parameter. This value is available starting with Windows 10, version 1803.</td>
</tr>
<tr>
<td><strong>FileStorageReserveIdInformation</strong> (74)</td>
<td>A <a href="file_storage_reserve_id_information" title="typedef struct _FILE_STORAGE_RESERVE_ID_INFORMATION&#10;{&#10;    STORAGE_RESERVE_ID StorageReserveId;&#10;} FILE_STORAGE_RESERVE_ID_INFORMATION, *PFILE_STORAGE_RESERVE_ID_INFORMATION;">FILE_STORAGE_RESERVE_ID_INFORMATION</a> structure.</td>
</tr>
<tr>
<td><strong>FileCaseSensitiveInformationForceAccessCheck</strong> (75)</td>
<td>A <a href="file_case_sensitive_information" title="typedef struct _FILE_CASE_SENSITIVE_INFORMATION&#10;{&#10;    ULONG Flags;&#10;} FILE_CASE_SENSITIVE_INFORMATION, *PFILE_CASE_SENSITIVE_INFORMATION;">FILE_CASE_SENSITIVE_INFORMATION</a> structure. The caller must have opened the file with the FILE_READ_ATTRIBUTES flag specified in the <em>DesiredAccess</em> parameter. This is a special version of the FileCaseSensitiveInformation operation that is used to force the IOManager to perform access checks for the kernel-mode driver, similar to the checks that apply to a user-mode caller. This operation is only recognized by the IOManager and a file system should never receive it. This value is available starting with Windows 10, version 1803.</td>
</tr>
<tr>
<td><strong>FileKnownFolderInformation</strong> (76)</td>
<td>A <strong><a href="file_known_folder_information" title="typedef struct _FILE_KNOWN_FOLDER_INFORMATION&#10;{&#10;    FILE_KNOWN_FOLDER_TYPE Type;&#10;} FILE_KNOWN_FOLDER_INFORMATION, *PFILE_KNOWN_FOLDER_INFORMATION;">FILE_KNOWN_FOLDER_INFORMATION</a></strong> structure. Available starting in Windows Server 2022.</td>
</tr>
</tbody>
</table>
<h2>Return value</h2>
<p><strong>NtQueryInformationFile</strong> returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> or an appropriate <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> error code.</p>
<h2>Remarks</h2>
<p><strong>NtQueryInformationFile</strong> returns information about the specified file object. Note that it returns zero in any member of a <strong>FILE_<em>XXX</em>_INFORMATION</strong> structure that is not supported by a particular device or file system.</p>
<p>When <em>FileInformationClass</em> = <strong>FileNameInformation</strong>, the file name is returned in the <a href="file_name_information" title="typedef struct _FILE_NAME_INFORMATION&#10;{&#10;    ULONG FileNameLength;&#10;    _Field_size_bytes_(FileNameLength) WCHAR FileName[1];&#10;} FILE_NAME_INFORMATION, *PFILE_NAME_INFORMATION;">FILE_NAME_INFORMATION</a> structure. The precise syntax of the file name depends on a number of factors:</p>
<ul>
<li>
<p>If you opened the file by submitting a full path to <strong><a href="ntcreatefile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_opt_ PLARGE_INTEGER AllocationSize,&#10;    _In_ ULONG FileAttributes,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG CreateDisposition,&#10;    _In_ ULONG CreateOptions,&#10;    _In_reads_bytes_opt_(EaLength) PVOID EaBuffer,&#10;    _In_ ULONG EaLength&#10;    );">NtCreateFile</a></strong>, <strong>NtQueryInformationFile</strong> returns that full path.</p>
</li>
<li>
<p>If the <strong>ObjectAttributes->RootDirectory</strong> handle was opened by name in a call to <strong><a href="ntcreatefile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_opt_ PLARGE_INTEGER AllocationSize,&#10;    _In_ ULONG FileAttributes,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG CreateDisposition,&#10;    _In_ ULONG CreateOptions,&#10;    _In_reads_bytes_opt_(EaLength) PVOID EaBuffer,&#10;    _In_ ULONG EaLength&#10;    );">NtCreateFile</a></strong>, and subsequently the file was opened by <strong><a href="ntcreatefile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_opt_ PLARGE_INTEGER AllocationSize,&#10;    _In_ ULONG FileAttributes,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG CreateDisposition,&#10;    _In_ ULONG CreateOptions,&#10;    _In_reads_bytes_opt_(EaLength) PVOID EaBuffer,&#10;    _In_ ULONG EaLength&#10;    );">NtCreateFile</a></strong> relative to this root-directory handle, <strong>NtQueryInformationFile</strong> returns the full path.</p>
</li>
<li>
<p>If the <strong>ObjectAttributes->RootDirectory</strong> handle was opened by file ID (using the <a href="file_open_by_file_id" title="#define FILE_OPEN_BY_FILE_ID 0x00002000">FILE_OPEN_BY_FILE_ID</a> flag) in a call to <strong><a href="ntcreatefile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_opt_ PLARGE_INTEGER AllocationSize,&#10;    _In_ ULONG FileAttributes,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG CreateDisposition,&#10;    _In_ ULONG CreateOptions,&#10;    _In_reads_bytes_opt_(EaLength) PVOID EaBuffer,&#10;    _In_ ULONG EaLength&#10;    );">NtCreateFile</a></strong>, and subsequently the file was opened by <strong><a href="ntcreatefile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_opt_ PLARGE_INTEGER AllocationSize,&#10;    _In_ ULONG FileAttributes,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG CreateDisposition,&#10;    _In_ ULONG CreateOptions,&#10;    _In_reads_bytes_opt_(EaLength) PVOID EaBuffer,&#10;    _In_ ULONG EaLength&#10;    );">NtCreateFile</a></strong> relative to this root-directory handle, <strong>NtQueryInformationFile</strong> returns the relative path.</p>
</li>
<li>
<p>However, if the user has <strong>SeChangeNotifyPrivilege</strong> (described in the Microsoft Windows SDK documentation), <strong>NtQueryInformationFile</strong> returns the full path in all cases.</p>
</li>
<li>
<p>If only the relative path is returned, the file name string will not begin with a backslash.</p>
</li>
<li>
<p>If the full path and file name are returned, the string will begin with a single backslash, regardless of its location. Thus the file C:\dir1\dir2\filename.ext will appear as \dir1\dir2\filename.ext, while the file \server\share\dir1\dir2\filename.ext will appear as \server\share\dir1\dir2\filename.ext.</p>
</li>
</ul>
<p>If <strong>NtQueryInformationFile</strong> fails because of a buffer overflow, drivers that implement <strong>FileNameInformation</strong> should return as many WCHAR characters of the file name as will fit in the buffer and specify the full length that is required in the <em>FileNameLength</em> parameter of the <a href="file_name_information" title="typedef struct _FILE_NAME_INFORMATION&#10;{&#10;    ULONG FileNameLength;&#10;    _Field_size_bytes_(FileNameLength) WCHAR FileName[1];&#10;} FILE_NAME_INFORMATION, *PFILE_NAME_INFORMATION;">FILE_NAME_INFORMATION</a> structure. You should reissue the query by using the file name length so that you can retrieve the full file name. Drivers that do not follow this pattern might require a gradual increase in length until they retrieve the full file name. For more information about working with files, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/using-files-in-a-driver">Using Files in a Driver</a>.</p>
<p>Callers of <strong>NtQueryInformationFile</strong> must be running at IRQL = PASSIVE_LEVEL and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/disabling-apcs">with special kernel APCs enabled</a>.</p>
<blockquote>
<p>[!NOTE]
If the call to this function occurs in user mode, you should use the name "<strong>NtQueryInformationFile</strong>" instead of "<strong>ZwQueryInformationFile</strong>".</p>
</blockquote>
<p>For calls from kernel-mode drivers, the <strong>Nt<em>Xxx</em></strong> and <strong>Zw<em>Xxx</em></strong> versions of a Windows Native System Services routine can behave differently in the way that they handle and interpret input parameters. For more information about the relationship between the <strong>Nt<em>Xxx</em></strong> and <strong>Zw<em>Xxx</em></strong> versions of a routine, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/using-nt-and-zw-versions-of-the-native-system-services-routines">Using Nt and Zw Versions of the Native System Services Routines</a>.</p>
<h2>See also</h2>
<p><a href="file_access_information" title="typedef struct _FILE_ACCESS_INFORMATION&#10;{&#10;    ACCESS_MASK AccessFlags;&#10;} FILE_ACCESS_INFORMATION, *PFILE_ACCESS_INFORMATION;">FILE_ACCESS_INFORMATION</a></p>
<p><a href="file_alignment_information" title="typedef struct _FILE_ALIGNMENT_INFORMATION&#10;{&#10;    ULONG AlignmentRequirement;&#10;} FILE_ALIGNMENT_INFORMATION, *PFILE_ALIGNMENT_INFORMATION;">FILE_ALIGNMENT_INFORMATION</a></p>
<p><a href="file_all_information" title="typedef struct _FILE_ALL_INFORMATION&#10;{&#10;    FILE_BASIC_INFORMATION BasicInformation;&#10;    FILE_STANDARD_INFORMATION StandardInformation;&#10;    FILE_INTERNAL_INFORMATION InternalInformation;&#10;    FILE_EA_INFORMATION EaInformation;&#10;    FILE_ACCESS_INFORMATION AccessInformation;&#10;    FILE_POSITION_INFORMATION PositionInformation;&#10;    FILE_MODE_INFORMATION ModeInformation;&#10;    FILE_ALIGNMENT_INFORMATION AlignmentInformation;&#10;    FILE_NAME_INFORMATION NameInformation;&#10;} FILE_ALL_INFORMATION, *PFILE_ALL_INFORMATION;">FILE_ALL_INFORMATION</a></p>
<p><a href="file_attribute_tag_information" title="typedef struct _FILE_ATTRIBUTE_TAG_INFORMATION&#10;{&#10;    ULONG FileAttributes;&#10;    ULONG ReparseTag;&#10;} FILE_ATTRIBUTE_TAG_INFORMATION, *PFILE_ATTRIBUTE_TAG_INFORMATION;">FILE_ATTRIBUTE_TAG_INFORMATION</a></p>
<p><a href="file_basic_information" title="typedef struct _FILE_BASIC_INFORMATION&#10;{&#10;    LARGE_INTEGER CreationTime;         // Specifies the time that the file was created.&#10;    LARGE_INTEGER LastAccessTime;       // Specifies the time that the file was last accessed.&#10;    LARGE_INTEGER LastWriteTime;        // Specifies the time that the file was last written to.&#10;    LARGE_INTEGER ChangeTime;           // Specifies the last time the file was changed.&#10;    ULONG FileAttributes;               // Specifies one or more FILE_ATTRIBUTE_XXX flags.&#10;} FILE_BASIC_INFORMATION, *PFILE_BASIC_INFORMATION;">FILE_BASIC_INFORMATION</a></p>
<p><a href="file_ea_information" title="typedef struct _FILE_EA_INFORMATION&#10;{&#10;    ULONG EaSize;&#10;} FILE_EA_INFORMATION, *PFILE_EA_INFORMATION;">FILE_EA_INFORMATION</a></p>
<p><a href="file_internal_information" title="typedef struct _FILE_INTERNAL_INFORMATION&#10;{&#10;    union&#10;    {&#10;        ULARGE_INTEGER IndexNumber;&#10;        struct&#10;        {&#10;            ULONGLONG MftRecordIndex : 48; // rev&#10;            ULONGLONG SequenceNumber : 16; // rev&#10;        };&#10;    };&#10;} FILE_INTERNAL_INFORMATION, *PFILE_INTERNAL_INFORMATION;">FILE_INTERNAL_INFORMATION</a></p>
<p><a href="file_io_priority_hint_information" title="typedef struct DECLSPEC_ALIGN(8) _FILE_IO_PRIORITY_HINT_INFORMATION&#10;{&#10;    IO_PRIORITY_HINT PriorityHint;&#10;} FILE_IO_PRIORITY_HINT_INFORMATION, *PFILE_IO_PRIORITY_HINT_INFORMATION;">FILE_IO_PRIORITY_HINT_INFORMATION</a></p>
<p><a href="file_is_remote_device_information" title="typedef struct _FILE_IS_REMOTE_DEVICE_INFORMATION&#10;{&#10;    BOOLEAN IsRemote; // A value that indicates whether the file system that contains the file is a remote file system.&#10;} FILE_IS_REMOTE_DEVICE_INFORMATION, *PFILE_IS_REMOTE_DEVICE_INFORMATION;">FILE_IS_REMOTE_DEVICE_INFORMATION</a></p>
<p><a href="file_mode_information" title="typedef struct _FILE_MODE_INFORMATION&#10;{&#10;    ULONG Mode;&#10;} FILE_MODE_INFORMATION, *PFILE_MODE_INFORMATION;">FILE_MODE_INFORMATION</a></p>
<p><a href="file_name_information" title="typedef struct _FILE_NAME_INFORMATION&#10;{&#10;    ULONG FileNameLength;&#10;    _Field_size_bytes_(FileNameLength) WCHAR FileName[1];&#10;} FILE_NAME_INFORMATION, *PFILE_NAME_INFORMATION;">FILE_NAME_INFORMATION</a></p>
<p><a href="file_network_open_information" title="typedef struct _FILE_NETWORK_OPEN_INFORMATION&#10;{&#10;    LARGE_INTEGER CreationTime;&#10;    LARGE_INTEGER LastAccessTime;&#10;    LARGE_INTEGER LastWriteTime;&#10;    LARGE_INTEGER ChangeTime;&#10;    LARGE_INTEGER AllocationSize;&#10;    LARGE_INTEGER EndOfFile;&#10;    ULONG FileAttributes;&#10;} FILE_NETWORK_OPEN_INFORMATION, *PFILE_NETWORK_OPEN_INFORMATION;">FILE_NETWORK_OPEN_INFORMATION</a></p>
<p><a href="file_position_information" title="typedef struct _FILE_POSITION_INFORMATION&#10;{&#10;    LARGE_INTEGER CurrentByteOffset;&#10;} FILE_POSITION_INFORMATION, *PFILE_POSITION_INFORMATION;">FILE_POSITION_INFORMATION</a></p>
<p><a href="file_standard_information" title="typedef struct _FILE_STANDARD_INFORMATION&#10;{&#10;    LARGE_INTEGER AllocationSize;       // The file allocation size in bytes. Usually, this value is a multiple of the sector or cluster size of the underlying physical device.&#10;    LARGE_INTEGER EndOfFile;            // The end of file location as a byte offset.&#10;    ULONG NumberOfLinks;                // The number of hard links to the file.&#10;    BOOLEAN DeletePending;              // The delete pending status. TRUE indicates that a file deletion has been requested.&#10;    BOOLEAN Directory;                  // The file directory status. TRUE indicates the file object represents a directory.&#10;} FILE_STANDARD_INFORMATION, *PFILE_STANDARD_INFORMATION;">FILE_STANDARD_INFORMATION</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/using-nt-and-zw-versions-of-the-native-system-services-routines">Using Nt and Zw Versions of the Native System Services Routines</a></p>
<p><strong><a href="ntcreatefile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_opt_ PLARGE_INTEGER AllocationSize,&#10;    _In_ ULONG FileAttributes,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG CreateDisposition,&#10;    _In_ ULONG CreateOptions,&#10;    _In_reads_bytes_opt_(EaLength) PVOID EaBuffer,&#10;    _In_ ULONG EaLength&#10;    );">NtCreateFile</a></strong></p>
<p><strong><a href="ntqueryinformationbyname" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtQueryInformationByName(&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _Out_writes_bytes_(Length) PVOID FileInformation,&#10;    _In_ ULONG Length,&#10;    _In_ FILE_INFORMATION_CLASS FileInformationClass&#10;    );">NtQueryInformationByName</a></strong></p>
<p><strong><a href="ntsetinformationfile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtSetInformationFile(&#10;    _In_ HANDLE FileHandle,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_reads_bytes_(Length) PVOID FileInformation,&#10;    _In_ ULONG Length,&#10;    _In_ FILE_INFORMATION_CLASS FileInformationClass&#10;    );">NtSetInformationFile</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/nf-ntifs-ntqueryinformationfile">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntifs/nf-ntifs-ntqueryinformationfile.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-wdm-zwqueryinformationfile)</h1>
</div>
<div class="ntdoc-description">
<h2>Description</h2>
<p>The <strong>ZwQueryInformationFile</strong> routine returns various kinds of information about a file object.</p>
<h2>Parameters</h2>
<h3><code>FileHandle</code> [in]</h3>
<p>Handle to a file object. The handle is created by a successful call to <strong><a href="ntcreatefile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_opt_ PLARGE_INTEGER AllocationSize,&#10;    _In_ ULONG FileAttributes,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG CreateDisposition,&#10;    _In_ ULONG CreateOptions,&#10;    _In_reads_bytes_opt_(EaLength) PVOID EaBuffer,&#10;    _In_ ULONG EaLength&#10;    );">ZwCreateFile</a></strong> or <strong><a href="ntopenfile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtOpenFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG OpenOptions&#10;    );">ZwOpenFile</a></strong>.</p>
<h3><code>IoStatusBlock</code> [out]</h3>
<p>Pointer to an <strong><a href="io_status_block" title="typedef struct _IO_STATUS_BLOCK&#10;{&#10;    union&#10;    {&#10;        NTSTATUS Status;&#10;        PVOID Pointer;&#10;    };&#10;    ULONG_PTR Information;&#10;} IO_STATUS_BLOCK, *PIO_STATUS_BLOCK;">IO_STATUS_BLOCK</a></strong> structure that receives the final completion status and information about the operation. The <strong>Information</strong> member receives the number of bytes that this routine actually writes to the <strong>FileInformation</strong> buffer.</p>
<h3><code>FileInformation</code> [out]</h3>
<p>Pointer to a caller-allocated buffer into which the routine writes the requested information about the file object. The <strong>FileInformationClass</strong> parameter specifies the type of information that the caller requests.</p>
<h3><code>Length</code> [in]</h3>
<p>The size, in bytes, of the buffer pointed to by <strong>FileInformation</strong>.</p>
<h3><code>FileInformationClass</code> [in]</h3>
<p>Specifies the type of information to be returned about the file, in the buffer that <strong>FileInformation</strong> points to. Device and intermediate drivers can specify any of the following <strong><a href="file_information_class" title="typedef enum _FILE_INFORMATION_CLASS&#10;{&#10;    FileDirectoryInformation = 1,                   // q: FILE_DIRECTORY_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileFullDirectoryInformation,                   // q: FILE_FULL_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBothDirectoryInformation,                   // q: FILE_BOTH_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBasicInformation,                           // qs: FILE_BASIC_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileStandardInformation,                        // q: FILE_STANDARD_INFORMATION, FILE_STANDARD_INFORMATION_EX&#10;    FileInternalInformation,                        // q: FILE_INTERNAL_INFORMATION&#10;    FileEaInformation,                              // q: FILE_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileAccessInformation,                          // q: FILE_ACCESS_INFORMATION&#10;    FileNameInformation,                            // q: FILE_NAME_INFORMATION&#10;    FileRenameInformation,                          // s: FILE_RENAME_INFORMATION (requires DELETE) // 10&#10;    FileLinkInformation,                            // s: FILE_LINK_INFORMATION&#10;    FileNamesInformation,                           // q: FILE_NAMES_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileDispositionInformation,                     // s: FILE_DISPOSITION_INFORMATION (requires DELETE)&#10;    FilePositionInformation,                        // qs: FILE_POSITION_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileFullEaInformation,                          // q: FILE_FULL_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileModeInformation,                            // qs: FILE_MODE_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileAlignmentInformation,                       // q: FILE_ALIGNMENT_INFORMATION&#10;    FileAllInformation,                             // q: FILE_ALL_INFORMATION&#10;...">FILE_INFORMATION_CLASS</a></strong> values.</p>
<table>
<thead>
<tr>
<th><a href="file_information_class" title="typedef enum _FILE_INFORMATION_CLASS&#10;{&#10;    FileDirectoryInformation = 1,                   // q: FILE_DIRECTORY_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileFullDirectoryInformation,                   // q: FILE_FULL_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBothDirectoryInformation,                   // q: FILE_BOTH_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBasicInformation,                           // qs: FILE_BASIC_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileStandardInformation,                        // q: FILE_STANDARD_INFORMATION, FILE_STANDARD_INFORMATION_EX&#10;    FileInternalInformation,                        // q: FILE_INTERNAL_INFORMATION&#10;    FileEaInformation,                              // q: FILE_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileAccessInformation,                          // q: FILE_ACCESS_INFORMATION&#10;    FileNameInformation,                            // q: FILE_NAME_INFORMATION&#10;    FileRenameInformation,                          // s: FILE_RENAME_INFORMATION (requires DELETE) // 10&#10;    FileLinkInformation,                            // s: FILE_LINK_INFORMATION&#10;    FileNamesInformation,                           // q: FILE_NAMES_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileDispositionInformation,                     // s: FILE_DISPOSITION_INFORMATION (requires DELETE)&#10;    FilePositionInformation,                        // qs: FILE_POSITION_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileFullEaInformation,                          // q: FILE_FULL_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileModeInformation,                            // qs: FILE_MODE_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileAlignmentInformation,                       // q: FILE_ALIGNMENT_INFORMATION&#10;    FileAllInformation,                             // q: FILE_ALL_INFORMATION&#10;...">FILE_INFORMATION_CLASS</a> value</th>
<th>Type of information returned</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>FileBasicInformation</strong> (4)</td>
<td>A <strong><a href="file_basic_information" title="typedef struct _FILE_BASIC_INFORMATION&#10;{&#10;    LARGE_INTEGER CreationTime;         // Specifies the time that the file was created.&#10;    LARGE_INTEGER LastAccessTime;       // Specifies the time that the file was last accessed.&#10;    LARGE_INTEGER LastWriteTime;        // Specifies the time that the file was last written to.&#10;    LARGE_INTEGER ChangeTime;           // Specifies the last time the file was changed.&#10;    ULONG FileAttributes;               // Specifies one or more FILE_ATTRIBUTE_XXX flags.&#10;} FILE_BASIC_INFORMATION, *PFILE_BASIC_INFORMATION;">FILE_BASIC_INFORMATION</a></strong> structure. The caller must have opened the file with the FILE_READ_ATTRIBUTES flag specified in the <strong>DesiredAccess</strong> parameter.</td>
</tr>
<tr>
<td><strong>FileStandardInformation</strong> (5)</td>
<td>A <strong><a href="file_standard_information" title="typedef struct _FILE_STANDARD_INFORMATION&#10;{&#10;    LARGE_INTEGER AllocationSize;       // The file allocation size in bytes. Usually, this value is a multiple of the sector or cluster size of the underlying physical device.&#10;    LARGE_INTEGER EndOfFile;            // The end of file location as a byte offset.&#10;    ULONG NumberOfLinks;                // The number of hard links to the file.&#10;    BOOLEAN DeletePending;              // The delete pending status. TRUE indicates that a file deletion has been requested.&#10;    BOOLEAN Directory;                  // The file directory status. TRUE indicates the file object represents a directory.&#10;} FILE_STANDARD_INFORMATION, *PFILE_STANDARD_INFORMATION;">FILE_STANDARD_INFORMATION</a></strong> structure. The caller can query this information as long as the file is open, without any particular requirements for <strong>DesiredAccess</strong>.</td>
</tr>
<tr>
<td><strong>FileInternalInformation</strong> (6)</td>
<td>A <strong><a href="file_internal_information" title="typedef struct _FILE_INTERNAL_INFORMATION&#10;{&#10;    union&#10;    {&#10;        ULARGE_INTEGER IndexNumber;&#10;        struct&#10;        {&#10;            ULONGLONG MftRecordIndex : 48; // rev&#10;            ULONGLONG SequenceNumber : 16; // rev&#10;        };&#10;    };&#10;} FILE_INTERNAL_INFORMATION, *PFILE_INTERNAL_INFORMATION;">FILE_INTERNAL_INFORMATION</a></strong> structure. This structure specifies a 64-bit file ID that uniquely identifies a file in NTFS. On other file systems, this file ID is not guaranteed to be unique.</td>
</tr>
<tr>
<td><strong>FileEaInformation</strong> (7)</td>
<td>A <strong><a href="file_ea_information" title="typedef struct _FILE_EA_INFORMATION&#10;{&#10;    ULONG EaSize;&#10;} FILE_EA_INFORMATION, *PFILE_EA_INFORMATION;">FILE_EA_INFORMATION</a></strong> structure. This structure specifies the size of the extended attributes block that is associated with the file.</td>
</tr>
<tr>
<td><strong>FileAccessInformation</strong> (8)</td>
<td>A <strong><a href="file_access_information" title="typedef struct _FILE_ACCESS_INFORMATION&#10;{&#10;    ACCESS_MASK AccessFlags;&#10;} FILE_ACCESS_INFORMATION, *PFILE_ACCESS_INFORMATION;">FILE_ACCESS_INFORMATION</a></strong> structure. This structure contains an access mask. For more information about access masks, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/access-mask"><strong>ACCESS_MASK</strong></a>.</td>
</tr>
<tr>
<td><strong>FileNameInformation</strong> (9)</td>
<td>A <strong><a href="file_name_information" title="typedef struct _FILE_NAME_INFORMATION&#10;{&#10;    ULONG FileNameLength;&#10;    _Field_size_bytes_(FileNameLength) WCHAR FileName[1];&#10;} FILE_NAME_INFORMATION, *PFILE_NAME_INFORMATION;">FILE_NAME_INFORMATION</a></strong> structure. The structure can contain the file's full path or only a portion of it. The caller can query this information as long as the file is open, without any particular requirements for <strong>DesiredAccess</strong>. For more information about the file-name syntax, see the Remarks section later in this topic.</td>
</tr>
<tr>
<td><strong>FilePositionInformation</strong> (14)</td>
<td>A <strong><a href="file_position_information" title="typedef struct _FILE_POSITION_INFORMATION&#10;{&#10;    LARGE_INTEGER CurrentByteOffset;&#10;} FILE_POSITION_INFORMATION, *PFILE_POSITION_INFORMATION;">FILE_POSITION_INFORMATION</a></strong> structure. The caller must have opened the file with the <strong>DesiredAccess</strong> FILE_READ_DATA or FILE_WRITE_DATA flag specified in the <strong>DesiredAccess</strong> parameter, and with the <a href="file_synchronous_io_alert" title="#define FILE_SYNCHRONOUS_IO_ALERT 0x00000010">FILE_SYNCHRONOUS_IO_ALERT</a> or <a href="file_synchronous_io_nonalert" title="#define FILE_SYNCHRONOUS_IO_NONALERT 0x00000020">FILE_SYNCHRONOUS_IO_NONALERT</a> flag specified in the <strong>CreateOptions</strong> parameter.</td>
</tr>
<tr>
<td><strong>FileModeInformation</strong> (16)</td>
<td>A <strong><a href="file_mode_information" title="typedef struct _FILE_MODE_INFORMATION&#10;{&#10;    ULONG Mode;&#10;} FILE_MODE_INFORMATION, *PFILE_MODE_INFORMATION;">FILE_MODE_INFORMATION</a></strong> structure. This structure contains a set of flags that specify the mode in which the file can be accessed. These flags are a subset of the options that can be specified in the <strong>CreateOptions</strong> parameter of the <strong><a href="iocreatefile" title="NTSTATUS IoCreateFile(&#10;  [out]          PHANDLE            FileHandle,&#10;  [in]           ACCESS_MASK        DesiredAccess,&#10;  [in]           POBJECT_ATTRIBUTES ObjectAttributes,&#10;  [out]          PIO_STATUS_BLOCK   IoStatusBlock,&#10;  [in, optional] PLARGE_INTEGER     AllocationSize,&#10;  [in]           ULONG              FileAttributes,&#10;  [in]           ULONG              ShareAccess,&#10;  [in]           ULONG              Disposition,&#10;  [in]           ULONG              CreateOptions,&#10;  [in, optional] PVOID              EaBuffer,&#10;  [in]           ULONG              EaLength,&#10;  [in]           CREATE_FILE_TYPE   CreateFileType,&#10;  [in, optional] PVOID              InternalParameters,&#10;  [in]           ULONG              Options&#10;);">IoCreateFile</a></strong> routine.</td>
</tr>
<tr>
<td><strong>FileAlignmentInformation</strong> (17)</td>
<td>A <strong><a href="file_alignment_information" title="typedef struct _FILE_ALIGNMENT_INFORMATION&#10;{&#10;    ULONG AlignmentRequirement;&#10;} FILE_ALIGNMENT_INFORMATION, *PFILE_ALIGNMENT_INFORMATION;">FILE_ALIGNMENT_INFORMATION</a></strong> structure. The caller can query this information as long as the file is open, without any particular requirements for <strong>DesiredAccess*[</strong>*. This information is useful if the file was opened with the <a href="file_no_intermediate_buffering" title="#define FILE_NO_INTERMEDIATE_BUFFERING 0x00000008">FILE_NO_INTERMEDIATE_BUFFERING</a> flag specified in the <strong>CreateOptions</strong> parameter.</td>
</tr>
<tr>
<td><strong>FileAllInformation</strong> (18)</td>
<td>A <strong><a href="file_all_information" title="typedef struct _FILE_ALL_INFORMATION&#10;{&#10;    FILE_BASIC_INFORMATION BasicInformation;&#10;    FILE_STANDARD_INFORMATION StandardInformation;&#10;    FILE_INTERNAL_INFORMATION InternalInformation;&#10;    FILE_EA_INFORMATION EaInformation;&#10;    FILE_ACCESS_INFORMATION AccessInformation;&#10;    FILE_POSITION_INFORMATION PositionInformation;&#10;    FILE_MODE_INFORMATION ModeInformation;&#10;    FILE_ALIGNMENT_INFORMATION AlignmentInformation;&#10;    FILE_NAME_INFORMATION NameInformation;&#10;} FILE_ALL_INFORMATION, *PFILE_ALL_INFORMATION;">FILE_ALL_INFORMATION</a></strong> structure. By combining several file-information structures into a single structure, <strong><a href="file_all_information" title="typedef struct _FILE_ALL_INFORMATION&#10;{&#10;    FILE_BASIC_INFORMATION BasicInformation;&#10;    FILE_STANDARD_INFORMATION StandardInformation;&#10;    FILE_INTERNAL_INFORMATION InternalInformation;&#10;    FILE_EA_INFORMATION EaInformation;&#10;    FILE_ACCESS_INFORMATION AccessInformation;&#10;    FILE_POSITION_INFORMATION PositionInformation;&#10;    FILE_MODE_INFORMATION ModeInformation;&#10;    FILE_ALIGNMENT_INFORMATION AlignmentInformation;&#10;    FILE_NAME_INFORMATION NameInformation;&#10;} FILE_ALL_INFORMATION, *PFILE_ALL_INFORMATION;">FILE_ALL_INFORMATION</a></strong> reduces the number of queries required to obtain information about a file.</td>
</tr>
<tr>
<td><strong>FileNetworkOpenInformation</strong> (34)</td>
<td>A <strong><a href="file_network_open_information" title="typedef struct _FILE_NETWORK_OPEN_INFORMATION&#10;{&#10;    LARGE_INTEGER CreationTime;&#10;    LARGE_INTEGER LastAccessTime;&#10;    LARGE_INTEGER LastWriteTime;&#10;    LARGE_INTEGER ChangeTime;&#10;    LARGE_INTEGER AllocationSize;&#10;    LARGE_INTEGER EndOfFile;&#10;    ULONG FileAttributes;&#10;} FILE_NETWORK_OPEN_INFORMATION, *PFILE_NETWORK_OPEN_INFORMATION;">FILE_NETWORK_OPEN_INFORMATION</a></strong> structure. The caller must have opened the file with the FILE_READ_ATTRIBUTES flag specified in the <strong>DesiredAccess</strong> parameter.</td>
</tr>
<tr>
<td><strong>FileAttributeTagInformation</strong> (35)</td>
<td>A <strong><a href="file_attribute_tag_information" title="typedef struct _FILE_ATTRIBUTE_TAG_INFORMATION&#10;{&#10;    ULONG FileAttributes;&#10;    ULONG ReparseTag;&#10;} FILE_ATTRIBUTE_TAG_INFORMATION, *PFILE_ATTRIBUTE_TAG_INFORMATION;">FILE_ATTRIBUTE_TAG_INFORMATION</a></strong> structure. The caller must have opened the file with the FILE_READ_ATTRIBUTES flag specified in the <strong>DesiredAccess</strong> parameter.</td>
</tr>
<tr>
<td><strong>FileIoPriorityHintInformation</strong> (43)</td>
<td>A <strong><a href="file_io_priority_hint_information" title="typedef struct DECLSPEC_ALIGN(8) _FILE_IO_PRIORITY_HINT_INFORMATION&#10;{&#10;    IO_PRIORITY_HINT PriorityHint;&#10;} FILE_IO_PRIORITY_HINT_INFORMATION, *PFILE_IO_PRIORITY_HINT_INFORMATION;">FILE_IO_PRIORITY_HINT_INFORMATION</a></strong> structure. The caller must have opened the file with the FILE_READ_DATA flag specified in the <strong>DesiredAccess</strong> parameter.</td>
</tr>
<tr>
<td><strong>FileIsRemoteDeviceInformation</strong> (51)</td>
<td>A <strong><a href="file_is_remote_device_information" title="typedef struct _FILE_IS_REMOTE_DEVICE_INFORMATION&#10;{&#10;    BOOLEAN IsRemote; // A value that indicates whether the file system that contains the file is a remote file system.&#10;} FILE_IS_REMOTE_DEVICE_INFORMATION, *PFILE_IS_REMOTE_DEVICE_INFORMATION;">FILE_IS_REMOTE_DEVICE_INFORMATION</a></strong> structure. The caller can query this information as long as the file is open, without any particular requirements for <strong>DesiredAccess</strong>.</td>
</tr>
<tr>
<td><strong>FileKnownFolderInformation</strong> (76)</td>
<td>A <strong><a href="file_known_folder_information" title="typedef struct _FILE_KNOWN_FOLDER_INFORMATION&#10;{&#10;    FILE_KNOWN_FOLDER_TYPE Type;&#10;} FILE_KNOWN_FOLDER_INFORMATION, *PFILE_KNOWN_FOLDER_INFORMATION;">FILE_KNOWN_FOLDER_INFORMATION</a></strong> structure. Available starting in Windows Server 2022.</td>
</tr>
</tbody>
</table>
<h2>Return value</h2>
<p><strong>ZwQueryInformationFile</strong> returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> or an appropriate <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> error code.</p>
<h2>Remarks</h2>
<p><strong>ZwQueryInformationFile</strong> returns information about the specified file object. Note that it returns zero in any member of a <strong>FILE_<em>XXX</em>_INFORMATION</strong> structure that is not supported by a particular device or file system.</p>
<p>When <strong>FileInformationClass</strong> = <strong>FileNameInformation</strong>, the file name is returned in the <strong><a href="file_name_information" title="typedef struct _FILE_NAME_INFORMATION&#10;{&#10;    ULONG FileNameLength;&#10;    _Field_size_bytes_(FileNameLength) WCHAR FileName[1];&#10;} FILE_NAME_INFORMATION, *PFILE_NAME_INFORMATION;">FILE_NAME_INFORMATION</a></strong> structure. The precise syntax of the file name depends on a number of factors:</p>
<ul>
<li>
<p>If you opened the file by submitting a full path to <strong><a href="ntcreatefile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_opt_ PLARGE_INTEGER AllocationSize,&#10;    _In_ ULONG FileAttributes,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG CreateDisposition,&#10;    _In_ ULONG CreateOptions,&#10;    _In_reads_bytes_opt_(EaLength) PVOID EaBuffer,&#10;    _In_ ULONG EaLength&#10;    );">ZwCreateFile</a></strong>, <strong>ZwQueryInformationFile</strong> returns that full path.</p>
</li>
<li>
<p>If the <strong>ObjectAttributes->RootDirectory</strong> handle was opened by name in a call to <strong><a href="ntcreatefile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_opt_ PLARGE_INTEGER AllocationSize,&#10;    _In_ ULONG FileAttributes,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG CreateDisposition,&#10;    _In_ ULONG CreateOptions,&#10;    _In_reads_bytes_opt_(EaLength) PVOID EaBuffer,&#10;    _In_ ULONG EaLength&#10;    );">ZwCreateFile</a></strong>, and subsequently the file was opened by <strong><a href="ntcreatefile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_opt_ PLARGE_INTEGER AllocationSize,&#10;    _In_ ULONG FileAttributes,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG CreateDisposition,&#10;    _In_ ULONG CreateOptions,&#10;    _In_reads_bytes_opt_(EaLength) PVOID EaBuffer,&#10;    _In_ ULONG EaLength&#10;    );">ZwCreateFile</a></strong> relative to this root-directory handle, <strong>ZwQueryInformationFile</strong> returns the full path.</p>
</li>
<li>
<p>If the <strong>ObjectAttributes->RootDirectory</strong> handle was opened by file ID (using the <a href="file_open_by_file_id" title="#define FILE_OPEN_BY_FILE_ID 0x00002000">FILE_OPEN_BY_FILE_ID</a> flag) in a call to <strong><a href="ntcreatefile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_opt_ PLARGE_INTEGER AllocationSize,&#10;    _In_ ULONG FileAttributes,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG CreateDisposition,&#10;    _In_ ULONG CreateOptions,&#10;    _In_reads_bytes_opt_(EaLength) PVOID EaBuffer,&#10;    _In_ ULONG EaLength&#10;    );">ZwCreateFile</a></strong>, and subsequently the file was opened by <strong><a href="ntcreatefile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_opt_ PLARGE_INTEGER AllocationSize,&#10;    _In_ ULONG FileAttributes,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG CreateDisposition,&#10;    _In_ ULONG CreateOptions,&#10;    _In_reads_bytes_opt_(EaLength) PVOID EaBuffer,&#10;    _In_ ULONG EaLength&#10;    );">ZwCreateFile</a></strong> relative to this root-directory handle, <strong>ZwQueryInformationFile</strong> returns the relative path.</p>
</li>
<li>
<p>However, if the user has <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/secauthz/privilege-constants"><strong>SeChangeNotifyPrivilege</strong></a>, <strong>ZwQueryInformationFile</strong> returns the full path in all cases.</p>
</li>
<li>
<p>If only the relative path is returned, the file name string will not begin with a backslash.</p>
</li>
<li>
<p>If the full path and file name are returned, the string will begin with a single backslash, regardless of its location. Thus the file C:\dir1\dir2\filename.ext will appear as \dir1\dir2\filename.ext, while the file \server\share\dir1\dir2\filename.ext will appear as \server\share\dir1\dir2\filename.ext.</p>
</li>
</ul>
<p>If <strong>ZwQueryInformationFile</strong> fails because of a buffer overflow, drivers that implement <strong>FileNameInformation</strong> should return as many WCHAR characters of the file name as will fit in the buffer and specify the full length that is required in the <strong>FileNameLength</strong> parameter of the <strong><a href="file_name_information" title="typedef struct _FILE_NAME_INFORMATION&#10;{&#10;    ULONG FileNameLength;&#10;    _Field_size_bytes_(FileNameLength) WCHAR FileName[1];&#10;} FILE_NAME_INFORMATION, *PFILE_NAME_INFORMATION;">FILE_NAME_INFORMATION</a></strong> structure. You should reissue the query by using the file name length so that you can retrieve the full file name. Drivers that do not follow this pattern might require a gradual increase in length until they retrieve the full file name. For more information about working with files, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/using-files-in-a-driver">Using Files in a Driver</a>.</p>
<p>Callers of <strong>ZwQueryInformationFile</strong> must be running at IRQL = PASSIVE_LEVEL and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/disabling-apcs">with special kernel APCs enabled</a>.</p>
<p>If the call to this function occurs in user mode, you should use the name "<strong>NtQueryInformationFile</strong>" instead of "<strong>ZwQueryInformationFile</strong>".</p>
<p>For calls from kernel-mode drivers, the <strong>Nt<em>Xxx</em></strong> and <strong>Zw<em>Xxx</em></strong> versions of a Windows Native System Services routine can behave differently in the way that they handle and interpret input parameters. For more information about the relationship between the <strong>Nt<em>Xxx</em></strong> and <strong>Zw<em>Xxx</em></strong> versions of a routine, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/using-nt-and-zw-versions-of-the-native-system-services-routines">Using Nt and Zw Versions of the Native System Services Routines</a>.</p>
<h2>See also</h2>
<p><strong><a href="file_access_information" title="typedef struct _FILE_ACCESS_INFORMATION&#10;{&#10;    ACCESS_MASK AccessFlags;&#10;} FILE_ACCESS_INFORMATION, *PFILE_ACCESS_INFORMATION;">FILE_ACCESS_INFORMATION</a></strong></p>
<p><strong><a href="file_alignment_information" title="typedef struct _FILE_ALIGNMENT_INFORMATION&#10;{&#10;    ULONG AlignmentRequirement;&#10;} FILE_ALIGNMENT_INFORMATION, *PFILE_ALIGNMENT_INFORMATION;">FILE_ALIGNMENT_INFORMATION</a></strong></p>
<p><strong><a href="file_all_information" title="typedef struct _FILE_ALL_INFORMATION&#10;{&#10;    FILE_BASIC_INFORMATION BasicInformation;&#10;    FILE_STANDARD_INFORMATION StandardInformation;&#10;    FILE_INTERNAL_INFORMATION InternalInformation;&#10;    FILE_EA_INFORMATION EaInformation;&#10;    FILE_ACCESS_INFORMATION AccessInformation;&#10;    FILE_POSITION_INFORMATION PositionInformation;&#10;    FILE_MODE_INFORMATION ModeInformation;&#10;    FILE_ALIGNMENT_INFORMATION AlignmentInformation;&#10;    FILE_NAME_INFORMATION NameInformation;&#10;} FILE_ALL_INFORMATION, *PFILE_ALL_INFORMATION;">FILE_ALL_INFORMATION</a></strong></p>
<p><strong><a href="file_attribute_tag_information" title="typedef struct _FILE_ATTRIBUTE_TAG_INFORMATION&#10;{&#10;    ULONG FileAttributes;&#10;    ULONG ReparseTag;&#10;} FILE_ATTRIBUTE_TAG_INFORMATION, *PFILE_ATTRIBUTE_TAG_INFORMATION;">FILE_ATTRIBUTE_TAG_INFORMATION</a></strong></p>
<p><strong><a href="file_basic_information" title="typedef struct _FILE_BASIC_INFORMATION&#10;{&#10;    LARGE_INTEGER CreationTime;         // Specifies the time that the file was created.&#10;    LARGE_INTEGER LastAccessTime;       // Specifies the time that the file was last accessed.&#10;    LARGE_INTEGER LastWriteTime;        // Specifies the time that the file was last written to.&#10;    LARGE_INTEGER ChangeTime;           // Specifies the last time the file was changed.&#10;    ULONG FileAttributes;               // Specifies one or more FILE_ATTRIBUTE_XXX flags.&#10;} FILE_BASIC_INFORMATION, *PFILE_BASIC_INFORMATION;">FILE_BASIC_INFORMATION</a></strong></p>
<p><strong><a href="file_ea_information" title="typedef struct _FILE_EA_INFORMATION&#10;{&#10;    ULONG EaSize;&#10;} FILE_EA_INFORMATION, *PFILE_EA_INFORMATION;">FILE_EA_INFORMATION</a></strong></p>
<p><strong><a href="file_internal_information" title="typedef struct _FILE_INTERNAL_INFORMATION&#10;{&#10;    union&#10;    {&#10;        ULARGE_INTEGER IndexNumber;&#10;        struct&#10;        {&#10;            ULONGLONG MftRecordIndex : 48; // rev&#10;            ULONGLONG SequenceNumber : 16; // rev&#10;        };&#10;    };&#10;} FILE_INTERNAL_INFORMATION, *PFILE_INTERNAL_INFORMATION;">FILE_INTERNAL_INFORMATION</a></strong></p>
<p><strong><a href="file_io_priority_hint_information" title="typedef struct DECLSPEC_ALIGN(8) _FILE_IO_PRIORITY_HINT_INFORMATION&#10;{&#10;    IO_PRIORITY_HINT PriorityHint;&#10;} FILE_IO_PRIORITY_HINT_INFORMATION, *PFILE_IO_PRIORITY_HINT_INFORMATION;">FILE_IO_PRIORITY_HINT_INFORMATION</a></strong></p>
<p><strong><a href="file_is_remote_device_information" title="typedef struct _FILE_IS_REMOTE_DEVICE_INFORMATION&#10;{&#10;    BOOLEAN IsRemote; // A value that indicates whether the file system that contains the file is a remote file system.&#10;} FILE_IS_REMOTE_DEVICE_INFORMATION, *PFILE_IS_REMOTE_DEVICE_INFORMATION;">FILE_IS_REMOTE_DEVICE_INFORMATION</a></strong></p>
<p><strong><a href="file_mode_information" title="typedef struct _FILE_MODE_INFORMATION&#10;{&#10;    ULONG Mode;&#10;} FILE_MODE_INFORMATION, *PFILE_MODE_INFORMATION;">FILE_MODE_INFORMATION</a></strong></p>
<p><strong><a href="file_name_information" title="typedef struct _FILE_NAME_INFORMATION&#10;{&#10;    ULONG FileNameLength;&#10;    _Field_size_bytes_(FileNameLength) WCHAR FileName[1];&#10;} FILE_NAME_INFORMATION, *PFILE_NAME_INFORMATION;">FILE_NAME_INFORMATION</a></strong></p>
<p><strong><a href="file_network_open_information" title="typedef struct _FILE_NETWORK_OPEN_INFORMATION&#10;{&#10;    LARGE_INTEGER CreationTime;&#10;    LARGE_INTEGER LastAccessTime;&#10;    LARGE_INTEGER LastWriteTime;&#10;    LARGE_INTEGER ChangeTime;&#10;    LARGE_INTEGER AllocationSize;&#10;    LARGE_INTEGER EndOfFile;&#10;    ULONG FileAttributes;&#10;} FILE_NETWORK_OPEN_INFORMATION, *PFILE_NETWORK_OPEN_INFORMATION;">FILE_NETWORK_OPEN_INFORMATION</a></strong></p>
<p><strong><a href="file_position_information" title="typedef struct _FILE_POSITION_INFORMATION&#10;{&#10;    LARGE_INTEGER CurrentByteOffset;&#10;} FILE_POSITION_INFORMATION, *PFILE_POSITION_INFORMATION;">FILE_POSITION_INFORMATION</a></strong></p>
<p><strong><a href="file_standard_information" title="typedef struct _FILE_STANDARD_INFORMATION&#10;{&#10;    LARGE_INTEGER AllocationSize;       // The file allocation size in bytes. Usually, this value is a multiple of the sector or cluster size of the underlying physical device.&#10;    LARGE_INTEGER EndOfFile;            // The end of file location as a byte offset.&#10;    ULONG NumberOfLinks;                // The number of hard links to the file.&#10;    BOOLEAN DeletePending;              // The delete pending status. TRUE indicates that a file deletion has been requested.&#10;    BOOLEAN Directory;                  // The file directory status. TRUE indicates the file object represents a directory.&#10;} FILE_STANDARD_INFORMATION, *PFILE_STANDARD_INFORMATION;">FILE_STANDARD_INFORMATION</a></strong></p>
<p><strong><a href="ntcreatefile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_opt_ PLARGE_INTEGER AllocationSize,&#10;    _In_ ULONG FileAttributes,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG CreateDisposition,&#10;    _In_ ULONG CreateOptions,&#10;    _In_reads_bytes_opt_(EaLength) PVOID EaBuffer,&#10;    _In_ ULONG EaLength&#10;    );">ZwCreateFile</a></strong></p>
<p><strong><a href="ntsetinformationfile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtSetInformationFile(&#10;    _In_ HANDLE FileHandle,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_reads_bytes_(Length) PVOID FileInformation,&#10;    _In_ ULONG Length,&#10;    _In_ FILE_INFORMATION_CLASS FileInformationClass&#10;    );">ZwSetInformationFile</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-zwqueryinformationfile">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/nf-wdm-zwqueryinformationfile.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>NTinternals.net (undocumented.ntinternals.net)</h1>
</div>
<div class="ntdoc-description">
<p>This function is documented in Windows Driver Kit <a rel="noopener" target="_blank" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/ntifs/nf-ntifs-ntqueryinformationfile">here</a> and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/wdm/nf-wdm-zwqueryinformationfile">here</a>.</p>
<hr />
<p><em>(Also available in Microsoft 2000 DDK)</em></p>
<h3>FileHandle</h3>
<p><code>HANDLE</code> to File Object.</p>
<h3>IoStatusBlock</h3>
<p>Completion status of call.</p>
<h3>FileInformation</h3>
<p>Caller's allocated buffer for result data.</p>
<h3>Length</h3>
<p>Length of <code>FileInformation</code> buffer, in bytes.</p>
<h3>FileInformationClass</h3>
<p>Enumerated information class. See <code><a href="file_information_class" title="typedef enum _FILE_INFORMATION_CLASS&#10;{&#10;    FileDirectoryInformation = 1,                   // q: FILE_DIRECTORY_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileFullDirectoryInformation,                   // q: FILE_FULL_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBothDirectoryInformation,                   // q: FILE_BOTH_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBasicInformation,                           // qs: FILE_BASIC_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileStandardInformation,                        // q: FILE_STANDARD_INFORMATION, FILE_STANDARD_INFORMATION_EX&#10;    FileInternalInformation,                        // q: FILE_INTERNAL_INFORMATION&#10;    FileEaInformation,                              // q: FILE_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileAccessInformation,                          // q: FILE_ACCESS_INFORMATION&#10;    FileNameInformation,                            // q: FILE_NAME_INFORMATION&#10;    FileRenameInformation,                          // s: FILE_RENAME_INFORMATION (requires DELETE) // 10&#10;    FileLinkInformation,                            // s: FILE_LINK_INFORMATION&#10;    FileNamesInformation,                           // q: FILE_NAMES_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileDispositionInformation,                     // s: FILE_DISPOSITION_INFORMATION (requires DELETE)&#10;    FilePositionInformation,                        // qs: FILE_POSITION_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileFullEaInformation,                          // q: FILE_FULL_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileModeInformation,                            // qs: FILE_MODE_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileAlignmentInformation,                       // q: FILE_ALIGNMENT_INFORMATION&#10;    FileAllInformation,                             // q: FILE_ALL_INFORMATION&#10;...">FILE_INFORMATION_CLASS</a></code> for detailed information about usage.</p>
<h1>Documented by</h1>
<ul>
<li>
Tomasz Nowak
</li>
<li>
Bo Branten
</li>
</ul>
<h1>See also</h1>
<ul>
<li>
<code><a href="file_information_class" title="typedef enum _FILE_INFORMATION_CLASS&#10;{&#10;    FileDirectoryInformation = 1,                   // q: FILE_DIRECTORY_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileFullDirectoryInformation,                   // q: FILE_FULL_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBothDirectoryInformation,                   // q: FILE_BOTH_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBasicInformation,                           // qs: FILE_BASIC_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileStandardInformation,                        // q: FILE_STANDARD_INFORMATION, FILE_STANDARD_INFORMATION_EX&#10;    FileInternalInformation,                        // q: FILE_INTERNAL_INFORMATION&#10;    FileEaInformation,                              // q: FILE_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileAccessInformation,                          // q: FILE_ACCESS_INFORMATION&#10;    FileNameInformation,                            // q: FILE_NAME_INFORMATION&#10;    FileRenameInformation,                          // s: FILE_RENAME_INFORMATION (requires DELETE) // 10&#10;    FileLinkInformation,                            // s: FILE_LINK_INFORMATION&#10;    FileNamesInformation,                           // q: FILE_NAMES_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileDispositionInformation,                     // s: FILE_DISPOSITION_INFORMATION (requires DELETE)&#10;    FilePositionInformation,                        // qs: FILE_POSITION_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileFullEaInformation,                          // q: FILE_FULL_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileModeInformation,                            // qs: FILE_MODE_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileAlignmentInformation,                       // q: FILE_ALIGNMENT_INFORMATION&#10;    FileAllInformation,                             // q: FILE_ALL_INFORMATION&#10;...">FILE_INFORMATION_CLASS</a></code>
</li>
<li>
<code><a href="ntcreatefile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_opt_ PLARGE_INTEGER AllocationSize,&#10;    _In_ ULONG FileAttributes,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG CreateDisposition,&#10;    _In_ ULONG CreateOptions,&#10;    _In_reads_bytes_opt_(EaLength) PVOID EaBuffer,&#10;    _In_ ULONG EaLength&#10;    );">NtCreateFile</a></code>
</li>
<li>
<code><a href="ntopenfile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtOpenFile(&#10;    _Out_ PHANDLE FileHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_ ULONG ShareAccess,&#10;    _In_ ULONG OpenOptions&#10;    );">NtOpenFile</a></code>
</li>
<li>
<code><a href="ntqueryattributesfile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtQueryAttributesFile(&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _Out_ PFILE_BASIC_INFORMATION FileInformation&#10;    );">NtQueryAttributesFile</a></code>
</li>
<li>
<code><a href="ntquerydirectoryfile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtQueryDirectoryFile(&#10;    _In_ HANDLE FileHandle,&#10;    _In_opt_ HANDLE Event,&#10;    _In_opt_ PIO_APC_ROUTINE ApcRoutine,&#10;    _In_opt_ PVOID ApcContext,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _Out_writes_bytes_(Length) PVOID FileInformation,&#10;    _In_ ULONG Length,&#10;    _In_ FILE_INFORMATION_CLASS FileInformationClass,&#10;    _In_ BOOLEAN ReturnSingleEntry,&#10;    _In_opt_ PCUNICODE_STRING FileName,&#10;    _In_ BOOLEAN RestartScan&#10;    );">NtQueryDirectoryFile</a></code>
</li>
<li>
<code><a href="ntsetinformationfile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtSetInformationFile(&#10;    _In_ HANDLE FileHandle,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_reads_bytes_(Length) PVOID FileInformation,&#10;    _In_ ULONG Length,&#10;    _In_ FILE_INFORMATION_CLASS FileInformationClass&#10;    );">NtSetInformationFile</a></code>
</li>
</ul>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/undocumented.ntinternals.net/ntqueryinformationfile.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
