<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="AuxKlibGetSystemFirmwareTable - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>AuxKlibGetSystemFirmwareTable - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            AuxKlibGetSystemFirmwareTable - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// aux_klib.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> AuxKlibGetSystemFirmwareTable(
  [in]            <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  FirmwareTableProviderSignature,
  [in]            <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  FirmwareTableID,
  [out, optional] PVOID  FirmwareTableBuffer,
  [in]            <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  BufferLength,
  [out, optional] PULONG ReturnLength
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/aux_klib/nf-aux_klib-auxklibgetsystemfirmwaretable">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/auxklibgetsystemfirmwaretable.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-aux_klib-auxklibgetsystemfirmwaretable)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="auxklibgetsystemfirmwaretable-function">AuxKlibGetSystemFirmwareTable function</h1>

<h2 id="description">Description</h2>

<p>The <strong>AuxKlibGetSystemFirmwareTable</strong> routine retrieves the specified firmware table from the firmware table provider.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="firmwaretableprovidersignature-in"><code>FirmwareTableProviderSignature</code> [in]</h3>

<p>The identifier of the firmware table provider to which the query is to be directed. This parameter can be one of the following values.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td>'ACPI'</td>
  <td>The ACPI firmware table provider.</td>
</tr>
<tr>
  <td>'FIRM'</td>
  <td>The raw firmware table provider.</td>
</tr>
<tr>
  <td>'RSMB'</td>
  <td>The raw SMBIOS firmware table provider.</td>
</tr>
</tbody>
</table>

<h3 id="firmwaretableid-in"><code>FirmwareTableID</code> [in]</h3>

<p>The identifier of the firmware table. The characters in the identifier are in little-endian order.</p>

<p>For example, FACP is the name of a table provided by ACPI. The FACP table is identified by the 4-byte value 'PCAF' (0x50434146) in the <strong>Signature</strong> field of the <strong>DESCRIPTION_HEADER</strong> structure at the start of the table. The following code example shows how to specify FACP in an <strong>AuxKlibGetSystemFirmwareTable</strong> call:</p>

<p><code>status = AuxKlibGetSystemFirmwareTable('ACPI', 'PCAF', pBuffer, BUFSIZE, &amp;dataSize);</code></p>

<p>In this example, <code>pBuffer</code> points to the caller-allocated buffer, <code>BUFSIZE</code> is the size in bytes of this buffer, and <code>dataSize</code> is a variable to which the routine writes the number of bytes written to the buffer. For more information about the <strong>DESCRIPTION_HEADER</strong> structure, see the Advanced Configuration and Power Interface Specification at the <a rel="noopener" target="_blank" href="https://go.microsoft.com/fwlink/p/?linkid=57185">Advanced Configuration and Power Interface</a> website.</p>

<h3 id="firmwaretablebuffer-out-optional"><code>FirmwareTableBuffer</code> [out, optional]</h3>

<p>A pointer to a caller-allocated buffer that receives the list of firmware tables. If this parameter is NULL, the value written to <em>*ReturnLength</em> is the required buffer size. For more information about the contents of this buffer, see the Remarks section.</p>

<h3 id="bufferlength-in"><code>BufferLength</code> [in]</h3>

<p>The size, in bytes, of the buffer pointed to by <em>FirmwareTableBuffer</em>.</p>

<h3 id="returnlength-out-optional"><code>ReturnLength</code> [out, optional]</h3>

<p>A pointer to a location to which the routine writes the number of bytes of data written to the buffer pointed to by <em>FirmwareTableBuffer</em>.</p>

<h2 id="return-value">Return value</h2>

<p><strong>AuxKlibGetSystemFirmwareTable</strong> returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if the call is successful. Possible return values include the following error codes.</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>STATUS_INVALID_PARAMETER</strong></td>
  <td>An invalid parameter was supplied to the routine.</td>
</tr>
<tr>
  <td><strong>STATUS_BUFFER_TOO_SMALL</strong></td>
  <td>The caller-allocated buffer is too small, but the required buffer size has been written to the <em>ReturnLength</em> output parameter.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p>The raw SMBIOS table provider ('RSMB') retrieves the contents of the raw SMBIOS firmware table. The data written to the <em>FirmwareTableBuffer</em> buffer starts with the following structure:</p>

<p><!-- CODE_MARKER --></p>

<pre><code>struct RawSMBIOSData
{
  <a href="byte" title="typedef unsigned char BYTE;">BYTE</a>  Used20CallingMethod;
  <a href="byte" title="typedef unsigned char BYTE;">BYTE</a>  SMBIOSMajorVersion;
  <a href="byte" title="typedef unsigned char BYTE;">BYTE</a>  SMBIOSMinorVersion;
  <a href="byte" title="typedef unsigned char BYTE;">BYTE</a>  DmiRevision;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>  Length;
  <a href="byte" title="typedef unsigned char BYTE;">BYTE</a>  SMBIOSTableData[];
};
</code></pre>

<p>The raw firmware table provider ('FIRM') retrieves the contents of the specified physical address range. The value written to <em>*ReturnLength</em> is the size of the address range.</p>

<p>The ACPI table provider ('ACPI') retrieves the contents of the specified ACPI table. Because OEMs can include ACPI firmware tables that are not listed in the ACPI specification, you should first call <a href="auxklibenumeratesystemfirmwaretables" title="NTSTATUS AuxKlibEnumerateSystemFirmwareTables(&#10;  [in]            ULONG  FirmwareTableProviderSignature,&#10;  [out, optional] PVOID  FirmwareTableBuffer,&#10;  [in]            ULONG  BufferLength,&#10;  [out, optional] PULONG ReturnLength&#10;);">AuxKlibEnumerateSystemFirmwareTables</a> to enumerate all ACPI tables that are currently available from the system firmware.</p>

<p>For ACPI, if the system firmware contains multiple tables with the same name, <strong><a href="auxklibenumeratesystemfirmwaretables" title="NTSTATUS AuxKlibEnumerateSystemFirmwareTables(&#10;  [in]            ULONG  FirmwareTableProviderSignature,&#10;  [out, optional] PVOID  FirmwareTableBuffer,&#10;  [in]            ULONG  BufferLength,&#10;  [out, optional] PULONG ReturnLength&#10;);">AuxKlibEnumerateSystemFirmwareTables</a></strong> enumerates them all. However, <strong>AuxKlibGetSystemFirmwareTable</strong> retrieves only the first table in the list that has this name.</p>

<p><strong>AuxKlibGetSystemFirmwareTable</strong> is the kernel-mode equivalent of the Win32 <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemfirmwaretable">GetSystemFirmwareTable</a> function.</p>

<p>Drivers must call <a href="auxklibinitialize" title="NTSTATUS AuxKlibInitialize();">AuxKlibInitialize</a> before calling <strong>AuxKlibGetSystemFirmwareTable</strong>.</p>

<p><strong>AuxKlibGetSystemFirmwareTable</strong> is defined in the Aux_klib.h header file that is included in the WDK for Windows 8 and later versions of Windows. To use this routine, drivers should link to the version of Aux_klib.lib that is included in the WDK for Windows 8 and later versions of Windows. The implementation of <strong>AuxKlibGetSystemFirmwareTable</strong> in these versions of the WDK can be used in versions of Windows starting with Windows Vista.</p>

<h2 id="see-also">See also</h2>

<p><a href="auxklibenumeratesystemfirmwaretables" title="NTSTATUS AuxKlibEnumerateSystemFirmwareTables(&#10;  [in]            ULONG  FirmwareTableProviderSignature,&#10;  [out, optional] PVOID  FirmwareTableBuffer,&#10;  [in]            ULONG  BufferLength,&#10;  [out, optional] PULONG ReturnLength&#10;);">AuxKlibEnumerateSystemFirmwareTables</a></p>

<p><a href="auxklibinitialize" title="NTSTATUS AuxKlibInitialize();">AuxKlibInitialize</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemfirmwaretable">GetSystemFirmwareTable</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/aux_klib/nf-aux_klib-auxklibgetsystemfirmwaretable">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/aux_klib/nf-aux_klib-auxklibgetsystemfirmwaretable.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
