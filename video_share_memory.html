<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="VIDEO_SHARE_MEMORY - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>VIDEO_SHARE_MEMORY - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            VIDEO_SHARE_MEMORY - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddvdeo.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _VIDEO_SHARE_MEMORY {
  HANDLE ProcessHandle;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  ViewOffset;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  ViewSize;
  PVOID  RequestedVirtualAddress;
} VIDEO_SHARE_MEMORY, *PVIDEO_SHARE_MEMORY;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddvdeo/ns-ntddvdeo-_video_share_memory">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/video_share_memory.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntddvdeo-_video_share_memory)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_video_share_memory-structure">_VIDEO_SHARE_MEMORY structure</h1>

<h2 id="description">Description</h2>

<p>The VIDEO_SHARE_MEMORY structure is used in a request to the video miniport driver for a block of user-mode memory to be shared with the specified process.</p>

<h2 id="members">Members</h2>

<h3 id="processhandle"><code>ProcessHandle</code></h3>

<p>Is a handle to the current process. This member is usually set to <strong><a href="ntcurrentprocess" title="#define NtCurrentProcess() ((HANDLE)(LONG_PTR)-1)">NtCurrentProcess</a></strong>, a macro defined in <em>Ntddk.h</em>.</p>

<h3 id="viewoffset"><code>ViewOffset</code></h3>

<p>Indicates the byte offset from the beginning of the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/">frame buffer</a>. This member is usually set to 0.</p>

<h3 id="viewsize"><code>ViewSize</code></h3>

<p>Indicates the size, in bytes, of the frame buffer.</p>

<h3 id="requestedvirtualaddress"><code>RequestedVirtualAddress</code></h3>

<p>Indicates the location of the requested frame buffer in the process's memory. This member is normally set to <strong>NULL</strong>, which means the display driver writer does not care about the precise location of the requested memory. If this member is set to a non-<strong>NULL</strong> value, the display driver writer intends that the frame buffer be located at that address. In this case, the display driver writer must be certain that the location specified is not already in use for another purpose.</p>

<h2 id="remarks">Remarks</h2>

<p>VIDEO_SHARE_MEMORY is provided so that applications such as Direct Draw can have a view of video memory. Although the display driver is unable to directly provide such access to video memory, it can call into the video miniport driver for this purpose. The display driver does this by sending an <a href="ioctl_video_share_video_memory" title="// CTL_CODE(0x0023, 0x11d, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_VIDEO_SHARE_VIDEO_MEMORY 0x00230474">IOCTL_VIDEO_SHARE_VIDEO_MEMORY</a> request to the miniport driver. When the miniport driver fulfills this request, it uses the information in the VIDEO_SHARE_MEMORY structure, and fills in a <a href="video_share_memory_information" title="typedef struct _VIDEO_SHARE_MEMORY_INFORMATION {&#10;  ULONG SharedViewOffset;&#10;  ULONG SharedViewSize;&#10;  PVOID VirtualAddress;&#10;} VIDEO_SHARE_MEMORY_INFORMATION, *PVIDEO_SHARE_MEMORY_INFORMATION;">VIDEO_SHARE_MEMORY_INFORMATION</a> structure with the actual location of the requested memory, if no location was specified. When the application no longer needs the shared memory, the display driver can release this memory by making an <a href="ioctl_video_unshare_video_memory" title="// CTL_CODE(0x0023, 0x11e, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_VIDEO_UNSHARE_VIDEO_MEMORY 0x00230478">IOCTL_VIDEO_UNSHARE_VIDEO_MEMORY</a> request, which also uses a VIDEO_SHARE_MEMORY structure as an input buffer.</p>

<p>For structures used in mapping into kernel-mode video memory, see <a href="video_memory" title="typedef struct _VIDEO_MEMORY {&#10;  PVOID RequestedVirtualAddress;&#10;} VIDEO_MEMORY, *PVIDEO_MEMORY;">VIDEO_MEMORY</a> and <a href="video_memory_information" title="typedef struct _VIDEO_MEMORY_INFORMATION {&#10;  PVOID VideoRamBase;&#10;  ULONG VideoRamLength;&#10;  PVOID FrameBufferBase;&#10;  ULONG FrameBufferLength;&#10;} VIDEO_MEMORY_INFORMATION, *PVIDEO_MEMORY_INFORMATION;">VIDEO_MEMORY_INFORMATION</a>.</p>

<h2 id="see-also">See also</h2>

<p><a href="ioctl_video_share_video_memory" title="// CTL_CODE(0x0023, 0x11d, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_VIDEO_SHARE_VIDEO_MEMORY 0x00230474">IOCTL_VIDEO_SHARE_VIDEO_MEMORY</a></p>

<p><a href="ioctl_video_unshare_video_memory" title="// CTL_CODE(0x0023, 0x11e, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_VIDEO_UNSHARE_VIDEO_MEMORY 0x00230478">IOCTL_VIDEO_UNSHARE_VIDEO_MEMORY</a></p>

<p><a href="video_share_memory_information" title="typedef struct _VIDEO_SHARE_MEMORY_INFORMATION {&#10;  ULONG SharedViewOffset;&#10;  ULONG SharedViewSize;&#10;  PVOID VirtualAddress;&#10;} VIDEO_SHARE_MEMORY_INFORMATION, *PVIDEO_SHARE_MEMORY_INFORMATION;">VIDEO_SHARE_MEMORY_INFORMATION</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddvdeo/ns-ntddvdeo-_video_share_memory">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddvdeo/ns-ntddvdeo-_video_share_memory.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
