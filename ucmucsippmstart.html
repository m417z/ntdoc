<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="UcmUcsiPpmStart - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>UcmUcsiPpmStart - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github.ntdoc.min.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github-dark-dimmed.ntdoc.min.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            UcmUcsiPpmStart - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ucmucsippm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> UcmUcsiPpmStart(
  [in] UCMUCSIPPM PpmObject
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ucmucsippm/nf-ucmucsippm-ucmucsippmstart">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ucmucsippmstart.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ucmucsippm-ucmucsippmstart)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>UcmUcsiPpmStart function</h1>
<h2>Description</h2>
<p>Instructs the UcmUcsiCx class extension to start sending requests to the client driver.</p>
<h2>Parameters</h2>
<h3><code>PpmObject</code> [in]</h3>
<p>A handle to a Platform Policy Manager (PPM) object that the client driver received in the previous call to <strong><a href="ucmucsippmcreate" title="NTSTATUS UcmUcsiPpmCreate(&#10;  [in]  WDFDEVICE              WdfDevice,&#10;  [in]  PUCMUCSI_PPM_CONFIG    Config,&#10;  [in]  PWDF_OBJECT_ATTRIBUTES Attributes,&#10;  [out] UCMUCSIPPM             *PPMObject&#10;);">UcmUcsiPpmCreate</a></strong>.</p>
<h2>Return value</h2>
<p>Returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if the operation succeeds. Otherwise, this method can return an appropriate <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/ntstatus-values">NTSTATUS</a> value.</p>
<h2>Remarks</h2>
<p><strong>UcmUcsiPpmStart</strong> indicates that the client driver is now ready to receive request from the class extension. Upon this call, the class extension starts OS Policy Manager (OPM) and Command Handler state machines.</p>
<p>The client driver must call <strong>UcmUcsiPpmStart</strong> after it had called <a href="ucmucsippmstop" title="VOID UcmUcsiPpmStop(&#10;  [in] UCMUCSIPPM PpmObject&#10;);">UcmUcsiPpmStop</a> for error recovery.</p>
<p>This DDI starts the operations that the class extension needs to perform to initialize the OPM and Command Handler state machines. The client driver must call <strong>UcmUcsiPpmStart</strong> to notify UcmUcsiCx that the driver is ready to receive the IOCTL requests. We recommend that you make this call either from the <strong><a href="evt_wdf_device_prepare_hardware" title="EVT_WDF_DEVICE_PREPARE_HARDWARE EvtWdfDevicePrepareHardware;&#10;&#10;NTSTATUS EvtWdfDevicePrepareHardware(&#10;  [in] WDFDEVICE Device,&#10;  [in] WDFCMRESLIST ResourcesRaw,&#10;  [in] WDFCMRESLIST ResourcesTranslated&#10;)&#10;{...}">EVT_WDF_DEVICE_PREPARE_HARDWARE</a></strong> callback function, or after the system calls this callback.</p>
<p>Attempting to start the PPM after it has already started leads to an error condition.</p>
<p>After the client calls <strong>UcmUcsiPpmStart</strong>, the class extension sends a number of commands to the PPM firmware in order to get PPM and connector capabilities and their statuses. Due to a high number interactions with the firmware, we strongly recommend UcmUcsiCx client implementors call this DDI once during startup and not on resume from a low power state, such as D0Entry callback. This is especially true when the client implements S0 idling.</p>
<h2>See also</h2>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ucmucsippm/nf-ucmucsippm-ucmucsippmstart">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ucmucsippm/nf-ucmucsippm-ucmucsippmstart.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script src="modules/highlight.js/highlight.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
