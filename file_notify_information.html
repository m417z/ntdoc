<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="FILE_NOTIFY_INFORMATION - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>FILE_NOTIFY_INFORMATION - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github.ntdoc.min.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github-dark-dimmed.ntdoc.min.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            FILE_NOTIFY_INFORMATION - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header language-cpp">#ifndef _NTIOAPI_H
#if !defined(NTDDI_WIN10_RS5) || (NTDDI_VERSION &lt; NTDDI_WIN10_RS5)

</span><span class="ntdoc-code-intro language-cpp"></span><span class="ntdoc-code-body language-cpp">_Struct_size_bytes_(NextEntryOffset)
typedef struct _FILE_NOTIFY_INFORMATION
{
   <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> NextEntryOffset;
   <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> Action;
   <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> FileNameLength;
   WCHAR FileName[1];
} FILE_NOTIFY_INFORMATION, *PFILE_NOTIFY_INFORMATION;
</span><span class="ntdoc-code-footer language-cpp">
#endif
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/cc4793e6bec630c14918c05cea0cf33d71b274e3/phnt/include/ntioapi.h#L2585">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header language-cpp">// ntifs.h

</span><span class="ntdoc-code-intro language-cpp"></span><span class="ntdoc-code-body language-cpp">typedef struct _FILE_NOTIFY_INFORMATION {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> NextEntryOffset;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> Action;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> FileNameLength;
  WCHAR FileName[1];
} FILE_NOTIFY_INFORMATION, *PFILE_NOTIFY_INFORMATION;</span><span class="ntdoc-code-footer language-cpp"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/ns-ntifs-file_notify_information">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/file_notify_information.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntifs-file_notify_information)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2>Description</h2>
<p><strong>FILE_NOTIFY_INFORMATION</strong> describes the changes to a directory. It's returned in response to an <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ifs/irp-mj-directory-control"><strong>IRP_MJ_DIRECTORY_CONTROL</strong></a> request with an <strong>IRP_MN_NOTIFY_CHANGE_DIRECTORY</strong> minor function code when <strong><a href="directory_notify_information_class" title="typedef enum _DIRECTORY_NOTIFY_INFORMATION_CLASS&#10;{&#10;    DirectoryNotifyInformation = 1, // FILE_NOTIFY_INFORMATION&#10;    DirectoryNotifyExtendedInformation, // FILE_NOTIFY_EXTENDED_INFORMATION&#10;    DirectoryNotifyFullInformation, // FILE_NOTIFY_FULL_INFORMATION // since 22H2&#10;    DirectoryNotifyMaximumInformation&#10;} DIRECTORY_NOTIFY_INFORMATION_CLASS, *PDIRECTORY_NOTIFY_INFORMATION_CLASS;">DIRECTORY_NOTIFY_INFORMATION_CLASS</a></strong> is DirectoryNotifyInformation.</p>
<h2>Members</h2>
<h3><code>NextEntryOffset</code></h3>
<p>The number of bytes that must be skipped to get to the next record. A value of zero indicates that this is the last record.</p>
<h3><code>Action</code></h3>
<p>The type of change that has occurred. This member can be one of the following values.</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="file_action_added" title="#define FILE_ACTION_ADDED 0x00000001 // winnt">FILE_ACTION_ADDED</a> (0x00000001)</td>
<td>The file was added to the directory.</td>
</tr>
<tr>
<td><a href="file_action_removed" title="#define FILE_ACTION_REMOVED 0x00000002 // winnt">FILE_ACTION_REMOVED</a> (0x00000002)</td>
<td>The file was removed from the directory.</td>
</tr>
<tr>
<td><a href="file_action_modified" title="#define FILE_ACTION_MODIFIED 0x00000003 // winnt">FILE_ACTION_MODIFIED</a> (0x00000003)</td>
<td>The file was modified. This can be a change in the time stamp or attributes.</td>
</tr>
<tr>
<td><a href="file_action_renamed_old_name" title="#define FILE_ACTION_RENAMED_OLD_NAME 0x00000004 // winnt">FILE_ACTION_RENAMED_OLD_NAME</a> (0x00000004)</td>
<td>The file was renamed and this is the old name.</td>
</tr>
<tr>
<td><a href="file_action_renamed_new_name" title="#define FILE_ACTION_RENAMED_NEW_NAME 0x00000005 // winnt">FILE_ACTION_RENAMED_NEW_NAME</a> (0x00000005)</td>
<td>The file was renamed and this is the new name.</td>
</tr>
<tr>
<td><a href="file_action_added_stream" title="#define FILE_ACTION_ADDED_STREAM 0x00000006">FILE_ACTION_ADDED_STREAM</a> (0x00000006)</td>
<td>A named stream was added to the file.</td>
</tr>
<tr>
<td><a href="file_action_removed_stream" title="#define FILE_ACTION_REMOVED_STREAM 0x00000007">FILE_ACTION_REMOVED_STREAM</a> (0x00000007)</td>
<td>A named stream was removed from the file.</td>
</tr>
<tr>
<td><a href="file_action_modified_stream" title="#define FILE_ACTION_MODIFIED_STREAM 0x00000008">FILE_ACTION_MODIFIED_STREAM</a> (0x00000008)</td>
<td>A named stream was modified. The modification can be a change to the data or attributes of the named stream.</td>
</tr>
<tr>
<td><a href="file_action_removed_by_delete" title="#define FILE_ACTION_REMOVED_BY_DELETE 0x00000009">FILE_ACTION_REMOVED_BY_DELETE</a> (0x00000009)</td>
<td>An object ID was removed because the file the object ID referred to was deleted. This notification is only sent when the directory being monitored is the special directory &quot;$Extend$ObjId:$O:$INDEX_ALLOCATION&quot;.</td>
</tr>
<tr>
<td><a href="file_action_id_not_tunnelled" title="#define FILE_ACTION_ID_NOT_TUNNELLED 0x0000000A">FILE_ACTION_ID_NOT_TUNNELLED</a> (0x0000000A)</td>
<td>An attempt to tunnel object ID information to a file being created or renamed failed because the object ID is in use by another file on the same volume. This notification is only sent when the directory being monitored is the special directory &quot;$Extend$ObjId:$O:$INDEX_ALLOCATION&quot;.</td>
</tr>
<tr>
<td><a href="file_action_tunnelled_id_collision" title="#define FILE_ACTION_TUNNELLED_ID_COLLISION 0x0000000B">FILE_ACTION_TUNNELLED_ID_COLLISION</a> (0x0000000B)</td>
<td>An attempt to tunnel object ID information to a file being renamed failed because the file already has an object ID. This notification is only sent when the directory being monitored is the special directory &quot;$Extend$ObjId:$O:$INDEX_ALLOCATION&quot;.</td>
</tr>
</tbody>
</table>
<h3><code>FileNameLength</code></h3>
<p>The size of the file name portion of the record, in bytes. This value does not include the terminating null character.</p>
<h3><code>FileName</code></h3>
<p>A variable-length field that contains the file name relative to the directory handle. The file name is in the Unicode character format and is not null-terminated.</p>
<p>If there is both a short and long name for the file, only one of these names will be returned, but it is unspecified which one.</p>
<h2>See also</h2>
<p><strong><a href="directory_notify_information_class" title="typedef enum _DIRECTORY_NOTIFY_INFORMATION_CLASS&#10;{&#10;    DirectoryNotifyInformation = 1, // FILE_NOTIFY_INFORMATION&#10;    DirectoryNotifyExtendedInformation, // FILE_NOTIFY_EXTENDED_INFORMATION&#10;    DirectoryNotifyFullInformation, // FILE_NOTIFY_FULL_INFORMATION // since 22H2&#10;    DirectoryNotifyMaximumInformation&#10;} DIRECTORY_NOTIFY_INFORMATION_CLASS, *PDIRECTORY_NOTIFY_INFORMATION_CLASS;">DIRECTORY_NOTIFY_INFORMATION_CLASS</a></strong></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ifs/irp-mj-directory-control"><strong>IRP_MJ_DIRECTORY_CONTROL</strong></a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/mt812581(v=vs.85)"><strong>ZwNotifyChangeDirectoryFileEx</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/ns-ntifs-file_notify_information">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntifs/ns-ntifs-file_notify_information.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script src="modules/highlight.js/highlight.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
