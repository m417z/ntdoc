<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="D3DDDI_SYNCHRONIZATIONOBJECTINFO2 - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>D3DDDI_SYNCHRONIZATIONOBJECTINFO2 - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            D3DDDI_SYNCHRONIZATIONOBJECTINFO2 - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3dukmdt.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _D3DDDI_SYNCHRONIZATIONOBJECTINFO2 {
  <a href="d3dddi_synchronizationobject_type" title="typedef enum _D3DDDI_SYNCHRONIZATIONOBJECT_TYPE {&#10;  D3DDDI_SYNCHRONIZATION_MUTEX,&#10;  D3DDDI_SEMAPHORE,&#10;  D3DDDI_FENCE,&#10;  D3DDDI_CPU_NOTIFICATION,&#10;  D3DDDI_MONITORED_FENCE,&#10;  D3DDDI_PERIODIC_MONITORED_FENCE,&#10;  D3DDDI_NATIVE_FENCE,&#10;  D3DDDI_SYNCHRONIZATION_TYPE_LIMIT&#10;} D3DDDI_SYNCHRONIZATIONOBJECT_TYPE;">D3DDDI_SYNCHRONIZATIONOBJECT_TYPE</a>  Type;
  <a href="d3dddi_synchronizationobject_flags" title="typedef struct _D3DDDI_SYNCHRONIZATIONOBJECT_FLAGS {&#10;  union {&#10;    struct {&#10;      UINT Shared : 1;&#10;      UINT NtSecuritySharing : 1;&#10;      UINT CrossAdapter : 1;&#10;      UINT TopOfPipeline : 1;&#10;      UINT NoSignal : 1;&#10;      UINT NoWait : 1;&#10;      UINT NoSignalMaxValueOnTdr : 1;&#10;      UINT NoGPUAccess : 1;&#10;      UINT SignalByKmd : 1;&#10;      UINT Unused : 1;&#10;      UINT UnwaitCpuWaitersOnlyOnDestroy : 1;&#10;#if ...&#10;      UINT Reserved : 20;&#10;#elif&#10;      UINT Reserved : 21;&#10;#elif&#10;      UINT Reserved : 22;&#10;...">D3DDDI_SYNCHRONIZATIONOBJECT_FLAGS</a> Flags;
  union {
    struct {
      BOOL InitialState;
    } SynchronizationMutex;
    struct {
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> MaxCount;
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> InitialCount;
    } Semaphore;
    struct {
      D3DKMT_ALIGN64 <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a> FenceValue;
    } Fence;
    struct {
      HANDLE Event;
    } CPUNotification;
    struct {
      D3DKMT_ALIGN64 <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a>                 InitialFenceValue;
      VOID                                  *FenceValueCPUVirtualAddress;
      D3DKMT_ALIGN64 D3DGPU_VIRTUAL_ADDRESS FenceValueGPUVirtualAddress;
      <a href="uint" title="typedef unsigned int UINT;">UINT</a>                                  EngineAffinity;
      <a href="uint" title="typedef unsigned int UINT;">UINT</a>                                  Padding;
    } MonitoredFence;
    struct {
      D3DKMT_HANDLE                         hAdapter;
      D3DDDI_VIDEO_PRESENT_TARGET_ID        VidPnTargetId;
      D3DKMT_ALIGN64 <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a>                 Time;
      VOID                                  *FenceValueCPUVirtualAddress;
      D3DKMT_ALIGN64 D3DGPU_VIRTUAL_ADDRESS FenceValueGPUVirtualAddress;
      <a href="uint" title="typedef unsigned int UINT;">UINT</a>                                  EngineAffinity;
      <a href="uint" title="typedef unsigned int UINT;">UINT</a>                                  Padding;
    } PeriodicMonitoredFence;
    struct {
      D3DKMT_ALIGN64 <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a> Reserved[8];
    } Reserved;
  };
  D3DKMT_HANDLE                      SharedHandle;
} D3DDDI_SYNCHRONIZATIONOBJECTINFO2;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dukmdt/ns-d3dukmdt-_d3dddi_synchronizationobjectinfo2">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/d3dddi_synchronizationobjectinfo2.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-d3dukmdt-_d3dddi_synchronizationobjectinfo2)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>D3DDDI_SYNCHRONIZATIONOBJECTINFO2 structure</h1>

<h2>Description</h2>

<p>The <strong>D3DDDI_SYNCHRONIZATIONOBJECTINFO2</strong> structure contains information about a second-generation synchronization object.</p>

<h2>Members</h2>

<h3><code>Type</code></h3>

<p>[in] A value of type <strong><a href="d3dddi_synchronizationobject_type" title="typedef enum _D3DDDI_SYNCHRONIZATIONOBJECT_TYPE {&#10;  D3DDDI_SYNCHRONIZATION_MUTEX,&#10;  D3DDDI_SEMAPHORE,&#10;  D3DDDI_FENCE,&#10;  D3DDDI_CPU_NOTIFICATION,&#10;  D3DDDI_MONITORED_FENCE,&#10;  D3DDDI_PERIODIC_MONITORED_FENCE,&#10;  D3DDDI_NATIVE_FENCE,&#10;  D3DDDI_SYNCHRONIZATION_TYPE_LIMIT&#10;} D3DDDI_SYNCHRONIZATIONOBJECT_TYPE;">D3DDDI_SYNCHRONIZATIONOBJECT_TYPE</a></strong> that indicates the type of synchronization object.</p>

<h3><code>Flags</code></h3>

<p>[in] A <strong><a href="d3dddi_synchronizationobject_flags" title="typedef struct _D3DDDI_SYNCHRONIZATIONOBJECT_FLAGS {&#10;  union {&#10;    struct {&#10;      UINT Shared : 1;&#10;      UINT NtSecuritySharing : 1;&#10;      UINT CrossAdapter : 1;&#10;      UINT TopOfPipeline : 1;&#10;      UINT NoSignal : 1;&#10;      UINT NoWait : 1;&#10;      UINT NoSignalMaxValueOnTdr : 1;&#10;      UINT NoGPUAccess : 1;&#10;      UINT SignalByKmd : 1;&#10;      UINT Unused : 1;&#10;      UINT UnwaitCpuWaitersOnlyOnDestroy : 1;&#10;#if ...&#10;      UINT Reserved : 20;&#10;#elif&#10;      UINT Reserved : 21;&#10;#elif&#10;      UINT Reserved : 22;&#10;...">D3DDDI_SYNCHRONIZATIONOBJECT_FLAGS</a></strong> structure that specifies, in bit-field flags, attributes of the synchronization object.</p>

<h3><code>SynchronizationMutex</code></h3>

<p>A structure that contains information about a synchronization mutex. If the <strong>Type</strong> member is equal to <strong>D3DDDI_SYNCHRONIZATION_MUTEX</strong>, the union in <strong>D3DDDI_SYNCHRONIZATIONOBJECTINFO2</strong> holds a <strong>SynchronizationMutex</strong> structure.</p>

<h3><code>SynchronizationMutex.InitialState</code></h3>

<p>A Boolean value that indicates whether the synchronization mutex is initially owned by an object. A value of TRUE indicates that the mutex is owned; FALSE indicates that the mutex is not owned.</p>

<h3><code>Semaphore</code></h3>

<p>A structure that contains information about a semaphore. If the <strong>Type</strong> member is equal to <strong>D3DDDI_SEMAPHORE</strong>, the union in <strong>D3DDDI_SYNCHRONIZATIONOBJECTINFO2</strong> holds a <strong>Semaphore</strong> structure.</p>

<h3><code>Semaphore.MaxCount</code></h3>

<p>The maximum number of events that an object can be waiting for.</p>

<h3><code>Semaphore.InitialCount</code></h3>

<p>The initial number of events that an object is waiting for.</p>

<h3><code>Fence</code></h3>

<p>A structure that contains information about a fence. If the <strong>Type</strong> member is equal to <strong>D3DDDI_FENCE</strong>, the union in <strong>D3DDDI_SYNCHRONIZATIONOBJECTINFO2</strong> holds a <strong>Fence</strong> structure.</p>

<h3><code>Fence.FenceValue</code></h3>

<p>A 64-bit value that specifies the initial fence value.</p>

<h3><code>CPUNotification</code></h3>

<p>A structure that contains information about a CPU notification. If the <strong>Type</strong> member is equal to <strong>D3DDDI_CPU_NOTIFICATION</strong>, the union in <strong>D3DDDI_SYNCHRONIZATIONOBJECTINFO2</strong> holds a <strong>CPUNotification</strong> structure.</p>

<h3><code>CPUNotification.Event</code></h3>

<p>The handle to the CPU notification event.</p>

<h3><code>MonitoredFence</code></h3>

<p>A structure that contains information about a monitored fence. If the <strong>Type</strong> member is equal to <strong>D3DDDI_MONITORED_FENCE</strong>, the union in <strong>D3DDDI_SYNCHRONIZATIONOBJECTINFO2</strong> holds a <strong>MonitoredFence</strong> structure.</p>

<p>Monitored fences can be shared only by using NT handles for security reasons, so the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dukmdt/ns-d3dukmdt-_d3dddi_synchronizationobject_flags"><strong>NtSecuritySharing</strong></a> flag must be set when using a monitored fence.</p>

<p>Supported starting with Windows 10.</p>

<h3><code>MonitoredFence.InitialFenceValue</code></h3>

<p>[in] A 64-bit value that specifies the initial fence value.</p>

<p>Supported starting with Windows 10.</p>

<h3><code>MonitoredFence.FenceValueCPUVirtualAddress</code></h3>

<p>[out] A read-only mapping of the fence value for the CPU. This is a user mode address readable from the process that created the monitored fence object. For 32 bit platforms that support 64 bit atomic reads via methods such as <code>InterlockedCompareExchange64(pointer,0,0)</code>, the mapping will be made read-write instead of read-only to avoid an access violation during the interlocked operation. Depending on the value of <strong>No64BitAtomics</strong> cap, this address points to either a 32 bit or a 64 bit underlying value.</p>

<p>Supported starting with Windows 10.</p>

<h3><code>MonitoredFence.FenceValueGPUVirtualAddress</code></h3>

<p>[out] A read-write mapping of the fence value for the GPU. A driver can signal a new fence value by inserting a GPU write command for this address into a command buffer, and <em>Dxgkrnl</em> will unblock waiters for this fence object value. Depending on the value of <strong>No64BitAtomics</strong> cap, this address points to either a 32 bit or a 64 bit underlying value. If the device doesn’t support cache coherency with the CPU, it shouldn't write to the fence value using the GPU virtual address. Access to the fence value should be done only by the CPU.</p>

<p>Supported starting with Windows 10.</p>

<h3><code>MonitoredFence.EngineAffinity</code></h3>

<p>[in] A bit field, where each bit position (starting from zero) defines a physical adapter index in a link display adapter (LDA) link where the GPU virtual address will be committed. Zero means that the GPU virtual address will be committed to all physical adapters.</p>

<p>Supported starting with Windows 10.</p>

<h3><code>PeriodicMonitoredFence</code></h3>

<p>A structure that contains information about a periodic monitored fence. If the <strong>Type</strong> member is equal to <strong>D3DDDI_PERIODIC_MONITORED_FENCE</strong>, the union in <strong>D3DDDI_SYNCHRONIZATIONOBJECTINFO2</strong> holds a <strong>MonitoredFence</strong> structure.</p>

<p>Supported starting with Windows 10.</p>

<h4>VidPnTargetID</h4>

<p>[out] The output ID that the compositor wishes to receive notifications for.</p>

<h3><code>PeriodicMonitoredFence.hAdapter</code></h3>

<p>[in] A handle to the adapter associated with VidPnSourceID</p>

<h3><code>PeriodicMonitoredFence.VidPnTargetId</code></h3>

<h3><code>PeriodicMonitoredFence.Time</code></h3>

<p>[out] Represents an offset before the VSync (time of VSync – Time parameter). The Time value may not be longer than a VSync interval (1 / DisplayModeRefresh). Time is specified in units of 100ns.</p>

<h3><code>PeriodicMonitoredFence.FenceValueCPUVirtualAddress</code></h3>

<p>[in] Read-only mapping of the fence value for the CPU</p>

<h3><code>PeriodicMonitoredFence.FenceValueGPUVirtualAddress</code></h3>

<p>[in] Read-only mapping of the fence value for the GPU</p>

<h3><code>PeriodicMonitoredFence.EngineAffinity</code></h3>

<p>[in] Defines physical adapters where the GPU VA will be mapped</p>

<h3><code>Reserved</code></h3>

<p>A structure that is reserved for future use. This structure contains the following member:</p>

<h3><code>Reserved.[8]</code></h3>

<p>An array of 64-bit values that are reserved for future use.</p>

<h3><code>SharedHandle</code></h3>

<p>[out] A handle to the shared synchronization object if a shared handle currently exists. The driver should share synchronization objects using NT handles. It should set the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dukmdt/ns-d3dukmdt-_d3dddi_synchronizationobject_flags"><strong>D3DDDI_SYNCHRONIZATIONOBJECT_FLAGS::NtSecuritySharing</strong></a> to indicate that the object will be shared using NT handles and call <strong><a href="d3dkmtshareobjects" title="NTSTATUS D3DKMTShareObjects(&#10;  [in]  UINT                cObjects,&#10;  [in]  const D3DKMT_HANDLE *hObjects,&#10;  [in]  POBJECT_ATTRIBUTES  pObjectAttributes,&#10;  [in]  DWORD               dwDesiredAccess,&#10;  [out] HANDLE              *phSharedNtHandle&#10;);">D3DKMTShareObjects</a></strong> to get an NT handle. Using global handles is not secure. Any process can guess a global handle and open a shared objects. Global handles are supported only for compatibility reasons with old D3D runtimes.</p>

<h2>See also</h2>

<p><strong><a href="d3dddi_synchronizationobject_flags" title="typedef struct _D3DDDI_SYNCHRONIZATIONOBJECT_FLAGS {&#10;  union {&#10;    struct {&#10;      UINT Shared : 1;&#10;      UINT NtSecuritySharing : 1;&#10;      UINT CrossAdapter : 1;&#10;      UINT TopOfPipeline : 1;&#10;      UINT NoSignal : 1;&#10;      UINT NoWait : 1;&#10;      UINT NoSignalMaxValueOnTdr : 1;&#10;      UINT NoGPUAccess : 1;&#10;      UINT SignalByKmd : 1;&#10;      UINT Unused : 1;&#10;      UINT UnwaitCpuWaitersOnlyOnDestroy : 1;&#10;#if ...&#10;      UINT Reserved : 20;&#10;#elif&#10;      UINT Reserved : 21;&#10;#elif&#10;      UINT Reserved : 22;&#10;...">D3DDDI_SYNCHRONIZATIONOBJECT_FLAGS</a></strong></p>

<p><strong><a href="d3dddi_synchronizationobject_type" title="typedef enum _D3DDDI_SYNCHRONIZATIONOBJECT_TYPE {&#10;  D3DDDI_SYNCHRONIZATION_MUTEX,&#10;  D3DDDI_SEMAPHORE,&#10;  D3DDDI_FENCE,&#10;  D3DDDI_CPU_NOTIFICATION,&#10;  D3DDDI_MONITORED_FENCE,&#10;  D3DDDI_PERIODIC_MONITORED_FENCE,&#10;  D3DDDI_NATIVE_FENCE,&#10;  D3DDDI_SYNCHRONIZATION_TYPE_LIMIT&#10;} D3DDDI_SYNCHRONIZATIONOBJECT_TYPE;">D3DDDI_SYNCHRONIZATIONOBJECT_TYPE</a></strong></p>

<p><strong><a href="d3dkmtcreatesynchronizationobject" title="NTSTATUS D3DKMTCreateSynchronizationObject(&#10;  D3DKMT_CREATESYNCHRONIZATIONOBJECT *unnamedParam1&#10;);">D3DKMTCreateSynchronizationObject</a></strong></p>

<p><strong><a href="d3dkmt_createsynchronizationobject2" title="typedef struct _D3DKMT_CREATESYNCHRONIZATIONOBJECT2 {&#10;  [in]  D3DKMT_HANDLE                     hDevice;&#10;  [in]  D3DDDI_SYNCHRONIZATIONOBJECTINFO2 Info;&#10;  [out] D3DKMT_HANDLE                     hSyncObject;&#10;} D3DKMT_CREATESYNCHRONIZATIONOBJECT2;">D3DKMT_CREATESYNCHRONIZATIONOBJECT2</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dukmdt/ns-d3dukmdt-_d3dddi_synchronizationobjectinfo2">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3dukmdt/ns-d3dukmdt-_d3dddi_synchronizationobjectinfo2.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
