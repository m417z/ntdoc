<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="RtlUnicodeToMultiByteSize - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>RtlUnicodeToMultiByteSize - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            RtlUnicodeToMultiByteSize - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">#ifndef _NTRTL_H

</span><span class="ntdoc-code-intro">/**
 * The RtlUnicodeToMultiByteSize routine determines the number of bytes that are required to store the multibyte translation for the specified Unicode string.
 * The translation is assumed to use the current system ANSI code page (ACP). The source string is not necessarily from a multibyte character set.
 *
 * \param BytesInMultiByteString Pointer to a caller-allocated variable that receives the number of bytes required to store the translated string.
 * \param UnicodeString Pointer to the Unicode string for which the multibyte length is to be calculated.
 * \param BytesInUnicodeString Length, in bytes, of the source string.
 * \return <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> Successful or errant status.
 * \sa https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/ntifs/nf-ntifs-rtlunicodetomultibytesize
 */
</span><span class="ntdoc-code-body">NTSYSAPI
<a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a>
NTAPI
RtlUnicodeToMultiByteSize(
    _Out_ PULONG BytesInMultiByteString,
    _In_reads_bytes_(BytesInUnicodeString) PCWCH UnicodeString,
    _In_ <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> BytesInUnicodeString
    );
</span><span class="ntdoc-code-footer">
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/3d935379c6ac1f147cc4e3b25bed778f0d140c69/phnt/include/ntrtl.h#L2602">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntifs.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NTSYSAPI <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> RtlUnicodeToMultiByteSize(
  [out] PULONG BytesInMultiByteString,
  [in]  PCWCH  UnicodeString,
  [in]  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  BytesInUnicodeString
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/nf-ntifs-rtlunicodetomultibytesize">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// winternl.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> RtlUnicodeToMultiByteSize(
  [out] PULONG BytesInMultiByteString,
  [in]  PWCH   UnicodeString,
  [in]  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  BytesInUnicodeString
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winternl/nf-winternl-rtlunicodetomultibytesize">View the official Win32 API reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<p>This function is <a rel="noopener" target="_blank" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/ntifs/nf-ntifs-rtlunicodetomultibytesize">documented in Windows Driver Kit</a>.</p>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/rtlunicodetomultibytesize.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ntifs-rtlunicodetomultibytesize)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="rtlunicodetomultibytesize-function">RtlUnicodeToMultiByteSize function</h1>

<h2 id="description">Description</h2>

<p>The <strong>RtlUnicodeToMultiByteSize</strong> routine determines the number of bytes that are required to store the multibyte translation for the specified Unicode string. The translation is assumed to use the current system ANSI code page (ACP).</p>

<h2 id="parameters">Parameters</h2>

<h3 id="bytesinmultibytestring-out"><code>BytesInMultiByteString</code> [out]</h3>

<p>Pointer to a caller-allocated variable that receives the number of bytes required to store the translated string.</p>

<h3 id="unicodestring-in"><code>UnicodeString</code> [in]</h3>

<p>Pointer to the Unicode string for which the multibyte length is to be calculated.</p>

<h3 id="bytesinunicodestring-in"><code>BytesInUnicodeString</code> [in]</h3>

<p>Length, in bytes, of the source string.</p>

<h2 id="return-value">Return value</h2>

<p><strong>RtlUnicodeToMultiByteSize</strong> returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a>.</p>

<h2 id="remarks">Remarks</h2>

<p><strong>RtlUnicodeToMultiByteSize</strong> can be called to determine how much memory to allocate, or possibly the value to specify for <em>MaxBytesInMultiByteString</em>, before translating a Unicode string to ANSI with <strong><a href="rtlunicodetomultibyten" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlUnicodeToMultiByteN(&#10;    _Out_writes_bytes_to_(MaxBytesInMultiByteString, *BytesInMultiByteString) PCHAR MultiByteString,&#10;    _In_ ULONG MaxBytesInMultiByteString,&#10;    _Out_opt_ PULONG BytesInMultiByteString,&#10;    _In_reads_bytes_(BytesInUnicodeString) PCWCH UnicodeString,&#10;    _In_ ULONG BytesInUnicodeString&#10;    );">RtlUnicodeToMultiByteN</a></strong> or <strong><a href="rtlupcaseunicodetomultibyten" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlUpcaseUnicodeToMultiByteN(&#10;    _Out_writes_bytes_to_(MaxBytesInMultiByteString, *BytesInMultiByteString) PCHAR MultiByteString,&#10;    _In_ ULONG MaxBytesInMultiByteString,&#10;    _Out_opt_ PULONG BytesInMultiByteString,&#10;    _In_reads_bytes_(BytesInUnicodeString) PCWCH UnicodeString,&#10;    _In_ ULONG BytesInUnicodeString&#10;    );">RtlUpcaseUnicodeToMultiByteN</a></strong>. The returned value does not include space for a NULL terminator for the ANSI string.</p>

<p>Like <strong><a href="rtlunicodetomultibyten" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlUnicodeToMultiByteN(&#10;    _Out_writes_bytes_to_(MaxBytesInMultiByteString, *BytesInMultiByteString) PCHAR MultiByteString,&#10;    _In_ ULONG MaxBytesInMultiByteString,&#10;    _Out_opt_ PULONG BytesInMultiByteString,&#10;    _In_reads_bytes_(BytesInUnicodeString) PCWCH UnicodeString,&#10;    _In_ ULONG BytesInUnicodeString&#10;    );">RtlUnicodeToMultiByteN</a></strong>, <strong>RtlUnicodeToMultiByteSize</strong> supports only precomposed Unicode characters that are mapped to the current system ANSI code page installed at system boot.</p>

<p>For information about other string-handling routines, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/_kernel/#run-time-library-rtl-routines">Run-Time Library (RTL) Routines</a>.</p>

<h2 id="see-also">See also</h2>

<p><a href="rtlmultibytetounicodesize" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlMultiByteToUnicodeSize(&#10;    _Out_ PULONG BytesInUnicodeString,&#10;    _In_reads_bytes_(BytesInMultiByteString) PCSTR MultiByteString,&#10;    _In_ ULONG BytesInMultiByteString&#10;    );">RtlMultiByteToUnicodeSize</a></p>

<p><a href="rtlunicodetomultibyten" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlUnicodeToMultiByteN(&#10;    _Out_writes_bytes_to_(MaxBytesInMultiByteString, *BytesInMultiByteString) PCHAR MultiByteString,&#10;    _In_ ULONG MaxBytesInMultiByteString,&#10;    _Out_opt_ PULONG BytesInMultiByteString,&#10;    _In_reads_bytes_(BytesInUnicodeString) PCWCH UnicodeString,&#10;    _In_ ULONG BytesInUnicodeString&#10;    );">RtlUnicodeToMultiByteN</a></p>

<p><a href="rtlupcaseunicodetomultibyten" title="NTSYSAPI&#10;NTSTATUS&#10;NTAPI&#10;RtlUpcaseUnicodeToMultiByteN(&#10;    _Out_writes_bytes_to_(MaxBytesInMultiByteString, *BytesInMultiByteString) PCHAR MultiByteString,&#10;    _In_ ULONG MaxBytesInMultiByteString,&#10;    _Out_opt_ PULONG BytesInMultiByteString,&#10;    _In_reads_bytes_(BytesInUnicodeString) PCWCH UnicodeString,&#10;    _In_ ULONG BytesInUnicodeString&#10;    );">RtlUpcaseUnicodeToMultiByteN</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/nf-ntifs-rtlunicodetomultibytesize">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntifs/nf-ntifs-rtlunicodetomultibytesize.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Win32 API reference (nf-winternl-rtlunicodetomultibytesize)</h1>
</div>
<div class="ntdoc-description">
<h1>RtlUnicodeToMultiByteSize function</h1>

<h2>Description</h2>

<p>Determines how many bytes are needed to represent a Unicode string as an ANSI string.</p>

<h2>Parameters</h2>

<h3><code>BytesInMultiByteString</code> [out]</h3>

<p>Returns the number of bytes for the ANSI equivalent of the Unicode string pointed to by <em>UnicodeString</em>. This number does not include the terminating <strong>NULL</strong> character.</p>

<h3><code>UnicodeString</code> [in]</h3>

<p>The Unicode source string for which the ANSI length is calculated.</p>

<h3><code>BytesInUnicodeString</code> [in]</h3>

<p>The number of bytes in the string pointed to by
<em>UnicodeString</em>.</p>

<h2>Return value</h2>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong><a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a></strong></td>
  <td>The count was successful. The various <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> values are defined in <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a>.H, which is distributed with the Windows DDK.</td>
</tr>
</tbody>
</table>

<h2>Remarks</h2>

<p>It is recommended that you use <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/stringapiset/nf-stringapiset-widechartomultibyte">WideCharToMultiByte</a> instead of <strong>RtlUnicodeToMultiByteSize</strong>. When its <em>cbMultiByte</em> parameter is set to zero, the <strong>WideCharToMultiByte</strong> function returns the number of bytes required for the buffer.</p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winternl/nf-winternl-rtlunicodetomultibytesize">View the official Win32 API reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/sdk-api/blob/docs/sdk-api-src/content/winternl/nf-winternl-rtlunicodetomultibytesize.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
