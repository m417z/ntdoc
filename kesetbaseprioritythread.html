<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="KeSetBasePriorityThread - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>KeSetBasePriorityThread - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            KeSetBasePriorityThread - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddk.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body"><a href="long" title="typedef long LONG;">LONG</a> KeSetBasePriorityThread(
  [in, out] PKTHREAD Thread,
  [in]      <a href="long" title="typedef long LONG;">LONG</a>     Increment
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/nf-ntddk-kesetbaseprioritythread">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/kesetbaseprioritythread.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ntddk-kesetbaseprioritythread)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>KeSetBasePriorityThread</strong> routine sets the run-time priority, relative to the current process, for a given thread.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="thread-in-out"><code>Thread</code> [in, out]</h3>

<p>Pointer to a dispatcher object of type KTHREAD.</p>

<h3 id="increment-in"><code>Increment</code> [in]</h3>

<p>Specifies the value to be added to the base priority of the process for the <strong>Thread</strong>. This value can be positive or negative.</p>

<p>The effective range depends on the process's priority class:</p>

<ul>
<li>For variable priority class processes: The resulting priority must stay within 1 to (<code><a href="low_realtime_priority" title="#define LOW_REALTIME_PRIORITY 16 // Lowest realtime priority level">LOW_REALTIME_PRIORITY</a></code> - 1)</li>
<li>For real-time priority class processes: The resulting priority must stay within <code><a href="low_realtime_priority" title="#define LOW_REALTIME_PRIORITY 16 // Lowest realtime priority level">LOW_REALTIME_PRIORITY</a></code> to <code><a href="high_priority" title="#define HIGH_PRIORITY 31 // Highest thread priority level">HIGH_PRIORITY</a></code></li>
</ul>

<p>If the absolute value of <strong>Increment</strong> is greater than or equal to <code>(<a href="high_priority" title="#define HIGH_PRIORITY 31 // Highest thread priority level">HIGH_PRIORITY</a> + 1) / 2</code>, priority saturation occurs, meaning subsequent changes to the parent process base priority will not affect this thread's base priority.</p>

<h2 id="return-value">Return value</h2>

<p><strong>KeSetBasePriorityThread</strong> returns the previous base priority increment of the given thread. The previous base priority increment is defined as the difference between the specified thread's old base priority and the base priority of the thread's process.</p>

<p>Special return values:</p>

<ul>
<li><p>This function returns 0 when an attempt is made to change the priority of an idle thread (threads in the initial kernel process). The function does not allow idle thread priorities to be changed.</p></li>
<li><p>For saturated threads, this function returns <code>((<a href="high_priority" title="#define HIGH_PRIORITY 31 // Highest thread priority level">HIGH_PRIORITY</a> + 1) / 2) * saturation_value</code> rather than the simple priority difference, where saturation_value is +1 or -1 depending on whether the thread was saturated at high or low priority.</p></li>
</ul>

<h2 id="remarks">Remarks</h2>

<p>The new base priority is computed by adding the given <strong>Increment</strong>, which can be a negative value, to the base priority of the specified thread's process. The resultant value is stored as the base priority of the specified thread.</p>

<p>Drivers that set up device-dedicated threads with variable priority attributes can call this routine to set such a thread's priority relative to the system process in which the thread is created.</p>

<p>The new base priority is restricted to the priority class of the given thread's process. Therefore, the base priority is not allowed to cross over from a variable priority class to a real-time priority class or vice versa.</p>

<p><strong>KeSetBasePriorityThread</strong> is a relatively expensive operation that should be used sparingly. Avoid frequent calls to this function, as repeated priority changes (such as once per minute) can significantly impact system performance and prevent the scheduler from operating efficiently. Use this function only when persistent priority changes are required, not for temporary adjustments or periodic updates.</p>

<h2 id="see-also">See also</h2>

<p><strong><a href="kegetcurrentthread" title="PKTHREAD KeGetCurrentThread();">KeGetCurrentThread</a></strong></p>

<p><strong><a href="kequeryprioritythread" title="KPRIORITY KeQueryPriorityThread(&#10;  [in] PKTHREAD Thread&#10;);">KeQueryPriorityThread</a></strong></p>

<p><strong><a href="kesetprioritythread" title="KPRIORITY KeSetPriorityThread(&#10;  [in, out] PKTHREAD  Thread,&#10;  [in]      KPRIORITY Priority&#10;);">KeSetPriorityThread</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/nf-ntddk-kesetbaseprioritythread">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddk/nf-ntddk-kesetbaseprioritythread.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
