<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="D3DHAL_DP2CLEAR - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>D3DHAL_DP2CLEAR - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            D3DHAL_DP2CLEAR - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3dhal.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _D3DHAL_DP2CLEAR {
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>    dwFlags;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>    dwFillColor;
  D3DVALUE dvFillDepth;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>    dwFillStencil;
  RECT     Rects[1];
} D3DHAL_DP2CLEAR;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dhal/ns-d3dhal-_d3dhal_dp2clear">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/d3dhal_dp2clear.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-d3dhal-_d3dhal_dp2clear)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_d3dhal_dp2clear-structure">_D3DHAL_DP2CLEAR structure</h1>

<h2 id="description">Description</h2>

<p>D3DHAL_DP2CLEAR contains all of the information that the driver needs to perform hardware-assisted clearing on the rendering target, depth buffer or stencil buffer.</p>

<h2 id="members">Members</h2>

<h3 id="dwflags"><code>dwFlags</code></h3>

<p>Specifies what buffers the driver should clear. This member can be a bitwise OR of the following values:</p>

<table>
<thead>
<tr>
  <th style="text-align:left;"><strong>Value</strong></th>
  <th style="text-align:left;"><strong>Meaning</strong></th>
</tr>
</thead>
<tbody>
<tr>
  <td style="text-align:left;">D3DCLEAR_TARGET</td>
  <td style="text-align:left;">The driver should clear the context's render target to the color specified by the dwFillColor member.</td>
</tr>
<tr>
  <td style="text-align:left;">D3DCLEAR_STENCIL</td>
  <td style="text-align:left;">The driver should clear the context's stencil buffer to the value specified by the dwFillStencil member.</td>
</tr>
<tr>
  <td style="text-align:left;">D3DCLEAR_ZBUFFER</td>
  <td style="text-align:left;">The driver should clear the context's depth buffer to the depth specified by the dwFillDepth member.</td>
</tr>
<tr>
  <td style="text-align:left;">D3DCLEAR_COMPUTERECTS</td>
  <td style="text-align:left;">DirectX 8.0 and later versions only.<br>If this flag is set, the specified rectangles should be clipped against the current viewport. Furthermore, it is possible that when D3DCLEAR_COMPUTERECTS is specified the number of rectangles to clear can be zero (the number of rectangles to clear can be found in the wStateCount/wPrimtiveCount union of the <a href="lpd3dhal_dp2command" title="typedef struct _D3DHAL_DP2COMMAND {&#10;  BYTE  bCommand;&#10;  BYTE  bReserved;&#10;  union {&#10;    WORD wPrimitiveCount;&#10;    WORD wStateCount;&#10;  };&#10;} D3DHAL_DP2COMMAND, *LPD3DHAL_DP2COMMAND;">D3DHAL_DP2COMMAND</a> structure for the clear). In this case the entire viewport should be cleared.</td>
</tr>
</tbody>
</table>

<h3 id="dwfillcolor"><code>dwFillColor</code></h3>

<p>Specifies the color that the driver should clear the context's render target to.</p>

<h3 id="dvfilldepth"><code>dvFillDepth</code></h3>

<p>Specifies the value that the driver should use to set the depth in the context's depth buffer. This member can be a value in the interval 0.0 to 1.0. The driver should convert this value to an integer using the <strong>dwZBitMask</strong> member of the depth buffer's <a href="lpddpixelformat" title="typedef struct _DDPIXELFORMAT {&#10;  DWORD dwSize;&#10;  DWORD dwFlags;&#10;  DWORD dwFourCC;&#10;  union {&#10;    DWORD dwRGBBitCount;&#10;    DWORD dwYUVBitCount;&#10;    DWORD dwZBufferBitDepth;&#10;    DWORD dwAlphaBitDepth;&#10;  };&#10;  union {&#10;    DWORD dwRBitMask;&#10;    DWORD dwYBitMask;&#10;  };&#10;  union {&#10;    DWORD dwGBitMask;&#10;    DWORD dwUBitMask;&#10;  };&#10;  union {&#10;    DWORD dwBBitMask;&#10;...">DDPIXELFORMAT</a> structure.</p>

<h3 id="dwfillstencil"><code>dwFillStencil</code></h3>

<p>Specifies the value that the driver should clear the context's stencil buffer to. This member can be an integer in the interval 0 to 2‚Åø-1, where <em>n</em> is the number of bits in the stencil buffer.</p>

<h3 id="rects"><code>Rects</code></h3>

<p>Specifies the rectangular areas of the buffer that the driver should clear. The rectangles are specified in screen coordinates. This member of the structure contains the first rectangle area to be blitted. The <strong>wStateCount</strong> member of the <a href="lpd3dhal_dp2command" title="typedef struct _D3DHAL_DP2COMMAND {&#10;  BYTE  bCommand;&#10;  BYTE  bReserved;&#10;  union {&#10;    WORD wPrimitiveCount;&#10;    WORD wStateCount;&#10;  };&#10;} D3DHAL_DP2COMMAND, *LPD3DHAL_DP2COMMAND;">D3DHAL_DP2COMMAND</a> contains the total number of rectangle areas to be blitted. The other (<strong>wStateCount</strong>-1) RECT structures required follow the D3DHAL_DP2CLEAR structure without any padding.</p>

<h2 id="remarks">Remarks</h2>

<p>This structure is used with the D3DDP2OP_CLEAR command token to replace the legacy <strong>D3dClear</strong> and <strong>D3dClear2</strong> callbacks.</p>

<p>It is important to note that when the number of rectangles is zero, the D3DHAL_DP2CLEAR data structure still includes space for a single RECT. Thus, the size of this single RECT should be included when advancing to the next DP2 instruction. However, the contents of the RECT in this case are undefined and the driver should not attempt to read them.</p>

<p>Display drivers must convert input color values for the ARGB and YUV classes of color formats. For clear operations, input color values are specified in the <strong>dwFillColor</strong> member. For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/handling-color-values-for-pixel-formats">Handling Color Values for Pixel Formats</a>.</p>

<h2 id="see-also">See also</h2>

<p>D3DDP2OP_CLEAR</p>

<p><a href="lpd3dhal_dp2command" title="typedef struct _D3DHAL_DP2COMMAND {&#10;  BYTE  bCommand;&#10;  BYTE  bReserved;&#10;  union {&#10;    WORD wPrimitiveCount;&#10;    WORD wStateCount;&#10;  };&#10;} D3DHAL_DP2COMMAND, *LPD3DHAL_DP2COMMAND;">D3DHAL_DP2COMMAND</a></p>

<p><a href="lpddpixelformat" title="typedef struct _DDPIXELFORMAT {&#10;  DWORD dwSize;&#10;  DWORD dwFlags;&#10;  DWORD dwFourCC;&#10;  union {&#10;    DWORD dwRGBBitCount;&#10;    DWORD dwYUVBitCount;&#10;    DWORD dwZBufferBitDepth;&#10;    DWORD dwAlphaBitDepth;&#10;  };&#10;  union {&#10;    DWORD dwRBitMask;&#10;    DWORD dwYBitMask;&#10;  };&#10;  union {&#10;    DWORD dwGBitMask;&#10;    DWORD dwUBitMask;&#10;  };&#10;  union {&#10;    DWORD dwBBitMask;&#10;...">DDPIXELFORMAT</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dhal/ns-d3dhal-_d3dhal_dp2clear">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3dhal/ns-d3dhal-_d3dhal_dp2clear.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
