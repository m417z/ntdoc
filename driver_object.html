<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DRIVER_OBJECT - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DRIVER_OBJECT - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DRIVER_OBJECT - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _DRIVER_OBJECT {
  <a href="cshort" title="typedef short CSHORT;">CSHORT</a>             Type;
  <a href="cshort" title="typedef short CSHORT;">CSHORT</a>             Size;
  <a href="device_object" title="typedef struct _DEVICE_OBJECT {&#10;  CSHORT                   Type;&#10;  USHORT                   Size;&#10;  LONG                     ReferenceCount;&#10;  struct _DRIVER_OBJECT    *DriverObject;&#10;  struct _DEVICE_OBJECT    *NextDevice;&#10;  struct _DEVICE_OBJECT    *AttachedDevice;&#10;  struct _IRP              *CurrentIrp;&#10;  PIO_TIMER                Timer;&#10;  ULONG                    Flags;&#10;  ULONG                    Characteristics;&#10;  __volatile PVPB          Vpb;&#10;  PVOID                    DeviceExtension;&#10;  DEVICE_TYPE              DeviceType;&#10;  CCHAR                    StackSize;&#10;  union {&#10;    LIST_ENTRY         ListEntry;&#10;    WAIT_CONTEXT_BLOCK Wcb;&#10;  } Queue;&#10;  ULONG                    AlignmentRequirement;&#10;...">PDEVICE_OBJECT</a>     DeviceObject;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>              Flags;
  PVOID              DriverStart;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>              DriverSize;
  PVOID              DriverSection;
  PDRIVER_EXTENSION  DriverExtension;
  <a href="unicode_string" title="typedef struct _UNICODE_STRING&#10;{&#10;    USHORT Length;&#10;    USHORT MaximumLength;&#10;    _Field_size_bytes_part_opt_(MaximumLength, Length) PWCH Buffer;&#10;} UNICODE_STRING, *PUNICODE_STRING;">UNICODE_STRING</a>     DriverName;
  <a href="unicode_string" title="typedef struct _UNICODE_STRING&#10;{&#10;    USHORT Length;&#10;    USHORT MaximumLength;&#10;    _Field_size_bytes_part_opt_(MaximumLength, Length) PWCH Buffer;&#10;} UNICODE_STRING, *PUNICODE_STRING;">PUNICODE_STRING</a>    HardwareDatabase;
  <a href="fast_io_dispatch" title="typedef struct _FAST_IO_DISPATCH {&#10;  ULONG                                  SizeOfFastIoDispatch;&#10;  PFAST_IO_CHECK_IF_POSSIBLE             FastIoCheckIfPossible;&#10;  PFAST_IO_READ                          FastIoRead;&#10;  PFAST_IO_WRITE                         FastIoWrite;&#10;  PFAST_IO_QUERY_BASIC_INFO              FastIoQueryBasicInfo;&#10;  PFAST_IO_QUERY_STANDARD_INFO           FastIoQueryStandardInfo;&#10;  PFAST_IO_LOCK                          FastIoLock;&#10;  PFAST_IO_UNLOCK_SINGLE                 FastIoUnlockSingle;&#10;  PFAST_IO_UNLOCK_ALL                    FastIoUnlockAll;&#10;  PFAST_IO_UNLOCK_ALL_BY_KEY             FastIoUnlockAllByKey;&#10;  PFAST_IO_DEVICE_CONTROL                FastIoDeviceControl;&#10;  PFAST_IO_ACQUIRE_FILE                  AcquireFileForNtCreateSection;&#10;  PFAST_IO_RELEASE_FILE                  ReleaseFileForNtCreateSection;&#10;  PFAST_IO_DETACH_DEVICE                 FastIoDetachDevice;&#10;  PFAST_IO_QUERY_NETWORK_OPEN_INFO       FastIoQueryNetworkOpenInfo;&#10;  PFAST_IO_ACQUIRE_FOR_MOD_WRITE         AcquireForModWrite;&#10;  PFAST_IO_MDL_READ                      MdlRead;&#10;  PFAST_IO_MDL_READ_COMPLETE             MdlReadComplete;&#10;  PFAST_IO_PREPARE_MDL_WRITE             PrepareMdlWrite;&#10;...">PFAST_IO_DISPATCH</a>  FastIoDispatch;
  PDRIVER_INITIALIZE DriverInit;
  PDRIVER_STARTIO    DriverStartIo;
  PDRIVER_UNLOAD     DriverUnload;
  PDRIVER_DISPATCH   MajorFunction[<a href="irp_mj_maximum_function" title="#define IRP_MJ_MAXIMUM_FUNCTION 0x1b">IRP_MJ_MAXIMUM_FUNCTION</a> + 1];
} DRIVER_OBJECT, *PDRIVER_OBJECT;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_driver_object">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/driver_object.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-wdm-_driver_object)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>Each driver object represents the image of a loaded kernel-mode driver. The I/O manager allocates the <strong>DRIVER_OBJECT</strong> structure and passes it as an input parameter to a driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-driver_initialize">DriverEntry</a>, <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-driver_add_device">AddDevice</a>, and optional <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/nc-ntddk-driver_reinitialize">Reinitialize</a> routines and to its <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-driver_unload">Unload</a> routine, if any.</p>

<p>A driver object is partially opaque. Driver writers must know about certain members of a driver object to initialize a driver and to unload it if the driver is unloadable. The following members of the driver object are accessible to drivers.</p>

<h2 id="members">Members</h2>

<h3 id="type"><code>Type</code></h3>

<p>Specifies the object type identifier for the driver object. The I/O manager sets this field when it allocates the driver object. Drivers shouldn't use or modify this field.</p>

<h3 id="size"><code>Size</code></h3>

<p>Specifies the size, in bytes, of the driver object structure. The I/O manager sets this field when it allocates the driver object. Drivers shouldn't use or modify this field.</p>

<h3 id="deviceobject"><code>DeviceObject</code></h3>

<p>Pointer to the first device object in a linked list of device objects created by the driver. This field links all devices created by a single driver together on a list. This member is automatically updated by the I/O manager when the driver calls <a href="iocreatedevice" title="NTSTATUS IoCreateDevice(&#10;  [in]           PDRIVER_OBJECT  DriverObject,&#10;  [in]           ULONG           DeviceExtensionSize,&#10;  [in, optional] PUNICODE_STRING DeviceName,&#10;  [in]           DEVICE_TYPE     DeviceType,&#10;  [in]           ULONG           DeviceCharacteristics,&#10;  [in]           BOOLEAN         Exclusive,&#10;  [out]          PDEVICE_OBJECT  *DeviceObject&#10;);">IoCreateDevice</a> successfully. A driver can use this member and the <strong>NextDevice</strong> member of <strong><a href="device_object" title="typedef struct _DEVICE_OBJECT {&#10;  CSHORT                   Type;&#10;  USHORT                   Size;&#10;  LONG                     ReferenceCount;&#10;  struct _DRIVER_OBJECT    *DriverObject;&#10;  struct _DEVICE_OBJECT    *NextDevice;&#10;  struct _DEVICE_OBJECT    *AttachedDevice;&#10;  struct _IRP              *CurrentIrp;&#10;  PIO_TIMER                Timer;&#10;  ULONG                    Flags;&#10;  ULONG                    Characteristics;&#10;  __volatile PVPB          Vpb;&#10;  PVOID                    DeviceExtension;&#10;  DEVICE_TYPE              DeviceType;&#10;  CCHAR                    StackSize;&#10;  union {&#10;    LIST_ENTRY         ListEntry;&#10;    WAIT_CONTEXT_BLOCK Wcb;&#10;  } Queue;&#10;  ULONG                    AlignmentRequirement;&#10;...">DEVICE_OBJECT</a></strong> to traverse the complete list of all device objects that the driver has created. This is particularly useful during driver unload to ensure all device objects are properly cleaned up.</p>

<h3 id="flags"><code>Flags</code></h3>

<p>Contains system-defined flags that describe various attributes and states of the driver. This field provides an extensible flag location for driver objects. These flags are set and maintained by the I/O manager and other system components. Drivers should not directly modify this field.</p>

<h3 id="driverstart"><code>DriverStart</code></h3>

<p>Points to the base virtual address where the driver image is loaded in system memory. This address represents the beginning of the driver's code section in the kernel address space. The I/O manager sets this value when the driver is loaded.</p>

<h3 id="driversize"><code>DriverSize</code></h3>

<p>Specifies the size, in bytes, of the driver image in memory. This value represents the total memory footprint of the loaded driver, including code, data, and other sections. The I/O manager sets this value when the driver is loaded.</p>

<h3 id="driversection"><code>DriverSection</code></h3>

<p>Points to the driver's section object, which represents the driver image in the memory manager. This is an opaque system structure used internally by the memory manager and loader. Drivers should not access or modify this member.</p>

<h3 id="driverextension"><code>DriverExtension</code></h3>

<p>Pointer to the driver extension. The only accessible member of the driver extension is <strong>DriverExtension->AddDevice</strong>, into which a driver's <strong><a href="driverentry" title="NTSTATUS DriverEntry(&#10;  [in] PDRIVER_OBJECT  DriverObject,&#10;  [in] PUNICODE_STRING RegistryPath&#10;);">DriverEntry</a></strong> routine stores the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-driver_add_device">AddDevice</a> routine.</p>

<h3 id="drivername"><code>DriverName</code></h3>

<p>Contains the Unicode string name of the driver. This field is used by the error log thread to determine the name of the driver that an I/O request is or was bound to. This is typically of the form <em>\Driver\DriverName</em>, where <em>DriverName</em> corresponds to the driver's service name in the registry. The I/O manager sets this value based on the driver's registry configuration.</p>

<h3 id="hardwaredatabase"><code>HardwareDatabase</code></h3>

<p>Pointer to the <strong>\Registry\Machine\Hardware</strong> path to the hardware configuration information in the registry.</p>

<h3 id="fastiodispatch"><code>FastIoDispatch</code></h3>

<p>Pointer to a <a href="fast_io_dispatch" title="typedef struct _FAST_IO_DISPATCH {&#10;  ULONG                                  SizeOfFastIoDispatch;&#10;  PFAST_IO_CHECK_IF_POSSIBLE             FastIoCheckIfPossible;&#10;  PFAST_IO_READ                          FastIoRead;&#10;  PFAST_IO_WRITE                         FastIoWrite;&#10;  PFAST_IO_QUERY_BASIC_INFO              FastIoQueryBasicInfo;&#10;  PFAST_IO_QUERY_STANDARD_INFO           FastIoQueryStandardInfo;&#10;  PFAST_IO_LOCK                          FastIoLock;&#10;  PFAST_IO_UNLOCK_SINGLE                 FastIoUnlockSingle;&#10;  PFAST_IO_UNLOCK_ALL                    FastIoUnlockAll;&#10;  PFAST_IO_UNLOCK_ALL_BY_KEY             FastIoUnlockAllByKey;&#10;  PFAST_IO_DEVICE_CONTROL                FastIoDeviceControl;&#10;  PFAST_IO_ACQUIRE_FILE                  AcquireFileForNtCreateSection;&#10;  PFAST_IO_RELEASE_FILE                  ReleaseFileForNtCreateSection;&#10;  PFAST_IO_DETACH_DEVICE                 FastIoDetachDevice;&#10;  PFAST_IO_QUERY_NETWORK_OPEN_INFO       FastIoQueryNetworkOpenInfo;&#10;  PFAST_IO_ACQUIRE_FOR_MOD_WRITE         AcquireForModWrite;&#10;  PFAST_IO_MDL_READ                      MdlRead;&#10;  PFAST_IO_MDL_READ_COMPLETE             MdlReadComplete;&#10;  PFAST_IO_PREPARE_MDL_WRITE             PrepareMdlWrite;&#10;...">FAST_IO_DISPATCH</a> structure defining the driver's fast I/O entry points. This optional pointer points to an array of alternate entry points to a driver for "fast I/O" support. Fast I/O is performed by invoking the driver routine directly with separate parameters, rather than using the standard <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a> call mechanism. Note that these functions may only be used for synchronous I/O, and when the file is cached. This member is used only by file system drivers (FSDs) and network transport drivers.</p>

<h3 id="driverinit"><code>DriverInit</code></h3>

<p>The entry point address for the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-driver_initialize">DriverEntry</a> routine. The I/O manager sets this field to point to the driver's initialization function when the driver is loaded. This is the first function called in the driver when it is loaded into memory, and it is responsible for initializing the driver object and setting up dispatch routines.</p>

<h3 id="driverstartio"><code>DriverStartIo</code></h3>

<p>The entry point for the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-driver_startio">StartIo</a> routine, if any, which is set by the <strong><a href="driverentry" title="NTSTATUS DriverEntry(&#10;  [in] PDRIVER_OBJECT  DriverObject,&#10;  [in] PUNICODE_STRING RegistryPath&#10;);">DriverEntry</a></strong> routine when the driver initializes. If a driver has no <em>StartIo</em> routine, this member is <strong>NULL</strong>.</p>

<h3 id="driverunload"><code>DriverUnload</code></h3>

<p>The entry point for the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-driver_unload">Unload</a> routine, if any, which is set by the <strong><a href="driverentry" title="NTSTATUS DriverEntry(&#10;  [in] PDRIVER_OBJECT  DriverObject,&#10;  [in] PUNICODE_STRING RegistryPath&#10;);">DriverEntry</a></strong> routine when the driver initializes. If a driver has no <em>Unload</em> routine, this member is <strong>NULL</strong>.</p>

<h3 id="majorfunction"><code>MajorFunction</code></h3>

<p>A dispatch table consisting of an array of entry points for the driver's <em>DispatchXxx</em> routines. The array's index values are the <strong>IRP_MJ_<em>XXX</em></strong> values representing each <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-major-function-codes">IRP major function code</a>. This major function dispatch table must be the last field in the object so that it remains extensible. Each driver must set entry points in this array for the <strong>IRP_MJ_<em>XXX</em></strong> requests that the driver handles. For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/writing-dispatch-routines">Writing Dispatch Routines</a>.</p>

<p>To help <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/code-analysis-for-drivers">Code Analysis for Drivers</a>, <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/static-driver-verifier">Static Driver Verifier</a> (SDV), and other verification tools, each <em>DispatchXxx</em> routine is declared using the <a href="driver_dispatch" title="DRIVER_DISPATCH DriverDispatch;&#10;&#10;NTSTATUS DriverDispatch(&#10;  [in, out] _DEVICE_OBJECT *DeviceObject,&#10;  [in, out] _IRP *Irp&#10;)&#10;{...}">DRIVER_DISPATCH</a> type, as shown in this code example:</p>

<div class="codehilite">
<pre><span></span><code><span class="n"><a href="driver_dispatch" title="DRIVER_DISPATCH DriverDispatch;&#10;&#10;NTSTATUS DriverDispatch(&#10;  [in, out] _DEVICE_OBJECT *DeviceObject,&#10;  [in, out] _IRP *Irp&#10;)&#10;{...}">DRIVER_DISPATCH</a></span><span class="w"> </span><span class="n">DispatchXxx</span><span class="p">;</span>
</code></pre>
</div>

<p>Then, the callback routine is implemented as follows:</p>

<div class="codehilite">
<pre><span></span><code><span class="n">_Use_decl_annotations_</span>
<span class="n"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a></span>
<span class="w">  </span><span class="n">DispatchXxx</span><span class="p">(</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">_DEVICE_OBJECT</span><span class="w">  </span><span class="o">*</span><span class="n">DeviceObject</span><span class="p">,</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">_IRP</span><span class="w">  </span><span class="o">*</span><span class="n">Irp</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Function body</span>
<span class="w">  </span><span class="p">}</span>
</code></pre>
</div>

<p>The <a href="driver_dispatch" title="DRIVER_DISPATCH DriverDispatch;&#10;&#10;NTSTATUS DriverDispatch(&#10;  [in, out] _DEVICE_OBJECT *DeviceObject,&#10;  [in, out] _IRP *Irp&#10;)&#10;{...}">DRIVER_DISPATCH</a> function type is defined in the Wdm.h header file. To more accurately identify errors when you run the code analysis tools, be sure to add the <code>_Use_decl_annotations</code>_ annotation to your function definition. The <code>_Use_decl_annotations_</code> annotation ensures that the annotations that are applied to the <a href="driver_dispatch" title="DRIVER_DISPATCH DriverDispatch;&#10;&#10;NTSTATUS DriverDispatch(&#10;  [in, out] _DEVICE_OBJECT *DeviceObject,&#10;  [in, out] _IRP *Irp&#10;)&#10;{...}">DRIVER_DISPATCH</a> function type in the header file are used. For more information about the requirements for function declarations, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/declaring-functions-using-function-role-types-for-wdm-drivers">Declaring Functions by Using Function Role Types for WDM Drivers</a>. For information about <code>_Use_decl_annotations_</code>, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/visualstudio/code-quality/annotating-function-behavior">Annotating Function Behavior</a>.</p>

<h2 id="remarks">Remarks</h2>

<p>Each kernel-mode driver's initialization routine should be named <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/storage/driverentry-of-ide-controller-minidriver"><strong>DriverEntry</strong></a> so the system will load the driver automatically. If this routine's name is something else, the driver writer must define the name of the initialization routine for the linker; otherwise, the system loader or I/O manager can't find the driver's transfer address. The names of other standard driver routines can be chosen at the discretion of the driver writer.</p>

<p>A driver must set its <em>DispatchXxx</em> entry points in the driver object that is passed in to the <strong><a href="driverentry" title="NTSTATUS DriverEntry(&#10;  [in] PDRIVER_OBJECT  DriverObject,&#10;  [in] PUNICODE_STRING RegistryPath&#10;);">DriverEntry</a></strong> routine when the driver is loaded. A device driver must set one or more <em>DispatchXxx</em> entry points for the <strong>IRP_MJ_<em>XXX</em></strong> that any driver of the same type of device is required to handle. A higher-level driver must set one or more <em>DispatchXxx</em> entry points for all the <strong>IRP_MJ_<em>XXX</em></strong> that it must pass on to the underlying device driver. Otherwise, a driver is not sent IRPs for any <strong>IRP_MJ_<em>XXX</em></strong> for which it does not set up a <em>DispatchXxx</em> routine in the driver object. For more information about the set of <strong>IRP_MJ_<em>XXX</em></strong> that drivers for different types of underlying devices are required to handle, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-major-function-codes">IRP Major Function Codes</a>.</p>

<p>The <strong><a href="driverentry" title="NTSTATUS DriverEntry(&#10;  [in] PDRIVER_OBJECT  DriverObject,&#10;  [in] PUNICODE_STRING RegistryPath&#10;);">DriverEntry</a></strong> routine also sets the driver's <em>AddDevice</em>, <em>StartIo</em> and/or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-driver_unload">Unload</a> entry points, if any, in the driver object.</p>

<p>The <strong>HardwareDatabase</strong> string can be used by device drivers to get hardware configuration information from the registry when the driver is loaded. A driver is given read-only access to this string.</p>

<p>The <em>RegistryPath</em> input to the <strong><a href="driverentry" title="NTSTATUS DriverEntry(&#10;  [in] PDRIVER_OBJECT  DriverObject,&#10;  [in] PUNICODE_STRING RegistryPath&#10;);">DriverEntry</a></strong> routine points to the <strong>\Registry\Machine\System\CurrentControlSet\Services\<em>DriverName</em></strong> key, where the value entry of <em>DriverName</em> identifies the driver. This registry key contains the driver's service configuration, including values such as:</p>

<ul>
<li><strong>Start</strong>: When the driver should be loaded (boot, system, automatic, demand, or disabled)</li>
<li><strong>Type</strong>: The type of service (kernel driver, file system driver, etc.)</li>
<li><strong>ErrorControl</strong>: How the system should respond if the driver fails to load</li>
<li><strong>ImagePath</strong>: The path to the driver binary file</li>
</ul>

<p>Drivers can store additional configuration data under the <strong>Parameters</strong> subkey of their service key. As for the <strong>HardwareDatabase</strong> in the input driver object, a driver is given read-only access to this string.</p>

<p>Undocumented members within a driver object should be considered inaccessible. Drivers with dependencies on object member locations or on access to undocumented members might not remain portable and interoperable with other drivers over time.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/storage/driverentry-of-ide-controller-minidriver">DriverEntry</a></p>

<p><a href="iocreatedevice" title="NTSTATUS IoCreateDevice(&#10;  [in]           PDRIVER_OBJECT  DriverObject,&#10;  [in]           ULONG           DeviceExtensionSize,&#10;  [in, optional] PUNICODE_STRING DeviceName,&#10;  [in]           DEVICE_TYPE     DeviceType,&#10;  [in]           ULONG           DeviceCharacteristics,&#10;  [in]           BOOLEAN         Exclusive,&#10;  [out]          PDEVICE_OBJECT  *DeviceObject&#10;);">IoCreateDevice</a></p>

<p><a href="iodeletedevice" title="VOID IoDeleteDevice(&#10;  [in] PDEVICE_OBJECT DeviceObject&#10;);">IoDeleteDevice</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-driver_startio">StartIo</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-driver_unload">Unload</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_driver_object">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/ns-wdm-_driver_object.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
