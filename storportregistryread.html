<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="StorPortRegistryRead - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>StorPortRegistryRead - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            StorPortRegistryRead - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// storport.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">BOOLEAN StorPortRegistryRead(
  PVOID  HwDeviceExtension,
  PUCHAR ValueName,
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  Global,
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  Type,
  PUCHAR Buffer,
  PULONG BufferLength
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/storport/nf-storport-storportregistryread">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/storportregistryread.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-storport-storportregistryread)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="storportregistryread-function">StorPortRegistryRead function</h1>

<h2 id="description">Description</h2>

<p>The <strong>StorPortRegistryRead</strong> routine reads the registry data for the indicated device and value.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="hwdeviceextension"><code>HwDeviceExtension</code></h3>

<p>A pointer to the hardware device extension. This is a per HBA storage area that the port driver allocates and initializes on behalf of the miniport driver. Miniport drivers usually store HBA-specific information in this extension, such as the state of the HBA and the mapped access ranges for the HBA. This area is available to the miniport driver immediately after the miniport driver calls <strong><a href="storportinitialize" title="STORPORT_API ULONG StorPortInitialize(&#10;  [in]           PVOID                   Argument1,&#10;  [in]           PVOID                   Argument2,&#10;  [in]           _HW_INITIALIZATION_DATA *HwInitializationData,&#10;  [in, optional] PVOID                   HwContext&#10;);">StorPortInitialize</a></strong>. The port driver frees this memory when it removes the device. The miniport driver must be running at IRQL PASSIVE_LEVEL when it calls this routine.</p>

<h3 id="valuename"><code>ValueName</code></h3>

<p>Pointer to a <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> that specifies the registry value name whose content is to be read.</p>

<h3 id="global"><code>Global</code></h3>

<p>Indicates, when nonzero, that the port driver reads the contents of the registry value specified by <strong>ValueName</strong> under the Parameters\Device subkey. The values under the Device key apply to all adapters in the system. When <strong>Global</strong> is zero, the port driver reads the contents of the registry value specified by <strong>ValueName</strong> under the Parameters\Device(d) subkey, where (d) is a decimal value that corresponds to the port number of a particular adapter. In this case, the data retrieved is adapter-specific.</p>

<h3 id="type"><code>Type</code></h3>

<p>Indicates the data type of registry value. This parameter must have one of the values in the following table.</p>

<table>
<thead>
<tr>
  <th>Registry value data type</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td>REG_NONE</td>
  <td>No data type specified.</td>
</tr>
<tr>
  <td>REG_SZ</td>
  <td>Indicates a <strong>NULL</strong>-terminated Unicode string.</td>
</tr>
<tr>
  <td>REG_EXPAND_SZ</td>
  <td>Indicates a <strong>NULL</strong>-terminated Unicode string that includes environment variables that must be expanded to obtain the complete string. For example, a path name might be stored as the following string: "%USERPROFILE%\Application Data ". In this example, the environment variable USERPROFILE must be expanded to obtain the actual pathname.</td>
</tr>
<tr>
  <td>REG_BINARY</td>
  <td>Indicates a raw binary data.</td>
</tr>
<tr>
  <td>REG_DWORD</td>
  <td>Indicates a 32-bit double word value.</td>
</tr>
<tr>
  <td>REG_DWORD_LITTLE_ENDIAN</td>
  <td>Indicates a 32-bit double word value, in little-endian order. This is identical to REG_DWORD.</td>
</tr>
<tr>
  <td>REG_DWORD_BIG_ENDIAN</td>
  <td>Indicates a 32-bit double word value, in big-endian order.</td>
</tr>
<tr>
  <td>REG_LINK</td>
  <td>Indicates a Unicode string containing a symbolic link.</td>
</tr>
<tr>
  <td>REG_MULTI_SZ</td>
  <td>Indicates a series of <strong>NULL</strong>-terminated strings.</td>
</tr>
<tr>
  <td>REG_RESOURCE_LIST</td>
  <td>Indicates that the registry value contains a list of hardware resources, also known as the "hardware resource map", that is stored under the HKEY_LOCAL_MACHINE\HARDWARE\ResourceMap hive.</td>
</tr>
<tr>
  <td>REG_FULL_RESOURCE_DESCRIPTOR</td>
  <td>Indicates that the registry value contains a description of hardware resources stored under the HKEY_LOCAL_MACHINE\HARDWARE\Description hive.</td>
</tr>
<tr>
  <td>REG_RESOURCE_REQUIREMENTS_LIST</td>
  <td>Indicates that the registry value contains a list of hardware resource requirements stored under the HKEY_LOCAL_MACHINE\HARDWARE\ResourceMap tree.</td>
</tr>
<tr>
  <td>REG_QWORD</td>
  <td>Indicates that the registry value contains a 64-bit number.</td>
</tr>
<tr>
  <td>REG_QWORD_LITTLE_ENDIAN</td>
  <td>Indicates that the registry value contains a 64-bit number. This is the same data type as REG_QWORD.</td>
</tr>
</tbody>
</table>

<h3 id="buffer"><code>Buffer</code></h3>

<p>Pointer to the buffer where the retrieved registry information is to be reported.</p>

<h3 id="bufferlength"><code>BufferLength</code></h3>

<p>Pointer to a <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> that contains the size, in bytes, of the registry data returned.</p>

<h2 id="return-value">Return value</h2>

<p><strong>StorPortRegistryRead</strong> returns a Boolean value of <strong>TRUE</strong> if the data pointed to by <strong>ValueName</strong> is successfully converted into ASCII and copied into the buffer. This routine returns <strong>FALSE</strong> in the event of an error.</p>

<h2 id="remarks">Remarks</h2>

<p>If <strong>StorPortRegistryRead</strong> returns <strong>FALSE</strong> with a nonzero value in the <strong>BufferLength</strong> parameter, the buffer that was passed was too small and the <strong>BufferLength</strong> parameter reflects the correct buffer size that should be used. If the routine returns <strong>FALSE</strong> with the <strong>BufferLength</strong> parameter set to zero, another error has occurred.</p>

<p>The buffer used in this routine is allocated by calling <strong><a href="storportallocateregistrybuffer" title="STORPORT_API PUCHAR StorPortAllocateRegistryBuffer(&#10;  [in] PVOID  HwDeviceExtension,&#10;  [in] PULONG Length&#10;);">StorPortAllocateRegistryBuffer</a></strong> and freed by calling <strong><a href="storportfreeregistrybuffer" title="STORPORT_API VOID StorPortFreeRegistryBuffer(&#10;  [in] PVOID  HwDeviceExtension,&#10;  [in] PUCHAR Buffer&#10;);">StorPortFreeRegistryBuffer</a></strong>.</p>

<h2 id="see-also">See also</h2>

<p><strong><a href="storportallocateregistrybuffer" title="STORPORT_API PUCHAR StorPortAllocateRegistryBuffer(&#10;  [in] PVOID  HwDeviceExtension,&#10;  [in] PULONG Length&#10;);">StorPortAllocateRegistryBuffer</a></strong></p>

<p><strong><a href="storportfreeregistrybuffer" title="STORPORT_API VOID StorPortFreeRegistryBuffer(&#10;  [in] PVOID  HwDeviceExtension,&#10;  [in] PUCHAR Buffer&#10;);">StorPortFreeRegistryBuffer</a></strong></p>

<p><strong><a href="storportinitialize" title="STORPORT_API ULONG StorPortInitialize(&#10;  [in]           PVOID                   Argument1,&#10;  [in]           PVOID                   Argument2,&#10;  [in]           _HW_INITIALIZATION_DATA *HwInitializationData,&#10;  [in, optional] PVOID                   HwContext&#10;);">StorPortInitialize</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/storport/nf-storport-storportregistryread">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/storport/nf-storport-storportregistryread.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
