<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="ExAcquireFastMutexUnsafe - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>ExAcquireFastMutexUnsafe - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            ExAcquireFastMutexUnsafe - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">VOID ExAcquireFastMutexUnsafe(
  PFAST_MUTEX FastMutex
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-exacquirefastmutexunsafe">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/exacquirefastmutexunsafe.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-wdm-exacquirefastmutexunsafe)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2>Description</h2>

<p>The <strong>ExAcquireFastMutexUnsafe</strong> routine acquires the specified fast mutex for the calling thread.</p>

<h2>Parameters</h2>

<h3><code>FastMutex</code></h3>

<p>[in, out] A pointer to a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/fast-mutexes-and-guarded-mutexes#fast-mutexes"><strong>FAST_MUTEX</strong></a>) structure that the caller provides the storage for. The caller previously initialized this structure by a call to the <strong><a href="exinitializefastmutex" title="VOID ExInitializeFastMutex(&#10;  [out] PFAST_MUTEX FastMutex&#10;);">ExInitializeFastMutex</a></strong> routine</p>

<h2>Remarks</h2>

<p><strong>ExAcquireFastMutexUnsafe</strong> puts the caller into a wait state if the specified fast mutex cannot be acquired immediately. Otherwise, the caller is given ownership of the mutex and exclusive access to the resource that the mutex protects until the caller releases the mutex.</p>

<p>Any fast mutex that is acquired by a call to <strong>ExAcquireFastMutexUnsafe</strong> must be released by a call to the <strong><a href="exreleasefastmutexunsafe" title="VOID ExReleaseFastMutexUnsafe(&#10;  PFAST_MUTEX FastMutex&#10;);">ExReleaseFastMutexUnsafe</a></strong> routine.</p>

<p>The <strong><a href="exacquirefastmutex" title="VOID ExAcquireFastMutex(&#10;  PFAST_MUTEX FastMutex&#10;);">ExAcquireFastMutex</a></strong> and <strong>ExAcquireFastMutexUnsafe</strong> routines cause the calling thread to block until the mutex is available. The <strong><a href="extrytoacquirefastmutex" title="BOOLEAN ExTryToAcquireFastMutex(&#10;  PFAST_MUTEX FastMutex&#10;);">ExTryToAcquireFastMutex</a></strong> routine returns immediately with return value <strong>FALSE</strong> if another thread has already acquired the mutex. Both <strong><a href="exacquirefastmutex" title="VOID ExAcquireFastMutex(&#10;  PFAST_MUTEX FastMutex&#10;);">ExAcquireFastMutex</a></strong> and <strong><a href="extrytoacquirefastmutex" title="BOOLEAN ExTryToAcquireFastMutex(&#10;  PFAST_MUTEX FastMutex&#10;);">ExTryToAcquireFastMutex</a></strong> raise the IRQL to APC_LEVEL before acquiring the fast mutex. Drivers should use <strong>ExAcquireFastMutexUnsafe</strong>, which does not raise the IRQL, only if either of the following is true:</p>

<ul>
<li><p>The thread is already running at APC_LEVEL.</p></li>
<li><p>The thread acquires the mutex within a critical region that was previously entered by a call to the <strong><a href="keentercriticalregion" title="VOID KeEnterCriticalRegion();">KeEnterCriticalRegion</a></strong> or <strong><a href="fsrtlenterfilesystem" title="VOID FsRtlEnterFileSystem(&#10;   VOID&#10;);">FsRtlEnterFileSystem</a></strong> routine.</p></li>
</ul>

<p>For more information about fast mutexes, see the following topics:</p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/fast-mutexes-and-guarded-mutexes">Fast Mutexes and Guarded Mutexes</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/introduction-to-spin-locks">Locks, Deadlocks, and Synchronization</a></p>

<h2>See also</h2>

<p><strong><a href="exacquirefastmutex" title="VOID ExAcquireFastMutex(&#10;  PFAST_MUTEX FastMutex&#10;);">ExAcquireFastMutex</a></strong></p>

<p><strong><a href="exinitializefastmutex" title="VOID ExInitializeFastMutex(&#10;  [out] PFAST_MUTEX FastMutex&#10;);">ExInitializeFastMutex</a></strong></p>

<p><strong><a href="exreleasefastmutexunsafe" title="VOID ExReleaseFastMutexUnsafe(&#10;  PFAST_MUTEX FastMutex&#10;);">ExReleaseFastMutexUnsafe</a></strong></p>

<p><strong><a href="extrytoacquirefastmutex" title="BOOLEAN ExTryToAcquireFastMutex(&#10;  PFAST_MUTEX FastMutex&#10;);">ExTryToAcquireFastMutex</a></strong></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/fast-mutexes-and-guarded-mutexes#fast-mutexes"><strong>FAST_MUTEX</strong></a></p>

<p><strong><a href="fsrtlenterfilesystem" title="VOID FsRtlEnterFileSystem(&#10;   VOID&#10;);">FsRtlEnterFileSystem</a></strong></p>

<p><strong><a href="keentercriticalregion" title="VOID KeEnterCriticalRegion();">KeEnterCriticalRegion</a></strong></p>

<p><strong><a href="keleavecriticalregion" title="VOID KeLeaveCriticalRegion();">KeLeaveCriticalRegion</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-exacquirefastmutexunsafe">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/nf-wdm-exacquirefastmutexunsafe.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
