<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="FILE_STAT_BASIC_INFORMATION - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>FILE_STAT_BASIC_INFORMATION - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            FILE_STAT_BASIC_INFORMATION - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">#ifndef _NTIOAPI_H
#if !defined(NTDDI_WIN11_GE) || (NTDDI_VERSION &lt; NTDDI_WIN11_GE)

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _FILE_STAT_BASIC_INFORMATION
{
    LARGE_INTEGER FileId;
    LARGE_INTEGER CreationTime;
    LARGE_INTEGER LastAccessTime;
    LARGE_INTEGER LastWriteTime;
    LARGE_INTEGER ChangeTime;
    LARGE_INTEGER AllocationSize;
    LARGE_INTEGER EndOfFile;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> FileAttributes;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> ReparseTag;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> NumberOfLinks;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> DeviceType;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> DeviceCharacteristics;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> Reserved;
    LARGE_INTEGER VolumeSerialNumber;
    FILE_ID_128 FileId128;
} FILE_STAT_BASIC_INFORMATION, *PFILE_STAT_BASIC_INFORMATION;
</span><span class="ntdoc-code-footer">
#endif
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/66e9024965df1192a53aee9b345a8df8f08d8beb/phnt/include/ntioapi.h#L1218">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntifs.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _FILE_STAT_BASIC_INFORMATION {
  LARGE_INTEGER FileId;
  LARGE_INTEGER CreationTime;
  LARGE_INTEGER LastAccessTime;
  LARGE_INTEGER LastWriteTime;
  LARGE_INTEGER ChangeTime;
  LARGE_INTEGER AllocationSize;
  LARGE_INTEGER EndOfFile;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         FileAttributes;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         ReparseTag;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         NumberOfLinks;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         DeviceType;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         DeviceCharacteristics;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         Reserved;
  LARGE_INTEGER VolumeSerialNumber;
  FILE_ID_128   FileId128;
} FILE_STAT_BASIC_INFORMATION, *PFILE_STAT_BASIC_INFORMATION;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/ns-ntifs-file_stat_basic_information">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/file_stat_basic_information.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntifs-file_stat_basic_information)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p><strong>FILE_STAT_BASIC_INFORMATION</strong> contains basic metadata about a file.</p>

<h2 id="members">Members</h2>

<h3 id="fileid"><code>FileId</code></h3>

<p>Specifies the identifier of a file.</p>

<h3 id="creationtime"><code>CreationTime</code></h3>

<p>Specifies the creation time of a file.</p>

<h3 id="lastaccesstime"><code>LastAccessTime</code></h3>

<p>Specifies the last time a file was accessed.</p>

<h3 id="lastwritetime"><code>LastWriteTime</code></h3>

<p>Specifies the last time a file was written to.</p>

<h3 id="changetime"><code>ChangeTime</code></h3>

<p>Specifies the last time a file was changed.</p>

<h3 id="allocationsize"><code>AllocationSize</code></h3>

<p>File allocation size, in bytes. Usually this value is a multiple of the sector or cluster size of the underlying physical device.</p>

<h3 id="endoffile"><code>EndOfFile</code></h3>

<p>The absolute new end-of-file position as a byte offset from the start of the file. <strong>EndOfFile</strong> specifies the byte offset to the end of the file. Because this value is zero-based, it actually refers to the first free byte in the file. In other words, <strong>EndOfFile</strong> is the offset to the byte immediately following the last valid byte in the file.</p>

<h3 id="fileattributes"><code>FileAttributes</code></h3>

<p>File attributes, which can be any valid combination of the following:</p>

<table>
<thead>
<tr>
  <th>Attribute</th>
  <th>Value</th>
</tr>
</thead>
<tbody>
<tr>
  <td>FILE_ATTRIBUTE_READONLY</td>
  <td>0x00000001</td>
</tr>
<tr>
  <td>FILE_ATTRIBUTE_HIDDEN</td>
  <td>0x00000002</td>
</tr>
<tr>
  <td>FILE_ATTRIBUTE_SYSTEM</td>
  <td>0x00000004</td>
</tr>
<tr>
  <td>FILE_ATTRIBUTE_DIRECTORY</td>
  <td>0x00000010</td>
</tr>
<tr>
  <td>FILE_ATTRIBUTE_ARCHIVE</td>
  <td>0x00000020</td>
</tr>
<tr>
  <td>FILE_ATTRIBUTE_NORMAL</td>
  <td>0x00000080</td>
</tr>
</tbody>
</table>

<h3 id="reparsetag"><code>ReparseTag</code></h3>

<p>Specifies the tag for a reparse point. See <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ifs/reparse-points">About reparse points</a> for more information.</p>

<h3 id="numberoflinks"><code>NumberOfLinks</code></h3>

<p>Specifies the number of links to the file.</p>

<h3 id="devicetype"><code>DeviceType</code></h3>

<p>Set when a driver calls <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iocreatedevice"><strong>IoCreateDevice</strong></a> as appropriate for the type of underlying device. For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/specifying-device-types">Specifying Device Types</a>.</p>

<h3 id="devicecharacteristics"><code>DeviceCharacteristics</code></h3>

<p>The device characteristics. For a description of relevant values, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_device_object"><strong>DEVICE_OBJECT</strong></a>.</p>

<h3 id="reserved"><code>Reserved</code></h3>

<p>Reserved for system use.</p>

<h3 id="volumeserialnumber"><code>VolumeSerialNumber</code></h3>

<p>Serial number of the volume where the file is located.</p>

<h3 id="fileid128"><code>FileId128</code></h3>

<p>The 128-byte file reference number for the file. This number is generated and assigned to the file by the file system.</p>

<h2 id="remarks">Remarks</h2>

<p>This information can be queried in either of the following ways:</p>

<ul>
<li><p>Call <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/nf-ntifs-zwquerydirectoryfile"><strong>ZwQueryDirectoryFile</strong></a>, passing <strong>FileStatBasicInformation</strong> as the value of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ne-wdm-_file_information_class"><strong>FileInformationClass</strong></a> and passing a caller-allocated, <strong><a href="file_id_extd_dir_information" title="typedef struct _FILE_ID_EXTD_DIR_INFORMATION&#10;{&#10;    ULONG NextEntryOffset;&#10;    ULONG FileIndex;&#10;    LARGE_INTEGER CreationTime;&#10;    LARGE_INTEGER LastAccessTime;&#10;    LARGE_INTEGER LastWriteTime;&#10;    LARGE_INTEGER ChangeTime;&#10;    LARGE_INTEGER EndOfFile;&#10;    LARGE_INTEGER AllocationSize;&#10;    ULONG FileAttributes;&#10;    ULONG FileNameLength;&#10;    ULONG EaSize;&#10;    ULONG ReparsePointTag;&#10;    FILE_ID_128 FileId;&#10;    _Field_size_bytes_(FileNameLength) WCHAR FileName[1];&#10;} FILE_ID_EXTD_DIR_INFORMATION, *PFILE_ID_EXTD_DIR_INFORMATION;">FILE_ID_EXTD_DIR_INFORMATION</a></strong>-structured buffer as the value of <strong>FileInformation</strong>.</p></li>
<li><p>Create an <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a> with major function code <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ifs/irp-mj-directory-control">IRP_MJ_DIRECTORY_CONTROL</a> and minor function code IRP_MN_QUERY_DIRECTORY.</p></li>
</ul>

<p>No specific access rights are required to query this information.</p>

<p>File reference numbers, also called file IDs, are guaranteed to be unique only within a static file system. They are not guaranteed to be unique over time, because file systems are free to reuse them. Nor are they guaranteed to remain constant. For example, the FAT file system generates the file reference number for a file from the byte offset of the file's directory entry record (DIRENT) on the disk. Defragmentation can change this byte offset. Thus a FAT file reference number can change over time.</p>

<p>All dates and times are in absolute system-time format. Absolute system time is the number of 100-nanosecond intervals since the start of the year 1601.</p>

<p>This structure must be aligned on a <a href="longlong" title="typedef __int64 LONGLONG;">LONGLONG</a> (8-byte) boundary. If a buffer contains two or more of these structures, the <strong>NextEntryOffset</strong> value in each entry, except the last, falls on an 8-byte boundary.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ne-wdm-_file_information_class"><strong>FILE_INFORMATION_CLASS</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-zwqueryinformationbyname"><strong>ZwQueryInformationByName</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/ns-ntifs-file_stat_basic_information">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntifs/ns-ntifs-file_stat_basic_information.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
