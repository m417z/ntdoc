<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NdisMCmActivateVc - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NdisMCmActivateVc - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NdisMCmActivateVc - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NDIS_STATUS NdisMCmActivateVc(
  [in] NDIS_HANDLE         NdisVcHandle,
  [in] PCO_CALL_PARAMETERS CallParameters
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndismcmactivatevc">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndismcmactivatevc.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ndis-ndismcmactivatevc)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="ndismcmactivatevc-function">NdisMCmActivateVc function</h1>

<h2 id="description">Description</h2>

<p><strong>NdisMCmActivateVc</strong> notifies NDIS that an MCM driver is ready to make transfers on a particular
VC.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="ndisvchandle-in"><code>NdisVcHandle</code> [in]</h3>

<p>Specifies the handle identifying the VC.</p>

<h3 id="callparameters-in"><code>CallParameters</code> [in]</h3>

<p>Pointer to a caller-allocated buffer, formatted as a structure of type
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/windows/hardware/network/ff545384(v=vs.85)">CO_CALL_PARAMETERS</a>, containing all the
media-specific parameters that the miniport driver uses for the activated VC.</p>

<h2 id="return-value">Return value</h2>

<p>When
<strong>NdisMCmActivateVc</strong> returns anything other than NDIS_STATUS_PENDING, the MCM driver should make an
internal call to its
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_cm_activate_vc_complete">ProtocolCmActivateVcComplete</a> function. Otherwise, NDIS calls the MCM driver's
<em>ProtocolCmActivateVcComplete</em> function when this operation is completed.</p>

<h2 id="remarks">Remarks</h2>

<p><strong>NdisMCmActivateVc</strong> informs NDIS that an MCM driver has set up call and media parameters on a newly
created VC or changed the call parameters on an established VC.</p>

<p>An MCM driver must call
<strong>NdisMCmActivateVc</strong> after establishing a connection on a VC but before any data is sent or received
on that VC. This call notifies NDIS that the miniport driver has made a NIC ready for transfers on the
VC.</p>

<p>For a client-initiated outgoing call, an MCM driver usually calls
<strong>NdisMCmActivateVc</strong> following the handshake denoting a negotiated agreement with the remote node or
successful call-setup at the switch, before it notifies NDIS (and the client) of outgoing call completion
with
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndismcmmakecallcomplete">NdisMCmMakeCallComplete</a>. For an
incoming call, an MCM driver usually calls
<strong>NdisMCmActivateVc</strong> after it has called
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndismcmcreatevc">NdisMCmCreateVc</a> successfully and before it
calls
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndismcmdispatchincomingcall">NdisMCmDispatchIncomingCall</a>.</p>

<p>The driver writer determines whether an MCM driver has an (internal)
<em>MiniportCoActivateVc</em> function that the driver calls in the context of setting up connections for
outgoing and incoming calls.</p>

<p>For the duration of the connection, an MCM driver can modify the call parameters as conditions on the
network change and/or whenever the client calls
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisclmodifycallqos">NdisClModifyCallQoS</a>. The MCM driver
must update the state that it maintains about call parameters to the new values if it can continue to
make transfers on the VC according to the newly modified call parameters. It must call
<strong>NdisMCmActivateVc</strong> to notify NDIS of any changes in the call parameters for the active VC.
Otherwise, the MCM driver can do either of the following:</p>

<ul>
<li>Call
<strong><a href="ndismcmdeactivatevc" title="NDIS_STATUS NdisMCmDeactivateVc(&#10;  [in] NDIS_HANDLE NdisVcHandle&#10;);">NdisMCmDeactivateVc</a></strong> after failing the client's request to modify QoS or other call parameters for
the VC to such a state that the miniport driver cannot continue to make transfers on the VC.</li>
<li>Restore the call parameters to a previously accepted state, notify the client that requested the
change, and remain ready to continue transferring data on the VC. In this case, the client has the
option of accepting the restored call parameters or rejecting them and initiating a close of the
VC.</li>
</ul>

<p>Only connection-oriented miniport drivers that provide integrated call-management support can call
<strong>NdisMCmActivateVc</strong>. Stand-alone call managers, which register themselves with NDIS as protocol
drivers, call
<strong><a href="ndiscmactivatevc" title="NDIS_STATUS NdisCmActivateVc(&#10;  [in]      NDIS_HANDLE         NdisVcHandle,&#10;  [in, out] PCO_CALL_PARAMETERS CallParameters&#10;);">NdisCmActivateVc</a></strong> instead.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/windows/hardware/network/ff545384(v=vs.85)">CO_CALL_PARAMETERS</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_co_activate_vc">MiniportCoActivateVc</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisclmakecall">NdisClMakeCall</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisclmodifycallqos">NdisClModifyCallQoS</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndiscmactivatevc">NdisCmActivateVc</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndismcmcreatevc">NdisMCmCreateVc</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndismcmdeactivatevc">NdisMCmDeactivateVc</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndismcmdispatchincomingcall">NdisMCmDispatchIncomingCall</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_co_create_vc">ProtocolCoCreateVc</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndismcmactivatevc">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ndis/nf-ndis-ndismcmactivatevc.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
