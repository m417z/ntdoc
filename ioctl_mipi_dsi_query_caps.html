<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="IOCTL_MIPI_DSI_QUERY_CAPS - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>IOCTL_MIPI_DSI_QUERY_CAPS - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            IOCTL_MIPI_DSI_QUERY_CAPS - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddvdeo.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">// <a href="ctl_code" title="void CTL_CODE(&#10;  DeviceType,&#10;  Function,&#10;  Method,&#10;  Access&#10;);">CTL_CODE</a>(0x0023, 0x500, METHOD_BUFFERED, FILE_ANY_ACCESS)
#define IOCTL_MIPI_DSI_QUERY_CAPS 0x00231400</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddvdeo/ni-ntddvdeo-ioctl_mipi_dsi_query_caps">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ioctl_mipi_dsi_query_caps.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ni-ntddvdeo-ioctl_mipi_dsi_query_caps)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>IOCTL_MIPI_DSI_QUERY_CAPS IOCTL</h1>

<h3>Major Code: <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mj-device-control">IRP_MJ_DEVICE_CONTROL</a></h3>

<h2>Description</h2>

<p><strong>IOCTL_MIPI_DSI_QUERY_CAPS</strong> retrieves the basic capabilities of the MIPI DSI interface exposed by the graphics driver, and identification information from the panel.</p>

<h2>Parameters</h2>

<h3>Major code</h3>

<h3>Input buffer</h3>

<p>None.</p>

<h3>Input buffer length</h3>

<p>n/a</p>

<h3>Output buffer</h3>

<p>Buffer in which the DSI capabilities are returned. Must be at least <code>sizeof(<a href="dxgk_dsi_caps" title="typedef struct _DXGK_DSI_CAPS {&#10;  BYTE DSITypeMajor;&#10;  BYTE DSITypeMinor;&#10;  BYTE SpecVersionMajor;&#10;  BYTE SpecVersionMinor;&#10;  BYTE SpecVersionPatch;&#10;  WORD TargetMaximumReturnPacketSize;&#10;  BYTE ResultCodeFlags;&#10;  BYTE ResultCodeStatus;&#10;  BYTE Revision;&#10;  BYTE Level;&#10;  BYTE DeviceClassHi;&#10;  BYTE DeviceClassLo;&#10;  BYTE ManufacturerHi;&#10;  BYTE ManufacturerLo;&#10;  BYTE ProductHi;&#10;  BYTE ProductLo;&#10;  BYTE LengthHi;&#10;  BYTE LengthLo;&#10;} DXGK_DSI_CAPS, *PDXGK_DSI_CAPS;">DXGK_DSI_CAPS</a>)</code>.</p>

<h3>Output buffer length</h3>

<p>Size in bytes of the output buffer.</p>

<h3>Input/output buffer</h3>

<p>n/a</p>

<h3>Input/output buffer length</h3>

<p>n/a</p>

<h3>Status block</h3>

<p>Irp->IoStatus.Status is set to <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if the request is successful.
Otherwise, Status to the appropriate error condition as a <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> code.</p>

<p>For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/ntstatus-values">NTSTATUS Values</a>.</p>

<h2>Remarks</h2>

<p>Mobile Industry Processor Interface (MIPI) Digital Serial Interface(DSI) IOCTLs must be handled by the monitor, oem-panel, or port/miniport driver.</p>

<p>The OEM panel driver should initialize by using <strong>IOCTL_MIPI_DSI_QUERY_CAPS</strong> which provides information to allow the OEM panel driver to verify driver support and provides the raw level 1 DDB data from the display to allow one panel driver to support multiple devices and to confirm that there is no mismatch. The capabilities are returned in a <strong><a href="dxgk_dsi_caps" title="typedef struct _DXGK_DSI_CAPS {&#10;  BYTE DSITypeMajor;&#10;  BYTE DSITypeMinor;&#10;  BYTE SpecVersionMajor;&#10;  BYTE SpecVersionMinor;&#10;  BYTE SpecVersionPatch;&#10;  WORD TargetMaximumReturnPacketSize;&#10;  BYTE ResultCodeFlags;&#10;  BYTE ResultCodeStatus;&#10;  BYTE Revision;&#10;  BYTE Level;&#10;  BYTE DeviceClassHi;&#10;  BYTE DeviceClassLo;&#10;  BYTE ManufacturerHi;&#10;  BYTE ManufacturerLo;&#10;  BYTE ProductHi;&#10;  BYTE ProductLo;&#10;  BYTE LengthHi;&#10;  BYTE LengthLo;&#10;} DXGK_DSI_CAPS, *PDXGK_DSI_CAPS;">DXGK_DSI_CAPS</a></strong> structure. It is responsibility of the OEM panel driver to validate DSI capability, and compatibility with the panel since neither the graphics driver nor the OS has sufficient information to do so, particularly for any manufacturer defined or undefined elements.</p>

<p>The OS translates the query IOCTL into a call to <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_dsicaps"><strong>DsiQueryCaps</strong></a>, passing in the target id of the monitor as input and the caps structure for output. The graphics driver should fill in the requested fields, using cached information if available since the data should be static. Since the OS needs the <strong>TargetMaximumReturnPacketSize</strong> value for packet validation, it may request the capabilities from the graphics driver before receiving a request from the panel driver.</p>

<h2>See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_dsicaps"><strong>DsiQueryCaps</strong></a></p>

<p><strong><a href="dxgk_dsi_caps" title="typedef struct _DXGK_DSI_CAPS {&#10;  BYTE DSITypeMajor;&#10;  BYTE DSITypeMinor;&#10;  BYTE SpecVersionMajor;&#10;  BYTE SpecVersionMinor;&#10;  BYTE SpecVersionPatch;&#10;  WORD TargetMaximumReturnPacketSize;&#10;  BYTE ResultCodeFlags;&#10;  BYTE ResultCodeStatus;&#10;  BYTE Revision;&#10;  BYTE Level;&#10;  BYTE DeviceClassHi;&#10;  BYTE DeviceClassLo;&#10;  BYTE ManufacturerHi;&#10;  BYTE ManufacturerLo;&#10;  BYTE ProductHi;&#10;  BYTE ProductLo;&#10;  BYTE LengthHi;&#10;  BYTE LengthLo;&#10;} DXGK_DSI_CAPS, *PDXGK_DSI_CAPS;">DXGK_DSI_CAPS</a></strong></p>

<p><strong><a href="ioctl_mipi_dsi_reset" title="// CTL_CODE(0x0023, 0x502, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_MIPI_DSI_RESET 0x00231408">IOCTL_MIPI_DSI_RESET</a></strong></p>

<p><strong><a href="ioctl_mipi_dsi_transmission" title="// CTL_CODE(0x0023, 0x501, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_MIPI_DSI_TRANSMISSION 0x00231404">IOCTL_MIPI_DSI_TRANSMISSION</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddvdeo/ni-ntddvdeo-ioctl_mipi_dsi_query_caps">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddvdeo/ni-ntddvdeo-ioctl_mipi_dsi_query_caps.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
