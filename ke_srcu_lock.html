<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="KE_SRCU_LOCK - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>KE_SRCU_LOCK - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            KE_SRCU_LOCK - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _KE_SRCU_LOCK {
  <a href="ulong_ptr" title="typedef [public] unsigned __int3264 ULONG_PTR;">ULONG_PTR</a> Placeholder[2];
} *PKE_SRCU_LOCK, KE_SRCU_LOCK;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-ke_srcu_lock">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ke_srcu_lock.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-wdm-ke_srcu_lock)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>KE_SRCU_LOCK</strong> structure represents the lock context used in SRCU (Sleepable Read-Copy-Update) read-side critical sections.</p>

<h2 id="members">Members</h2>

<h3 id="placeholder2"><code>Placeholder[2]</code></h3>

<p>An array of two <code><a href="ulong_ptr" title="typedef [public] unsigned __int3264 ULONG_PTR;">ULONG_PTR</a></code> values that serve as opaque storage for the SRCU lock context. The contents of this field are implementation-specific and should not be accessed or modified by drivers.</p>

<h2 id="remarks">Remarks</h2>

<p>This structure is returned by <strong><a href="kesrcureadlock" title="VOID KeSrcuReadLock(&#10;  [in]  PKE_SRCU      Rcu,&#10;  [out] PKE_SRCU_LOCK Lock&#10;);">KeSrcuReadLock</a></strong> and <strong><a href="kercureadlock" title="VOID KeRcuReadLock();">KeRcuReadLock</a></strong> functions and must be passed to the corresponding unlock functions.</p>

<p>This structure is opaque to drivers. Drivers should never:</p>

<ul>
<li>Access or modify the <code>Placeholder</code> field directly.</li>
<li>Make assumptions about the structure's internal layout.</li>
<li>Copy or serialize the structure contents.</li>
<li>Use the structure across different SRCU partitions.</li>
</ul>

<p>The structure is typically used in the following pattern:</p>

<div class="codehilite">
<pre><span></span><code><span class="n">PSRCU_PARTITION</span><span class="w"> </span><span class="n">SrcuPartition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n"><a href="kesrcuallocate" title="PKE_SRCU KeSrcuAllocate(&#10;  [in] ULONG Tag&#10;);">KeSrcuAllocate</a></span><span class="p">();</span>
<span class="n">KE_SRCU_LOCK</span><span class="w"> </span><span class="n">LockContext</span><span class="p">;</span>

<span class="c1">// Enter read-side critical section</span>
<span class="n">LockContext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n"><a href="kesrcureadlock" title="VOID KeSrcuReadLock(&#10;  [in]  PKE_SRCU      Rcu,&#10;  [out] PKE_SRCU_LOCK Lock&#10;);">KeSrcuReadLock</a></span><span class="p">(</span><span class="n">SrcuPartition</span><span class="p">);</span>

<span class="c1">// Access RCU-protected data safely</span>
<span class="c1">// ...</span>

<span class="c1">// Exit read-side critical section</span>
<span class="n"><a href="kesrcureadunlock" title="VOID KeSrcuReadUnlock(&#10;  [in] PKE_SRCU      Rcu,&#10;  [in] PKE_SRCU_LOCK Lock&#10;);">KeSrcuReadUnlock</a></span><span class="p">(</span><span class="n">SrcuPartition</span><span class="p">,</span><span class="w"> </span><span class="n">LockContext</span><span class="p">);</span>
</code></pre>
</div>

<p>The lock context returned by the read lock function must be passed to the corresponding unlock function to properly exit the critical section. Using an incorrect or uninitialized lock context may result in system instability.</p>

<h2 id="see-also">See also</h2>

<p><strong><a href="kesrcureadlock" title="VOID KeSrcuReadLock(&#10;  [in]  PKE_SRCU      Rcu,&#10;  [out] PKE_SRCU_LOCK Lock&#10;);">KeSrcuReadLock</a></strong></p>

<p><strong><a href="kesrcureadunlock" title="VOID KeSrcuReadUnlock(&#10;  [in] PKE_SRCU      Rcu,&#10;  [in] PKE_SRCU_LOCK Lock&#10;);">KeSrcuReadUnlock</a></strong></p>

<p><strong><a href="kercureadlock" title="VOID KeRcuReadLock();">KeRcuReadLock</a></strong></p>

<p><strong><a href="kercureadunlock" title="VOID KeRcuReadUnlock();">KeRcuReadUnlock</a></strong></p>

<p><strong><a href="kesrcuallocate" title="PKE_SRCU KeSrcuAllocate(&#10;  [in] ULONG Tag&#10;);">KeSrcuAllocate</a></strong></p>

<p><strong><a href="kesrcusynchronize" title="VOID KeSrcuSynchronize(&#10;  [in] PKE_SRCU Rcu&#10;);">KeSrcuSynchronize</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-ke_srcu_lock">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/ns-wdm-ke_srcu_lock.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
