<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="D3DKMTUpdateGpuVirtualAddress - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>D3DKMTUpdateGpuVirtualAddress - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            D3DKMTUpdateGpuVirtualAddress - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3dkmthk.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> D3DKMTUpdateGpuVirtualAddress(
  [in] const <a href="d3dkmt_updategpuvirtualaddress" title="typedef struct _D3DKMT_UPDATEGPUVIRTUALADDRESS {&#10;  D3DKMT_HANDLE                            hDevice;&#10;  D3DKMT_HANDLE                            hContext;&#10;  D3DKMT_HANDLE                            hFenceObject;&#10;  UINT                                     NumOperations;&#10;  D3DDDI_UPDATEGPUVIRTUALADDRESS_OPERATION *Operations;&#10;  D3DKMT_ALIGN64 D3DKMT_SIZE_T             Reserved0;&#10;  D3DKMT_ALIGN64 UINT64                    Reserved1;&#10;  D3DKMT_ALIGN64 UINT64                    FenceValue;&#10;  union {&#10;    struct {&#10;      UINT DoNotWait : 1;&#10;      UINT Reserved : 31;&#10;    };&#10;    UINT Value;&#10;  } Flags;&#10;} D3DKMT_UPDATEGPUVIRTUALADDRESS;">D3DKMT_UPDATEGPUVIRTUALADDRESS</a> *unnamedParam1
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmthk/nf-d3dkmthk-d3dkmtupdategpuvirtualaddress">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/d3dkmtupdategpuvirtualaddress.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-d3dkmthk-d3dkmtupdategpuvirtualaddress)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>D3DKMTUpdateGpuVirtualAddress function</h1>
<h2>Description</h2>
<p><strong>D3DKMTUpdateGpuVirtualAddress</strong> is a special operation used in the context of tile resources. It allows the driver to specify a number of mapping operations to be applied to the process virtual address space in a single batch of page table updates.</p>
<h2>Parameters</h2>
<h3><code>unnamedParam1</code> [in]</h3>
<p>A pointer to a <a href="d3dkmt_updategpuvirtualaddress" title="typedef struct _D3DKMT_UPDATEGPUVIRTUALADDRESS {&#10;  D3DKMT_HANDLE                            hDevice;&#10;  D3DKMT_HANDLE                            hContext;&#10;  D3DKMT_HANDLE                            hFenceObject;&#10;  UINT                                     NumOperations;&#10;  D3DDDI_UPDATEGPUVIRTUALADDRESS_OPERATION *Operations;&#10;  D3DKMT_ALIGN64 D3DKMT_SIZE_T             Reserved0;&#10;  D3DKMT_ALIGN64 UINT64                    Reserved1;&#10;  D3DKMT_ALIGN64 UINT64                    FenceValue;&#10;  union {&#10;    struct {&#10;      UINT DoNotWait : 1;&#10;      UINT Reserved : 31;&#10;    };&#10;    UINT Value;&#10;  } Flags;&#10;} D3DKMT_UPDATEGPUVIRTUALADDRESS;">D3DKMT_UPDATEGPUVIRTUALADDRESS</a> structure that describes the operation.</p>
<h2>Return value</h2>
<table>
<thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a></td>
<td>The device context was successfully created.</td>
</tr>
<tr>
<td>STATUS_INVALID_PARAMETER</td>
<td>Parameters were validated and determined to be incorrect.</td>
</tr>
</tbody>
</table>
<p>This function might also return other <strong><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a></strong> values.</p>
<h2>Remarks</h2>
<p>The range of graphics processing unit (GPU) virtual addresses in all operations (except the source of the copy operations) must belong to a single virtual address range which was obtained by calling <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkcb_reservegpuvirtualaddressrange">ReserveGpuVirtualAddressRange</a>. Similarly, the virtual address ranges of all sources in copy operations must belong to a single virtual address range, which was obtained by calling <strong>ReserveGpuVirtualAddressRange</strong>.</p>
<p>The page table updates are executed on a paging context, dedicated to the rendering context specified, and executed on the GPU only after the associated rendering context signaled <strong>FenceValue</strong> for the specified monitored fence object. When the page table updates are finished, the paging context signals the monitored fence object to <strong>FenceValue</strong>+1, allowing the rendering context to do tight interlocking with the page table updates.</p>
<p>The virtual address ranges in the update operations are allowed to intersect. The operations will be applied in the order they are submitted.</p>
<p>In a single <strong>UpdateVirtualAddress</strong> call:</p>
<ul>
<li>All virtual address ranges in mapping operations and the destination range in copy operations must belong to the same reserved (zero) range.</li>
<li>The source virtual address range in copy operations is allowed to be from a different reserved (zero) range.</li>
<li>The source virtual address range in all copy operations must belong to the same reserved (zero) range.</li>
</ul>
<p>Drivers can submit many <strong>UpdateGpuVirtualAddress</strong> calls, which will be queued behind the rendering fence. When the number of queued update operations exceeds 128, the calling thread will be blocked until the previous operations are processed by the video memory manager.</p>
<h2>See also</h2>
<p><a href="d3dkmt_updategpuvirtualaddress" title="typedef struct _D3DKMT_UPDATEGPUVIRTUALADDRESS {&#10;  D3DKMT_HANDLE                            hDevice;&#10;  D3DKMT_HANDLE                            hContext;&#10;  D3DKMT_HANDLE                            hFenceObject;&#10;  UINT                                     NumOperations;&#10;  D3DDDI_UPDATEGPUVIRTUALADDRESS_OPERATION *Operations;&#10;  D3DKMT_ALIGN64 D3DKMT_SIZE_T             Reserved0;&#10;  D3DKMT_ALIGN64 UINT64                    Reserved1;&#10;  D3DKMT_ALIGN64 UINT64                    FenceValue;&#10;  union {&#10;    struct {&#10;      UINT DoNotWait : 1;&#10;      UINT Reserved : 31;&#10;    };&#10;    UINT Value;&#10;  } Flags;&#10;} D3DKMT_UPDATEGPUVIRTUALADDRESS;">D3DKMT_UPDATEGPUVIRTUALADDRESS</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkcb_reservegpuvirtualaddressrange">ReserveGpuVirtualAddressRange</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmthk/nf-d3dkmthk-d3dkmtupdategpuvirtualaddress">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3dkmthk/nf-d3dkmthk-d3dkmtupdategpuvirtualaddress.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
