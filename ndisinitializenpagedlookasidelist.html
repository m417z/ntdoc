<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NdisInitializeNPagedLookasideList - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NdisInitializeNPagedLookasideList - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NdisInitializeNPagedLookasideList - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">VOID NdisInitializeNPagedLookasideList(
  [in]           PNPAGED_LOOKASIDE_LIST Lookaside,
  [in, optional] PALLOCATE_FUNCTION     Allocate,
  [in, optional] PFREE_FUNCTION         Free,
  [in]           <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                  Flags,
  [in]           <a href="size_t-2" title="typedef ULONG_PTR SIZE_T;">SIZE_T</a>                 Size,
  [in]           <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                  Tag,
  [in]           <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>                 Depth
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisinitializenpagedlookasidelist">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndisinitializenpagedlookasidelist.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ndis-ndisinitializenpagedlookasidelist)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="ndisinitializenpagedlookasidelist-function">NdisInitializeNPagedLookasideList function</h1>

<h2 id="description">Description</h2>

<p>The
<strong>NdisInitializeNPagedLookasideList</strong> function initializes a lookaside list. After a successful
initialization, nonpaged fixed-size blocks can be allocated from and freed to the lookaside list.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="lookaside-in"><code>Lookaside</code> [in]</h3>

<p>A pointer to an
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/eprocess">NPAGED_LOOKASIDE_LIST</a> structure that
contains the caller-supplied lookaside list head to be initialized. The structure must be 16-byte aligned on 64-bit platforms. The driver must provide a list head
that is residentâ€”that is, in nonpaged system space.</p>

<h3 id="allocate-in-optional"><code>Allocate</code> [in, optional]</h3>

<p>A function entry point that is either <strong>NULL</strong> or specifies the entry point of a caller-supplied
<em>Allocate</em> function that will allocate an entry of the size that is specified in the
<em>Size</em> member whenever it is called. If
<em>Allocate</em> is <strong>NULL</strong>, the
<a href="ndisallocatefromnpagedlookasidelist" title="void NdisAllocateFromNPagedLookasideList(&#10;  _L&#10;);">NdisAllocateFromNPagedLookasideList</a> function subsequently allocates entries on behalf of the
caller. If the caller provides an
<em>Allocate</em> function, it also must provide a
<em>Free</em> function.</p>

<h3 id="free-in-optional"><code>Free</code> [in, optional]</h3>

<p>A function entry point that is either <strong>NULL</strong> or specifies the entry point of a caller-supplied
<em>Free</em> function that will free an entry of the size that is specified in the
<em>Size</em> member whenever it is called. If
<em>Free</em> is <strong>NULL</strong>, the
<a href="ndisfreetonpagedlookasidelist" title="void NdisFreeToNPagedLookasideList(&#10;  _L,&#10;  _E&#10;);">NdisFreeToNPagedLookasideList</a> function subsequently frees entries on behalf of the caller.</p>

<h3 id="flags-in"><code>Flags</code> [in]</h3>

<p>Must be zero. This parameter is reserved.</p>

<h3 id="size-in"><code>Size</code> [in]</h3>

<p>The size, in bytes, of each entry to be subsequently allocated from the lookaside list.</p>

<h3 id="tag-in"><code>Tag</code> [in]</h3>

<p>A caller-supplied pool tag for lookaside list entries. The
<em>Tag</em> is a string of four characters that is delimited by single quote marks (for example, 'derF').
The characters are usually specified in reverse order so they are easier to read when dumping pool or
tracking pool usage in the debugger.</p>

<h3 id="depth-in"><code>Depth</code> [in]</h3>

<p>Must be zero. This parameter is also reserved.</p>

<h2 id="remarks">Remarks</h2>

<p><strong>NdisInitializeNPagedLookasideList</strong> initializes the caller-supplied list head but allocates no memory
for list entries. The initial entries are allocated on an as-needed basis either with calls to the
<a href="ndisallocatefromnpagedlookasidelist" title="void NdisAllocateFromNPagedLookasideList(&#10;  _L&#10;);">NdisAllocateFromNPagedLookasideList</a> function or by the driver-supplied
<em>Allocate</em> callback function at the
<em>Allocate</em> parameter. The list is populated as the driver frees entries back to the list with the
<a href="ndisfreetonpagedlookasidelist" title="void NdisFreeToNPagedLookasideList(&#10;  _L,&#10;  _E&#10;);">NdisFreeToNPagedLookasideList</a> function. Entries collect on the list until a system-determined but
dynamically sized limit is reached. Then, any surplus entries in the lookaside list are returned to
nonpaged pool, either by
<strong><a href="ndisfreetonpagedlookasidelist" title="void NdisFreeToNPagedLookasideList(&#10;  _L,&#10;  _E&#10;);">NdisFreeToNPagedLookasideList</a></strong> or with calls to the driver-supplied
<em>Free</em> callback function at the
<em>Free</em> parameter.</p>

<p>All entries in the lookaside list are of the same size, which is specified in the
<em>Size</em> parameter. A lookaside list is particularly useful to drivers that must dynamically allocate
and free fixed-size context areas in which to maintain run-time state about their outstanding I/O
operations. For instance, connection-oriented NDIS drivers are likely to find lookaside lists
particularly useful because such drivers usually maintain a dynamic set of context areas to track
outgoing and incoming calls.</p>

<p>It is more efficient for a driver to allow the
<a href="ndisallocatefromnpagedlookasidelist" title="void NdisAllocateFromNPagedLookasideList(&#10;  _L&#10;);">NdisAllocateFromNPagedLookasideList</a> and
<a href="ndisfreetonpagedlookasidelist" title="void NdisFreeToNPagedLookasideList(&#10;  _L,&#10;  _E&#10;);">NdisFreeToNPagedLookasideList</a> functions to manage the allocation and deallocation of entries (see
the
<a href="exallocatepoolwithtag" title="PVOID ExAllocatePoolWithTag(&#10;  [in] __drv_strictTypeMatch(__drv_typeExpr)POOL_TYPE PoolType,&#10;  [in] SIZE_T                                         NumberOfBytes,&#10;  [in] ULONG                                          Tag&#10;);">ExAllocatePoolWithTag</a> and
<a href="exfreepool" title="void ExFreePool(&#10;  a&#10;);">ExFreePool</a> functions). However, a driver that
tracks state internally about its memory usage might supply
<em>Allocate</em> and
<em>Free</em> functions to
<strong>NdisInitializeNPagedLookasideList</strong>.</p>

<p>Callers of
<strong>NdisInitializeNPagedLookasideList</strong> must be running at IRQL &lt;= DISPATCH_LEVEL, but are usually
running at PASSIVE_LEVEL.</p>

<h2 id="see-also">See also</h2>

<p><a href="exallocatepoolwithtag" title="PVOID ExAllocatePoolWithTag(&#10;  [in] __drv_strictTypeMatch(__drv_typeExpr)POOL_TYPE PoolType,&#10;  [in] SIZE_T                                         NumberOfBytes,&#10;  [in] ULONG                                          Tag&#10;);">ExAllocatePoolWithTag</a></p>

<p><a href="exfreepool" title="void ExFreePool(&#10;  a&#10;);">ExFreePool</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/eprocess">NPAGED_LOOKASIDE_LIST</a></p>

<p><a href="ndisallocatefromnpagedlookasidelist" title="void NdisAllocateFromNPagedLookasideList(&#10;  _L&#10;);">NdisAllocateFromNPagedLookasideList</a></p>

<p><a href="ndisdeletenpagedlookasidelist" title="void NdisDeleteNPagedLookasideList(&#10;  _L&#10;);">NdisDeleteNPagedLookasideList</a></p>

<p><a href="ndisfreetonpagedlookasidelist" title="void NdisFreeToNPagedLookasideList(&#10;  _L,&#10;  _E&#10;);">NdisFreeToNPagedLookasideList</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisinitializenpagedlookasidelist">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ndis/nf-ndis-ndisinitializenpagedlookasidelist.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
