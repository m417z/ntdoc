<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DXVAHDDDI_STREAM_DATA - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DXVAHDDDI_STREAM_DATA - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DXVAHDDDI_STREAM_DATA - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3dumddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _DXVAHDDDI_STREAM_DATA {
  [in] BOOL              Enable;
  [in] <a href="uint" title="typedef unsigned int UINT;">UINT</a>              OutputIndex;
  [in] <a href="uint" title="typedef unsigned int UINT;">UINT</a>              InputFrameOrField;
  [in] <a href="uint" title="typedef unsigned int UINT;">UINT</a>              PastFrames;
  [in] <a href="uint" title="typedef unsigned int UINT;">UINT</a>              FutureFrames;
  [in] <a href="dxvahdddi_surface" title="typedef struct _DXVAHDDDI_SURFACE {&#10;  [in] HANDLE hResource;&#10;  [in] UINT   SubResourceIndex;&#10;} DXVAHDDDI_SURFACE;">DXVAHDDDI_SURFACE</a> *pPastSurfaces;
  [in] <a href="dxvahdddi_surface" title="typedef struct _DXVAHDDDI_SURFACE {&#10;  [in] HANDLE hResource;&#10;  [in] UINT   SubResourceIndex;&#10;} DXVAHDDDI_SURFACE;">DXVAHDDDI_SURFACE</a> InputSurface;
  [in] <a href="dxvahdddi_surface" title="typedef struct _DXVAHDDDI_SURFACE {&#10;  [in] HANDLE hResource;&#10;  [in] UINT   SubResourceIndex;&#10;} DXVAHDDDI_SURFACE;">DXVAHDDDI_SURFACE</a> *pFutureSurfaces;
} DXVAHDDDI_STREAM_DATA;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/ns-d3dumddi-_dxvahdddi_stream_data">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/dxvahdddi_stream_data.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-d3dumddi-_dxvahdddi_stream_data)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_dxvahdddi_stream_data-structure">_DXVAHDDDI_STREAM_DATA structure</h1>

<h2 id="description">Description</h2>

<p>The DXVAHDDDI_STREAM_DATA structure describes an input stream that is processed.</p>

<h2 id="members">Members</h2>

<h3 id="enable-in"><code>Enable</code> [in]</h3>

<p>A Boolean value that specifies whether the input stream is enabled. The number of input streams that the runtime enables must not be more than the number, which the driver sets in the <strong>MaxStreamStates</strong> member of the <a href="dxvahdddi_vpdevcaps" title="typedef struct _DXVAHDDDI_VPDEVCAPS {&#10;  [in]  UINT        Reserved;&#10;  [out] UINT        DeviceCaps;&#10;  [out] UINT        FeatureCaps;&#10;  [out] UINT        FilterCaps;&#10;  [out] UINT        InputFormatCaps;&#10;  [out] D3DDDI_POOL InputPool;&#10;  [out] UINT        OutputFormatCount;&#10;  [out] UINT        InputFormatCount;&#10;  [out] UINT        VideoProcessorCount;&#10;  [out] UINT        MaxInputStreams;&#10;  [out] UINT        MaxStreamStates;&#10;} DXVAHDDDI_VPDEVCAPS;">DXVAHDDDI_VPDEVCAPS</a> structure.</p>

<h3 id="outputindex-in"><code>OutputIndex</code> [in]</h3>

<p>A zero-based cyclic frame index number of the output frames that are composed.</p>

<h3 id="inputframeorfield-in"><code>InputFrameOrField</code> [in]</h3>

<p>A zero-based frame number of the input frames or fields that are processed.</p>

<h3 id="pastframes-in"><code>PastFrames</code> [in]</h3>

<p>The number of past reference frames. This number must not be more than the number that the driver sets in the <strong>PastFrames</strong> member of the <a href="dxvahdddi_vpcaps" title="typedef struct _DXVAHDDDI_VPCAPS {&#10;  [out] GUID VPGuid;&#10;  [out] UINT PastFrames;&#10;  [out] UINT FutureFrames;&#10;  [out] UINT ProcessorCaps;&#10;  [out] UINT ITelecineCaps;&#10;  [out] UINT CustomRateCount;&#10;} DXVAHDDDI_VPCAPS;">DXVAHDDDI_VPCAPS</a> structure.</p>

<h3 id="futureframes-in"><code>FutureFrames</code> [in]</h3>

<p>The number of future reference frames. This number must not be more than the number that the driver sets in the <strong>FutureFrames</strong> member of the <a href="dxvahdddi_vpcaps" title="typedef struct _DXVAHDDDI_VPCAPS {&#10;  [out] GUID VPGuid;&#10;  [out] UINT PastFrames;&#10;  [out] UINT FutureFrames;&#10;  [out] UINT ProcessorCaps;&#10;  [out] UINT ITelecineCaps;&#10;  [out] UINT CustomRateCount;&#10;} DXVAHDDDI_VPCAPS;">DXVAHDDDI_VPCAPS</a> structure.</p>

<h3 id="ppastsurfaces-in"><code>pPastSurfaces</code> [in]</h3>

<p>An array of <a href="dxvahdddi_surface" title="typedef struct _DXVAHDDDI_SURFACE {&#10;  [in] HANDLE hResource;&#10;  [in] UINT   SubResourceIndex;&#10;} DXVAHDDDI_SURFACE;">DXVAHDDDI_SURFACE</a> structures that describe the past reference surfaces.</p>

<h3 id="inputsurface-in"><code>InputSurface</code> [in]</h3>

<p>A <a href="dxvahdddi_surface" title="typedef struct _DXVAHDDDI_SURFACE {&#10;  [in] HANDLE hResource;&#10;  [in] UINT   SubResourceIndex;&#10;} DXVAHDDDI_SURFACE;">DXVAHDDDI_SURFACE</a> structure that describes the input surface.</p>

<h3 id="pfuturesurfaces-in"><code>pFutureSurfaces</code> [in]</h3>

<p>An array of <a href="dxvahdddi_surface" title="typedef struct _DXVAHDDDI_SURFACE {&#10;  [in] HANDLE hResource;&#10;  [in] UINT   SubResourceIndex;&#10;} DXVAHDDDI_SURFACE;">DXVAHDDDI_SURFACE</a> structures that describe the future reference surfaces.</p>

<h2 id="remarks">Remarks</h2>

<p>The driver must allocate the surfaces that the <strong>pPastSurfaces</strong>, <strong>InputSurface</strong>, and <strong>pFutureSurfaces</strong> members specify in the pool type, which the driver sets in the <strong>InputPool</strong> member of the <a href="dxvahdddi_vpdevcaps" title="typedef struct _DXVAHDDDI_VPDEVCAPS {&#10;  [in]  UINT        Reserved;&#10;  [out] UINT        DeviceCaps;&#10;  [out] UINT        FeatureCaps;&#10;  [out] UINT        FilterCaps;&#10;  [out] UINT        InputFormatCaps;&#10;  [out] D3DDDI_POOL InputPool;&#10;  [out] UINT        OutputFormatCount;&#10;  [out] UINT        InputFormatCount;&#10;  [out] UINT        VideoProcessorCount;&#10;  [out] UINT        MaxInputStreams;&#10;  [out] UINT        MaxStreamStates;&#10;} DXVAHDDDI_VPDEVCAPS;">DXVAHDDDI_VPDEVCAPS</a> structure, and with one of the following surface types; otherwise, the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_dxvahd_videoprocessblthd">VideoProcessBltHD</a> function returns an error.</p>

<ul>
<li>A video surface that is created with the DXVAHD_SURFACE_TYPE_VIDEO_INPUT or DXVAHD_SURFACE_TYPE_VIDEO_INPUT_PRIVATE type.</li>
<li>A decode render target surface that is created with the DXVA2_VideoDecodeRenderTarget type.</li>
<li>An off-screen plain surface.</li>
</ul>

<p>The <strong>OutputIndex</strong> member is a zero-based cyclic number that indicates the frame index number of the output. The driver uses this output-index information to perform the video processing in a certain pattern or cycle, especially when the driver performs deinterlacing, frame-rate conversion, and inverse telecine. For example, with the following output-index pattern, the driver performs the indicated video processing:</p>

<ul>
<li><p>Progressive format at normal and half rate:</p>

<p>OutputIndex = 0, 0,...</p></li>
<li><p>Progressive format at 2/1 custom rate (double frame-rate conversion, OutputFrames=2):</p>

<p>OutputIndex = 0, 1, 0, 1,...</p></li>
<li><p>Interlaced format at normal rate:</p>

<p>OutputIndex = 0, 1, 0, 1,... (0: first field, 1: second field)</p></li>
<li><p>Interlaced format at half rate:</p>

<p>OutputIndex = 0, 0,... (for example, first and second fields are blended to one frame)</p></li>
<li><p>Interlaced at 4/5 custom rate (3:2 inverse telecine, OutputFrames=4):</p>

<p>OutputIndex = 0, 1, 2, 3, 0, 1, 2, 3,... (0:A, 1:B, 2:C, 3:D film frame)</p></li>
</ul>

<p>The <strong>InputFrameOrField</strong> member is a zero-based number that indicates the frame or the field number of the input surface. For example, with the following input-frame-or-field number, the driver can perform the indicated video processing:</p>

<ul>
<li><p>Progressive format and interlaced format at normal rate:</p>

<p>InputFrameOrField = 0, 1, 2,...</p></li>
<li><p>Progressive format and interlaced format at half rate:</p>

<p>InputFrameOrField = 0, 2, 4,...</p></li>
<li><p>Interlaced format at 4/5 custom rate (3:2 inverse telecine, OutputFrames=4 and InputFrameOrField=10):</p>

<p>InputFrameOrField = 0, 0, 0, 0, 10, 10, 10, 10, 20, 20, 20, 20,...</p></li>
<li><p>Interlaced format at 4/15 custom rate (8:7 inverse telecine, OutputFrames=2 and InputFrameOrField=15):</p>

<p>InputFrameOrField = 0, 0, 15, 15, 30, 30,...</p></li>
</ul>

<p>The application should cause both the <strong>OutputIndex</strong> and <strong>InputFrameOrField</strong> members to reset when either the frame format or the output rate is changed so that the driver can reset its internal processing state. For more information about changing frame format or output rate, see <a href="dxvahdddi_stream_state_frame_format_data" title="typedef struct _DXVAHDDDI_STREAM_STATE_FRAME_FORMAT_DATA {&#10;  [in] DXVAHDDDI_FRAME_FORMAT FrameFormat;&#10;} DXVAHDDDI_STREAM_STATE_FRAME_FORMAT_DATA;">DXVAHDDDI_STREAM_STATE_FRAME_FORMAT_DATA</a> and <a href="dxvahdddi_stream_state_output_rate_data" title="typedef struct _DXVAHDDDI_STREAM_STATE_OUTPUT_RATE_DATA {&#10;  [in] BOOL                  RepeatFrame;&#10;  [in] DXVAHDDDI_OUTPUT_RATE OutputRate;&#10;  [in] DXVAHDDDI_RATIONAL    CustomRate;&#10;} DXVAHDDDI_STREAM_STATE_OUTPUT_RATE_DATA;">DXVAHDDDI_STREAM_STATE_OUTPUT_RATE_DATA</a>.</p>

<p>However, if the driver switches between normal and half rate (values from the <a href="dxvahdddi_output_rate" title="typedef enum _DXVAHDDDI_OUTPUT_RATE {&#10;  DXVAHDDDI_OUTPUT_RATE_NORMAL,&#10;  DXVAHDDDI_OUTPUT_RATE_HALF,&#10;  DXVAHDDDI_OUTPUT_RATE_CUSTOM&#10;} DXVAHDDDI_OUTPUT_RATE;">DXVAHDDDI_OUTPUT_RATE</a> enumeration), the driver should not require the reset.</p>

<p>If both the <strong>OutputIndex</strong> and <strong>InputFrameOrField</strong> members remain unchanged at the next process time, the driver determines that the frame is unchanged (for example, paused) in the stream processing. Therefore, the driver can optimize the frame by using cached data.</p>

<p>The driver should fallback to a less intensive video processing method as less reference frames are provided. The driver should fallback to Bob de-interlacing when no reference samples are provided.</p>

<p>An application can provide less past and future reference frames than the reference frames that the driver requests. For example, an application can provide less reference frames in the following conditions:</p>

<ul>
<li>At the beginning or at the end of the frame sequence.</li>
<li>Transition between progressive and interlaced.</li>
<li>Normal or half rate progressive stream.</li>
<li>Sub-video streams that do not require high quality de-interlacing.</li>
<li>While throttling the reference frames to recover from frame drops and to keep up the frame rate.</li>
<li>Frame dropping from the input (for example, frame drops in the decoder).</li>
</ul>

<p>Both the past and the future reference frames are provided in the <strong>pPastSurfaces</strong> and <strong>pFutureSurfaces</strong> array members in temporal order from older to newer frames continuously. For example, the order of the elements in the arrays are as shown in the following example:</p>

<p><strong>pPastSurfaces</strong> [] = {..., T-3, T-2, T-1}</p>

<p><strong>InputSurface</strong> = T</p>

<p><strong>pFutureSurfaces</strong> [] = {T+1, T+2, T+3,...}</p>

<p>The input and reference frames change location from the future location to the past location through the current location as the <strong>OutputIndex</strong> and <strong>InputFrameOrField</strong> members increment. For example, the input surface changes as the <strong>OutputIndex</strong> and <strong>InputFrameOrField</strong> increment when the driver performs the following video processing:</p>

<ul>
<li><p>Progressive format at normal rate:</p>

<p>OutputIndex = 0, 0, 0,...</p>

<p>InputFrameOrField = 0, 1, 2,...</p>

<p>InputSurface = T, T+1, T+2,...</p></li>
<li><p>Interlaced format at normal rate:</p>

<p>OutputIndex = 0, 1, 0, 1, 0, 1,...</p>

<p>InputFrameOrField = 0, 1, 2, 3, 4, 5,...</p>

<p>InputSurface = T, T, T+1, T+1, T+2, T+2,...</p></li>
<li><p>Interlaced format at half rate:</p>

<p>OutputIndex = 0, 0, 0,...</p>

<p>InputFrameOrField = 0, 2, 4,...</p>

<p>InputSurface = T, T+1, T+2,...</p></li>
<li><p>Interlaced format at 4/5 custom rate (3:2 inverse telecine, OutputFrames=4 and InputFrameOrField=10):</p>

<p>OutputIndex = 0, 1, 2, 3, 0, 1, 2, 3, 0, 1, 2, 3,...</p>

<p>InputFrameOrField = 0, 0, 0, 0, 10, 10, 10, 10, 20, 20, 20, 20,...</p>

<p>InputSurface = T, T, T, T, T+5, T+5, T+5, T+5, T+10, T+10, T+10, T+10,...</p></li>
<li><p>Interlaced format at 4/15 custom rate (8:7 inverse telecine, OutputFrames=2 and InputFrameOrField=15):</p>

<p>OutputIndex = 0, 1, 0, 1, 0, 1,...</p>

<p>InputFrameOrField = 0, 0, 15, 15, 30, 30,...</p>

<p>InputSurface = T, T, T+7, T+7, T+15, T+15,... (note that T+7 frame contains 15th field)</p></li>
</ul>

<p>The following pseudo-code example shows the interaction between the application (APP) and the driver (DRV) while performing Inverse Telecine (IVTC) on 3:2 pull-down, 30 frames (60 fields) per second interlaced content:</p>

<div class="codehilite">
<pre><span></span><code><span class="o">-</span><span class="p">[</span><span class="mi">60</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">60</span><span class="n">p</span><span class="p">]</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">VPGuid</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">past</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">future</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="n">frames</span><span class="p">.</span>
<span class="nl">APP</span><span class="p">:</span><span class="w"> </span><span class="n">Creates</span><span class="w"> </span><span class="n">VPGuid</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">video</span><span class="w"> </span><span class="n">processor</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">rate</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">normal</span><span class="p">.</span>
<span class="nl">APP</span><span class="p">:</span><span class="w"> </span><span class="n">Decodes</span><span class="w"> </span><span class="n">frame</span><span class="w"> </span><span class="mi">0</span><span class="p">(</span><span class="n">A0</span><span class="o">:</span><span class="n">A1</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">(</span><span class="n">A0</span><span class="o">:</span><span class="n">B1</span><span class="p">),</span><span class="w"> </span><span class="mi">2</span><span class="p">(</span><span class="n">B0</span><span class="o">:</span><span class="n">C1</span><span class="p">),</span><span class="w"> </span><span class="mi">3</span><span class="p">(</span><span class="n">C0</span><span class="o">:</span><span class="n">C1</span><span class="p">),</span><span class="w"> </span><span class="mi">4</span><span class="p">(</span><span class="n">D0</span><span class="o">:</span><span class="n">D1</span><span class="p">),</span><span class="w"> </span><span class="p">...</span>
<span class="w">    </span><span class="o">:</span>
<span class="o">-</span><span class="n">APP</span><span class="o">:</span><span class="w"> </span><span class="n">VPBltHD</span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span><span class="n">InputFrameOrField</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">OutputIndex</span><span class="o">=</span><span class="mi">0</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">Bob</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">(</span><span class="n">A0</span><span class="p">)</span><span class="o">+</span><span class="mi">0</span><span class="p">(</span><span class="n">A1</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="err">&#39;</span>
<span class="o">-</span><span class="n">APP</span><span class="o">:</span><span class="w"> </span><span class="n">VPBltHD</span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span><span class="n">InputFrameOrField</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">OutputIndex</span><span class="o">=</span><span class="mi">1</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">Weave</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">(</span><span class="n">A1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">(</span><span class="n">A0</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span>
<span class="o">-</span><span class="n">APP</span><span class="o">:</span><span class="w"> </span><span class="n">VPBltHD</span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">),</span><span class="w"> </span><span class="n">InputFrameOrField</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">OutputIndex</span><span class="o">=</span><span class="mi">0</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">Weave</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">(</span><span class="n">A0</span><span class="p">)</span><span class="o">+</span><span class="mi">0</span><span class="p">(</span><span class="n">A1</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span>
<span class="o">-</span><span class="n">APP</span><span class="o">:</span><span class="w"> </span><span class="n">VPBltHD</span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">),</span><span class="w"> </span><span class="n">InputFrameOrField</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">OutputIndex</span><span class="o">=</span><span class="mi">1</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">Weave</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">(</span><span class="n">B1</span><span class="p">)</span><span class="o">+</span><span class="mi">2</span><span class="p">(</span><span class="n">B0</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">B</span>
<span class="o">-</span><span class="n">APP</span><span class="o">:</span><span class="w"> </span><span class="n">VPBltHD</span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">),</span><span class="w"> </span><span class="n">InputFrameOrField</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">OutputIndex</span><span class="o">=</span><span class="mi">0</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">Weave</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">(</span><span class="n">B0</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">(</span><span class="n">B1</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">B</span>
<span class="o">-</span><span class="n">APP</span><span class="o">:</span><span class="w"> </span><span class="n">VPBltHD</span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">),</span><span class="w"> </span><span class="n">InputFrameOrField</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">OutputIndex</span><span class="o">=</span><span class="mi">1</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">Weave</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">(</span><span class="n">C1</span><span class="p">)</span><span class="o">+</span><span class="mi">3</span><span class="p">(</span><span class="n">C0</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">C</span>
<span class="o">-</span><span class="n">APP</span><span class="o">:</span><span class="w"> </span><span class="n">VPBltHD</span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">),</span><span class="w"> </span><span class="n">InputFrameOrField</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">OutputIndex</span><span class="o">=</span><span class="mi">0</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">Weave</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">(</span><span class="n">C0</span><span class="p">)</span><span class="o">+</span><span class="mi">3</span><span class="p">(</span><span class="n">C1</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">C</span>
<span class="o">-</span><span class="n">APP</span><span class="o">:</span><span class="w"> </span><span class="n">VPBltHD</span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">),</span><span class="w"> </span><span class="n">InputFrameOrField</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="n">OutputIndex</span><span class="o">=</span><span class="mi">1</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">Weave</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">(</span><span class="n">C1</span><span class="p">)</span><span class="o">+</span><span class="mi">3</span><span class="p">(</span><span class="n">C0</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">C</span>
<span class="o">-</span><span class="n">APP</span><span class="o">:</span><span class="w"> </span><span class="n">VPBltHD</span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">),</span><span class="w"> </span><span class="n">InputFrameOrField</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="n">OutputIndex</span><span class="o">=</span><span class="mi">0</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">Weave</span><span class="w"> </span><span class="p">[</span><span class="mi">4</span><span class="p">(</span><span class="n">D0</span><span class="p">)</span><span class="o">+</span><span class="mi">4</span><span class="p">(</span><span class="n">D1</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">D</span>
<span class="o">-</span><span class="n">APP</span><span class="o">:</span><span class="w"> </span><span class="n">VPBltHD</span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">),</span><span class="w"> </span><span class="n">InputFrameOrField</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="n">OutputIndex</span><span class="o">=</span><span class="mi">1</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">Weave</span><span class="w"> </span><span class="p">[</span><span class="mi">4</span><span class="p">(</span><span class="n">D1</span><span class="p">)</span><span class="o">+</span><span class="mi">4</span><span class="p">(</span><span class="n">D0</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">D</span>
<span class="w">    </span><span class="o">:</span>
<span class="o">-</span><span class="p">[</span><span class="mi">60</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">24</span><span class="n">p</span><span class="p">]</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">VPGuid</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">future</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="n">frames</span><span class="p">.</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">Exports</span><span class="w"> </span><span class="n">CustomRate</span><span class="o">=</span><span class="mi">4</span><span class="o">/</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">OutputFrames</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">InputInterlaced</span><span class="o">=</span><span class="n">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">InputFramesOrFields</span><span class="o">=</span><span class="mf">10.</span>
<span class="nl">APP</span><span class="p">:</span><span class="w"> </span><span class="n">Creates</span><span class="w"> </span><span class="n">VPGuid</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="n">video</span><span class="w"> </span><span class="n">processor</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">rate</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">4</span><span class="o">/</span><span class="mi">5</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">rate</span><span class="p">.</span>
<span class="o">-</span><span class="n">APP</span><span class="o">:</span><span class="w"> </span><span class="n">VPBltHD</span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">),</span><span class="w"> </span><span class="n">InputFrameOrField</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">OutputIndex</span><span class="o">=</span><span class="mi">0</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">Bob</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">(</span><span class="n">A0</span><span class="p">)</span><span class="o">+</span><span class="mi">0</span><span class="p">(</span><span class="n">A1</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="err">&#39;</span><span class="w"> </span><span class="p">(</span><span class="n">playback</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">speed</span><span class="w"> </span><span class="n">mode</span><span class="p">)</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">Weave</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">(</span><span class="n">A0</span><span class="p">)</span><span class="o">+</span><span class="mi">0</span><span class="p">(</span><span class="n">A1</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="p">(</span><span class="n">quality</span><span class="w"> </span><span class="n">mode</span><span class="p">)</span>
<span class="o">-</span><span class="n">APP</span><span class="o">:</span><span class="w"> </span><span class="n">VPBltHD</span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">),</span><span class="w"> </span><span class="n">InputFrameOrField</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">OutputIndex</span><span class="o">=</span><span class="mi">1</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">Weave</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">(</span><span class="n">B1</span><span class="p">)</span><span class="o">+</span><span class="mi">2</span><span class="p">(</span><span class="n">B0</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">B</span>
<span class="o">-</span><span class="n">APP</span><span class="o">:</span><span class="w"> </span><span class="n">VPBltHD</span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">),</span><span class="w"> </span><span class="n">InputFrameOrField</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">OutputIndex</span><span class="o">=</span><span class="mi">2</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">Weave</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">(</span><span class="n">C0</span><span class="p">)</span><span class="o">+</span><span class="mi">3</span><span class="p">(</span><span class="n">C1</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">C</span>
<span class="o">-</span><span class="n">APP</span><span class="o">:</span><span class="w"> </span><span class="n">VPBltHD</span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">),</span><span class="w"> </span><span class="n">InputFrameOrField</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">OutputIndex</span><span class="o">=</span><span class="mi">3</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">Weave</span><span class="w"> </span><span class="p">[</span><span class="mi">4</span><span class="p">(</span><span class="n">D0</span><span class="p">)</span><span class="o">+</span><span class="mi">4</span><span class="p">(</span><span class="n">D1</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">D</span>
<span class="o">-</span><span class="n">APP</span><span class="o">:</span><span class="w"> </span><span class="n">VPBltHD</span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">),</span><span class="w"> </span><span class="n">InputFrameOrField</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">OutputIndex</span><span class="o">=</span><span class="mi">0</span>
<span class="nl">DRV</span><span class="p">:</span><span class="w"> </span><span class="n">Weave</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">(</span><span class="n">A0</span><span class="p">)</span><span class="o">+</span><span class="mi">0</span><span class="p">(</span><span class="n">A1</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span>
<span class="w">    </span><span class="o">:</span>
</code></pre>
</div>

<h2 id="see-also">See also</h2>

<p><a href="dxvahdddi_output_rate" title="typedef enum _DXVAHDDDI_OUTPUT_RATE {&#10;  DXVAHDDDI_OUTPUT_RATE_NORMAL,&#10;  DXVAHDDDI_OUTPUT_RATE_HALF,&#10;  DXVAHDDDI_OUTPUT_RATE_CUSTOM&#10;} DXVAHDDDI_OUTPUT_RATE;">DXVAHDDDI_OUTPUT_RATE</a></p>

<p><a href="dxvahdddi_stream_state_frame_format_data" title="typedef struct _DXVAHDDDI_STREAM_STATE_FRAME_FORMAT_DATA {&#10;  [in] DXVAHDDDI_FRAME_FORMAT FrameFormat;&#10;} DXVAHDDDI_STREAM_STATE_FRAME_FORMAT_DATA;">DXVAHDDDI_STREAM_STATE_FRAME_FORMAT_DATA</a></p>

<p><a href="dxvahdddi_stream_state_output_rate_data" title="typedef struct _DXVAHDDDI_STREAM_STATE_OUTPUT_RATE_DATA {&#10;  [in] BOOL                  RepeatFrame;&#10;  [in] DXVAHDDDI_OUTPUT_RATE OutputRate;&#10;  [in] DXVAHDDDI_RATIONAL    CustomRate;&#10;} DXVAHDDDI_STREAM_STATE_OUTPUT_RATE_DATA;">DXVAHDDDI_STREAM_STATE_OUTPUT_RATE_DATA</a></p>

<p><a href="dxvahdddi_surface" title="typedef struct _DXVAHDDDI_SURFACE {&#10;  [in] HANDLE hResource;&#10;  [in] UINT   SubResourceIndex;&#10;} DXVAHDDDI_SURFACE;">DXVAHDDDI_SURFACE</a></p>

<p><a href="dxvahdddi_vpcaps" title="typedef struct _DXVAHDDDI_VPCAPS {&#10;  [out] GUID VPGuid;&#10;  [out] UINT PastFrames;&#10;  [out] UINT FutureFrames;&#10;  [out] UINT ProcessorCaps;&#10;  [out] UINT ITelecineCaps;&#10;  [out] UINT CustomRateCount;&#10;} DXVAHDDDI_VPCAPS;">DXVAHDDDI_VPCAPS</a></p>

<p><a href="dxvahdddi_vpdevcaps" title="typedef struct _DXVAHDDDI_VPDEVCAPS {&#10;  [in]  UINT        Reserved;&#10;  [out] UINT        DeviceCaps;&#10;  [out] UINT        FeatureCaps;&#10;  [out] UINT        FilterCaps;&#10;  [out] UINT        InputFormatCaps;&#10;  [out] D3DDDI_POOL InputPool;&#10;  [out] UINT        OutputFormatCount;&#10;  [out] UINT        InputFormatCount;&#10;  [out] UINT        VideoProcessorCount;&#10;  [out] UINT        MaxInputStreams;&#10;  [out] UINT        MaxStreamStates;&#10;} DXVAHDDDI_VPDEVCAPS;">DXVAHDDDI_VPDEVCAPS</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_dxvahd_videoprocessblthd">VideoProcessBltHD</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/ns-d3dumddi-_dxvahdddi_stream_data">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3dumddi/ns-d3dumddi-_dxvahdddi_stream_data.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
