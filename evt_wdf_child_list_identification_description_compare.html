<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="EVT_WDF_CHILD_LIST_IDENTIFICATION_DESCRIPTION_COMPARE - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>EVT_WDF_CHILD_LIST_IDENTIFICATION_DESCRIPTION_COMPARE - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            EVT_WDF_CHILD_LIST_IDENTIFICATION_DESCRIPTION_COMPARE - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdfchildlist.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">EVT_WDF_CHILD_LIST_IDENTIFICATION_DESCRIPTION_COMPARE EvtWdfChildListIdentificationDescriptionCompare;

BOOLEAN EvtWdfChildListIdentificationDescriptionCompare(
  [in] WDFCHILDLIST ChildList,
  [in] <a href="wdf_child_identification_description_header" title="typedef struct _WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER {&#10;  ULONG IdentificationDescriptionSize;&#10;} WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER, *PWDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER;">PWDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER</a> FirstIdentificationDescription,
  [in] <a href="wdf_child_identification_description_header" title="typedef struct _WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER {&#10;  ULONG IdentificationDescriptionSize;&#10;} WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER, *PWDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER;">PWDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER</a> SecondIdentificationDescription
)
{...}</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfchildlist/nc-wdfchildlist-evt_wdf_child_list_identification_description_compare">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/evt_wdf_child_list_identification_description_compare.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-wdfchildlist-evt_wdf_child_list_identification_description_compare)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>EVT_WDF_CHILD_LIST_IDENTIFICATION_DESCRIPTION_COMPARE callback function</h1>
<h2>Description</h2>
<p>[Applies to KMDF only]</p>
<p>A driver's <em>EvtChildListIdentificationDescriptionCompare</em> event callback function compares one child identification description with another.</p>
<h2>Parameters</h2>
<h3><code>ChildList</code> [in]</h3>
<p>A handle to a framework child-list object.</p>
<h3><code>FirstIdentificationDescription</code> [in]</h3>
<p>A pointer to a <a href="wdf_child_identification_description_header" title="typedef struct _WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER {&#10;  ULONG IdentificationDescriptionSize;&#10;} WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER, *PWDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER;">WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER</a> structure that identifies the one child identification description.</p>
<h3><code>SecondIdentificationDescription</code> [in]</h3>
<p>A pointer to a <a href="wdf_child_identification_description_header" title="typedef struct _WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER {&#10;  ULONG IdentificationDescriptionSize;&#10;} WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER, *PWDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER;">WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER</a> structure that identifies another child identification description.</p>
<h2>Return value</h2>
<p>The <em>EvtChildListIdentificationDescriptionCompare</em> callback function must return <strong>TRUE</strong> if the two child identification descriptions match. Otherwise, this function must return <strong>FALSE</strong>.</p>
<h2>Remarks</h2>
<p>If a bus driver is using <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/wdf/dynamic-enumeration">dynamic enumeration</a>, it can register an <em>EvtChildListIdentificationDescriptionCompare</em> callback function by calling <a href="wdffdoinitsetdefaultchildlistconfig" title="VOID WdfFdoInitSetDefaultChildListConfig(&#10;  [in, out]      PWDFDEVICE_INIT        DeviceInit,&#10;  [in]           PWDF_CHILD_LIST_CONFIG Config,&#10;  [in, optional] PWDF_OBJECT_ATTRIBUTES DefaultChildListAttributes&#10;);">WdfFdoInitSetDefaultChildListConfig</a> or <a href="wdfchildlistcreate" title="NTSTATUS WdfChildListCreate(&#10;  [in]           WDFDEVICE              Device,&#10;  [in]           PWDF_CHILD_LIST_CONFIG Config,&#10;  [in, optional] PWDF_OBJECT_ATTRIBUTES ChildListAttributes,&#10;  [out]          WDFCHILDLIST           *ChildList&#10;);">WdfChildListCreate</a>. The driver can also register a second, special-case <em>EvtChildListIdentificationDescriptionCompare</em> callback function when it calls <a href="wdfchildlistretrievenextdevice" title="NTSTATUS WdfChildListRetrieveNextDevice(&#10;  [in]      WDFCHILDLIST             ChildList,&#10;  [in]      PWDF_CHILD_LIST_ITERATOR Iterator,&#10;  [out]     WDFDEVICE                *Device,&#10;  [in, out] PWDF_CHILD_RETRIEVE_INFO Info&#10;);">WdfChildListRetrieveNextDevice</a>.</p>
<p>The framework compares two identification descriptions when it must determine if both descriptions identify the same device.</p>
<p>The <em>EvtChildListIdentificationDescriptionCompare</em> callback function must compare the contents of two identification descriptions and return <strong>TRUE</strong> if they match. A driver must supply this callback function if the framework cannot call <a href="rtlcomparememory" title="_Check_return_&#10;NTSYSAPI&#10;SIZE_T&#10;NTAPI&#10;RtlCompareMemory(&#10;    _In_ const VOID* Source1,&#10;    _In_ const VOID* Source2,&#10;    _In_ SIZE_T Length&#10;    );">RtlCompareMemory</a> to compare the identification descriptions. (The framework cannot call <strong><a href="rtlcomparememory" title="_Check_return_&#10;NTSYSAPI&#10;SIZE_T&#10;NTAPI&#10;RtlCompareMemory(&#10;    _In_ const VOID* Source1,&#10;    _In_ const VOID* Source2,&#10;    _In_ SIZE_T Length&#10;    );">RtlCompareMemory</a></strong> if the descriptions contain pointers to additional memory.)</p>
<p>If your driver does not provide an <em>EvtChildListIdentificationDescriptionCompare</em> callback function, the framework compares identification descriptions by calling <a href="rtlcomparememory" title="_Check_return_&#10;NTSYSAPI&#10;SIZE_T&#10;NTAPI&#10;RtlCompareMemory(&#10;    _In_ const VOID* Source1,&#10;    _In_ const VOID* Source2,&#10;    _In_ SIZE_T Length&#10;    );">RtlCompareMemory</a>.</p>
<p>The following steps describe a possible scenario:</p>
<ol>
<li>The driver calls <a href="wdfchildlistretrieveaddressdescription" title="NTSTATUS WdfChildListRetrieveAddressDescription(&#10;  [in]      WDFCHILDLIST                                 ChildList,&#10;  [in]      PWDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER IdentificationDescription,&#10;  [in, out] PWDF_CHILD_ADDRESS_DESCRIPTION_HEADER        AddressDescription&#10;);">WdfChildListRetrieveAddressDescription</a> to obtain the address description that is associated with the framework's copy of an identification description, which is stored in a child list.</li>
<li>The framework traverses the child list. To determine if a child's identification description matches the one that the driver specified when it called <a href="wdfchildlistretrieveaddressdescription" title="NTSTATUS WdfChildListRetrieveAddressDescription(&#10;  [in]      WDFCHILDLIST                                 ChildList,&#10;  [in]      PWDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER IdentificationDescription,&#10;  [in, out] PWDF_CHILD_ADDRESS_DESCRIPTION_HEADER        AddressDescription&#10;);">WdfChildListRetrieveAddressDescription</a>, the framework calls either the <em>EvtChildListIdentificationDescriptionCompare</em> callback function (if it exists) or <a href="rtlcomparememory" title="_Check_return_&#10;NTSYSAPI&#10;SIZE_T&#10;NTAPI&#10;RtlCompareMemory(&#10;    _In_ const VOID* Source1,&#10;    _In_ const VOID* Source2,&#10;    _In_ SIZE_T Length&#10;    );">RtlCompareMemory</a>.</li>
<li>If the two identification descriptions match (and the comparison returns <strong>TRUE</strong>), the framework stops traversing the list.</li>
<li>The framework copies the address description into memory that the driver supplied when it called <a href="wdfchildlistretrieveaddressdescription" title="NTSTATUS WdfChildListRetrieveAddressDescription(&#10;  [in]      WDFCHILDLIST                                 ChildList,&#10;  [in]      PWDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER IdentificationDescription,&#10;  [in, out] PWDF_CHILD_ADDRESS_DESCRIPTION_HEADER        AddressDescription&#10;);">WdfChildListRetrieveAddressDescription</a>.</li>
</ol>
<p>The framework can use <a href="rtlcomparememory" title="_Check_return_&#10;NTSYSAPI&#10;SIZE_T&#10;NTAPI&#10;RtlCompareMemory(&#10;    _In_ const VOID* Source1,&#10;    _In_ const VOID* Source2,&#10;    _In_ SIZE_T Length&#10;    );">RtlCompareMemory</a> to compare identification descriptions, if each description consists of a single structure with a predetermined size that is specified by the <strong>IdentificationDescriptionSize</strong> member of the <a href="wdf_child_identification_description_header" title="typedef struct _WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER {&#10;  ULONG IdentificationDescriptionSize;&#10;} WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER, *PWDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER;">WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER</a> structure. However, sometimes the description must also contain additional information that is stored in dynamically allocated memory. In this case, you will typically define a description structure so that a member points to the dynamically allocated memory, and your driver must provide an <em>EvtChildListIdentificationDescriptionCompare</em> callback function.</p>
<p>This callback function determines if two identification descriptions represent the same device. The callback function might not have to compare all of the structure members to make that determination. For example, suppose that an identification description contains a serial number and a set of hardware identifiers, as follows:</p>
<pre><code>typedef struct _PDO_IDENTIFICATION_DESCRIPTION {
  <a href="wdf_child_identification_description_header" title="typedef struct _WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER {&#10;  ULONG IdentificationDescriptionSize;&#10;} WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER, *PWDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER;">WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER</a> Header;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> DeviceSerialNumber;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> CchHardwareIds;
  PWCHAR HardwareIds;
} PDO_IDENTIFICATION_DESCRIPTION, *PPDO_IDENTIFICATION_DESCRIPTION;
</code></pre>
<p>In this case, the <em>EvtChildListIdentificationDescriptionCompare</em> callback function probably has to compare only the <strong>DeviceSerialNumber</strong> members to determine if two descriptions represent the same device.</p>
<p>If your driver calls <a href="wdfchildlistretrievenextdevice" title="NTSTATUS WdfChildListRetrieveNextDevice(&#10;  [in]      WDFCHILDLIST             ChildList,&#10;  [in]      PWDF_CHILD_LIST_ITERATOR Iterator,&#10;  [out]     WDFDEVICE                *Device,&#10;  [in, out] PWDF_CHILD_RETRIEVE_INFO Info&#10;);">WdfChildListRetrieveNextDevice</a> to traverse a device list, you can provide an additional <em>EvtChildListIdentificationDescriptionCompare</em> callback function that the framework uses when looking for the next description to retrieve. The framework looks for child devices that match driver-supplied <a href="wdf_retrieve_child_flags" title="typedef enum _WDF_RETRIEVE_CHILD_FLAGS {&#10;  WdfRetrieveUnspecified = 0x0000,&#10;  WdfRetrievePresentChildren = 0x0001,&#10;  WdfRetrieveMissingChildren = 0x0002,&#10;  WdfRetrievePendingChildren = 0x0004,&#10;  WdfRetrieveAddedChildren = (WdfRetrievePresentChildren | WdfRetrievePendingChildren),&#10;  WdfRetrieveAllChildren = (WdfRetrievePresentChildren | WdfRetrievePendingChildren | WdfRetrieveMissingChildren)&#10;} WDF_RETRIEVE_CHILD_FLAGS;">WDF_RETRIEVE_CHILD_FLAGS</a>-typed flags. If a driver provides a special <em>EvtChildListIdentificationDescriptionCompare</em> callback function, the framework uses the callback function to refine the search. If the driver does not supply a special <em>EvtChildListIdentificationDescriptionCompare</em> callback function, the framework does <em>not</em> call <a href="rtlcomparememory" title="_Check_return_&#10;NTSYSAPI&#10;SIZE_T&#10;NTAPI&#10;RtlCompareMemory(&#10;    _In_ const VOID* Source1,&#10;    _In_ const VOID* Source2,&#10;    _In_ SIZE_T Length&#10;    );">RtlCompareMemory</a>--it simply returns each child device that matches the specified flags.</p>
<p>The only <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfchildlist/">framework child-list object method</a> that a driver's <em>EvtChildListIdentificationDescriptionCompare</em> callback function can call is <a href="wdfchildlistgetdevice" title="WDFDEVICE WdfChildListGetDevice(&#10;  [in] WDFCHILDLIST ChildList&#10;);">WdfChildListGetDevice</a>.</p>
<p>The framework acquires an internal child-list object lock before calling the <em>EvtChildListIdentificationDescriptionCompare</em><em>EvtChildListIdentificationDescriptionCompare</em> callback function. The callback function must only perform operations that are related to the compare operation, such as calling framework memory object methods and accessing object context space. It must not call methods that access other drivers.</p>
<p>For more information about dynamic enumeration, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/wdf/enumerating-the-devices-on-a-bus">Enumerating the Devices on a Bus</a>.</p>
<h2>See also</h2>
<p><a href="rtlcomparememory" title="_Check_return_&#10;NTSYSAPI&#10;SIZE_T&#10;NTAPI&#10;RtlCompareMemory(&#10;    _In_ const VOID* Source1,&#10;    _In_ const VOID* Source2,&#10;    _In_ SIZE_T Length&#10;    );">RtlCompareMemory</a></p>
<p><a href="wdf_child_identification_description_header" title="typedef struct _WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER {&#10;  ULONG IdentificationDescriptionSize;&#10;} WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER, *PWDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER;">WDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER</a></p>
<p><a href="wdf_retrieve_child_flags" title="typedef enum _WDF_RETRIEVE_CHILD_FLAGS {&#10;  WdfRetrieveUnspecified = 0x0000,&#10;  WdfRetrievePresentChildren = 0x0001,&#10;  WdfRetrieveMissingChildren = 0x0002,&#10;  WdfRetrievePendingChildren = 0x0004,&#10;  WdfRetrieveAddedChildren = (WdfRetrievePresentChildren | WdfRetrievePendingChildren),&#10;  WdfRetrieveAllChildren = (WdfRetrievePresentChildren | WdfRetrievePendingChildren | WdfRetrieveMissingChildren)&#10;} WDF_RETRIEVE_CHILD_FLAGS;">WDF_RETRIEVE_CHILD_FLAGS</a></p>
<p><a href="wdfchildlistcreate" title="NTSTATUS WdfChildListCreate(&#10;  [in]           WDFDEVICE              Device,&#10;  [in]           PWDF_CHILD_LIST_CONFIG Config,&#10;  [in, optional] PWDF_OBJECT_ATTRIBUTES ChildListAttributes,&#10;  [out]          WDFCHILDLIST           *ChildList&#10;);">WdfChildListCreate</a></p>
<p><a href="wdfchildlistgetdevice" title="WDFDEVICE WdfChildListGetDevice(&#10;  [in] WDFCHILDLIST ChildList&#10;);">WdfChildListGetDevice</a></p>
<p><a href="wdfchildlistretrieveaddressdescription" title="NTSTATUS WdfChildListRetrieveAddressDescription(&#10;  [in]      WDFCHILDLIST                                 ChildList,&#10;  [in]      PWDF_CHILD_IDENTIFICATION_DESCRIPTION_HEADER IdentificationDescription,&#10;  [in, out] PWDF_CHILD_ADDRESS_DESCRIPTION_HEADER        AddressDescription&#10;);">WdfChildListRetrieveAddressDescription</a></p>
<p><a href="wdfchildlistretrievenextdevice" title="NTSTATUS WdfChildListRetrieveNextDevice(&#10;  [in]      WDFCHILDLIST             ChildList,&#10;  [in]      PWDF_CHILD_LIST_ITERATOR Iterator,&#10;  [out]     WDFDEVICE                *Device,&#10;  [in, out] PWDF_CHILD_RETRIEVE_INFO Info&#10;);">WdfChildListRetrieveNextDevice</a></p>
<p><a href="wdffdoinitsetdefaultchildlistconfig" title="VOID WdfFdoInitSetDefaultChildListConfig(&#10;  [in, out]      PWDFDEVICE_INIT        DeviceInit,&#10;  [in]           PWDF_CHILD_LIST_CONFIG Config,&#10;  [in, optional] PWDF_OBJECT_ATTRIBUTES DefaultChildListAttributes&#10;);">WdfFdoInitSetDefaultChildListConfig</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfchildlist/nc-wdfchildlist-evt_wdf_child_list_identification_description_compare">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdfchildlist/nc-wdfchildlist-evt_wdf_child_list_identification_description_compare.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
