<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DEVICE_OBJECT - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DEVICE_OBJECT - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DEVICE_OBJECT - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _DEVICE_OBJECT {
  <a href="cshort" title="typedef short CSHORT;">CSHORT</a>                   Type;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>                   Size;
  <a href="long" title="typedef long LONG;">LONG</a>                     ReferenceCount;
  <a href="driver_object" title="typedef struct _DRIVER_OBJECT {&#10;  CSHORT             Type;&#10;  CSHORT             Size;&#10;  PDEVICE_OBJECT     DeviceObject;&#10;  ULONG              Flags;&#10;  PVOID              DriverStart;&#10;  ULONG              DriverSize;&#10;  PVOID              DriverSection;&#10;  PDRIVER_EXTENSION  DriverExtension;&#10;  UNICODE_STRING     DriverName;&#10;  PUNICODE_STRING    HardwareDatabase;&#10;  PFAST_IO_DISPATCH  FastIoDispatch;&#10;  PDRIVER_INITIALIZE DriverInit;&#10;  PDRIVER_STARTIO    DriverStartIo;&#10;  PDRIVER_UNLOAD     DriverUnload;&#10;  PDRIVER_DISPATCH   MajorFunction[IRP_MJ_MAXIMUM_FUNCTION + 1];&#10;} DRIVER_OBJECT, *PDRIVER_OBJECT;">struct _DRIVER_OBJECT</a>    *DriverObject;
  struct _DEVICE_OBJECT    *NextDevice;
  struct _DEVICE_OBJECT    *AttachedDevice;
  <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">struct _IRP</a>              *CurrentIrp;
  PIO_TIMER                Timer;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                    Flags;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                    Characteristics;
  __volatile <a href="vpb" title="typedef struct _VPB {&#10;  CSHORT                Type;&#10;  CSHORT                Size;&#10;  USHORT                Flags;&#10;  USHORT                VolumeLabelLength;&#10;  struct _DEVICE_OBJECT *DeviceObject;&#10;  struct _DEVICE_OBJECT *RealDevice;&#10;  ULONG                 SerialNumber;&#10;  ULONG                 ReferenceCount;&#10;  WCHAR                 VolumeLabel[MAXIMUM_VOLUME_LABEL_LENGTH / sizeof(WCHAR)];&#10;} VPB, *PVPB;">PVPB</a>          Vpb;
  PVOID                    DeviceExtension;
  DEVICE_TYPE              DeviceType;
  <a href="cchar" title="typedef char CCHAR;">CCHAR</a>                    StackSize;
  union {
    <a href="list_entry" title="typedef struct _LIST_ENTRY LIST_ENTRY, *PLIST_ENTRY;">LIST_ENTRY</a>         ListEntry;
    <a href="wait_context_block" title="typedef struct _WAIT_CONTEXT_BLOCK {&#10;  union {&#10;    KDEVICE_QUEUE_ENTRY WaitQueueEntry;&#10;    struct {&#10;      LIST_ENTRY DmaWaitEntry;&#10;      ULONG      NumberOfChannels;&#10;      ULONG      SyncCallback : 1;&#10;      ULONG      DmaContext : 1;&#10;      ULONG      ZeroMapRegisters : 1;&#10;      ULONG      Reserved : 9;&#10;      ULONG      NumberOfRemapPages : 20;&#10;    };&#10;  };&#10;  PDRIVER_CONTROL DeviceRoutine;&#10;  PVOID           DeviceContext;&#10;  ULONG           NumberOfMapRegisters;&#10;  PVOID           DeviceObject;&#10;  PVOID           CurrentIrp;&#10;  PKDPC           BufferChainingDpc;&#10;} WAIT_CONTEXT_BLOCK, *PWAIT_CONTEXT_BLOCK;">WAIT_CONTEXT_BLOCK</a> Wcb;
  } Queue;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                    AlignmentRequirement;
  KDEVICE_QUEUE            DeviceQueue;
  KDPC                     Dpc;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                    ActiveThreadCount;
  PSECURITY_DESCRIPTOR     SecurityDescriptor;
  KEVENT                   DeviceLock;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>                   SectorSize;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>                   Spare1;
  struct _DEVOBJ_EXTENSION *DeviceObjectExtension;
  PVOID                    Reserved;
} DEVICE_OBJECT, *PDEVICE_OBJECT;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_device_object">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<p>This structure is <a rel="noopener" target="_blank" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/wdm/ns-wdm-_device_object">documented in Windows Driver Kit</a>.</p>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/device_object.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-wdm-_device_object)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>DEVICE_OBJECT</strong> structure is used by the operating system to represent a device object. A device object represents a logical, virtual, or physical device for which a driver handles I/O requests.</p>

<h2 id="members">Members</h2>

<h3 id="type"><code>Type</code></h3>

<p>Used by the operating system to indicate that an object is a device object. For device objects, the value of this member is 3. This is a read-only member.</p>

<h3 id="size"><code>Size</code></h3>

<p>Specifies the size, in bytes, of the device object. This size includes the driver-specified device extension pointed to by the <strong>DeviceExtension</strong> member, but does not include the opaque device object extension pointed to by the <strong>DeviceObjectExtension</strong> member. <strong>Size</strong> is a read-only member.</p>

<h3 id="referencecount"><code>ReferenceCount</code></h3>

<p>Used by the I/O manager to track the number of open handles for the device that are associated with the device object. This allows the I/O manager to avoid unloading a driver when there are outstanding handles for the driver's device(s). This is a read-only member.</p>

<h3 id="driverobject"><code>DriverObject</code></h3>

<p>A pointer to the driver object (<a href="driver_object" title="typedef struct _DRIVER_OBJECT {&#10;  CSHORT             Type;&#10;  CSHORT             Size;&#10;  PDEVICE_OBJECT     DeviceObject;&#10;  ULONG              Flags;&#10;  PVOID              DriverStart;&#10;  ULONG              DriverSize;&#10;  PVOID              DriverSection;&#10;  PDRIVER_EXTENSION  DriverExtension;&#10;  UNICODE_STRING     DriverName;&#10;  PUNICODE_STRING    HardwareDatabase;&#10;  PFAST_IO_DISPATCH  FastIoDispatch;&#10;  PDRIVER_INITIALIZE DriverInit;&#10;  PDRIVER_STARTIO    DriverStartIo;&#10;  PDRIVER_UNLOAD     DriverUnload;&#10;  PDRIVER_DISPATCH   MajorFunction[IRP_MJ_MAXIMUM_FUNCTION + 1];&#10;} DRIVER_OBJECT, *PDRIVER_OBJECT;">DRIVER_OBJECT</a>), that represents the loaded image of the driver that was input to the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/storage/driverentry-of-ide-controller-minidriver">DriverEntry</a> and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-driver_add_device">AddDevice</a> routines. This member is set by the I/O manager upon a successful call to <a href="iocreatedevice" title="NTSTATUS IoCreateDevice(&#10;  [in]           PDRIVER_OBJECT  DriverObject,&#10;  [in]           ULONG           DeviceExtensionSize,&#10;  [in, optional] PUNICODE_STRING DeviceName,&#10;  [in]           DEVICE_TYPE     DeviceType,&#10;  [in]           ULONG           DeviceCharacteristics,&#10;  [in]           BOOLEAN         Exclusive,&#10;  [out]          PDEVICE_OBJECT  *DeviceObject&#10;);">IoCreateDevice</a> or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdmsec/nf-wdmsec-wdmlibiocreatedevicesecure">IoCreateDeviceSecure</a>. This is a read-only member.</p>

<h3 id="nextdevice"><code>NextDevice</code></h3>

<p>A pointer to the next device object, if any, that was created by the same driver. The I/O manager updates this list at each successful call to <a href="iocreatedevice" title="NTSTATUS IoCreateDevice(&#10;  [in]           PDRIVER_OBJECT  DriverObject,&#10;  [in]           ULONG           DeviceExtensionSize,&#10;  [in, optional] PUNICODE_STRING DeviceName,&#10;  [in]           DEVICE_TYPE     DeviceType,&#10;  [in]           ULONG           DeviceCharacteristics,&#10;  [in]           BOOLEAN         Exclusive,&#10;  [out]          PDEVICE_OBJECT  *DeviceObject&#10;);">IoCreateDevice</a> or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdmsec/nf-wdmsec-wdmlibiocreatedevicesecure">IoCreateDeviceSecure</a>.</p>

<p>A non- Plug and Play (PnP) driver that is being unloaded must traverse ("walk") the list of its device objects and delete them. A PnP driver does not have to walk this list of device objects. Instead, PnP drivers perform their cleanup during the device removal PnP operation (<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mn-remove-device">IRP_MN_REMOVE_DEVICE</a>).</p>

<p>A driver that recreates its device objects dynamically also uses this member. This is a read/write member.</p>

<h3 id="attacheddevice"><code>AttachedDevice</code></h3>

<p>A pointer to the attached device object. If there is no attached device object, this member is <strong>NULL</strong>. The device object that is pointed to by the <strong>AttachedDevice</strong> member typically is the device object of a filter driver, which intercepts I/O requests originally targeted to the device represent by the device object. For more information, see the <a href="ioattachdevice" title="NTSTATUS IoAttachDevice(&#10;  [in]  PDEVICE_OBJECT  SourceDevice,&#10;  [in]  PUNICODE_STRING TargetDevice,&#10;  [out] PDEVICE_OBJECT  *AttachedDevice&#10;);">IoAttachDevice</a> and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/mmcreatemdl">IoAttachDeviceByPointer</a> topics. This is an opaque member.</p>

<h3 id="currentirp"><code>CurrentIrp</code></h3>

<p>A pointer to the current <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a> if the driver has a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-driver_startio">StartIo</a> routine whose entry point was set in the driver object and if the driver is currently processing <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a>(s). Otherwise, this member is <strong>NULL</strong>. For more information, see the <a href="iostartpacket" title="VOID IoStartPacket(&#10;  [in]           PDEVICE_OBJECT DeviceObject,&#10;  [in]           PIRP           Irp,&#10;  [in, optional] PULONG         Key,&#10;  [in, optional] PDRIVER_CANCEL CancelFunction&#10;);">IoStartPacket</a> and <a href="iostartnextpacket" title="VOID IoStartNextPacket(&#10;  [in] PDEVICE_OBJECT DeviceObject,&#10;  [in] BOOLEAN        Cancelable&#10;);">IoStartNextPacket</a> topics. This is a read-only member.</p>

<h3 id="timer"><code>Timer</code></h3>

<p>A pointer to a timer object. This allows the I/O manager to call a driver-supplied timer routine every second. For more information, see <a href="ioinitializetimer" title="NTSTATUS IoInitializeTimer(&#10;  [in]           PDEVICE_OBJECT         DeviceObject,&#10;  [in]           PIO_TIMER_ROUTINE      TimerRoutine,&#10;  [in, optional] __drv_aliasesMem PVOID Context&#10;);">IoInitializeTimer</a>. This is a read/write member.</p>

<h3 id="flags"><code>Flags</code></h3>

<p>Device drivers perform a bitwise <strong>OR</strong> operation with this member in their newly created device objects by using one or more of the following system-defined values.</p>

<p>For more information about how to set the <strong>Flags</strong> member, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/initializing-a-device-object">Initializing a Device Object</a>.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td><a href="do_verify_volume" title="#define DO_VERIFY_VOLUME 0x00000002">DO_VERIFY_VOLUME</a> (0x00000002)</td>
  <td>Removable-media drivers set this flag while they process transfer requests. Such drivers should also check for this flag in the target for a transfer request before they transfer any data. For more information, see the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/supporting-removable-media">Supporting Removable Media</a> topic.</td>
</tr>
<tr>
  <td><a href="do_buffered_io" title="#define DO_BUFFERED_IO 0x00000004">DO_BUFFERED_IO</a> (0x00000004)</td>
  <td>Specifies the type of buffering that is used by the I/O manager for I/O requests that are sent to the device stack. Higher-level drivers OR this member with the same value as the next-lower driver in the stack, except possibly for highest-level drivers.</td>
</tr>
<tr>
  <td><a href="do_exclusive" title="#define DO_EXCLUSIVE 0x00000008">DO_EXCLUSIVE</a> (0x00000008)</td>
  <td>Indicates that the driver services an exclusive device, such as a video, serial, parallel, or sound device. WDM drivers must not set this flag. For more information, see the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/specifying-exclusive-access-to-device-objects">Specifying Exclusive Access to Device Objects</a> topic.</td>
</tr>
<tr>
  <td><a href="do_direct_io" title="#define DO_DIRECT_IO 0x00000010">DO_DIRECT_IO</a> (0x00000010)</td>
  <td>See <a href="do_buffered_io" title="#define DO_BUFFERED_IO 0x00000004">DO_BUFFERED_IO</a>.</td>
</tr>
<tr>
  <td><a href="do_map_io_buffer" title="#define DO_MAP_IO_BUFFER 0x00000020">DO_MAP_IO_BUFFER</a> (0x00000020)</td>
  <td>This flag is no longer used. Drivers should not set this flag.</td>
</tr>
<tr>
  <td><a href="do_device_initializing" title="#define DO_DEVICE_INITIALIZING 0x00000080">DO_DEVICE_INITIALIZING</a> (0x00000080)</td>
  <td>The I/O manager sets this flag when it creates the device object. A device function driver or filter driver clears the flag in its <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-driver_add_device">AddDevice</a> routine, after it: (1) Attaches the device object to the device stack. (2) Establishes the device power state. (3) Performs a bitwise OR operation on the member with one of the power flags (if it is necessary). The Plug and Play (PnP) manager checks that the flag is clear after the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-driver_add_device">AddDevice</a> routine returns.</td>
</tr>
<tr>
  <td><a href="do_shutdown_registered" title="#define DO_SHUTDOWN_REGISTERED 0x00000800">DO_SHUTDOWN_REGISTERED</a> (0x00000800)</td>
  <td>Used by the I/O manager to indicate that a driver has registered the device object for shutdown notifications. This flag should not be used by drivers.</td>
</tr>
<tr>
  <td><a href="do_bus_enumerated_device" title="#define DO_BUS_ENUMERATED_DEVICE 0x00001000">DO_BUS_ENUMERATED_DEVICE</a> (0x00001000)</td>
  <td>The operating system sets this flag in each physical device object (PDO). Drivers must not modify this flag.</td>
</tr>
<tr>
  <td><a href="do_power_pagable" title="#define DO_POWER_PAGABLE 0x00002000">DO_POWER_PAGABLE</a> (0x00002000)</td>
  <td>Pageable drivers that are compatible with Microsoft Windows 2000 and later versions of Windows, are not part of the paging path, and do not require inrush current must set this flag. The system calls such drivers at IRQL = PASSIVE_LEVEL. Drivers cannot set both this flag and <a href="do_power_inrush" title="#define DO_POWER_INRUSH 0x00004000">DO_POWER_INRUSH</a>. All drivers for WDM, Microsoft Windows 98, and Windows Millennium Edition must set <a href="do_power_pagable" title="#define DO_POWER_PAGABLE 0x00002000">DO_POWER_PAGABLE</a>.</td>
</tr>
<tr>
  <td><a href="do_power_inrush" title="#define DO_POWER_INRUSH 0x00004000">DO_POWER_INRUSH</a> (0x00004000)</td>
  <td>Drivers of devices that require inrush current when the device is turned on must set this flag. A driver cannot set both this flag and <a href="do_power_pagable" title="#define DO_POWER_PAGABLE 0x00002000">DO_POWER_PAGABLE</a>.</td>
</tr>
<tr>
  <td><a href="do_device_to_be_reset" title="#define DO_DEVICE_TO_BE_RESET 0x04000000">DO_DEVICE_TO_BE_RESET</a> (0x04000000)</td>
  <td>The I/O manager sets this flag as a signal for the bus driver to reset the device. Other drivers should not use this flag.</td>
</tr>
<tr>
  <td><a href="do_dax_volume" title="#define DO_DAX_VOLUME 0x10000000">DO_DAX_VOLUME</a> (0x10000000)</td>
  <td>Indicates that a volume is a DAX volume.</td>
</tr>
</tbody>
</table>

<h3 id="characteristics"><code>Characteristics</code></h3>

<p>Specifies one or more system-defined constants, combined with a bitwise OR operation, that provide additional information about the driver's device. These constants include the following:</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td><a href="file_autogenerated_device_name" title="#define FILE_AUTOGENERATED_DEVICE_NAME 0x00000080">FILE_AUTOGENERATED_DEVICE_NAME</a></td>
  <td>Directs the I/O manager to generate a name for the device, instead of the caller specifying a <em>DeviceName</em> when it calls this routine. The I/O manager makes sure that the name is unique. This characteristic is typically specified by a PnP bus driver to generate a name for a physical device object (PDO) for a child device on the same bus.</td>
</tr>
<tr>
  <td><a href="file_characteristic_pnp_device" title="#define FILE_CHARACTERISTIC_PNP_DEVICE 0x00000800">FILE_CHARACTERISTIC_PNP_DEVICE</a></td>
  <td>Indicates that the device object is part of a Plug and Play (PnP) stack. This characteristic is required if a bus driver (or bus filter driver) registers WMI support for a device object that has not yet received the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mn-start-device">IRP_MN_START_DEVICE</a> request. <a href="file_characteristic_pnp_device" title="#define FILE_CHARACTERISTIC_PNP_DEVICE 0x00000800">FILE_CHARACTERISTIC_PNP_DEVICE</a> is also required if a function or filter driver registers for WMI <em>before</em> attaching to its device stack.</td>
</tr>
<tr>
  <td><a href="file_characteristic_ts_device" title="#define FILE_CHARACTERISTIC_TS_DEVICE 0x00001000">FILE_CHARACTERISTIC_TS_DEVICE</a></td>
  <td>Indicates that the device object is part of a Terminal Services device stack. Drivers should not set this characteristic.</td>
</tr>
<tr>
  <td><a href="file_characteristic_webdav_device" title="#define FILE_CHARACTERISTIC_WEBDAV_DEVICE 0x00002000">FILE_CHARACTERISTIC_WEBDAV_DEVICE</a></td>
  <td>Indicates that a Web-based Distributed Authoring and Versioning (WebDAV) file system is mounted on the device. Drivers should not set this characteristic.</td>
</tr>
<tr>
  <td><a href="file_device_is_mounted" title="#define FILE_DEVICE_IS_MOUNTED 0x00000020">FILE_DEVICE_IS_MOUNTED</a></td>
  <td>Indicates that a file system is mounted on the device. Drivers should not set this characteristic.</td>
</tr>
<tr>
  <td><a href="file_device_secure_open" title="#define FILE_DEVICE_SECURE_OPEN 0x00000100">FILE_DEVICE_SECURE_OPEN</a></td>
  <td>Directs the I/O manager to apply the security descriptor of the device object to relative opens and trailing file name opens for the device. For more information, see the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/controlling-device-namespace-access">Controlling Device Namespace Access</a> topic.</td>
</tr>
<tr>
  <td><a href="file_floppy_diskette" title="#define FILE_FLOPPY_DISKETTE 0x00000004">FILE_FLOPPY_DISKETTE</a></td>
  <td>Indicates that the device is a floppy disk device.</td>
</tr>
<tr>
  <td><a href="file_read_only_device" title="#define FILE_READ_ONLY_DEVICE 0x00000002">FILE_READ_ONLY_DEVICE</a></td>
  <td>Indicates that the device cannot be written to.</td>
</tr>
<tr>
  <td><a href="file_remote_device" title="#define FILE_REMOTE_DEVICE 0x00000010">FILE_REMOTE_DEVICE</a></td>
  <td>Indicates that the device is remote.</td>
</tr>
<tr>
  <td><a href="file_removable_media" title="#define FILE_REMOVABLE_MEDIA 0x00000001">FILE_REMOVABLE_MEDIA</a></td>
  <td>Indicates that the storage device supports removable media. Notice that this characteristic indicates removable <em>media</em>, not a removable <em>device</em>. For example, drivers for JAZ drive devices should specify this characteristic, but drivers for PCMCIA flash disks should not.</td>
</tr>
<tr>
  <td><a href="file_virtual_volume" title="#define FILE_VIRTUAL_VOLUME 0x00000040">FILE_VIRTUAL_VOLUME</a></td>
  <td>Indicates that the volume is virtual. Drivers should not set this characteristic.</td>
</tr>
<tr>
  <td><a href="file_write_once_media" title="#define FILE_WRITE_ONCE_MEDIA 0x00000008">FILE_WRITE_ONCE_MEDIA</a></td>
  <td>Indicates that the device supports write-once media. Drivers do not set this member directly. For more information about how to set device characteristics, see the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/specifying-device-characteristics">Specifying Device Characteristics</a> topic.</td>
</tr>
<tr>
  <td><a href="file_characteristic_csv" title="#define FILE_CHARACTERISTIC_CSV 0x00010000">FILE_CHARACTERISTIC_CSV</a></td>
  <td>Indicates that the device is a Cluster Shared Volume (CSV).</td>
</tr>
<tr>
  <td><a href="file_device_allow_appcontainer_traversal" title="#define FILE_DEVICE_ALLOW_APPCONTAINER_TRAVERSAL 0x00020000">FILE_DEVICE_ALLOW_APPCONTAINER_TRAVERSAL</a></td>
  <td>The IO Manager normally performs a full security check for traverse access on every file open when the client is an app container. Setting of this flag bypasses this enforced traverse access check if the client token already has traverse privileges.</td>
</tr>
<tr>
  <td><a href="file_portable_device" title="#define FILE_PORTABLE_DEVICE 0x00040000">FILE_PORTABLE_DEVICE</a></td>
  <td>Indicates that the underlying stack considers the device portable. This is used by the storage stack and means that the device is not in the local machine container and is not on a fixed bus type.</td>
</tr>
</tbody>
</table>

<h3 id="vpb"><code>Vpb</code></h3>

<p>A pointer to the volume parameter block (<a href="vpb" title="typedef struct _VPB {&#10;  CSHORT                Type;&#10;  CSHORT                Size;&#10;  USHORT                Flags;&#10;  USHORT                VolumeLabelLength;&#10;  struct _DEVICE_OBJECT *DeviceObject;&#10;  struct _DEVICE_OBJECT *RealDevice;&#10;  ULONG                 SerialNumber;&#10;  ULONG                 ReferenceCount;&#10;  WCHAR                 VolumeLabel[MAXIMUM_VOLUME_LABEL_LENGTH / sizeof(WCHAR)];&#10;} VPB, *PVPB;">VPB</a>) that is associated with the device object. For file system drivers, the <a href="vpb" title="typedef struct _VPB {&#10;  CSHORT                Type;&#10;  CSHORT                Size;&#10;  USHORT                Flags;&#10;  USHORT                VolumeLabelLength;&#10;  struct _DEVICE_OBJECT *DeviceObject;&#10;  struct _DEVICE_OBJECT *RealDevice;&#10;  ULONG                 SerialNumber;&#10;  ULONG                 ReferenceCount;&#10;  WCHAR                 VolumeLabel[MAXIMUM_VOLUME_LABEL_LENGTH / sizeof(WCHAR)];&#10;} VPB, *PVPB;">VPB</a> can provide a connection to any unnamed logical device object that represents an instance of a mounted volume. This is an opaque member.</p>

<h3 id="deviceextension"><code>DeviceExtension</code></h3>

<p>A pointer to the device extension. The structure and contents of the device extension are driver-defined. The size is driver-determined, specified in the driver's call to <a href="iocreatedevice" title="NTSTATUS IoCreateDevice(&#10;  [in]           PDRIVER_OBJECT  DriverObject,&#10;  [in]           ULONG           DeviceExtensionSize,&#10;  [in, optional] PUNICODE_STRING DeviceName,&#10;  [in]           DEVICE_TYPE     DeviceType,&#10;  [in]           ULONG           DeviceCharacteristics,&#10;  [in]           BOOLEAN         Exclusive,&#10;  [out]          PDEVICE_OBJECT  *DeviceObject&#10;);">IoCreateDevice</a> or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdmsec/nf-wdmsec-wdmlibiocreatedevicesecure">IoCreateDeviceSecure</a>. For more information about device extensions, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/device-extensions">Device Extensions</a>. This is a read-only member. However, the object that the member points to can be modified by the driver.</p>

<h3 id="devicetype"><code>DeviceType</code></h3>

<p>Set by <a href="iocreatedevice" title="NTSTATUS IoCreateDevice(&#10;  [in]           PDRIVER_OBJECT  DriverObject,&#10;  [in]           ULONG           DeviceExtensionSize,&#10;  [in, optional] PUNICODE_STRING DeviceName,&#10;  [in]           DEVICE_TYPE     DeviceType,&#10;  [in]           ULONG           DeviceCharacteristics,&#10;  [in]           BOOLEAN         Exclusive,&#10;  [out]          PDEVICE_OBJECT  *DeviceObject&#10;);">IoCreateDevice</a> and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdmsec/nf-wdmsec-wdmlibiocreatedevicesecure">IoCreateDeviceSecure</a> using the value that is specified for that routine's <em>DeviceType</em> parameter. For more information, see the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/specifying-device-types">Specifying Device Types</a> topic.</p>

<h3 id="stacksize"><code>StackSize</code></h3>

<p>Specifies the minimum number of stack locations in IRPs to be sent to this driver. <a href="iocreatedevice" title="NTSTATUS IoCreateDevice(&#10;  [in]           PDRIVER_OBJECT  DriverObject,&#10;  [in]           ULONG           DeviceExtensionSize,&#10;  [in, optional] PUNICODE_STRING DeviceName,&#10;  [in]           DEVICE_TYPE     DeviceType,&#10;  [in]           ULONG           DeviceCharacteristics,&#10;  [in]           BOOLEAN         Exclusive,&#10;  [out]          PDEVICE_OBJECT  *DeviceObject&#10;);">IoCreateDevice</a> and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdmsec/nf-wdmsec-wdmlibiocreatedevicesecure">IoCreateDeviceSecure</a> set this member to 1 in newly created device objects; lowest-level drivers can therefore ignore this member. The I/O manager automatically sets the <strong>StackSize</strong> member in a higher-level driver's device object to the appropriate value if the driver calls <a href="ioattachdevice" title="NTSTATUS IoAttachDevice(&#10;  [in]  PDEVICE_OBJECT  SourceDevice,&#10;  [in]  PUNICODE_STRING TargetDevice,&#10;  [out] PDEVICE_OBJECT  *AttachedDevice&#10;);">IoAttachDevice</a> or <a href="ioattachdevicetodevicestack" title="PDEVICE_OBJECT IoAttachDeviceToDeviceStack(&#10;  [in] PDEVICE_OBJECT SourceDevice,&#10;  [in] PDEVICE_OBJECT TargetDevice&#10;);">IoAttachDeviceToDeviceStack</a>. Only a higher-level driver that chains itself over another driver with <strong><a href="iogetdeviceobjectpointer" title="NTSTATUS IoGetDeviceObjectPointer(&#10;  [in]  PUNICODE_STRING ObjectName,&#10;  [in]  ACCESS_MASK     DesiredAccess,&#10;  [out] PFILE_OBJECT    *FileObject,&#10;  [out] PDEVICE_OBJECT  *DeviceObject&#10;);">IoGetDeviceObjectPointer</a></strong> must explicitly set the value of <strong>StackSize</strong> in its own device object(s) to 1 + the <strong>StackSize</strong> value of the next-lower driver's device object.</p>

<h3 id="queue"><code>Queue</code></h3>

<p>Used internally by the I/O manager to queue the device object when it is required. This is an opaque member.</p>

<h3 id="queuelistentry"><code>Queue.ListEntry</code></h3>

<p>A <a href="list_entry" title="typedef struct _LIST_ENTRY LIST_ENTRY, *PLIST_ENTRY;">LIST_ENTRY</a> structure that contains forward and backward pointers for a doubly linked list.</p>

<h3 id="queuewcb"><code>Queue.Wcb</code></h3>

<p>Device context information used by I/O manager.</p>

<h3 id="alignmentrequirement"><code>AlignmentRequirement</code></h3>

<p>Specifies the device's address alignment requirement for data transfers. The value must be one of the FILE_<em>XXX</em>_ALIGNMENT values that are defined in Wdm.h. For more information, see the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/initializing-a-device-object">Initializing a Device Object</a>, <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-pget_dma_alignment">GetDmaAlignment</a>, and <a href="ntqueryinformationfile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtQueryInformationFile(&#10;    _In_ HANDLE FileHandle,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _Out_writes_bytes_(Length) PVOID FileInformation,&#10;    _In_ ULONG Length,&#10;    _In_ FILE_INFORMATION_CLASS FileInformationClass&#10;    );">ZwQueryInformationFile</a> topics.</p>

<h3 id="devicequeue"><code>DeviceQueue</code></h3>

<p>The device queue object for the device object. The device queue object contains any IRPs that are waiting to be processed by the driver that is associated with the device object. For more information, see the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/driver-managed-irp-queues">Driver-Managed IRP Queues</a> topic. This is an opaque member.</p>

<h3 id="dpc"><code>Dpc</code></h3>

<p>The deferred procedure call (DPC) object for the device object. For more information, see the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/introduction-to-dpc-objects">Introduction to DPC Objects</a> topic. This is an opaque member.</p>

<h3 id="activethreadcount"><code>ActiveThreadCount</code></h3>

<p>Reserved for future use. This is an opaque member.</p>

<h3 id="securitydescriptor"><code>SecurityDescriptor</code></h3>

<p>Specifies a security descriptor (<a href="pisecurity_descriptor" title="typedef struct _SECURITY_DESCRIPTOR {&#10;  UCHAR                       Revision;&#10;  UCHAR                       Sbz1;&#10;  SECURITY_DESCRIPTOR_CONTROL Control;&#10;  PSID                        Owner;&#10;  PSID                        Group;&#10;  PACL                        Sacl;&#10;  PACL                        Dacl;&#10;} SECURITY_DESCRIPTOR, *PISECURITY_DESCRIPTOR;">SECURITY_DESCRIPTOR</a>) for the device object when the device object is created. If this member is <strong>NULL</strong>, the device object receives default security settings. This is a read-only member, although the member can be modified through the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/ff567106(v=vs.85)">ZwSetSecurityObject</a> function.</p>

<h3 id="devicelock"><code>DeviceLock</code></h3>

<p>A synchronization event object that is allocated by the I/O manager. The I/O manager obtains his event object before it dispatches a mount or mount-verify request to a file-system driver. This is an opaque member.</p>

<h3 id="sectorsize"><code>SectorSize</code></h3>

<p>If the device object does not represent a volume, this member is set to zero. If the device object represents a volume, this member specifies the volume's sector size, in bytes. The I/O manager uses this member to make sure that all read operations, write operations, and set file position operations that are issued are aligned correctly when intermediate buffering is disabled. A default system bytes-per-sector value is used when the device object is created, however, file system drivers; and more rarely, legacy and minifilter drivers, can update this value that is based on the geometry of the underlying volume hardware when a mount occurs. Other drivers should not modify this member.</p>

<h3 id="spare1"><code>Spare1</code></h3>

<p>Reserved for system use. This is an opaque member.</p>

<h3 id="deviceobjectextension"><code>DeviceObjectExtension</code></h3>

<p>A pointer to a device object extension that is used by the I/O manager and PnP manager to store information about the state of the device. This is an opaque member.</p>

<h3 id="reserved"><code>Reserved</code></h3>

<p>Reserved for system use. This is an opaque member.</p>

<h2 id="remarks">Remarks</h2>

<p>The operating system represents devices by device objects. For more information, see the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/device-objects-and-device-stacks">Device Objects and Device Stacks</a> topic.</p>

<p>Drivers create device objects by using the <a href="iocreatedevice" title="NTSTATUS IoCreateDevice(&#10;  [in]           PDRIVER_OBJECT  DriverObject,&#10;  [in]           ULONG           DeviceExtensionSize,&#10;  [in, optional] PUNICODE_STRING DeviceName,&#10;  [in]           DEVICE_TYPE     DeviceType,&#10;  [in]           ULONG           DeviceCharacteristics,&#10;  [in]           BOOLEAN         Exclusive,&#10;  [out]          PDEVICE_OBJECT  *DeviceObject&#10;);">IoCreateDevice</a> and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdmsec/nf-wdmsec-wdmlibiocreatedevicesecure">IoCreateDeviceSecure</a> routines. For more information about how to create device objects, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/creating-a-device-object">Creating a Device Object</a>.</p>

<p>A device object is partially opaque. Drivers do not set members of the device object directly, unless otherwise documented. For more information about the members that drivers can modify directly, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/initializing-a-device-object">Initializing a Device Object</a>. For information about other device object properties, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/properties-of-device-objects">Properties of Device Objects</a>.</p>

<p>Opaque members within a device object must be considered inaccessible. Drivers that have dependencies on object member locations or access to opaque members might not remain portable and interoperable with other drivers over time.</p>

<p>The system-supplied video port driver sets up the fields of the device objects that it creates on behalf of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/video-miniport-drivers-in-the-windows-2000-display-driver-model">video miniport drivers</a>.</p>

<p>The system-supplied SCSI port driver sets up the fields of the device objects that it creates on behalf of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/storage/scsi-miniport-drivers">SCSI miniport drivers</a>.</p>

<p>The system-supplied NDIS library sets up the fields of the device objects that it creates on behalf of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/windows/hardware/network/ff557068(v=vs.85)">NDIS miniport drivers</a>.</p>

<h2 id="see-also">See also</h2>

<ul>
<li><a href="driver_object" title="typedef struct _DRIVER_OBJECT {&#10;  CSHORT             Type;&#10;  CSHORT             Size;&#10;  PDEVICE_OBJECT     DeviceObject;&#10;  ULONG              Flags;&#10;  PVOID              DriverStart;&#10;  ULONG              DriverSize;&#10;  PVOID              DriverSection;&#10;  PDRIVER_EXTENSION  DriverExtension;&#10;  UNICODE_STRING     DriverName;&#10;  PUNICODE_STRING    HardwareDatabase;&#10;  PFAST_IO_DISPATCH  FastIoDispatch;&#10;  PDRIVER_INITIALIZE DriverInit;&#10;  PDRIVER_STARTIO    DriverStartIo;&#10;  PDRIVER_UNLOAD     DriverUnload;&#10;  PDRIVER_DISPATCH   MajorFunction[IRP_MJ_MAXIMUM_FUNCTION + 1];&#10;} DRIVER_OBJECT, *PDRIVER_OBJECT;">DRIVER_OBJECT</a></li>
<li><a href="ioattachdevice" title="NTSTATUS IoAttachDevice(&#10;  [in]  PDEVICE_OBJECT  SourceDevice,&#10;  [in]  PUNICODE_STRING TargetDevice,&#10;  [out] PDEVICE_OBJECT  *AttachedDevice&#10;);">IoAttachDevice</a></li>
<li><a href="ioattachdevicetodevicestack" title="PDEVICE_OBJECT IoAttachDeviceToDeviceStack(&#10;  [in] PDEVICE_OBJECT SourceDevice,&#10;  [in] PDEVICE_OBJECT TargetDevice&#10;);">IoAttachDeviceToDeviceStack</a></li>
<li><a href="iocreatedevice" title="NTSTATUS IoCreateDevice(&#10;  [in]           PDRIVER_OBJECT  DriverObject,&#10;  [in]           ULONG           DeviceExtensionSize,&#10;  [in, optional] PUNICODE_STRING DeviceName,&#10;  [in]           DEVICE_TYPE     DeviceType,&#10;  [in]           ULONG           DeviceCharacteristics,&#10;  [in]           BOOLEAN         Exclusive,&#10;  [out]          PDEVICE_OBJECT  *DeviceObject&#10;);">IoCreateDevice</a></li>
<li><a href="iodeletedevice" title="VOID IoDeleteDevice(&#10;  [in] PDEVICE_OBJECT DeviceObject&#10;);">IoDeleteDevice</a></li>
<li><a href="iogetdeviceobjectpointer" title="NTSTATUS IoGetDeviceObjectPointer(&#10;  [in]  PUNICODE_STRING ObjectName,&#10;  [in]  ACCESS_MASK     DesiredAccess,&#10;  [out] PFILE_OBJECT    *FileObject,&#10;  [out] PDEVICE_OBJECT  *DeviceObject&#10;);">IoGetDeviceObjectPointer</a></li>
</ul>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_device_object">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/ns-wdm-_device_object.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
