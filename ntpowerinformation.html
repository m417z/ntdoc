<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NtPowerInformation - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NtPowerInformation - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NtPowerInformation - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">#ifndef _NTPOAPI_H
#if (PHNT_MODE != PHNT_MODE_KERNEL)

</span><span class="ntdoc-code-intro">/**
 * The NtPowerInformation routine sets or retrieves system power information.
 *
 * \param InformationLevel Specifies the requested information level, which indicates the specific power information to be set or retrieved.
 * \param InputBuffer Optional pointer to a caller-allocated input buffer.
 * \param InputBufferLength Size, in bytes, of the buffer at InputBuffer.
 * \param OutputBuffer Optional pointer to an output buffer. The type depends on the InformationLevel requested.
 * \param OutputBufferLength Size, in bytes, of the output buffer.
 * \return Successful or errant status.
 * \sa https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/wdm/nf-wdm-ntpowerinformation
 */
</span><span class="ntdoc-code-body">NTSYSCALLAPI
<a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a>
NTAPI
NtPowerInformation(
    _In_ <a href="power_information_level" title="#define POWER_INFORMATION_LEVEL ULONG">POWER_INFORMATION_LEVEL</a> InformationLevel,
    _In_reads_bytes_opt_(InputBufferLength) PVOID InputBuffer,
    _In_ <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> InputBufferLength,
    _Out_writes_bytes_opt_(OutputBufferLength) PVOID OutputBuffer,
    _In_ <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> OutputBufferLength
    );
</span><span class="ntdoc-code-footer">
#endif
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/3d935379c6ac1f147cc4e3b25bed778f0d140c69/phnt/include/ntpoapi.h#L1325">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">#ifndef _NTZWAPI_H

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NTSYSCALLAPI
<a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a>
NTAPI
ZwPowerInformation(
    _In_ <a href="power_information_level" title="#define POWER_INFORMATION_LEVEL ULONG">POWER_INFORMATION_LEVEL</a> InformationLevel,
    _In_reads_bytes_opt_(InputBufferLength) PVOID InputBuffer,
    _In_ <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> InputBufferLength,
    _Out_writes_bytes_opt_(OutputBufferLength) PVOID OutputBuffer,
    _In_ <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> OutputBufferLength
    );
</span><span class="ntdoc-code-footer">
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/3d935379c6ac1f147cc4e3b25bed778f0d140c69/phnt/include/ntzwapi.h#L2830">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddk.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NTSYSAPI <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> ZwPowerInformation(
  [in]            <a href="power_information_level" title="#define POWER_INFORMATION_LEVEL ULONG">POWER_INFORMATION_LEVEL</a> InformationLevel,
  [in, optional]  PVOID                   InputBuffer,
  [in]            <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                   InputBufferLength,
  [out, optional] PVOID                   OutputBuffer,
  [in]            <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                   OutputBufferLength
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/nf-ntddk-zwpowerinformation">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntpoapi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">__kernel_entry NTSYSCALLAPI <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> NtPowerInformation(
  [in]            <a href="power_information_level" title="#define POWER_INFORMATION_LEVEL ULONG">POWER_INFORMATION_LEVEL</a> InformationLevel,
  [in, optional]  PVOID                   InputBuffer,
  [in]            <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                   InputBufferLength,
  [out, optional] PVOID                   OutputBuffer,
  [in]            <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                   OutputBufferLength
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntpoapi/nf-ntpoapi-ntpowerinformation">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">__kernel_entry NTSYSCALLAPI <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> NtPowerInformation(
  [in]            <a href="power_information_level" title="#define POWER_INFORMATION_LEVEL ULONG">POWER_INFORMATION_LEVEL</a> InformationLevel,
  [in, optional]  PVOID                   InputBuffer,
  [in]            <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                   InputBufferLength,
  [out, optional] PVOID                   OutputBuffer,
  [in]            <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                   OutputBufferLength
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ntpowerinformation">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<p>This function is documented in Windows Driver Kit <a rel="noopener" target="_blank" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/ntddk/nf-ntddk-zwpowerinformation">here</a>, <a rel="noopener" target="_blank" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/ntpoapi/nf-ntpoapi-ntpowerinformation">here</a>, and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/wdm/nf-wdm-ntpowerinformation">here</a>.</p>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ntpowerinformation.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ntddk-zwpowerinformation)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="zwpowerinformation-function">ZwPowerInformation function</h1>

<h2 id="description">Description</h2>

<p>The <strong>ZwPowerInformation</strong> routine sets or retrieves system power information.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="informationlevel-in"><code>InformationLevel</code> [in]</h3>

<p>Specifies the requested information level, which indicates the specific power information to be set or retrieved. Currently, the only supported <em><a href="power_information_level" title="#define POWER_INFORMATION_LEVEL ULONG">POWER_INFORMATION_LEVEL</a></em> value is <strong><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></strong>.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></strong></td>
  <td>Information represents the currently supported power capabilities of the system. Information may change as drivers are installed. For example, the installation of legacy device drivers that do not support power management might modify the capabilities of the system.</td>
</tr>
</tbody>
</table>

<h3 id="inputbuffer-in-optional"><code>InputBuffer</code> [in, optional]</h3>

<p>Pointer to a caller-allocated input buffer. This parameter must be <strong>NULL</strong>, otherwise <strong>ERROR_INVALID_PARAMETER</strong> is returned.</p>

<h3 id="inputbufferlength-in"><code>InputBufferLength</code> [in]</h3>

<p>Size, in bytes, of the buffer at <em>InputBuffer</em>. The parameter must be set to zero.</p>

<h3 id="outputbuffer-out-optional"><code>OutputBuffer</code> [out, optional]</h3>

<p>A pointer to an output buffer. The data type of this buffer depends on the information level requested in the <em>InformationLevel</em> parameter. For the <strong><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></strong> level, the only currently supported value, the <em>OutputBuffer</em>  parameter is required and should be of the <a href="power_platform_information" title="typedef struct _POWER_PLATFORM_INFORMATION {&#10;  BOOLEAN AoAc;&#10;} POWER_PLATFORM_INFORMATION, *PPOWER_PLATFORM_INFORMATION;">POWER_PLATFORM_INFORMATION</a> type.</p>

<h3 id="outputbufferlength-in"><code>OutputBufferLength</code> [in]</h3>

<p>Size, in bytes, of the output buffer. Depending on the information level requested, the buffer may be variably sized. <em><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></em>, the only currently supported value, requires a buffer that is the size of a <a href="power_platform_information" title="typedef struct _POWER_PLATFORM_INFORMATION {&#10;  BOOLEAN AoAc;&#10;} POWER_PLATFORM_INFORMATION, *PPOWER_PLATFORM_INFORMATION;">POWER_PLATFORM_INFORMATION</a> structure.</p>

<h2 id="return-value">Return value</h2>

<p>Returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if the call is successful. If the call fails, possible error codes include the following:</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>STATUS_BUFFER_TOO_SMALL</strong></td>
  <td>The output buffer is of insufficient size to contain the data being returned.</td>
</tr>
<tr>
  <td><strong>STATUS_INVALID_PARAMETER</strong></td>
  <td>The <strong><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></strong> information level, which is the only currently supported value, requires no input buffer and must contain an output buffer. The caller either supplied an input buffer or no output buffer.</td>
</tr>
<tr>
  <td><strong>STATUS_ACCESS_DENIED</strong></td>
  <td>The caller had insufficient access rights to perform the requested action.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p>NtPowerInformation and <strong>ZwPowerInformation</strong> are two versions of the same Windows Native System Services routine.</p>

<p>For calls from kernel-mode drivers, the <strong>Nt*Xxx</strong>* and <strong>Zw*Xxx</strong>* versions of a Windows Native System Services routine can behave differently in the way that they handle and interpret input parameters. For more information about the relationship between the <strong>Nt*Xxx</strong>* and <strong>Zw*Xxx</strong>* versions of a routine, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/using-nt-and-zw-versions-of-the-native-system-services-routines">Using Nt and Zw Versions of the Native System Services Routines</a>.</p>

<h4 id="examples">Examples</h4>

<p>This example illustrates a valid function call.</p>

<p><!-- CODE_MARKER --></p>

<div class="codehilite">
<pre><span></span><code><span class="n"><a href="power_platform_information" title="typedef struct _POWER_PLATFORM_INFORMATION {&#10;  BOOLEAN AoAc;&#10;} POWER_PLATFORM_INFORMATION, *PPOWER_PLATFORM_INFORMATION;">POWER_PLATFORM_INFORMATION</a></span><span class="w"> </span><span class="n">PlatformInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="n"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a></span><span class="w"> </span><span class="n">Result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NtPowerInformation</span><span class="p">(</span><span class="n"><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">PlatformInfo</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">PlatformInfo</span><span class="p">));</span>
</code></pre>
</div>

<h2 id="see-also">See also</h2>

<p><a href="power_platform_information" title="typedef struct _POWER_PLATFORM_INFORMATION {&#10;  BOOLEAN AoAc;&#10;} POWER_PLATFORM_INFORMATION, *PPOWER_PLATFORM_INFORMATION;">POWER_PLATFORM_INFORMATION</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/using-nt-and-zw-versions-of-the-native-system-services-routines">Using Nt and Zw Versions of the Native System Services Routines</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/nf-ntddk-zwpowerinformation">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddk/nf-ntddk-zwpowerinformation.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ntpoapi-ntpowerinformation)</h1>
</div>
<div class="ntdoc-description">
<h1>NtPowerInformation function (ntpoapi.h)</h1>

<h2>Description</h2>

<p>The <strong>ZwPowerInformation</strong> routine sets or retrieves system power information.</p>

<h2>Parameters</h2>

<h3><code>InformationLevel</code> [in]</h3>

<p>Specifies the requested information level, which indicates the specific power information to be set or retrieved. Currently, the only supported <em><a href="power_information_level" title="#define POWER_INFORMATION_LEVEL ULONG">POWER_INFORMATION_LEVEL</a></em> value is <strong><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></strong>.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></strong></td>
  <td>Information represents the currently supported power capabilities of the system. Information may change as drivers are installed. For example, the installation of legacy device drivers that do not support power management might modify the capabilities of the system.</td>
</tr>
</tbody>
</table>

<h3><code>InputBuffer</code> [in, optional]</h3>

<p>Pointer to a caller-allocated input buffer. This parameter must be <strong>NULL</strong>, otherwise <strong>ERROR_INVALID_PARAMETER</strong> is returned.</p>

<h3><code>InputBufferLength</code> [in]</h3>

<p>Size, in bytes, of the buffer at <em>InputBuffer</em>. The parameter must be set to zero.</p>

<h3><code>OutputBuffer</code> [out, optional]</h3>

<p>A pointer to an output buffer. The data type of this buffer depends on the information level requested in the <em>InformationLevel</em> parameter. For the <strong><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></strong> level, the only currently supported value, the <em>OutputBuffer</em>  parameter is required and should be of the <a href="power_platform_information" title="typedef struct _POWER_PLATFORM_INFORMATION {&#10;  BOOLEAN AoAc;&#10;} POWER_PLATFORM_INFORMATION, *PPOWER_PLATFORM_INFORMATION;">POWER_PLATFORM_INFORMATION</a> type.</p>

<h3><code>OutputBufferLength</code> [in]</h3>

<p>Size, in bytes, of the output buffer. Depending on the information level requested, the buffer may be variably sized. <em><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></em>, the only currently supported value, requires a buffer that is the size of a <a href="power_platform_information" title="typedef struct _POWER_PLATFORM_INFORMATION {&#10;  BOOLEAN AoAc;&#10;} POWER_PLATFORM_INFORMATION, *PPOWER_PLATFORM_INFORMATION;">POWER_PLATFORM_INFORMATION</a> structure.</p>

<h2>Return value</h2>

<p>Returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if the call is successful. If the call fails, possible error codes include the following:</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>STATUS_BUFFER_TOO_SMALL</strong></td>
  <td>The output buffer is of insufficient size to contain the data being returned.</td>
</tr>
<tr>
  <td><strong>STATUS_INVALID_PARAMETER</strong></td>
  <td>The <strong><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></strong> information level, which is the only currently supported value, requires no input buffer and must contain an output buffer. The caller either supplied an input buffer or no output buffer.</td>
</tr>
<tr>
  <td><strong>STATUS_ACCESS_DENIED</strong></td>
  <td>The caller had insufficient access rights to perform the requested action.</td>
</tr>
</tbody>
</table>

<h2>Remarks</h2>

<p>NtPowerInformation and <strong>ZwPowerInformation</strong> are two versions of the same Windows Native System Services routine.</p>

<p>For calls from kernel-mode drivers, the <strong>Nt*Xxx</strong>* and <strong>Zw*Xxx</strong>* versions of a Windows Native System Services routine can behave differently in the way that they handle and interpret input parameters. For more information about the relationship between the <strong>Nt*Xxx</strong>* and <strong>Zw*Xxx</strong>* versions of a routine, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/using-nt-and-zw-versions-of-the-native-system-services-routines">Using Nt and Zw Versions of the Native System Services Routines</a>.</p>

<h4>Examples</h4>

<p>This example illustrates a valid function call.</p>

<p><!-- CODE_MARKER --></p>

<div class="codehilite">
<pre><span></span><code><span class="n"><a href="power_platform_information" title="typedef struct _POWER_PLATFORM_INFORMATION {&#10;  BOOLEAN AoAc;&#10;} POWER_PLATFORM_INFORMATION, *PPOWER_PLATFORM_INFORMATION;">POWER_PLATFORM_INFORMATION</a></span><span class="w"> </span><span class="n">PlatformInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="n"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a></span><span class="w"> </span><span class="n">Result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NtPowerInformation</span><span class="p">(</span><span class="n"><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">PlatformInfo</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">PlatformInfo</span><span class="p">));</span>
</code></pre>
</div>

<h2>See also</h2>

<p><a href="power_platform_information" title="typedef struct _POWER_PLATFORM_INFORMATION {&#10;  BOOLEAN AoAc;&#10;} POWER_PLATFORM_INFORMATION, *PPOWER_PLATFORM_INFORMATION;">POWER_PLATFORM_INFORMATION</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/using-nt-and-zw-versions-of-the-native-system-services-routines">Using Nt and Zw Versions of the Native System Services Routines</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntpoapi/nf-ntpoapi-ntpowerinformation">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntpoapi/nf-ntpoapi-ntpowerinformation.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-wdm-ntpowerinformation)</h1>
</div>
<div class="ntdoc-description">
<h1>NtPowerInformation function (wdm.h)</h1>

<h2>Description</h2>

<p>The <strong>NtPowerInformation</strong> routine sets or retrieves system power information.</p>

<h2>Parameters</h2>

<h3><code>InformationLevel</code> [in]</h3>

<p>Specifies the requested information level, which indicates the specific power information to be set or retrieved. Currently, the only supported <em><a href="power_information_level" title="#define POWER_INFORMATION_LEVEL ULONG">POWER_INFORMATION_LEVEL</a></em> value is <strong><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></strong>.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></strong></td>
  <td>Information represents the currently supported power capabilities of the system. Information may change as drivers are installed. For example, the installation of legacy device drivers that do not support power management might modify the capabilities of the system.</td>
</tr>
</tbody>
</table>

<h3><code>InputBuffer</code> [in, optional]</h3>

<p>Pointer to a caller-allocated input buffer. This parameter must be <strong>NULL</strong>, otherwise <strong>ERROR_INVALID_PARAMETER</strong> is returned.</p>

<h3><code>InputBufferLength</code> [in]</h3>

<p>Size, in bytes, of the buffer at <em>InputBuffer</em>. The parameter must be set to zero.</p>

<h3><code>OutputBuffer</code> [out, optional]</h3>

<p>A pointer to an output buffer. The data type of this buffer depends on the information level requested in the <em>InformationLevel</em> parameter. For the <strong><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></strong> level, the only currently supported value, the <em>OutputBuffer</em> parameter is required and should be of the <a href="power_platform_information" title="typedef struct _POWER_PLATFORM_INFORMATION {&#10;  BOOLEAN AoAc;&#10;} POWER_PLATFORM_INFORMATION, *PPOWER_PLATFORM_INFORMATION;">POWER_PLATFORM_INFORMATION</a> type.</p>

<h3><code>OutputBufferLength</code> [in]</h3>

<p>Size, in bytes, of the output buffer. Depending on the information level requested, the buffer may be variably sized. <em><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></em>, the only currently supported value, requires a buffer that is the size of a <a href="power_platform_information" title="typedef struct _POWER_PLATFORM_INFORMATION {&#10;  BOOLEAN AoAc;&#10;} POWER_PLATFORM_INFORMATION, *PPOWER_PLATFORM_INFORMATION;">POWER_PLATFORM_INFORMATION</a> structure.</p>

<h2>Return value</h2>

<p>Returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if the call is successful. If the call fails, possible error codes include the following:</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>STATUS_BUFFER_TOO_SMALL</strong></td>
  <td>The output buffer is of insufficient size to contain the data being returned.</td>
</tr>
<tr>
  <td><strong>STATUS_INVALID_PARAMETER</strong></td>
  <td>The <strong><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></strong> information level, which is the only currently supported value, requires no input buffer and must contain an output buffer. The caller either supplied an input buffer or no output buffer.</td>
</tr>
<tr>
  <td><strong>STATUS_ACCESS_DENIED</strong></td>
  <td>The caller had insufficient access rights to perform the requested action.</td>
</tr>
</tbody>
</table>

<h2>Remarks</h2>

<p><a href="#">NtPowerInformation</a> and <strong>ZwPowerInformation</strong> are two versions of the same Windows Native System Services routine.</p>

<p>For calls from kernel-mode drivers, the <strong>Nt*Xxx</strong>* and <strong>Zw*Xxx</strong>* versions of a Windows Native System Services routine can behave differently in the way that they handle and interpret input parameters. For more information about the relationship between the <strong>Nt*Xxx</strong>* and <strong>Zw*Xxx</strong>* versions of a routine, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/using-nt-and-zw-versions-of-the-native-system-services-routines">Using Nt and Zw Versions of the Native System Services Routines</a>.</p>

<h3>Examples</h3>

<p>This example illustrates a valid function call.</p>

<p><!-- CODE_MARKER --></p>

<div class="codehilite">
<pre><span></span><code><span class="n"><a href="power_platform_information" title="typedef struct _POWER_PLATFORM_INFORMATION {&#10;  BOOLEAN AoAc;&#10;} POWER_PLATFORM_INFORMATION, *PPOWER_PLATFORM_INFORMATION;">POWER_PLATFORM_INFORMATION</a></span><span class="w"> </span><span class="n">PlatformInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="n"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a></span><span class="w"> </span><span class="n">Result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NtPowerInformation</span><span class="p">(</span><span class="n"><a href="platforminformation" title="#define PlatformInformation 66 // out: BOOLEAN // connected standby supported">PlatformInformation</a></span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">PlatformInfo</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">PlatformInfo</span><span class="p">));</span>
</code></pre>
</div>

<h2>See also</h2>

<p><a href="power_platform_information" title="typedef struct _POWER_PLATFORM_INFORMATION {&#10;  BOOLEAN AoAc;&#10;} POWER_PLATFORM_INFORMATION, *PPOWER_PLATFORM_INFORMATION;">POWER_PLATFORM_INFORMATION</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/using-nt-and-zw-versions-of-the-native-system-services-routines">Using Nt and Zw Versions of the Native System Services Routines</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ntpowerinformation">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/nf-wdm-ntpowerinformation.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
