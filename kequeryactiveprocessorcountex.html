<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="KeQueryActiveProcessorCountEx - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>KeQueryActiveProcessorCountEx - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github.ntdoc.min.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github-dark-dimmed.ntdoc.min.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            KeQueryActiveProcessorCountEx - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header language-cpp">// ntddk.h

</span><span class="ntdoc-code-intro language-cpp"></span><span class="ntdoc-code-body language-cpp"><a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> KeQueryActiveProcessorCountEx(
  [in] <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> GroupNumber
);</span><span class="ntdoc-code-footer language-cpp"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/nf-ntddk-kequeryactiveprocessorcountex">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header language-cpp">// wdm.h

</span><span class="ntdoc-code-intro language-cpp"></span><span class="ntdoc-code-body language-cpp"><a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> KeQueryActiveProcessorCountEx(
  [in] <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> GroupNumber
);</span><span class="ntdoc-code-footer language-cpp"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-kequeryactiveprocessorcountex">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/kequeryactiveprocessorcountex.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ntddk-kequeryactiveprocessorcountex)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>KeQueryActiveProcessorCountEx function (ntddk.h)</h1>
<h2>Description</h2>
<p>The <strong>KeQueryActiveProcessorCountEx</strong> routine returns the number of active logical processors in a specified group in a multiprocessor system or in the entire system.</p>
<h2>Parameters</h2>
<h3><code>GroupNumber</code> [in]</h3>
<p>The group number. If a multiprocessor system contains <em>n</em> groups, valid group numbers range from 0 to <em>n</em>-1. To count all active processors in all groups in the system, set this parameter to ALL_PROCESSOR_GROUPS, which is defined in header files Winnt.h and Ntdef.h.</p>
<h2>Return value</h2>
<p><strong>KeQueryActiveProcessorCountEx</strong> returns the number of active logical processors in the group. If <em>GroupNumber</em> is not a valid group number and is not ALL_PROCESSOR_GROUPS, it returns zero.</p>
<h2>Remarks</h2>
<p>An active logical processor is a logical processor that Windows has started up and added to a multiprocessor system. The term active processor applies to a processor that is available to perform processing work, regardless of whether the processor is currently performing processing work or is idle. In some systems, the number of active processors might remain unchanged from system startup to shutdown. In other systems, Windows might dynamically add active processors while the system is running. Windows never removes active processors from a system. Thus, the number of active processors in a multiprocessor system can increase between system startup and shutdown, but this number never decreases.</p>
<p>A related routine, <a href="kequeryactiveprocessorcount" title="ULONG KeQueryActiveProcessorCount(&#10;  [out, optional] PKAFFINITY ActiveProcessors&#10;);">KeQueryActiveProcessorCount</a>, returns an active processor count, but this routine, unlike <strong>KeQueryActiveProcessorCountEx</strong>, does not accept a group number as an input parameter. In Windows 7 and later versions of the Windows operating system, <strong><a href="kequeryactiveprocessorcount" title="ULONG KeQueryActiveProcessorCount(&#10;  [out, optional] PKAFFINITY ActiveProcessors&#10;);">KeQueryActiveProcessorCount</a></strong> returns the active processor count in group 0, which is compatible with the behavior of this routine in earlier versions of Windows that do not support groups. This behavior ensures that existing drivers that call <strong><a href="kequeryactiveprocessorcount" title="ULONG KeQueryActiveProcessorCount(&#10;  [out, optional] PKAFFINITY ActiveProcessors&#10;);">KeQueryActiveProcessorCount</a></strong> and that use no group-oriented features will run correctly in multiprocessor systems that have two or more groups. However, drivers that use any group-oriented features in Windows 7 and later versions of the Windows operating system should call <strong>KeQueryActiveProcessorCountEx</strong> instead of <strong><a href="kequeryactiveprocessorcount" title="ULONG KeQueryActiveProcessorCount(&#10;  [out, optional] PKAFFINITY ActiveProcessors&#10;);">KeQueryActiveProcessorCount</a></strong>.</p>
<p>For a code example that uses <strong>KeQueryActiveProcessorCountEx</strong>, see <a href="kegetprocessornumberfromindex" title="NTSTATUS KeGetProcessorNumberFromIndex(&#10;  [in]  ULONG             ProcIndex,&#10;  [out] PPROCESSOR_NUMBER ProcNumber&#10;);">KeGetProcessorNumberFromIndex</a>.</p>
<h2>See also</h2>
<p><a href="kegetprocessornumberfromindex" title="NTSTATUS KeGetProcessorNumberFromIndex(&#10;  [in]  ULONG             ProcIndex,&#10;  [out] PPROCESSOR_NUMBER ProcNumber&#10;);">KeGetProcessorNumberFromIndex</a></p>
<p><a href="kequeryactiveprocessorcount" title="ULONG KeQueryActiveProcessorCount(&#10;  [out, optional] PKAFFINITY ActiveProcessors&#10;);">KeQueryActiveProcessorCount</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/nf-ntddk-kequeryactiveprocessorcountex">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddk/nf-ntddk-kequeryactiveprocessorcountex.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-wdm-kequeryactiveprocessorcountex)</h1>
</div>
<div class="ntdoc-description">
<h1>KeQueryActiveProcessorCountEx function (wdm.h)</h1>
<h2>Description</h2>
<p>The <strong>KeQueryActiveProcessorCountEx</strong> routine returns the number of active logical processors in a specified group in a multiprocessor system or in the entire system.</p>
<h2>Parameters</h2>
<h3><code>GroupNumber</code> [in]</h3>
<p>The group number. If a multiprocessor system contains <em>n</em> groups, valid group numbers range from 0 to <em>n</em>-1. To count all active processors in all groups in the system, set this parameter to ALL_PROCESSOR_GROUPS, which is defined in header files Winnt.h and Ntdef.h.</p>
<h2>Return value</h2>
<p><strong>KeQueryActiveProcessorCountEx</strong> returns the number of active logical processors in the group. If <em>GroupNumber</em> is not a valid group number and is not ALL_PROCESSOR_GROUPS, it returns zero.</p>
<h2>Remarks</h2>
<p>An active logical processor is a logical processor that Windows has started up and added to a multiprocessor system. The term active processor applies to a processor that is available to perform processing work, regardless of whether the processor is currently performing processing work or is idle. In some systems, the number of active processors might remain unchanged from system startup to shutdown. In other systems, Windows might dynamically add active processors while the system is running. Windows never removes active processors from a system. Thus, the number of active processors in a multiprocessor system can increase between system startup and shutdown, but this number never decreases.</p>
<p>A related routine, <a href="kequeryactiveprocessorcount" title="ULONG KeQueryActiveProcessorCount(&#10;  [out, optional] PKAFFINITY ActiveProcessors&#10;);">KeQueryActiveProcessorCount</a>, returns an active processor count, but this routine, unlike <strong>KeQueryActiveProcessorCountEx</strong>, does not accept a group number as an input parameter. In Windows 7 and later versions of the Windows operating system, <strong><a href="kequeryactiveprocessorcount" title="ULONG KeQueryActiveProcessorCount(&#10;  [out, optional] PKAFFINITY ActiveProcessors&#10;);">KeQueryActiveProcessorCount</a></strong> returns the active processor count in group 0, which is compatible with the behavior of this routine in earlier versions of Windows that do not support groups. This behavior ensures that existing drivers that call <strong><a href="kequeryactiveprocessorcount" title="ULONG KeQueryActiveProcessorCount(&#10;  [out, optional] PKAFFINITY ActiveProcessors&#10;);">KeQueryActiveProcessorCount</a></strong> and that use no group-oriented features will run correctly in multiprocessor systems that have two or more groups. However, drivers that use any group-oriented features in Windows 7 and later versions of the Windows operating system should call <strong>KeQueryActiveProcessorCountEx</strong> instead of <strong><a href="kequeryactiveprocessorcount" title="ULONG KeQueryActiveProcessorCount(&#10;  [out, optional] PKAFFINITY ActiveProcessors&#10;);">KeQueryActiveProcessorCount</a></strong>.</p>
<p>For a code example that uses <strong>KeQueryActiveProcessorCountEx</strong>, see <a href="kegetprocessornumberfromindex" title="NTSTATUS KeGetProcessorNumberFromIndex(&#10;  [in]  ULONG             ProcIndex,&#10;  [out] PPROCESSOR_NUMBER ProcNumber&#10;);">KeGetProcessorNumberFromIndex</a>.</p>
<h2>See also</h2>
<p><a href="kegetprocessornumberfromindex" title="NTSTATUS KeGetProcessorNumberFromIndex(&#10;  [in]  ULONG             ProcIndex,&#10;  [out] PPROCESSOR_NUMBER ProcNumber&#10;);">KeGetProcessorNumberFromIndex</a></p>
<p><a href="kequeryactiveprocessorcount" title="ULONG KeQueryActiveProcessorCount(&#10;  [out, optional] PKAFFINITY ActiveProcessors&#10;);">KeQueryActiveProcessorCount</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-kequeryactiveprocessorcountex">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/nf-wdm-kequeryactiveprocessorcountex.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script src="modules/highlight.js/highlight.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
