<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="PFND3D11_1DDI_CONFIGUREAUTHENTICATEDCHANNEL - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>PFND3D11_1DDI_CONFIGUREAUTHENTICATEDCHANNEL - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            PFND3D11_1DDI_CONFIGUREAUTHENTICATEDCHANNEL - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3d10umddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">PFND3D11_1DDI_CONFIGUREAUTHENTICATEDCHANNEL Pfnd3d111DdiConfigureauthenticatedchannel;

HRESULT Pfnd3d111DdiConfigureauthenticatedchannel(
  D3D10DDI_HDEVICE hDevice,
  D3D11_1DDI_HAUTHCHANNEL hCAuthChannel,
  <a href="uint" title="typedef unsigned int UINT;">UINT</a> InputDataSize,
  const VOID *pInputData,
  <a href="d3d11_1ddi_authenticated_configure_output" title="typedef struct D3D11_1DDI_AUTHENTICATED_CONFIGURE_OUTPUT {&#10;  D3D11_1DDI_OMAC omac;&#10;  GUID            ConfigureType;&#10;  HANDLE          hChannel;&#10;  UINT            SequenceNumber;&#10;  HRESULT         ReturnCode;&#10;} D3D11_1DDI_AUTHENTICATED_CONFIGURE_OUTPUT;">D3D11_1DDI_AUTHENTICATED_CONFIGURE_OUTPUT</a> *pOutputData
)
{...}</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d11_1ddi_configureauthenticatedchannel">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/pfnd3d11_1ddi_configureauthenticatedchannel.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-d3d10umddi-pfnd3d11_1ddi_configureauthenticatedchannel)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="pfnd3d11_1ddi_configureauthenticatedchannel-callback-function">PFND3D11_1DDI_CONFIGUREAUTHENTICATEDCHANNEL callback function</h1>

<h2 id="description">Description</h2>

<p>Processes a request from an application to configure an authenticated channel for content protection. Implemented by a Windows Display Driver Model (WDDM) 1.2 or later user-mode display driver.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="hdevice"><code>hDevice</code></h3>

<p>A handle to the display device (graphics context).</p>

<h3 id="hcauthchannel"><code>hCAuthChannel</code></h3>

<p>A handle to the authenticated channel object that was created through a call to the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d11_1ddi_createauthenticatedchannel">CreateAuthenticatedChannel(D3D11_1)</a> function.</p>

<h3 id="inputdatasize"><code>InputDataSize</code></h3>

<p>The size, in bytes, of the array that is specified by the <em>pInputData</em> parameter.</p>

<h3 id="pinputdata"><code>pInputData</code></h3>

<p>A pointer to a byte array that contains input data for the command. For more information, see the Remarks section.</p>

<h3 id="poutputdata"><code>pOutputData</code></h3>

<p>A pointer to a <a href="d3d11_1ddi_authenticated_configure_output" title="typedef struct D3D11_1DDI_AUTHENTICATED_CONFIGURE_OUTPUT {&#10;  D3D11_1DDI_OMAC omac;&#10;  GUID            ConfigureType;&#10;  HANDLE          hChannel;&#10;  UINT            SequenceNumber;&#10;  HRESULT         ReturnCode;&#10;} D3D11_1DDI_AUTHENTICATED_CONFIGURE_OUTPUT;">D3D11_1DDI_AUTHENTICATED_CONFIGURE_OUTPUT</a> structure. For more information, see the Remarks section.</p>

<h2 id="return-value">Return value</h2>

<p>Returns one of the following values:</p>

<table>
<thead>
<tr>
  <th style="text-align:left;"><strong>Return code</strong></th>
  <th style="text-align:left;"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
  <td style="text-align:left;"><strong>S_OK</strong></td>
  <td style="text-align:left;">The authenticated channel was configured successfully.</td>
</tr>
<tr>
  <td style="text-align:left;"><strong>E_FAIL</strong></td>
  <td style="text-align:left;">The display miniport driver does not support the specified command</td>
</tr>
<tr>
  <td style="text-align:left;"><strong>E_INVALIDARG</strong></td>
  <td style="text-align:left;">Parameters were validated and determined to be incorrect.</td>
</tr>
<tr>
  <td style="text-align:left;"><strong>E_OUTOFMEMORY</strong></td>
  <td style="text-align:left;">Memory was not available to complete the operation.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p>The byte array that is referenced by the <em>pInputData</em> parameter is formatted in the following way:</p>

<ul>
<li><p>This array starts with a <a href="d3d11_1ddi_authenticated_configure_input" title="typedef struct D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT {&#10;  D3D11_1DDI_OMAC omac;&#10;  GUID            ConfigureType;&#10;  HANDLE          hChannel;&#10;  UINT            SequenceNumber;&#10;} D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT;">D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT</a> structure.</p></li>
<li><p>The data that follows this structure is in a format that is specified by the <strong>ConfigureType</strong> member of the structure.</p></li>
</ul>

<p>The following list describes the format of this data based on the <strong>ConfigureType</strong> member.</p>

<ul>
<li><p><strong>D3D11_1DDI_AUTHENTICATED_CONFIGURE_CRYPTO_SESSION_GUID</strong>
<a href="d3d11_1ddi_authenticated_configure_crypto_session" title="typedef struct D3D11_1DDI_AUTHENTICATED_CONFIGURE_CRYPTO_SESSION {&#10;  D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT Parameters;&#10;  HANDLE                                   DecodeHandle;&#10;  HANDLE                                   CryptoSessionHandle;&#10;  HANDLE                                   DeviceHandle;&#10;} D3D11_1DDI_AUTHENTICATED_CONFIGURE_CRYPTO_SESSION;">D3D11_1DDI_AUTHENTICATED_CONFIGURE_CRYPTO_SESSION</a></p></li>
<li><p><strong>D3D11_1DDI_AUTHENTICATED_CONFIGURE_ENCRYPTION_WHEN_ACCESSIBLE_GUID</strong>
<a href="d3d11_1ddi_authenticated_configure_accessible_encryption" title="typedef struct D3D11_1DDI_AUTHENTICATED_CONFIGURE_ACCESSIBLE_ENCRYPTION {&#10;  D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT Parameters;&#10;  GUID                                     EncryptionGuid;&#10;} D3D11_1DDI_AUTHENTICATED_CONFIGURE_ACCESSIBLE_ENCRYPTION;">D3D11_1DDI_AUTHENTICATED_CONFIGURE_ACCESSIBLE_ENCRYPTION</a></p></li>
<li><p><strong>D3D11_1DDI_AUTHENTICATED_CONFIGURE_INITIALIZE_GUID</strong>
<a href="d3d11_1ddi_authenticated_configure_initialize" title="typedef struct D3D11_1DDI_AUTHENTICATED_CONFIGURE_INITIALIZE {&#10;  D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT Parameters;&#10;  UINT                                     StartSequenceQuery;&#10;  UINT                                     StartSequenceConfigure;&#10;} D3D11_DDI_AUTHENTICATED_CONFIGURE_INITIALIZE;">D3D11_1DDI_AUTHENTICATED_CONFIGURE_INITIALIZE</a></p></li>
<li><p><strong>D3D11_1DDI_AUTHENTICATED_CONFIGURE_PROTECTION_GUID</strong>
<a href="d3d11_1ddi_authenticated_configure_protection" title="typedef struct D3D11_1DDI_AUTHENTICATED_CONFIGURE_PROTECTION {&#10;  D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT  Parameters;&#10;  D3D11_1DDI_AUTHENTICATED_PROTECTION_FLAGS Protections;&#10;} D3D11_1DDI_AUTHENTICATED_CONFIGURE_PROTECTION;">D3D11_1DDI_AUTHENTICATED_CONFIGURE_PROTECTION</a></p></li>
<li><p><strong>D3D11_1DDI_AUTHENTICATED_CONFIGURE_SHARED_RESOURCE_GUID</strong>
<a href="d3d11_1ddi_authenticated_configure_shared_resource" title="typedef struct D3D11_1DDI_AUTHENTICATED_CONFIGURE_SHARED_RESOURCE {&#10;  D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT         Parameters;&#10;  D3D11_1DDI_AUTHENTICATED_PROCESS_IDENTIFIER_TYPE ProcessType;&#10;  HANDLE                                           ProcessHandle;&#10;  BOOL                                             AllowAccess;&#10;} D3D11_1DDI_AUTHENTICATED_CONFIGURE_SHARED_RESOURCE;">D3D11_1DDI_AUTHENTICATED_CONFIGURE_SHARED_RESOURCE</a></p></li>
</ul>

<p>The <a href="d3d11_1ddi_authenticated_configure_input" title="typedef struct D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT {&#10;  D3D11_1DDI_OMAC omac;&#10;  GUID            ConfigureType;&#10;  HANDLE          hChannel;&#10;  UINT            SequenceNumber;&#10;} D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT;">D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT</a> structure contains an AES-based one-key CBC message authentication code (OMAC) of the data. The display miniport driver must calculate its own OMAC over the data to authenticate the data. This input structure also contains a driver handle to the authenticated channel, a sequence number, and a GUID that indicates the configuration type.</p>

<p>The display miniport driver follows these steps when it initializes the <a href="d3d11_1ddi_authenticated_configure_output" title="typedef struct D3D11_1DDI_AUTHENTICATED_CONFIGURE_OUTPUT {&#10;  D3D11_1DDI_OMAC omac;&#10;  GUID            ConfigureType;&#10;  HANDLE          hChannel;&#10;  UINT            SequenceNumber;&#10;  HRESULT         ReturnCode;&#10;} D3D11_1DDI_AUTHENTICATED_CONFIGURE_OUTPUT;">D3D11_1DDI_AUTHENTICATED_CONFIGURE_OUTPUT</a> structure:</p>

<ol>
<li><p>The driver must copy the input data to the <a href="d3d11_1ddi_authenticated_configure_output" title="typedef struct D3D11_1DDI_AUTHENTICATED_CONFIGURE_OUTPUT {&#10;  D3D11_1DDI_OMAC omac;&#10;  GUID            ConfigureType;&#10;  HANDLE          hChannel;&#10;  UINT            SequenceNumber;&#10;  HRESULT         ReturnCode;&#10;} D3D11_1DDI_AUTHENTICATED_CONFIGURE_OUTPUT;">D3D11_1DDI_AUTHENTICATED_CONFIGURE_OUTPUT</a> structure.</p></li>
<li><p>The driver must set the ReturnCode member to the same return code that it will return for the ConfigureAuthenticatedChannel(D3D11_1) call. This provides the application with a secure mechanism of accessing the return code.</p></li>
<li><p>The driver sets the omac member to zero and then calculates an OMAC for the data in the structure. The driver then sets the omac member to the OMAC that it calculated</p></li>
</ol>

<p>The display miniport driver must return <strong>E_INVALIDARG</strong> for the <strong>ConfigureAuthenticatedChannel</strong> call under the following conditions:</p>

<ul>
<li><p>The omac member of theD3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT structure does not match the OMAC that the driver calculated.</p></li>
<li><p>The sequence number is not greater than a sequence number that was specified in a previous configuration call.</p></li>
<li><p>The sequence number has not yet been initialized by a call to the ConfigureAuthenticatedChannel(D3D11_1) function.</p></li>
<li><p>The InputDataSize parameter is less than the size of the <a href="d3d11_1ddi_authenticated_configure_input" title="typedef struct D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT {&#10;  D3D11_1DDI_OMAC omac;&#10;  GUID            ConfigureType;&#10;  HANDLE          hChannel;&#10;  UINT            SequenceNumber;&#10;} D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT;">D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT</a> structure plus the size of the structure specified by the <a href="d3d11_1ddi_authenticated_configure_input" title="typedef struct D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT {&#10;  D3D11_1DDI_OMAC omac;&#10;  GUID            ConfigureType;&#10;  HANDLE          hChannel;&#10;  UINT            SequenceNumber;&#10;} D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT;">D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT</a>.ConfigureTypemember.</p></li>
</ul>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d11_1ddi_createauthenticatedchannel">CreateAuthenticatedChannel(D3D11_1)</a></p>

<p><a href="d3d11_1ddi_authenticated_configure_input" title="typedef struct D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT {&#10;  D3D11_1DDI_OMAC omac;&#10;  GUID            ConfigureType;&#10;  HANDLE          hChannel;&#10;  UINT            SequenceNumber;&#10;} D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT;">D3D11_1DDI_AUTHENTICATED_CONFIGURE_INPUT</a></p>

<p><a href="d3d11_1ddi_authenticated_configure_output" title="typedef struct D3D11_1DDI_AUTHENTICATED_CONFIGURE_OUTPUT {&#10;  D3D11_1DDI_OMAC omac;&#10;  GUID            ConfigureType;&#10;  HANDLE          hChannel;&#10;  UINT            SequenceNumber;&#10;  HRESULT         ReturnCode;&#10;} D3D11_1DDI_AUTHENTICATED_CONFIGURE_OUTPUT;">D3D11_1DDI_AUTHENTICATED_CONFIGURE_OUTPUT</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d11_1ddi_configureauthenticatedchannel">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3d10umddi/nc-d3d10umddi-pfnd3d11_1ddi_configureauthenticatedchannel.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
