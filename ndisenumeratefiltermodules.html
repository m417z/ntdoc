<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NdisEnumerateFilterModules - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NdisEnumerateFilterModules - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NdisEnumerateFilterModules - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NDIS_STATUS NdisEnumerateFilterModules(
  [in]      NDIS_HANDLE NdisHandle,
  [in]      PVOID       InterfaceBuffer,
  [in]      <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>       InterfaceBufferLength,
  [in, out] PULONG      BytesNeeded,
  [in, out] PULONG      BytesWritten
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisenumeratefiltermodules">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndisenumeratefiltermodules.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ndis-ndisenumeratefiltermodules)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="ndisenumeratefiltermodules-function">NdisEnumerateFilterModules function</h1>

<h2 id="description">Description</h2>

<p>The
<strong>NdisEnumerateFilterModules</strong> function enumerates all the filters modules and filter intermediate driver
instances in a filter stack.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="ndishandle-in"><code>NdisHandle</code> [in]</h3>

<p>An NDIS handle that was obtained during caller initialization. For more information about this
handle, see
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/obtaining-pool-handles">Obtaining Pool Handles</a>.</p>

<p>If the handle is an NDIS miniport adapter handle, NDIS returns information about all the interface
modules that are currently attached to the miniport adapter, starting with the top-most filter
module.</p>

<p>If the handle is an NDIS binding handle, NDIS returns information about all the filter modules that
are currently attached to the underlying miniport adapter, starting with the top-most filter module.</p>

<p>If the handle is an NDIS filter module handle, NDIS returns information about all the filter modules
that are currently attached to the underlying miniport adapter to which the specified filter module is
attached, starting with the top-most filter module.</p>

<h3 id="interfacebuffer-in"><code>InterfaceBuffer</code> [in]</h3>

<p>A pointer to a caller-allocated memory block in which NDIS returns the information for all the
filter modules in a filter stack, starting with top-most filter. This buffer contains an
<a rel="noopener" target="_blank" href="ndis_enum_filters">NDIS_ENUM_FILTERS</a> structure that is
followed by zero or more
<a rel="noopener" target="_blank" href="ndis_filter_interface">NDIS_FILTER_INTERFACE</a> structures, one
for each filter module in the stack.</p>

<h3 id="interfacebufferlength-in"><code>InterfaceBufferLength</code> [in]</h3>

<p>The length, in bytes, of the caller-supplied memory block at the
<strong>InterfaceBuffer</strong> member.</p>

<h3 id="bytesneeded-in-out"><code>BytesNeeded</code> [in, out]</h3>

<p>A pointer to a caller-supplied variable where NDIS writes the total number of bytes that NDIS
requires to successfully return the interface information for all the filters in the filter
stack.</p>

<h3 id="byteswritten-in-out"><code>BytesWritten</code> [in, out]</h3>

<p>A pointer to a caller-supplied variable where NDIS writes the total bytes that NDIS wrote in the
memory at
<strong>InterfaceBuffer</strong>.</p>

<h2 id="return-value">Return value</h2>

<p><strong>NdisEnumerateFilterModules</strong> returns one of the following status values:</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>NDIS_STATUS_SUCCESS</strong></td>
  <td>The operation completed successfully.</td>
</tr>
<tr>
  <td><strong>NDIS_STATUS_INVALID_PARAMETER</strong></td>
  <td><strong>NdisEnumerateFilterModules</strong> failed because the <em>NdisHandle</em> parameter was not a valid NDIS miniport adapter, protocol binding, or filter module handle.</td>
</tr>
<tr>
  <td><strong>NDIS_STATUS_BUFFER_TOO_SHORT</strong></td>
  <td><strong>NdisEnumerateFilterModules</strong> failed because the buffer that was supplied at the <em>InterfaceBuffer</em> parameter was too short for NDIS to return all the information. If a partial result was written at <em>InterfaceBuffer</em>, the value at the <em>BytesWritten</em> parameter contains the length of the partial results.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p>An NDIS miniport driver, protocol driver, or filter driver can call the
<strong>NdisEnumerateFilterModules</strong> function to enumerate all the filters in a filter stack.</p>

<p><strong>NdisEnumerateFilterModules</strong> returns the list of filter modules and filter intermediate drivers from
the top to the bottom of the driver stack. For example, if filter modules (F1 and F2) are attached to
miniport adapter (M1) and if F2 is above F1,
<strong>NdisEnumerateFilterModules</strong> returns the list in the following order: F2, F1. If there is also a
filter intermediate driver (M2) that is bound to M1, if M2 is above F2, and if another filter (F3) is
attached to M2,
<strong>NdisEnumerateFilterModules</strong> returns the filter list in the following order: F3, M2, F2, F1.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="ndis_enum_filters">NDIS_ENUM_FILTERS</a></p>

<p><a rel="noopener" target="_blank" href="ndis_filter_interface">NDIS_FILTER_INTERFACE</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisenumeratefiltermodules">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ndis/nf-ndis-ndisenumeratefiltermodules.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
