<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DXGK_DSI_PACKET - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DXGK_DSI_PACKET - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DXGK_DSI_PACKET - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// dispmprt.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _DXGK_DSI_PACKET {
  union {
    <a href="byte" title="typedef unsigned char BYTE;">BYTE</a> DataId;
    struct {
      <a href="byte" title="typedef unsigned char BYTE;">BYTE</a> DataType : 6;
      <a href="byte" title="typedef unsigned char BYTE;">BYTE</a> VirtualChannel : 2;
    };
  };
  union {
    struct {
      <a href="byte" title="typedef unsigned char BYTE;">BYTE</a> Data0;
      <a href="byte" title="typedef unsigned char BYTE;">BYTE</a> Data1;
    };
    <a href="word" title="typedef unsigned short WORD;">WORD</a> LongWriteWordCount;
  };
  <a href="byte" title="typedef unsigned char BYTE;">BYTE</a>  EccFiller;
  <a href="byte" title="typedef unsigned char BYTE;">BYTE</a>  Payload[DXGK_DSI_PACKET_EMBEDDED_PAYLOAD_SIZE];
} DXGK_DSI_PACKET, *PDXGK_DSI_PACKET;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/ns-dispmprt-dxgk_dsi_packet">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/dxgk_dsi_packet.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-dispmprt-dxgk_dsi_packet)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="dxgk_dsi_packet-structure">DXGK_DSI_PACKET structure</h1>

<h2 id="description">Description</h2>

<p>An OEM panel driver uses <strong>DXGK_DSI_PACKET</strong> structures to transmit Digital Serial Interface (DSI) packets to the bus driver (graphics kernel).</p>

<h2 id="members">Members</h2>

<h3 id="dataid"><code>DataId</code></h3>

<p>8-bit value, where the lower 6 bits form the DataType and the higher 2 bits are VirtualChannel.</p>

<h3 id="datatype"><code>DataType</code></h3>

<p>Type of data being transmitted, which implicitly defines the transaction as a read or a write as well as the number of parameters and whether the transaction is formed as a short or long packet.</p>

<h3 id="virtualchannel"><code>VirtualChannel</code></h3>

<p>Indicates the sub-unit of the peripheral being addressed. Can be one of 0, 1, 2, or 3.</p>

<h3 id="data0"><code>Data0</code></h3>

<p>8-bit value used in short packets to transfer parameters. Short packets have 0, 1, or 2 bytes of parameters, where the number and meaning is determined by the DataType.</p>

<h3 id="data1"><code>Data1</code></h3>

<p>8-bit value used in short packets to transfer parameters. Short packets have 0, 1, or 2 bytes of parameters, where the number and meaning is determined by the DataType.</p>

<h3 id="longwritewordcount"><code>LongWriteWordCount</code></h3>

<p>Word count, in bytes, of the Payload for a write long packet.</p>

<h3 id="eccfiller"><code>EccFiller</code></h3>

<p>An 8-bit field which occupies the space that the Error Correction Code (ECC) will take in the sequence of transmitted bytes. The fourth byte of the transmission is always an ECC and for long writes, the payload directly follows the ECC so this filler allows a long write command to be constructed in memory as a complete command. It is the responsibility of the graphics driver to overwrite the filler value with the correct ECC value prior to transmission.</p>

<h3 id="payload"><code>Payload</code></h3>

<p>Array of 8 bytes which allows for sequences of small writes to be sent as an array of packets in the same transmission but limits the size of the data. The final packet in a transmission can append further data in memory directly after the last byte of the embedded Payload. Read packets are only permitted as the last one in a transmission but may be in the form of a long or short packet and either way, the read data should be placed in the Payload buffer, with extra space in the buffer to accommodate longer responses.</p>

<h2 id="remarks">Remarks</h2>

<p>The panel driver calls <strong><a href="ioctl_mipi_dsi_transmission" title="// CTL_CODE(0x0023, 0x501, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_MIPI_DSI_TRANSMISSION 0x00231404">IOCTL_MIPI_DSI_TRANSMISSION</a></strong> with an array of <strong>DSI_PACKET</strong> structures in a <strong><a href="dxgk_dsi_transmission" title="typedef struct _DXGK_DSI_TRANSMISSION {&#10;  UINT            TotalBufferSize;&#10;  BYTE            PacketCount;&#10;  BYTE            FailedPacket;&#10;  struct {&#10;    WORD TransmissionMode : 2;&#10;    WORD ReportMipiErrors : 1;&#10;    WORD ClearMipiErrors : 1;&#10;    WORD SecondaryPort : 1;&#10;    WORD ManufacturingMode : 1;&#10;    WORD Reserved : 10;&#10;  };&#10;  WORD            ReadWordCount;&#10;  WORD            FinalCommandExtraPayload;&#10;  WORD            MipiErrors;&#10;  WORD            HostErrors;&#10;  DXGK_DSI_PACKET Packets[1];&#10;} DXGK_DSI_TRANSMISSION, *PDXGK_DSI_TRANSMISSION;">DXGK_DSI_TRANSMISSION</a></strong> structure.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddvdeo/ni-ntddvdeo-ioctl_mipi_dsi_query_caps">**IOCTL_MIPI_DSI_QUERY_CAPS</a></p>

<p><strong><a href="ioctl_mipi_dsi_reset" title="// CTL_CODE(0x0023, 0x502, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_MIPI_DSI_RESET 0x00231408">IOCTL_MIPI_DSI_RESET</a></strong></p>

<p><strong><a href="ioctl_mipi_dsi_transmission" title="// CTL_CODE(0x0023, 0x501, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_MIPI_DSI_TRANSMISSION 0x00231404">IOCTL_MIPI_DSI_TRANSMISSION</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/ns-dispmprt-dxgk_dsi_packet">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/dispmprt/ns-dispmprt-dxgk_dsi_packet.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
