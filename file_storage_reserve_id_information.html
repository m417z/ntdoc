<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="FILE_STORAGE_RESERVE_ID_INFORMATION - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>FILE_STORAGE_RESERVE_ID_INFORMATION - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            FILE_STORAGE_RESERVE_ID_INFORMATION - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">#ifndef _NTIOAPI_H

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _FILE_STORAGE_RESERVE_ID_INFORMATION
{
    <a href="storage_reserve_id" title="typedef enum _STORAGE_RESERVE_ID {&#10;  StorageReserveIdNone,&#10;  StorageReserveIdHard,&#10;  StorageReserveIdSoft,&#10;  StorageReserveIdUpdateScratch,&#10;  StorageReserveIdMax&#10;} STORAGE_RESERVE_ID, *PSTORAGE_RESERVE_ID;">STORAGE_RESERVE_ID</a> StorageReserveId;
} FILE_STORAGE_RESERVE_ID_INFORMATION, *PFILE_STORAGE_RESERVE_ID_INFORMATION;
</span><span class="ntdoc-code-footer">
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/3d935379c6ac1f147cc4e3b25bed778f0d140c69/phnt/include/ntioapi.h#L1286">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntifs.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _FILE_STORAGE_RESERVE_ID_INFORMATION {
  <a href="storage_reserve_id" title="typedef enum _STORAGE_RESERVE_ID {&#10;  StorageReserveIdNone,&#10;  StorageReserveIdHard,&#10;  StorageReserveIdSoft,&#10;  StorageReserveIdUpdateScratch,&#10;  StorageReserveIdMax&#10;} STORAGE_RESERVE_ID, *PSTORAGE_RESERVE_ID;">STORAGE_RESERVE_ID</a> StorageReserveId;
} FILE_STORAGE_RESERVE_ID_INFORMATION, *PFILE_STORAGE_RESERVE_ID_INFORMATION;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/ns-ntifs-_file_storage_reserve_id_information">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<p>This structure is <a rel="noopener" target="_blank" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/ntifs/ns-ntifs-_file_storage_reserve_id_information">documented in Windows Driver Kit</a>.</p>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/file_storage_reserve_id_information.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntifs-_file_storage_reserve_id_information)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="file_storage_reserve_id_information-structure">FILE_STORAGE_RESERVE_ID_INFORMATION structure</h1>

<h2 id="description">Description</h2>

<p>The <strong>FILE_STORAGE_RESERVE_ID_INFORMATION</strong> structure is used by <strong><a href="ntqueryinformationfile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtQueryInformationFile(&#10;    _In_ HANDLE FileHandle,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _Out_writes_bytes_(Length) PVOID FileInformation,&#10;    _In_ ULONG Length,&#10;    _In_ FILE_INFORMATION_CLASS FileInformationClass&#10;    );">NtQueryInformationFile</a></strong> and <strong><a href="ntsetinformationfile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtSetInformationFile(&#10;    _In_ HANDLE FileHandle,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_reads_bytes_(Length) PVOID FileInformation,&#10;    _In_ ULONG Length,&#10;    _In_ FILE_INFORMATION_CLASS FileInformationClass&#10;    );">NtSetInformationFile</a></strong> to query and set the storage reserve ID on a file or directory.</p>

<h2 id="members">Members</h2>

<h3 id="storagereserveid"><code>StorageReserveId</code></h3>

<p>A <strong><a href="storage_reserve_id" title="typedef enum _STORAGE_RESERVE_ID {&#10;  StorageReserveIdNone,&#10;  StorageReserveIdHard,&#10;  StorageReserveIdSoft,&#10;  StorageReserveIdUpdateScratch,&#10;  StorageReserveIdMax&#10;} STORAGE_RESERVE_ID, *PSTORAGE_RESERVE_ID;">STORAGE_RESERVE_ID</a></strong> value that indicates the storage reserve ID for the file or directory. The file system uses this ID to change the disk space used by the file or directory as follows:</p>

<ul>
<li>To storage space that has been reserved by the operating system for special purposes (called storage reserve areas)</li>
<li>To storage space that is available for all users and applications</li>
</ul>

<h2 id="remarks">Remarks</h2>

<p>Setting a storage reserve ID on a directory causes all files subsequently created inside that directory to inherit the storage reserve ID.</p>

<p>Attempting to set a storage reserve ID fails with STATUS_STORAGE_RESERVE_ID_INVALID if the value is greater than the maximum value supported by the file system.</p>

<p>Attempting to set a storage reserve ID fails with STATUS_STORAGE_RESERVE_DOES_NOT_EXIST if the corresponding storage reserve area has not been defined on the volume.</p>

<h2 id="see-also">See also</h2>

<p><strong><a href="storage_reserve_id" title="typedef enum _STORAGE_RESERVE_ID {&#10;  StorageReserveIdNone,&#10;  StorageReserveIdHard,&#10;  StorageReserveIdSoft,&#10;  StorageReserveIdUpdateScratch,&#10;  StorageReserveIdMax&#10;} STORAGE_RESERVE_ID, *PSTORAGE_RESERVE_ID;">STORAGE_RESERVE_ID</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/ns-ntifs-_file_storage_reserve_id_information">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntifs/ns-ntifs-_file_storage_reserve_id_information.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
