<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="IkeextSaGetById2 - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>IkeextSaGetById2 - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            IkeextSaGetById2 - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// fwpmk.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> IkeextSaGetById2(
  [in]            HANDLE             engineHandle,
  [in]            <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a>             id,
  [in., optional] GUID               *saLookupContext,
  [out]           IKEEXT_SA_DETAILS2 **sa
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/fwpmk/nf-fwpmk-ikeextsagetbyid2">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ikeextsagetbyid2.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-fwpmk-ikeextsagetbyid2)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>IkeextSaGetById2</strong> function retrieves an IKE/AuthIP security association (SA) from the database.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="enginehandle-in"><code>engineHandle</code> [in]</h3>

<p>Handle for an open session to the filter engine. Call <strong><a href="fwpmengineopen0" title="NTSTATUS FwpmEngineOpen0(&#10;  [in, optional] const wchar_t             *serverName,&#10;  [in]           UINT32                    authnService,&#10;  [in, optional] SEC_WINNT_AUTH_IDENTITY_W *authIdentity,&#10;  [in, optional] const FWPM_SESSION0       *session,&#10;  [out]          HANDLE                    *engineHandle&#10;);">FwpmEngineOpen0</a></strong> to open a session to the filter engine.</p>

<h3 id="id-in"><code>id</code> [in]</h3>

<p>The SA identifier.</p>

<h3 id="salookupcontext-in-optional"><code>saLookupContext</code> [in., optional]</h3>

<p>Optional pointer to the SA lookup context propagated from the SA to data connections flowing over that SA. It is made available to any application that queries socket security properties using the Winsock API <strong><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/ws2tcpip/nf-ws2tcpip-wsaquerysocketsecurity">WSAQuerySocketSecurity</a></strong> function, allowing the application to obtain detailed IPsec authentication information for its connection.</p>

<h3 id="sa-out"><code>sa</code> [out]</h3>

<p>Address of the SA details.</p>

<h2 id="return-value">Return value</h2>

<table>
<thead>
<tr>
  <th>Return code/value</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>ERROR_SUCCESS</strong><br>0</td>
  <td>The SA was retrieved successfully.</td>
</tr>
<tr>
  <td><strong>FWP_E_* error code</strong><br>0x80320001—0x80320039</td>
  <td>A Windows Filtering Platform (WFP) specific error. See <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/fwp/wfp-error-codes">WFP Error Codes</a> for details.</td>
</tr>
<tr>
  <td><strong>RPC_* error code</strong><br>0x80010001—0x80010122</td>
  <td>Failure to communicate with the remote or local firewall engine.</td>
</tr>
<tr>
  <td><strong>Other <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> codes</strong></td>
  <td>An error occurred.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p>The caller must free sa by a call to <strong><a href="fwpmfreememory0" title="void FwpmFreeMemory0(&#10;  [in, out] void **p&#10;);">FwpmFreeMemory0</a></strong>.</p>

<p>The caller needs <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/FWP/access-right-identifiers">FWPM_ACTRL_READ</a> access to the IKE/AuthIP security associations database. See <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/FWP/access-control">Access Control</a> for more information.</p>

<p><strong><a href="ikeextsagetbyid1" title="NTSTATUS IkeextSaGetById1(&#10;  [in]            HANDLE             engineHandle,&#10;  [in]            UINT64             id,&#10;  [in., optional] GUID               *saLookupContext,&#10;  [out]           IKEEXT_SA_DETAILS1 **sa&#10;);">IkeextSaGetById1</a></strong> is a specific implementation of <strong>IkeextSaGetById</strong>. See <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/FWP/wfp-version-independent-names-and-targeting-specific-versions-of-windows">WFP Version-Independent Names and Targeting Specific Versions of Windows</a> for more information.</p>

<h2 id="see-also">See also</h2>

<ul>
<li><strong><a href="fwpmengineopen0" title="NTSTATUS FwpmEngineOpen0(&#10;  [in, optional] const wchar_t             *serverName,&#10;  [in]           UINT32                    authnService,&#10;  [in, optional] SEC_WINNT_AUTH_IDENTITY_W *authIdentity,&#10;  [in, optional] const FWPM_SESSION0       *session,&#10;  [out]          HANDLE                    *engineHandle&#10;);">FwpmEngineOpen0</a></strong></li>
<li><strong><a href="fwpmfreememory0" title="void FwpmFreeMemory0(&#10;  [in, out] void **p&#10;);">FwpmFreeMemory0</a></strong></li>
<li><strong><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/ws2tcpip/nf-ws2tcpip-wsaquerysocketsecurity">WSAQuerySocketSecurity</a></strong></li>
<li><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/FWP/access-right-identifiers">FWPM_ACTRL_READ</a></li>
<li><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/iketypes/ns-iketypes-ikeext_sa_details2">IKEEXT_SA_DETAILS2</a></li>
<li><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/FWP/access-control">Access Control</a></li>
<li><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/fwp/wfp-error-codes">WFP Error Codes</a></li>
<li><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/FWP/wfp-version-independent-names-and-targeting-specific-versions-of-windows">WFP Version-Independent Names and Targeting Specific Versions of Windows</a></li>
<li><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/FWP/fwp-ike-functions">IKE/AuthIP Functions</a></li>
<li><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/FWP/fwp-functions">WFP Functions</a></li>
</ul>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/fwpmk/nf-fwpmk-ikeextsagetbyid2">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/fwpmk/nf-fwpmk-ikeextsagetbyid2.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
