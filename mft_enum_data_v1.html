<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="MFT_ENUM_DATA_V1 - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>MFT_ENUM_DATA_V1 - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            MFT_ENUM_DATA_V1 - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntifs.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct {
  <a href="ulonglong" title="typedef unsigned __int64 ULONGLONG;">ULONGLONG</a> StartFileReferenceNumber;
  USN       LowUsn;
  USN       HighUsn;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>    MinMajorVersion;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>    MaxMajorVersion;
} MFT_ENUM_DATA_V1, *PMFT_ENUM_DATA_V1;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/ns-ntifs-mft_enum_data_v1">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// winioctl.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct {
  <a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a> StartFileReferenceNumber;
  USN       LowUsn;
  USN       HighUsn;
  <a href="word" title="typedef unsigned short WORD;">WORD</a>      MinMajorVersion;
  <a href="word" title="typedef unsigned short WORD;">WORD</a>      MaxMajorVersion;
} MFT_ENUM_DATA_V1, *PMFT_ENUM_DATA_V1;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ns-winioctl-mft_enum_data_v1">View the official Win32 API reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/mft_enum_data_v1.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntifs-mft_enum_data_v1)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>MFT_ENUM_DATA_V1</strong> structure contains information defining the boundaries for and starting place of an enumeration of update sequence number (USN) change journal records for ReFS volumes. It is used as the input buffer for the <strong><a href="fsctl_enum_usn_data" title="// CTL_CODE(0x0009, 0x02c, METHOD_NEITHER, FILE_ANY_ACCESS)&#10;#define FSCTL_ENUM_USN_DATA 0x000900B3">FSCTL_ENUM_USN_DATA</a></strong> control code.</p>

<h2 id="members">Members</h2>

<h3 id="startfilereferencenumber"><code>StartFileReferenceNumber</code></h3>

<p>The ordinal position within the files on the current volume at which the enumeration is to begin.</p>

<p>The first call to <strong><a href="fsctl_enum_usn_data" title="// CTL_CODE(0x0009, 0x02c, METHOD_NEITHER, FILE_ANY_ACCESS)&#10;#define FSCTL_ENUM_USN_DATA 0x000900B3">FSCTL_ENUM_USN_DATA</a></strong> during an enumeration must have the <strong>StartFileReferenceNumber</strong> member set to (<a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a>)0. Each call to <strong><a href="fsctl_enum_usn_data" title="// CTL_CODE(0x0009, 0x02c, METHOD_NEITHER, FILE_ANY_ACCESS)&#10;#define FSCTL_ENUM_USN_DATA 0x000900B3">FSCTL_ENUM_USN_DATA</a></strong> retrieves the starting point for the subsequent call as the first entry in the output buffer. Subsequent calls must be made with <strong>StartFileReferenceNumber</strong> set to this value.</p>

<h3 id="lowusn"><code>LowUsn</code></h3>

<p>The lower boundary of the range of USN values used to filter which records are returned. Only records whose last change journal USN is between or equal to the LowUsn and HighUsn member values are returned.</p>

<h3 id="highusn"><code>HighUsn</code></h3>

<p>The upper boundary of the range of USN values used to filter which files are returned.</p>

<h3 id="minmajorversion"><code>MinMajorVersion</code></h3>

<p>The minimum supported major version for the USN change journal.</p>

<h3 id="maxmajorversion"><code>MaxMajorVersion</code></h3>

<p>The maximum supported major version for the USN change journal.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td>2</td>
  <td>The data returned from <a href="fsctl_enum_usn_data" title="// CTL_CODE(0x0009, 0x02c, METHOD_NEITHER, FILE_ANY_ACCESS)&#10;#define FSCTL_ENUM_USN_DATA 0x000900B3">FSCTL_ENUM_USN_DATA</a> will contain <a href="usn_record_v2" title="typedef struct {&#10;  ULONG         RecordLength;&#10;  USHORT        MajorVersion;&#10;  USHORT        MinorVersion;&#10;  ULONGLONG     FileReferenceNumber;&#10;  ULONGLONG     ParentFileReferenceNumber;&#10;  USN           Usn;&#10;  LARGE_INTEGER TimeStamp;&#10;  ULONG         Reason;&#10;  ULONG         SourceInfo;&#10;  ULONG         SecurityId;&#10;  ULONG         FileAttributes;&#10;  USHORT        FileNameLength;&#10;  USHORT        FileNameOffset;&#10;  WCHAR         FileName[1];&#10;} USN_RECORD_V2, *PUSN_RECORD_V2;">USN_RECORD_V2</a> structures.</td>
</tr>
<tr>
  <td>3</td>
  <td>The data returned from <a href="fsctl_enum_usn_data" title="// CTL_CODE(0x0009, 0x02c, METHOD_NEITHER, FILE_ANY_ACCESS)&#10;#define FSCTL_ENUM_USN_DATA 0x000900B3">FSCTL_ENUM_USN_DATA</a> will contain <a href="usn_record_v2" title="typedef struct {&#10;  ULONG         RecordLength;&#10;  USHORT        MajorVersion;&#10;  USHORT        MinorVersion;&#10;  ULONGLONG     FileReferenceNumber;&#10;  ULONGLONG     ParentFileReferenceNumber;&#10;  USN           Usn;&#10;  LARGE_INTEGER TimeStamp;&#10;  ULONG         Reason;&#10;  ULONG         SourceInfo;&#10;  ULONG         SecurityId;&#10;  ULONG         FileAttributes;&#10;  USHORT        FileNameLength;&#10;  USHORT        FileNameOffset;&#10;  WCHAR         FileName[1];&#10;} USN_RECORD_V2, *PUSN_RECORD_V2;">USN_RECORD_V2</a> or <a href="usn_record_v3" title="typedef struct {&#10;  ULONG         RecordLength;&#10;  USHORT        MajorVersion;&#10;  USHORT        MinorVersion;&#10;  FILE_ID_128   FileReferenceNumber;&#10;  FILE_ID_128   ParentFileReferenceNumber;&#10;  USN           Usn;&#10;  LARGE_INTEGER TimeStamp;&#10;  ULONG         Reason;&#10;  ULONG         SourceInfo;&#10;  ULONG         SecurityId;&#10;  ULONG         FileAttributes;&#10;  USHORT        FileNameLength;&#10;  USHORT        FileNameOffset;&#10;  WCHAR         FileName[1];&#10;} USN_RECORD_V3, *PUSN_RECORD_V3;">USN_RECORD_V3</a> structures.</td>
</tr>
</tbody>
</table>

<h2 id="see-also">See also</h2>

<p><strong><a href="fsctl_enum_usn_data" title="// CTL_CODE(0x0009, 0x02c, METHOD_NEITHER, FILE_ANY_ACCESS)&#10;#define FSCTL_ENUM_USN_DATA 0x000900B3">FSCTL_ENUM_USN_DATA</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/ns-ntifs-mft_enum_data_v1">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntifs/ns-ntifs-mft_enum_data_v1.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Win32 API reference (ns-winioctl-mft_enum_data_v1)</h1>
</div>
<div class="ntdoc-description">
<h1>MFT_ENUM_DATA_V1 structure</h1>

<h2>Description</h2>

<p>Contains information defining the boundaries for and starting place of an enumeration of update
sequence number (USN) change journal records for ReFS volumes. It is used as the input buffer for the
<a href="fsctl_enum_usn_data" title="// CTL_CODE(0x0009, 0x02c, METHOD_NEITHER, FILE_ANY_ACCESS)&#10;#define FSCTL_ENUM_USN_DATA 0x000900B3">FSCTL_ENUM_USN_DATA</a> control code.</p>

<h2>Members</h2>

<h3><code>StartFileReferenceNumber</code></h3>

<p>The ordinal position within the files on the current volume at which the enumeration is to begin.</p>

<p>The first call to <a href="fsctl_enum_usn_data" title="// CTL_CODE(0x0009, 0x02c, METHOD_NEITHER, FILE_ANY_ACCESS)&#10;#define FSCTL_ENUM_USN_DATA 0x000900B3">FSCTL_ENUM_USN_DATA</a> during an
enumeration must have the <strong>StartFileReferenceNumber</strong> member set to
<code>(<a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a>)0</code>. Each call to
<strong><a href="fsctl_enum_usn_data" title="// CTL_CODE(0x0009, 0x02c, METHOD_NEITHER, FILE_ANY_ACCESS)&#10;#define FSCTL_ENUM_USN_DATA 0x000900B3">FSCTL_ENUM_USN_DATA</a></strong> retrieves the starting point for
the subsequent call as the first entry in the output buffer. Subsequent calls must be made with
<strong>StartFileReferenceNumber</strong> set to this value. For more information, see
<strong><a href="fsctl_enum_usn_data" title="// CTL_CODE(0x0009, 0x02c, METHOD_NEITHER, FILE_ANY_ACCESS)&#10;#define FSCTL_ENUM_USN_DATA 0x000900B3">FSCTL_ENUM_USN_DATA</a></strong>.</p>

<h3><code>LowUsn</code></h3>

<p>The lower boundary of the range of USN values used to filter which records are returned. Only records whose
last change journal USN is between or equal to the <strong>LowUsn</strong> and
<strong>HighUsn</strong> member values are returned.</p>

<h3><code>HighUsn</code></h3>

<p>The upper boundary of the range of USN values used to filter which files are returned.</p>

<h3><code>MinMajorVersion</code></h3>

<p>Indicates the minimum supported major version for the USN change journal.</p>

<h3><code>MaxMajorVersion</code></h3>

<p>Indicates the maximum supported major version for the USN change journal.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td>2</td>
  <td>The data returned from the <a href="fsctl_enum_usn_data" title="// CTL_CODE(0x0009, 0x02c, METHOD_NEITHER, FILE_ANY_ACCESS)&#10;#define FSCTL_ENUM_USN_DATA 0x000900B3">FSCTL_ENUM_USN_DATA</a> control code will contain <a href="usn_record_v2" title="typedef struct {&#10;  ULONG         RecordLength;&#10;  USHORT        MajorVersion;&#10;  USHORT        MinorVersion;&#10;  ULONGLONG     FileReferenceNumber;&#10;  ULONGLONG     ParentFileReferenceNumber;&#10;  USN           Usn;&#10;  LARGE_INTEGER TimeStamp;&#10;  ULONG         Reason;&#10;  ULONG         SourceInfo;&#10;  ULONG         SecurityId;&#10;  ULONG         FileAttributes;&#10;  USHORT        FileNameLength;&#10;  USHORT        FileNameOffset;&#10;  WCHAR         FileName[1];&#10;} USN_RECORD_V2, *PUSN_RECORD_V2;">USN_RECORD_V2</a> structures.</td>
</tr>
<tr>
  <td>3</td>
  <td>The data returned from the <a href="fsctl_enum_usn_data" title="// CTL_CODE(0x0009, 0x02c, METHOD_NEITHER, FILE_ANY_ACCESS)&#10;#define FSCTL_ENUM_USN_DATA 0x000900B3">FSCTL_ENUM_USN_DATA</a> control code will contain <a href="usn_record_v2" title="typedef struct {&#10;  ULONG         RecordLength;&#10;  USHORT        MajorVersion;&#10;  USHORT        MinorVersion;&#10;  ULONGLONG     FileReferenceNumber;&#10;  ULONGLONG     ParentFileReferenceNumber;&#10;  USN           Usn;&#10;  LARGE_INTEGER TimeStamp;&#10;  ULONG         Reason;&#10;  ULONG         SourceInfo;&#10;  ULONG         SecurityId;&#10;  ULONG         FileAttributes;&#10;  USHORT        FileNameLength;&#10;  USHORT        FileNameOffset;&#10;  WCHAR         FileName[1];&#10;} USN_RECORD_V2, *PUSN_RECORD_V2;">USN_RECORD_V2</a> or <a href="usn_record_v3" title="typedef struct {&#10;  ULONG         RecordLength;&#10;  USHORT        MajorVersion;&#10;  USHORT        MinorVersion;&#10;  FILE_ID_128   FileReferenceNumber;&#10;  FILE_ID_128   ParentFileReferenceNumber;&#10;  USN           Usn;&#10;  LARGE_INTEGER TimeStamp;&#10;  ULONG         Reason;&#10;  ULONG         SourceInfo;&#10;  ULONG         SecurityId;&#10;  ULONG         FileAttributes;&#10;  USHORT        FileNameLength;&#10;  USHORT        FileNameOffset;&#10;  WCHAR         FileName[1];&#10;} USN_RECORD_V3, *PUSN_RECORD_V3;">USN_RECORD_V3</a> structures.</td>
</tr>
</tbody>
</table>

<h2>See also</h2>

<p><a href="fsctl_enum_usn_data" title="// CTL_CODE(0x0009, 0x02c, METHOD_NEITHER, FILE_ANY_ACCESS)&#10;#define FSCTL_ENUM_USN_DATA 0x000900B3">FSCTL_ENUM_USN_DATA</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/FileIO/volume-management-structures">Volume Management Structures</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ns-winioctl-mft_enum_data_v1">View the official Win32 API reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/sdk-api/blob/docs/sdk-api-src/content/winioctl/ns-winioctl-mft_enum_data_v1.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
