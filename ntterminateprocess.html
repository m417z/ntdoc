<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NtTerminateProcess - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NtTerminateProcess - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NtTerminateProcess - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">#ifndef _NTPSAPI_H
//
// Processes
//
#if (PHNT_MODE != PHNT_MODE_KERNEL)

</span><span class="ntdoc-code-intro">/**
 * Terminates the specified process.
 *
 * \param ProcessHandle Optional. A handle to the process to be terminated. If this parameter is NULL, the calling process is terminated.
 * \param ExitStatus The exit status to be used by the process and the process&#x27;s termination status.
 * \return <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> Successful or errant status.
 * \sa https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/ntddk/nf-ntddk-zwterminateprocess
 */
</span><span class="ntdoc-code-body">NTSYSCALLAPI
<a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a>
NTAPI
NtTerminateProcess(
    _In_opt_ HANDLE ProcessHandle,
    _In_ <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> ExitStatus
    );
</span><span class="ntdoc-code-footer">
#endif
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/443d121781061210978931c1766974f1372e359a/phnt/include/ntpsapi.h#L2035">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">#ifndef _NTZWAPI_H

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NTSYSCALLAPI
<a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a>
NTAPI
ZwTerminateProcess(
    _In_opt_ HANDLE ProcessHandle,
    _In_ <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> ExitStatus
    );
</span><span class="ntdoc-code-footer">
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/443d121781061210978931c1766974f1372e359a/phnt/include/ntzwapi.h#L4691">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddk.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NTSYSAPI <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> ZwTerminateProcess(
  [in, optional] HANDLE   ProcessHandle,
  [in]           <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> ExitStatus
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/nf-ntddk-zwterminateprocess">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<p>Forces the process to terminate. This function is <a rel="noopener" target="_blank" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/ntddk/nf-ntddk-zwterminateprocess">documented in Windows Driver Kit</a>.</p>

<h1 id="parameters">Parameters</h1>

<ul>
<li><code>ProcessHandle</code> - an optional handle to a process granting <code><a href="process_terminate" title="#define PROCESS_TERMINATE 0x0001">PROCESS_TERMINATE</a></code> access or the <code><a href="ntcurrentprocess" title="#define NtCurrentProcess() ((HANDLE)(LONG_PTR)-1)">NtCurrentProcess</a></code> pseudo-handle. The <code>NULL</code> value indicates the current process.</li>
<li><code>ExitStatus</code> - the exit code to use for the process.</li>
</ul>

<h1 id="remarks">Remarks</h1>

<p>Note that specifying <code>NULL</code> as a process handle has a different semantic compared to using <code><a href="ntcurrentprocess" title="#define NtCurrentProcess() ((HANDLE)(LONG_PTR)-1)">NtCurrentProcess</a></code>. <code><a href="ntcurrentprocess" title="#define NtCurrentProcess() ((HANDLE)(LONG_PTR)-1)">NtCurrentProcess</a></code> immediately terminates the current process (without returning from the function) while <code>NULL</code> terminates all threads except for the calling, sets the exit status, and marks the process for self-delete. A second call to <code>NtTerminateProcess</code> with <code>NULL</code> completes termination.</p>

<p>To exit the current process gracefully, use <code><a href="rtlexituserprocess" title="_Analysis_noreturn_&#10;DECLSPEC_NORETURN&#10;NTSYSAPI&#10;VOID&#10;NTAPI&#10;RtlExitUserProcess(&#10;    _In_ NTSTATUS ExitStatus&#10;    );">RtlExitUserProcess</a></code>.</p>

<p>Setting <code>ExitStatus</code> to <code>DBG_TERMINATE_PROCESS</code> automatically clears the process's debug object.</p>

<p>The process object becomes signalled after termination.</p>

<h1 id="related-win32-api">Related Win32 API</h1>

<ul>
<li><a rel="noopener" target="_blank" href="https://learn.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminateprocess"><code>TerminateProcess</code></a></li>
</ul>

<h1 id="see-also">See also</h1>

<ul>
<li><code><a href="ntopenprocess" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtOpenProcess(&#10;    _Out_ PHANDLE ProcessHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _In_opt_ PCLIENT_ID ClientId&#10;    );">NtOpenProcess</a></code></li>
<li><code><a href="ntcreateprocess" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateProcess(&#10;    _Out_ PHANDLE ProcessHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_opt_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _In_ HANDLE ParentProcess,&#10;    _In_ BOOLEAN InheritObjectTable,&#10;    _In_opt_ HANDLE SectionHandle,&#10;    _In_opt_ HANDLE DebugPort,&#10;    _In_opt_ HANDLE TokenHandle&#10;    );">NtCreateProcess</a></code></li>
<li><code><a href="ntcreateuserprocess" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateUserProcess(&#10;    _Out_ PHANDLE ProcessHandle,&#10;    _Out_ PHANDLE ThreadHandle,&#10;    _In_ ACCESS_MASK ProcessDesiredAccess,&#10;    _In_ ACCESS_MASK ThreadDesiredAccess,&#10;    _In_opt_ PCOBJECT_ATTRIBUTES ProcessObjectAttributes,&#10;    _In_opt_ PCOBJECT_ATTRIBUTES ThreadObjectAttributes,&#10;    _In_ ULONG ProcessFlags, // PROCESS_CREATE_FLAGS_*&#10;    _In_ ULONG ThreadFlags, // THREAD_CREATE_FLAGS_*&#10;    _In_opt_ PRTL_USER_PROCESS_PARAMETERS ProcessParameters,&#10;    _Inout_ PPS_CREATE_INFO CreateInfo,&#10;    _In_opt_ PPS_ATTRIBUTE_LIST AttributeList&#10;    );">NtCreateUserProcess</a></code></li>
<li><code><a href="rtlexituserprocess" title="_Analysis_noreturn_&#10;DECLSPEC_NORETURN&#10;NTSYSAPI&#10;VOID&#10;NTAPI&#10;RtlExitUserProcess(&#10;    _In_ NTSTATUS ExitStatus&#10;    );">RtlExitUserProcess</a></code></li>
<li><code><a href="rtlexituserthread" title="_Analysis_noreturn_&#10;DECLSPEC_NORETURN&#10;NTSYSAPI&#10;VOID&#10;NTAPI&#10;RtlExitUserThread(&#10;    _In_ NTSTATUS ExitStatus&#10;    );">RtlExitUserThread</a></code></li>
<li><code><a href="ntterminatethread" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtTerminateThread(&#10;    _In_opt_ HANDLE ThreadHandle,&#10;    _In_ NTSTATUS ExitStatus&#10;    );">NtTerminateThread</a></code></li>
<li><code><a href="ntwaitforsingleobject" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtWaitForSingleObject(&#10;    _In_ HANDLE Handle,&#10;    _In_ BOOLEAN Alertable,&#10;    _In_opt_ PLARGE_INTEGER Timeout&#10;    );">NtWaitForSingleObject</a></code></li>
</ul>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ntterminateprocess.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ntddk-zwterminateprocess)</h1>
</div>
<div class="ntdoc-description">
<h2>Description</h2>

<p>The <strong>ZwTerminateProcess</strong> routine terminates a process and all of its threads.</p>

<h2>Parameters</h2>

<h3><code>ProcessHandle</code> [in, optional]</h3>

<p>A handle to the process object that represents the process to be terminated.</p>

<h3><code>ExitStatus</code> [in]</h3>

<p>An <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> value that the operating system uses as the final status for the process and each of its threads.</p>

<h2>Return value</h2>

<p><strong>ZwTerminateProcess</strong> returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if the operation succeeds. Additional return values include:</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>STATUS_OBJECT_TYPE_MISMATCH</strong></td>
  <td>The specified handle is not a process handle.</td>
</tr>
<tr>
  <td><strong>STATUS_INVALID_HANDLE</strong></td>
  <td>The specified handle is not valid.</td>
</tr>
<tr>
  <td><strong>STATUS_ACCESS_DENIED</strong></td>
  <td>The driver cannot access the specified process object.</td>
</tr>
<tr>
  <td><strong>STATUS_PROCESS_IS_TERMINATING</strong></td>
  <td>The specified process is already terminating.</td>
</tr>
</tbody>
</table>

<p>If the caller specifies the current process in the <em>ProcessHandle</em> parameter, <strong>ZwTerminateProcess</strong> does not return.</p>

<h2>Remarks</h2>

<p>To obtain a process handle that a driver can specify for the <em>ProcessHandle</em> parameter, the driver can call <a href="ntopenprocess" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtOpenProcess(&#10;    _Out_ PHANDLE ProcessHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _In_opt_ PCLIENT_ID ClientId&#10;    );">ZwOpenProcess</a>. The handle must be a <em>kernel handle</em>, a handle that can only be accessed in kernel mode. A handle is a kernel handle if it is created with the <a href="obj_kernel_handle" title="#define OBJ_KERNEL_HANDLE 0x00000200L">OBJ_KERNEL_HANDLE</a> flag. For more info see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wudfwdm/nf-wudfwdm-initializeobjectattributes">InitializeObjectAttributes</a>.</p>

<p>Drivers must not specify the current process if resources have not been freed from the kernel stack, because the operating system will not unwind the kernel stack for the calling thread.</p>

<p>If the call to this function occurs in user mode, you should use the name "NtTerminateProcess" instead of "<strong>ZwTerminateProcess</strong>".</p>

<p>For calls from kernel-mode drivers, the <strong>Nt<em>Xxx</em></strong> and <strong>Zw<em>Xxx</em></strong> versions of a Windows Native System Services routine can behave differently in the way that they handle and interpret input parameters. For more information about the relationship between the <strong>Nt<em>Xxx</em></strong> and <strong>Zw<em>Xxx</em></strong> versions of a routine, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/using-nt-and-zw-versions-of-the-native-system-services-routines">Using Nt and Zw Versions of the Native System Services Routines</a>.</p>

<h2>See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/using-nt-and-zw-versions-of-the-native-system-services-routines">Using Nt and Zw Versions of the Native System Services Routines</a></p>

<p><a href="ntopenprocess" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtOpenProcess(&#10;    _Out_ PHANDLE ProcessHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _In_opt_ PCLIENT_ID ClientId&#10;    );">ZwOpenProcess</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/nf-ntddk-zwterminateprocess">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddk/nf-ntddk-zwterminateprocess.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>NTinternals.net (undocumented.ntinternals.net)</h1>
</div>
<div class="ntdoc-description">
<p>This function is <a rel="noopener" target="_blank" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/ntddk/nf-ntddk-zwterminateprocess">documented in Windows Driver Kit</a>.</p>

<hr />

<h3>ProcessHandle</h3>

<p>If not specified, caller process is killed.</p>

<h1>See also</h1>

<ul>
<li><code><a href="ntcreateprocess" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtCreateProcess(&#10;    _Out_ PHANDLE ProcessHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_opt_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _In_ HANDLE ParentProcess,&#10;    _In_ BOOLEAN InheritObjectTable,&#10;    _In_opt_ HANDLE SectionHandle,&#10;    _In_opt_ HANDLE DebugPort,&#10;    _In_opt_ HANDLE TokenHandle&#10;    );">NtCreateProcess</a></code></li>
<li><code><a href="ntopenprocess" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtOpenProcess(&#10;    _Out_ PHANDLE ProcessHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ PCOBJECT_ATTRIBUTES ObjectAttributes,&#10;    _In_opt_ PCLIENT_ID ClientId&#10;    );">NtOpenProcess</a></code></li>
<li><code><a href="ldrshutdownprocess" title="_Analysis_noreturn_&#10;DECLSPEC_NORETURN&#10;NTSYSAPI&#10;VOID&#10;NTAPI&#10;LdrShutdownProcess(&#10;    VOID&#10;    );">LdrShutdownProcess</a></code></li>
</ul>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/undocumented.ntinternals.net/ntterminateprocess.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
