<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NET_PNP_EVENT - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NET_PNP_EVENT - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NET_PNP_EVENT - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// netpnp.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _NET_PNP_EVENT {
  NET_PNP_EVENT_CODE NetEvent;
  PVOID              Buffer;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>              BufferLength;
  <a href="ulong_ptr" title="typedef [public] unsigned __int3264 ULONG_PTR;">ULONG_PTR</a>          NdisReserved[4];
  <a href="ulong_ptr" title="typedef [public] unsigned __int3264 ULONG_PTR;">ULONG_PTR</a>          TransportReserved[4];
  <a href="ulong_ptr" title="typedef [public] unsigned __int3264 ULONG_PTR;">ULONG_PTR</a>          TdiReserved[4];
  <a href="ulong_ptr" title="typedef [public] unsigned __int3264 ULONG_PTR;">ULONG_PTR</a>          TdiClientReserved[4];
} NET_PNP_EVENT, *PNET_PNP_EVENT;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/netpnp/ns-netpnp-_net_pnp_event">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/net_pnp_event.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-netpnp-_net_pnp_event)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>_NET_PNP_EVENT structure (netpnp.h)</h1>
<h2>Description</h2>
<p>The <strong>NET_PNP_EVENT</strong> structure describes a network Plug and Play (PnP) event, an NDIS PnP event, or a
power management event.</p>
<h2>Members</h2>
<h3><code>NetEvent</code></h3>
<p>An event code that describes the event as one of the following:</p>
<h4>NetEventSetPower</h4>
<p>Indicates that the power manager has sent a Set Power request, which specifies a transition to a
system power state. NDIS translates this state to an appropriate device power state for the
device.</p>
<p>For more information, see the Remarks section.</p>
<h4>NetEventQueryPower</h4>
<p>Indicates that the power manager has sent a Query Power request, which requests a transition to
a system power state. NDIS translates this state to an appropriate device power state for the
device.</p>
<p>For more information, see the Remarks section.</p>
<h4>NetEventQueryRemoveDevice</h4>
<p>Indicates that the PnP Manager has sent a Query Remove Device request. The PnP Manager sends
this request to query whether a device can be removed without disrupting operations.</p>
<h4>NetEventCancelRemoveDevice</h4>
<p>Indicates that the PnP Manager has sent a Cancel Remove Device request. The PnP Manager sends
this request to cancel the removal of a device after the PnP Manager sends a Query Remove Device request.</p>
<h4>NetEventReconfigure</h4>
<p>Indicates that the configuration has changed for a network component. For example, if a user,
through the Network and Dial-up Connections folder, changes the IP address for TCP/IP, NDIS indicates
the
<strong>NetEventReconfigure</strong> event to the TCP/IP protocol. Also, an intermediate driver typically uses
this event as a trigger to call the
<a href="ndisiminitializedeviceinstanceex" title="NDIS_STATUS NdisIMInitializeDeviceInstanceEx(&#10;  [in]           NDIS_HANDLE  DriverHandle,&#10;  [in]           PNDIS_STRING DriverInstance,&#10;  [in, optional] NDIS_HANDLE  DeviceContext&#10;);">NdisIMInitializeDeviceInstanceEx</a> function and start its virtual miniports. For more information
about
<strong>NetEventReconfigure</strong>, see
NetEventIMReEnableDevice.</p>
<h4>NetEventBindList</h4>
<p>Indicates to a protocol driver that its bind list processing order has been reconfigured. This
list indicates a relative order that applies to bindings when processing, for example, a user request
that might be routed to one of several bindings. The buffer that is passed with this event contains a
list of device names that are formatted as null-terminated Unicode strings. The format of each device
name is identical to the
<strong>AdapterName</strong> member that is passed to a call to the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_bind_adapter_ex">ProtocolBindAdapterEx</a> function.</p>
<h4>NetEventBindsComplete</h4>
<p>Indicates that a protocol driver has bound to all the NICs that it can bind to. NDIS will not
indicate any more NICs to the protocol unless a PnP NIC is plugged into the system.</p>
<h4>NetEventPnPCapabilities</h4>
<p>Indicates that the user enabled or disabled the wake-up capabilities of the underlying adapter.
(The binding is specified by the
<em>ProtocolBindingContext</em> parameter that is passed to the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_net_pnp_event">ProtocolNetPnPEvent</a> function.)</p>
<h4>NetEventPause</h4>
<p>Indicates that the specified protocol binding should enter the
Pausing state. The binding will enter the
Paused state after NDIS has completed all the outstanding send requests for the
binding.</p>
<h4>NetEventRestart</h4>
<p>Indicates that the specified protocol binding has entered the
Restarting state. After the protocol driver is ready to resume send and receive operations for
the binding, the binding enters the
Running state.</p>
<h4>NetEventPortActivation</h4>
<p>Indicates the activation of a list of ports that are associated with the specified
binding.</p>
<h4>NetEventPortDeactivation</h4>
<p>Indicates the deactivation of a list of ports that are associated with the specified
binding.</p>
<h4>NetEventIMReEnableDevice</h4>
<p>Indicates that the configuration has changed for a virtual miniport of an NDIS 6.0 or later
intermediate driver.
<strong>NetEventIMReEnableDevice</strong> is similar to the
<strong>NetEventReconfigure</strong> event except that the intermediate driver receives this event for a single
virtual miniport and the
<strong>NetEventReconfigure</strong> event applies to all the intermediate driver's virtual miniports. For
example, an intermediate driver receives the
<strong>NetEventIMReEnableDevice</strong> event when a user disables and then enables a single virtual miniport
from the Device Manager or another source. For examples of intermediate driver power management, see the
<a rel="noopener" target="_blank" href="https://go.microsoft.com/fwlink/p/?LinkId=617916">NDIS MUX Intermediate Driver and Notify Object</a> driver sample available in the <a rel="noopener" target="_blank" href="https://go.microsoft.com/fwlink/p/?LinkId=616507">Windows driver samples</a> repository on GitHub.</p>
<h4>NetEventNDKEnable</h4>
<p>Indicates that Network Direct Kernel (NDK) is currently enabled.</p>
<h4>NetEventNDKDisable</h4>
<p>Indicates that NDK is currently disabled.</p>
<h4>NetEventFilterPreDetach</h4>
<p>Indicates that a filter is about to be detached, so that the filter can perform any necessary cleanup that isn't possible in the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-filter_detach">FilterDetach</a> handler (because the OID and indication paths are closed at that time).</p>
<h4>NetEventBindFailed</h4>
<p>Indicates that a binding event failure has occurred.</p>
<h4>NetEventSwitchActivate</h4>
<p>Indicates that the Hyper-V Extensible Switch has completed activation, and switch extensions can now safely query for further switch configuration. The indication is only used in the Hyper-V Extensible Switch stack, issued by the extension miniport. See <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/querying-the-hyper-v-extensible-switch-configuration">Querying the Hyper-V Extensible Switch Configuration</a> and <a href="ndis_switch_parameters" title="typedef struct _NDIS_SWITCH_PARAMETERS {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  ULONG                    Flags;&#10;  NDIS_SWITCH_NAME         SwitchName;&#10;  NDIS_SWITCH_FRIENDLYNAME SwitchFriendlyName;&#10;  UINT32                   NumSwitchPorts;&#10;  BOOLEAN                  IsActive;&#10;} NDIS_SWITCH_PARAMETERS, *PNDIS_SWITCH_PARAMETERS;">NDIS_SWITCH_PARAMETERS</a> for more details.</p>
<h4>NetEventInhibitBindsAbove</h4>
<p>A synchronous event that prevents other filters and protocols from binding to the miniport adapter. Any filters or protocols that were previously bound will be unbound before the event completes. The usage rules are below.</p>
<ul>
<li>
Avoid leaving the miniport adapter in the inhibit state, for longer than 1000 milliseconds.
</li>
<li>
This event can only be issued after <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a> begins and must not be issued after <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_halt">MiniportHaltEx</a> returns.
</li>
<li>
This event can only be issued when the miniport adapter is in a D0 state.
</li>
<li>
Because this event is blocking, it should not be issued by any context that would cause a deadlock.
</li>
<li>
Locks must not be held while issuing this event.
</li>
<li>
This event must be issued at PASSIVE_LEVEL.
</li>
</ul>
<p>This event is available starting with NDIS version 6.50
and must be used with V2 or later version of <strong>NET_PNP_EVENT</strong>. This event can optionally be issued by a miniport driver. Protocols and filters cannot receive this event or issue it.</p>
<h4>NetEventAllowBindsAbove</h4>
<p>An asynchronous event that reverses the effects of NetEventInhibitBindsAbove. The usage rules are below.</p>
<ul>
<li>
This event can only be issued after <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a> begins and must not be issued after <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_halt">MiniportHaltEx</a> returns.
</li>
<li>
This event can only be issued when the miniport adapter is in a D0 state.
</li>
<li>
Locks must not be held while issuing this event.
</li>
<li>
This event must be issued at PASSIVE_LEVEL.
</li>
</ul>
<p>This event is available starting with NDIS version 6.50 and must be used with V2 or later version of <strong>NET_PNP_EVENT</strong>. This event can optionally be issued by a miniport driver. Protocols and filters cannot receive this event or issue it.</p>
<h4>NetEventRequirePause</h4>
<p>A synchronous event that indicates the protocols and filters including the miniport adapter must be paused. The protocols and filters and the miniport adapter are guaranteed to be paused when the <a href="ndismnetpnpevent" title="NDIS_STATUS NdisMNetPnPEvent(&#10;  [in] NDIS_HANDLE                 MiniportAdapterHandle,&#10;       PNET_PNP_EVENT_NOTIFICATION NetPnPEventNotification&#10;);">NdisMNetPnPEvent</a> routine returns. The usage rules are below.</p>
<ul>
<li>
Avoid delaying between NetEventAllowStart and NetEventRequirePause events for longer than 1000 milliseconds to prevent delay in user applications.
</li>
<li>
This event can only be issued after <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a> begins and must not be issued after <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_halt">MiniportHaltEx</a> returns.
</li>
<li>
There is no guarantee that NDIS will call <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_pause">MiniportPause</a> after this event is issued. In particular, if your miniport adapter is already paused, NDIS won't introduce an extra start-pause loop. This means that the amount of times <em>MiniportPause</em> called is not greater than, less than, or equal to the amount this event is issued.
</li>
<li>
Because this event is blocking, it should not be issued by any context that would cause a deadlock.
</li>
<li>
Locks must not be held while issuing this event.
</li>
</ul>
<p>This event is available starting with NDIS version 6.50 and must be used with V2 or later version of <strong>NET_PNP_EVENT</strong>. This event can optionally be issued by a miniport driver. Protocols and filters cannot receive this event or issue it.</p>
<h4>NetEventAllowStart</h4>
<p>An asynchronous event that indicates the protocols and filters including the miniport adapter does not need to be paused. The usage rules are below. There is no guaranteed pause state for any driver in the protocols and filters after the <a href="ndismnetpnpevent" title="NDIS_STATUS NdisMNetPnPEvent(&#10;  [in] NDIS_HANDLE                 MiniportAdapterHandle,&#10;       PNET_PNP_EVENT_NOTIFICATION NetPnPEventNotification&#10;);">NdisMNetPnPEvent</a> routine returns.</p>
<ul>
<li>
This event can only be issued after <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a> begins and must not be issued after <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_halt">MiniportHaltEx</a> returns.
</li>
<li>
Because this event is blocking, it should not be issued by any context that would cause a deadlock.
</li>
<li>
Locks must not be held while issuing this event.
</li>
</ul>
<p>This event is available starting with NDIS version 6.50 and must be used with V2 or later version of <strong>NET_PNP_EVENT</strong>. This event can optionally be issued by a miniport driver. Protocols and filters cannot receive this event or issue it.</p>
<h3><code>Buffer</code></h3>
<p>The address of a buffer that contains information that is specific to the event indicated in the
<strong>NetEvent</strong> member. For each type of event, the buffer contains the following information:</p>
<h4>NetEventSetPower</h4>
<p>The buffer contains the device power state to which the device is transitioning.</p>
<p>When NDIS calls a protocol driver's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_net_pnp_event">ProtocolNetPnPEvent</a> function,
the device state is <a href="ndis_device_power_state" title="typedef enum _NDIS_DEVICE_POWER_STATE {&#10;  NdisDeviceStateUnspecified,&#10;  NdisDeviceStateD0,&#10;  NdisDeviceStateD1,&#10;  NdisDeviceStateD2,&#10;  NdisDeviceStateD3,&#10;  NdisDeviceStateMaximum&#10;} NDIS_DEVICE_POWER_STATE, *PNDIS_DEVICE_POWER_STATE;">NDIS_DEVICE_POWER_STATE</a>, which can be one of the following values:</p>
<h5>NdisDeviceStateUnspecified</h5>
<p>The network device does not support power management.</p>
<h5>NdisDeviceStateD0</h5>
<p>The fully powered state, in which the device delivers full functionality and
performance.</p>
<h5>NdisDeviceStateD1</h5>
<p>A low-power state, in which transmit requests from the host are not honored by the device,
data received by the device is not transferred to host memory, and no interrupts can occur. Some
device context may be lost. Depending on the capabilities of the NIC and its miniport driver, the
device might be able to generate a wake-up signal.</p>
<h5>NdisDeviceStateD2</h5>
<p>A low-power state that is similar to
<strong>NdisDeviceStateD1</strong>, except that more power and less context are typically saved and more time
is required to transition to the fully powered state.</p>
<h5>NdisDeviceStateD3</h5>
<p>The off state, in which power has been fully removed from the device.</p>
<p>For protocol drivers,
<strong>NdisDeviceStateD0</strong> means that the NIC is fully powered and is available for normal operations.
Any other device state means that the device is not fully powered and is not available for sending and
receiving network data.</p>
<h4>NetEventQueryPower</h4>
<p>The buffer contains the device power state that is requested for the device. The device state is
<a href="ndis_device_power_state" title="typedef enum _NDIS_DEVICE_POWER_STATE {&#10;  NdisDeviceStateUnspecified,&#10;  NdisDeviceStateD0,&#10;  NdisDeviceStateD1,&#10;  NdisDeviceStateD2,&#10;  NdisDeviceStateD3,&#10;  NdisDeviceStateMaximum&#10;} NDIS_DEVICE_POWER_STATE, *PNDIS_DEVICE_POWER_STATE;">NDIS_DEVICE_POWER_STATE</a> (which is described in the
<strong>NetEventSetPower</strong> value description).</p>
<h4>NetEventQueryRemoveDevice</h4>
<p>The buffer contents are <strong>NULL</strong>.</p>
<h4>NetEventCancelRemoveDevice</h4>
<p>The buffer contents are <strong>NULL</strong>.</p>
<h4>NetEventReconfigure</h4>
<p>The buffer can contain protocol-specific data. The protocol driver is responsible for validating
this data.</p>
<h4>NetEventBindList</h4>
<p>The buffer contains a revised binding list for the network component that the
<a href="net_pnp_event_notification" title="typedef struct _NET_PNP_EVENT_NOTIFICATION {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  NDIS_PORT_NUMBER         PortNumber;&#10;  NET_PNP_EVENT            NetPnPEvent;&#10;  ULONG                    Flags;&#10;  NDIS_NIC_SWITCH_ID       SwitchId;&#10;  NDIS_NIC_SWITCH_VPORT_ID VPortId;&#10;} NET_PNP_EVENT_NOTIFICATION, *PNET_PNP_EVENT_NOTIFICATION;">NET_PNP_EVENT_NOTIFICATION</a> structure is being passed to. The bind list, which is a series of
null-terminated Unicode strings, has a REG_MULTI_SZ format. Each of the strings is an adapter name.
TDI clients that are bound to a protocol use this bind list to reorder their bindings. The protocol
driver is responsible for validating this list.</p>
<h4>NetEventBindsComplete</h4>
<p>The buffer contents are <strong>NULL</strong>.</p>
<h4>NetEventPnPCapabilities</h4>
<p>The buffer is a <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> that contains a bitmask. When the NDIS_DEVICE_WAKE_UP_ENABLE flag is set
in the bitmask, the wake-up capabilities of the NIC are enabled. Otherwise, the NIC's wake-up
capabilities are disabled. (The binding is specified by the
<em>ProtocolBindingContext</em> parameter that is passed to
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_net_pnp_event">ProtocolNetPnPEvent</a>.) When set
to zero, this flag indicates that the NIC's wake-up capabilities are disabled.</p>
<h4>NetEventPause</h4>
<p>The buffer contains an
<a href="ndis_protocol_pause_parameters" title="typedef struct _NDIS_PROTOCOL_PAUSE_PARAMETERS {&#10;  NDIS_OBJECT_HEADER Header;&#10;  ULONG              Flags;&#10;  ULONG              PauseReason;&#10;} NDIS_PROTOCOL_PAUSE_PARAMETERS, *PNDIS_PROTOCOL_PAUSE_PARAMETERS;">NDIS_PROTOCOL_PAUSE_PARAMETERS</a> structure.</p>
<h4>NetEventRestart</h4>
<p>The buffer might contain NULL or an
<a href="ndis_protocol_restart_parameters" title="typedef struct _NDIS_PROTOCOL_RESTART_PARAMETERS {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  PUCHAR                   FilterModuleNameBuffer;&#10;  ULONG                    FilterModuleNameBufferLength;&#10;  PNDIS_RESTART_ATTRIBUTES RestartAttributes;&#10;  NET_IFINDEX              BoundIfIndex;&#10;  NET_LUID                 BoundIfNetluid;&#10;  ULONG                    Flags;&#10;} NDIS_PROTOCOL_RESTART_PARAMETERS, *PNDIS_PROTOCOL_RESTART_PARAMETERS;">NDIS_PROTOCOL_RESTART_PARAMETERS</a> structure. NDIS provides a pointer to an
<a href="ndis_restart_attributes" title="typedef struct _NDIS_RESTART_ATTRIBUTES {&#10;  PNDIS_RESTART_ATTRIBUTES Next;&#10;  NDIS_OID                 Oid;&#10;  ULONG                    DataLength;&#10;  UCHAR                    Data[1];&#10;} NDIS_RESTART_ATTRIBUTES, *PNDIS_RESTART_ATTRIBUTES;">NDIS_RESTART_ATTRIBUTES</a> structure
in the
<strong>RestartAttributes</strong> member of the <a href="ndis_protocol_restart_parameters" title="typedef struct _NDIS_PROTOCOL_RESTART_PARAMETERS {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  PUCHAR                   FilterModuleNameBuffer;&#10;  ULONG                    FilterModuleNameBufferLength;&#10;  PNDIS_RESTART_ATTRIBUTES RestartAttributes;&#10;  NET_IFINDEX              BoundIfIndex;&#10;  NET_LUID                 BoundIfNetluid;&#10;  ULONG                    Flags;&#10;} NDIS_PROTOCOL_RESTART_PARAMETERS, *PNDIS_PROTOCOL_RESTART_PARAMETERS;">NDIS_PROTOCOL_RESTART_PARAMETERS</a> structure.</p>
<p><strong>Note</strong> If the buffer is NULL, the restart attributes have not changed since the previous restart.</p>
<h4>NetEventPortActivation</h4>
<p>The buffer contains the first entry in a list of
<a href="ndis_port" title="typedef struct _NDIS_PORT {&#10;  PNDIS_PORT                Next;&#10;  PVOID                     NdisReserved;&#10;  PVOID                     MiniportReserved;&#10;  PVOID                     ProtocolReserved;&#10;  NDIS_PORT_CHARACTERISTICS PortCharacteristics;&#10;} NDIS_PORT, *PNDIS_PORT;">NDIS_PORT</a> structures that identify the ports
that NDIS will activate. You can use the
<strong>Next</strong> member of the <a href="ndis_port" title="typedef struct _NDIS_PORT {&#10;  PNDIS_PORT                Next;&#10;  PVOID                     NdisReserved;&#10;  PVOID                     MiniportReserved;&#10;  PVOID                     ProtocolReserved;&#10;  NDIS_PORT_CHARACTERISTICS PortCharacteristics;&#10;} NDIS_PORT, *PNDIS_PORT;">NDIS_PORT</a> structure to get the next structure in the list.</p>
<h4>NetEventPortDeactivation</h4>
<p>The buffer contains an array of port numbers, of type NDIS_PORT_NUMBER (defined as <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>), that
identify the NDIS ports that NDIS will deactivate. To calculate the number of elements in the array,
divide the value of the
<strong>BufferLength</strong> member, which is in the <strong>NET_PNP_EVENT</strong> structure that is specified in the
<strong>NetPnPEvent</strong> member of
<a href="net_pnp_event_notification" title="typedef struct _NET_PNP_EVENT_NOTIFICATION {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  NDIS_PORT_NUMBER         PortNumber;&#10;  NET_PNP_EVENT            NetPnPEvent;&#10;  ULONG                    Flags;&#10;  NDIS_NIC_SWITCH_ID       SwitchId;&#10;  NDIS_NIC_SWITCH_VPORT_ID VPortId;&#10;} NET_PNP_EVENT_NOTIFICATION, *PNET_PNP_EVENT_NOTIFICATION;">NET_PNP_EVENT_NOTIFICATION</a>,
by
sizeof(NDIS_PORT_NUMBER).</p>
<h4>NetEventIMReEnableDevice</h4>
<p>The buffer contains a pointer to a variable of type NDIS_STRING that contains a null-terminated
Unicode string that names the device object of a virtual miniport for the device that is being
enabled. The string is a full path name—for example,
\Device\<em>DeviceName</em>.</p>
<h4>NetEventNDKEnable</h4>
<p>The <strong>Buffer</strong> member is <strong>NULL</strong>.</p>
<h4>NetEventNDKDisable</h4>
<p>The <strong>Buffer</strong> member is <strong>NULL</strong>.</p>
<h4>NetEventFilterPreDetach</h4>
<p>The <strong>Buffer</strong> member is <strong>NULL</strong>.</p>
<h4>NetEventBindFailed</h4>
<p>The buffer contains an <a href="ndis_bind_failed_notification" title="typedef struct _NDIS_BIND_FAILED_NOTIFICATION {&#10;  NDIS_OBJECT_HEADER Header;&#10;  NET_LUID           MiniportNetLuid;&#10;} NDIS_BIND_FAILED_NOTIFICATION, *PNDIS_BIND_FAILED_NOTIFICATION;">NDIS_BIND_FAILED_NOTIFICATION</a> structure.</p>
<h4>NetEventSwitchActivate</h4>
<p>The buffer contents are NULL.</p>
<h4>NetEventAllowBindsAbove</h4>
<p>The buffer contents are NULL.</p>
<h4>NetEventInhibitBindsAbove</h4>
<p>The buffer contents are NULL.</p>
<h4>NetEventAllowStart</h4>
<p>The buffer contents are NULL.</p>
<h4>NetEventRequirePause</h4>
<p>The buffer contents are NULL.</p>
<h3><code>BufferLength</code></h3>
<p>The number of bytes of event-specific information at
<strong>Buffer</strong>.</p>
<h3><code>NdisReserved</code></h3>
<p>An area reserved for used by NDIS.</p>
<h3><code>TransportReserved</code></h3>
<p>An area reserved for used by the transport driver.</p>
<h3><code>TdiReserved</code></h3>
<p>An area reserved for used by TDI.</p>
<h3><code>TdiClientReserved</code></h3>
<p>An area reserved for used by a TDI client.</p>
<h5>- Buffer.NetEventAllowBindsAbove</h5>
<p>The buffer contents are NULL.</p>
<h5>- Buffer.NetEventAllowStart</h5>
<p>The buffer contents are NULL.</p>
<h5>- Buffer.NetEventBindFailed</h5>
<p>The buffer contains an <a href="ndis_bind_failed_notification" title="typedef struct _NDIS_BIND_FAILED_NOTIFICATION {&#10;  NDIS_OBJECT_HEADER Header;&#10;  NET_LUID           MiniportNetLuid;&#10;} NDIS_BIND_FAILED_NOTIFICATION, *PNDIS_BIND_FAILED_NOTIFICATION;">NDIS_BIND_FAILED_NOTIFICATION</a> structure.</p>
<h5>- Buffer.NetEventBindList</h5>
<p>The buffer contains a revised binding list for the network component that the
<a href="net_pnp_event_notification" title="typedef struct _NET_PNP_EVENT_NOTIFICATION {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  NDIS_PORT_NUMBER         PortNumber;&#10;  NET_PNP_EVENT            NetPnPEvent;&#10;  ULONG                    Flags;&#10;  NDIS_NIC_SWITCH_ID       SwitchId;&#10;  NDIS_NIC_SWITCH_VPORT_ID VPortId;&#10;} NET_PNP_EVENT_NOTIFICATION, *PNET_PNP_EVENT_NOTIFICATION;">NET_PNP_EVENT_NOTIFICATION</a> structure is being passed to. The bind list, which is a series of
null-terminated Unicode strings, has a REG_MULTI_SZ format. Each of the strings is an adapter name.
TDI clients that are bound to a protocol use this bind list to reorder their bindings. The protocol
driver is responsible for validating this list.</p>
<h5>- Buffer.NetEventBindsComplete</h5>
<p>The buffer contents are <strong>NULL</strong>.</p>
<h5>- Buffer.NetEventCancelRemoveDevice</h5>
<p>The buffer contents are <strong>NULL</strong>.</p>
<h5>- Buffer.NetEventFilterPreDetach</h5>
<p>The <strong>Buffer</strong> member is <strong>NULL</strong>.</p>
<h5>- Buffer.NetEventIMReEnableDevice</h5>
<p>The buffer contains a pointer to a variable of type NDIS_STRING that contains a null-terminated
Unicode string that names the device object of a virtual miniport for the device that is being
enabled. The string is a full path name—for example,
\Device\<em>DeviceName</em>.</p>
<h5>- Buffer.NetEventInhibitBindsAbove</h5>
<p>The buffer contents are NULL.</p>
<h5>- Buffer.NetEventNDKDisable</h5>
<p>The <strong>Buffer</strong> member is <strong>NULL</strong>.</p>
<h5>- Buffer.NetEventNDKEnable</h5>
<p>The <strong>Buffer</strong> member is <strong>NULL</strong>.</p>
<h5>- Buffer.NetEventPause</h5>
<p>The buffer contains an
<a href="ndis_protocol_pause_parameters" title="typedef struct _NDIS_PROTOCOL_PAUSE_PARAMETERS {&#10;  NDIS_OBJECT_HEADER Header;&#10;  ULONG              Flags;&#10;  ULONG              PauseReason;&#10;} NDIS_PROTOCOL_PAUSE_PARAMETERS, *PNDIS_PROTOCOL_PAUSE_PARAMETERS;">NDIS_PROTOCOL_PAUSE_PARAMETERS</a> structure.</p>
<h5>- Buffer.NetEventPnPCapabilities</h5>
<p>The buffer is a <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> that contains a bitmask. When the NDIS_DEVICE_WAKE_UP_ENABLE flag is set
in the bitmask, the wake-up capabilities of the NIC are enabled. Otherwise, the NIC's wake-up
capabilities are disabled. (The binding is specified by the
<em>ProtocolBindingContext</em> parameter that is passed to
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_net_pnp_event">ProtocolNetPnPEvent</a>.) When set
to zero, this flag indicates that the NIC's wake-up capabilities are disabled.</p>
<h5>- Buffer.NetEventPortActivation</h5>
<p>The buffer contains the first entry in a list of
<a href="ndis_port" title="typedef struct _NDIS_PORT {&#10;  PNDIS_PORT                Next;&#10;  PVOID                     NdisReserved;&#10;  PVOID                     MiniportReserved;&#10;  PVOID                     ProtocolReserved;&#10;  NDIS_PORT_CHARACTERISTICS PortCharacteristics;&#10;} NDIS_PORT, *PNDIS_PORT;">NDIS_PORT</a> structures that identify the ports
that NDIS will activate. You can use the
<strong>Next</strong> member of the <a href="ndis_port" title="typedef struct _NDIS_PORT {&#10;  PNDIS_PORT                Next;&#10;  PVOID                     NdisReserved;&#10;  PVOID                     MiniportReserved;&#10;  PVOID                     ProtocolReserved;&#10;  NDIS_PORT_CHARACTERISTICS PortCharacteristics;&#10;} NDIS_PORT, *PNDIS_PORT;">NDIS_PORT</a> structure to get the next structure in the list.</p>
<h5>- Buffer.NetEventPortDeactivation</h5>
<p>The buffer contains an array of port numbers, of type NDIS_PORT_NUMBER (defined as <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>), that
identify the NDIS ports that NDIS will deactivate. To calculate the number of elements in the array,
divide the value of the
<strong>BufferLength</strong> member, which is in the <strong>NET_PNP_EVENT</strong> structure that is specified in the
<strong>NetPnPEvent</strong> member of
<a href="net_pnp_event_notification" title="typedef struct _NET_PNP_EVENT_NOTIFICATION {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  NDIS_PORT_NUMBER         PortNumber;&#10;  NET_PNP_EVENT            NetPnPEvent;&#10;  ULONG                    Flags;&#10;  NDIS_NIC_SWITCH_ID       SwitchId;&#10;  NDIS_NIC_SWITCH_VPORT_ID VPortId;&#10;} NET_PNP_EVENT_NOTIFICATION, *PNET_PNP_EVENT_NOTIFICATION;">NET_PNP_EVENT_NOTIFICATION</a>,
by
sizeof(NDIS_PORT_NUMBER).</p>
<h5>- Buffer.NetEventQueryPower</h5>
<p>The buffer contains the device power state that is requested for the device. The device state is
<a href="ndis_device_power_state" title="typedef enum _NDIS_DEVICE_POWER_STATE {&#10;  NdisDeviceStateUnspecified,&#10;  NdisDeviceStateD0,&#10;  NdisDeviceStateD1,&#10;  NdisDeviceStateD2,&#10;  NdisDeviceStateD3,&#10;  NdisDeviceStateMaximum&#10;} NDIS_DEVICE_POWER_STATE, *PNDIS_DEVICE_POWER_STATE;">NDIS_DEVICE_POWER_STATE</a> (which is described in the
<strong>NetEventSetPower</strong> value description).</p>
<h5>- Buffer.NetEventQueryRemoveDevice</h5>
<p>The buffer contents are <strong>NULL</strong>.</p>
<h5>- Buffer.NetEventReconfigure</h5>
<p>The buffer can contain protocol-specific data. The protocol driver is responsible for validating
this data.</p>
<h5>- Buffer.NetEventRequirePause</h5>
<p>The buffer contents are NULL.</p>
<h5>- Buffer.NetEventRestart</h5>
<p>The buffer might contain NULL or an
<a href="ndis_protocol_restart_parameters" title="typedef struct _NDIS_PROTOCOL_RESTART_PARAMETERS {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  PUCHAR                   FilterModuleNameBuffer;&#10;  ULONG                    FilterModuleNameBufferLength;&#10;  PNDIS_RESTART_ATTRIBUTES RestartAttributes;&#10;  NET_IFINDEX              BoundIfIndex;&#10;  NET_LUID                 BoundIfNetluid;&#10;  ULONG                    Flags;&#10;} NDIS_PROTOCOL_RESTART_PARAMETERS, *PNDIS_PROTOCOL_RESTART_PARAMETERS;">NDIS_PROTOCOL_RESTART_PARAMETERS</a> structure. NDIS provides a pointer to an
<a href="ndis_restart_attributes" title="typedef struct _NDIS_RESTART_ATTRIBUTES {&#10;  PNDIS_RESTART_ATTRIBUTES Next;&#10;  NDIS_OID                 Oid;&#10;  ULONG                    DataLength;&#10;  UCHAR                    Data[1];&#10;} NDIS_RESTART_ATTRIBUTES, *PNDIS_RESTART_ATTRIBUTES;">NDIS_RESTART_ATTRIBUTES</a> structure
in the
<strong>RestartAttributes</strong> member of the <a href="ndis_protocol_restart_parameters" title="typedef struct _NDIS_PROTOCOL_RESTART_PARAMETERS {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  PUCHAR                   FilterModuleNameBuffer;&#10;  ULONG                    FilterModuleNameBufferLength;&#10;  PNDIS_RESTART_ATTRIBUTES RestartAttributes;&#10;  NET_IFINDEX              BoundIfIndex;&#10;  NET_LUID                 BoundIfNetluid;&#10;  ULONG                    Flags;&#10;} NDIS_PROTOCOL_RESTART_PARAMETERS, *PNDIS_PROTOCOL_RESTART_PARAMETERS;">NDIS_PROTOCOL_RESTART_PARAMETERS</a> structure.</p>
<p><strong>Note</strong> If the buffer is NULL, the restart attributes have not changed since the previous restart.</p>
<h5>- Buffer.NetEventSetPower</h5>
<p>The buffer contains the device power state to which the device is transitioning.</p>
<p>When NDIS calls a protocol driver's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_net_pnp_event">ProtocolNetPnPEvent</a> function,
the device state is <a href="ndis_device_power_state" title="typedef enum _NDIS_DEVICE_POWER_STATE {&#10;  NdisDeviceStateUnspecified,&#10;  NdisDeviceStateD0,&#10;  NdisDeviceStateD1,&#10;  NdisDeviceStateD2,&#10;  NdisDeviceStateD3,&#10;  NdisDeviceStateMaximum&#10;} NDIS_DEVICE_POWER_STATE, *PNDIS_DEVICE_POWER_STATE;">NDIS_DEVICE_POWER_STATE</a>, which can be one of the following values:</p>
<h5>NetEventSetPower.NdisDeviceStateUnspecified</h5>
<p>The network device does not support power management.</p>
<h5>NetEventSetPower.NdisDeviceStateD0</h5>
<p>The fully powered state, in which the device delivers full functionality and
performance.</p>
<h5>NetEventSetPower.NdisDeviceStateD1</h5>
<p>A low-power state, in which transmit requests from the host are not honored by the device,
data received by the device is not transferred to host memory, and no interrupts can occur. Some
device context may be lost. Depending on the capabilities of the NIC and its miniport driver, the
device might be able to generate a wake-up signal.</p>
<h5>NetEventSetPower.NdisDeviceStateD2</h5>
<p>A low-power state that is similar to
<strong>NdisDeviceStateD1</strong>, except that more power and less context are typically saved and more time
is required to transition to the fully powered state.</p>
<h5>NetEventSetPower.NdisDeviceStateD3</h5>
<p>The off state, in which power has been fully removed from the device.</p>
<p>For protocol drivers,
<strong>NdisDeviceStateD0</strong> means that the NIC is fully powered and is available for normal operations.
Any other device state means that the device is not fully powered and is not available for sending and
receiving network data.</p>
<h5>- Buffer.NetEventSwitchActivate</h5>
<p>The buffer contents are NULL.</p>
<h5>- NetEvent.NetEventAllowBindsAbove</h5>
<p>An asynchronous event that reverses the effects of NetEventInhibitBindsAbove. The usage rules are below.</p>
<ul>
<li>
This event can only be issued after <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a> begins and must not be issued after <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_halt">MiniportHaltEx</a> returns.
</li>
<li>
This event can only be issued when the miniport adapter is in a D0 state.
</li>
<li>
Locks must not be held while issuing this event.
</li>
<li>
This event must be issued at PASSIVE_LEVEL.
</li>
</ul>
<p>This event is available starting with NDIS version 6.50 and must be used with V2 or later version of <strong>NET_PNP_EVENT</strong>. This event can optionally be issued by a miniport driver. Protocols and filters cannot receive this event or issue it.</p>
<h5>- NetEvent.NetEventAllowStart</h5>
<p>An asynchronous event that indicates the protocols and filters including the miniport adapter does not need to be paused. The usage rules are below. There is no guaranteed pause state for any driver in the protocols and filters after the <a href="ndismnetpnpevent" title="NDIS_STATUS NdisMNetPnPEvent(&#10;  [in] NDIS_HANDLE                 MiniportAdapterHandle,&#10;       PNET_PNP_EVENT_NOTIFICATION NetPnPEventNotification&#10;);">NdisMNetPnPEvent</a> routine returns.</p>
<ul>
<li>
This event can only be issued after <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a> begins and must not be issued after <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_halt">MiniportHaltEx</a> returns.
</li>
<li>
Because this event is blocking, it should not be issued by any context that would cause a deadlock.
</li>
<li>
Locks must not be held while issuing this event.
</li>
</ul>
<p>This event is available starting with NDIS version 6.50 and must be used with V2 or later version of <strong>NET_PNP_EVENT</strong>. This event can optionally be issued by a miniport driver. Protocols and filters cannot receive this event or issue it.</p>
<h5>- NetEvent.NetEventBindFailed</h5>
<p>Indicates that a binding event failure has occurred.</p>
<h5>- NetEvent.NetEventBindList</h5>
<p>Indicates to a protocol driver that its bind list processing order has been reconfigured. This
list indicates a relative order that applies to bindings when processing, for example, a user request
that might be routed to one of several bindings. The buffer that is passed with this event contains a
list of device names that are formatted as null-terminated Unicode strings. The format of each device
name is identical to the
<strong>AdapterName</strong> member that is passed to a call to the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_bind_adapter_ex">ProtocolBindAdapterEx</a> function.</p>
<h5>- NetEvent.NetEventBindsComplete</h5>
<p>Indicates that a protocol driver has bound to all the NICs that it can bind to. NDIS will not
indicate any more NICs to the protocol unless a PnP NIC is plugged into the system.</p>
<h5>- NetEvent.NetEventCancelRemoveDevice</h5>
<p>Indicates that the PnP Manager has sent a Cancel Remove Device request. The PnP Manager sends
this request to cancel the removal of a device after the PnP Manager sends a Query Remove Device request.</p>
<h5>- NetEvent.NetEventFilterPreDetach</h5>
<p>Indicates that a filter is about to be detached, so that the filter can perform any necessary cleanup that isn't possible in the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-filter_detach">FilterDetach</a> handler (because the OID and indication paths are closed at that time).</p>
<h5>- NetEvent.NetEventIMReEnableDevice</h5>
<p>Indicates that the configuration has changed for a virtual miniport of an NDIS 6.0 or later
intermediate driver.
<strong>NetEventIMReEnableDevice</strong> is similar to the
<strong>NetEventReconfigure</strong> event except that the intermediate driver receives this event for a single
virtual miniport and the
<strong>NetEventReconfigure</strong> event applies to all the intermediate driver's virtual miniports. For
example, an intermediate driver receives the
<strong>NetEventIMReEnableDevice</strong> event when a user disables and then enables a single virtual miniport
from the Device Manager or another source. For examples of intermediate driver power management, see the
<a rel="noopener" target="_blank" href="https://go.microsoft.com/fwlink/p/?LinkId=617916">NDIS MUX Intermediate Driver and Notify Object</a> driver sample available in the <a rel="noopener" target="_blank" href="https://go.microsoft.com/fwlink/p/?LinkId=616507">Windows driver samples</a> repository on GitHub.</p>
<h5>- NetEvent.NetEventInhibitBindsAbove</h5>
<p>A synchronous event that prevents other filters and protocols from binding to the miniport adapter. Any filters or protocols that were previously bound will be unbound before the event completes. The usage rules are below.</p>
<ul>
<li>
Avoid leaving the miniport adapter in the inhibit state, for longer than 1000 milliseconds.
</li>
<li>
This event can only be issued after <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a> begins and must not be issued after <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_halt">MiniportHaltEx</a> returns.
</li>
<li>
This event can only be issued when the miniport adapter is in a D0 state.
</li>
<li>
Because this event is blocking, it should not be issued by any context that would cause a deadlock.
</li>
<li>
Locks must not be held while issuing this event.
</li>
<li>
This event must be issued at PASSIVE_LEVEL.
</li>
</ul>
<p>This event is available starting with NDIS version 6.50
and must be used with V2 or later version of <strong>NET_PNP_EVENT</strong>. This event can optionally be issued by a miniport driver. Protocols and filters cannot receive this event or issue it.</p>
<h5>- NetEvent.NetEventNDKDisable</h5>
<p>Indicates that NDK is currently disabled.</p>
<h5>- NetEvent.NetEventNDKEnable</h5>
<p>Indicates that Network Direct Kernel (NDK) is currently enabled.</p>
<h5>- NetEvent.NetEventPause</h5>
<p>Indicates that the specified protocol binding should enter the
Pausing state. The binding will enter the
Paused state after NDIS has completed all the outstanding send requests for the
binding.</p>
<h5>- NetEvent.NetEventPnPCapabilities</h5>
<p>Indicates that the user enabled or disabled the wake-up capabilities of the underlying adapter.
(The binding is specified by the
<em>ProtocolBindingContext</em> parameter that is passed to the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_net_pnp_event">ProtocolNetPnPEvent</a> function.)</p>
<h5>- NetEvent.NetEventPortActivation</h5>
<p>Indicates the activation of a list of ports that are associated with the specified
binding.</p>
<h5>- NetEvent.NetEventPortDeactivation</h5>
<p>Indicates the deactivation of a list of ports that are associated with the specified
binding.</p>
<h5>- NetEvent.NetEventQueryPower</h5>
<p>Indicates that the power manager has sent a Query Power request, which requests a transition to
a system power state. NDIS translates this state to an appropriate device power state for the
device.</p>
<p>For more information, see the Remarks section.</p>
<h5>- NetEvent.NetEventQueryRemoveDevice</h5>
<p>Indicates that the PnP Manager has sent a Query Remove Device request. The PnP Manager sends
this request to query whether a device can be removed without disrupting operations.</p>
<h5>- NetEvent.NetEventReconfigure</h5>
<p>Indicates that the configuration has changed for a network component. For example, if a user,
through the Network and Dial-up Connections folder, changes the IP address for TCP/IP, NDIS indicates
the
<strong>NetEventReconfigure</strong> event to the TCP/IP protocol. Also, an intermediate driver typically uses
this event as a trigger to call the
<a href="ndisiminitializedeviceinstanceex" title="NDIS_STATUS NdisIMInitializeDeviceInstanceEx(&#10;  [in]           NDIS_HANDLE  DriverHandle,&#10;  [in]           PNDIS_STRING DriverInstance,&#10;  [in, optional] NDIS_HANDLE  DeviceContext&#10;);">NdisIMInitializeDeviceInstanceEx</a> function and start its virtual miniports. For more information
about
<strong>NetEventReconfigure</strong>, see
NetEventIMReEnableDevice.</p>
<h5>- NetEvent.NetEventRequirePause</h5>
<p>A synchronous event that indicates the protocols and filters including the miniport adapter must be paused. The protocols and filters and the miniport adapter are guaranteed to be paused when the <a href="ndismnetpnpevent" title="NDIS_STATUS NdisMNetPnPEvent(&#10;  [in] NDIS_HANDLE                 MiniportAdapterHandle,&#10;       PNET_PNP_EVENT_NOTIFICATION NetPnPEventNotification&#10;);">NdisMNetPnPEvent</a> routine returns. The usage rules are below.</p>
<ul>
<li>
Avoid delaying between NetEventAllowStart and NetEventRequirePause events for longer than 1000 milliseconds to prevent delay in user applications.
</li>
<li>
This event can only be issued after <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a> begins and must not be issued after <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_halt">MiniportHaltEx</a> returns.
</li>
<li>
There is no guarantee that NDIS will call <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_pause">MiniportPause</a> after this event is issued. In particular, if your miniport adapter is already paused, NDIS won't introduce an extra start-pause loop. This means that the amount of times <em>MiniportPause</em> called is not greater than, less than, or equal to the amount this event is issued.
</li>
<li>
Because this event is blocking, it should not be issued by any context that would cause a deadlock.
</li>
<li>
Locks must not be held while issuing this event.
</li>
</ul>
<p>This event is available starting with NDIS version 6.50 and must be used with V2 or later version of <strong>NET_PNP_EVENT</strong>. This event can optionally be issued by a miniport driver. Protocols and filters cannot receive this event or issue it.</p>
<h5>- NetEvent.NetEventRestart</h5>
<p>Indicates that the specified protocol binding has entered the
Restarting state. After the protocol driver is ready to resume send and receive operations for
the binding, the binding enters the
Running state.</p>
<h5>- NetEvent.NetEventSetPower</h5>
<p>Indicates that the power manager has sent a Set Power request, which specifies a transition to a
system power state. NDIS translates this state to an appropriate device power state for the
device.</p>
<p>For more information, see the Remarks section.</p>
<h5>- NetEvent.NetEventSwitchActivate</h5>
<p>Indicates that the Hyper-V Extensible Switch has completed activation, and switch extensions can now safely query for further switch configuration. The indication is only used in the Hyper-V Extensible Switch stack, issued by the extension miniport. See <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/querying-the-hyper-v-extensible-switch-configuration">Querying the Hyper-V Extensible Switch Configuration</a> and <a href="ndis_switch_parameters" title="typedef struct _NDIS_SWITCH_PARAMETERS {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  ULONG                    Flags;&#10;  NDIS_SWITCH_NAME         SwitchName;&#10;  NDIS_SWITCH_FRIENDLYNAME SwitchFriendlyName;&#10;  UINT32                   NumSwitchPorts;&#10;  BOOLEAN                  IsActive;&#10;} NDIS_SWITCH_PARAMETERS, *PNDIS_SWITCH_PARAMETERS;">NDIS_SWITCH_PARAMETERS</a> for more details.</p>
<h2>Remarks</h2>
<p>In NDIS 6.0 and later versions, when the operating system issues a system PnP event or a power
management event to a target device object that represents a miniport adapter, NDIS translates the event
into a
<a href="net_pnp_event_notification" title="typedef struct _NET_PNP_EVENT_NOTIFICATION {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  NDIS_PORT_NUMBER         PortNumber;&#10;  NET_PNP_EVENT            NetPnPEvent;&#10;  ULONG                    Flags;&#10;  NDIS_NIC_SWITCH_ID       SwitchId;&#10;  NDIS_NIC_SWITCH_VPORT_ID VPortId;&#10;} NET_PNP_EVENT_NOTIFICATION, *PNET_PNP_EVENT_NOTIFICATION;">NET_PNP_EVENT_NOTIFICATION</a> structure. The
<strong>NetPnPEvent</strong> member of the <strong><a href="net_pnp_event_notification" title="typedef struct _NET_PNP_EVENT_NOTIFICATION {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  NDIS_PORT_NUMBER         PortNumber;&#10;  NET_PNP_EVENT            NetPnPEvent;&#10;  ULONG                    Flags;&#10;  NDIS_NIC_SWITCH_ID       SwitchId;&#10;  NDIS_NIC_SWITCH_VPORT_ID VPortId;&#10;} NET_PNP_EVENT_NOTIFICATION, *PNET_PNP_EVENT_NOTIFICATION;">NET_PNP_EVENT_NOTIFICATION</a></strong> structure is a <strong>NET_PNP_EVENT</strong> structure.</p>
<p>NDIS passes a pointer to the <strong>NET_PNP_EVENT</strong> structure to each protocol driver that is bound to the
miniport adapter by calling the protocol driver's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_net_pnp_event">ProtocolNetPnPEvent</a> function. The
protocol driver should save this pointer, because the pointer is an input parameter to the
<a href="ndiscompletenetpnpevent" title="VOID NdisCompleteNetPnPEvent(&#10;  [in] NDIS_HANDLE                 NdisBindingHandle,&#10;       PNET_PNP_EVENT_NOTIFICATION NetPnPEventNotification,&#10;  [in] NDIS_STATUS                 Status&#10;);">NdisCompleteNetPnPEvent</a> function,
which the driver calls to complete the call to
<em>ProtocolNetPnPEvent</em> asynchronously.</p>
<p>NDIS passes a pointer to the <strong>NET_PNP_EVENT</strong> structure to each filter driver that is bound to the
miniport adapter by calling the filter driver's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-filter_net_pnp_event">FilterNetPnPEvent</a> function. The
filter driver does not have to save this pointer because the driver must complete the call to
<em>FilterNetPnPEvent</em> synchronously.</p>
<p>Starting with NDIS 6.30, the protocol or filter driver must follow these guidelines when NDIS calls the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_net_pnp_event">ProtocolNetPnPEvent</a> or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-filter_net_pnp_event">FilterNetPnPEvent</a> functions:</p>
<ul>
<li><p>If the <strong>NetEvent</strong> member of the <strong>NET_PNP_EVENT</strong> structure is set to <strong>NetEventSetPower</strong>, the driver must stop generating new I/O requests. Also, the driver must not wait for the completion of any pending I/O requests.</p>
<p>After the protocol or filter driver returns from <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_net_pnp_event">ProtocolNetPnPEvent</a> or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-filter_net_pnp_event">FilterNetPnPEvent</a>, NDIS will not pause and restart these drivers during power-state transitions if the following conditions are true:</p>
<ul>
<li>
The underlying miniport driver sets the <strong>NDIS_MINIPORT_ATTRIBUTES_NO_PAUSE_ON_SUSPEND</strong> flag in the <a href="ndis_miniport_adapter_registration_attributes" title="typedef struct _NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES {&#10;  NDIS_OBJECT_HEADER  Header;&#10;  NDIS_HANDLE         MiniportAdapterContext;&#10;  ULONG               AttributeFlags;&#10;  UINT                CheckForHangTimeInSeconds;&#10;  NDIS_INTERFACE_TYPE InterfaceType;&#10;} NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES, *PNDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES;">NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES</a> structure. The driver passes a pointer to this structure in its call to the <a href="ndismsetminiportattributes" title="NDIS_STATUS NdisMSetMiniportAttributes(&#10;       NDIS_HANDLE                       NdisMiniportHandle,&#10;  [in] PNDIS_MINIPORT_ADAPTER_ATTRIBUTES MiniportAttributes&#10;);">NdisMSetMiniportAttributes</a> function.
</li>
<li>
All filter drivers that are attached to the miniport driver support NDIS 6.30 or later versions of NDIS.
</li>
<li>
All protocol drivers that are bound to the miniport driver support NDIS 6.30 or later versions of NDIS.
</li>
</ul></li>
<li>
If the <strong>NetEvent</strong> member of the <strong>NET_PNP_EVENT</strong> structure is set to <strong>NetEventSetPower</strong> or <strong>NetEventQueryPower</strong>, the driver must not wait for the completion of any pending I/O requests.
</li>
</ul>
<p>The
<strong>NetEvent</strong> member in the <strong>NET_PNP_EVENT</strong> structure identifies the type of Plug and Play or power
management event. The
<strong>Buffer</strong> contains information that is specific to the type of event.</p>
<h2>See also</h2>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-filter_net_pnp_event">FilterNetPnPEvent</a></p>
<p><a href="ndis_bind_failed_notification" title="typedef struct _NDIS_BIND_FAILED_NOTIFICATION {&#10;  NDIS_OBJECT_HEADER Header;&#10;  NET_LUID           MiniportNetLuid;&#10;} NDIS_BIND_FAILED_NOTIFICATION, *PNDIS_BIND_FAILED_NOTIFICATION;">NDIS_BIND_FAILED_NOTIFICATION</a></p>
<p><a href="ndis_port" title="typedef struct _NDIS_PORT {&#10;  PNDIS_PORT                Next;&#10;  PVOID                     NdisReserved;&#10;  PVOID                     MiniportReserved;&#10;  PVOID                     ProtocolReserved;&#10;  NDIS_PORT_CHARACTERISTICS PortCharacteristics;&#10;} NDIS_PORT, *PNDIS_PORT;">NDIS_PORT</a></p>
<p><a href="ndis_protocol_pause_parameters" title="typedef struct _NDIS_PROTOCOL_PAUSE_PARAMETERS {&#10;  NDIS_OBJECT_HEADER Header;&#10;  ULONG              Flags;&#10;  ULONG              PauseReason;&#10;} NDIS_PROTOCOL_PAUSE_PARAMETERS, *PNDIS_PROTOCOL_PAUSE_PARAMETERS;">NDIS_PROTOCOL_PAUSE_PARAMETERS</a></p>
<p><a href="ndis_protocol_restart_parameters" title="typedef struct _NDIS_PROTOCOL_RESTART_PARAMETERS {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  PUCHAR                   FilterModuleNameBuffer;&#10;  ULONG                    FilterModuleNameBufferLength;&#10;  PNDIS_RESTART_ATTRIBUTES RestartAttributes;&#10;  NET_IFINDEX              BoundIfIndex;&#10;  NET_LUID                 BoundIfNetluid;&#10;  ULONG                    Flags;&#10;} NDIS_PROTOCOL_RESTART_PARAMETERS, *PNDIS_PROTOCOL_RESTART_PARAMETERS;">NDIS_PROTOCOL_RESTART_PARAMETERS</a></p>
<p><a href="ndis_restart_attributes" title="typedef struct _NDIS_RESTART_ATTRIBUTES {&#10;  PNDIS_RESTART_ATTRIBUTES Next;&#10;  NDIS_OID                 Oid;&#10;  ULONG                    DataLength;&#10;  UCHAR                    Data[1];&#10;} NDIS_RESTART_ATTRIBUTES, *PNDIS_RESTART_ATTRIBUTES;">NDIS_RESTART_ATTRIBUTES</a></p>
<p><a href="ndis_switch_parameters" title="typedef struct _NDIS_SWITCH_PARAMETERS {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  ULONG                    Flags;&#10;  NDIS_SWITCH_NAME         SwitchName;&#10;  NDIS_SWITCH_FRIENDLYNAME SwitchFriendlyName;&#10;  UINT32                   NumSwitchPorts;&#10;  BOOLEAN                  IsActive;&#10;} NDIS_SWITCH_PARAMETERS, *PNDIS_SWITCH_PARAMETERS;">NDIS_SWITCH_PARAMETERS</a></p>
<p><a href="net_pnp_event_notification" title="typedef struct _NET_PNP_EVENT_NOTIFICATION {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  NDIS_PORT_NUMBER         PortNumber;&#10;  NET_PNP_EVENT            NetPnPEvent;&#10;  ULONG                    Flags;&#10;  NDIS_NIC_SWITCH_ID       SwitchId;&#10;  NDIS_NIC_SWITCH_VPORT_ID VPortId;&#10;} NET_PNP_EVENT_NOTIFICATION, *PNET_PNP_EVENT_NOTIFICATION;">NET_PNP_EVENT_NOTIFICATION</a></p>
<p><a href="ndiscompletenetpnpevent" title="VOID NdisCompleteNetPnPEvent(&#10;  [in] NDIS_HANDLE                 NdisBindingHandle,&#10;       PNET_PNP_EVENT_NOTIFICATION NetPnPEventNotification,&#10;  [in] NDIS_STATUS                 Status&#10;);">NdisCompleteNetPnPEvent</a></p>
<p><a href="ndisiminitializedeviceinstanceex" title="NDIS_STATUS NdisIMInitializeDeviceInstanceEx(&#10;  [in]           NDIS_HANDLE  DriverHandle,&#10;  [in]           PNDIS_STRING DriverInstance,&#10;  [in, optional] NDIS_HANDLE  DeviceContext&#10;);">NdisIMInitializeDeviceInstanceEx</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_bind_adapter_ex">ProtocolBindAdapterEx</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_net_pnp_event">ProtocolNetPnPEvent</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/querying-the-hyper-v-extensible-switch-configuration">Querying the Hyper-V Extensible Switch Configuration</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/netpnp/ns-netpnp-_net_pnp_event">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/netpnp/ns-netpnp-_net_pnp_event.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
