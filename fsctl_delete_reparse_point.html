<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="FSCTL_DELETE_REPARSE_POINT - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>FSCTL_DELETE_REPARSE_POINT - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            FSCTL_DELETE_REPARSE_POINT - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// winioctl.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">// <a href="ctl_code" title="void CTL_CODE(&#10;  DeviceType,&#10;  Function,&#10;  Method,&#10;  Access&#10;);">CTL_CODE</a>(0x0009, 0x02b, METHOD_BUFFERED, FILE_ANY_ACCESS)
#define FSCTL_DELETE_REPARSE_POINT 0x000900AC</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ni-winioctl-fsctl_delete_reparse_point">View the official Win32 API reference</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntifs.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">// <a href="ctl_code" title="void CTL_CODE(&#10;  DeviceType,&#10;  Function,&#10;  Method,&#10;  Access&#10;);">CTL_CODE</a>(0x0009, 0x02b, METHOD_BUFFERED, FILE_ANY_ACCESS)
#define FSCTL_DELETE_REPARSE_POINT 0x000900AC</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ifs/fsctl-delete-reparse-point">View the official Windows hardware development documentation</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/fsctl_delete_reparse_point.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Win32 API reference (ni-winioctl-fsctl_delete_reparse_point)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>FSCTL_DELETE_REPARSE_POINT IOCTL</h1>
<h2>Description</h2>
<p>Deletes a reparse point from the specified file or directory. Using <strong>FSCTL_DELETE_REPARSE_POINT</strong> does not delete the file or directory.</p>
<p>To perform this operation, call the <a href="https://learn.microsoft.com/windows/win32/api/ioapiset/nf-ioapiset-deviceiocontrol"><strong>DeviceIoControl</strong></a> function with the following parameters.</p>
<pre lang="cpp"><code>BOOL DeviceIoControl(
  (HANDLE) hDevice,             // handle to file or directory
  FSCTL_DELETE_REPARSE_POINT,   // dwIoControlCode
  (LPVOID) lpInBuffer,          // input buffer
  (<a href="dword" title="typedef unsigned long DWORD;">DWORD</a>) nInBufferSize,        // size of input buffer
  NULL,                         // lpOutBuffer
  0,                            // nOutBufferSize
  (LPDWORD) lpBytesReturned,    // number of bytes returned
  (LPOVERLAPPED) lpOverlapped   // OVERLAPPED structure
);
</code></pre>
<h2>Parameters</h2>
<h3>Input buffer</h3>
<h3>Input buffer length</h3>
<h3>Output buffer</h3>
<h3>Output buffer length</h3>
<h3>Input/output buffer</h3>
<h3>Input/output buffer length</h3>
<h3>Status block</h3>
<p>Irp-&gt;IoStatus.Status is set to <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if the request is successful.</p>
<p>Otherwise, Status to the appropriate error condition as a <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> code.</p>
<p>For more information, see <a href="https://learn.microsoft.com/windows-hardware/drivers/kernel/ntstatus-values">NTSTATUS Values</a>.</p>
<h2>Remarks</h2>
<p>In Windows 8 and Windows Server 2012, this code is supported by the following technologies.</p>
<table>
<thead>
<tr>
<th>Technology</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Server Message Block (SMB) 3.0 protocol</td>
<td>Yes</td>
</tr>
<tr>
<td>SMB 3.0 Transparent Failover (TFO)</td>
<td>Yes</td>
</tr>
<tr>
<td>SMB 3.0 with Scale-out File Shares (SO)</td>
<td>Yes</td>
</tr>
<tr>
<td>Cluster Shared Volume File System (CsvFS)</td>
<td>No</td>
</tr>
<tr>
<td>Resilient File System (ReFS)</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>CsvFs does not support reparse points.</p>
<h2>See also</h2>
<ul>
<li><a href="https://learn.microsoft.com/windows/win32/api/fileapi/nf-fileapi-createfilea">CreateFile</a></li>
<li><a href="https://learn.microsoft.com/windows/win32/api/ioapiset/nf-ioapiset-deviceiocontrol">DeviceIoControl</a></li>
<li><a href="fsctl_get_reparse_point" title="// CTL_CODE(0x0009, 0x02a, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_GET_REPARSE_POINT 0x000900A8">FSCTL_GET_REPARSE_POINT</a></li>
<li><a href="fsctl_set_reparse_point" title="// CTL_CODE(0x0009, 0x029, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_SET_REPARSE_POINT 0x000900A4">FSCTL_SET_REPARSE_POINT</a></li>
<li><a href="https://learn.microsoft.com/windows/desktop/FileIO/reparse-points">Reparse Points</a></li>
</ul>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ni-winioctl-fsctl_delete_reparse_point">View the official Win32 API reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/sdk-api/blob/docs/sdk-api-src/content/winioctl/ni-winioctl-fsctl_delete_reparse_point.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows hardware development documentation (fsctl-delete-reparse-point)</h1>
</div>
<div class="ntdoc-description">
<h1>FSCTL_DELETE_REPARSE_POINT control code</h1>
<p>The FSCTL_DELETE_REPARSE_POINT control code deletes a reparse point from the specified file or directory. Using FSCTL_DELETE_REPARSE_POINT does not delete the file or directory.</p>
<p>To perform this operation, call <a href="https://learn.microsoft.com/previous-versions/ff566462(v=vs.85)"><strong>ZwFsControlFile</strong></a> with the following parameters.</p>
<p>Minifilters should use <strong><a href="fltuntagfile" title="NTSTATUS FLTAPI FltUntagFile(&#10;  [in]           PFLT_INSTANCE InitiatingInstance,&#10;  [in]           PFILE_OBJECT  FileObject,&#10;  [in]           ULONG         FileTag,&#10;  [in, optional] GUID          *Guid&#10;);">FltUntagFile</a></strong> instead of FSCTL_DELETE_REPARSE_POINT to delete a reparse point.</p>
<p>For more information about reparse points and the FSCTL_DELETE_REPARSE_POINT control code, see the Microsoft Windows SDK documentation.</p>
<h2>Parameters</h2>
<ul>
<li>
<p><strong>FileHandle</strong> [in]: File handle for the file or directory from which the reparse point is to be deleted. The caller must have write access to the file or directory. This parameter is required and cannot be <strong>NULL</strong>.</p>
</li>
<li>
<p><strong>FsControlCode</strong> [in]: Control code for the operation. Use FSCTL_DELETE_REPARSE_POINT for this operation.</p>
</li>
<li>
<p><strong>InputBuffer</strong> [in]: Pointer to a <strong><a href="reparse_guid_data_buffer" title="typedef struct _REPARSE_GUID_DATA_BUFFER {&#10;  ULONG  ReparseTag;&#10;  USHORT ReparseDataLength;&#10;  USHORT Reserved;&#10;  GUID   ReparseGuid;&#10;  struct {&#10;    UCHAR DataBuffer[1];&#10;  } GenericReparseBuffer;&#10;} REPARSE_GUID_DATA_BUFFER, *PREPARSE_GUID_DATA_BUFFER;">REPARSE_GUID_DATA_BUFFER</a></strong> or <strong><a href="reparse_data_buffer" title="typedef struct _REPARSE_DATA_BUFFER&#10;{&#10;    ULONG ReparseTag;&#10;    USHORT ReparseDataLength;&#10;    USHORT Reserved;&#10;&#10;    _Field_size_bytes_(ReparseDataLength)&#10;    union&#10;    {&#10;        struct&#10;        {&#10;            USHORT SubstituteNameOffset;&#10;            USHORT SubstituteNameLength;&#10;            USHORT PrintNameOffset;&#10;            USHORT PrintNameLength;&#10;            ULONG Flags;&#10;            WCHAR PathBuffer[1];&#10;        } SymbolicLinkReparseBuffer;&#10;        struct&#10;        {&#10;...">REPARSE_DATA_BUFFER</a></strong> structure. The tag specified in the <strong>ReparseTag</strong> member of this structure must match the tag of the reparse point to be deleted, and the <strong>ReparseDataLength</strong> member must be zero. In addition, if the reparse point is a third-party (non-Microsoft) reparse point, the GUID specified in the <strong>ReparseGuid</strong> member of the <a href="reparse_guid_data_buffer" title="typedef struct _REPARSE_GUID_DATA_BUFFER {&#10;  ULONG  ReparseTag;&#10;  USHORT ReparseDataLength;&#10;  USHORT Reserved;&#10;  GUID   ReparseGuid;&#10;  struct {&#10;    UCHAR DataBuffer[1];&#10;  } GenericReparseBuffer;&#10;} REPARSE_GUID_DATA_BUFFER, *PREPARSE_GUID_DATA_BUFFER;">REPARSE_GUID_DATA_BUFFER</a> structure must match the GUID of the reparse point to be deleted.</p>
</li>
<li>
<p><strong>InputBufferLength</strong> [in]: Size, in bytes, of the buffer pointed to by the <strong>InputBuffer</strong> parameter. For a <a href="reparse_guid_data_buffer" title="typedef struct _REPARSE_GUID_DATA_BUFFER {&#10;  ULONG  ReparseTag;&#10;  USHORT ReparseDataLength;&#10;  USHORT Reserved;&#10;  GUID   ReparseGuid;&#10;  struct {&#10;    UCHAR DataBuffer[1];&#10;  } GenericReparseBuffer;&#10;} REPARSE_GUID_DATA_BUFFER, *PREPARSE_GUID_DATA_BUFFER;">REPARSE_GUID_DATA_BUFFER</a> structure, this value must be exactly REPARSE_GUID_DATA_BUFFER_HEADER_SIZE. For a <a href="reparse_data_buffer" title="typedef struct _REPARSE_DATA_BUFFER&#10;{&#10;    ULONG ReparseTag;&#10;    USHORT ReparseDataLength;&#10;    USHORT Reserved;&#10;&#10;    _Field_size_bytes_(ReparseDataLength)&#10;    union&#10;    {&#10;        struct&#10;        {&#10;            USHORT SubstituteNameOffset;&#10;            USHORT SubstituteNameLength;&#10;            USHORT PrintNameOffset;&#10;            USHORT PrintNameLength;&#10;            ULONG Flags;&#10;            WCHAR PathBuffer[1];&#10;        } SymbolicLinkReparseBuffer;&#10;        struct&#10;        {&#10;...">REPARSE_DATA_BUFFER</a> structure, this value must be exactly <a href="reparse_data_buffer_header_size" title="#define REPARSE_DATA_BUFFER_HEADER_SIZE UFIELD_OFFSET(REPARSE_DATA_BUFFER, GenericReparseBuffer)">REPARSE_DATA_BUFFER_HEADER_SIZE</a>.</p>
</li>
<li>
<p><strong>OutputBuffer</strong> [out]: None. Set to NULL.</p>
</li>
<li>
<p><strong>OutputBufferLength</strong> [out]: Set to 0.</p>
</li>
</ul>
<h2>Status block</h2>
<p><a href="https://learn.microsoft.com/previous-versions/ff566462(v=vs.85)"><strong>ZwFsControlFile</strong></a> returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> or an appropriate <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> value such as one of the following:</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>STATUS_IO_REPARSE_DATA_INVALID</td>
<td>One of the specified parameter values was invalid. This is an error code.</td>
</tr>
<tr>
<td>STATUS_IO_REPARSE_TAG_INVALID</td>
<td>The reparse tag specified by the caller was invalid. This is an error code.</td>
</tr>
<tr>
<td>STATUS_IO_REPARSE_TAG_MISMATCH</td>
<td>The reparse tag specified by the caller did not match the tag of the reparse point to be deleted. This is an error code.</td>
</tr>
<tr>
<td>STATUS_REPARSE_ATTRIBUTE_CONFLICT</td>
<td>The reparse point is a third-party reparse point, and the reparse GUID specified by the caller did not match the GUID of the reparse point to be deleted. This is an error code.</td>
</tr>
</tbody>
</table>
<h2>Requirements</h2>
<table>
<thead>
<tr>
<th>Requirement type</th>
<th>Requirement</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td><em>Ntifs.h</em> (include <em>Ntifs.h</em> or <em>Fltkernel.h</em>)</td>
</tr>
</tbody>
</table>
<h2>See also</h2>
<p><a href="https://learn.microsoft.com/windows-hardware/drivers/ifs/flt-parameters-for-irp-mj-file-system-control"><strong>FLT_PARAMETERS for IRP_MJ_FILE_SYSTEM_CONTROL</strong></a></p>
<p><strong><a href="flttagfile" title="NTSTATUS FLTAPI FltTagFile(&#10;  [in]           PFLT_INSTANCE InitiatingInstance,&#10;  [in]           PFILE_OBJECT  FileObject,&#10;  [in]           ULONG         FileTag,&#10;  [in, optional] GUID          *Guid,&#10;  [in]           PVOID         DataBuffer,&#10;  [in]           USHORT        DataBufferLength&#10;);">FltTagFile</a></strong></p>
<p><strong><a href="fltuntagfile" title="NTSTATUS FLTAPI FltUntagFile(&#10;  [in]           PFLT_INSTANCE InitiatingInstance,&#10;  [in]           PFILE_OBJECT  FileObject,&#10;  [in]           ULONG         FileTag,&#10;  [in, optional] GUID          *Guid&#10;);">FltUntagFile</a></strong></p>
<p><strong><a href="fsctl_get_reparse_point" title="// CTL_CODE(0x0009, 0x02a, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_GET_REPARSE_POINT 0x000900A8">FSCTL_GET_REPARSE_POINT</a></strong></p>
<p><strong><a href="fsctl_set_reparse_point" title="// CTL_CODE(0x0009, 0x029, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_SET_REPARSE_POINT 0x000900A4">FSCTL_SET_REPARSE_POINT</a></strong></p>
<p><a href="https://learn.microsoft.com/windows-hardware/drivers/ifs/irp-mj-file-system-control"><strong>IRP_MJ_FILE_SYSTEM_CONTROL</strong></a></p>
<p><strong><a href="isreparsetagmicrosoft" title="void IsReparseTagMicrosoft(&#10;  [in] _tag&#10;);">IsReparseTagMicrosoft</a></strong></p>
<p><strong><a href="isreparsetagnamesurrogate" title="void IsReparseTagNameSurrogate(&#10;  [in] _tag&#10;);">IsReparseTagNameSurrogate</a></strong></p>
<p><strong><a href="reparse_data_buffer" title="typedef struct _REPARSE_DATA_BUFFER&#10;{&#10;    ULONG ReparseTag;&#10;    USHORT ReparseDataLength;&#10;    USHORT Reserved;&#10;&#10;    _Field_size_bytes_(ReparseDataLength)&#10;    union&#10;    {&#10;        struct&#10;        {&#10;            USHORT SubstituteNameOffset;&#10;            USHORT SubstituteNameLength;&#10;            USHORT PrintNameOffset;&#10;            USHORT PrintNameLength;&#10;            ULONG Flags;&#10;            WCHAR PathBuffer[1];&#10;        } SymbolicLinkReparseBuffer;&#10;        struct&#10;        {&#10;...">REPARSE_DATA_BUFFER</a></strong></p>
<p><strong><a href="reparse_guid_data_buffer" title="typedef struct _REPARSE_GUID_DATA_BUFFER {&#10;  ULONG  ReparseTag;&#10;  USHORT ReparseDataLength;&#10;  USHORT Reserved;&#10;  GUID   ReparseGuid;&#10;  struct {&#10;    UCHAR DataBuffer[1];&#10;  } GenericReparseBuffer;&#10;} REPARSE_GUID_DATA_BUFFER, *PREPARSE_GUID_DATA_BUFFER;">REPARSE_GUID_DATA_BUFFER</a></strong></p>
<p><a href="https://learn.microsoft.com/previous-versions/ff566462(v=vs.85)"><strong>ZwFsControlFile</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ifs/fsctl-delete-reparse-point">View the official Windows hardware development documentation</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs/blob/staging/windows-driver-docs-pr/ifs/fsctl-delete-reparse-point.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
