<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="MINIPORT_WDI_TX_SUSPECT_FRAME_LIST_ABORT - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>MINIPORT_WDI_TX_SUSPECT_FRAME_LIST_ABORT - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            MINIPORT_WDI_TX_SUSPECT_FRAME_LIST_ABORT - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// dot11wdi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">MINIPORT_WDI_TX_SUSPECT_FRAME_LIST_ABORT MiniportWdiTxSuspectFrameListAbort;

void MiniportWdiTxSuspectFrameListAbort(
  TAL_TXRX_HANDLE MiniportTalTxRxContext,
  <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a> SuspectFrameContext,
  <a href="uint16" title="typedef unsigned short UINT16;">UINT16</a> NumSuspectFrames,
  <a href="net_buffer_list" title="typedef struct _NET_BUFFER_LIST {&#10;  union {&#10;    struct {&#10;      NET_BUFFER_LIST *Next;&#10;      NET_BUFFER      *FirstNetBuffer;&#10;    };&#10;    SLIST_HEADER           Link;&#10;    NET_BUFFER_LIST_HEADER NetBufferListHeader;&#10;  };&#10;  NET_BUFFER_LIST_CONTEXT *Context;&#10;  NET_BUFFER_LIST         *ParentNetBufferList;&#10;  NDIS_HANDLE             NdisPoolHandle;&#10;  PVOID                   NdisReserved[2];&#10;  PVOID                   ProtocolReserved[4];&#10;  PVOID                   MiniportReserved[2];&#10;  PVOID                   Scratch;&#10;  NDIS_HANDLE             SourceHandle;&#10;  ULONG                   NblFlags;&#10;  LONG                    ChildRefCount;&#10;  ULONG                   Flags;&#10;...">PNET_BUFFER_LIST</a> *SuspectFrameList
)
{...}</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dot11wdi/nc-dot11wdi-miniport_wdi_tx_suspect_frame_list_abort">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// dot11wificxintf.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">MINIPORT_WDI_TX_SUSPECT_FRAME_LIST_ABORT MiniportWdiTxSuspectFrameListAbort;

void MiniportWdiTxSuspectFrameListAbort(
  TAL_TXRX_HANDLE MiniportTalTxRxContext,
  <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a> SuspectFrameContext,
  <a href="uint16" title="typedef unsigned short UINT16;">UINT16</a> NumSuspectFrames,
  <a href="net_buffer_list" title="typedef struct _NET_BUFFER_LIST {&#10;  union {&#10;    struct {&#10;      NET_BUFFER_LIST *Next;&#10;      NET_BUFFER      *FirstNetBuffer;&#10;    };&#10;    SLIST_HEADER           Link;&#10;    NET_BUFFER_LIST_HEADER NetBufferListHeader;&#10;  };&#10;  NET_BUFFER_LIST_CONTEXT *Context;&#10;  NET_BUFFER_LIST         *ParentNetBufferList;&#10;  NDIS_HANDLE             NdisPoolHandle;&#10;  PVOID                   NdisReserved[2];&#10;  PVOID                   ProtocolReserved[4];&#10;  PVOID                   MiniportReserved[2];&#10;  PVOID                   Scratch;&#10;  NDIS_HANDLE             SourceHandle;&#10;  ULONG                   NblFlags;&#10;  LONG                    ChildRefCount;&#10;  ULONG                   Flags;&#10;...">PNET_BUFFER_LIST</a> *SuspectFrameList
)
{...}</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dot11wificxintf/nc-dot11wificxintf-miniport_wdi_tx_suspect_frame_list_abort">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/miniport_wdi_tx_suspect_frame_list_abort.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-dot11wdi-miniport_wdi_tx_suspect_frame_list_abort)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="miniport_wdi_tx_suspect_frame_list_abort-callback-function">MINIPORT_WDI_TX_SUSPECT_FRAME_LIST_ABORT callback function</h1>

<h2 id="description">Description</h2>

<blockquote>
  <p>[!IMPORTANT]
  This topic is part of the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/wdi-miniport-driver-design-guide">WDI driver model</a> released in Windows 10. The WDI driver model is in maintenance mode and will only receive high priority fixes. <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/netcx/wifi-wdf-class-extension-wificx">WiFiCx</a> is the Wi-Fi driver model released in Windows 11. We recommend that you use WiFiCx to take advantage of the latest features.</p>
</blockquote>

<p>The <em>TxSuspectFrameListAbort</em> callback function is implemented by the IHV miniport to inform the TxEngine that the TxMgr has identified frames which are suspected of being hung or pending completion for a significant length of time.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="miniporttaltxrxcontext"><code>MiniportTalTxRxContext</code></h3>

<p>The TAL device handle returned by the IHV miniport in <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dot11wdi/nc-dot11wdi-miniport_wdi_tal_txrx_initialize">MiniportWdiTalTxRxInitialize</a>.</p>

<h3 id="suspectframecontext"><code>SuspectFrameContext</code></h3>

<p>Context information about the suspected frame.</p>

<h3 id="numsuspectframes"><code>NumSuspectFrames</code></h3>

<p>The number of suspect frames.</p>

<h3 id="suspectframelist"><code>SuspectFrameList</code></h3>

<p>The list of suspected frames. For more information, see the Remarks section.</p>

<h2 id="prototype">Prototype</h2>

<p><!-- CODE_MARKER --></p>

<div class="codehilite">
<pre><span></span><code><span class="c1">//Declaration</span>

<span class="n">MINIPORT_WDI_TX_SUSPECT_FRAME_LIST_ABORT</span><span class="w"> </span><span class="n">MiniportWdiTxSuspectFrameListAbort</span><span class="p">;</span>

<span class="c1">// Definition</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">MiniportWdiTxSuspectFrameListAbort</span>
<span class="p">(</span>
<span class="w">    </span><span class="n">TAL_TXRX_HANDLE</span><span class="w"> </span><span class="n">MiniportTalTxRxContext</span>
<span class="w">    </span><span class="n"><a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a></span><span class="w"> </span><span class="n">SuspectFrameContext</span>
<span class="w">    </span><span class="n"><a href="uint16" title="typedef unsigned short UINT16;">UINT16</a></span><span class="w"> </span><span class="n">NumSuspectFrames</span>
<span class="w">    </span><span class="n"><a href="net_buffer_list" title="typedef struct _NET_BUFFER_LIST {&#10;  union {&#10;    struct {&#10;      NET_BUFFER_LIST *Next;&#10;      NET_BUFFER      *FirstNetBuffer;&#10;    };&#10;    SLIST_HEADER           Link;&#10;    NET_BUFFER_LIST_HEADER NetBufferListHeader;&#10;  };&#10;  NET_BUFFER_LIST_CONTEXT *Context;&#10;  NET_BUFFER_LIST         *ParentNetBufferList;&#10;  NDIS_HANDLE             NdisPoolHandle;&#10;  PVOID                   NdisReserved[2];&#10;  PVOID                   ProtocolReserved[4];&#10;  PVOID                   MiniportReserved[2];&#10;  PVOID                   Scratch;&#10;  NDIS_HANDLE             SourceHandle;&#10;  ULONG                   NblFlags;&#10;  LONG                    ChildRefCount;&#10;  ULONG                   Flags;&#10;...">PNET_BUFFER_LIST</a></span><span class="w"> </span><span class="o">*</span><span class="n">SuspectFrameList</span>
<span class="p">)</span>
<span class="p">{...}</span>
</code></pre>
</div>

<h2 id="remarks">Remarks</h2>

<p>Register your implementation of this callback function by setting the appropriate member of the <a href="ndis_miniport_wdi_data_handlers" title="typedef struct _NDIS_MINIPORT_WDI_DATA_HANDLERS {&#10;  NDIS_OBJECT_HEADER                                Header;&#10;  MINIPORT_WDI_TX_ABORT_HANDLER                     TxAbortHandler;&#10;  MINIPORT_WDI_TX_TARGET_DESC_INIT_HANDLER          TxTargetDescInitHandler;&#10;  MINIPORT_WDI_TX_TARGET_DESC_DEINIT_HANDLER        TxTargetDescDeInitHandler;&#10;  MINIPORT_WDI_TX_DATA_SEND_HANDLER                 TxDataSendHandler;&#10;  MINIPORT_WDI_TX_TAL_SEND_HANDLER                  TxTalSendHandler;&#10;  MINIPORT_WDI_TX_TAL_SEND_COMPLETE_HANDLER         TxTalSendCompleteHandler;&#10;  MINIPORT_WDI_TX_TAL_QUEUE_IN_ORDER_HANDLER        TxTalQueueInOrderHandler;&#10;  MINIPORT_WDI_TX_PEER_BACKLOG_HANDLER              TxPeerBacklogHandler;&#10;  MINIPORT_WDI_RX_STOP_HANDLER                      RxStopHandler;&#10;  MINIPORT_WDI_RX_FLUSH_HANDLER                     RxFlushHandler;&#10;  MINIPORT_WDI_RX_RESTART_HANDLER                   RxRestartHandler;&#10;  MINIPORT_WDI_RX_GET_MPDUS_HANDLER                 RxGetMpdusHandler;&#10;  MINIPORT_WDI_RX_RETURN_FRAMES_HANDLER             RxReturnFramesHandler;&#10;  MINIPORT_WDI_RX_RESUME_HANDLER                    RxResumeHandler;&#10;  MINIPORT_WDI_RX_THROTTLE_HANDLER                  RxThrottleHandler;&#10;  MINIPORT_WDI_RX_PPDU_RSSI_HANDLER                 RxPpduRssiHandler;&#10;  MINIPORT_WDI_TAL_TXRX_START_HANDLER               TalTxRxStartHandler;&#10;  MINIPORT_WDI_TAL_TXRX_STOP_HANDLER                TalTxRxStopHandler;&#10;...">NDIS_MINIPORT_WDI_DATA_HANDLERS</a> structure.</p>

<p>This is an optional handler. If the IHV miniport does not implement this callback's behavior, it should not set the function pointer in <a href="ndis_miniport_wdi_data_handlers" title="typedef struct _NDIS_MINIPORT_WDI_DATA_HANDLERS {&#10;  NDIS_OBJECT_HEADER                                Header;&#10;  MINIPORT_WDI_TX_ABORT_HANDLER                     TxAbortHandler;&#10;  MINIPORT_WDI_TX_TARGET_DESC_INIT_HANDLER          TxTargetDescInitHandler;&#10;  MINIPORT_WDI_TX_TARGET_DESC_DEINIT_HANDLER        TxTargetDescDeInitHandler;&#10;  MINIPORT_WDI_TX_DATA_SEND_HANDLER                 TxDataSendHandler;&#10;  MINIPORT_WDI_TX_TAL_SEND_HANDLER                  TxTalSendHandler;&#10;  MINIPORT_WDI_TX_TAL_SEND_COMPLETE_HANDLER         TxTalSendCompleteHandler;&#10;  MINIPORT_WDI_TX_TAL_QUEUE_IN_ORDER_HANDLER        TxTalQueueInOrderHandler;&#10;  MINIPORT_WDI_TX_PEER_BACKLOG_HANDLER              TxPeerBacklogHandler;&#10;  MINIPORT_WDI_RX_STOP_HANDLER                      RxStopHandler;&#10;  MINIPORT_WDI_RX_FLUSH_HANDLER                     RxFlushHandler;&#10;  MINIPORT_WDI_RX_RESTART_HANDLER                   RxRestartHandler;&#10;  MINIPORT_WDI_RX_GET_MPDUS_HANDLER                 RxGetMpdusHandler;&#10;  MINIPORT_WDI_RX_RETURN_FRAMES_HANDLER             RxReturnFramesHandler;&#10;  MINIPORT_WDI_RX_RESUME_HANDLER                    RxResumeHandler;&#10;  MINIPORT_WDI_RX_THROTTLE_HANDLER                  RxThrottleHandler;&#10;  MINIPORT_WDI_RX_PPDU_RSSI_HANDLER                 RxPpduRssiHandler;&#10;  MINIPORT_WDI_TAL_TXRX_START_HANDLER               TalTxRxStartHandler;&#10;  MINIPORT_WDI_TAL_TXRX_STOP_HANDLER                TalTxRxStopHandler;&#10;...">NDIS_MINIPORT_WDI_DATA_HANDLERS</a> and WDI will not call this handler. However, if this callback's behavior is not implemented, the function pointer might still be set if the IHV miniport uses the <em>SuspectFrameList</em> to log IHV state for diagnostic purposes.</p>

<p>This callback function informs the TxEngine that the TxMgr has identified frames which are suspected of being hung or pending completion for a significant length of time. The <em>SuspectFrameList</em> array of NBL pointers, of which the <strong>Next</strong> pointer is not applicable, represent frames which the TxMgr is requesting prompt completion even if that results in the frame not being transmitted over the air.</p>

<p>The TxEngine might check the status of an NBL in the <em>SuspectFrameList</em> array by calling <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dot11wdi/nc-dot11wdi-ndis_wdi_tx_query_suspect_frame_complete_status"><em>TxQuerySuspectFrameStatus</em></a> from the context of <em>TxSuspectFrameListAbort</em> with the <em>SuspectFrameContext</em> passed to the handler. The TxMgr will not call <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dot11wdi/nc-dot11wdi-miniport_wdi_tx_target_desc_deinit">TxTargetDescDeinit</a> for any NBLs in <em>SuspectFrameList</em> during the duration of <em>TxSuspectFrameAbort</em>, nor will it complete the frames to NDIS.</p>

<p>If the TxEngine or firmware has no knowledge or state for the suspect frame it should not issue completions for that suspect frame, as this might cause system corruption and/or double completions.</p>

<p>If a firmware stall or corruption is detected, an <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/ndis-status-wdi-indication-firmware-stalled">NDIS_STATUS_WDI_INDICATION_FIRMWARE_STALLED</a> notification should be made to attempt recovery.</p>

<h2 id="see-also">See also</h2>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dot11wdi/nc-dot11wdi-miniport_wdi_tx_suspect_frame_list_abort">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/dot11wdi/nc-dot11wdi-miniport_wdi_tx_suspect_frame_list_abort.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-dot11wificxintf-miniport_wdi_tx_suspect_frame_list_abort)</h1>
</div>
<div class="ntdoc-description">
<h2>Description</h2>

<blockquote>
  <p>[!IMPORTANT]
  This topic is part of the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/netcx/wifi-wdf-class-extension-wificx">WiFiCx driver model</a>. WiFiCx is the Wi-Fi driver model released in Windows 11. We recommend that you use WiFiCx to take advantage of the latest features. The previous Wi-Fi driver model <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/wdi-miniport-driver-design-guide">WDI</a> is in maintenance mode and will only receive high priority fixes.</p>
</blockquote>

<blockquote>
  <p>[!WARNING]
  Some information in this topic relates to prereleased product, which may be substantially modified before it is commercially released. Microsoft makes no warranties, express or implied, with respect to the information provided here.</p>
</blockquote>

<p>This function is reserved for system use and should not be called in your code.</p>

<h2>Parameters</h2>

<h3><code>MiniportTalTxRxContext</code></h3>

<p>Reserved.</p>

<h3><code>SuspectFrameContext</code></h3>

<p>Reserved.</p>

<h3><code>NumSuspectFrames</code></h3>

<p>Reserved.</p>

<h3><code>SuspectFrameList</code></h3>

<p>Reserved.</p>

<h2>Remarks</h2>

<h2>See also</h2>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dot11wificxintf/nc-dot11wificxintf-miniport_wdi_tx_suspect_frame_list_abort">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/dot11wificxintf/nc-dot11wificxintf-miniport_wdi_tx_suspect_frame_list_abort.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
