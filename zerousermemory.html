<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="ZeroUserMemory - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>ZeroUserMemory - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github.ntdoc.min.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github-dark-dimmed.ntdoc.min.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            ZeroUserMemory - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header language-cpp">// usermode_accessors.h

</span><span class="ntdoc-code-intro language-cpp"></span><span class="ntdoc-code-body language-cpp">VOID ZeroUserMemory(
  volatile VOID *Destination,
  <a href="size_t-2" title="typedef ULONG_PTR SIZE_T;">SIZE_T</a>        Length
);</span><span class="ntdoc-code-footer language-cpp"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/usermode_accessors/nf-usermode_accessors-zerousermemory">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/zerousermemory.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-usermode_accessors-zerousermemory)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2>Description</h2>
<p>The <strong>ZeroUserMemory</strong> function fills a user-mode memory region with zeros.</p>
<h2>Parameters</h2>
<h3><code>Destination</code></h3>
<p>[out] A pointer to the starting address of the memory block to zero.</p>
<h3><code>Length</code></h3>
<p>[in] The number of bytes to zero.</p>
<h2>Remarks</h2>
<p>This function provides a safe way to zero a user-mode memory region. This allows for flexible memory operations when kernel-mode code needs to initialize user-mode memory buffers to zero.</p>
<p>The function has the following properties:</p>
<ul>
<li>
<p>The function performs a volatile zero operation using <a rel="noopener" target="_blank" href="https://learn.microsoft.com/cpp/standard-library/atomic-enums?view=msvc-170#memory_order_enum">memory_order_relaxed semantics</a>.</p>
</li>
<li>
<p>The function isn't recognized as a compiler intrinsic so the compiler will never optimize away the call (either entirely or replace the call with an equivalent sequence of instructions).</p>
</li>
<li>
<p>When the call returns, the buffer has been overwritten with zeros. This function's memory accesses to the <strong>Destination</strong> will only be performed within the function (for example, the compiler can't move memory accesses out of this function).</p>
</li>
<li>
<p>The function might perform unaligned memory accesses if the platform allows for it.</p>
</li>
<li>
<p>The function might access memory locations more than once as part of its zero operation.</p>
</li>
</ul>
<p>The function raises a structured exception if the zero operation fails, such as when the destination address is not a valid user-mode address or is inaccessible.</p>
<p>This function will never be optimized away by the compiler, nor will the compiler create additional accesses to this memory location before the function is called or after the function returns (unless the source code explicitly performs these accesses).</p>
<p>This function works on all versions of Windows, not just the latest. You need to consume the latest WDK to get the function declaration from the <em>usermode_accessors.h</em> header. You also need the library (<em>umaccess.lib</em>) from the latest WDK. However, the resulting driver will run fine on older versions of Windows.</p>
<h2>See also</h2>
<p><strong><a href="zeromodememory" title="VOID ZeroModeMemory(&#10;  VOID            *Destination,&#10;  SIZE_T          Length,&#10;  KPROCESSOR_MODE Mode&#10;);">ZeroModeMemory</a></strong></p>
<p><strong><a href="setusermemory" title="VOID SetUserMemory(&#10;  volatile VOID *Destination,&#10;  UCHAR         Fill,&#10;  SIZE_T        Length&#10;);">SetUserMemory</a></strong></p>
<p><strong><a href="fillusermemory" title="VOID FillUserMemory(&#10;  volatile VOID *Destination,&#10;  SIZE_T        Length,&#10;  UCHAR         Fill&#10;);">FillUserMemory</a></strong></p>
<p><strong><a href="copytouser" title="VOID CopyToUser(&#10;  volatile VOID *Destination,&#10;  const VOID    *Source,&#10;  SIZE_T        Length&#10;);">CopyToUser</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/usermode_accessors/nf-usermode_accessors-zerousermemory">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/usermode_accessors/nf-usermode_accessors-zerousermemory.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script src="modules/highlight.js/highlight.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
