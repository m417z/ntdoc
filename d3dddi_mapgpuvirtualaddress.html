<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="D3DDDI_MAPGPUVIRTUALADDRESS - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>D3DDDI_MAPGPUVIRTUALADDRESS - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            D3DDDI_MAPGPUVIRTUALADDRESS - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3dukmdt.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct D3DDDI_MAPGPUVIRTUALADDRESS {
  D3DKMT_HANDLE                           hPagingQueue;
  D3DKMT_ALIGN64 D3DGPU_VIRTUAL_ADDRESS   BaseAddress;
  D3DKMT_ALIGN64 D3DGPU_VIRTUAL_ADDRESS   MinimumAddress;
  D3DKMT_ALIGN64 D3DGPU_VIRTUAL_ADDRESS   MaximumAddress;
  D3DKMT_HANDLE                           hAllocation;
  D3DKMT_ALIGN64 D3DGPU_SIZE_T            OffsetInPages;
  D3DKMT_ALIGN64 D3DGPU_SIZE_T            SizeInPages;
  <a href="d3dddigpuvirtualaddress_protection_type" title="typedef struct _D3DDDIGPUVIRTUALADDRESS_PROTECTION_TYPE {&#10;  union {&#10;    struct {&#10;      UINT64 Write : 1;&#10;      UINT64 Execute : 1;&#10;      UINT64 Zero : 1;&#10;      UINT64 NoAccess : 1;&#10;      UINT64 SystemUseOnly : 1;&#10;      UINT64 Reserved : 59;&#10;    };&#10;    D3DKMT_ALIGN64 UINT64 Value;&#10;  };&#10;} D3DDDIGPUVIRTUALADDRESS_PROTECTION_TYPE;">D3DDDIGPUVIRTUALADDRESS_PROTECTION_TYPE</a> Protection;
  D3DKMT_ALIGN64 <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a>                   DriverProtection;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>                                    Reserved0;
  D3DKMT_ALIGN64 <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a>                   Reserved1;
  D3DKMT_ALIGN64 D3DGPU_VIRTUAL_ADDRESS   VirtualAddress;
  D3DKMT_ALIGN64 <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a>                   PagingFenceValue;
} D3DDDI_MAPGPUVIRTUALADDRESS;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dukmdt/ns-d3dukmdt-d3dddi_mapgpuvirtualaddress">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/d3dddi_mapgpuvirtualaddress.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-d3dukmdt-d3dddi_mapgpuvirtualaddress)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="d3dddi_mapgpuvirtualaddress-structure">D3DDDI_MAPGPUVIRTUALADDRESS structure</h1>

<h2 id="description">Description</h2>

<p>The <strong>D3DDDI_MAPGPUVIRTUALADDRESS</strong> structure is used with <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_mapgpuvirtualaddresscb"><strong>pfnMapGpuVirtualAddressCb</strong></a> to map a GPU virtual address range to a specific allocation range or to put it to the <a rel="noopener" target="_blank" href="d3dddigpuvirtualaddress_protection_type"><em>Invalid</em> or <em>Zero</em></a> state.</p>

<h2 id="members">Members</h2>

<h3 id="hpagingqueue"><code>hPagingQueue</code></h3>

<p>A handle for the device paging queue, used for the operation.</p>

<h3 id="baseaddress"><code>BaseAddress</code></h3>

<p>(Optional) If non-NULL, the video memory manager will attempt to use this address as the base address for the mapping. If the range from <strong>BaseAddress</strong> to <strong>BaseAddress</strong>+<strong>Size</strong> isnâ€™t free, it must belong to a range, previously obtained by calling <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_reservegpuvirtualaddresscb"><strong>pfnReserveGpuVirtualAddressCb</strong></a> or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_mapgpuvirtualaddresscb"><strong>pfnMapGpuVirtualAddressCb</strong></a>.</p>

<p>The <strong>BaseAddress</strong> value is in bytes and must be aligned to CPU page boundary.
If NULL is specified, the video memory manager will pick the base address for the allocation within the specified <strong>MinimumAddress</strong> and <strong>MaximumAddress</strong>.</p>

<h3 id="minimumaddress"><code>MinimumAddress</code></h3>

<p>(Optional) Specifies the minimum GPU virtual address to consider for the mapped range.</p>

<p>The <strong>MinimumAddress</strong> value is in bytes and must be aligned to 4KB page. This parameter is ignored when <strong>BaseAddress</strong> != NULL.</p>

<h3 id="maximumaddress"><code>MaximumAddress</code></h3>

<p>(Optional) Specifies the maximum GPU virtual address to consider for the mapped range. the video memory manager will guarantee that <strong>BaseAddress</strong>+<strong>Size</strong> &lt;= <strong>MaximumAddress</strong>. If <strong>MaximumAddress</strong> is set to NULL the video memory manager will not apply any limit.</p>

<p>The <strong>MaximumAddress</strong> value is in bytes and must be aligned to the 4KB page. This parameter is ignored when <strong>BaseAddress</strong> != NULL.</p>

<h3 id="hallocation"><code>hAllocation</code></h3>

<p>Handle to the allocation being mapped into the GPU virtual address space. Must be NULL when <strong>Protection.NoAccess</strong> or <strong>Protection.Zero</strong> is specified.</p>

<h3 id="offsetinpages"><code>OffsetInPages</code></h3>

<p>Specifies the offset, in 4KB, to the starting page within the specified allocation that must be mapped.</p>

<h3 id="sizeinpages"><code>SizeInPages</code></h3>

<p>Specifies the size of the range to map, in 4KB pages.</p>

<h3 id="protection"><code>Protection</code></h3>

<p>A <a rel="noopener" target="_blank" href="d3dddigpuvirtualaddress_protection_type"><strong>D3DDDIGPUVIRTUALADDRESS_PROTECTION_TYPE</strong></a> structure that specifies the protection on the GPU virtual address that is mapped.</p>

<h3 id="driverprotection"><code>DriverProtection</code></h3>

<p>Specifies a driver-specific, 64-bit protection value associated with the VA range being allocated. The specified driver protection will be used in call to <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/dxgkddiupdatepagetable"><strong>DxgkDdiUpdatePageTable</strong></a> for page table entries corresponding to this virtual address range.</p>

<h3 id="reserved0"><code>Reserved0</code></h3>

<p>This member is reserved and should be set to zero.</p>

<h3 id="reserved1"><code>Reserved1</code></h3>

<p>This member is reserved and should be set to zero.</p>

<h3 id="virtualaddress"><code>VirtualAddress</code></h3>

<p>The virtual address assigned to the allocation.</p>

<h3 id="pagingfencevalue"><code>PagingFenceValue</code></h3>

<p>The device paging fence value that the video memory manager signals when the map operation completes on the GPU. The user-mode driver must ensure that this fence is retired or explicitly wait on either the CPU or the GPU on that fence before allowing the GPU to access the mapped range or an unrecoverable fault might occur.
A zero fence value might be returned, meaning that the operation is already completed.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="d3dddigpuvirtualaddress_protection_type"><strong>D3DDDIGPUVIRTUALADDRESS_PROTECTION_TYPE</strong></a></p>

<p><a rel="noopener" target="_blank" href="d3dkmtmapgpuvirtualaddress"><strong>D3DKMTMapGpuVirtualAddress</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/dxgkddiupdatepagetable"><strong>DxgkDdiUpdatePageTable</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_mapgpuvirtualaddresscb"><strong>pfnMapGpuVirtualAddressCb</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_reservegpuvirtualaddresscb"><strong>pfnReserveGpuVirtualAddressCb</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dukmdt/ns-d3dukmdt-d3dddi_mapgpuvirtualaddress">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3dukmdt/ns-d3dukmdt-d3dddi_mapgpuvirtualaddress.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
