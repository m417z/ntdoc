<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="USBFN_ATTACH_ACTION - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>USBFN_ATTACH_ACTION - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            USBFN_ATTACH_ACTION - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// usbfnattach.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef enum _USBFN_ATTACH_ACTION {
  UsbfnPortDetected,
  UsbfnPortDetectedNoCad,
  UsbfnProceedWithAttach,
  UsbfnIgnoreAttach,
  UsbfnDetectProprietaryCharger,
  UsbfnHwBasedChargerDetection
} USBFN_ATTACH_ACTION, *PUSBFN_ATTACH_ACTION;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/usbfnattach/ne-usbfnattach-_usbfn_attach_action">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/usbfn_attach_action.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ne-usbfnattach-_usbfn_attach_action)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>_USBFN_ATTACH_ACTION enumeration</h1>

<h2>Description</h2>

<p>Defines the actions that the Universal Serial Bus (USB) function stack takes when a device is attached to a USB port.</p>

<h2>Constants</h2>

<h3><code>UsbfnPortDetected</code></h3>

<p>The USB function stack uses the returned port type to determine charging current and notify the Charging Aggregation Driver (CAD) of the power source change. If the detected port type is <strong>UsbFnStandardDownstreamPort</strong> or <strong>UsbfnChargingDownstreamPort</strong>, the USB function stack will attempt to connect to the host (see <a href="usbfn_port_type" title="typedef enum _USBFN_PORT_TYPE {&#10;  UsbfnUnknownPort,&#10;  UsbfnStandardDownstreamPort,&#10;  UsbfnChargingDownstreamPort,&#10;  UsbfnDedicatedChargingPort,&#10;  UsbfnInvalidDedicatedChargingPort,&#10;  UsbfnProprietaryDedicatedChargingPort,&#10;  UsbfnPortTypeMaximum&#10;} USBFN_PORT_TYPE, *PUSBFN_PORT_TYPE;">USBFN_PORT_TYPE</a> for more information).</p>

<h3><code>UsbfnPortDetectedNoCad</code></h3>

<p>The USB function stack does not notify the CAD of the power source change. If the detected port type is <strong>UsbFnStandardDownstreamPort</strong> or <strong>UsbfnChargingDownstreamPort</strong>, the USB function stack attempts to connect to the host (see <a href="usbfn_port_type" title="typedef enum _USBFN_PORT_TYPE {&#10;  UsbfnUnknownPort,&#10;  UsbfnStandardDownstreamPort,&#10;  UsbfnChargingDownstreamPort,&#10;  UsbfnDedicatedChargingPort,&#10;  UsbfnInvalidDedicatedChargingPort,&#10;  UsbfnProprietaryDedicatedChargingPort,&#10;  UsbfnPortTypeMaximum&#10;} USBFN_PORT_TYPE, *PUSBFN_PORT_TYPE;">USBFN_PORT_TYPE</a> for more information).</p>

<h3><code>UsbfnProceedWithAttach</code></h3>

<p>The USB function stack continues with the legacy software-based detection that exists in the client drivers, and issues the CAD notifications about power source notifications.</p>

<h3><code>UsbfnIgnoreAttach</code></h3>

<p>The USB function stack discontinues further port detection operations and does not notify CAD of a power source update.</p>

<h3><code>UsbfnDetectProprietaryCharger</code></h3>

<p>The USB function stack calls the <a href="ufx_proprietary_charger_detect" title="UFX_PROPRIETARY_CHARGER_DETECT UfxProprietaryChargerDetect;&#10;&#10;NTSTATUS UfxProprietaryChargerDetect(&#10;  [in]  PVOID Context,&#10;  [out] PUFX_PROPRIETARY_CHARGER DetectedCharger&#10;)&#10;{...}">UFX_PROPRIETARY_CHARGER_DETECT</a> event callback function implemented by the USB lower filter driver, to perform proprietary charger detection.</p>

<h3><code>UsbfnHwBasedChargerDetection</code></h3>

<h2>See also</h2>

<p><a href="usbfn_get_attach_action" title="USBFN_GET_ATTACH_ACTION UsbfnGetAttachAction;&#10;&#10;NTSTATUS UsbfnGetAttachAction(&#10;  [in]  PVOID Context,&#10;  [out] PUSBFN_ON_ATTACH OnAttach&#10;)&#10;{...}">USBFN_GET_ATTACH_ACTION</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/usbfnattach/ne-usbfnattach-_usbfn_attach_action">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/usbfnattach/ne-usbfnattach-_usbfn_attach_action.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
