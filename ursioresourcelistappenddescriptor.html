<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="UrsIoResourceListAppendDescriptor - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>UrsIoResourceListAppendDescriptor - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            UrsIoResourceListAppendDescriptor - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ursdevice.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> UrsIoResourceListAppendDescriptor(
  [in] URSIORESLIST            IoResourceList,
  [in] <a href="io_resource_descriptor" title="typedef struct _IO_RESOURCE_DESCRIPTOR {&#10;  UCHAR  Option;&#10;  UCHAR  Type;&#10;  UCHAR  ShareDisposition;&#10;  UCHAR  Spare1;&#10;  USHORT Flags;&#10;  USHORT Spare2;&#10;  union {&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Port;&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Memory;&#10;...">PIO_RESOURCE_DESCRIPTOR</a> Descriptor
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ursdevice/nf-ursdevice-ursioresourcelistappenddescriptor">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ursioresourcelistappenddescriptor.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ursdevice-ursioresourcelistappenddescriptor)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>UrsIoResourceListAppendDescriptor function</h1>
<h2>Description</h2>
<p>Appends the specified resource descriptor to the specified I/O resource list object that maintains resource descriptors for the
host or function role.</p>
<h2>Parameters</h2>
<h3><code>IoResourceList</code> [in]</h3>
<p>A role's I/O resource list object to which the resource descriptor is appended. This object is allocated by the framework and passed to the client driver when the framework invokes the driver's <a href="evt_urs_device_filter_resource_requirements" title="EVT_URS_DEVICE_FILTER_RESOURCE_REQUIREMENTS EvtUrsDeviceFilterResourceRequirements;&#10;&#10;NTSTATUS EvtUrsDeviceFilterResourceRequirements(&#10;  [in] WDFDEVICE Device,&#10;  [in] WDFIORESREQLIST IoResourceRequirementsList,&#10;  [in] URSIORESLIST HostRoleResources,&#10;  [in] URSIORESLIST FunctionRoleResources&#10;)&#10;{...}">EVT_URS_DEVICE_FILTER_RESOURCE_REQUIREMENTS</a> implementation.</p>
<h3><code>Descriptor</code> [in]</h3>
<p>A pointer to <a href="io_resource_descriptor" title="typedef struct _IO_RESOURCE_DESCRIPTOR {&#10;  UCHAR  Option;&#10;  UCHAR  Type;&#10;  UCHAR  ShareDisposition;&#10;  UCHAR  Spare1;&#10;  USHORT Flags;&#10;  USHORT Spare2;&#10;  union {&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Port;&#10;    struct {&#10;      ULONG            Length;&#10;      ULONG            Alignment;&#10;      PHYSICAL_ADDRESS MinimumAddress;&#10;      PHYSICAL_ADDRESS MaximumAddress;&#10;    } Memory;&#10;...">IO_RESOURCE_DESCRIPTOR</a> that contains the resource descriptor for the role.</p>
<h2>Return value</h2>
<p>The method returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if the operation succeeds. Otherwise, this method might return an appropriate <a href="https://learn.microsoft.com/windows-hardware/drivers/kernel/ntstatus-values">NTSTATUS</a> error code.</p>
<h2>Remarks</h2>
<p>After the client driver calls <a href="ursdeviceinitialize" title="NTSTATUS UrsDeviceInitialize(&#10;  [in] WDFDEVICE   Device,&#10;  [in] PURS_CONFIG Config&#10;);">UrsDeviceInitialize</a>, the framework allocates memory for the <em>resource requirements list</em>. When the USB dual-role class extension invokes the client driver's implementation of <a href="evt_urs_device_filter_resource_requirements" title="EVT_URS_DEVICE_FILTER_RESOURCE_REQUIREMENTS EvtUrsDeviceFilterResourceRequirements;&#10;&#10;NTSTATUS EvtUrsDeviceFilterResourceRequirements(&#10;  [in] WDFDEVICE Device,&#10;  [in] WDFIORESREQLIST IoResourceRequirementsList,&#10;  [in] URSIORESLIST HostRoleResources,&#10;  [in] URSIORESLIST FunctionRoleResources&#10;)&#10;{...}">EVT_URS_DEVICE_FILTER_RESOURCE_REQUIREMENTS</a>, it passes a WDFIORESREQLIST handle to that requirements list along with URSIORESLIST handles for host and function role <em>resource lists</em>. In the implementation, the client driver is expected to enumerate through the requirements list and add the resource descriptor (if it wants to use that resource) to the resource list for each role.</p>
<p>To add a resource descriptors for a role, the driver calls <strong>UrsIoResourceListAppendDescriptor</strong> and specifies the descriptor and the resource list to which the resource must be added.</p>
<p>For a code example, see <a href="evt_urs_device_filter_resource_requirements" title="EVT_URS_DEVICE_FILTER_RESOURCE_REQUIREMENTS EvtUrsDeviceFilterResourceRequirements;&#10;&#10;NTSTATUS EvtUrsDeviceFilterResourceRequirements(&#10;  [in] WDFDEVICE Device,&#10;  [in] WDFIORESREQLIST IoResourceRequirementsList,&#10;  [in] URSIORESLIST HostRoleResources,&#10;  [in] URSIORESLIST FunctionRoleResources&#10;)&#10;{...}">EVT_URS_DEVICE_FILTER_RESOURCE_REQUIREMENTS</a>.</p>
<p>For more information about resource requirements lists, see <a href="https://learn.microsoft.com/windows-hardware/drivers/wdf/hardware-resources-for-kmdf-drivers">Handling Hardware Resources</a>.</p>
<h2>See also</h2>
<p><a href="evt_urs_device_filter_resource_requirements" title="EVT_URS_DEVICE_FILTER_RESOURCE_REQUIREMENTS EvtUrsDeviceFilterResourceRequirements;&#10;&#10;NTSTATUS EvtUrsDeviceFilterResourceRequirements(&#10;  [in] WDFDEVICE Device,&#10;  [in] WDFIORESREQLIST IoResourceRequirementsList,&#10;  [in] URSIORESLIST HostRoleResources,&#10;  [in] URSIORESLIST FunctionRoleResources&#10;)&#10;{...}">EVT_URS_DEVICE_FILTER_RESOURCE_REQUIREMENTS</a></p>
<p><a href="ursdeviceinitialize" title="NTSTATUS UrsDeviceInitialize(&#10;  [in] WDFDEVICE   Device,&#10;  [in] PURS_CONFIG Config&#10;);">UrsDeviceInitialize</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ursdevice/nf-ursdevice-ursioresourcelistappenddescriptor">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ursdevice/nf-ursdevice-ursioresourcelistappenddescriptor.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
