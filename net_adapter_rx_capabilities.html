<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NET_ADAPTER_RX_CAPABILITIES - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NET_ADAPTER_RX_CAPABILITIES - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NET_ADAPTER_RX_CAPABILITIES - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// netadapter.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _NET_ADAPTER_RX_CAPABILITIES {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                                  Size;
  <a href="net_rx_fragment_buffer_allocation_mode" title="typedef enum _NET_RX_FRAGMENT_BUFFER_ALLOCATION_MODE {&#10;  NetRxFragmentBufferAllocationModeSystem = 0,&#10;  NetRxFragmentBufferAllocationModeDriver = 1&#10;} NET_RX_FRAGMENT_BUFFER_ALLOCATION_MODE;">NET_RX_FRAGMENT_BUFFER_ALLOCATION_MODE</a> AllocationMode;
  <a href="net_rx_fragment_buffer_attachment_mode" title="typedef enum _NET_RX_FRAGMENT_BUFFER_ATTACHMENT_MODE {&#10;  NetRxFragmentBufferAttachmentModeSystem = 0,&#10;  NetRxFragmentBufferAttachmentModeDriver = 1&#10;} NET_RX_FRAGMENT_BUFFER_ATTACHMENT_MODE;">NET_RX_FRAGMENT_BUFFER_ATTACHMENT_MODE</a> AttachmentMode;
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a>                                 FragmentRingNumberOfElementsHint;
  <a href="size_t-2" title="typedef ULONG_PTR SIZE_T;">SIZE_T</a>                                 MaximumFrameSize;
  <a href="size_t-2" title="typedef ULONG_PTR SIZE_T;">SIZE_T</a>                                 MaximumNumberOfQueues;
  union {
    struct {
      PFN_NET_ADAPTER_RETURN_RX_BUFFER EvtAdapterReturnRxBuffer;
    } DUMMYSTRUCTNAME;
    struct {
      <a href="net_memory_mapping_requirement" title="typedef enum _NET_MEMORY_MAPPING_REQUIREMENT {&#10;  NetMemoryMappingRequirementNone = 0,&#10;  NetMemoryMappingRequirementDmaMapped = 1&#10;} NET_MEMORY_MAPPING_REQUIREMENT;">NET_MEMORY_MAPPING_REQUIREMENT</a> MappingRequirement;
      <a href="size_t-2" title="typedef ULONG_PTR SIZE_T;">SIZE_T</a>                         FragmentBufferAlignment;
      <a href="net_adapter_dma_capabilities" title="typedef struct _NET_ADAPTER_DMA_CAPABILITIES {&#10;  ULONG            Size;&#10;  WDFDMAENABLER    DmaEnabler;&#10;  PHYSICAL_ADDRESS MaximumPhysicalAddress;&#10;  WDF_TRI_STATE    CacheEnabled;&#10;  NODE_REQUIREMENT PreferredNode;&#10;} NET_ADAPTER_DMA_CAPABILITIES;">NET_ADAPTER_DMA_CAPABILITIES</a>   *DmaCapabilities;
    } DUMMYSTRUCTNAME2;
  } DUMMYUNIONNAME;
} NET_ADAPTER_RX_CAPABILITIES;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/netadapter/ns-netadapter-_net_adapter_rx_capabilities">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/net_adapter_rx_capabilities.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-netadapter-_net_adapter_rx_capabilities)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_net_adapter_rx_capabilities-structure">_NET_ADAPTER_RX_CAPABILITIES structure</h1>

<h2 id="description">Description</h2>

<p>The <strong>NET_ADAPTER_RX_CAPABILITIES</strong> structure describes the receive capabilities of a net adapter.</p>

<h2 id="members">Members</h2>

<h3 id="size"><code>Size</code></h3>

<p>The size of this structure, in bytes.</p>

<h3 id="allocationmode"><code>AllocationMode</code></h3>

<p>A <a rel="noopener" target="_blank" href="net_rx_fragment_buffer_allocation_mode"><strong>NET_RX_FRAGMENT_BUFFER_ALLOCATION_MODE</strong></a> value that specifies how the operating system should allocate receive buffers.</p>

<p>UMDF drivers must set this value to <strong>NetRxFragmentBufferAllocationModeSystem</strong>.</p>

<h3 id="attachmentmode"><code>AttachmentMode</code></h3>

<p>A <a rel="noopener" target="_blank" href="net_rx_fragment_buffer_attachment_mode"><strong>NET_RX_FRAGMENT_BUFFER_ATTACHMENT_MODE</strong></a> value that specifies how the operating system should pre-attach receive buffers.</p>

<p>UMDF drivers must set this value to <strong>NetRxFragmentBufferAttachmentModeSystem</strong>.</p>

<h3 id="fragmentringnumberofelementshint"><code>FragmentRingNumberOfElementsHint</code></h3>

<p>A hint indicating how many elements the adapter wants for each receive queue's ring buffer of <a rel="noopener" target="_blank" href="net_fragment"><strong>NET_FRAGMENT</strong></a>s. This member must be a power of 2.</p>

<h3 id="maximumframesize"><code>MaximumFrameSize</code></h3>

<p>The maximum frame size, in bytes, that the adapter can receive. This value should include the maximum transmission unit (MTU) size that your hardware supports for an IP packet, plus additional space your driver might need for packet metadata. For more information, see the receive example in the Remarks section of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/netpacketqueue/nc-netpacketqueue-evt_packet_queue_advance"><em>EVT_PACKET_QUEUE_ADVANCE</em></a>.</p>

<h3 id="maximumnumberofqueues"><code>MaximumNumberOfQueues</code></h3>

<p>The maximum number of receive queues that the adapter supports.</p>

<h3 id="dummyunionname"><code>DUMMYUNIONNAME</code></h3>

<p>A union that contains the following members:</p>

<h3 id="dummyunionnamedummystructname"><code>DUMMYUNIONNAME.DUMMYSTRUCTNAME</code></h3>

<p>A struct that contains the following member:</p>

<h3 id="dummyunionnamedummystructnameevtadapterreturnrxbuffer"><code>DUMMYUNIONNAME.DUMMYSTRUCTNAME.EvtAdapterReturnRxBuffer</code></h3>

<p>A pointer to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/netadapter/nc-netadapter-evt_net_adapter_return_rx_buffer"><em>EVT_NET_ADAPTER_RETURN_RX_BUFFER</em></a> callback function. This member is required if the <strong>AllocationMode</strong> member is set to <strong>NetRxFragmentBufferAllocationModeDriver</strong> for the operating system to invoke once the system is finished with the receive buffer.</p>

<h3 id="dummyunionnamedummystructname2"><code>DUMMYUNIONNAME.DUMMYSTRUCTNAME2</code></h3>

<p>A struct that contains the following members:</p>

<h3 id="dummyunionnamedummystructname2mappingrequirement"><code>DUMMYUNIONNAME.DUMMYSTRUCTNAME2.MappingRequirement</code></h3>

<p>A <a rel="noopener" target="_blank" href="net_memory_mapping_requirement"><strong>NET_MEMORY_MAPPING_REQUIREMENT</strong></a> value that specifies how the operating system should map receive data buffers.</p>

<p>UMDF drivers must set <strong>MappingRequirement</strong> to <strong>NetMemoryMappingRequirementNone</strong>.</p>

<h3 id="dummyunionnamedummystructname2fragmentbufferalignment"><code>DUMMYUNIONNAME.DUMMYSTRUCTNAME2.FragmentBufferAlignment</code></h3>

<p>The minimum alignment for packet fragments. This member must be a power of 2.</p>

<h3 id="dummyunionnamedummystructname2dmacapabilities"><code>DUMMYUNIONNAME.DUMMYSTRUCTNAME2.DmaCapabilities</code></h3>

<p>A pointer to a driver-allocated and initialized <a rel="noopener" target="_blank" href="net_adapter_dma_capabilities"><strong>NET_DMA_CAPABILITIES</strong></a> structure that describes the adapter's DMA capabilities on the receive path. This member is ignored by NetAdapterCx if <strong>MappingRequirement</strong> is not set to <strong>NetMemoryMappingRequirementDmaMapped</strong>.</p>

<p>UMDF NetAdapterCX doesn't support <strong>DmaCapabilities</strong>. UMDF drivers must set this member to <strong>NULL</strong>.</p>

<h2 id="remarks">Remarks</h2>

<p>Call one of the NET_ADAPTER_RX_CAPABILITIES_INIT_<em>XXX</em> functions to initialize this structure. For more info about each initialization function, see the links in the See Also section. An initialized <strong>NET_ADAPTER_RX_CAPABILITIES</strong> structure is passed as a parameter to <a rel="noopener" target="_blank" href="netadaptersetdatapathcapabilities"><strong>NetAdapterSetDatapathCapabilities</strong></a>.</p>

<p>Typically, a client driver either performs both allocation and attachment itself or specifies that the operating system perform both. In most cases, we recommend that the operating system allocates and attaches receive buffers.</p>

<p>If the client does specify driver-allocated and attached receive buffers, it must supply both a custom return context structure in the <strong>RxBufferReturnContext</strong> member of each <a rel="noopener" target="_blank" href="net_fragment"><strong>NET_FRAGMENT</strong></a> during buffer allocation, as well as an *EVT_NET_ADAPTER_RETURN_RX_BUFFER* callback function in this <strong>NET_ADAPTER_RX_CAPABILITIES</strong> structure for the operating system to invoke once it has finished with the buffer.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="net_adapter_rx_capabilities_init_driver_managed"><strong>NET_ADAPTER_RX_CAPABILITIES_INIT_DRIVER_MANAGED</strong></a></p>

<p><a rel="noopener" target="_blank" href="net_adapter_rx_capabilities_init_system_managed"><strong>NET_ADAPTER_RX_CAPABILITIES_INIT_SYSTEM_MANAGED</strong></a></p>

<p><a rel="noopener" target="_blank" href="net_adapter_rx_capabilities_init_system_managed_dma"><strong>NET_ADAPTER_RX_CAPABILITIES_INIT_SYSTEM_MANAGED_DMA</strong></a></p>

<p><a rel="noopener" target="_blank" href="netadaptersetdatapathcapabilities"><strong>NetAdapterSetDatapathCapabilities</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/netadapter/ns-netadapter-_net_adapter_rx_capabilities">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/netadapter/ns-netadapter-_net_adapter_rx_capabilities.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
