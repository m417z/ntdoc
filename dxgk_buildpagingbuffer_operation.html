<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DXGK_BUILDPAGINGBUFFER_OPERATION - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DXGK_BUILDPAGINGBUFFER_OPERATION - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DXGK_BUILDPAGINGBUFFER_OPERATION - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3dkmddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef enum _DXGK_BUILDPAGINGBUFFER_OPERATION {
  DXGK_OPERATION_TRANSFER = 0,
  DXGK_OPERATION_FILL = 1,
  DXGK_OPERATION_DISCARD_CONTENT = 2,
  DXGK_OPERATION_READ_PHYSICAL = 3,
  DXGK_OPERATION_WRITE_PHYSICAL = 4,
  DXGK_OPERATION_MAP_APERTURE_SEGMENT = 5,
  DXGK_OPERATION_UNMAP_APERTURE_SEGMENT = 6,
  DXGK_OPERATION_SPECIAL_LOCK_TRANSFER = 7,
  DXGK_OPERATION_VIRTUAL_TRANSFER = 8,
  DXGK_OPERATION_VIRTUAL_FILL = 9,
  DXGK_OPERATION_INIT_CONTEXT_RESOURCE = 10,
  DXGK_OPERATION_UPDATE_PAGE_TABLE = 11,
  DXGK_OPERATION_FLUSH_TLB = 12,
  DXGK_OPERATION_UPDATE_CONTEXT_ALLOCATION = 13,
  DXGK_OPERATION_COPY_PAGE_TABLE_ENTRIES = 14,
  DXGK_OPERATION_NOTIFY_RESIDENCY = 15,
  DXGK_OPERATION_SIGNAL_MONITORED_FENCE = 16,
  DXGK_OPERATION_MAP_APERTURE_SEGMENT2 = 17,
  DXGK_OPERATION_NOTIFY_FENCE_RESIDENCY = 18,
  DXGK_OPERATION_MAP_MMU = 19,
  DXGK_OPERATION_UNMAP_MMU = 20,
  DXGK_OPERATION_NOTIFY_RESIDENCY2 = 21,
  DXGK_OPERATION_NOTIFY_ALLOC = 22
} DXGK_BUILDPAGINGBUFFER_OPERATION;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/ne-d3dkmddi-_dxgk_buildpagingbuffer_operation">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/dxgk_buildpagingbuffer_operation.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ne-d3dkmddi-_dxgk_buildpagingbuffer_operation)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>DXGK_BUILDPAGINGBUFFER_OPERATION enumeration</h1>
<h2>Description</h2>
<p><strong>DXGK_BUILDPAGINGBUFFER_OPERATION</strong> indicates the type of memory operation to perform.</p>
<h2>Constants</h2>
<h3><code>DXGK_OPERATION_TRANSFER:0</code></h3>
<p>Perform a transfer operation that moves the content of an allocation from one location to another. WDDMv1 only.</p>
<h3><code>DXGK_OPERATION_FILL:1</code></h3>
<p>Fill an allocation with a specified pattern. WDDMv1 only.</p>
<h3><code>DXGK_OPERATION_DISCARD_CONTENT:2</code></h3>
<p>Notifies the driver that an allocation is discarded from the allocation's current location in a memory segment (that is, the allocation is evicted and not copied back to system memory). WDDMv1 only.</p>
<h3><code>DXGK_OPERATION_READ_PHYSICAL:3</code></h3>
<p>Perform a read-physical operation that reads from a specified physical memory address. WDDMv1 only.</p>
<h3><code>DXGK_OPERATION_WRITE_PHYSICAL:4</code></h3>
<p>Perform a write-physical operation that writes to a specified physical memory address. WDDMv1 only.</p>
<h3><code>DXGK_OPERATION_MAP_APERTURE_SEGMENT:5</code></h3>
<p>Perform a map-aperture-segment operation that maps a memory descriptor list (<a href="mdl" title="typedef struct _MDL {&#10;  struct _MDL      *Next;&#10;  CSHORT           Size;&#10;  CSHORT           MdlFlags;&#10;  struct _EPROCESS *Process;&#10;  PVOID            MappedSystemVa;&#10;  PVOID            StartVa;&#10;  ULONG            ByteCount;&#10;  ULONG            ByteOffset;&#10;} MDL, *PMDL;">MDL</a>) into a range of an aperture segment. Common WDDMv1 and WDDMv2.</p>
<h3><code>DXGK_OPERATION_UNMAP_APERTURE_SEGMENT:6</code></h3>
<p>Perform an unmap-aperture-segment operation that unmaps a previously mapped range of an aperture segment. Common WDDMv1 and WDDMv2.</p>
<h3><code>DXGK_OPERATION_SPECIAL_LOCK_TRANSFER:7</code></h3>
<p>Perform a special transfer operation that moves the content of an allocation from one location to another. In this operation, the content of the allocation is transferred from or to the alternate virtual address that was set up for the allocation (that is, when the <a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_lockcb"><strong>pfnLockCb</strong></a> function was called with the <strong>UseAlternateVA</strong> bit-field flag set). WDDMv1 only.</p>
<h3><code>DXGK_OPERATION_VIRTUAL_TRANSFER:8</code></h3>
<p>The operation is used to transfer allocation content between locations in memory. WDDMv1 only.</p>
<h3><code>DXGK_OPERATION_VIRTUAL_FILL:9</code></h3>
<p>The operation is used to fill an allocation with a pattern. WDDMv1 only.</p>
<h3><code>DXGK_OPERATION_INIT_CONTEXT_RESOURCE:10</code></h3>
<p>Perform a context initialization operation for a GPU context or device-specific context. This value is supported beginning with Windows 8. The display miniport driver allocates context resources by calling <a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkcb_createcontextallocation"><strong>DxgkCbCreateContextAllocation</strong></a>. Common WDDMv1 and WDDMv2.</p>
<h3><code>DXGK_OPERATION_UPDATE_PAGE_TABLE:11</code></h3>
<p>The operation is called to allow the kernel mode driver to build a command buffer to update a page table. Available starting with WDDM 2.0.</p>
<h3><code>DXGK_OPERATION_FLUSH_TLB:12</code></h3>
<p>This operation instructs the GPU to flush <em>translation look-aside buffer</em> entries, which belong to the given root page table. Available starting with WDDM 2.0.</p>
<h3><code>DXGK_OPERATION_UPDATE_CONTEXT_ALLOCATION:13</code></h3>
<p>This operation is used to update the content of a context or device allocation. Available starting with WDDM 2.0.</p>
<h3><code>DXGK_OPERATION_COPY_PAGE_TABLE_ENTRIES:14</code></h3>
<p>This operation is called to copy page table entries from one location to another. Available starting with WDDM 2.0.</p>
<h3><code>DXGK_OPERATION_NOTIFY_RESIDENCY:15</code></h3>
<p>The paging operation is issued every time an allocation residency is changed (when allocation is evicted or committed). Available starting with WDDM 2.0.</p>
<h3><code>DXGK_OPERATION_SIGNAL_MONITORED_FENCE:16</code></h3>
<p>This operation is called to signal a monitored fence. Available starting with Windows 10, version 1703 (WDDM 2.2).</p>
<h3><code>DXGK_OPERATION_MAP_APERTURE_SEGMENT2:17</code></h3>
<p>Perform a map-aperture-segment operation that maps an address descriptor list (ADL) into a range of an aperture segment. This operation behaves similarly to <strong>DXGK_OPERATION_MAP_APERTURE_SEGMENT</strong>, but provides a <strong><a href="dxgk_adl" title="typedef struct _DXGK_ADL {&#10;  UINT32         PageCount;&#10;  DXGK_ADL_FLAGS Flags;&#10;  union {&#10;    DXGK_PAGE_NUMBER       BasePageNumber;&#10;    const DXGK_PAGE_NUMBER *Pages;&#10;  };&#10;} DXGK_ADL;">DXGK_ADL</a></strong> instead of an <a href="mdl" title="typedef struct _MDL {&#10;  struct _MDL      *Next;&#10;  CSHORT           Size;&#10;  CSHORT           MdlFlags;&#10;  struct _EPROCESS *Process;&#10;  PVOID            MappedSystemVa;&#10;  PVOID            StartVa;&#10;  ULONG            ByteCount;&#10;  ULONG            ByteOffset;&#10;} MDL, *PMDL;">MDL</a>. Drivers supporting logical address remapping receive calls to <strong>DXGK_OPERATION_MAP_APERTURE_SEGMENT2</strong> instead of <strong>DXGK_OPERATION_MAP_APERTURE_SEGMENT</strong>.</p>
<p>To opt in to this operation, which is required for <a href="https://learn.microsoft.com/windows-hardware/drivers/display/iommu-dma-remapping">IOMMU DMA remapping</a>, the driver must indicate <strong>MapAperture2Supported</strong> support in <strong><a href="dxgk_vidmmcaps" title="typedef struct _DXGK_VIDMMCAPS {&#10;  union {&#10;    struct {&#10;      UINT OutOfOrderLock : 1;&#10;      UINT DedicatedPagingEngine : 1;&#10;      UINT PagingEngineCanSwizzle : 1;&#10;      UINT SectionBackedPrimary : 1;&#10;      UINT CrossAdapterResource : 1;&#10;      UINT VirtualAddressingSupported : 1;&#10;      UINT GpuMmuSupported : 1;&#10;      UINT IoMmuSupported : 1;&#10;      UINT ReplicateGdiContent : 1;&#10;      UINT NonCpuVisiblePrimary : 1;&#10;      UINT ParavirtualizationSupported : 1;&#10;      UINT IoMmuSecureModeSupported : 1;&#10;      UINT DisableSelfRefreshVRAMInS3 : 1;&#10;      UINT IoMmuSecureModeRequired : 1;&#10;      UINT MapAperture2Supported : 1;&#10;      UINT CrossAdapterResourceTexture : 1;&#10;      UINT CrossAdapterResourceScanout : 1;&#10;...">DXGK_VIDMMCAPS</a></strong> structure. This operation is available starting with WDDM 3.0.</p>
<h3><code>DXGK_OPERATION_NOTIFY_FENCE_RESIDENCY:18</code></h3>
<p>This operation notifies the driver about fence residency changes. Available starting with WDDM 2.9.</p>
<h3><code>DXGK_OPERATION_MAP_MMU:19</code></h3>
<p>Available starting in Windows 11, version 24H2 (WDDM 3.2).</p>
<h3><code>DXGK_OPERATION_UNMAP_MMU:20</code></h3>
<p>Available starting in Windows 11, version 24H2 (WDDM 3.2).</p>
<h3><code>DXGK_OPERATION_NOTIFY_RESIDENCY2:21</code></h3>
<p>Available starting in Windows 11, version 24H2 (WDDM 3.2).</p>
<h3><code>DXGK_OPERATION_NOTIFY_ALLOC:22</code></h3>
<p>This operation notifies the driver about certain paging operations for an allocation. Available starting in Windows 11, version 24H2 (WDDM 3.2). For more information, see <a href="https://learn.microsoft.com/windows-hardware/drivers/display/allocation-notification">Allocation notification</a>.</p>
<h2>Remarks</h2>
<p>The <strong>DXGK_BUILDPAGINGBUFFER_OPERATION</strong> structure is specified in the <strong>Operation</strong> member of the <strong><a href="dxgkarg_buildpagingbuffer" title="typedef struct _DXGKARG_BUILDPAGINGBUFFER {&#10;  VOID                             *pDmaBuffer;&#10;  UINT                             DmaSize;&#10;  VOID                             *pDmaBufferPrivateData;&#10;  UINT                             DmaBufferPrivateDataSize;&#10;  DXGK_BUILDPAGINGBUFFER_OPERATION Operation;&#10;  UINT                             MultipassOffset;&#10;  union {&#10;    struct {&#10;      HANDLE             hAllocation;&#10;      UINT               TransferOffset;&#10;      SIZE_T             TransferSize;&#10;      struct {&#10;        UINT SegmentId;&#10;        union {&#10;          LARGE_INTEGER SegmentAddress;&#10;          MDL           *pMdl;&#10;        };&#10;      } Source;&#10;      struct {&#10;...">DXGKARG_BUILDPAGINGBUFFER</a></strong> structure, which is passed to <a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkddi_buildpagingbuffer"><strong>DxgkDdiBuildPagingBuffer</strong></a> to build paging buffers for memory operations.</p>
<h2>See also</h2>
<p><strong><a href="dxgkarg_buildpagingbuffer" title="typedef struct _DXGKARG_BUILDPAGINGBUFFER {&#10;  VOID                             *pDmaBuffer;&#10;  UINT                             DmaSize;&#10;  VOID                             *pDmaBufferPrivateData;&#10;  UINT                             DmaBufferPrivateDataSize;&#10;  DXGK_BUILDPAGINGBUFFER_OPERATION Operation;&#10;  UINT                             MultipassOffset;&#10;  union {&#10;    struct {&#10;      HANDLE             hAllocation;&#10;      UINT               TransferOffset;&#10;      SIZE_T             TransferSize;&#10;      struct {&#10;        UINT SegmentId;&#10;        union {&#10;          LARGE_INTEGER SegmentAddress;&#10;          MDL           *pMdl;&#10;        };&#10;      } Source;&#10;      struct {&#10;...">DXGKARG_BUILDPAGINGBUFFER</a></strong></p>
<p><a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkddi_buildpagingbuffer"><strong>DxgkDdiBuildPagingBuffer</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/ne-d3dkmddi-_dxgk_buildpagingbuffer_operation">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3dkmddi/ne-d3dkmddi-_dxgk_buildpagingbuffer_operation.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
