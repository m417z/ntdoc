<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="IOCTL_ACPI_ENUM_CHILDREN - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>IOCTL_ACPI_ENUM_CHILDREN - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            IOCTL_ACPI_ENUM_CHILDREN - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// acpiioct.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">// <a href="ctl_code" title="void CTL_CODE(&#10;  DeviceType,&#10;  Function,&#10;  Method,&#10;  Access&#10;);">CTL_CODE</a>(0x0032, 0x008, METHOD_BUFFERED, FILE_READ_ACCESS | FILE_WRITE_ACCESS)
#define IOCTL_ACPI_ENUM_CHILDREN 0x0032C020</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/acpiioct/ni-acpiioct-ioctl_acpi_enum_children">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ioctl_acpi_enum_children.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ni-acpiioct-ioctl_acpi_enum_children)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="ioctl_acpi_enum_children-ioctl">IOCTL_ACPI_ENUM_CHILDREN IOCTL</h1>

<h2 id="description">Description</h2>

<p>The IOCTL_ACPI_ENUM_CHILDREN device control request can be used to enumerate the path and name of devices or named child objects in the ACPI namespace of the device to which this request is sent. A driver should call <a href="iobuilddeviceiocontrolrequest" title="__drv_aliasesMem PIRP IoBuildDeviceIoControlRequest(&#10;  [in]            ULONG            IoControlCode,&#10;  [in]            PDEVICE_OBJECT   DeviceObject,&#10;  [in, optional]  PVOID            InputBuffer,&#10;  [in]            ULONG            InputBufferLength,&#10;  [out, optional] PVOID            OutputBuffer,&#10;  [in]            ULONG            OutputBufferLength,&#10;  [in]            BOOLEAN          InternalDeviceIoControl,&#10;  [in, optional]  PKEVENT          Event,&#10;  [out]           PIO_STATUS_BLOCK IoStatusBlock&#10;);">IoBuildDeviceIoControlRequest</a> and pass the following input and output parameters to build this request.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="major-code">Major code</h3>

<h3 id="input-buffer">Input buffer</h3>

<p>Set the <strong><a href="iobuilddeviceiocontrolrequest" title="__drv_aliasesMem PIRP IoBuildDeviceIoControlRequest(&#10;  [in]            ULONG            IoControlCode,&#10;  [in]            PDEVICE_OBJECT   DeviceObject,&#10;  [in, optional]  PVOID            InputBuffer,&#10;  [in]            ULONG            InputBufferLength,&#10;  [out, optional] PVOID            OutputBuffer,&#10;  [in]            ULONG            OutputBufferLength,&#10;  [in]            BOOLEAN          InternalDeviceIoControl,&#10;  [in, optional]  PKEVENT          Event,&#10;  [out]           PIO_STATUS_BLOCK IoStatusBlock&#10;);">IoBuildDeviceIoControlRequest</a></strong> input parameters as follows:</p>

<ul>
<li><em>IoControlCode</em> is set to IOCTL_ACPI_ENUM_CHILDREN.</li>
<li><em>DeviceObject</em> is set to a pointer to the physical device object (PDO) of the device.</li>
<li><em>InputBuffer</em> is set to a pointer to a variable-length <a href="acpi_enum_children_input_buffer" title="typedef struct _ACPI_ENUM_CHILDREN_INPUT_BUFFER {&#10;  ULONG Signature;&#10;  ULONG Flags;&#10;  ULONG NameLength;&#10;  CHAR  Name[ANYSIZE_ARRAY];&#10;} ACPI_ENUM_CHILDREN_INPUT_BUFFER, *PACPI_ENUM_CHILDREN_INPUT_BUFFER;">ACPI_ENUM_CHILDREN_INPUT_BUFFER</a> structure.</li>
<li><em>InputBufferLength</em> is set to the size, in bytes, of the input buffer that is supplied by <em>InputBuffer</em>.</li>
<li><em>OutputBufferLength</em> supplies the size, in bytes, of the output buffer that is supplied by <em>OutputBuffer</em>.</li>
<li><em>InternalDeviceIoControl</em> is set to <strong>FALSE</strong>.</li>
<li><em>Event</em> is set to a pointer to a caller-allocated and initialized event object.</li>
</ul>

<h3 id="input-buffer-length">Input buffer length</h3>

<p><em>InputBufferLength</em> is set to the size, in bytes, of the input buffer that is supplied by <em>InputBuffer</em>.</p>

<h3 id="output-buffer">Output buffer</h3>

<p>Set the <strong><a href="iobuilddeviceiocontrolrequest" title="__drv_aliasesMem PIRP IoBuildDeviceIoControlRequest(&#10;  [in]            ULONG            IoControlCode,&#10;  [in]            PDEVICE_OBJECT   DeviceObject,&#10;  [in, optional]  PVOID            InputBuffer,&#10;  [in]            ULONG            InputBufferLength,&#10;  [out, optional] PVOID            OutputBuffer,&#10;  [in]            ULONG            OutputBufferLength,&#10;  [in]            BOOLEAN          InternalDeviceIoControl,&#10;  [in, optional]  PKEVENT          Event,&#10;  [out]           PIO_STATUS_BLOCK IoStatusBlock&#10;);">IoBuildDeviceIoControlRequest</a></strong> output parameters as follows:</p>

<ul>
<li><em>OutputBuffer</em> supplies a pointer to a variable-length <a href="acpi_enum_children_output_buffer" title="typedef struct _ACPI_ENUM_CHILDREN_OUTPUT_BUFFER {&#10;  ULONG           Signature;&#10;  ULONG           NumberOfChildren;&#10;  ACPI_ENUM_CHILD Children[ANYSIZE_ARRAY];&#10;} ACPI_ENUM_CHILDREN_OUTPUT_BUFFER;">ACPI_ENUM_CHILDREN_OUTPUT_BUFFER</a> structure in which the ACPI driver returns the path and name of the enumerated child devices.</li>
<li><em>IoStatusBlock</em> is set to an <a href="io_status_block" title="typedef struct _IO_STATUS_BLOCK&#10;{&#10;    union&#10;    {&#10;        NTSTATUS Status;&#10;        PVOID Pointer;&#10;    };&#10;    ULONG_PTR Information;&#10;} IO_STATUS_BLOCK, *PIO_STATUS_BLOCK;">IO_STATUS_BLOCK</a> structure.</li>
</ul>

<h3 id="output-buffer-length">Output buffer length</h3>

<p><em>OutputBufferLength</em> supplies the size, in bytes, of the output buffer that is supplied by <em>OutputBuffer</em>.</p>

<h3 id="inputoutput-buffer">Input/output buffer</h3>

<h3 id="inputoutput-buffer-length">Input/output buffer length</h3>

<h3 id="status-block">Status block</h3>

<p>If the request succeeds, <em>IoStatusBlock</em>-><strong>Status</strong> is set to <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a>; otherwise, the <strong>Status</strong> member is set to an error code. If the output buffer is not large enough to contain the buffer header, the <strong>Status</strong> member is set to STATUS_BUFFER_TOO_SMALL. If the output buffer is large enough to contain the output buffer header, but is not large enough to contain the paths and names of all the enumerated child objects, the <strong>Status</strong> member is set to STATUS_BUFFER_OVERFLOW and <em>OutputBuffer</em>-><strong>NumberOfChildren</strong> is set to the required length of the output buffer.</p>

<p>If the request succeeds, the <em>IoStatusBlock</em>-><strong>Information</strong> member is set to the number of bytes that is returned in the output buffer; otherwise, the <strong>Information</strong> member is set to zero.</p>

<h2 id="remarks">Remarks</h2>

<p>IOCTL_ACPI_ENUM_CHILDREN returns a variable-length <a href="acpi_enum_children_output_buffer" title="typedef struct _ACPI_ENUM_CHILDREN_OUTPUT_BUFFER {&#10;  ULONG           Signature;&#10;  ULONG           NumberOfChildren;&#10;  ACPI_ENUM_CHILD Children[ANYSIZE_ARRAY];&#10;} ACPI_ENUM_CHILDREN_OUTPUT_BUFFER;">ACPI_ENUM_CHILDREN_OUTPUT_BUFFER</a> structure that contains an array of variable-length <a href="acpi_enum_child" title="typedef struct _ACPI_ENUM_CHILD {&#10;  ULONG Flags;&#10;  ULONG NameLength;&#10;  CHAR  Name[ANYSIZE_ARRAY];&#10;} ACPI_ENUM_CHILD;">ACPI_ENUM_CHILD</a> structures, each of which returns the fully qualified path and name of an object in the ACPI namespace of the device to which the request was sent. The objects that this request enumerates depends on the setting of the <strong>Flags</strong> member of the supplied input structure <a href="acpi_enum_children_input_buffer" title="typedef struct _ACPI_ENUM_CHILDREN_INPUT_BUFFER {&#10;  ULONG Signature;&#10;  ULONG Flags;&#10;  ULONG NameLength;&#10;  CHAR  Name[ANYSIZE_ARRAY];&#10;} ACPI_ENUM_CHILDREN_INPUT_BUFFER, *PACPI_ENUM_CHILDREN_INPUT_BUFFER;">ACPI_ENUM_CHILDREN_INPUT_BUFFER</a>, as follows:</p>

<p>If the output buffer that the driver allocates is not large enough to return all requested child names, the ACPI driver does not return any child names and sets the <strong>Status</strong> member of the <a href="io_status_block" title="typedef struct _IO_STATUS_BLOCK&#10;{&#10;    union&#10;    {&#10;        NTSTATUS Status;&#10;        PVOID Pointer;&#10;    };&#10;    ULONG_PTR Information;&#10;} IO_STATUS_BLOCK, *PIO_STATUS_BLOCK;">IO_STATUS_BLOCK</a> for the request to STATUS_BUFFER_OVERFLOW. In this case, if the size, in bytes, of the output buffer is at least <strong>sizeof</strong>(ACPI_ENUM_CHILDREN_OUTPUT_BUFFER_SIGNATURE), the ACPI driver also sets <em>NumberOfChildren</em> to the size, in bytes, that is required to retrieve the requested paths and names.</p>

<p>A driver typically would use a sequence of two IOCTL_ACPI_ENUM_CHILDREN requests to enumerate the child objects of interest. The driver sends the first request to obtain the size of the output buffer that is required to contain the path and name of all the requested objects. The driver sends the second request to return the path and name of the objects in the output buffer.</p>

<p>For more information about how to enumerate child devices of a device, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/acpi/enumerating-child-devices-and-control-methods">Enumerating Child Devices and Control Methods</a>.</p>

<p>IOCTL_ACPI_ENUM_CHILDREN can be used only at IRQL&lt; DISPATCH_LEVEL.</p>

<h2 id="see-also">See also</h2>

<p><a href="acpi_enum_child" title="typedef struct _ACPI_ENUM_CHILD {&#10;  ULONG Flags;&#10;  ULONG NameLength;&#10;  CHAR  Name[ANYSIZE_ARRAY];&#10;} ACPI_ENUM_CHILD;">ACPI_ENUM_CHILD</a></p>

<p><a href="acpi_enum_children_input_buffer" title="typedef struct _ACPI_ENUM_CHILDREN_INPUT_BUFFER {&#10;  ULONG Signature;&#10;  ULONG Flags;&#10;  ULONG NameLength;&#10;  CHAR  Name[ANYSIZE_ARRAY];&#10;} ACPI_ENUM_CHILDREN_INPUT_BUFFER, *PACPI_ENUM_CHILDREN_INPUT_BUFFER;">ACPI_ENUM_CHILDREN_INPUT_BUFFER</a></p>

<p><a href="acpi_enum_children_output_buffer" title="typedef struct _ACPI_ENUM_CHILDREN_OUTPUT_BUFFER {&#10;  ULONG           Signature;&#10;  ULONG           NumberOfChildren;&#10;  ACPI_ENUM_CHILD Children[ANYSIZE_ARRAY];&#10;} ACPI_ENUM_CHILDREN_OUTPUT_BUFFER;">ACPI_ENUM_CHILDREN_OUTPUT_BUFFER</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/acpiioct/ni-acpiioct-ioctl_acpi_enum_children">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/acpiioct/ni-acpiioct-ioctl_acpi_enum_children.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
