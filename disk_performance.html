<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DISK_PERFORMANCE - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DISK_PERFORMANCE - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DISK_PERFORMANCE - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntdddisk.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _DISK_PERFORMANCE {
  LARGE_INTEGER BytesRead;
  LARGE_INTEGER BytesWritten;
  LARGE_INTEGER ReadTime;
  LARGE_INTEGER WriteTime;
  LARGE_INTEGER IdleTime;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         ReadCount;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         WriteCount;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         QueueDepth;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         SplitCount;
  LARGE_INTEGER QueryTime;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         StorageDeviceNumber;
  WCHAR         StorageManagerName[8];
} DISK_PERFORMANCE, *PDISK_PERFORMANCE;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntdddisk/ns-ntdddisk-_disk_performance">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// winioctl.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _DISK_PERFORMANCE {
  LARGE_INTEGER BytesRead;
  LARGE_INTEGER BytesWritten;
  LARGE_INTEGER ReadTime;
  LARGE_INTEGER WriteTime;
  LARGE_INTEGER IdleTime;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>         ReadCount;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>         WriteCount;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>         QueueDepth;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>         SplitCount;
  LARGE_INTEGER QueryTime;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>         StorageDeviceNumber;
  WCHAR         StorageManagerName[8];
} DISK_PERFORMANCE, *PDISK_PERFORMANCE;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ns-winioctl-disk_performance">View the official Win32 API reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/disk_performance.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntdddisk-_disk_performance)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="disk_performance-structure">DISK_PERFORMANCE structure</h1>

<h2 id="description">Description</h2>

<p>The DISK_PERFORMANCE structure is used in conjunction with the <strong><a href="ioctl_disk_performance" title="// CTL_CODE(0x0007, 0x008, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_DISK_PERFORMANCE 0x00070020">IOCTL_DISK_PERFORMANCE</a></strong> request to collect summary disk statistics for purposes of measuring disk performance.</p>

<h2 id="members">Members</h2>

<h3 id="bytesread"><code>BytesRead</code></h3>

<p>Contains a cumulative count of bytes read from the disk since the performance counters were enabled.</p>

<h3 id="byteswritten"><code>BytesWritten</code></h3>

<p>Contains a cumulative count of bytes written to the disk since the performance counters were enabled.</p>

<h3 id="readtime"><code>ReadTime</code></h3>

<p>Contains a cumulative time, expressed in increments of 100 nanoseconds, spent on disk reads since the performance counters were enabled.</p>

<h3 id="writetime"><code>WriteTime</code></h3>

<p>Contains a cumulative time, expressed in increments of 100 nanoseconds, spent on disk reads since the performance counters were enabled.</p>

<h3 id="idletime"><code>IdleTime</code></h3>

<p>Contains a cumulative time, expressed in increments of 100 nanoseconds, since the performance counters were enabled in which there was no disk activity.</p>

<h3 id="readcount"><code>ReadCount</code></h3>

<p>Contains the number of disk accesses for reads since the performance counters were enabled.</p>

<h3 id="writecount"><code>WriteCount</code></h3>

<p>Contains the number of disk accesses for writes since the performance counters were enabled.</p>

<h3 id="queuedepth"><code>QueueDepth</code></h3>

<p>Contains a snapshot of the number of queued disk I/O requests at the time that the query for performance statistics was performed.</p>

<h3 id="splitcount"><code>SplitCount</code></h3>

<p>Contains the number of disk accesses by means of an associated <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a> since the performance counters were enabled.</p>

<h3 id="querytime"><code>QueryTime</code></h3>

<p>Contains a timestamp indicating the system time at the moment that the query took place. System time is a count of 100-nanosecond intervals since January 1, 1601. System time is typically updated approximately every ten milliseconds. For more information about system time, see<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-kequerysystemtime"><strong>KeQuerySystemTime</strong></a>.</p>

<h3 id="storagedevicenumber"><code>StorageDeviceNumber</code></h3>

<p>Contains a unique number assigned to every disk or volume across a particular storage type. The storage types are <em>disk.sys</em>, <em>ftdisk.sys</em>, and <em>dmio.sys</em>.</p>

<h3 id="storagemanagername"><code>StorageManagerName</code></h3>

<p>Contains an 8-character string that indicates which device driver provided the performance statistics.</p>

<ul>
<li><p>In Windows 2000, this can be either "LogiDisk" for the driver <em>logidisk.sys</em> or "PhysDisk" for the driver <em>physdisk.sys</em>. These drivers collect performance statistics for devices and physical disks respectively.</p></li>
<li><p>In Windows XP and later operating systems, this can be any of the following three strings: "FTDISK" for the driver <em>ftdisk.sys</em>, "DMIO" for the driver <em>dmio.sys</em>, or "PARTMGR" for the driver <em>partmgr.sys</em>. These three drivers collect performance statistics for basic disk volumes, dynamic disk volumes, and physical disks respectively. Note that these strings are 8-character case-sensitive strings with blank fill. For example, in the case of the string "FTDISK", the <strong>StorageManagerName</strong> character array should contain two trailing blanks ("FTDISK  "), and in the case of the string "DMIO", the array should contain four trailing blanks ("DMIO    ").</p></li>
</ul>

<h2 id="remarks">Remarks</h2>

<p>Counting halts whenever the performance counters are disabled, but the counters are not reset, so the cumulative values assigned to the structure members might potentially reflect disk activity across several enablings and disablings of the counters.</p>

<h2 id="see-also">See also</h2>

<p><strong><a href="ioctl_disk_performance" title="// CTL_CODE(0x0007, 0x008, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_DISK_PERFORMANCE 0x00070020">IOCTL_DISK_PERFORMANCE</a></strong></p>

<p><strong><a href="ioctl_disk_performance_off" title="// CTL_CODE(0x0007, 0x018, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_DISK_PERFORMANCE_OFF 0x00070060">IOCTL_DISK_PERFORMANCE_OFF</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntdddisk/ns-ntdddisk-_disk_performance">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntdddisk/ns-ntdddisk-_disk_performance.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Win32 API reference (ns-winioctl-disk_performance)</h1>
</div>
<div class="ntdoc-description">
<h1>DISK_PERFORMANCE structure</h1>

<h2>Description</h2>

<p>Provides disk performance information. It is used by the
<a href="ioctl_disk_performance" title="// CTL_CODE(0x0007, 0x008, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_DISK_PERFORMANCE 0x00070020">IOCTL_DISK_PERFORMANCE</a> control code.</p>

<h2>Members</h2>

<h3><code>BytesRead</code></h3>

<p>The number of bytes read.</p>

<h3><code>BytesWritten</code></h3>

<p>The number of bytes written.</p>

<h3><code>ReadTime</code></h3>

<p>The time it takes to complete a read.</p>

<h3><code>WriteTime</code></h3>

<p>The time it takes to complete a write.</p>

<h3><code>IdleTime</code></h3>

<p>The idle time.</p>

<h3><code>ReadCount</code></h3>

<p>The number of read operations.</p>

<h3><code>WriteCount</code></h3>

<p>The number of write operations.</p>

<h3><code>QueueDepth</code></h3>

<p>The depth of the queue.</p>

<h3><code>SplitCount</code></h3>

<p>The cumulative count of I/Os that are associated I/Os.</p>

<p>An associated I/O is a fragmented I/O, where multiple I/Os to a disk are required to fulfill the original logical I/O request. The most common example of this scenario is a file that is fragmented on a disk. The multiple I/Os are counted as split I/O counts.</p>

<h3><code>QueryTime</code></h3>

<p>The system time stamp when a query for this structure is returned.</p>

<p>Use this member to synchronize between the file system driver and a caller.</p>

<h3><code>StorageDeviceNumber</code></h3>

<p>The unique number for a device that identifies it to the storage manager that is indicated in the <strong>StorageManagerName</strong> member.</p>

<h3><code>StorageManagerName</code></h3>

<p>The name of the storage manager that controls this device.</p>

<p>Examples of storage managers are "PhysDisk," "FTDISK," and "DMIO".</p>

<h2>See also</h2>

<p><a href="ioctl_disk_performance" title="// CTL_CODE(0x0007, 0x008, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_DISK_PERFORMANCE 0x00070020">IOCTL_DISK_PERFORMANCE</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ns-winioctl-disk_performance">View the official Win32 API reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/sdk-api/blob/docs/sdk-api-src/content/winioctl/ns-winioctl-disk_performance.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
