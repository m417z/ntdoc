<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="GNSS_EVENT - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>GNSS_EVENT - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            GNSS_EVENT - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// gnssdriver.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>           Size;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>           Version;
  <a href="gnss_event_type" title="typedef enum {&#10;  GNSS_Event_FixAvailable,&#10;  GNSS_Event_RequireAgnss,&#10;  GNSS_Event_Error,&#10;  GNSS_Event_NiRequest,&#10;  GNSS_Event_NmeaData,&#10;  GNSS_Event_GeofenceAlertData,&#10;  GNSS_Event_GeofencesTrackingStatus,&#10;  GNSS_Event_DriverRequest,&#10;  GNSS_Event_BreadcrumbAlertEvent,&#10;  GNSS_Event_FixAvailable_2,&#10;  GNSS_Event_Custom&#10;} GNSS_EVENT_TYPE;">GNSS_EVENT_TYPE</a> EventType;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>           EventDataSize;
  <a href="byte" title="typedef unsigned char BYTE;">BYTE</a>            Unused[512];
  union {
    <a href="gnss_fixdata" title="typedef struct {&#10;  ULONG                  Size;&#10;  ULONG                  Version;&#10;  ULONG                  FixSessionID;&#10;  FILETIME               FixTimeStamp;&#10;  BOOL                   IsFinalFix;&#10;  NTSTATUS               FixStatus;&#10;  ULONG                  FixLevelOfDetails;&#10;  GNSS_FIXDATA_BASIC     BasicData;&#10;  GNSS_FIXDATA_ACCURACY  AccuracyData;&#10;  GNSS_FIXDATA_SATELLITE SatelliteData;&#10;} GNSS_FIXDATA, *PGNSS_FIXDATA;">GNSS_FIXDATA</a>                       FixData;
    <a href="gnss_agnss_request_param" title="typedef struct {&#10;  ULONG                   Size;&#10;  ULONG                   Version;&#10;  GNSS_AGNSS_REQUEST_TYPE RequestType;&#10;  ULONG                   BlobFormat;&#10;} GNSS_AGNSS_REQUEST_PARAM, *PGNSS_AGNSS_REQUEST_PARAM;">GNSS_AGNSS_REQUEST_PARAM</a>           AgnssRequest;
    <a href="gnss_ni_request_param" title="typedef struct {&#10;  ULONG                     Size;&#10;  ULONG                     Version;&#10;  ULONG                     RequestId;&#10;  GNSS_NI_REQUEST_TYPE      RequestType;&#10;  GNSS_NI_NOTIFICATION_TYPE NotificationType;&#10;  GNSS_NI_PLANE_TYPE        RequestPlaneType;&#10;  union {&#10;    GNSS_SUPL_NI_INFO  SuplNiInfo;&#10;    GNSS_CP_NI_INFO    CpNiInfo;&#10;    GNSS_V2UPL_NI_INFO V2UplNiInfo;&#10;  };&#10;  ULONG                     ResponseTimeInSec;&#10;  BOOL                      EmergencyLocation;&#10;} GNSS_NI_REQUEST_PARAM, *PGNSS_NI_REQUEST_PARAM;">GNSS_NI_REQUEST_PARAM</a>              NiRequest;
    <a href="gnss_errorinfo" title="typedef struct {&#10;  ULONG Size;&#10;  ULONG Version;&#10;  ULONG ErrorCode;&#10;  BOOL  IsRecoverable;&#10;  WCHAR ErrorDescription[256];&#10;  BYTE  Unused[512];&#10;} GNSS_ERRORINFO, *PGNSS_ERRORINFO;">GNSS_ERRORINFO</a>                     ErrorInformation;
    <a href="gnss_nmea_data" title="typedef struct {&#10;  ULONG Size;&#10;  ULONG Version;&#10;  CHAR  NmeaSentences[256];&#10;} GNSS_NMEA_DATA, *PGNSS_NMEA_DATA;">GNSS_NMEA_DATA</a>                     NmeaData;
    <a href="gnss_geofence_alert_data" title="typedef struct {&#10;  ULONG                 Size;&#10;  ULONG                 Version;&#10;  ULONG                 GeofenceID;&#10;  GNSS_GEOFENCE_STATE   GeofenceState;&#10;  GNSS_FIXDATA_BASIC    FixBasicData;&#10;  GNSS_FIXDATA_ACCURACY FixAccuracyData;&#10;  BYTE                  Unused[512];&#10;} GNSS_GEOFENCE_ALERT_DATA, *PGNSS_GEOFENCE_ALERT_DATA;">GNSS_GEOFENCE_ALERT_DATA</a>           GeofenceAlertData;
    <a href="gnss_breadcrumbing_alert_data" title="typedef struct {&#10;  ULONG Size;&#10;  ULONG Version;&#10;  BYTE  Unused[512];&#10;} GNSS_BREADCRUMBING_ALERT_DATA, *PGNSS_BREADCRUMBING_ALERT_DATA;">GNSS_BREADCRUMBING_ALERT_DATA</a>      BreadcrumbAlertData;
    <a href="gnss_geofences_trackingstatus_data" title="typedef struct {&#10;  ULONG    Size;&#10;  ULONG    Version;&#10;  NTSTATUS Status;&#10;  FILETIME StatusTimeStamp;&#10;  BYTE     Unused[512];&#10;} GNSS_GEOFENCES_TRACKINGSTATUS_DATA, *PGNSS_GEOFENCES_TRACKINGSTATUS_DATA;">GNSS_GEOFENCES_TRACKINGSTATUS_DATA</a> GeofencesTrackingStatus;
    <a href="gnss_driver_request_data" title="typedef struct {&#10;  ULONG               Size;&#10;  ULONG               Version;&#10;  GNSS_DRIVER_REQUEST Request;&#10;  ULONG               RequestFlag;&#10;} GNSS_DRIVER_REQUEST_DATA;">GNSS_DRIVER_REQUEST_DATA</a>           DriverRequestData;
    <a href="byte" title="typedef unsigned char BYTE;">BYTE</a>                               CustomData[ANYSIZE_ARRAY];
  };
} GNSS_EVENT, *PGNSS_EVENT;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/gnssdriver/ns-gnssdriver-gnss_event">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/gnss_event.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-gnssdriver-gnss_event)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>GNSS_EVENT</strong> structure defines the information required for a GNSS event.</p>

<h2 id="members">Members</h2>

<h3 id="size"><code>Size</code></h3>

<p>Structure size.</p>

<h3 id="version"><code>Version</code></h3>

<p>Version number.</p>

<h3 id="eventtype"><code>EventType</code></h3>

<p>Event type.</p>

<p>Depending on the event type, a specific data element of the union will be filled.</p>

<h3 id="eventdatasize"><code>EventDataSize</code></h3>

<p>The size of the event data union contained in this event.</p>

<p>The GNSS driver must fill in appropriate size to avoid excessive data-copy between the layers. The GNSS adapter will access only the initial bytes of the event data, as specified by this element.</p>

<h3 id="unused"><code>Unused</code></h3>

<p>Padding buffer reserved fore future use.</p>

<h3 id="fixdata"><code>FixData</code></h3>

<p>This structure is filled if EventType is GNSS_Fix_Available.</p>

<h3 id="agnssrequest"><code>AgnssRequest</code></h3>

<p>This structure is filled if EventType is GNSS_Require_Agnss.</p>

<h3 id="nirequest"><code>NiRequest</code></h3>

<p>This structure is filled if EventType is GNSS_Event_Ni.</p>

<h3 id="errorinformation"><code>ErrorInformation</code></h3>

<p>This structure is filled if EventType is GNSS_Error.</p>

<h3 id="nmeadata"><code>NmeaData</code></h3>

<p>This structure is filled if EventType is GNSS_Event_NmeaData.</p>

<h3 id="geofencealertdata"><code>GeofenceAlertData</code></h3>

<p>This structure is filled if EventType is GNSS_Event_GeofenceAlertData.</p>

<h3 id="breadcrumbalertdata"><code>BreadcrumbAlertData</code></h3>

<p>This structure contains alert information for when the breadcrumb buffer has reached a level where OS read operations should be performed.</p>

<h3 id="geofencestrackingstatus"><code>GeofencesTrackingStatus</code></h3>

<p>This structure is filled if EventType is GNSS_Event_GeofencesTrackingStatus.</p>

<h3 id="driverrequestdata"><code>DriverRequestData</code></h3>

<p>This structure is filled if EventType is GNSS_Event_DriverRequest.</p>

<h3 id="customdata"><code>CustomData</code></h3>

<p>Custom data field.</p>

<h2 id="remarks">Remarks</h2>

<p>The GNSS driver sends solicited and unsolicited notifications to the GNSS adapter. This is done through a common event protocol between the driver and the GNSS adapter. The adapter registers for one or more types of events and this ensures that one or more I/O requests are always pending for the driver to send the notification up to the adapter. The driver completes the I/O request on the pending <a href="irp" title="typedef struct _IRP {&#10;  CSHORT                    Type;&#10;  USHORT                    Size;&#10;  PMDL                      MdlAddress;&#10;  ULONG                     Flags;&#10;  union {&#10;    struct _IRP     *MasterIrp;&#10;    __volatile LONG IrpCount;&#10;    PVOID           SystemBuffer;&#10;  } AssociatedIrp;&#10;  LIST_ENTRY                ThreadListEntry;&#10;  IO_STATUS_BLOCK           IoStatus;&#10;  KPROCESSOR_MODE           RequestorMode;&#10;  BOOLEAN                   PendingReturned;&#10;  CHAR                      StackCount;&#10;  CHAR                      CurrentLocation;&#10;  BOOLEAN                   Cancel;&#10;  KIRQL                     CancelIrql;&#10;  CCHAR                     ApcEnvironment;&#10;  UCHAR                     AllocationFlags;&#10;...">IRP</a> and this causes the notification to flow up to the adapter. The adapter creates one or more I/O requests to listen for further notifications.</p>

<p>It is recommended (but not required) that the driver uses separate queues for managing different types of event. Separation of queues allows the driver to process certain types of events in parallel.</p>

<p>The notification model allows for adding custom or vendor-specific events in the future that can optionally be processed by a custom GNSS helper component. The GNSS adapter can act as a broker between the driver and the helper component and ensures that the commands and data are marshaled between these two components back and forth.</p>

<p>Each event type has associate event-specific data that the GNSS adapter uses to determine how to process the specific event. For example, for assistance requirements (AGNSS), the adapter injects the needed assistance data. For data-retrieval type event, the adapter processes and sends the data to an upper layer. Subsequently the adapter re-registers for same event with the driver through well-defined IOCTLs. All events follow the same overall data-structure.</p>

<p>Events can be of various types. Certain events occur as a result of a previous request initiated by the driver (for example, a start fix request). Certain events are raised for informational purpose. Assistance events are raised when the driver requires the adapter to inject specific assistance data.</p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/gnssdriver/ns-gnssdriver-gnss_event">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/gnssdriver/ns-gnssdriver-gnss_event.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
