<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="RtlGenerate8dot3Name - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>RtlGenerate8dot3Name - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github.ntdoc.min.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github-dark-dimmed.ntdoc.min.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            RtlGenerate8dot3Name - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header language-cpp">#ifndef _NTRTL_H

</span><span class="ntdoc-code-intro language-cpp">// private
</span><span class="ntdoc-code-body language-cpp">NTSYSAPI
<a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a>
NTAPI
RtlGenerate8dot3Name(
    _In_ <a href="pcunicode_string" title="typedef const UNICODE_STRING *PCUNICODE_STRING;">PCUNICODE_STRING</a> Name,
    _In_ BOOLEAN AllowExtendedCharacters,
    _Inout_ <a href="generate_name_context" title="typedef struct _GENERATE_NAME_CONTEXT&#10;{&#10;    USHORT Checksum;&#10;    BOOLEAN CheckSumInserted;&#10;    UCHAR NameLength;&#10;    WCHAR NameBuffer[8];&#10;    ULONG ExtensionLength;&#10;    WCHAR ExtensionBuffer[4];&#10;    ULONG LastIndexValue;&#10;} GENERATE_NAME_CONTEXT, *PGENERATE_NAME_CONTEXT;">PGENERATE_NAME_CONTEXT</a> Context,
    _Inout_ <a href="unicode_string" title="typedef struct _UNICODE_STRING&#10;{&#10;    USHORT Length;&#10;    USHORT MaximumLength;&#10;    _Field_size_bytes_part_opt_(MaximumLength, Length) PWCH Buffer;&#10;} UNICODE_STRING, *PUNICODE_STRING;">PUNICODE_STRING</a> Name8dot3
    );
</span><span class="ntdoc-code-footer language-cpp">
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/4107641bf01503448f3b3d693ba50d9b17666942/phnt/include/ntrtl.h#L5636">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header language-cpp">// ntifs.h

</span><span class="ntdoc-code-intro language-cpp"></span><span class="ntdoc-code-body language-cpp">NTSYSAPI <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> RtlGenerate8dot3Name(
  [in]      <a href="pcunicode_string" title="typedef const UNICODE_STRING *PCUNICODE_STRING;">PCUNICODE_STRING</a>       Name,
  [in]      BOOLEAN                AllowExtendedCharacters,
  [in, out] <a href="generate_name_context" title="typedef struct _GENERATE_NAME_CONTEXT&#10;{&#10;    USHORT Checksum;&#10;    BOOLEAN CheckSumInserted;&#10;    UCHAR NameLength;&#10;    WCHAR NameBuffer[8];&#10;    ULONG ExtensionLength;&#10;    WCHAR ExtensionBuffer[4];&#10;    ULONG LastIndexValue;&#10;} GENERATE_NAME_CONTEXT, *PGENERATE_NAME_CONTEXT;">PGENERATE_NAME_CONTEXT</a> Context,
  [in, out] <a href="unicode_string" title="typedef struct _UNICODE_STRING&#10;{&#10;    USHORT Length;&#10;    USHORT MaximumLength;&#10;    _Field_size_bytes_part_opt_(MaximumLength, Length) PWCH Buffer;&#10;} UNICODE_STRING, *PUNICODE_STRING;">PUNICODE_STRING</a>        Name8dot3
);</span><span class="ntdoc-code-footer language-cpp"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/nf-ntifs-rtlgenerate8dot3name">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<p>This function is <a rel="noopener" target="_blank" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/ntifs/nf-ntifs-rtlgenerate8dot3name">documented in Windows Driver Kit</a>.</p>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/rtlgenerate8dot3name.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ntifs-rtlgenerate8dot3name)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>RtlGenerate8dot3Name function</h1>
<h2>Description</h2>
<p>The <strong>RtlGenerate8dot3Name</strong> routine generates a short (8.3) name for the specified long file name.</p>
<h2>Parameters</h2>
<h3><code>Name</code> [in]</h3>
<p>Pointer to a Unicode string containing the long name for the file. Any leading periods in this file name are skipped during generation of a corresponding short name.</p>
<h3><code>AllowExtendedCharacters</code> [in]</h3>
<p>Set to TRUE if the generated short file name can contain extended characters. Set to FALSE if the generated short file name must contain only characters within the current code page's ANSI or OEM range from 0x20 (space) through 0x7f (DEL).</p>
<h3><code>Context</code> [in, out]</h3>
<p>Pointer to a caller-allocated buffer for use by <strong>RtlGenerate8dot3Name</strong>. Before calling <strong>RtlGenerate8dot3Name</strong> for the first time to translate the given long file name, the caller is responsible for filling the buffer with zeros.</p>
<h3><code>Name8dot3</code> [in, out]</h3>
<p>Pointer to a caller-allocated buffer to receive the generated short file name. The size of this buffer must be at least 24 bytes (12 Unicode characters).</p>
<h2>Return value</h2>
<p>This routine returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if a short name is successfully generated. It returns STATUS_FILE_SYSTEM_LIMITATION if the system can't generate a unique short name for a given file. It returns this error after 1 million retry attempts for a single given long name.</p>
<h2>Remarks</h2>
<p><strong>RtlGenerate8dot3Name</strong> returns a generated short name with at most eight characters, followed immediately by a period and up to three more characters.</p>
<p><strong>RtlGenerate8dot3Name</strong> can be called repeatedly. For example, if the initially generated short name is a duplicate of an existing file name, the caller can pass the same parameters to <strong>RtlGenerate8dot3Name</strong> again. In this case, the buffer at <strong>Context</strong> should not be reinitialized with zeros. This buffer should be zeroed only for the initial call to translate a given long name. On repeated calls for the same long name, <strong>RtlGenerate8dot3Name</strong> stores private context information in this buffer to prevent name collisions.</p>
<p>Two calls to <strong>RtlGenerate8dot3Name</strong> with the same <strong>Name</strong> and <strong>Context</strong> are not guaranteed to return the same result. Callers should assume that the mapping of long name to short name is nondeterministic.</p>
<p><strong>RtlGenerate8dot3Name</strong> translates the given long name using the current system code page, discarding any invalid or superfluous characters in the input long name. When <strong>AllowExtendedCharacters</strong> is set to TRUE, ANSI or double-byte character set (DBCS) characters that map to uppercase OEM characters can become part of a returned short name.</p>
<p><strong>RtlGenerate8dot3Name</strong> returns a short file name with uppercase alphabetic characters. It returns underscores in the generated short name for any of the following characters that it encounters in the given long name:</p>
<ul>
<li>Colons and semicolons</li>
<li>Commas</li>
<li>Plus and equal signs</li>
<li>Square brackets</li>
</ul>
<p>For information about other string-handling routines, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/_kernel/#run-time-library-rtl-routines">Run-Time Library (RTL) Routines</a>.</p>
<h2>See also</h2>
<p><strong><a href="rtlisnamelegaldos8dot3" title="NTSYSAPI BOOLEAN RtlIsNameLegalDOS8Dot3(&#10;  [in]            PCUNICODE_STRING Name,&#10;  [in, out]       POEM_STRING      OemName,&#10;  [out, optional] PBOOLEAN         NameContainsSpaces&#10;);">RtlIsNameLegalDOS8Dot3</a></strong></p>
<p><strong><a href="rtlisvalidoemcharacter" title="NTSYSAPI BOOLEAN RtlIsValidOemCharacter(&#10;  [in, out] PWCHAR Char&#10;);">RtlIsValidOemCharacter</a></strong></p>
<p><strong><a href="unicode_string" title="typedef struct _UNICODE_STRING&#10;{&#10;    USHORT Length;&#10;    USHORT MaximumLength;&#10;    _Field_size_bytes_part_opt_(MaximumLength, Length) PWCH Buffer;&#10;} UNICODE_STRING, *PUNICODE_STRING;">UNICODE_STRING</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/nf-ntifs-rtlgenerate8dot3name">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntifs/nf-ntifs-rtlgenerate8dot3name.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script src="modules/highlight.js/highlight.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
