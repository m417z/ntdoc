<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DXGK_DEBUG_REPORT_INTERFACE - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DXGK_DEBUG_REPORT_INTERFACE - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DXGK_DEBUG_REPORT_INTERFACE - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// dispmprt.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _DXGK_DEBUG_REPORT_INTERFACE {
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>                    Size;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>                    Version;
  PVOID                     Context;
  <a href="pinterface_reference" title="PINTERFACE_REFERENCE PinterfaceReference;&#10;&#10;VOID PinterfaceReference(&#10;  [in] PVOID Context&#10;)&#10;{...}">PINTERFACE_REFERENCE</a>      InterfaceReference;
  <a href="pinterface_dereference" title="PINTERFACE_DEREFERENCE PinterfaceDereference;&#10;&#10;VOID PinterfaceDereference(&#10;  [in] PVOID Context&#10;)&#10;{...}">PINTERFACE_DEREFERENCE</a>    InterfaceDereference;
  DXGK_DEBUG_REPORT_HANDLE( )(HANDLE DeviceHandle,<a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> ulCode,<a href="ulong_ptr" title="typedef [public] unsigned __int3264 ULONG_PTR;">ULONG_PTR</a> ulpArg1,<a href="ulong_ptr" title="typedef [public] unsigned __int3264 ULONG_PTR;">ULONG_PTR</a> ulpArg2,<a href="ulong_ptr" title="typedef [public] unsigned __int3264 ULONG_PTR;">ULONG_PTR</a> ulpArg3,<a href="ulong_ptr" title="typedef [public] unsigned __int3264 ULONG_PTR;">ULONG_PTR</a> ulpArg4) *DbgReportCreate;
  BOOLEAN( )(DXGK_DEBUG_REPORT_HANDLE hReport,PVOID pvData,<a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> ulDataSize)                  *DbgReportSecondaryData;
  VOID( )(DXGK_DEBUG_REPORT_HANDLE hReport)                     *DbgReportComplete;
} DXGK_DEBUG_REPORT_INTERFACE, *PDXGK_DEBUG_REPORT_INTERFACE;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/ns-dispmprt-_dxgk_debug_report_interface">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/dxgk_debug_report_interface.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-dispmprt-_dxgk_debug_report_interface)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>DXGK_DEBUG_REPORT_INTERFACE structure</h1>

<h2>Description</h2>

<p>The <strong>DXGK_DEBUG_REPORT_INTERFACE</strong> structure contains pointers to functions in the Debug Report interface, which is implemented by the display port driver.</p>

<h2>Members</h2>

<h3><code>Size</code></h3>

<p>The size, in bytes, of this structure.</p>

<h3><code>Version</code></h3>

<p>The version number of the Debug Report interface. Version number constants are defined in <em>Dispmprt.h</em> (for example, DXGK_DEBUG_REPORT_INTERFACE_VERSION_1).</p>

<h3><code>Context</code></h3>

<p>A pointer to a context that is provided by the display port driver.</p>

<h3><code>InterfaceReference</code></h3>

<p>A pointer to an interface reference function that is implemented by the display port driver.</p>

<h3><code>InterfaceDereference</code></h3>

<p>A pointer to an interface dereference function that is implemented by the display port driver.</p>

<h3><code>DbgReportCreate</code></h3>

<p>Creates an initial error report.</p>

<p>If your display miniport driver detects a failure and then recovers from it, you can create an error report that can later be used for debugging. First, call <strong>DbgReportCreate</strong> to create an initial report. Then add data to the report by making one or more calls to <strong>DbgReportSecondaryData</strong>. When you have finished adding data to the report, call <strong>DbgReportComplete</strong>.</p>

<p>The syntax for <strong>DbgReportComplete</strong> follows.</p>

<div class="codehilite">
<pre><span></span><code><span class="c1">// IRQL: PASSIVE_LEVEL</span>
<span class="n">DXGK_DEBUG_REPORT_HANDLE</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">DbgReportCreate</span><span class="p">)(</span>
<span class="w">  </span><span class="n">_In_</span><span class="w"> </span><span class="n">HANDLE</span><span class="w">    </span><span class="n">DeviceHandle</span><span class="p">,</span>
<span class="w">  </span><span class="n">_In_</span><span class="w"> </span><span class="n"><a href="ulong" title="typedef unsigned long ULONG;">ULONG</a></span><span class="w">     </span><span class="n">ulCode</span><span class="p">,</span>
<span class="w">  </span><span class="n">_In_</span><span class="w"> </span><span class="n"><a href="ulong_ptr" title="typedef [public] unsigned __int3264 ULONG_PTR;">ULONG_PTR</a></span><span class="w"> </span><span class="n">ulpArg1</span><span class="p">,</span>
<span class="w">  </span><span class="n">_In_</span><span class="w"> </span><span class="n"><a href="ulong_ptr" title="typedef [public] unsigned __int3264 ULONG_PTR;">ULONG_PTR</a></span><span class="w"> </span><span class="n">ulpArg2</span><span class="p">,</span>
<span class="w">  </span><span class="n">_In_</span><span class="w"> </span><span class="n"><a href="ulong_ptr" title="typedef [public] unsigned __int3264 ULONG_PTR;">ULONG_PTR</a></span><span class="w"> </span><span class="n">ulpArg3</span><span class="p">,</span>
<span class="w">  </span><span class="n">_In_</span><span class="w"> </span><span class="n"><a href="ulong_ptr" title="typedef [public] unsigned __int3264 ULONG_PTR;">ULONG_PTR</a></span><span class="w"> </span><span class="n">ulpArg4</span>
<span class="p">);</span>
</code></pre>
</div>

<ul>
<li><p><em>DeviceHandle</em> is a handle to a context block associated with a display adapter. The display miniport driver created this handle in its <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_add_device"><strong>DxgkDdiAddDevice</strong>*</a> function. This parameter can be NULL.</p></li>
<li><p><em>ulCode</em> is a code for the error report. The following codes are supported:</p>

<ul>
<li>THREAD_STUCK_IN_DEVICE_DRIVER</li>
<li>VIDEO_DRIVER_DEBUG_REPORT_REQUEST</li>
<li>VIDEO_TDR_FATAL_ERROR</li>
<li>VIDEO_TDR_SUCCESS</li>
</ul></li>
<li><p><em>ulpArg1</em> is the first argument to be added to the report. The developer of the display miniport driver determines the value and meaning of <em>ulpArg1</em>.</p></li>
<li><p><em>ulpArg2</em> is the second argument to be added to the report. The developer of the display miniport driver determines the value and meaning of <em>ulpArg2</em>.</p></li>
<li><p><em>ulpArg3</em> is the third argument to be added to the report. The developer of the display miniport driver determines the value and meaning of <em>ulpArg3</em>.</p></li>
<li><p><em>ulpArg4</em> is reserved.</p></li>
</ul>

<h3><code>DbgReportSecondaryData</code></h3>

<p>Appends data to an initial error report that was previously created by <strong>DbgReportCreate</strong>.</p>

<p>Call <strong>DbgReportSecondaryData</strong> to add data to an initial report that was created by a previous call to <strong>DbgReportCreate</strong>. You can call <strong>DbgReportSecondaryData</strong> several times, but with each call, the data written to the report overwrites the data written by the previous call. The following steps give a good strategy for incrementally adding data to the report.</p>

<ol>
<li>Obtain the data that is safest to collect.</li>
<li>Call <strong>DbgReportSecondaryData</strong> to write that data to the report.</li>
<li>Obtain data that is more risky to collect.</li>
<li>Call <strong>DbgReportSecondaryData</strong> to write the original safe data along with the newly collected risky data to the report. You must include both the safe and the risky data in this call because the data written by this call overwrites the data written by the first call to <strong>DbgReportSecondaryData</strong>.</li>
<li>Continue calling <strong>DbgReportSecondaryData</strong>, enhancing the data each time, until you have no more data to add.</li>
<li>When you have finished adding data to the report, close the report by calling <strong>DbgReportComplete</strong>. The report is stored in a file and sent to Microsoft when the computer is rebooted.</li>
<li>If the computer stops responding before you call <strong>DbgReportComplete</strong>, the data added to the report by the most recent successful call to <strong>DbgReportSecondaryData</strong> is saved and then sent to Microsoft when the computer is rebooted.</li>
</ol>

<div class="codehilite">
<pre><span></span><code><span class="n">BOOLEAN</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">DbgReportSecondaryData</span><span class="p">)(</span>
<span class="w">  </span><span class="n">_Inout_</span><span class="w"> </span><span class="n">DXGK_DEBUG_REPORT_HANDLE</span><span class="w"> </span><span class="n">hReport</span><span class="p">,</span>
<span class="w">  </span><span class="n">_In_</span><span class="w">    </span><span class="n">PVOID</span><span class="w">                    </span><span class="n">pvData</span><span class="p">,</span>
<span class="w">  </span><span class="n">_In_</span><span class="w">    </span><span class="n"><a href="ulong" title="typedef unsigned long ULONG;">ULONG</a></span><span class="w">                    </span><span class="n">ulDataSize</span>
<span class="p">);</span>
</code></pre>
</div>

<ul>
<li><p><em>hReport</em> is a handle to the error report to which data will be appended. The display miniport driver previously obtained this handle by calling <strong>DbgReportCreate</strong>.</p></li>
<li><p><em>pvData</em> is a pointer to a buffer that holds the data to be added to the report.</p></li>
<li><p><em>ulDataSize</em> is the size, in bytes, of the data to be added to the report. The value of this parameter must be less than or equal to DXGK_DEBUG_REPORT_MAX_SIZE.</p></li>
</ul>

<h3><code>DbgReportComplete</code></h3>

<p>Closes an error report and frees any resources associated with the report.</p>

<p><strong>DbgReportCreate</strong> creates an entry in the system event log and displays a dialog box that informs the user of the failure and presents the opportunity to upload an error report to Microsoft.</p>

<p>The error report is saved in a file and scheduled to be sent to Microsoft when the computer is rebooted. The error report contains an error code and four arguments. The error code and the first three arguments are provided by the caller of DbgReportCreate. The fourth argument in the report is provided by the operating system and indicates the number of reports generated since the computer was started. For example, if the value of the fourth argument is 5, this means that four previous error reports were generated by the display miniport driver since the computer was last started. Only the fifth report is saved because each report overwrites the previous one.</p>

<div class="codehilite">
<pre><span></span><code><span class="c1">// IRQL: PASSIVE_LEVEL</span>
<span class="n">VOID</span><span class="w"> </span><span class="nf">DbgReportComplete</span><span class="p">(</span>
<span class="w">   </span><span class="n">IN</span><span class="w"> </span><span class="n">OUT</span><span class="w"> </span><span class="n">DXGK_DEBUG_REPORT_HANDLE</span><span class="w"> </span><span class="n">hReport</span>
<span class="p">);</span>
</code></pre>
</div>

<ul>
<li><em>hReport</em> is a handle to the error report that is to be closed. The display miniport driver previously obtained this handle by calling <strong>DbgReportCreate</strong>.</li>
</ul>

<p><strong>IRQL:</strong> PASSIVE_LEVEL</p>

<h2>Remarks</h2>

<p>The display miniport driver supplies the <strong>Size</strong> and <strong>Version</strong> members of this structure, and then calls <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkcb_query_services"><strong>DxgkCbQueryServices</strong>*</a>, which fills in the remaining members of this structure.</p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/ns-dispmprt-_dxgk_debug_report_interface">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/dispmprt/ns-dispmprt-_dxgk_debug_report_interface.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
