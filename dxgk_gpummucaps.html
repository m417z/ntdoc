<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DXGK_GPUMMUCAPS - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DXGK_GPUMMUCAPS - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DXGK_GPUMMUCAPS - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3dkmddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _DXGK_GPUMMUCAPS {
  union {
    struct {
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> ReadOnlyMemorySupported : 1;
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> NoExecuteMemorySupported : 1;
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> ZeroInPteSupported : 1;
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> ExplicitPageTableInvalidation : 1;
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> CacheCoherentMemorySupported : 1;
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> PageTableUpdateRequireAddressSpaceIdle : 1;
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> LargePageSupported : 1;
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> DualPteSupported : 1;
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> AllowNonAlignedLargePageAddress : 1;
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> SysMem64KBPageSupported : 1;
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> InvalidTlbEntriesNotCached : 1;
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> SysMemLargePageSupported : 1;
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> CachedPageTables : 1;
#if ...
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> Reserved : 19;
#elif
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> Reserved : 20;
#elif
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> Reserved : 21;
#elif
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> Reserved : 22;
#else
      <a href="uint" title="typedef unsigned int UINT;">UINT</a> Reserved : 24;
#endif
    };
    <a href="uint" title="typedef unsigned int UINT;">UINT</a> Value;
  };
  <a href="dxgk_pagetableupdatemode" title="typedef enum _DXGK_PAGETABLEUPDATEMODE {&#10;  DXGK_PAGETABLEUPDATE_CPU_VIRTUAL,&#10;  DXGK_PAGETABLEUPDATE_GPU_VIRTUAL,&#10;  DXGK_PAGETABLEUPDATE_GPU_PHYSICAL&#10;} DXGK_PAGETABLEUPDATEMODE;">DXGK_PAGETABLEUPDATEMODE</a> PageTableUpdateMode;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>                     VirtualAddressBitCount;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>                     LeafPageTableSizeFor64KPagesInBytes;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>                     PageTableLevelCount;
  struct {
    <a href="uint" title="typedef unsigned int UINT;">UINT</a> SourcePageTableVaInTransfer : 1;
    <a href="uint" title="typedef unsigned int UINT;">UINT</a> Reserved : 31;
  } LegacyBehaviors;
} DXGK_GPUMMUCAPS;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/ns-d3dkmddi-_dxgk_gpummucaps">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/dxgk_gpummucaps.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-d3dkmddi-_dxgk_gpummucaps)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>DXGK_GPUMMUCAPS structure</h1>
<h2>Description</h2>
<p>The <strong>DXGK_GPUMMUCAPS</strong> structure is used by the kernel-mode driver to express virtual memory addressing capabilities.</p>
<h2>Members</h2>
<h3><code>ReadOnlyMemorySupported</code></h3>
<p>When set to 1, the driver supports read-only protection on memory pages.</p>
<h3><code>NoExecuteMemorySupported</code></h3>
<p>When set to 1, the driver supports <em>no execute</em> protection on memory pages.</p>
<h3><code>ZeroInPteSupported</code></h3>
<p>When set to 1, the GPU supports the <em>Zero <a href="dxgk_pte" title="typedef struct _DXGK_PTE {&#10;  union {&#10;    struct {&#10;      ULONGLONG Valid : 1;&#10;      ULONGLONG Zero : 1;&#10;      ULONGLONG CacheCoherent : 1;&#10;      ULONGLONG ReadOnly : 1;&#10;      ULONGLONG NoExecute : 1;&#10;      ULONGLONG Segment : 5;&#10;      ULONGLONG LargePage : 1;&#10;      ULONGLONG PhysicalAdapterIndex : 6;&#10;      ULONGLONG PageTablePageSize : 2;&#10;      ULONGLONG SystemReserved0 : 1;&#10;      ULONGLONG Reserved : 44;&#10;    };&#10;    ULONGLONG Flags;&#10;  };&#10;  union {&#10;    ULONGLONG PageAddress;&#10;    ULONGLONG PageTableAddress;&#10;...">DXGK_PTE</a></em> flag. This applies to all page table levels.</p>
<h3><code>ExplicitPageTableInvalidation</code></h3>
<p>Indicates that all entries of a page table or page directory should be put into an invalid state explicitly, through <strong>UpdatePageTable</strong> before being freed. By default the video memory manager may free a page table, which contain previously valid entries, if these entries are no longer needed (ex. freeing a large GPU virtual address range resulting in the destruction of underlying page tables).</p>
<blockquote>
<p>[!NOTE]
This flags is typically used by a software driver that needs to emulate page table and need to keep track of information on a per page table entry basis and require a clear init/deinit pair for all page table entry updates.</p>
</blockquote>
<h3><code>CacheCoherentMemorySupported</code></h3>
<p>Indicates that the driver supports the <em>CacheCoherent</em> bits in the page table entry and can do I/O coherent transfer to system memory.</p>
<h3><code>PageTableUpdateRequireAddressSpaceIdle</code></h3>
<p>Indicates that the GPU doesn’t support updating page table entries or invalidating translation look-aside buffer for an address space that is currently in used by an engine. When this flags is set, video memory manager will ensure that all context sharing the address space are suspended when its page table entries are modified and when translation look-aside buffer is invalidated.</p>
<h3><code>LargePageSupported</code></h3>
<p>When set to 1, all levels of page tables, except the leaf one, support large pages (<strong>LargePage</strong> bit in <strong><a href="dxgk_pte" title="typedef struct _DXGK_PTE {&#10;  union {&#10;    struct {&#10;      ULONGLONG Valid : 1;&#10;      ULONGLONG Zero : 1;&#10;      ULONGLONG CacheCoherent : 1;&#10;      ULONGLONG ReadOnly : 1;&#10;      ULONGLONG NoExecute : 1;&#10;      ULONGLONG Segment : 5;&#10;      ULONGLONG LargePage : 1;&#10;      ULONGLONG PhysicalAdapterIndex : 6;&#10;      ULONGLONG PageTablePageSize : 2;&#10;      ULONGLONG SystemReserved0 : 1;&#10;      ULONGLONG Reserved : 44;&#10;    };&#10;    ULONGLONG Flags;&#10;  };&#10;  union {&#10;    ULONGLONG PageAddress;&#10;    ULONGLONG PageTableAddress;&#10;...">DXGK_PTE</a></strong>).</p>
<h3><code>DualPteSupported</code></h3>
<p>When set to 1, the GPU supports two pointers to page tables in the level one page table (4 KB page table and 64 KB page table).</p>
<h3><code>AllowNonAlignedLargePageAddress</code></h3>
<p>When set to 1, the Operating System is able to set the <strong>LargePage</strong> flag when the physical address of the large page entry is not aligned to the leaf page table coverage. Available starting in Windows 10 version 1607 (WDDM 2.1).</p>
<h3><code>SysMem64KBPageSupported</code></h3>
<p>The driver provides memory segment management at 64KB. Available starting in Windows 10 version 1607 (WDDM 2.1).</p>
<h3><code>InvalidTlbEntriesNotCached</code></h3>
<p>When this bit is set, the driver will not receive calls to <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkddi_buildpagingbuffer"><strong>DxgkDdiBuildPagingBuffer</strong></a> for FlushTlb requests for VA ranges that are transitioning from an invalid to valid state. It is expected that the hardware’s TLB does not cache invalid translations</p>
<p>Available starting in Windows 10 version 1903 (WDDM 2.6).</p>
<h3><code>SysMemLargePageSupported</code></h3>
<p>The driver provides large-page support. Available starting in Windows Server 2022 (WDDM 2.9).</p>
<h3><code>CachedPageTables</code></h3>
<p>Cached page tables are supported. Available starting in WDDM 3.1.</p>
<h3><code>Reserved</code></h3>
<p>Reserved for system use; don't use.</p>
<h3><code>Value</code></h3>
<p>The value of the union's structure expressed as an integer.</p>
<h3><code>PageTableUpdateMode</code></h3>
<p>Defines the type of addresses that are used in <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/dxgkddiupdatepagetable"><strong>DxgkDdiUpdatePageTable</strong></a> operations. When <strong>DXGK_PAGETABLEUPDATE_GPU_VIRTUAL</strong> is set, all paging operation will occur in the virtual address space of the system context. When page directories are located in a local GPU memory segment, the update mode cannot be set to <strong>DXGK_PAGETABLEUPDATE_CPU_VIRTUAL</strong>.</p>
<h3><code>VirtualAddressBitCount</code></h3>
<p>The number of bits in the GPU virtual address.</p>
<h3><code>LeafPageTableSizeFor64KPagesInBytes</code></h3>
<p>The size of a leaf page table when 64KB pages are used. The size must be a multiple of CPU page size (4096).</p>
<h3><code>PageTableLevelCount</code></h3>
<p>The number of page table levels supported. The minimum value is 2 (defined as <strong>DXGK_MIN_PAGE_TABLE_LEVEL_COUNT</strong>). The maximum value is <strong>DXGK_MAX_PAGE_TABLE_LEVEL_COUNT</strong>.</p>
<p>When <strong>PageTableLevelCount</strong> is 2, the root page table is dynamically resizable and the size of the page table is determined through <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkddi_getrootpagetablesize"><strong>DxgkDdiGetRootPageTableSize</strong></a>. When <strong>PageTableLevelCount</strong> is greater than 2, all page table levels have a fixed size, which is described through <strong><a href="dxgk_page_table_level_desc" title="typedef struct _DXGK_PAGE_TABLE_LEVEL_DESC {&#10;  UINT PageTableIndexBitCount;&#10;  UINT PageTableSegmentId;&#10;  UINT PagingProcessPageTableSegmentId;&#10;  UINT PageTableSizeInBytes;&#10;  UINT PageTableAlignmentInBytes;&#10;} DXGK_PAGE_TABLE_LEVEL_DESC;">DXGK_PAGE_TABLE_LEVEL_DESC</a></strong><strong>::PageTableSizeInBytes</strong>.</p>
<h3><code>LegacyBehaviors</code></h3>
<h3><code>LegacyBehaviors.SourcePageTableVaInTransfer</code></h3>
<p>When set to 1, video memory manager sets <strong>SourcePageTable</strong> address in <strong>TransferVirtual</strong> during allocation eviction.</p>
<h3><code>LegacyBehaviors.Reserved</code></h3>
<p>Reserved; do not use.</p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/ns-d3dkmddi-_dxgk_gpummucaps">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3dkmddi/ns-d3dkmddi-_dxgk_gpummucaps.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
