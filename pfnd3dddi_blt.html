<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="PFND3DDDI_BLT - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>PFND3DDDI_BLT - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            PFND3DDDI_BLT - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3dumddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">PFND3DDDI_BLT Pfnd3dddiBlt;

HRESULT Pfnd3dddiBlt(
  HANDLE hDevice,
  const <a href="d3dddiarg_blt" title="typedef struct _D3DDDIARG_BLT {&#10;  [in] HANDLE          hSrcResource;&#10;  [in] UINT            SrcSubResourceIndex;&#10;  [in] RECT            SrcRect;&#10;  [in] HANDLE          hDstResource;&#10;  [in] UINT            DstSubResourceIndex;&#10;  [in] RECT            DstRect;&#10;  [in] UINT            ColorKey;&#10;  [in] D3DDDI_BLTFLAGS Flags;&#10;} D3DDDIARG_BLT;">D3DDDIARG_BLT</a> *unnamedParam2
)
{...}</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_blt">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/pfnd3dddi_blt.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-d3dumddi-pfnd3dddi_blt)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="pfnd3dddi_blt-callback-function">PFND3DDDI_BLT callback function</h1>

<h2 id="description">Description</h2>

<p>The <strong>Blt</strong> function copies the contents of a source surface to a destination surface.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="hdevice"><code>hDevice</code></h3>

<p>A handle to the display device (graphics context).</p>

<h3 id="unnamedparam2"><code>unnamedParam2</code></h3>

<p><em>pData</em> [in]</p>

<p>A pointer to a <a href="d3dddiarg_blt" title="typedef struct _D3DDDIARG_BLT {&#10;  [in] HANDLE          hSrcResource;&#10;  [in] UINT            SrcSubResourceIndex;&#10;  [in] RECT            SrcRect;&#10;  [in] HANDLE          hDstResource;&#10;  [in] UINT            DstSubResourceIndex;&#10;  [in] RECT            DstRect;&#10;  [in] UINT            ColorKey;&#10;  [in] D3DDDI_BLTFLAGS Flags;&#10;} D3DDDIARG_BLT;">D3DDDIARG_BLT</a> structure that describes the parameters of the bit-block transfer (bitblt).</p>

<h2 id="return-value">Return value</h2>

<p><strong>Blt</strong> returns one of the following values:</p>

<table>
<thead>
<tr>
  <th style="text-align:left;"><strong>Return code</strong></th>
  <th style="text-align:left;"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
  <td style="text-align:left;"><strong>S_OK</strong></td>
  <td style="text-align:left;">The bitblt for the resource is successfully performed.</td>
</tr>
<tr>
  <td style="text-align:left;"><strong>E_OUTOFMEMORY</strong></td>
  <td style="text-align:left;"><a href="#">Blt</a> could not allocate the required memory for it to complete.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p>The Microsoft Direct3D runtime calls the user-mode display driver's <strong>Blt</strong> function to copy the contents of a source surface to a destination surface. After mapping the surface references to allocation references, the user-mode display driver should issue the appropriate hardware commands. If either the source or destination allocation is in system memory, the user-mode display driver might be required to synchronize (that is, call the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_rendercb">pfnRenderCb</a> function) if the outstanding hardware command stream contains references to the system-memory allocation. If both the source and destination allocations are in system memory, the driver should synchronize as necessary but should not copy the contents of the source surface. The Direct3D runtime copies the contents after the call to <strong>pfnRenderCb</strong> returns.</p>

<p>The user-mode display driver must handle the following conditions that might occur during a copy operation:</p>

<ul>
<li>The destination and source surfaces are part of the same resource (that is, the <strong>hSrcResource</strong> and <strong>hDstResource</strong> members of <a href="d3dddiarg_blt" title="typedef struct _D3DDDIARG_BLT {&#10;  [in] HANDLE          hSrcResource;&#10;  [in] UINT            SrcSubResourceIndex;&#10;  [in] RECT            SrcRect;&#10;  [in] HANDLE          hDstResource;&#10;  [in] UINT            DstSubResourceIndex;&#10;  [in] RECT            DstRect;&#10;  [in] UINT            ColorKey;&#10;  [in] D3DDDI_BLTFLAGS Flags;&#10;} D3DDDIARG_BLT;">D3DDDIARG_BLT</a> specify handles to the same resource).</li>
<li>The source and destination rectangles overlap (that is, the coordinates of the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/windef/ns-windef-rect">RECT</a> structures in the <strong>SrcRect</strong> and <strong>DstRect</strong> members of <a href="d3dddiarg_blt" title="typedef struct _D3DDDIARG_BLT {&#10;  [in] HANDLE          hSrcResource;&#10;  [in] UINT            SrcSubResourceIndex;&#10;  [in] RECT            SrcRect;&#10;  [in] HANDLE          hDstResource;&#10;  [in] UINT            DstSubResourceIndex;&#10;  [in] RECT            DstRect;&#10;  [in] UINT            ColorKey;&#10;  [in] D3DDDI_BLTFLAGS Flags;&#10;} D3DDDIARG_BLT;">D3DDDIARG_BLT</a> overlap).</li>
</ul>

<p>The user-mode display driver must handle all of the bitblt to and from video memory, including bitblt from video memory to system memory. If the user-mode display driver cannot use the graphics processing unit (GPU) to issue a bitblt from video memory to system memory, the user-mode display driver can copy the data by using the CPU.</p>

<p>The user-mode display driver must support colorkeying only with formats that were introduced before Microsoft DirectX 8.0. For formats that were introduced in DirectX 8.0 and later runtimes, colorkeying support is not required.</p>

<p>The type of bitblt to perform is indicated through the bit-field flags that are specified in the <strong>Flags</strong> member of <a href="d3dddiarg_blt" title="typedef struct _D3DDDIARG_BLT {&#10;  [in] HANDLE          hSrcResource;&#10;  [in] UINT            SrcSubResourceIndex;&#10;  [in] RECT            SrcRect;&#10;  [in] HANDLE          hDstResource;&#10;  [in] UINT            DstSubResourceIndex;&#10;  [in] RECT            DstRect;&#10;  [in] UINT            ColorKey;&#10;  [in] D3DDDI_BLTFLAGS Flags;&#10;} D3DDDIARG_BLT;">D3DDDIARG_BLT</a>. Video memory to video memory bitblts can include colorkeying, stretching, mirroring, and linear-to-sRGB format conversion. System memory to video memory bitblts can include stretching and linear-to-sRGB format conversion; however, these types of bitblts never include mirroring or colorkeying. All video memory to system memory bitblts and system memory to system memory bitblts are straight copies only; that is, these types of bitblts never include stretching, mirroring, colorkeying, or linear-to-sRGB format conversion. For more information about sRGB format, see the <a rel="noopener" target="_blank" href="https://go.microsoft.com/fwlink/p/?linkid=10112">sRGB</a> website.</p>

<p>For more information about rules that the <strong>Blt</strong> function must follow when converting depth-stencil values, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/copying-depth-stencil-values">Copying Depth-Stencil Values</a>.</p>

<p>The Direct3D runtime can call the user-mode display driver's <strong>Blt</strong> function to copy the contents of any source surface type (such as, offscreen-plain type, render-target type, or texture type) to any other destination surface type.</p>

<h2 id="see-also">See also</h2>

<p><a href="d3dddiarg_blt" title="typedef struct _D3DDDIARG_BLT {&#10;  [in] HANDLE          hSrcResource;&#10;  [in] UINT            SrcSubResourceIndex;&#10;  [in] RECT            SrcRect;&#10;  [in] HANDLE          hDstResource;&#10;  [in] UINT            DstSubResourceIndex;&#10;  [in] RECT            DstRect;&#10;  [in] UINT            ColorKey;&#10;  [in] D3DDDI_BLTFLAGS Flags;&#10;} D3DDDIARG_BLT;">D3DDDIARG_BLT</a></p>

<p><a href="d3dddi_devicefuncs" title="typedef struct _D3DDDI_DEVICEFUNCS {&#10;  PFND3DDDI_SETRENDERSTATE                           pfnSetRenderState;&#10;  PFND3DDDI_UPDATEWINFO                              pfnUpdateWInfo;&#10;  PFND3DDDI_VALIDATEDEVICE                           pfnValidateDevice;&#10;  PFND3DDDI_SETTEXTURESTAGESTATE                     pfnSetTextureStageState;&#10;  PFND3DDDI_SETTEXTURE                               pfnSetTexture;&#10;  PFND3DDDI_SETPIXELSHADER                           pfnSetPixelShader;&#10;  PFND3DDDI_SETPIXELSHADERCONST                      pfnSetPixelShaderConst;&#10;  PFND3DDDI_SETSTREAMSOURCEUM                        pfnSetStreamSourceUm;&#10;  PFND3DDDI_SETINDICES                               pfnSetIndices;&#10;  PFND3DDDI_SETINDICESUM                             pfnSetIndicesUm;&#10;  PFND3DDDI_DRAWPRIMITIVE                            pfnDrawPrimitive;&#10;  PFND3DDDI_DRAWINDEXEDPRIMITIVE                     pfnDrawIndexedPrimitive;&#10;  PFND3DDDI_DRAWRECTPATCH                            pfnDrawRectPatch;&#10;  PFND3DDDI_DRAWTRIPATCH                             pfnDrawTriPatch;&#10;  PFND3DDDI_DRAWPRIMITIVE2                           pfnDrawPrimitive2;&#10;  PFND3DDDI_DRAWINDEXEDPRIMITIVE2                    pfnDrawIndexedPrimitive2;&#10;  PFND3DDDI_VOLBLT                                   pfnVolBlt;&#10;  PFND3DDDI_BUFBLT                                   pfnBufBlt;&#10;  PFND3DDDI_TEXBLT                                   pfnTexBlt;&#10;...">D3DDDI_DEVICEFUNCS</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_rendercb">pfnRenderCb</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_blt">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3dumddi/nc-d3dumddi-pfnd3dddi_blt.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
