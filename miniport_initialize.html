<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="MINIPORT_INITIALIZE - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>MINIPORT_INITIALIZE - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            MINIPORT_INITIALIZE - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">MINIPORT_INITIALIZE MiniportInitialize;

NDIS_STATUS MiniportInitialize(
  [in] NDIS_HANDLE NdisMiniportHandle,
  [in] NDIS_HANDLE MiniportDriverContext,
  [in] <a href="ndis_miniport_init_parameters" title="typedef struct _NDIS_MINIPORT_INIT_PARAMETERS {&#10;  NDIS_OBJECT_HEADER                   Header;&#10;  ULONG                                Flags;&#10;  PNDIS_RESOURCE_LIST                  AllocatedResources;&#10;  NDIS_HANDLE                          IMDeviceInstanceContext;&#10;  NDIS_HANDLE                          MiniportAddDeviceContext;&#10;  NET_IFINDEX                          IfIndex;&#10;  NET_LUID                             NetLuid;&#10;  PNDIS_PORT_AUTHENTICATION_PARAMETERS DefaultPortAuthStates;&#10;  PNDIS_PCI_DEVICE_CUSTOM_PROPERTIES   PciDeviceCustomProperties;&#10;} NDIS_MINIPORT_INIT_PARAMETERS, *PNDIS_MINIPORT_INIT_PARAMETERS;">PNDIS_MINIPORT_INIT_PARAMETERS</a> MiniportInitParameters
)
{...}</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/miniport_initialize.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-ndis-miniport_initialize)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>MINIPORT_INITIALIZE callback function</h1>
<h2>Description</h2>
<p>NDIS calls a miniport driver's
<em>MiniportInitializeEx</em> function to initialize a miniport adapter for network I/O operations.</p>
<p><strong>Note</strong> You must declare the function by using the <strong>MINIPORT_INITIALIZE</strong> type. For more
information, see the following Examples section.</p>
<h2>Parameters</h2>
<h3><code>NdisMiniportHandle</code> [in]</h3>
<p>An NDIS-supplied handle that identifies the miniport adapter that the miniport driver should
initialize.</p>
<h3><code>MiniportDriverContext</code> [in]</h3>
<p>A handle to a driver-allocated context area where the driver maintains state and configuration
information. The miniport driver passed this context area to the
<a href="ndismregisterminiportdriver" title="NDIS_STATUS NdisMRegisterMiniportDriver(&#10;  [in]           PDRIVER_OBJECT                        DriverObject,&#10;  [in]           PUNICODE_STRING                       RegistryPath,&#10;  [in, optional] NDIS_HANDLE                           MiniportDriverContext,&#10;  [in]           PNDIS_MINIPORT_DRIVER_CHARACTERISTICS MiniportDriverCharacteristics,&#10;  [out]          PNDIS_HANDLE                          NdisMiniportDriverHandle&#10;);">NdisMRegisterMiniportDriver</a> function.</p>
<h3><code>MiniportInitParameters</code> [in]</h3>
<p>A pointer to an
<a href="ndis_miniport_init_parameters" title="typedef struct _NDIS_MINIPORT_INIT_PARAMETERS {&#10;  NDIS_OBJECT_HEADER                   Header;&#10;  ULONG                                Flags;&#10;  PNDIS_RESOURCE_LIST                  AllocatedResources;&#10;  NDIS_HANDLE                          IMDeviceInstanceContext;&#10;  NDIS_HANDLE                          MiniportAddDeviceContext;&#10;  NET_IFINDEX                          IfIndex;&#10;  NET_LUID                             NetLuid;&#10;  PNDIS_PORT_AUTHENTICATION_PARAMETERS DefaultPortAuthStates;&#10;  PNDIS_PCI_DEVICE_CUSTOM_PROPERTIES   PciDeviceCustomProperties;&#10;} NDIS_MINIPORT_INIT_PARAMETERS, *PNDIS_MINIPORT_INIT_PARAMETERS;">NDIS_MINIPORT_INIT_PARAMETERS</a> structure that defines the initialization parameters for the
miniport adapter.</p>
<h2>Return value</h2>
<p><em>MiniportInitializeEx</em> can return one of the following status values:</p>
<table>
<thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>NDIS_STATUS_SUCCESS</strong></td>
<td><em>MiniportInitializeEx</em> configured and set up the miniport adapter, and allocated all the resources that the driver must have to perform network I/O operations.</td>
</tr>
<tr>
<td><strong>NDIS_STATUS_NOT_ACCEPTED</strong></td>
<td><em>MiniportInitializeEx</em> could not get the miniport adapter to accept the configuration parameters that <em>MiniportInitializeEx</em> obtained from the registry.</td>
</tr>
<tr>
<td><strong>NDIS_STATUS_RESOURCES</strong></td>
<td><em>MiniportInitializeEx</em> could not allocate resources to perform network I/O operations. <em>MiniportInitializeEx</em> should call the <a href="ndiswriteerrorlogentry" title="VOID NdisWriteErrorLogEntry(&#10;  [in] NDIS_HANDLE     NdisAdapterHandle,&#10;  [in] NDIS_ERROR_CODE ErrorCode,&#10;  [in] ULONG           NumberOfErrorValues,&#10;       ...             &#10;);">NdisWriteErrorLogEntry</a> function to identify the resource conflict (for example, I/O port range, interrupt vector, device memory range, as appropriate). Supplying an error log record gives the user or system administrator information that can be used to reconfigure the computer to avoid such hardware resource conflicts.</td>
</tr>
<tr>
<td><strong>NDIS_STATUS_FAILURE</strong></td>
<td><em>MiniportInitializeEx</em> failed for reasons other than those in the preceding list. The driver should call <strong><a href="ndiswriteerrorlogentry" title="VOID NdisWriteErrorLogEntry(&#10;  [in] NDIS_HANDLE     NdisAdapterHandle,&#10;  [in] NDIS_ERROR_CODE ErrorCode,&#10;  [in] ULONG           NumberOfErrorValues,&#10;       ...             &#10;);">NdisWriteErrorLogEntry</a></strong> with parameters that specify the reason for the failure.</td>
</tr>
</tbody>
</table>
<h2>Remarks</h2>
<p>NDIS calls
<em>MiniportInitializeEx</em> as part of a system PnP operation. Drivers specify the
<em>MiniportInitializeEx</em> entry point by calling the
<a href="ndismregisterminiportdriver" title="NDIS_STATUS NdisMRegisterMiniportDriver(&#10;  [in]           PDRIVER_OBJECT                        DriverObject,&#10;  [in]           PUNICODE_STRING                       RegistryPath,&#10;  [in, optional] NDIS_HANDLE                           MiniportDriverContext,&#10;  [in]           PNDIS_MINIPORT_DRIVER_CHARACTERISTICS MiniportDriverCharacteristics,&#10;  [out]          PNDIS_HANDLE                          NdisMiniportDriverHandle&#10;);">NdisMRegisterMiniportDriver</a> function from the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/storage/driverentry-of-ide-controller-minidriver">DriverEntry</a> routine. NDIS can call
<em>MiniportInitializeEx</em> after
<strong><a href="driverentry" title="NTSTATUS DriverEntry(&#10;  [in] PDRIVER_OBJECT  DriverObject,&#10;  [in] PUNICODE_STRING RegistryPath&#10;);">DriverEntry</a></strong> returns. For more information, see
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/initializing-a-miniport-driver">DriverEntry of NDIS
Miniport Drivers</a>.</p>
<p>For NDIS intermediate drivers, NDIS can call
<em>MiniportInitializeEx</em> in the context of the
<a href="ndisiminitializedeviceinstanceex" title="NDIS_STATUS NdisIMInitializeDeviceInstanceEx(&#10;  [in]           NDIS_HANDLE  DriverHandle,&#10;  [in]           PNDIS_STRING DriverInstance,&#10;  [in, optional] NDIS_HANDLE  DeviceContext&#10;);">NdisIMInitializeDeviceInstanceEx</a> function or after it returns. Such a driver's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_bind_adapter_ex">ProtocolBindAdapterEx</a> function
usually calls
<strong><a href="ndisiminitializedeviceinstanceex" title="NDIS_STATUS NdisIMInitializeDeviceInstanceEx(&#10;  [in]           NDIS_HANDLE  DriverHandle,&#10;  [in]           PNDIS_STRING DriverInstance,&#10;  [in, optional] NDIS_HANDLE  DeviceContext&#10;);">NdisIMInitializeDeviceInstanceEx</a></strong>.</p>
<p>Drivers can register as a combined miniport driver and intermediate driver (see
<a href="ndismregisterminiportdriver" title="NDIS_STATUS NdisMRegisterMiniportDriver(&#10;  [in]           PDRIVER_OBJECT                        DriverObject,&#10;  [in]           PUNICODE_STRING                       RegistryPath,&#10;  [in, optional] NDIS_HANDLE                           MiniportDriverContext,&#10;  [in]           PNDIS_MINIPORT_DRIVER_CHARACTERISTICS MiniportDriverCharacteristics,&#10;  [out]          PNDIS_HANDLE                          NdisMiniportDriverHandle&#10;);">NdisMRegisterMiniportDriver</a>).
Such a miniport-intermediate driver functions similarly to an intermediate driver layered over a physical
miniport driver. For each virtual or physical device instance of a miniport-intermediate driver, if the
<strong>IMMiniport</strong> registry key is set to
<strong><a href="dword" title="typedef unsigned long DWORD;">DWORD</a>:0x0000001</strong>, NDIS calls the
<em>MiniportInitializeEx</em> function that the driver registered for the virtual device. Otherwise, NDIS
calls the driver's
<em>MiniportInitializeEx</em> function that the driver registered for the physical device.</p>
<p>Until
<em>MiniportInitializeEx</em> returns, NDIS submits no requests for the miniport adapter being initialized.
The miniport adapter is in the
<em>initializing</em> state.</p>
<p>To obtain configuration information for the miniport adapter, a driver calls the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/ndis-ndisopenconfigurationex">NdisOpenConfigurationEx</a> and
<a href="ndisreadconfiguration" title="VOID NdisReadConfiguration(&#10;  [out] PNDIS_STATUS                  Status,&#10;  [out] PNDIS_CONFIGURATION_PARAMETER *ParameterValue,&#10;  [in]  NDIS_HANDLE                   ConfigurationHandle,&#10;  [in]  PNDIS_STRING                  Keyword,&#10;  [in]  NDIS_PARAMETER_TYPE           ParameterType&#10;);">NdisReadConfiguration</a> functions. The
driver can call the
<a href="ndismgetbusdata" title="ULONG NdisMGetBusData(&#10;        NDIS_HANDLE NdisMiniportHandle,&#10;  [in]  ULONG       WhichSpace,&#10;  [in]  ULONG       Offset,&#10;  [out] PVOID       Buffer,&#10;  [in]  ULONG       Length&#10;);">NdisMGetBusData</a> function to obtain
bus-specific information.</p>
<p>Miniport drivers must call the
<a href="ndismsetminiportattributes" title="NDIS_STATUS NdisMSetMiniportAttributes(&#10;       NDIS_HANDLE                       NdisMiniportHandle,&#10;  [in] PNDIS_MINIPORT_ADAPTER_ATTRIBUTES MiniportAttributes&#10;);">NdisMSetMiniportAttributes</a> function and provide an
<a href="ndis_miniport_adapter_registration_attributes" title="typedef struct _NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES {&#10;  NDIS_OBJECT_HEADER  Header;&#10;  NDIS_HANDLE         MiniportAdapterContext;&#10;  ULONG               AttributeFlags;&#10;  UINT                CheckForHangTimeInSeconds;&#10;  NDIS_INTERFACE_TYPE InterfaceType;&#10;} NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES, *PNDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES;">NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES</a> structure which contains the following
attributes:</p>
<ul>
<li>A handle to a driver-allocated context area.</li>
<li>Appropriate attributes flags.</li>
<li>The time-out interval for calling its
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_check_for_hang">MiniportCheckForHangEx</a> function.</li>
<li>The interface type.</li>
</ul>
<p>The miniport driver passes
<strong><a href="ndismsetminiportattributes" title="NDIS_STATUS NdisMSetMiniportAttributes(&#10;       NDIS_HANDLE                       NdisMiniportHandle,&#10;  [in] PNDIS_MINIPORT_ADAPTER_ATTRIBUTES MiniportAttributes&#10;);">NdisMSetMiniportAttributes</a></strong> a handle at the
<strong>MiniportAdapterContext</strong> member of <a href="ndis_miniport_adapter_registration_attributes" title="typedef struct _NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES {&#10;  NDIS_OBJECT_HEADER  Header;&#10;  NDIS_HANDLE         MiniportAdapterContext;&#10;  ULONG               AttributeFlags;&#10;  UINT                CheckForHangTimeInSeconds;&#10;  NDIS_INTERFACE_TYPE InterfaceType;&#10;} NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES, *PNDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES;">NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES</a>. The driver
maintains state information for the specified miniport adapter in this context area. NDIS passes this
handle as an input parameter to other
<em>MiniportXxx</em> functions.</p>
<p>Miniport drivers must set the attributes in the
<a href="ndis_miniport_adapter_general_attributes" title="typedef struct _NDIS_MINIPORT_ADAPTER_GENERAL_ATTRIBUTES {&#10;  NDIS_OBJECT_HEADER               Header;&#10;  ULONG                            Flags;&#10;  NDIS_MEDIUM                      MediaType;&#10;  NDIS_PHYSICAL_MEDIUM             PhysicalMediumType;&#10;  ULONG                            MtuSize;&#10;  ULONG64                          MaxXmitLinkSpeed;&#10;  ULONG64                          XmitLinkSpeed;&#10;  ULONG64                          MaxRcvLinkSpeed;&#10;  ULONG64                          RcvLinkSpeed;&#10;  NDIS_MEDIA_CONNECT_STATE         MediaConnectState;&#10;  NDIS_MEDIA_DUPLEX_STATE          MediaDuplexState;&#10;  ULONG                            LookaheadSize;&#10;  PNDIS_PNP_CAPABILITIES           PowerManagementCapabilities;&#10;  ULONG                            MacOptions;&#10;  ULONG                            SupportedPacketFilters;&#10;  ULONG                            MaxMulticastListSize;&#10;  USHORT                           MacAddressLength;&#10;  UCHAR                            PermanentMacAddress[NDIS_MAX_PHYS_ADDRESS_LENGTH];&#10;  UCHAR                            CurrentMacAddress[NDIS_MAX_PHYS_ADDRESS_LENGTH];&#10;...">NDIS_MINIPORT_ADAPTER_GENERAL_ATTRIBUTES</a> structure after they set the registration attributes in
the <a href="ndis_miniport_adapter_registration_attributes" title="typedef struct _NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES {&#10;  NDIS_OBJECT_HEADER  Header;&#10;  NDIS_HANDLE         MiniportAdapterContext;&#10;  ULONG               AttributeFlags;&#10;  UINT                CheckForHangTimeInSeconds;&#10;  NDIS_INTERFACE_TYPE InterfaceType;&#10;} NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES, *PNDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES;">NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES</a> structure and before they set any additional
attributes.</p>
<p><em>MiniportInitializeEx</em> can also allocate resources such as the following:</p>
<ul>
<li>Non-paged pool memory</li>
<li><a href="net_buffer" title="typedef struct _NET_BUFFER {&#10;  union {&#10;    struct {&#10;      NET_BUFFER *Next;&#10;      MDL        *CurrentMdl;&#10;      ULONG      CurrentMdlOffset;&#10;      union {&#10;        ULONG  DataLength;&#10;        SIZE_T stDataLength;&#10;      };&#10;      MDL        *MdlChain;&#10;      ULONG      DataOffset;&#10;    };&#10;    SLIST_HEADER      Link;&#10;    NET_BUFFER_HEADER NetBufferHeader;&#10;  };&#10;  USHORT           ChecksumBias;&#10;  USHORT           Reserved;&#10;  NDIS_HANDLE      NdisPoolHandle;&#10;  PVOID            NdisReserved[2];&#10;...">NET_BUFFER</a> and
<a href="net_buffer_list" title="typedef struct _NET_BUFFER_LIST {&#10;  union {&#10;    struct {&#10;      NET_BUFFER_LIST *Next;&#10;      NET_BUFFER      *FirstNetBuffer;&#10;    };&#10;    SLIST_HEADER           Link;&#10;    NET_BUFFER_LIST_HEADER NetBufferListHeader;&#10;  };&#10;  NET_BUFFER_LIST_CONTEXT *Context;&#10;  NET_BUFFER_LIST         *ParentNetBufferList;&#10;  NDIS_HANDLE             NdisPoolHandle;&#10;  PVOID                   NdisReserved[2];&#10;  PVOID                   ProtocolReserved[4];&#10;  PVOID                   MiniportReserved[2];&#10;  PVOID                   Scratch;&#10;  NDIS_HANDLE             SourceHandle;&#10;  ULONG                   NblFlags;&#10;  LONG                    ChildRefCount;&#10;  ULONG                   Flags;&#10;...">NET_BUFFER_LIST</a> structure pools</li>
<li>Spin locks</li>
<li>Timers</li>
<li>IO ports</li>
<li>DMA</li>
<li>Shared memory</li>
<li>Interrupts</li>
</ul>
<p>If the driver indicates receives with the
<a href="ndismindicatereceivenetbufferlists" title="VOID NdisMIndicateReceiveNetBufferLists(&#10;  [in] NDIS_HANDLE      MiniportAdapterHandle,&#10;       PNET_BUFFER_LIST NetBufferList,&#10;  [in] NDIS_PORT_NUMBER PortNumber,&#10;  [in] ULONG            NumberOfNetBufferLists,&#10;  [in] ULONG            ReceiveFlags&#10;);">NdisMIndicateReceiveNetBufferLists</a> function, the
<em>MiniportInitializeEx</em> function should call the
<a href="ndisallocatenetbufferlistpool" title="NDIS_EXPORTED_ROUTINE NDIS_HANDLE NdisAllocateNetBufferListPool(&#10;  [in, optional] NDIS_HANDLE                           NdisHandle,&#10;  [in]           NET_BUFFER_LIST_POOL_PARAMETERS const *Parameters&#10;);">NdisAllocateNetBufferListPool</a> and
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisallocatenetbufferpool">NdisAllocateNetBufferPool</a> functions and save the handles returned by these NDIS functions.
Typically, the network data that the driver subsequently indicates with
<strong><a href="ndismindicatereceivenetbufferlists" title="VOID NdisMIndicateReceiveNetBufferLists(&#10;  [in] NDIS_HANDLE      MiniportAdapterHandle,&#10;       PNET_BUFFER_LIST NetBufferList,&#10;  [in] NDIS_PORT_NUMBER PortNumber,&#10;  [in] ULONG            NumberOfNetBufferLists,&#10;  [in] ULONG            ReceiveFlags&#10;);">NdisMIndicateReceiveNetBufferLists</a></strong> references structures that were allocated with the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisallocatenetbufferandnetbufferlist">NdisAllocateNetBufferAndNetBufferList</a> function. A driver can also use structures that were
allocated with the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisallocatenetbuffer">NdisAllocateNetBuffer</a>, and
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisallocatenetbufferlist">NdisAllocateNetBufferList</a> functions.</p>
<p>If driver functions, other than the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_isr">MiniportInterrupt</a> function, share
resources,
<em>MiniportInitializeEx</em> should call the
<a href="ndisallocatespinlock" title="VOID NdisAllocateSpinLock(&#10;  [out] PNDIS_SPIN_LOCK SpinLock&#10;);">NdisAllocateSpinLock</a> function to set
up any spin locks necessary to synchronize access to such shared resources. Resources that other driver
functions share with
<em>MiniportInterrupt</em>, such as NIC registers, are protected by the interrupt object that the driver
set up with the
<a href="ndismregisterinterruptex" title="NDIS_STATUS NdisMRegisterInterruptEx(&#10;  [in]  NDIS_HANDLE                              MiniportAdapterHandle,&#10;  [in]  NDIS_HANDLE                              MiniportInterruptContext,&#10;  [in]  PNDIS_MINIPORT_INTERRUPT_CHARACTERISTICS MiniportInterruptCharacteristics,&#10;  [out] PNDIS_HANDLE                             NdisInterruptHandle&#10;);">NdisMRegisterInterruptEx</a> function. Driver functions access these resources by calling the
<a href="ndismsynchronizewithinterruptex" title="BOOLEAN NdisMSynchronizeWithInterruptEx(&#10;  [in] NDIS_HANDLE                            NdisInterruptHandle,&#10;  [in] ULONG                                  MessageId,&#10;  [in] MINIPORT_SYNCHRONIZE_INTERRUPT_HANDLER SynchronizeFunction,&#10;  [in] PVOID                                  SynchronizeFunction,&#10;  [in] PVOID                                  SynchronizeContext&#10;);">NdisMSynchronizeWithInterruptEx</a> function.</p>
<p><em>MiniportInitializeEx</em> can call the
<a href="ndisallocatetimerobject" title="NDIS_STATUS NdisAllocateTimerObject(&#10;  [in]  NDIS_HANDLE                 NdisHandle,&#10;  [in]  PNDIS_TIMER_CHARACTERISTICS TimerCharacteristics,&#10;  [out] PNDIS_HANDLE                pTimerObject&#10;);">NdisAllocateTimerObject</a> function
with a driver-supplied
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-ndis_timer_function">NetTimerCallback</a> function and a pointer
to driver-allocated memory for a timer object. Drivers can set up multiple
<em>NetTimerCallback</em> functions, each with its own timer object. A driver can call the
<a href="ndissettimerobject" title="BOOLEAN NdisSetTimerObject(&#10;  [in]           NDIS_HANDLE   TimerObject,&#10;  [in]           LARGE_INTEGER DueTime,&#10;  [in, optional] LONG          MillisecondsPeriod,&#10;  [in, optional] PVOID         FunctionContext&#10;);">NdisSetTimerObject</a> function to enable a
periodic
<em>NetTimerCallback</em> function. A driver can also call the
<strong><a href="ndissettimerobject" title="BOOLEAN NdisSetTimerObject(&#10;  [in]           NDIS_HANDLE   TimerObject,&#10;  [in]           LARGE_INTEGER DueTime,&#10;  [in, optional] LONG          MillisecondsPeriod,&#10;  [in, optional] PVOID         FunctionContext&#10;);">NdisSetTimerObject</a></strong> function to enable a one-time
<em>NetTimerCallback</em> function.</p>
<p><em>MiniportInitializeEx</em> must call the
<a href="ndismsetminiportattributes" title="NDIS_STATUS NdisMSetMiniportAttributes(&#10;       NDIS_HANDLE                       NdisMiniportHandle,&#10;  [in] PNDIS_MINIPORT_ADAPTER_ATTRIBUTES MiniportAttributes&#10;);">NdisMSetMiniportAttributes</a> function before it calls any
<strong>NdisM<em>Xxx</em></strong> function, such as the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/ndis-ndismregisterioportrange">NdisMRegisterIoPortRange</a> or
<strong><a href="ndismmapiospace" title="NDIS_STATUS NdisMMapIoSpace(&#10;  [out] PVOID                 *VirtualAddress,&#10;  [in]  NDIS_HANDLE           MiniportAdapterHandle,&#10;  [in]  NDIS_PHYSICAL_ADDRESS PhysicalAddress,&#10;  [in]  UINT                  Length&#10;);">NdisMMapIoSpace</a></strong> functions, that claims
hardware resources for the miniport adapter.
<em>MiniportInitializeEx</em> must call
<strong><a href="ndismsetminiportattributes" title="NDIS_STATUS NdisMSetMiniportAttributes(&#10;       NDIS_HANDLE                       NdisMiniportHandle,&#10;  [in] PNDIS_MINIPORT_ADAPTER_ATTRIBUTES MiniportAttributes&#10;);">NdisMSetMiniportAttributes</a></strong> before it tries to allocate resources for DMA operations.</p>
<p>If the device supports bus-master DMA,
<em>MiniportInitializeEx</em> must call the
<a href="ndismregisterscattergatherdma" title="NDIS_STATUS NdisMRegisterScatterGatherDma(&#10;  [in]      NDIS_HANDLE              MiniportAdapterHandle,&#10;  [in, out] PNDIS_SG_DMA_DESCRIPTION DmaDescription,&#10;  [out]     PNDIS_HANDLE             NdisMiniportDmaHandle&#10;);">NdisMRegisterScatterGatherDma</a> function after it calls
<strong><a href="ndismsetminiportattributes" title="NDIS_STATUS NdisMSetMiniportAttributes(&#10;       NDIS_HANDLE                       NdisMiniportHandle,&#10;  [in] PNDIS_MINIPORT_ADAPTER_ATTRIBUTES MiniportAttributes&#10;);">NdisMSetMiniportAttributes</a></strong> and before it calls the
<a href="ndismallocatesharedmemory" title="VOID NdisMAllocateSharedMemory(&#10;  [in]  NDIS_HANDLE            MiniportAdapterHandle,&#10;  [in]  ULONG                  Length,&#10;  [in]  BOOLEAN                Cached,&#10;  [out] PVOID                  *VirtualAddress,&#10;  [out] PNDIS_PHYSICAL_ADDRESS PhysicalAddress&#10;);">NdisMAllocateSharedMemory</a> function. If the device supports subordinate DMA,
<em>MiniportInitializeEx</em> must call
<strong><a href="ndismsetminiportattributes" title="NDIS_STATUS NdisMSetMiniportAttributes(&#10;       NDIS_HANDLE                       NdisMiniportHandle,&#10;  [in] PNDIS_MINIPORT_ADAPTER_ATTRIBUTES MiniportAttributes&#10;);">NdisMSetMiniportAttributes</a></strong> before it calls the
<a href="ndismregisterdmachannel" title="NDIS_STATUS NdisMRegisterDmaChannel(&#10;  [out] PNDIS_HANDLE          MiniportDmaHandle,&#10;  [in]  NDIS_HANDLE           MiniportAdapterHandle,&#10;  [in]  UINT                  DmaChannel,&#10;  [in]  BOOLEAN               Dma32BitAddresses,&#10;  [in]  PNDIS_DMA_DESCRIPTION DmaDescription,&#10;  [in]  ULONG                 MaximumLength&#10;);">NdisMRegisterDmaChannel</a> function.</p>
<p>After
<em>MiniportInitializeEx</em> calls the
<a href="ndismregisterinterruptex" title="NDIS_STATUS NdisMRegisterInterruptEx(&#10;  [in]  NDIS_HANDLE                              MiniportAdapterHandle,&#10;  [in]  NDIS_HANDLE                              MiniportInterruptContext,&#10;  [in]  PNDIS_MINIPORT_INTERRUPT_CHARACTERISTICS MiniportInterruptCharacteristics,&#10;  [out] PNDIS_HANDLE                             NdisInterruptHandle&#10;);">NdisMRegisterInterruptEx</a> function, NDIS can call the driver's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_isr">MiniportInterrupt</a> function. NDIS
calls
<em>MiniportInterrupt</em> if the NIC generates an interrupt or if any other device with which the NIC
shares an interrupt generates an interrupt. Note that a miniport driver can get an interrupt as soon as
it calls
<strong><a href="ndismregisterinterruptex" title="NDIS_STATUS NdisMRegisterInterruptEx(&#10;  [in]  NDIS_HANDLE                              MiniportAdapterHandle,&#10;  [in]  NDIS_HANDLE                              MiniportInterruptContext,&#10;  [in]  PNDIS_MINIPORT_INTERRUPT_CHARACTERISTICS MiniportInterruptCharacteristics,&#10;  [out] PNDIS_HANDLE                             NdisInterruptHandle&#10;);">NdisMRegisterInterruptEx</a></strong> and keeps getting interrupts until its call to the
<a href="ndismderegisterinterruptex" title="VOID NdisMDeregisterInterruptEx(&#10;  [in] NDIS_HANDLE NdisInterruptHandle&#10;);">NdisMDeregisterInterruptEx</a> function returns.</p>
<p><em>MiniportInitializeEx</em> should test the NIC to make sure that the hardware is configured correctly. If
the driver must wait for state changes to occur in the hardware,
<em>MiniportInitializeEx</em> can use the
<a href="ndiswaitevent" title="BOOLEAN NdisWaitEvent(&#10;  [in] PNDIS_EVENT Event,&#10;  [in] UINT        MsToWait&#10;);">NdisWaitEvent</a> function or the
<a href="ndismsleep" title="VOID NdisMSleep(&#10;  [in] ULONG MicrosecondsToSleep&#10;);">NdisMSleep</a> function.</p>
<p>After
<em>MiniportInitializeEx</em> returns successfully, the miniport adapter is in the
<em>Paused</em> state. NDIS can call the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_restart">MiniportRestart</a> function to transition the
miniport adapter to the
<em>Running</em> state.</p>
<p>If
<em>MiniportInitializeEx</em> returns NDIS_STATUS_SUCCESS, the driver should release all the resources for
the miniport adapter in the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_halt">MiniportHaltEx</a> function.</p>
<p>The driver must call <strong><a href="ndismsetminiportattributes" title="NDIS_STATUS NdisMSetMiniportAttributes(&#10;       NDIS_HANDLE                       NdisMiniportHandle,&#10;  [in] PNDIS_MINIPORT_ADAPTER_ATTRIBUTES MiniportAttributes&#10;);">NdisMSetMiniportAttributes</a></strong> and set the <strong>GeneralAttributes</strong> in the <strong><a href="ndis_miniport_adapter_attributes" title="typedef union _NDIS_MINIPORT_ADAPTER_ATTRIBUTES {&#10;  NDIS_OBJECT_HEADER                               Header;&#10;  NDIS_MINIPORT_ADD_DEVICE_REGISTRATION_ATTRIBUTES AddDeviceRegistrationAttributes;&#10;  NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES    RegistrationAttributes;&#10;  NDIS_MINIPORT_ADAPTER_GENERAL_ATTRIBUTES         GeneralAttributes;&#10;  NDIS_MINIPORT_ADAPTER_OFFLOAD_ATTRIBUTES         OffloadAttributes;&#10;  NDIS_MINIPORT_ADAPTER_NATIVE_802_11_ATTRIBUTES   Native_802_11_Attributes;&#10;  NDIS_MINIPORT_ADAPTER_HARDWARE_ASSIST_ATTRIBUTES HardwareAssistAttributes;&#10;  NDIS_MINIPORT_ADAPTER_NDK_ATTRIBUTES             NDKAttributes;&#10;  NDIS_MINIPORT_ADAPTER_PACKET_DIRECT_ATTRIBUTES   PacketDirectAttributes;&#10;} NDIS_MINIPORT_ADAPTER_ATTRIBUTES, *PNDIS_MINIPORT_ADAPTER_ATTRIBUTES;">NDIS_MINIPORT_ADAPTER_ATTRIBUTES</a></strong> structure if it returns NDIS_STATUS_SUCCESS.</p>
<p>If
<em>MiniportInitializeEx</em> failed,
<em>MiniportInitializeEx</em> must release all resources that it allocated before it returns and the
miniport adapter returns to the
<em>Halted</em> state.</p>
<p>NDIS calls
<em>MiniportInitializeEx</em> at IRQL = PASSIVE_LEVEL.</p>
<h3>Examples</h3>
<p>To define a <em>MiniportInitializeEx</em> function, you must first provide a function declaration that identifies the type of function you're defining. Windows provides a set of function types for drivers. Declaring a function using the function types helps <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/code-analysis-for-drivers">Code Analysis for Drivers</a>, <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/static-driver-verifier">Static Driver Verifier</a> (SDV), and other verification tools find errors, and it's a requirement for writing drivers for the Windows operating system.</p>
<p>For example, to define a <em>MiniportInitializeEx</em> function that is named &quot;MyInitializeEx&quot;, use the <strong>MINIPORT_INITIALIZE</strong> type as shown in this code example:</p>
<pre><code>MINIPORT_INITIALIZE MyInitializeEx;
</code></pre>
<p>Then, implement your function as follows:</p>
<pre><code>_Use_decl_annotations_
NDIS_STATUS
 MyInitializeEx(
    NDIS_HANDLE  NdisMiniportHandle,
    NDIS_HANDLE  MiniportDriverContext,
    <a href="ndis_miniport_init_parameters" title="typedef struct _NDIS_MINIPORT_INIT_PARAMETERS {&#10;  NDIS_OBJECT_HEADER                   Header;&#10;  ULONG                                Flags;&#10;  PNDIS_RESOURCE_LIST                  AllocatedResources;&#10;  NDIS_HANDLE                          IMDeviceInstanceContext;&#10;  NDIS_HANDLE                          MiniportAddDeviceContext;&#10;  NET_IFINDEX                          IfIndex;&#10;  NET_LUID                             NetLuid;&#10;  PNDIS_PORT_AUTHENTICATION_PARAMETERS DefaultPortAuthStates;&#10;  PNDIS_PCI_DEVICE_CUSTOM_PROPERTIES   PciDeviceCustomProperties;&#10;} NDIS_MINIPORT_INIT_PARAMETERS, *PNDIS_MINIPORT_INIT_PARAMETERS;">PNDIS_MINIPORT_INIT_PARAMETERS</a>  MiniportInitParameters
    )
  {...}
</code></pre>
<p>The <strong>MINIPORT_INITIALIZE</strong> function type is defined in the Ndis.h header file. To more accurately identify errors when you run the code analysis tools, be sure to add the <em>Use_decl_annotations</em> annotation to your function definition. The <em>Use_decl_annotations</em> annotation ensures that the annotations that are applied to the <strong>MINIPORT_INITIALIZE</strong> function type in the header file are used. For more information about the requirements for function declarations, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/declaring-functions-by-using-function-role-types-for-ndis-drivers">Declaring Functions by Using Function Role Types for NDIS Drivers</a>.</p>
<p>For information about <em>Use_decl_annotations</em>, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/visualstudio/code-quality/annotating-function-behavior">Annotating Function Behavior</a>.</p>
<h2>See also</h2>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/storage/driverentry-of-ide-controller-minidriver">DriverEntry</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_check_for_hang">MiniportCheckForHangEx</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_halt">MiniportHaltEx</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_isr">MiniportInterrupt</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_restart">MiniportRestart</a></p>
<p><a href="ndis_miniport_adapter_general_attributes" title="typedef struct _NDIS_MINIPORT_ADAPTER_GENERAL_ATTRIBUTES {&#10;  NDIS_OBJECT_HEADER               Header;&#10;  ULONG                            Flags;&#10;  NDIS_MEDIUM                      MediaType;&#10;  NDIS_PHYSICAL_MEDIUM             PhysicalMediumType;&#10;  ULONG                            MtuSize;&#10;  ULONG64                          MaxXmitLinkSpeed;&#10;  ULONG64                          XmitLinkSpeed;&#10;  ULONG64                          MaxRcvLinkSpeed;&#10;  ULONG64                          RcvLinkSpeed;&#10;  NDIS_MEDIA_CONNECT_STATE         MediaConnectState;&#10;  NDIS_MEDIA_DUPLEX_STATE          MediaDuplexState;&#10;  ULONG                            LookaheadSize;&#10;  PNDIS_PNP_CAPABILITIES           PowerManagementCapabilities;&#10;  ULONG                            MacOptions;&#10;  ULONG                            SupportedPacketFilters;&#10;  ULONG                            MaxMulticastListSize;&#10;  USHORT                           MacAddressLength;&#10;  UCHAR                            PermanentMacAddress[NDIS_MAX_PHYS_ADDRESS_LENGTH];&#10;  UCHAR                            CurrentMacAddress[NDIS_MAX_PHYS_ADDRESS_LENGTH];&#10;...">NDIS_MINIPORT_ADAPTER_GENERAL_ATTRIBUTES</a></p>
<p><a href="ndis_miniport_adapter_registration_attributes" title="typedef struct _NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES {&#10;  NDIS_OBJECT_HEADER  Header;&#10;  NDIS_HANDLE         MiniportAdapterContext;&#10;  ULONG               AttributeFlags;&#10;  UINT                CheckForHangTimeInSeconds;&#10;  NDIS_INTERFACE_TYPE InterfaceType;&#10;} NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES, *PNDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES;">NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES</a></p>
<p><a href="ndis_miniport_init_parameters" title="typedef struct _NDIS_MINIPORT_INIT_PARAMETERS {&#10;  NDIS_OBJECT_HEADER                   Header;&#10;  ULONG                                Flags;&#10;  PNDIS_RESOURCE_LIST                  AllocatedResources;&#10;  NDIS_HANDLE                          IMDeviceInstanceContext;&#10;  NDIS_HANDLE                          MiniportAddDeviceContext;&#10;  NET_IFINDEX                          IfIndex;&#10;  NET_LUID                             NetLuid;&#10;  PNDIS_PORT_AUTHENTICATION_PARAMETERS DefaultPortAuthStates;&#10;  PNDIS_PCI_DEVICE_CUSTOM_PROPERTIES   PciDeviceCustomProperties;&#10;} NDIS_MINIPORT_INIT_PARAMETERS, *PNDIS_MINIPORT_INIT_PARAMETERS;">NDIS_MINIPORT_INIT_PARAMETERS</a></p>
<p><a href="net_buffer" title="typedef struct _NET_BUFFER {&#10;  union {&#10;    struct {&#10;      NET_BUFFER *Next;&#10;      MDL        *CurrentMdl;&#10;      ULONG      CurrentMdlOffset;&#10;      union {&#10;        ULONG  DataLength;&#10;        SIZE_T stDataLength;&#10;      };&#10;      MDL        *MdlChain;&#10;      ULONG      DataOffset;&#10;    };&#10;    SLIST_HEADER      Link;&#10;    NET_BUFFER_HEADER NetBufferHeader;&#10;  };&#10;  USHORT           ChecksumBias;&#10;  USHORT           Reserved;&#10;  NDIS_HANDLE      NdisPoolHandle;&#10;  PVOID            NdisReserved[2];&#10;...">NET_BUFFER</a></p>
<p><a href="net_buffer_list" title="typedef struct _NET_BUFFER_LIST {&#10;  union {&#10;    struct {&#10;      NET_BUFFER_LIST *Next;&#10;      NET_BUFFER      *FirstNetBuffer;&#10;    };&#10;    SLIST_HEADER           Link;&#10;    NET_BUFFER_LIST_HEADER NetBufferListHeader;&#10;  };&#10;  NET_BUFFER_LIST_CONTEXT *Context;&#10;  NET_BUFFER_LIST         *ParentNetBufferList;&#10;  NDIS_HANDLE             NdisPoolHandle;&#10;  PVOID                   NdisReserved[2];&#10;  PVOID                   ProtocolReserved[4];&#10;  PVOID                   MiniportReserved[2];&#10;  PVOID                   Scratch;&#10;  NDIS_HANDLE             SourceHandle;&#10;  ULONG                   NblFlags;&#10;  LONG                    ChildRefCount;&#10;  ULONG                   Flags;&#10;...">NET_BUFFER_LIST</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisallocatenetbuffer">NdisAllocateNetBuffer</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisallocatenetbufferandnetbufferlist">NdisAllocateNetBufferAndNetBufferList</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisallocatenetbufferlist">NdisAllocateNetBufferList</a></p>
<p><a href="ndisallocatenetbufferlistpool" title="NDIS_EXPORTED_ROUTINE NDIS_HANDLE NdisAllocateNetBufferListPool(&#10;  [in, optional] NDIS_HANDLE                           NdisHandle,&#10;  [in]           NET_BUFFER_LIST_POOL_PARAMETERS const *Parameters&#10;);">NdisAllocateNetBufferListPool</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisallocatenetbufferpool">NdisAllocateNetBufferPool</a></p>
<p><a href="ndisallocatespinlock" title="VOID NdisAllocateSpinLock(&#10;  [out] PNDIS_SPIN_LOCK SpinLock&#10;);">NdisAllocateSpinLock</a></p>
<p><a href="ndisallocatetimerobject" title="NDIS_STATUS NdisAllocateTimerObject(&#10;  [in]  NDIS_HANDLE                 NdisHandle,&#10;  [in]  PNDIS_TIMER_CHARACTERISTICS TimerCharacteristics,&#10;  [out] PNDIS_HANDLE                pTimerObject&#10;);">NdisAllocateTimerObject</a></p>
<p><a href="ndismallocatesharedmemory" title="VOID NdisMAllocateSharedMemory(&#10;  [in]  NDIS_HANDLE            MiniportAdapterHandle,&#10;  [in]  ULONG                  Length,&#10;  [in]  BOOLEAN                Cached,&#10;  [out] PVOID                  *VirtualAddress,&#10;  [out] PNDIS_PHYSICAL_ADDRESS PhysicalAddress&#10;);">NdisMAllocateSharedMemory</a></p>
<p><a href="ndismderegisterinterruptex" title="VOID NdisMDeregisterInterruptEx(&#10;  [in] NDIS_HANDLE NdisInterruptHandle&#10;);">NdisMDeregisterInterruptEx</a></p>
<p><a href="ndismgetbusdata" title="ULONG NdisMGetBusData(&#10;        NDIS_HANDLE NdisMiniportHandle,&#10;  [in]  ULONG       WhichSpace,&#10;  [in]  ULONG       Offset,&#10;  [out] PVOID       Buffer,&#10;  [in]  ULONG       Length&#10;);">NdisMGetBusData</a></p>
<p><a href="ndismindicatereceivenetbufferlists" title="VOID NdisMIndicateReceiveNetBufferLists(&#10;  [in] NDIS_HANDLE      MiniportAdapterHandle,&#10;       PNET_BUFFER_LIST NetBufferList,&#10;  [in] NDIS_PORT_NUMBER PortNumber,&#10;  [in] ULONG            NumberOfNetBufferLists,&#10;  [in] ULONG            ReceiveFlags&#10;);">NdisMIndicateReceiveNetBufferLists</a></p>
<p><strong><a href="ndismmapiospace" title="NDIS_STATUS NdisMMapIoSpace(&#10;  [out] PVOID                 *VirtualAddress,&#10;  [in]  NDIS_HANDLE           MiniportAdapterHandle,&#10;  [in]  NDIS_PHYSICAL_ADDRESS PhysicalAddress,&#10;  [in]  UINT                  Length&#10;);">NdisMMapIoSpace</a></strong></p>
<p><a href="ndismregisterdmachannel" title="NDIS_STATUS NdisMRegisterDmaChannel(&#10;  [out] PNDIS_HANDLE          MiniportDmaHandle,&#10;  [in]  NDIS_HANDLE           MiniportAdapterHandle,&#10;  [in]  UINT                  DmaChannel,&#10;  [in]  BOOLEAN               Dma32BitAddresses,&#10;  [in]  PNDIS_DMA_DESCRIPTION DmaDescription,&#10;  [in]  ULONG                 MaximumLength&#10;);">NdisMRegisterDmaChannel</a></p>
<p><a href="ndismregisterinterruptex" title="NDIS_STATUS NdisMRegisterInterruptEx(&#10;  [in]  NDIS_HANDLE                              MiniportAdapterHandle,&#10;  [in]  NDIS_HANDLE                              MiniportInterruptContext,&#10;  [in]  PNDIS_MINIPORT_INTERRUPT_CHARACTERISTICS MiniportInterruptCharacteristics,&#10;  [out] PNDIS_HANDLE                             NdisInterruptHandle&#10;);">NdisMRegisterInterruptEx</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/ndis-ndismregisterioportrange">NdisMRegisterIoPortRange</a></p>
<p><a href="ndismregisterminiportdriver" title="NDIS_STATUS NdisMRegisterMiniportDriver(&#10;  [in]           PDRIVER_OBJECT                        DriverObject,&#10;  [in]           PUNICODE_STRING                       RegistryPath,&#10;  [in, optional] NDIS_HANDLE                           MiniportDriverContext,&#10;  [in]           PNDIS_MINIPORT_DRIVER_CHARACTERISTICS MiniportDriverCharacteristics,&#10;  [out]          PNDIS_HANDLE                          NdisMiniportDriverHandle&#10;);">NdisMRegisterMiniportDriver</a></p>
<p><a href="ndismregisterscattergatherdma" title="NDIS_STATUS NdisMRegisterScatterGatherDma(&#10;  [in]      NDIS_HANDLE              MiniportAdapterHandle,&#10;  [in, out] PNDIS_SG_DMA_DESCRIPTION DmaDescription,&#10;  [out]     PNDIS_HANDLE             NdisMiniportDmaHandle&#10;);">NdisMRegisterScatterGatherDma</a></p>
<p><a href="ndismsetminiportattributes" title="NDIS_STATUS NdisMSetMiniportAttributes(&#10;       NDIS_HANDLE                       NdisMiniportHandle,&#10;  [in] PNDIS_MINIPORT_ADAPTER_ATTRIBUTES MiniportAttributes&#10;);">NdisMSetMiniportAttributes</a></p>
<p><a href="ndismsleep" title="VOID NdisMSleep(&#10;  [in] ULONG MicrosecondsToSleep&#10;);">NdisMSleep</a></p>
<p><a href="ndismsynchronizewithinterruptex" title="BOOLEAN NdisMSynchronizeWithInterruptEx(&#10;  [in] NDIS_HANDLE                            NdisInterruptHandle,&#10;  [in] ULONG                                  MessageId,&#10;  [in] MINIPORT_SYNCHRONIZE_INTERRUPT_HANDLER SynchronizeFunction,&#10;  [in] PVOID                                  SynchronizeFunction,&#10;  [in] PVOID                                  SynchronizeContext&#10;);">NdisMSynchronizeWithInterruptEx</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/ndis-ndisopenconfigurationex">NdisOpenConfigurationEx</a></p>
<p><a href="ndisreadconfiguration" title="VOID NdisReadConfiguration(&#10;  [out] PNDIS_STATUS                  Status,&#10;  [out] PNDIS_CONFIGURATION_PARAMETER *ParameterValue,&#10;  [in]  NDIS_HANDLE                   ConfigurationHandle,&#10;  [in]  PNDIS_STRING                  Keyword,&#10;  [in]  NDIS_PARAMETER_TYPE           ParameterType&#10;);">NdisReadConfiguration</a></p>
<p><a href="ndissettimerobject" title="BOOLEAN NdisSetTimerObject(&#10;  [in]           NDIS_HANDLE   TimerObject,&#10;  [in]           LARGE_INTEGER DueTime,&#10;  [in, optional] LONG          MillisecondsPeriod,&#10;  [in, optional] PVOID         FunctionContext&#10;);">NdisSetTimerObject</a></p>
<p><a href="ndiswaitevent" title="BOOLEAN NdisWaitEvent(&#10;  [in] PNDIS_EVENT Event,&#10;  [in] UINT        MsToWait&#10;);">NdisWaitEvent</a></p>
<p><a href="ndiswriteerrorlogentry" title="VOID NdisWriteErrorLogEntry(&#10;  [in] NDIS_HANDLE     NdisAdapterHandle,&#10;  [in] NDIS_ERROR_CODE ErrorCode,&#10;  [in] ULONG           NumberOfErrorValues,&#10;       ...             &#10;);">NdisWriteErrorLogEntry</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-ndis_timer_function">NetTimerCallback</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_bind_adapter_ex">ProtocolBindAdapterEx</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ndis/nc-ndis-miniport_initialize.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
