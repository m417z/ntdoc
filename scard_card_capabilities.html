<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="SCARD_CARD_CAPABILITIES - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>SCARD_CARD_CAPABILITIES - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            SCARD_CARD_CAPABILITIES - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// smclib.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _SCARD_CARD_CAPABILITIES {
  BOOLEAN                InversConvention;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                  etu;
  struct {
    <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> Buffer[64];
    <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> Length;
  } ATR;
  struct {
    <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> Buffer[16];
    <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> Length;
  } HistoricalChars;
  <a href="clock_rate_conversion" title="typedef struct _CLOCK_RATE_CONVERSION {&#10;  ULONG F;&#10;  ULONG fs;&#10;} CLOCK_RATE_CONVERSION, *PCLOCK_RATE_CONVERSION;">PCLOCK_RATE_CONVERSION</a> ClockRateConversion;
  PBIT_RATE_ADJUSTMENT   BitRateAdjustment;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>                  Fl;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>                  Dl;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>                  II;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>                  P;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>                  N;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                  GT;
  struct {
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> Supported;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> Selected;
  } Protocol;
  struct {
    <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> WI;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> WT;
  } T0;
  struct {
    <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> IFSC;
    <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> CWI;
    <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> BWI;
    <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> EDC;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> CWT;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> BWT;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> BGT;
  } T1;
  <a href="pts_data" title="typedef struct _PTS_DATA {&#10;  UCHAR Type;&#10;  UCHAR Fl;&#10;  UCHAR Dl;&#10;  ULONG CLKFrequency;&#10;  ULONG DataRate;&#10;  UCHAR StopBits;&#10;} PTS_DATA, *PPTS_DATA;">PTS_DATA</a>               PtsData;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>                  Reserved[100 - sizeof(<a href="pts_data" title="typedef struct _PTS_DATA {&#10;  UCHAR Type;&#10;  UCHAR Fl;&#10;  UCHAR Dl;&#10;  ULONG CLKFrequency;&#10;  ULONG DataRate;&#10;  UCHAR StopBits;&#10;} PTS_DATA, *PPTS_DATA;">PTS_DATA</a>)];
} SCARD_CARD_CAPABILITIES, *PSCARD_CARD_CAPABILITIES;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/smclib/ns-smclib-_scard_card_capabilities">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/scard_card_capabilities.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-smclib-_scard_card_capabilities)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_scard_card_capabilities-structure">_SCARD_CARD_CAPABILITIES structure</h1>

<h2 id="description">Description</h2>

<p>The SCARD_CARD_CAPABILITIES structure declaration defines the data that is stored in the CardCapabilites member of the <a href="smartcard_extension" title="typedef struct _SMARTCARD_EXTENSION {&#10;  ULONG                     Version;&#10;  VENDOR_ATTR               VendorAttr;&#10;  NTSTATUS(                 *ReaderFunction[16];&#10;  SCARD_CARD_CAPABILITIES   CardCapabilities;&#10;  ULONG                     LastError;&#10;  struct {&#10;    PULONG Information;&#10;    PUCHAR RequestBuffer;&#10;    ULONG  RequestBufferLength;&#10;    PUCHAR ReplyBuffer;&#10;    ULONG  ReplyBufferLength;&#10;  } IoRequest;&#10;  ULONG                     MajorIoControlCode;&#10;  ULONG                     MinorIoControlCode;&#10;  POS_DEP_DATA              OsData;&#10;  SCARD_READER_CAPABILITIES ReaderCapabilities;&#10;  PREADER_EXTENSION         ReaderExtension;&#10;  SMARTCARD_REPLY           SmartcardReply;&#10;  SMARTCARD_REQUEST         SmartcardRequest;&#10;...">SMARTCARD_EXTENSION</a> structure and holds all information that is specific to the particular smart card that is currently used.</p>

<h2 id="members">Members</h2>

<h3 id="inversconvention"><code>InversConvention</code></h3>

<p>Contains a flag to indicate that the current smart card uses the inverse convention.</p>

<h3 id="etu"><code>etu</code></h3>

<p>Contains the elementary time unit (ETU). The ETU indicates the space of transmission time occupied by a single bit of data.</p>

<h3 id="atr"><code>ATR</code></h3>

<p>A structure with the following members:</p>

<h3 id="atrbuffer"><code>ATR.Buffer</code></h3>

<p>A pointer to the buffer that receives the answer-to-reset (ATR) information that the smart card provides to the smart card reader after a warm or cold reset.</p>

<h3 id="atrlength"><code>ATR.Length</code></h3>

<p>Contains the length, in bytes, of the ATR.</p>

<h3 id="historicalchars"><code>HistoricalChars</code></h3>

<p>A structure with the following members:</p>

<h3 id="historicalcharsbuffer"><code>HistoricalChars.Buffer</code></h3>

<p>Contains the historical characters. Historical characters designate general information, such as the smart card manufacturer, the chip inserted in the smart card, the masked ROM in the chip, and the life cycle of the smart card. For more information about historical characters, see the <em>ISO 7816-3 Specification</em> and part 4 of the <em>ISO 7816 Specification</em>. (This resource may not be available in some languages</p>

<p>and countries.)</p>

<h3 id="historicalcharslength"><code>HistoricalChars.Length</code></h3>

<p>Indicates the length, in bytes, of the historical character information.</p>

<h3 id="clockrateconversion"><code>ClockRateConversion</code></h3>

<p>Contains the clock conversion rate table. Using the clock rate conversion factor, F1, as an index in this array yields the maximum frequency that is allowed. For more information about clock conversion rate, see the <em>ISO 7816-3 specification</em>. (This resource may not be available in some languages</p>

<p>and countries.)</p>

<h3 id="bitrateadjustment"><code>BitRateAdjustment</code></h3>

<p>Contains the bit rate adjustment table. Using the bit rate adjustment factor, D1, as an index into this array yields the maximum bit rate that is allowed. t rate. For more information about the bit rate adjustment factor, see the <em>ISO 7816-3 specification</em>. (This resource may not be available in some languages</p>

<p>and countries.)</p>

<h3 id="fl"><code>Fl</code></h3>

<p>Contains the clock rate conversion. This factor is used as an index into a table of maximum operating frequencies. When the smart card is reset, the smart card driver library uses this value to calculate a new clock frequency.</p>

<h3 id="dl"><code>Dl</code></h3>

<p>Contains the bit rate adjustment. When the smart card is reset, the smart card driver library uses this value to calculate a new data bit rate.</p>

<h3 id="ii"><code>II</code></h3>

<p>Contains the maximum programming current.</p>

<h3 id="p"><code>P</code></h3>

<p>Contains the programming voltage in units of 0.1 volts.</p>

<h3 id="n"><code>N</code></h3>

<p>Contains the extra guard time in units of the ETU. The ETU indicates the space of transmission time occupied by a single bit of data. The guard time is the minimum space of transmission time that separates two consecutive characters.</p>

<h3 id="gt"><code>GT</code></h3>

<p>Contains the guard time, in units of microseconds (including the extra guard time), which is the minimum delay between two consecutive characters.</p>

<h3 id="protocol"><code>Protocol</code></h3>

<p>A structure with the following members:</p>

<h3 id="protocolsupported"><code>Protocol.Supported</code></h3>

<p>Contains a bitmask of the supported protocols.</p>

<h3 id="protocolselected"><code>Protocol.Selected</code></h3>

<p>Contains the protocol that is selected.</p>

<h3 id="t0"><code>T0</code></h3>

<p>A structure with the following members:</p>

<h3 id="t0wi"><code>T0.WI</code></h3>

<p>Contains the work-waiting integer for the T=0 protocol.</p>

<h3 id="t0wt"><code>T0.WT</code></h3>

<p>Contains the work-waiting time, in microseconds, for the T=0 protocol, which is the maximum delay allowed between two consecutive characters.</p>

<h3 id="t1"><code>T1</code></h3>

<p>A structure with the following members:</p>

<h3 id="t1ifsc"><code>T1.IFSC</code></h3>

<p>Contains the size, in bytes, of the card's information field.</p>

<h3 id="t1cwi"><code>T1.CWI</code></h3>

<p>Contains the character-waiting integer.</p>

<h3 id="t1bwi"><code>T1.BWI</code></h3>

<p>Contains the block-waiting integer.</p>

<h3 id="t1edc"><code>T1.EDC</code></h3>

<p>Contains the error detection code.</p>

<h3 id="t1cwt"><code>T1.CWT</code></h3>

<p>Contains the character-waiting time, in microseconds, for the T=1 protocol, which is the maximum delay that is allowed between two consecutive characters.s.</p>

<h3 id="t1bwt"><code>T1.BWT</code></h3>

<p>Contains the block-waiting time, in microseconds, for the T=1 protocol. This is the maximum delay between the end of a block and the start of the next block that is sent in the opposite direction.</p>

<h3 id="t1bgt"><code>T1.BGT</code></h3>

<p>Contains the block-guarding time, in microseconds, for the T=1 protocol. This is the minimum delay between the end of a block and the start of the next block that is sent in the opposite direction.</p>

<h3 id="ptsdata"><code>PtsData</code></h3>

<p>Contains a <a href="pts_data" title="typedef struct _PTS_DATA {&#10;  UCHAR Type;&#10;  UCHAR Fl;&#10;  UCHAR Dl;&#10;  ULONG CLKFrequency;&#10;  ULONG DataRate;&#10;  UCHAR StopBits;&#10;} PTS_DATA, *PPTS_DATA;">PTS_DATA</a> structure that holds all the information that is required to perform a protocol type selection (PTS) request for the inserted smart card.art card.</p>

<h3 id="reserved"><code>Reserved</code></h3>

<p>Reserved.</p>

<h2 id="remarks">Remarks</h2>

<p>The SCARD_CARD_CAPABILITIES structure describes the capabilities of the inserted smart card. If the reader driver uses the smart card driver library, <strong>ATR</strong> is the only member that the reader driver should populate. The driver library will automatically update all other fields when it receives an <a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/windows/hardware/drivers/ff548909(v=vs.85)">IOCTL_SMARTCARD_SET_PROTOCOL</a> request.</p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/smclib/ns-smclib-_scard_card_capabilities">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/smclib/ns-smclib-_scard_card_capabilities.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
