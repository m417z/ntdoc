<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="ACX_PEAKMETER_CONFIG - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>ACX_PEAKMETER_CONFIG - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            ACX_PEAKMETER_CONFIG - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// acxelements.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _ACX_PEAKMETER_CONFIG {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                    Size;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                    Id;
  const GUID               *Name;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                    Flags;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                    ChannelsCount;
  <a href="long" title="typedef long LONG;">LONG</a>                     Maximum;
  <a href="long" title="typedef long LONG;">LONG</a>                     Minimum;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                    SteppingDelta;
  <a href="acx_peakmeter_callbacks" title="typedef struct _ACX_PEAKMETER_CALLBACKS {&#10;  ULONG                            Size;&#10;  PFN_ACX_PEAKMETER_RETRIEVE_LEVEL EvtAcxPeakMeterRetrieveLevel;&#10;  PFN_ACX_OBJECT_PROCESS_REQUEST   EvtAcxPeakMeterProcessRequest;&#10;} ACX_PEAKMETER_CALLBACKS, *PACX_PEAKMETER_CALLBACKS;">PACX_PEAKMETER_CALLBACKS</a> Callbacks;
} ACX_PEAKMETER_CONFIG, *PACX_PEAKMETER_CONFIG;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/acxelements/ns-acxelements-acx_peakmeter_config">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/acx_peakmeter_config.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-acxelements-acx_peakmeter_config)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>ACX_PEAKMETER_CONFIG</strong> structure is used to define the ACX peakmeter configuration.</p>

<h2 id="members">Members</h2>

<h3 id="size"><code>Size</code></h3>

<p>The length, in bytes, of this structure.</p>

<h3 id="id"><code>Id</code></h3>

<p>A number that represents the element ID.</p>

<h3 id="name"><code>Name</code></h3>

<p>A pointer to a GUID that represents the name of the element. It defaults to KSAUDFNAME_PEAKMETER if not present.</p>

<h3 id="flags"><code>Flags</code></h3>

<p>ACX peakmeter configuration flags defined by the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/acxelements/ne-acxelements-acx_peakmeter_config_flags">ACX_PEAKMETER_CONFIG_FLAGS enum</a>.</p>

<p>No flag bits are currently defined. Set this member to zero - AcxPeakMeterConfigNoFlags.</p>

<h3 id="channelscount"><code>ChannelsCount</code></h3>

<p>The number of channels. This is a one based count.</p>

<h3 id="maximum"><code>Maximum</code></h3>

<p>The maximum value for the peakmeter. SignedMaximum must be set to <a href="long_max" title="#define LONG_MAX 2147483647L">LONG_MAX</a>.</p>

<h3 id="minimum"><code>Minimum</code></h3>

<p>The minimum value for the peakmeter. SignedMinimum must be set to <a href="long_min" title="#define LONG_MIN (-2147483647L - 1)">LONG_MIN</a>.</p>

<h3 id="steppingdelta"><code>SteppingDelta</code></h3>

<p>The stepping value for the peakmeter.</p>

<h3 id="callbacks"><code>Callbacks</code></h3>

<p>The <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/acxelements/ns-acxelements-acx_peakmeter_callbacks">ACX_PEAKMETER_CALLBACKS structure</a> that identifies the driver callbacks for ACX audio engine streaming operations.</p>

<h2 id="remarks">Remarks</h2>

<p>For example, you have a waveform with negative and positive peaks at -1 and +1 respectively (on a scale that goes from -1 to +1), then a peak meter value of <a href="long_max" title="#define LONG_MAX 2147483647L">LONG_MAX</a> accurately reports the maximum waveform value for a given time window. Conversely, a peak meter value of zero (0) should be used to report silence, where all the waveformâ€™s values are zero. But in the case of a waveform whose peak values are between zero (0) and <a href="long_max" title="#define LONG_MAX 2147483647L">LONG_MAX</a>, the reported waveform values would be linearly reduced from the originals.</p>

<p>Therefore, in the case of the waveform that swings between -0.5 and +0.5 (on a scale that goes from -1 to +1), the peak meter value must be set to <a href="long_max" title="#define LONG_MAX 2147483647L">LONG_MAX</a>/2.</p>

<p>The driver handles this property request synchronously. If the request succeeds, it resets the peakmeter, which initializes the accumulated peak value to zero. If the request does not succeed, the peakmeter is not changed.</p>

<p>See also <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/audio/ksproperty-audio-peakmeter2">KSPROPERTY_AUDIO_PEAKMETER2</a>.</p>

<h3 id="example">Example</h3>

<p>Example usage is shown below.</p>

<div class="codehilite">
<pre><span></span><code><span class="c1">// Default peak meter settings</span>
<span class="cp">#define PEAKMETER_STEPPING_DELTA    0x1000</span>
<span class="cp">#define PEAKMETER_MAXIMUM           <a href="long_max" title="#define LONG_MAX 2147483647L">LONG_MAX</a></span>
<span class="cp">#define PEAKMETER_MINIMUM           <a href="long_min" title="#define LONG_MIN (-2147483647L - 1)">LONG_MIN</a></span>

<span class="w">    </span><span class="n">ACX_PEAKMETER_CONFIG</span><span class="w">            </span><span class="n">peakmeterCfg</span><span class="p">;</span>

<span class="w">        </span><span class="n"><a href="acx_peakmeter_callbacks" title="typedef struct _ACX_PEAKMETER_CALLBACKS {&#10;  ULONG                            Size;&#10;  PFN_ACX_PEAKMETER_RETRIEVE_LEVEL EvtAcxPeakMeterRetrieveLevel;&#10;  PFN_ACX_OBJECT_PROCESS_REQUEST   EvtAcxPeakMeterProcessRequest;&#10;} ACX_PEAKMETER_CALLBACKS, *PACX_PEAKMETER_CALLBACKS;">ACX_PEAKMETER_CALLBACKS</a></span><span class="w"> </span><span class="n">peakmeterCallbacks</span><span class="p">;</span>
<span class="w">        </span><span class="n"><a href="acx_peakmeter_callbacks_init" title="VOID ACX_PEAKMETER_CALLBACKS_INIT(&#10;  PACX_PEAKMETER_CALLBACKS Callbacks&#10;);">ACX_PEAKMETER_CALLBACKS_INIT</a></span><span class="p">(</span><span class="o">&amp;</span><span class="n">peakmeterCallbacks</span><span class="p">);</span>
<span class="w">        </span><span class="n">peakmeterCallbacks</span><span class="p">.</span><span class="n">EvtAcxPeakMeterRetrieveLevel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CodecR_EvtPeakMeterRetrieveLevelCallback</span><span class="p">;</span>

<span class="w">        </span><span class="n">ACX_PEAKMETER_CONFIG</span><span class="w"> </span><span class="n">peakmeterCfg</span><span class="p">;</span>
<span class="w">        </span><span class="n"><a href="acx_peakmeter_config_init" title="void ACX_PEAKMETER_CONFIG_INIT(&#10;  cfg&#10;);">ACX_PEAKMETER_CONFIG_INIT</a></span><span class="p">(</span><span class="o">&amp;</span><span class="n">peakmeterCfg</span><span class="p">);</span>
<span class="w">        </span><span class="n">peakmeterCfg</span><span class="p">.</span><span class="n">ChannelsCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MAX_CHANNELS</span><span class="p">;</span>
<span class="w">        </span><span class="n">peakmeterCfg</span><span class="p">.</span><span class="n">Minimum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PEAKMETER_MINIMUM</span><span class="p">;</span>
<span class="w">        </span><span class="n">peakmeterCfg</span><span class="p">.</span><span class="n">Maximum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PEAKMETER_MAXIMUM</span><span class="p">;</span>
<span class="w">        </span><span class="n">peakmeterCfg</span><span class="p">.</span><span class="n">SteppingDelta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PEAKMETER_STEPPING_DELTA</span><span class="p">;</span>
<span class="w">        </span><span class="n">peakmeterCfg</span><span class="p">.</span><span class="n">Callbacks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">peakmeterCallbacks</span><span class="p">;</span>
</code></pre>
</div>

<h3 id="acx-requirements">ACX requirements</h3>

<p><strong>Minimum ACX version:</strong> 1.0</p>

<p>For more information about ACX versions, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/audio/acx-version-overview">ACX version overview</a>.</p>

<h2 id="see-also">See also</h2>

<ul>
<li><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/acxelements/">acxelements.h header</a></li>
</ul>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/acxelements/ns-acxelements-acx_peakmeter_config">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/acxelements/ns-acxelements-acx_peakmeter_config.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
