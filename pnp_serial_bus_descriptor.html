<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="PNP_SERIAL_BUS_DESCRIPTOR - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>PNP_SERIAL_BUS_DESCRIPTOR - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            PNP_SERIAL_BUS_DESCRIPTOR - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// reshub.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _PNP_SERIAL_BUS_DESCRIPTOR {
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>  Tag;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> Length;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>  RevisionId;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>  ResourceSourceIndex;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>  SerialBusType;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>  GeneralFlags;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> TypeSpecificFlags;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>  TypeSpecificRevisionId;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> TypeDataLength;
} PNP_SERIAL_BUS_DESCRIPTOR, *PPNP_SERIAL_BUS_DESCRIPTOR;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/reshub/ns-reshub-_pnp_serial_bus_descriptor">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/pnp_serial_bus_descriptor.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-reshub-_pnp_serial_bus_descriptor)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_pnp_serial_bus_descriptor-structure">_PNP_SERIAL_BUS_DESCRIPTOR structure</h1>

<h2 id="description">Description</h2>

<p>The <strong>PNP_SERIAL_BUS_DESCRIPTOR</strong> structure describes the physical connection of a target device to a serial bus (I2C, SPI, or UART).</p>

<h2 id="members">Members</h2>

<h3 id="tag"><code>Tag</code></h3>

<p>The serial bus type. This member is set to 0x8e for a serial bus (I2C, SPI, or UART) connection. For more information, see the description of the serial bus connection descriptor in the <a rel="noopener" target="_blank" href="https://uefi.org/specifications">ACPI 5.0 specification</a>.</p>

<h3 id="length"><code>Length</code></h3>

<p>The length, in bytes, of the serial bus connection descriptor. To be consistent with the ACPI 5.0 specification, the byte count in the <strong>Length</strong> member of the <strong>PNP_SERIAL_BUS_DESCRIPTOR</strong> structure equals the structure size, minus the three bytes in the <strong>Tag</strong> and <strong>Length</strong> members at the start of the structure, plus the number of bytes of bus-type-specific data and Resource Source string that follow the structure. The Resource Source string, which is a required field, has a minimum size of two bytes (for a one-character Resource Source name and a terminating null). Thus, the minimum valid <strong>Length</strong> value is 11. For more information, see the ACPI 5.0 specification.</p>

<h3 id="revisionid"><code>RevisionId</code></h3>

<p>The revision ID of the serial bus connection descriptor. This member is set to the SERIAL_BUS_DESCRIPTOR_REVISION constant, which is defined in the Reshub.h header file.</p>

<h3 id="resourcesourceindex"><code>ResourceSourceIndex</code></h3>

<p>Reserved for future use. This member is unused and set to zero.</p>

<h3 id="serialbustype"><code>SerialBusType</code></h3>

<p>The serial bus type. This member is set to 1 (for I2C), 2 (for SPI), or 3 (for UART). Other values are either reserved for future use, or are defined by the hardware vendor. For more information, see the ACPI 5.0 specification.</p>

<h3 id="generalflags"><code>GeneralFlags</code></h3>

<p>Flags that are common to all serial bus types. Bit 0 is the subordinate-mode flag. If this bit is set to 1, the communication of this connection is initiated by the bus controller; otherwise, the communication is initiated by the target device. Bit 1 is the consumer/producer flag, and is always set to 1. No other flag bits are currently defined. For more information, see the ACPI 5.0 specification.</p>

<h3 id="typespecificflags"><code>TypeSpecificFlags</code></h3>

<p>Flags that are specific to the serial bus type. For an I2C bus, bit 0 is set if the connection uses 10-bit addresses; otherwise, the connection uses 7-bit addresses. No other flag bits are currently defined for I2C. For more information, see the ACPI 5.0 specification.</p>

<h3 id="typespecificrevisionid"><code>TypeSpecificRevisionId</code></h3>

<p>The revision ID of the variant of this structure that is used for the serial bus type (I2C, SPI, and UART) that is specified by the <strong>Tag</strong> member. Each serial bus type extends the <strong>PNP_SERIAL_BUS_DESCRIPTOR</strong> structure by adding fields that are specific to the bus type. For more information, see the ACPI 5.0 specification.</p>

<h3 id="typedatalength"><code>TypeDataLength</code></h3>

<p>The length, in bytes, of the bus-type-specific data that follows the <strong>PNP_SERIAL_BUS_DESCRIPTOR</strong> structure. This length value includes the data between the end of the <strong>TypeDataLength</strong> member and the start of the Resource Source string, but does not include the Resource Source string. For more information, see the ACPI 5.0 specification.</p>

<h2 id="syntax">Syntax</h2>

<p><!-- CODE_MARKER --></p>

<div class="codehilite">
<pre><span></span><code><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">_PNP_SERIAL_BUS_DESCRIPTOR</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n"><a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a></span><span class="w">  </span><span class="n">Tag</span><span class="p">;</span>
<span class="w">  </span><span class="n"><a href="ushort" title="typedef unsigned short USHORT;">USHORT</a></span><span class="w"> </span><span class="n">Length</span><span class="p">;</span>
<span class="w">  </span><span class="n"><a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a></span><span class="w">  </span><span class="n">RevisionId</span><span class="p">;</span>
<span class="w">  </span><span class="n"><a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a></span><span class="w">  </span><span class="n">ResourceSourceIndex</span><span class="p">;</span>
<span class="w">  </span><span class="n"><a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a></span><span class="w">  </span><span class="n">SerialBusType</span><span class="p">;</span>
<span class="w">  </span><span class="n"><a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a></span><span class="w">  </span><span class="n">GeneralFlags</span><span class="p">;</span>
<span class="w">  </span><span class="n"><a href="ushort" title="typedef unsigned short USHORT;">USHORT</a></span><span class="w"> </span><span class="n">TypeSpecificFlags</span><span class="p">;</span>
<span class="w">  </span><span class="n"><a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a></span><span class="w">  </span><span class="n">TypeSpecificRevisionId</span><span class="p">;</span>
<span class="w">  </span><span class="n"><a href="ushort" title="typedef unsigned short USHORT;">USHORT</a></span><span class="w"> </span><span class="n">TypeDataLength</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">PNP_SERIAL_BUS_DESCRIPTOR</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">PPNP_SERIAL_BUS_DESCRIPTOR</span><span class="p">;</span>
</code></pre>
</div>

<h2 id="remarks">Remarks</h2>

<p>This structure defines the data fields in a serial bus connection descriptor, as described in section 6.4.3.8.2 of the ACPI 5.0 specification. This descriptor describes the bus connection to a target device that is connected to a serial bus (I2C, SPI, or UART).</p>

<p>For example, for a device on an I2C bus, the <strong>PNP_SERIAL_BUS_DESCRIPTOR</strong> structure (and its bus-type-specific extension) specify the bus address of the device, the address mode (7-bit or 10-bit), and the frequency at which to run the bus clock when the device is accessed. For a code example that shows how an I2C controller driver extracts this information from the structure, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/spb/how-to-get-the-connection-settings-for-a-device">How to Get the Connection Settings for a Device</a>.</p>

<p>The <strong>PNP_SERIAL_BUS_DESCRIPTOR</strong> structure definition in the Reshub.h header file is preceded by an include statement for the Pshpack1.h header file, which configures the compiler to pack adjacent structure members to byte boundaries, without intervening gaps. Software can then overlay the packed structure over the memory image of the serial bus connection descriptor to access the individual fields of this descriptor. The <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> members of the structure might not be aligned to even byte boundaries in memory. The bytes in the <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> members are stored in little-endian order for the x86, x64, and ARM processor architectures.</p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/reshub/ns-reshub-_pnp_serial_bus_descriptor">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/reshub/ns-reshub-_pnp_serial_bus_descriptor.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
