<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="LPDDPIXELFORMAT - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>LPDDPIXELFORMAT - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            LPDDPIXELFORMAT - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ksmedia.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _DDPIXELFORMAT {
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwSize;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwFlags;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwFourCC;
  union {
    <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwRGBBitCount;
    <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwYUVBitCount;
    <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwZBufferBitDepth;
    <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwAlphaBitDepth;
  };
  union {
    <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwRBitMask;
    <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwYBitMask;
  };
  union {
    <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwGBitMask;
    <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwUBitMask;
  };
  union {
    <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwBBitMask;
    <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwVBitMask;
  };
  union {
    <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwRGBAlphaBitMask;
    <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwYUVAlphaBitMask;
    <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwRGBZBitMask;
    <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> dwYUVZBitMask;
  };
} DDPIXELFORMAT, *LPDDPIXELFORMAT;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ksmedia/ns-ksmedia-_ddpixelformat">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/lpddpixelformat.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ksmedia-_ddpixelformat)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>DDPIXELFORMAT</strong> structure describes the pixel format of a <strong>DirectDrawSurface</strong> object.</p>

<h2 id="members">Members</h2>

<h3 id="dwsize"><code>dwSize</code></h3>

<p>Specifies the size in bytes of the DDPIXELFORMAT structure. The driver must initialize this member before the structure is used.</p>

<p><strong>DirectX 9.0 and later versions only.</strong> Specifies, on input, the version of the Microsoft DirectX runtime being used by the application. This member is set to DD_RUNTIME_VERSION, which is 0x00000900 for DirectX 9.0, in the <strong>format</strong> member of the <a href="dd_getformatdata" title="typedef struct _DD_GETFORMATDATA {&#10;  DD_GETDRIVERINFO2DATA gdi2;&#10;  DWORD                 dwFormatIndex;&#10;  DDPIXELFORMAT         format;&#10;} DD_GETFORMATDATA;">DD_GETFORMATDATA</a> structure for a D3DGDI2_TYPE_GETFORMAT query.</p>

<h3 id="dwflags"><code>dwFlags</code></h3>

<p>Indicates a set of flags that specify optional control flags. This member is a bitwise OR of any of the following values:</p>

<table>
<thead>
<tr>
  <th>Flag</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td>DDPF_ALPHA</td>
  <td>The pixel format describes an alpha-only surface.</td>
</tr>
<tr>
  <td>DDPF_ALPHAPIXELS</td>
  <td>The surface has alpha channel information in the pixel format.</td>
</tr>
<tr>
  <td>DDPF_ALPHAPREMULT</td>
  <td>The color components in the pixel are premultiplied by the alpha value in the pixel. If this flag is set, the DDPF_ALPHAPIXELS flag must also be set. If this flag is not set but the DDPF_ALPHAPIXELS flag is set, the color components in the pixel format are not premultiplied by alpha. In this case, the color components must be multiplied by the alpha value at the time that an alpha-blending operation is performed.</td>
</tr>
<tr>
  <td>DDPF_BUMPDUDV</td>
  <td>Bump map dUdV data in the pixel format is valid.</td>
</tr>
<tr>
  <td>DDPF_BUMPHEIGHT</td>
  <td>Bump map height data in the pixel format is valid.</td>
</tr>
<tr>
  <td>DDPF_COMPRESSED</td>
  <td>The surface accepts pixel data in the specified format and compresses it during the write operation.</td>
</tr>
<tr>
  <td>DDPF_D3DFORMAT</td>
  <td>Indicates a DirectX 8.0 and later format capability entry in the texture format list. This flag is not exposed to applications.</td>
</tr>
<tr>
  <td>DDPF_FOURCC</td>
  <td>The <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/directshow/fourcc-codes">FOURCC</a> code is valid.</td>
</tr>
<tr>
  <td>DDPF_LUMINANCE</td>
  <td>Luminance data in the pixel format is valid. Use this flag for luminance-only or luminance-plus-alpha surfaces; the bit depth is then specified in the <strong>dwLuminanceBitCount</strong> member.</td>
</tr>
<tr>
  <td>DDPF_LUMINANCEPIXELS</td>
  <td>Luminance data in the pixel format is valid. Use this flag when hanging luminance off, for example, bumpmap surfaces. The bitmask for the luminance portion of the pixel is then specified in the <strong>dwBumpLuminanceBitMask</strong> member.</td>
</tr>
<tr>
  <td>DDPF_NOVEL_TEXTURE_FORMAT</td>
  <td>Indicates a new surface format that the runtime might not expose to all applications.</td>
</tr>
<tr>
  <td>DDPF_PALETTEINDEXED1</td>
  <td>The surface is 1-bit color indexed.</td>
</tr>
<tr>
  <td>DDPF_PALETTEINDEXED2</td>
  <td>The surface is 2-bit color indexed.</td>
</tr>
<tr>
  <td>DDPF_PALETTEINDEXED4</td>
  <td>The surface is 4-bit color indexed.</td>
</tr>
<tr>
  <td>DDPF_PALETTEINDEXED8</td>
  <td>The surface is 8-bit color indexed.</td>
</tr>
<tr>
  <td>DDPF_PALETTEINDEXEDTO8</td>
  <td>The surface is 1-, 2-, or 4-bit color indexed to an 8-bit palette.</td>
</tr>
<tr>
  <td>DDPF_RGB</td>
  <td>The RGB data in the pixel format structure is valid.</td>
</tr>
<tr>
  <td>DDPF_RGBTOYUV</td>
  <td>The surface accepts RGB data and translates it during the write operation to YUV data. The format of the data to be written is contained in the pixel format structure. The DDPF_RGB flag is set.</td>
</tr>
<tr>
  <td>DDPF_STENCILBUFFER</td>
  <td>The surface encodes stencil and depth information in each pixel of the z-buffer.</td>
</tr>
<tr>
  <td>DDPF_YUV</td>
  <td>The YUV data in the pixel format structure is valid.</td>
</tr>
<tr>
  <td>DDPF_ZBUFFER</td>
  <td>The pixel format describes a z-buffer-only surface.</td>
</tr>
<tr>
  <td>DDPF_ZPIXELS</td>
  <td>The surface is in RGBZ format.</td>
</tr>
</tbody>
</table>

<h3 id="dwfourcc"><code>dwFourCC</code></h3>

<p>Specifies a surface format code including any of the codes in the D3DFORMAT enumerated type. Some <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/directshow/fourcc-codes">FOURCC</a> codes are part of D3DFORMAT. For more information about D3DFORMAT, see the SDK documentation. Hardware vendors can also define and supply format codes that are specific to their hardware.</p>

<h3 id="dwrgbbitcount"><code>dwRGBBitCount</code></h3>

<p>Specifies the number of RGB bits per pixel (4, 8, 16, 24, or 32).</p>

<h3 id="dwyuvbitcount"><code>dwYUVBitCount</code></h3>

<p>Specifies the number of YUV bits per pixel.</p>

<h3 id="dwzbufferbitdepth"><code>dwZBufferBitDepth</code></h3>

<p>Specifies the Z-buffer bit depth (8, 16, 24, or 32 bits).</p>

<h3 id="dwalphabitdepth"><code>dwAlphaBitDepth</code></h3>

<p>Specifies the Alpha channel bit depth.</p>

<h3 id="dwrbitmask"><code>dwRBitMask</code></h3>

<p>Specifies the mask for red bits.</p>

<h3 id="dwybitmask"><code>dwYBitMask</code></h3>

<p>Specifies the mask for Y bits.</p>

<h3 id="dwgbitmask"><code>dwGBitMask</code></h3>

<p>Specifies the mask for green bits.</p>

<h3 id="dwubitmask"><code>dwUBitMask</code></h3>

<p>Specifies the mask for U bits.</p>

<h3 id="dwbbitmask"><code>dwBBitMask</code></h3>

<p>Specifies the mask for blue bits.</p>

<h3 id="dwvbitmask"><code>dwVBitMask</code></h3>

<p>Specifies the mask for V bits.</p>

<h3 id="dwrgbalphabitmask"><code>dwRGBAlphaBitMask</code></h3>

<p>Mask for alpha channel.</p>

<h3 id="dwyuvalphabitmask"><code>dwYUVAlphaBitMask</code></h3>

<p>Mask for alpha channel.</p>

<h3 id="dwrgbzbitmask"><code>dwRGBZBitMask</code></h3>

<p>Mask for Z channel.</p>

<h3 id="dwyuvzbitmask"><code>dwYUVZBitMask</code></h3>

<p>Mask for Z channel.</p>

<h2 id="remarks">Remarks</h2>

<p>The DirectX 8.0 and later runtime imposes the following rules on the operation (op) list:</p>

<ul>
<li><p>Only one Endian-ness (big or little) for any DS format is allowed, for example D15S1 or S1D15, not both independent of other bits.</p></li>
<li><p>A list should only include D3DFORMAT_OP_DISPLAYMODE for exactly one 16bpp format (for example it should not enumerate 5:5:5 and 5:6:5).</p></li>
<li><p>A list should not contain any alpha formats with D3DFORMAT_OP_DISPLAYMODE or D3DFORMAT_OP_3DACCELLERATION set.</p></li>
<li><p>The D3DFORMAT_OP_3DACCELLERATION flag can only be set when the D3DFORMAT_OP_DISPLAYMODE flag is also set.</p></li>
</ul>

<p>If the driver supports a lockable D16, it should report D3DFMT_D16_LOCKABLE in the op list; otherwise, it should report D3DFMT_D16.</p>

<p>Drivers supporting multisampling must fill in the <strong>MultiSampleCaps</strong> in the Depth/Stencil formats for which multisampling can be supported. This allows the runtime to detect if a driver supports multisampling for combinations of render target and Z buffer formats. For additional information about the restrictions related to stretch blt multisampling, see the description of D3DPRASTERCAPS_STRETCHBLTMULTISAMPLE cap in the rastercaps contained in the D3DCAPS8 structure in the SDK documentation.</p>

<p>The enumerated type D3DMULTISAMPLE_TYPE defined in <em>d3d8types.h</em> is used when setting the bits in <strong>wFlipMSTypes</strong> and <strong>wBltMSTypes</strong>. To specify support for a specific number of samples per pixel, simply logically shift 1 by the appropriate value from the D3DMULTISAMPLE_TYPE enumerated type less 1 and OR this into the appropriate field (<strong>wFlipMSTypes</strong> and <strong>wBltMSTypes</strong>).</p>

<p>For example, if the driver supports both two and four samples per pixel when flipping (fullscreen mode) and four samples per pixel when blitting (windowed mode) on X8R8G8B8 surface the following entry would be reported in the surface format list.</p>

<p><!-- CODE_MARKER --></p>

<div class="codehilite">
<pre><span></span><code><span class="n">DDPIXELFORMAT</span><span class="w"> </span><span class="n">ddpf</span><span class="p">;</span>
<span class="n">ZeroMemory</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ddpf</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">ddpf</span><span class="p">));</span>
<span class="n">ddpf</span><span class="p">.</span><span class="n">dwSize</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">DDPIXELFORMAT</span><span class="p">);</span>
<span class="n">ddpf</span><span class="p">.</span><span class="n">dwFlags</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="n">DDPF_D3DFORMAT</span><span class="p">;</span>
<span class="n">ddpf</span><span class="p">.</span><span class="n">dwFourCC</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="n">D3DFMT_X8R8G8B8</span><span class="p">;</span>
<span class="n">ddpf</span><span class="p">.</span><span class="n">dwOperations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">D3DFORMAT_OP_DISPLAYMODE</span><span class="w"> </span><span class="o">|</span>
<span class="w">                    </span><span class="n">D3DFORMAT_OP_3DACCELERATION</span><span class="p">;</span>
<span class="n">ddpf</span><span class="p">.</span><span class="n">MultiSampleCaps</span><span class="p">.</span><span class="n">wFlipMSTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">D3DMULTISAMPLE_4_SAMPLES</span><span class="w"> </span><span class="n">âˆ</span><span class="err">&#39;</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">                                  </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">D3DMULTISAMPLE_2_SAMPLES</span><span class="w"> </span><span class="n">âˆ</span><span class="err">&#39;</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<span class="n">ddpf</span><span class="p">.</span><span class="n">MultiSampleCaps</span><span class="p">.</span><span class="n">wBltMSTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">D3DMULTISAMPLE_4_SAMPLES</span><span class="w"> </span><span class="n">âˆ</span><span class="err">&#39;</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
</code></pre>
</div>

<p>It is not necessary to specify 1 &lt;&lt; (D3DMULTISAMPLE_NONE - 1) when reporting formats. It is assumed that any format reported can also be used without multisampling. If the hardware supports multisample rendering with a z-buffer the z-buffer formats reported should also include the supported samples-per-pixels.</p>

<h2 id="see-also">See also</h2>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ksmedia/ns-ksmedia-_ddpixelformat">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ksmedia/ns-ksmedia-_ddpixelformat.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
