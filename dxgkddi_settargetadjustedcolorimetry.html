<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DXGKDDI_SETTARGETADJUSTEDCOLORIMETRY - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DXGKDDI_SETTARGETADJUSTEDCOLORIMETRY - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DXGKDDI_SETTARGETADJUSTEDCOLORIMETRY - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// dispmprt.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">DXGKDDI_SETTARGETADJUSTEDCOLORIMETRY DxgkddiSettargetadjustedcolorimetry;

<a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> DxgkddiSettargetadjustedcolorimetry(
  [in] IN_CONST_HANDLE hAdapter,
  [in] IN D3DDDI_VIDEO_PRESENT_TARGET_ID TargetId,
  [in] IN <a href="dxgk_colorimetry" title="typedef struct _DXGK_COLORIMETRY {&#10;  D3DKMDT_2DOFFSET                   RedPoint;&#10;  D3DKMDT_2DOFFSET                   GreenPoint;&#10;  D3DKMDT_2DOFFSET                   BluePoint;&#10;  D3DKMDT_2DOFFSET                   WhitePoint;&#10;  ULONG                              MinLuminance;&#10;  ULONG                              MaxLuminance;&#10;  ULONG                              MaxFullFrameLuminance;&#10;  D3DKMDT_WIRE_FORMAT_AND_PREFERENCE FormatBitDepths;&#10;  DXGK_STANDARD_COLORIMETRY_FLAGS    StandardColorimetryFlags;&#10;} DXGK_COLORIMETRY, *PDXGK_COLORIMETRY;">DXGK_COLORIMETRY</a> AdjustedColorimetry
)
{...}</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_settargetadjustedcolorimetry">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/dxgkddi_settargetadjustedcolorimetry.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-dispmprt-dxgkddi_settargetadjustedcolorimetry)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="dxgkddi_settargetadjustedcolorimetry-callback-function">DXGKDDI_SETTARGETADJUSTEDCOLORIMETRY callback function</h1>

<h2 id="description">Description</h2>

<p>Reports the colorimetry values selected by the OS for a target.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="hadapter-in"><code>hAdapter</code> [in]</h3>

<p>[in] Identifies the adapter.</p>

<h3 id="targetid-in"><code>TargetId</code> [in]</h3>

<p>[in] The identifier of a display adapter's video present target.</p>

<h3 id="adjustedcolorimetry-in"><code>AdjustedColorimetry</code> [in]</h3>

<p>[in] A <a href="dxgk_colorimetry" title="typedef struct _DXGK_COLORIMETRY {&#10;  D3DKMDT_2DOFFSET                   RedPoint;&#10;  D3DKMDT_2DOFFSET                   GreenPoint;&#10;  D3DKMDT_2DOFFSET                   BluePoint;&#10;  D3DKMDT_2DOFFSET                   WhitePoint;&#10;  ULONG                              MinLuminance;&#10;  ULONG                              MaxLuminance;&#10;  ULONG                              MaxFullFrameLuminance;&#10;  D3DKMDT_WIRE_FORMAT_AND_PREFERENCE FormatBitDepths;&#10;  DXGK_STANDARD_COLORIMETRY_FLAGS    StandardColorimetryFlags;&#10;} DXGK_COLORIMETRY, *PDXGK_COLORIMETRY;">DXGK_COLORIMETRY</a> structure containing the colorimetry related fields for the monitor attached to this target after the OS has processed the display device descriptor, all overrides and any adjustments.</p>

<h2 id="return-value">Return value</h2>

<p>The driver returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if it has updates its colorimetry values based on the supplied data.</p>

<p>If the driver fails, the OS will revert to standard SDR values for all parameters, 709 primaries, 2.2 gamma and 8-nit per color component RGB wire format but it will not call the driver as this should never fail. Instead, the driver should also update its internal representation of the display device to be standard SDR.</p>

<h2 id="remarks">Remarks</h2>

<p>Since current display devices have been found to have incomplete and inaccurate descriptions of their colorimetry related parameters, overrides are necessary. The overrides take two forms: driver overrides and OS overrides for invalid parameters. In future OS versions it is expected that additional overrides will be implemented. To keep the driver in sync with the parameters that the OS is using, the OS will call DxgkDdiSetTargetAdjustedColorimetry for each target.</p>

<p>Typically, this call will only be made once after the driver has been queried for overrides and the OS validation has completed but before the display is activated. When the OS has other forms of overrides it is possible that they will arrive after the display is already active. In this case, the OS will still update the driver which is expected to make any necessary updates to its display pipeline within two frames. If necessary, the driver should glitch the display output in order to apply the change.</p>

<p>The FormatBitDepths and StandardColorimetryFlags in the <a href="dxgk_colorimetry" title="typedef struct _DXGK_COLORIMETRY {&#10;  D3DKMDT_2DOFFSET                   RedPoint;&#10;  D3DKMDT_2DOFFSET                   GreenPoint;&#10;  D3DKMDT_2DOFFSET                   BluePoint;&#10;  D3DKMDT_2DOFFSET                   WhitePoint;&#10;  ULONG                              MinLuminance;&#10;  ULONG                              MaxLuminance;&#10;  ULONG                              MaxFullFrameLuminance;&#10;  D3DKMDT_WIRE_FORMAT_AND_PREFERENCE FormatBitDepths;&#10;  DXGK_STANDARD_COLORIMETRY_FLAGS    StandardColorimetryFlags;&#10;} DXGK_COLORIMETRY, *PDXGK_COLORIMETRY;">DXGK_COLORIMETRY</a> are zeroed as these are capability fields so only valid in queries.</p>

<p>This function is always called at PASSIVE level so the supporting code should be made pageable where possible.</p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_settargetadjustedcolorimetry">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/dispmprt/nc-dispmprt-dxgkddi_settargetadjustedcolorimetry.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
