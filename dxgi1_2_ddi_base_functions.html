<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DXGI1_2_DDI_BASE_FUNCTIONS - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DXGI1_2_DDI_BASE_FUNCTIONS - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DXGI1_2_DDI_BASE_FUNCTIONS - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// dxgiddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct DXGI1_2_DDI_BASE_FUNCTIONS {
  HRESULT()(<a href="dxgi_ddi_arg_present" title="typedef struct DXGI_DDI_ARG_PRESENT {&#10;  [in] DXGI_DDI_HDEVICE            hDevice;&#10;  [in] DXGI_DDI_HRESOURCE          hSurfaceToPresent;&#10;  [in] UINT                        SrcSubResourceIndex;&#10;  [in] DXGI_DDI_HRESOURCE          hDstResource;&#10;       UINT                        DstSubResourceIndex;&#10;  [in] void                        *pDXGIContext;&#10;  [in] DXGI_DDI_PRESENT_FLAGS      Flags;&#10;  [in] DXGI_DDI_FLIP_INTERVAL_TYPE FlipInterval;&#10;} DXGI_DDI_ARG_PRESENT;">DXGI_DDI_ARG_PRESENT</a> *) * pfnPresent;
  HRESULT()(<a href="dxgi_ddi_arg_get_gamma_control_caps" title="typedef struct DXGI_DDI_ARG_GET_GAMMA_CONTROL_CAPS {&#10;  [in]     DXGI_DDI_HDEVICE                hDevice;&#10;  [in/out] DXGI_GAMMA_CONTROL_CAPABILITIES *pGammaCapabilities;&#10;} DXGI_DDI_ARG_GET_GAMMA_CONTROL_CAPS;">DXGI_DDI_ARG_GET_GAMMA_CONTROL_CAPS</a> *) * pfnGetGammaCaps;
  HRESULT()(<a href="dxgi_ddi_arg_setdisplaymode" title="typedef struct DXGI_DDI_ARG_SETDISPLAYMODE {&#10;  [in] DXGI_DDI_HDEVICE   hDevice;&#10;  [in] DXGI_DDI_HRESOURCE hResource;&#10;  [in] UINT               SubResourceIndex;&#10;} DXGI_DDI_ARG_SETDISPLAYMODE;">DXGI_DDI_ARG_SETDISPLAYMODE</a> *) * pfnSetDisplayMode;
  HRESULT()(<a href="dxgi_ddi_arg_setresourcepriority" title="typedef struct DXGI_DDI_ARG_SETRESOURCEPRIORITY {&#10;  [in] DXGI_DDI_HDEVICE   hDevice;&#10;  [in] DXGI_DDI_HRESOURCE hResource;&#10;  [in] UINT               Priority;&#10;} DXGI_DDI_ARG_SETRESOURCEPRIORITY;">DXGI_DDI_ARG_SETRESOURCEPRIORITY</a> *) * pfnSetResourcePriority;
  HRESULT()(<a href="dxgi_ddi_arg_queryresourceresidency" title="typedef struct DXGI_DDI_ARG_QUERYRESOURCERESIDENCY {&#10;  [in]  DXGI_DDI_HDEVICE         hDevice;&#10;  [in]  const DXGI_DDI_HRESOURCE *pResources;&#10;  [out] DXGI_DDI_RESIDENCY       *pStatus;&#10;  [in]  SIZE_T                   Resources;&#10;} DXGI_DDI_ARG_QUERYRESOURCERESIDENCY;">DXGI_DDI_ARG_QUERYRESOURCERESIDENCY</a> *) * pfnQueryResourceResidency;
  HRESULT()(<a href="dxgi_ddi_arg_rotate_resource_identities" title="typedef struct DXGI_DDI_ARG_ROTATE_RESOURCE_IDENTITIES {&#10;  [in] DXGI_DDI_HDEVICE         hDevice;&#10;  [in] const DXGI_DDI_HRESOURCE *pResources;&#10;  [in] UINT                     Resources;&#10;} DXGI_DDI_ARG_ROTATE_RESOURCE_IDENTITIES;">DXGI_DDI_ARG_ROTATE_RESOURCE_IDENTITIES</a> *) * pfnRotateResourceIdentities;
  HRESULT()(<a href="dxgi_ddi_arg_blt" title="typedef struct DXGI_DDI_ARG_BLT {&#10;  [in] DXGI_DDI_HDEVICE       hDevice;&#10;  [in] DXGI_DDI_HRESOURCE     hDstResource;&#10;  [in] UINT                   DstSubresource;&#10;  [in] UINT                   DstLeft;&#10;  [in] UINT                   DstTop;&#10;  [in] UINT                   DstRight;&#10;  [in] UINT                   DstBottom;&#10;  [in] DXGI_DDI_HRESOURCE     hSrcResource;&#10;  [in] UINT                   SrcSubresource;&#10;  [in] DXGI_DDI_ARG_BLT_FLAGS Flags;&#10;  [in] DXGI_DDI_MODE_ROTATION Rotate;&#10;} DXGI_DDI_ARG_BLT;">DXGI_DDI_ARG_BLT</a> *) * pfnBlt;
  HRESULT()(<a href="dxgi_ddi_arg_resolvesharedresource" title="typedef struct DXGI_DDI_ARG_RESOLVESHAREDRESOURCE {&#10;  [in] DXGI_DDI_HDEVICE   hDevice;&#10;  [in] DXGI_DDI_HRESOURCE hResource;&#10;} DXGI_DDI_ARG_RESOLVESHAREDRESOURCE;">DXGI_DDI_ARG_RESOLVESHAREDRESOURCE</a> *) * pfnResolveSharedResource;
  HRESULT()(<a href="dxgi_ddi_arg_blt1" title="typedef struct DXGI_DDI_ARG_BLT1 {&#10;  [in] DXGI_DDI_HDEVICE       hDevice;&#10;  [in] DXGI_DDI_HRESOURCE     hDstResource;&#10;  [in] UINT                   DstSubresource;&#10;  [in] UINT                   DstLeft;&#10;  [in] UINT                   DstTop;&#10;  [in] UINT                   DstRight;&#10;  [in] UINT                   DstBottom;&#10;  [in] DXGI_DDI_HRESOURCE     hSrcResource;&#10;  [in] UINT                   SrcSubresource;&#10;  [in] UINT                   SrcLeft;&#10;  [in] UINT                   SrcTop;&#10;  [in] UINT                   SrcRight;&#10;  [in] UINT                   SrcBottom;&#10;  [in] DXGI_DDI_ARG_BLT_FLAGS Flags;&#10;  [in] DXGI_DDI_MODE_ROTATION Rotate;&#10;} DXGI_DDI_ARG_BLT1;">DXGI_DDI_ARG_BLT1</a> *) * pfnBlt1;
  HRESULT()(<a href="dxgi_ddi_arg_offerresources" title="typedef struct _DXGI_DDI_ARG_OFFERRESOURCES {&#10;  [in] DXGI_DDI_HDEVICE         hDevice;&#10;  [in] const DXGI_DDI_HRESOURCE *pResources;&#10;  [in] UINT                     Resources;&#10;  [in] D3DDDI_OFFER_PRIORITY    Priority;&#10;} DXGI_DDI_ARG_OFFERRESOURCES;">DXGI_DDI_ARG_OFFERRESOURCES</a> *) * pfnOfferResources;
  HRESULT()(<a href="dxgi_ddi_arg_reclaimresources" title="typedef struct _DXGI_DDI_ARG_RECLAIMRESOURCES {&#10;  [in]  DXGI_DDI_HDEVICE         hDevice;&#10;  [in]  const DXGI_DDI_HRESOURCE *pResources;&#10;  [out] BOOL                     *pDiscarded;&#10;  [in]  UINT                     Resources;&#10;} DXGI_DDI_ARG_RECLAIMRESOURCES;">DXGI_DDI_ARG_RECLAIMRESOURCES</a> *) * pfnReclaimResources;
  HRESULT()(<a href="dxgi_ddi_arg_getmultiplaneoverlaycaps" title="typedef struct _DXGI_DDI_ARG_GETMULTIPLANEOVERLAYCAPS {&#10;  [in]  DXGI_DDI_HDEVICE                 hDevice;&#10;  [in]  D3DDDI_VIDEO_PRESENT_SOURCE_ID   VidPnSourceId;&#10;  [out] DXGI_DDI_MULTIPLANE_OVERLAY_CAPS MultiplaneOverlayCaps;&#10;} DXGI_DDI_ARG_GETMULTIPLANEOVERLAYCAPS;">DXGI_DDI_ARG_GETMULTIPLANEOVERLAYCAPS</a> *) * pfnGetMultiplaneOverlayCaps;
  HRESULT()(void *) * pfnGetMultiplaneOverlayFilterRange;
  HRESULT()(<a href="dxgi_ddi_arg_checkmultiplaneoverlaysupport" title="typedef struct _DXGI_DDI_ARG_CHECKMULTIPLANEOVERLAYSUPPORT {&#10;  [in]  DXGI_DDI_HDEVICE                                     hDevice;&#10;  [in]  D3DDDI_VIDEO_PRESENT_SOURCE_ID                       VidPnSourceId;&#10;  [out] UINT                                                 NumPlaneInfo;&#10;  [out] DXGI_DDI_CHECK_MULTIPLANE_OVERLAY_SUPPORT_PLANE_INFO *pPlaneInfo;&#10;  [out] BOOL                                                 Supported;&#10;} DXGI_DDI_ARG_CHECKMULTIPLANEOVERLAYSUPPORT;">DXGI_DDI_ARG_CHECKMULTIPLANEOVERLAYSUPPORT</a> *) * pfnCheckMultiplaneOverlaySupport;
  HRESULT()(<a href="dxgi_ddi_arg_presentmultiplaneoverlay" title="typedef struct _DXGI_DDI_ARG_PRESENTMULTIPLANEOVERLAY {&#10;  [in] DXGI_DDI_HDEVICE                    hDevice;&#10;  [in] void                                *pDXGIContext;&#10;  [in] D3DDDI_VIDEO_PRESENT_SOURCE_ID      VidPnSourceId;&#10;  [in] DXGI_DDI_PRESENT_FLAGS              Flags;&#10;  [in] DXGI_DDI_FLIP_INTERVAL_TYPE         FlipInterval;&#10;  [in] UINT                                PresentPlaneCount;&#10;  [in] DXGI_DDI_PRESENT_MULTIPLANE_OVERLAY *pPresentPlanes;&#10;       UINT                                Reserved;&#10;} DXGI_DDI_ARG_PRESENTMULTIPLANEOVERLAY;">DXGI_DDI_ARG_PRESENTMULTIPLANEOVERLAY</a> *) * pfnPresentMultiplaneOverlay;
} DXGI1_2_DDI_BASE_FUNCTIONS;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi1_2_ddi_base_functions">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/dxgi1_2_ddi_base_functions.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-dxgiddi-dxgi1_2_ddi_base_functions)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="dxgi1_2_ddi_base_functions-structure">DXGI1_2_DDI_BASE_FUNCTIONS structure</h1>

<h2 id="description">Description</h2>

<p>Contains pointers to functions that a Windows Display Driver Model (WDDM) 1.2 and later user-mode display driver can implement to perform low-level tasks like presenting rendered frames to an output, controlling gamma, getting notifications regarding shared and Windows Graphics Device Interface (GDI) interoperable surfaces, and managing a full-screen transition.</p>

<h2 id="members">Members</h2>

<h3 id="pfnpresent"><code>pfnPresent</code></h3>

<p>A pointer to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi_ddi_base_functions"><strong>PresentDXGI</strong></a> function.</p>

<h3 id="pfngetgammacaps"><code>pfnGetGammaCaps</code></h3>

<p>A pointer to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi_ddi_base_functions"><strong>GetGammaCapsDXGI</strong></a> function.</p>

<h3 id="pfnsetdisplaymode"><code>pfnSetDisplayMode</code></h3>

<p>A pointer to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi1_1_ddi_base_functions"><strong>SetDisplayModeDXGI</strong></a> function.</p>

<h3 id="pfnsetresourcepriority"><code>pfnSetResourcePriority</code></h3>

<p>A pointer to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi_ddi_base_functions"><strong>SetResourcePriorityDXGI</strong></a> function.</p>

<h3 id="pfnqueryresourceresidency"><code>pfnQueryResourceResidency</code></h3>

<p>A pointer to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi_ddi_base_functions"><strong>QueryResourceResidencyDXGI</strong></a> function.</p>

<h3 id="pfnrotateresourceidentities"><code>pfnRotateResourceIdentities</code></h3>

<p>A pointer to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi_ddi_base_functions"><strong>RotateResourceIdentitiesDXGI</strong></a> function.</p>

<h3 id="pfnblt"><code>pfnBlt</code></h3>

<p>A pointer to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi_ddi_base_functions"><strong>BltDXGI</strong></a> function.</p>

<p>The Direct3D runtime might set the <strong>Flags</strong> member of the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi_ddi_arg_blt"><strong>DXGI_DDI_ARG_BLT</strong></a> structure that the <strong>pBltData</strong> parameter points to in such a way as to require the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi1_2_ddi_base_functions"><strong>Blt1DXGI</strong></a> function to perform a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/copying-bitmaps">bit-block transfer (bitblt)</a> operation that resolves multi-sampled resources, performs color-format conversion, and performs a stretch or shrink all at once. However, the Direct3D runtime will never set the <strong>Flags</strong> member of <strong><a href="dxgi_ddi_arg_blt1" title="typedef struct DXGI_DDI_ARG_BLT1 {&#10;  [in] DXGI_DDI_HDEVICE       hDevice;&#10;  [in] DXGI_DDI_HRESOURCE     hDstResource;&#10;  [in] UINT                   DstSubresource;&#10;  [in] UINT                   DstLeft;&#10;  [in] UINT                   DstTop;&#10;  [in] UINT                   DstRight;&#10;  [in] UINT                   DstBottom;&#10;  [in] DXGI_DDI_HRESOURCE     hSrcResource;&#10;  [in] UINT                   SrcSubresource;&#10;  [in] UINT                   SrcLeft;&#10;  [in] UINT                   SrcTop;&#10;  [in] UINT                   SrcRight;&#10;  [in] UINT                   SrcBottom;&#10;  [in] DXGI_DDI_ARG_BLT_FLAGS Flags;&#10;  [in] DXGI_DDI_MODE_ROTATION Rotate;&#10;} DXGI_DDI_ARG_BLT1;">DXGI_DDI_ARG_BLT1</a></strong> to zero (that is, no flags set) together with the <strong>DXGI_DDI_MODE_ROTATION_IDENTITY</strong> value set in the <strong>Rotate</strong> member of <strong><a href="dxgi_ddi_arg_blt1" title="typedef struct DXGI_DDI_ARG_BLT1 {&#10;  [in] DXGI_DDI_HDEVICE       hDevice;&#10;  [in] DXGI_DDI_HRESOURCE     hDstResource;&#10;  [in] UINT                   DstSubresource;&#10;  [in] UINT                   DstLeft;&#10;  [in] UINT                   DstTop;&#10;  [in] UINT                   DstRight;&#10;  [in] UINT                   DstBottom;&#10;  [in] DXGI_DDI_HRESOURCE     hSrcResource;&#10;  [in] UINT                   SrcSubresource;&#10;  [in] UINT                   SrcLeft;&#10;  [in] UINT                   SrcTop;&#10;  [in] UINT                   SrcRight;&#10;  [in] UINT                   SrcBottom;&#10;  [in] DXGI_DDI_ARG_BLT_FLAGS Flags;&#10;  [in] DXGI_DDI_MODE_ROTATION Rotate;&#10;} DXGI_DDI_ARG_BLT1;">DXGI_DDI_ARG_BLT1</a></strong> (that is, to indicate no rotation) to perform a straight memory copy operation. Instead, unless both resources are multi-sampled, the Direct3D runtime calls the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_resourcecopy"><strong>ResourceCopy</strong></a> or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d11_1ddi_resourcecopyregion"><strong>ResourceCopyRegion(D3D11_1)</strong></a> function to perform a straight memory copy operation.</p>

<p>The quality of the stretch or shrink that the user-mode display driver performs must be as good as the stretch or shrink that a bilinear filter performs.</p>

<p>The Direct3D runtime will call the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi1_2_ddi_base_functions"><strong>Blt1DXGI</strong></a> function infrequently. That is, the runtime should call <strong>Blt1DXGI</strong> no more than once or twice per frame because the runtime uses <strong>Blt1DXGI</strong> primarily to support a presentation.</p>

<p>When the runtime calls <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi1_2_ddi_base_functions"><strong>Blt1DXGI</strong></a> for a presentation, the runtime sets the <strong>Present</strong> bit-field flag in the <strong>Flags</strong> member of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi_ddi_arg_blt1"><strong>DXGI_DDI_ARG_BLT1</strong></a>. The runtime sets the <strong>Present</strong> bit-field flag to inform the driver that there are extra requirements for the bitblt and that extra synchronization may be necessary (for example, the runtime might need to perform extra synchronization in computer configurations that contain two graphics adapters that each handle separate parts of the display). When the <strong>Present</strong> bit-field flag is set, the driver should perform a copy operation from an application's back buffers to the shared surface of the DWM. Because synchronization for this type of copy operation is inexact, tearing artifacts should be the worst type of artifacts that a user experiences. For this type of copy operation, the driver should not use a multi-pass approach by first resolving into the destination surface and then color converting the results in-place because the possible artifacts would be much worse.</p>

<p>If the driver supports returning <strong>DXGI_DDI_ERR_UNSUPPORTED</strong> during the creation of a primary surface (that is, returning <strong>DXGI_DDI_ERR_UNSUPPORTED</strong> from a call to its <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_createresource"><strong>CreateResource(D3D10)</strong></a> function with the <strong>D3D10_DDI_BIND_PRESENT</strong> flag set in the <strong>BindFlags</strong> member of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/ns-d3d10umddi-d3d10ddiarg_createresource"><strong>D3D10DDIARG_CREATERESOURCE</strong></a> along with the <strong>pPrimaryDesc</strong> member of <strong><a href="d3d10ddiarg_createresource" title="typedef struct D3D10DDIARG_CREATERESOURCE {&#10;  [in]      const D3D10DDI_MIPINFO            *pMipInfoList;&#10;  [in]      const D3D10_DDIARG_SUBRESOURCE_UP *pInitialDataUP;&#10;  [in]      D3D10DDIRESOURCE_TYPE             ResourceDimension;&#10;  [in]      UINT                              Usage;&#10;  [in]      UINT                              BindFlags;&#10;  [in]      UINT                              MapFlags;&#10;  [in]      UINT                              MiscFlags;&#10;  [in]      DXGI_FORMAT                       Format;&#10;  [in]      DXGI_SAMPLE_DESC                  SampleDesc;&#10;  [in]      UINT                              MipLevels;&#10;  [in]      UINT                              ArraySize;&#10;  [in, out] DXGI_DDI_PRIMARY_DESC             *pPrimaryDesc;&#10;} D3D10DDIARG_CREATERESOURCE;">D3D10DDIARG_CREATERESOURCE</a></strong> set to non-NULL), the driver must also support rotation during a copy operation. If the driver never returns <strong>DXGI_DDI_ERR_UNSUPPORTED</strong> from a call to its <strong>CreateResource(D3D10)</strong> or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d11ddi_createresource"><strong>CreateResource(D3D11)</strong></a> function, the runtime will never pass the <strong>DXGI_DDI_MODE_ROTATION_ROTATE90</strong>, <strong>DXGI_DDI_MODE_ROTATION_ROTATE180</strong>, or <strong>DXGI_DDI_MODE_ROTATION_ROTATE270</strong> value to the <strong>Rotate</strong> member of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi_ddi_arg_blt1"><strong>DXGI_DDI_ARG_BLT1</strong></a>. Therefore, in this situation, the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi1_2_ddi_base_functions"><strong>Blt1DXGI</strong></a> function is not required to support rotation.</p>

<p>The runtime sets a value in the <strong>Rotate</strong> member of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi_ddi_arg_blt1"><strong>DXGI_DDI_ARG_BLT1</strong></a> to indicate the number of degrees to rotate counter-clockwise the contents of the source before the driver copies the contents to the destination. Rotation is specified in increments of 90 degrees.</p>

<blockquote>
  <p>[!NOTE]</p>
  
  <p>When the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi1_2_ddi_base_functions"><strong>Blt1DXGI</strong></a> function copies sRGB-formatted content from a source surface to a non-sRGB destination surface, the driver should copy the sRGB content unchanged (that is, the driver should not perform the sRGB to linear conversion).</p>
</blockquote>

<h4 id="source-restrictions">Source restrictions</h4>

<p>The <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi1_2_ddi_base_functions"><strong>Blt1DXGI</strong></a> function always uses a whole source subresource (versus some sub-rectangular area) to perform the bitblt operation. In addition, the source is a <strong>D3D10DDIRESOURCE_TEXTURE2D</strong> representation (specified in the <strong>ResourceDimension</strong> member of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/ns-d3d10umddi-d3d10ddiarg_createresource"><strong>D3D10DDIARG_CREATERESOURCE</strong></a> or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/ns-d3d10umddi-d3d11ddiarg_createresource"><strong>D3D11DDIARG_CREATERESOURCE</strong></a> when the source is created in a call to the user-mode display driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_createresource"><strong>CreateResource(D3D10)</strong></a> or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d11ddi_createresource"><strong>CreateResource(D3D11)</strong></a> function, respectively). When the runtime sets the <strong>Resolve</strong> bitfield in the <strong>Flags</strong> member of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi_ddi_arg_blt1"><strong>DXGI_DDI_ARG_BLT1</strong></a>, the source is a multi-sampled resource. The source resource is restricted to a resource in which the <strong>D3D10_DDI_BIND_PRESENT</strong> flag was set in the <strong>BindFlags</strong> member of <strong><a href="d3d10ddiarg_createresource" title="typedef struct D3D10DDIARG_CREATERESOURCE {&#10;  [in]      const D3D10DDI_MIPINFO            *pMipInfoList;&#10;  [in]      const D3D10_DDIARG_SUBRESOURCE_UP *pInitialDataUP;&#10;  [in]      D3D10DDIRESOURCE_TYPE             ResourceDimension;&#10;  [in]      UINT                              Usage;&#10;  [in]      UINT                              BindFlags;&#10;  [in]      UINT                              MapFlags;&#10;  [in]      UINT                              MiscFlags;&#10;  [in]      DXGI_FORMAT                       Format;&#10;  [in]      DXGI_SAMPLE_DESC                  SampleDesc;&#10;  [in]      UINT                              MipLevels;&#10;  [in]      UINT                              ArraySize;&#10;  [in, out] DXGI_DDI_PRIMARY_DESC             *pPrimaryDesc;&#10;} D3D10DDIARG_CREATERESOURCE;">D3D10DDIARG_CREATERESOURCE</a></strong> or <strong><a href="d3d11ddiarg_createresource" title="typedef struct D3D11DDIARG_CREATERESOURCE {&#10;  [in]      const D3D10DDI_MIPINFO               *pMipInfoList;&#10;  [in]      const D3D10_DDIARG_SUBRESOURCE_UP    *pInitialDataUP;&#10;  [in]      D3D10DDIRESOURCE_TYPE                ResourceDimension;&#10;  [in]      UINT                                 Usage;&#10;  [in]      UINT                                 BindFlags;&#10;  [in]      UINT                                 MapFlags;&#10;  [in]      UINT                                 MiscFlags;&#10;  [in]      DXGI_FORMAT                          Format;&#10;  [in]      DXGI_SAMPLE_DESC                     SampleDesc;&#10;  [in]      UINT                                 MipLevels;&#10;  [in]      UINT                                 ArraySize;&#10;  [in, out] DXGI_DDI_PRIMARY_DESC                *pPrimaryDesc;&#10;  [in]      UINT                                 ByteStride;&#10;  [in]      D3D11_1DDI_VIDEO_DECODER_BUFFER_TYPE DecoderBufferType;&#10;            D3DWDDM2_0DDI_TEXTURE_LAYOUT         TextureLayout;&#10;} D3D11DDIARG_CREATERESOURCE;">D3D11DDIARG_CREATERESOURCE</a></strong>. The format of the source (specified in the <strong>Format</strong> member of <strong><a href="d3d10ddiarg_createresource" title="typedef struct D3D10DDIARG_CREATERESOURCE {&#10;  [in]      const D3D10DDI_MIPINFO            *pMipInfoList;&#10;  [in]      const D3D10_DDIARG_SUBRESOURCE_UP *pInitialDataUP;&#10;  [in]      D3D10DDIRESOURCE_TYPE             ResourceDimension;&#10;  [in]      UINT                              Usage;&#10;  [in]      UINT                              BindFlags;&#10;  [in]      UINT                              MapFlags;&#10;  [in]      UINT                              MiscFlags;&#10;  [in]      DXGI_FORMAT                       Format;&#10;  [in]      DXGI_SAMPLE_DESC                  SampleDesc;&#10;  [in]      UINT                              MipLevels;&#10;  [in]      UINT                              ArraySize;&#10;  [in, out] DXGI_DDI_PRIMARY_DESC             *pPrimaryDesc;&#10;} D3D10DDIARG_CREATERESOURCE;">D3D10DDIARG_CREATERESOURCE</a></strong> or <strong><a href="d3d11ddiarg_createresource" title="typedef struct D3D11DDIARG_CREATERESOURCE {&#10;  [in]      const D3D10DDI_MIPINFO               *pMipInfoList;&#10;  [in]      const D3D10_DDIARG_SUBRESOURCE_UP    *pInitialDataUP;&#10;  [in]      D3D10DDIRESOURCE_TYPE                ResourceDimension;&#10;  [in]      UINT                                 Usage;&#10;  [in]      UINT                                 BindFlags;&#10;  [in]      UINT                                 MapFlags;&#10;  [in]      UINT                                 MiscFlags;&#10;  [in]      DXGI_FORMAT                          Format;&#10;  [in]      DXGI_SAMPLE_DESC                     SampleDesc;&#10;  [in]      UINT                                 MipLevels;&#10;  [in]      UINT                                 ArraySize;&#10;  [in, out] DXGI_DDI_PRIMARY_DESC                *pPrimaryDesc;&#10;  [in]      UINT                                 ByteStride;&#10;  [in]      D3D11_1DDI_VIDEO_DECODER_BUFFER_TYPE DecoderBufferType;&#10;            D3DWDDM2_0DDI_TEXTURE_LAYOUT         TextureLayout;&#10;} D3D11DDIARG_CREATERESOURCE;">D3D11DDIARG_CREATERESOURCE</a></strong>) is restricted to display mode formats, specified by the following values from the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/dxgiformat/ne-dxgiformat-dxgi_format"><strong>DXGI_FORMAT</strong></a> enumeration:</p>

<ul>
<li><strong>DXGI_FORMAT_B5G6R5_UNORM</strong></li>
<li><strong>DXGI_FORMAT_B5G5R5A1_UNORM</strong></li>
<li><strong>DXGI_FORMAT_B8G8R8A8_UNORM</strong> (See Note below.)</li>
<li><strong>DXGI_FORMAT_B8G8R8X8_UNORM</strong></li>
<li><strong>DXGI_FORMAT_R16G16B16A16_FLOAT</strong></li>
<li><strong>DXGI_FORMAT_R10G10B10A2_UNORM</strong></li>
<li><strong>DXGI_FORMAT_R8G8B8A8_UNORM</strong></li>
<li><strong>DXGI_FORMAT_R8G8B8A8_UNORM_SRGB</strong></li>
</ul>

<blockquote>
  <p>[!NOTE]</p>
  
  <p>If the driver supports the source format <strong>DXGI_FORMAT_B8G8R8A8_UNORM</strong>, the following restrictions apply:</p>
  
  <ul>
  <li>When the driver performs a bitblt operation from a floating-point format to an integer format such as BGRA8888, it must implicitly encode gamma into the results.</li>
  <li>Conversely, when the driver performs a bitblt operation from an integer format to a floating-point format, it must implicitly remove gamma encoding from the results.</li>
  </ul>
</blockquote>

<h4 id="destination-restrictions">Destination restrictions</h4>

<p>The destination is also a <strong>D3D10DDIRESOURCE_TEXTURE2D</strong> representation. The format of the destination is also restricted to display mode formats. The destination resource is restricted to a resource that is bound as a render target (<strong>D3D10_DDI_BIND_RENDER_TARGET</strong> set in the <strong>BindFlags</strong> member of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/ns-d3d10umddi-d3d10ddiarg_createresource"><strong>D3D10DDIARG_CREATERESOURCE</strong></a> or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/ns-d3d10umddi-d3d11ddiarg_createresource"><strong>D3D11DDIARG_CREATERESOURCE</strong></a>).</p>

<h4 id="creating-a-stereo-back-buffer">Creating a stereo back buffer</h4>

<p>Beginning in Windows 8, if the driver must create a stereo back buffer, it should set members of the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/ns-d3d10umddi-d3d10ddiarg_createresource"><strong>D3D10DDIARG_CREATERESOURCE</strong></a> or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/ns-d3d10umddi-d3d11ddiarg_createresource"><strong>D3D11DDIARG_CREATERESOURCE</strong></a> structure, respectively, pointed to by the <strong>pCreateResource</strong> parameter of the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_createresource"><strong>CreateResource(D3D10)</strong></a> or <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d11ddi_createresource"><strong>CreateResource(D3D11)</strong></a> functions, as follows:</p>

<ol>
<li>Set the <strong>ArraySize</strong> member to a value of 2.</li>
<li>Set the <strong>D3D10_DDI_BIND_PRESENT</strong> flag value in the <strong>BindFlags</strong> member.</li>
</ol>

<p>Additionally, to support stereo presentation, the BltDXGI function must allow any values for the <strong>DstSubresource</strong> and <strong>SrcSubresource</strong> members of the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi_ddi_arg_blt"><strong>DXGI_DDI_ARG_BLT</strong></a> structure that are within the range of the source and destination resources.</p>

<h3 id="pfnresolvesharedresource"><code>pfnResolveSharedResource</code></h3>

<p>A pointer to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi1_1_ddi_base_functions"><strong>ResolveSharedResourceDXGI</strong></a> function.</p>

<h3 id="pfnblt1"><code>pfnBlt1</code></h3>

<p>A pointer to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi1_2_ddi_base_functions"><strong>Blt1DXGI</strong></a> function.</p>

<h3 id="pfnofferresources"><code>pfnOfferResources</code></h3>

<p>A pointer to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_offerresources"><strong>pfnOfferResources</strong></a> function.</p>

<h3 id="pfnreclaimresources"><code>pfnReclaimResources</code></h3>

<p>Called by the DXGI runtime to reclaim video memory resources that the user-mode display driver previously offered for reuse. Implemented by WDDM 1.2 and later user-mode display drivers.</p>

<h3 id="pfngetmultiplaneoverlaycaps"><code>pfnGetMultiplaneOverlayCaps</code></h3>

<p>Called by the Microsoft DirectX Graphics Infrastructure (DXGI) runtime to request that the user-mode display driver get basic overlay plane capabilities. Optionally implemented by Windows Display Driver Model (WDDM) 1.3 and later user-mode display drivers. The syntax of <strong>pfnGetMultiplaneOverlayCaps</strong> follows:</p>

<div class="codehilite">
<pre><span></span><code><span class="n">pfnGetMultiPlaneOverlayCaps</span><span class="w"> </span><span class="n">GetMultiPlaneOverlayCaps</span><span class="p">;</span>

<span class="n">HRESULT</span><span class="w"> </span><span class="kr">__stdcall</span><span class="o">*</span><span class="w"> </span><span class="n">GetMultiPlaneOverlayCaps</span><span class="p">(</span>
<span class="w">    </span><span class="n"><a href="dxgi_ddi_arg_getmultiplaneoverlaycaps" title="typedef struct _DXGI_DDI_ARG_GETMULTIPLANEOVERLAYCAPS {&#10;  [in]  DXGI_DDI_HDEVICE                 hDevice;&#10;  [in]  D3DDDI_VIDEO_PRESENT_SOURCE_ID   VidPnSourceId;&#10;  [out] DXGI_DDI_MULTIPLANE_OVERLAY_CAPS MultiplaneOverlayCaps;&#10;} DXGI_DDI_ARG_GETMULTIPLANEOVERLAYCAPS;">DXGI_DDI_ARG_GETMULTIPLANEOVERLAYCAPS</a></span><span class="w"> </span><span class="o">*</span><span class="n">pCaps</span>
<span class="p">)</span>
<span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</code></pre>
</div>

<p>The <em>pCaps</em> parameter is a pointer to a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-_dxgi_ddi_arg_getmultiplaneoverlaycaps">DXGI_DDI_ARG_GETMULTIPLANEOVERLAYCAPS</a> structure that specifies the overlay plane capabilities.</p>

<p><strong>pfnGetMultiplaneOverlayCaps</strong> returns one of the following values:</p>

<ul>
<li>S_OK: The driver successfully provided the overlay plane capabilities.</li>
<li>D3DDDIERR_DEVICEREMOVED: The driver detected that the display adapter was removed, so the driver did not complete the operation. If the driver is not aware of the adapter removal, the driver is not required to return this error code.</li>
</ul>

<h3 id="pfngetmultiplaneoverlayfilterrange"><code>pfnGetMultiplaneOverlayFilterRange</code></h3>

<p>This member is reserved and should be set to zero. Supported starting with Windows 8.1.</p>

<h3 id="pfncheckmultiplaneoverlaysupport"><code>pfnCheckMultiplaneOverlaySupport</code></h3>

<p>Called by the Microsoft DirectX Graphics Infrastructure (DXGI) runtime to check the details on hardware support for multiplane overlays. The syntax of <strong>pfnCheckMultiplaneOverlaySupport</strong> is:</p>

<div class="codehilite">
<pre><span></span><code><span class="n">PFND3DDDI_CHECKMULTIPLANEOVERLAYSUPPORT</span><span class="w"> </span><span class="n">pfnCheckMultiplaneOverlaySupport</span><span class="p">;</span>

<span class="n">HRESULT</span><span class="w"> </span><span class="kr">__stdcall</span><span class="o">*</span><span class="w"> </span><span class="n">pfnCheckMultiplaneOverlaySupport</span><span class="p">(</span>
<span class="w">   </span><span class="n"><a href="d3dddiarg_checkmultiplaneoverlaysupport" title="typedef struct _D3DDDIARG_CHECKMULTIPLANEOVERLAYSUPPORT {&#10;  [in]  D3DDDI_VIDEO_PRESENT_SOURCE_ID                     VidPnSourceId;&#10;  [out] UINT                                               NumPlanes;&#10;  [out] D3DDDI_CHECK_MULTIPLANE_OVERLAY_SUPPORT_PLANE_INFO *pPlanes;&#10;  [out] BOOL                                               Supported;&#10;} D3DDDIARG_CHECKMULTIPLANEOVERLAYSUPPORT;">D3DDDIARG_CHECKMULTIPLANEOVERLAYSUPPORT</a></span><span class="w"> </span><span class="o">*</span><span class="n">pSupport</span>
<span class="p">)</span>
<span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</code></pre>
</div>

<p>The <em>pSupport</em> parameter is a pointer to a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/ns-d3dkmddi-_dxgkarg_checkmultiplaneoverlaysupport"><strong>DXGI_DDI_ARG_CHECKMULTIPLANEOVERLAYSUPPORT</strong></a> structure that describes how to display to the destination surface.</p>

<p>If <strong>pfnCheckMultiplaneOverlaySupport</strong> succeeds, it returns S_OK. Otherwise, it returns an <strong>HRESULT</strong> error code.</p>

<h3 id="pfnpresentmultiplaneoverlay"><code>pfnPresentMultiplaneOverlay</code></h3>

<p>A pointer to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/nc-dxgiddi-pfnddxgiddi_present_multiplane_overlaycb"><strong>pfnPresentMultiplaneOverlay (DXGI)</strong></a> function. Supported starting with Windows 8.1.</p>

<h4 id="psupport">pSupport</h4>

<p>A pointer to a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-_dxgi_ddi_arg_checkmultiplaneoverlaysupport"><strong>DXGI_DDI_ARG_CHECKMULTIPLANEOVERLAYSUPPORT</strong></a> structure that describes how to display to the destination surface.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_createdevice"><strong>CreateDevice(D3D10)</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/ns-d3d10umddi-d3d10ddiarg_createdevice"><strong>D3D10DDIARG_CREATEDEVICE</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi1_3_ddi_base_functions"><strong>DXGI1_3_DDI_BASE_FUNCTIONS</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi_ddi_base_args"><strong>DXGI_DDI_BASE_ARGS</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi_ddi_base_functions"><strong>DXGI_DDI_BASE_FUNCTIONS</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dxgiddi/ns-dxgiddi-dxgi1_2_ddi_base_functions">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/dxgiddi/ns-dxgiddi-dxgi1_2_ddi_base_functions.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
