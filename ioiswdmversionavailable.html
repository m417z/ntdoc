<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="IoIsWdmVersionAvailable - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>IoIsWdmVersionAvailable - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            IoIsWdmVersionAvailable - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">BOOLEAN IoIsWdmVersionAvailable(
  [in] <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> MajorVersion,
  [in] <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> MinorVersion
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioiswdmversionavailable">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ioiswdmversionavailable.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-wdm-ioiswdmversionavailable)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2>Description</h2>

<p>The <strong>IoIsWdmVersionAvailable</strong> routine checks whether a given WDM version is supported by the operating system.</p>

<h2>Parameters</h2>

<h3><code>MajorVersion</code> [in]</h3>

<p>Specifies the major version number of WDM that is requested.</p>

<h3><code>MinorVersion</code> [in]</h3>

<p>Specifies the minor version number of WDM that is requested.</p>

<h2>Return value</h2>

<p><strong>IoIsWdmVersionAvailable</strong> returns <strong>TRUE</strong> if the version of WDM that the operating system provides is greater than or equal to the version number of WDM being requested. Otherwise, it returns <strong>FALSE</strong>.</p>

<h2>Remarks</h2>

<p>Drivers should use the <a href="rtlisntddiversionavailable" title="BOOLEAN RtlIsNtDdiVersionAvailable(&#10;  [in] ULONG Version&#10;);">RtlIsNtDdiVersionAvailable</a> routine instead of the <strong>IoIsWdmVersionAvailable</strong> routine.</p>

<p>Cross-platform drivers should use this routine to check the WDM version before performing any operations that vary by platform or are not supported in all versions of WDM.</p>

<p>The WDM_MAJORVERSION and WDM_MINORVERSION constants, which are defined in the Wdm.h header file, specify the WDM major and minor version numbers for the current version of Windows. The following lists the WDM version provided with each operating system.</p>

<table>
<thead>
<tr>
  <th>Operating system</th>
  <th>WDM major version</th>
  <th>WDM minor version</th>
</tr>
</thead>
<tbody>
<tr>
  <td>Windows 7</td>
  <td>6</td>
  <td>0x00</td>
</tr>
<tr>
  <td>Windows Server 2008 R2</td>
  <td>6</td>
  <td>0x00</td>
</tr>
<tr>
  <td>Windows Server 2008</td>
  <td>6</td>
  <td>0x00</td>
</tr>
<tr>
  <td>Windows Vista</td>
  <td>6</td>
  <td>0x00</td>
</tr>
<tr>
  <td>Windows Server 2003</td>
  <td>1</td>
  <td>0x30</td>
</tr>
<tr>
  <td>Windows XP</td>
  <td>1</td>
  <td>0x20</td>
</tr>
<tr>
  <td>Windows 2000</td>
  <td>1</td>
  <td>0x10</td>
</tr>
<tr>
  <td>Windows Me</td>
  <td>1</td>
  <td>0x05</td>
</tr>
<tr>
  <td>Windows 98</td>
  <td>1</td>
  <td>0x00</td>
</tr>
</tbody>
</table>

<p>Note that the minor version number is defined as a hexadecimal value.</p>

<p>Later versions of WDM support all the features available in earlier versions of WDM; that is, each version of WDM is a superset of the previous WDM version.</p>

<p>The following call returns <strong>TRUE</strong> on any of the listed operating systems, because all these systems support all the features of WDM 1.0:</p>

<div class="codehilite">
<pre><span></span><code><span class="n">bVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IoIsWdmVersionAvailable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
</code></pre>
</div>

<p>The following example shows how a driver can dynamically detect the current operating system:</p>

<div class="codehilite">
<pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">IoIsWdmVersionAvailable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mh">0x10</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">//</span>
<span class="w">    </span><span class="c1">//If WDM 1.10 is supported, this is Windows 2000</span>
<span class="w">    </span><span class="c1">//or better.</span>
<span class="w">    </span><span class="c1">//</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">IoIsWdmVersionAvailable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">//</span>
<span class="w">    </span><span class="c1">//If WDM 1.05 is supported, this is Windows ME</span>
<span class="w">    </span><span class="c1">//or better.</span>
<span class="w">    </span><span class="c1">//</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">//</span>
<span class="w">    </span><span class="c1">//WDM 1.0 is always supported, so this is Windows 98,</span>
<span class="w">    </span><span class="c1">//Windows 98 SE, or better.</span>
<span class="w">    </span><span class="c1">//</span>
<span class="p">}</span>
</code></pre>
</div>

<p>As the example shows, calling <strong>IoIsWdmVersionAvailable</strong>(1, 5) returns <strong>TRUE</strong> on Windows Me, Windows 2000, and any succeeding operating systems, but <strong>FALSE</strong> on Windows 98 and Windows 98 SE.</p>

<h2>See also</h2>

<p><a href="rtlisntddiversionavailable" title="BOOLEAN RtlIsNtDdiVersionAvailable(&#10;  [in] ULONG Version&#10;);">RtlIsNtDdiVersionAvailable</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioiswdmversionavailable">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/nf-wdm-ioiswdmversionavailable.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
