<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="PFND3DDDI_CREATECONTEXTCB - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>PFND3DDDI_CREATECONTEXTCB - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            PFND3DDDI_CREATECONTEXTCB - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3dumddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">PFND3DDDI_CREATECONTEXTCB Pfnd3dddiCreatecontextcb;

HRESULT Pfnd3dddiCreatecontextcb(
  HANDLE hDevice,
  <a href="d3dddicb_createcontext" title="typedef struct _D3DDDICB_CREATECONTEXT {&#10;  [in]  UINT                      NodeOrdinal;&#10;  [in]  UINT                      EngineAffinity;&#10;  [in]  D3DDDI_CREATECONTEXTFLAGS Flags;&#10;  [in]  VOID                      *pPrivateDriverData;&#10;  [in]  UINT                      PrivateDriverDataSize;&#10;  [out] HANDLE                    hContext;&#10;  [out] VOID                      *pCommandBuffer;&#10;  [out] UINT                      CommandBufferSize;&#10;  [out] D3DDDI_ALLOCATIONLIST     *pAllocationList;&#10;  [out] UINT                      AllocationListSize;&#10;  [out] D3DDDI_PATCHLOCATIONLIST  *pPatchLocationList;&#10;  [out] UINT                      PatchLocationListSize;&#10;        D3DGPU_VIRTUAL_ADDRESS    CommandBuffer;&#10;} D3DDDICB_CREATECONTEXT;">D3DDDICB_CREATECONTEXT</a> *unnamedParam2
)
{...}</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_createcontextcb">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/pfnd3dddi_createcontextcb.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-d3dumddi-pfnd3dddi_createcontextcb)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="pfnd3dddi_createcontextcb-callback-function">PFND3DDDI_CREATECONTEXTCB callback function</h1>

<h2 id="description">Description</h2>

<p>The Direct3D runtime's <strong>pfnCreateContextCb</strong> callback function creates a context.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="hdevice"><code>hDevice</code></h3>

<p>[in] Handle to the device for which the context is to be created.</p>

<h3 id="unnamedparam2"><code>unnamedParam2</code></h3>

<p>[in/out] Pointer to a <strong><a href="d3dddicb_createcontext" title="typedef struct _D3DDDICB_CREATECONTEXT {&#10;  [in]  UINT                      NodeOrdinal;&#10;  [in]  UINT                      EngineAffinity;&#10;  [in]  D3DDDI_CREATECONTEXTFLAGS Flags;&#10;  [in]  VOID                      *pPrivateDriverData;&#10;  [in]  UINT                      PrivateDriverDataSize;&#10;  [out] HANDLE                    hContext;&#10;  [out] VOID                      *pCommandBuffer;&#10;  [out] UINT                      CommandBufferSize;&#10;  [out] D3DDDI_ALLOCATIONLIST     *pAllocationList;&#10;  [out] UINT                      AllocationListSize;&#10;  [out] D3DDDI_PATCHLOCATIONLIST  *pPatchLocationList;&#10;  [out] UINT                      PatchLocationListSize;&#10;        D3DGPU_VIRTUAL_ADDRESS    CommandBuffer;&#10;} D3DDDICB_CREATECONTEXT;">D3DDDICB_CREATECONTEXT</a></strong> structure that the driver fills with the necessary information for creating the context. This structure includes details such as node ordinal, engine affinity, and flags that specify the behavior and capabilities of the context to be created. Upon successful completion, the runtime updates this structure with information about the newly created context.</p>

<h2 id="return-value">Return value</h2>

<p><strong>pfnCreateContextCb</strong> returns an HRESULT to indicate the success or failure of the context creation request. Common return values include:</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td>S_OK</td>
  <td>The context was successfully created.</td>
</tr>
<tr>
  <td>E_OUTOFMEMORY</td>
  <td>There is insufficient memory to create the context.</td>
</tr>
<tr>
  <td>E_INVALIDARG</td>
  <td>One or more of the provided arguments are invalid.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p>The user-mode display driver (UMD) must explicitly call <strong>pfnCreateContextCb</strong> from its <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_createdevice"><strong>CreateDevice</strong></a> implementation to create a GPU context associated with the device. GPU contexts are GPU threads of execution on a newly created device.</p>

<p>The context encapsulates state and command buffers that the GPU uses to perform rendering operations. UMD is responsible for managing the lifecycle of contexts it creates, including their eventual destruction to free up resources.</p>

<p>For more information about the creation of a rendering device, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/windows-vista-and-later-display-driver-model-operation-flow">Windows Display Driver Model (WDDM) operation flow</a>.</p>

<h2 id="see-also">See also</h2>

<p><strong><a href="d3dddicb_createcontext" title="typedef struct _D3DDDICB_CREATECONTEXT {&#10;  [in]  UINT                      NodeOrdinal;&#10;  [in]  UINT                      EngineAffinity;&#10;  [in]  D3DDDI_CREATECONTEXTFLAGS Flags;&#10;  [in]  VOID                      *pPrivateDriverData;&#10;  [in]  UINT                      PrivateDriverDataSize;&#10;  [out] HANDLE                    hContext;&#10;  [out] VOID                      *pCommandBuffer;&#10;  [out] UINT                      CommandBufferSize;&#10;  [out] D3DDDI_ALLOCATIONLIST     *pAllocationList;&#10;  [out] UINT                      AllocationListSize;&#10;  [out] D3DDDI_PATCHLOCATIONLIST  *pPatchLocationList;&#10;  [out] UINT                      PatchLocationListSize;&#10;        D3DGPU_VIRTUAL_ADDRESS    CommandBuffer;&#10;} D3DDDICB_CREATECONTEXT;">D3DDDICB_CREATECONTEXT</a></strong></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_destroycontextcb"><strong>pfnDestroyContextCb</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dumddi/nc-d3dumddi-pfnd3dddi_createcontextcb">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3dumddi/nc-d3dumddi-pfnd3dddi_createcontextcb.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
