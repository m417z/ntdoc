<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="GetTeredoPort - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>GetTeredoPort - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            GetTeredoPort - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// netioapi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NETIOAPI_API GetTeredoPort(
  _Out_ <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> *Port
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/getteredoport">View the official Windows hardware development documentation</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/getteredoport.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows hardware development documentation (getteredoport)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="getteredoport-function">GetTeredoPort function</h1>

<p>The <strong>GetTeredoPort</strong> function retrieves the dynamic UDP port number that the Teredo client uses on a local computer.</p>

<h2 id="parameters">Parameters</h2>

<ul>
<li><em>Port</em> [out]
A pointer to the UDP port number. On successful return, this parameter is filled with the port number that the Teredo client uses.</li>
</ul>

<h2 id="return-value">Return value</h2>

<p><strong>GetTeredoPort</strong> returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if the function succeeds.</p>

<p>If the function fails, <strong>GetTeredoPort</strong> returns one of the following error codes:</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>STATUS_INVALID_PARAMETER</strong></td>
  <td>An invalid parameter was passed to the function. This error is returned if a <strong>NULL</strong> pointer is passed in the <em>Port</em> parameter.</td>
</tr>
<tr>
  <td><strong>ERROR_NOT_READY</strong></td>
  <td>The device is not ready. This error is returned if the Teredo client is not started on the local computer.</td>
</tr>
<tr>
  <td><strong>STATUS_NOT_SUPPORTED</strong></td>
  <td>The request is not supported. This error is returned if no IPv6 stack is located on the local computer.</td>
</tr>
<tr>
  <td><strong>Other</strong></td>
  <td>Use the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/winbase/nf-winbase-formatmessage">FormatMessage</a> function to obtain the message string for the returned error.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p>The <strong>GetTeredoPort</strong> function retrieves the current UDP port number that the Teredo client uses for the Teredo service port. The Teredo port is dynamic and can change any time that the Teredo client is restarted on the local computer. A driver can register to be notified when the Teredo service port changes by calling the <strong><a href="notifyteredoportchange" title="NETIOAPI_API NotifyTeredoPortChange(&#10;  _In_    PTEREDO_PORT_CHANGE_CALLBACK Callback,&#10;  _In_    PVOID                        CallerContext,&#10;  _In_    BOOLEAN                      InitialNotification,&#10;  _Inout_ HANDLE *                     NotificationHandle&#10;);">NotifyTeredoPortChange</a></strong> function.</p>

<p>The Teredo client also uses static UDP port 3544 for listening to multicast traffic that is sent on multicast IPv4 address 224.0.0.253 as defined in RFC 4380. For more information, see <a rel="noopener" target="_blank" href="https://go.microsoft.com/fwlink/p/?linkid=84066">Teredo: Tunneling IPv6 over UDPthrough Network Address Translations (NATs)</a>.</p>

<p>The <strong>GetTeredoPort</strong> function is used primarily by firewall drivers in order to configure the appropriate exceptions to enable incoming and outgoing Teredo traffic.</p>

<h2 id="requirements">Requirements</h2>

<table>
<thead>
<tr>
  <th></th>
  <th></th>
</tr>
</thead>
<tbody>
<tr>
  <td>Target platform</td>
  <td><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/develop/target-platforms">Universal</a></td>
</tr>
<tr>
  <td>Version</td>
  <td>Available in Windows Vista and later versions of the Windows operating systems.</td>
</tr>
<tr>
  <td>Header</td>
  <td>Netioapi.h (include Netioapi.h)</td>
</tr>
<tr>
  <td>Library</td>
  <td>Netio.lib</td>
</tr>
<tr>
  <td>IRQL</td>
  <td>&lt; DISPATCH_LEVEL</td>
</tr>
</tbody>
</table>

<h2 id="see-also">See also</h2>

<p><strong><a href="notifyteredoportchange" title="NETIOAPI_API NotifyTeredoPortChange(&#10;  _In_    PTEREDO_PORT_CHANGE_CALLBACK Callback,&#10;  _In_    PVOID                        CallerContext,&#10;  _In_    BOOLEAN                      InitialNotification,&#10;  _Inout_ HANDLE *                     NotificationHandle&#10;);">NotifyTeredoPortChange</a></strong></p>

<p><strong><a href="notifystableunicastipaddresstable" title="NETIOAPI_API NotifyStableUnicastIpAddressTable(&#10;  _In_    ADDRESS_FAMILY                           Family,&#10;  _Out_   PMIB_UNICASTIPADDRESS_TABLE              *Table,&#10;  _In_    PSTABLE_UNICAST_IPADDRESS_TABLE_CALLBACK CallerCallback,&#10;  _In_    PVOID                                    CallerContext,&#10;  _Inout_ HANDLE                                   *NotificationHandle&#10;);">NotifyStableUnicastIpAddressTable</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/getteredoport">View the official Windows hardware development documentation</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs/blob/staging/windows-driver-docs-pr/network/getteredoport.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
