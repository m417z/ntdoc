<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="PVIDEO_HW_INTERRUPT - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>PVIDEO_HW_INTERRUPT - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            PVIDEO_HW_INTERRUPT - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// video.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">PVIDEO_HW_INTERRUPT PvideoHwInterrupt;

BOOLEAN PvideoHwInterrupt(
  PVOID HwDeviceExtension
)
{...}</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/nc-video-pvideo_hw_interrupt">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/pvideo_hw_interrupt.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-video-pvideo_hw_interrupt)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="pvideo_hw_interrupt-callback-function">PVIDEO_HW_INTERRUPT callback function</h1>

<h2 id="description">Description</h2>

<p><em>HwVidInterrupt</em> detects and dismisses interrupts generated by the associated video adapter.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="hwdeviceextension"><code>HwDeviceExtension</code></h3>

<p>Pointer to the miniport driver's per-adapter storage area. For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/device-extensions">Device Extensions</a>.</p>

<h2 id="return-value">Return value</h2>

<p>If <em>HwVidInterrupt</em> determines that its associated hardware did not generate the interrupt, it returns <strong>FALSE</strong>. Otherwise, it must dismiss the interrupt on its adapter before it returns <strong>TRUE</strong>.</p>

<h2 id="remarks">Remarks</h2>

<p>A miniport driver must implement <em>HwVidInterrupt</em> if its video adapter generates interrupts.</p>

<p>First, <em>HwVidInterrupt</em> should determine whether its adapter actually caused the interrupt. If not, this function should return <strong>FALSE</strong> immediately so the ISR of the device that caused the interrupt will be called promptly.</p>

<p>Otherwise, <em>HwVidInterrupt</em> is generally responsible for completing the I/O operation that caused the interrupt, and should do the following:</p>

<ul>
<li>Dismiss the interrupt on the adapter (required).</li>
<li>Complete the requested operation that caused the interrupt.</li>
<li>Return control as quickly as possible (required).</li>
</ul>

<p>If a miniport driver has an <em>HwVidInterrupt</em> function, no register or memory location that can be accessed by <em>HwVidInterrupt</em> can be visible to the corresponding display driver. An interrupt can occur while the display driver is modifying one of the registers or memory locations involved, and there is no way to ensure synchronization. Therefore, all functions requiring access to the critical registers or memory locations for interrupt-driven operations must be in the miniport driver.</p>

<p>If any other miniport driver function shares memory, such as part of the <em>HwDeviceExtension</em>, with <em>HwVidInterrupt</em>, it must call <strong><a href="videoportsynchronizeexecution" title="VIDEOPORT_DEPRECATED BOOLEAN VIDEOPORT_API VideoPortSynchronizeExecution(&#10;  PVOID                         HwDeviceExtension,&#10;  VIDEO_SYNCHRONIZE_PRIORITY    Priority,&#10;  PMINIPORT_SYNCHRONIZE_ROUTINE SynchronizeRoutine,&#10;  PVOID                         Context&#10;);">VideoPortSynchronizeExecution</a></strong> to synchronize its access to the shared area.</p>

<p><em>HwVidInterrupt</em> can call only the following system-supplied <strong>VideoPort</strong><em>Xxx</em> routines (see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/">Functions Exported by the Video Port Driver</a>):</p>

<ul>
<li><a href="videoportqueuedpc" title="VIDEOPORT_API BOOLEAN VideoPortQueueDpc(&#10;  [in] IN PVOID                 HwDeviceExtension,&#10;  [in] IN PMINIPORT_DPC_ROUTINE CallbackRoutine,&#10;  [in] IN PVOID                 Context&#10;);">VideoPortQueueDpc</a></li>
<li><a href="videoportzerodevicememory" title="VIDEOPORT_DEPRECATED VIDEOPORT_API VOID VideoPortZeroDeviceMemory(&#10;  [out] PVOID Destination,&#10;        ULONG Length&#10;);">VideoPortZeroDeviceMemory</a> and <a href="videoportzeromemory" title="VIDEOPORT_API VOID VideoPortZeroMemory(&#10;  [out] PVOID Destination,&#10;        ULONG Length&#10;);">VideoPortZeroMemory</a></li>
<li><a href="videoportlogerror" title="VIDEOPORT_API VOID VideoPortLogError(&#10;  PVOID                 HwDeviceExtension,&#10;  PVIDEO_REQUEST_PACKET Vrp,&#10;  VP_STATUS             ErrorCode,&#10;  ULONG                 UniqueId&#10;);">VideoPortLogError</a></li>
<li><a href="videoportstallexecution" title="VIDEOPORT_DEPRECATED VIDEOPORT_API VOID VideoPortStallExecution(&#10;  ULONG Microseconds&#10;);">VideoPortStallExecution</a> for no more than a very few microseconds. If possible, <em>HwVidInterrupt</em> should avoid calling this function.</li>
<li>All <strong>VideoPortRead</strong><em>Xxx</em> and <strong>VideoPortWrite</strong><em>Xxx</em> routines.</li>
<li><a href="videoportdisableinterrupt" title="VIDEOPORT_DEPRECATED VIDEOPORT_API VP_STATUS VideoPortDisableInterrupt(&#10;  PVOID HwDeviceExtension&#10;);">VideoPortDisableInterrupt</a> (obsolete)</li>
<li><a href="videoportenableinterrupt" title="VIDEOPORT_DEPRECATED VIDEOPORT_API VP_STATUS VideoPortEnableInterrupt(&#10;  PVOID HwDeviceExtension&#10;);">VideoPortEnableInterrupt</a> (obsolete)</li>
</ul>

<p><em>HwVidInterrupt</em> must <em>not</em> call any <strong>VideoPort</strong><em>Xxx</em> function that is not in the preceding list. Violation of this requirement will cause system failure (a "blue screen").</p>

<p>A <em>HwVidInterrupt</em> function cannot be pageable, nor can any function that it calls.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/">Functions Exported by the Video Port Driver</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/nc-video-pminiport_synchronize_routine">HwVidSynchronizeExecutionCallback</a></p>

<p><a href="videoportdisableinterrupt" title="VIDEOPORT_DEPRECATED VIDEOPORT_API VP_STATUS VideoPortDisableInterrupt(&#10;  PVOID HwDeviceExtension&#10;);">VideoPortDisableInterrupt</a></p>

<p><a href="videoportenableinterrupt" title="VIDEOPORT_DEPRECATED VIDEOPORT_API VP_STATUS VideoPortEnableInterrupt(&#10;  PVOID HwDeviceExtension&#10;);">VideoPortEnableInterrupt</a></p>

<p><a href="videoportlogerror" title="VIDEOPORT_API VOID VideoPortLogError(&#10;  PVOID                 HwDeviceExtension,&#10;  PVIDEO_REQUEST_PACKET Vrp,&#10;  VP_STATUS             ErrorCode,&#10;  ULONG                 UniqueId&#10;);">VideoPortLogError</a></p>

<p><a href="videoportstallexecution" title="VIDEOPORT_DEPRECATED VIDEOPORT_API VOID VideoPortStallExecution(&#10;  ULONG Microseconds&#10;);">VideoPortStallExecution</a></p>

<p><a href="videoportsynchronizeexecution" title="VIDEOPORT_DEPRECATED BOOLEAN VIDEOPORT_API VideoPortSynchronizeExecution(&#10;  PVOID                         HwDeviceExtension,&#10;  VIDEO_SYNCHRONIZE_PRIORITY    Priority,&#10;  PMINIPORT_SYNCHRONIZE_ROUTINE SynchronizeRoutine,&#10;  PVOID                         Context&#10;);">VideoPortSynchronizeExecution</a></p>

<p><a href="videoportzerodevicememory" title="VIDEOPORT_DEPRECATED VIDEOPORT_API VOID VideoPortZeroDeviceMemory(&#10;  [out] PVOID Destination,&#10;        ULONG Length&#10;);">VideoPortZeroDeviceMemory</a></p>

<p><a href="videoportzeromemory" title="VIDEOPORT_API VOID VideoPortZeroMemory(&#10;  [out] PVOID Destination,&#10;        ULONG Length&#10;);">VideoPortZeroMemory</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/nc-video-pvideo_hw_interrupt">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/video/nc-video-pvideo_hw_interrupt.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
