<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES {
  <a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a>  Header;
  NDIS_HANDLE         MiniportAdapterContext;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>               AttributeFlags;
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>                CheckForHangTimeInSeconds;
  NDIS_INTERFACE_TYPE InterfaceType;
} NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES, *PNDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/ns-ndis-_ndis_miniport_adapter_registration_attributes">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndis_miniport_adapter_registration_attributes.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ndis-_ndis_miniport_adapter_registration_attributes)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>_NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES structure</h1>
<h2>Description</h2>
<p>An NDIS miniport driver sets up an <strong>NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES</strong> structure to define
registration attributes that are associated with a miniport adapter.</p>
<h2>Members</h2>
<h3><code>Header</code></h3>
<p>The type, revision, and size of the <strong>NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES</strong> structure. This member is formatted as an <a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a> structure.</p>
<p>The miniport driver must set the <strong>Type</strong> member of <strong>Header</strong> to NDIS_OBJECT_TYPE_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES. To specify the version of the <strong>NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES</strong> structure, the driver must set the <strong>Revision</strong> member of <strong>Header</strong> to one of the following values:</p>
<h4>NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES_REVISION_2</h4>
<p>Added <strong>AttributeFlags</strong> flags for NDIS 6.30.</p>
<p>Set the <strong>Size</strong> member to NDIS_SIZEOF_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES_REVISION_2.</p>
<h4>NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES_REVISION_1</h4>
<p>Original version for NDIS 6.0.</p>
<p>Set the <strong>Size</strong> member to NDIS_SIZEOF_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES_REVISION_1.</p>
<h3><code>MiniportAdapterContext</code></h3>
<p>A handle to a context area that the miniport driver allocated in its
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a> function.
The miniport driver uses this context area to maintain state information for a miniport adapter.</p>
<h3><code>AttributeFlags</code></h3>
<p>A bitmask of flags that are combined with a bitwise OR. NDIS miniport drivers should set one or more of
the following flags:</p>
<h4>NDIS_MINIPORT_ATTRIBUTES_HARDWARE_DEVICE</h4>
<p>Set if the miniport driver directly controls a physical device. The physical device is assigned
hardware resources such as interrupts, I/O ports, memory-mapped I/O, or DMA channels that the miniport
driver should claim from the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a> function.</p>
<h4>NDIS_MINIPORT_ATTRIBUTES_NDIS_WDM</h4>
<p>Set if the lower-level interface of the miniport adapter is a WDM bus driver such as USB or IEEE</p>
<ol start="1394">
<li>In this case, the miniport driver does not allocate hardware resources such as I/O ports,
interrupts, memory-mapped I/O, or DMA channels. Instead, the driver communicates with the device
through the underlying bus driver's WDM interface.</li>
</ol>
<h4>NDIS_MINIPORT_ATTRIBUTES_BUS_MASTER</h4>
<p>Set if the caller's NIC is a bus-master DMA device.</p>
<h4>NDIS_MINIPORT_ATTRIBUTES_NO_HALT_ON_SUSPEND</h4>
<p>Set if NDIS should not call a miniport driver's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_halt">MiniportHaltEx</a> function before the
system transitions to a low-power (sleeping) state. Drivers that rely on hardware-maintained state
should not set this flag.</p>
<h4>NDIS_MINIPORT_ATTRIBUTES_SURPRISE_REMOVE_OK</h4>
<p>Set if the miniport driver can handle removal of its NIC without user notification. NDIS drivers receive
surprise removal notifications at the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_device_pnp_event_notify">MiniportDevicePnPEventNotify</a> function.</p>
<h4>NDIS_MINIPORT_ATTRIBUTES_NOT_CO_NDIS</h4>
<p>Set by a miniport driver that can support both connection-oriented and connectionless devices to indicate
that the device is a connectionless device.</p>
<h4>NDIS_MINIPORT_ATTRIBUTES_DO_NOT_BIND_TO_ALL_CO</h4>
<p>Set by a CoNDIS miniport driver that does not provide TAPI services. Setting
NDIS_MINIPORT_ATTRIBUTES_DO_NOT_BIND_TO_ALL_CO prevents NDIS from binding the miniport driver to the
NDIS TAPI proxy driver (NDPROXY). By default, NDIS binds NDPROXY to all CoNDIS miniport
drivers.</p>
<h4>NDIS_MINIPORT_ATTRIBUTES_CONTROLS_DEFAULT_PORT</h4>
<p>Set by a miniport driver that calls the
<a href="ndismnetpnpevent" title="NDIS_STATUS NdisMNetPnPEvent(&#10;  [in] NDIS_HANDLE                 MiniportAdapterHandle,&#10;       PNET_PNP_EVENT_NOTIFICATION NetPnPEventNotification&#10;);">NdisMNetPnPEvent</a> function to activate
its default port. If NDIS_MINIPORT_ATTRIBUTES_CONTROLS_DEFAULT_PORT is not set, the default port is
active. NDIS does not bind protocol drivers or attach filter modules to a miniport adapter if its
default port is not active.</p>
<h4>NDIS_MINIPORT_ATTRIBUTES_NO_PAUSE_ON_SUSPEND</h4>
<p>Starting with NDIS 6.30, this flag is set if the miniport driver is able to transition to a low-power state without being paused.</p>
<p>For more information about this flag, see the Remarks section.</p>
<h4>NDIS_MINIPORT_ATTRIBUTES_NO_OID_INTERCEPT_ON_NONDEFAULT_PORTS</h4>
<p>Starting with NDIS 6.30, this flag is set if the miniport driver handles OIDs on non-default ports that are usually intercepted
and handled by NDIS on its behalf. This does not change the behavior of OIDs destined to the default port.</p>
<h4>NDIS_MINIPORT_ATTRIBUTES_REGISTER_BUGCHECK_CALLBACK</h4>
<p>Starting with NDIS 6.30 miniports, NDIS will not invoke the miniport's MiniportShutdownEx handler during a BugCheck unless this flag is set. Most miniports should not set this flag.</p>
<h3><code>CheckForHangTimeInSeconds</code></h3>
<p>The time-out interval, in seconds, at which NDIS should call the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_check_for_hang">MiniportCheckForHangEx</a> function. If a miniport driver has not responded to an OID request or a send request
within two successive calls to
<em>MiniportCheckForHangEx</em>, NDIS can call the miniport driver's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_reset">MiniportResetEx</a> function.</p>
<p>The interval that NDIS uses when calling
<em>MiniportCheckForHangEx</em> is always a multiple of 2 seconds. For example, if you specify 5
seconds, the interval will be approximately 4 seconds.</p>
<p>If this member is 0, the default time-out interval is 2 seconds.</p>
<p><strong>Note</strong> The time-out interval must be greater than your miniport driver's initialization time. For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/miniport-adapter-check-for-hang-and-reset-operations">Miniport Adapter Check-for-Hang and Reset Operations</a>.</p>
<h3><code>InterfaceType</code></h3>
<p>The I/O bus interface type of the miniport adapter. This is usually the type of I/O bus on which
the miniport adapter is connected. The following values are supported in NDIS 6.0:</p>
<h4>NdisInterfaceInternal</h4>
<p>Specifies a host-specific internal interface.</p>
<h4>NdisInterfaceIsa</h4>
<p>Specifies the ISA interface.</p>
<h4>NdisInterfaceEisa</h4>
<p>Specifies the extended ISA (EISA) interface. This interface type is not supported in NDIS 6.0
and later versions.</p>
<h4>NdisInterfaceMca</h4>
<p>Refers to the MCA bus, which is no longer supported. This interface type is not supported in
NDIS 6.0 and later versions.</p>
<h4>NdisInterfaceTurboChannel</h4>
<p>Specifies the Turbo Channel interface.</p>
<h4>NdisInterfacePci</h4>
<p>Specifies the Peripheral Component Interconnect (PCI) interface.</p>
<h4>NdisInterfacePcMcia</h4>
<p>Specifies the Personal Computer Memory Card International Association (PC Card)
interface.</p>
<h4>NdisInterfaceCBus</h4>
<p>Specifies the CBus.</p>
<h4>NdisInterfaceMPIBus</h4>
<p>Specifies the MPIBus.</p>
<h4>NdisInterfaceMPSABus</h4>
<p>Specifies the MPSABus.</p>
<h4>NdisInterfaceProcessorInternal</h4>
<p>Specifies the processor internal bus.</p>
<h4>NdisInterfaceInternalPowerBus</h4>
<p>Specifies the internal power bus.</p>
<h4>NdisInterfacePNPISABus</h4>
<p>Specifies the PNPISABus.</p>
<h4>NdisInterfacePNPBus</h4>
<p>Specifies the PNPBus.</p>
<p>This parameter is irrelevant for intermediate drivers, which should specify 0 for this
member.</p>
<h2>Remarks</h2>
<p>A miniport driver passes a pointer to an NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES structure in
the
<em>MiniportAttributes</em> parameter of the
<a href="ndismsetminiportattributes" title="NDIS_STATUS NdisMSetMiniportAttributes(&#10;       NDIS_HANDLE                       NdisMiniportHandle,&#10;  [in] PNDIS_MINIPORT_ADAPTER_ATTRIBUTES MiniportAttributes&#10;);">NdisMSetMiniportAttributes</a> function. A miniport driver calls
<strong><a href="ndismsetminiportattributes" title="NDIS_STATUS NdisMSetMiniportAttributes(&#10;       NDIS_HANDLE                       NdisMiniportHandle,&#10;  [in] PNDIS_MINIPORT_ADAPTER_ATTRIBUTES MiniportAttributes&#10;);">NdisMSetMiniportAttributes</a></strong> from its
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a> function
during initialization.</p>
<p>Miniport drivers should set the attributes in NDIS_MINIPORT_ADAPTER_REGISTRATION_ATTRIBUTES as soon as
possible within
<em>MiniportInitializeEx</em>. Setting these attributes is mandatory.</p>
<h3>NDIS_MINIPORT_ATTRIBUTES_NO_PAUSE_ON_SUSPEND Flag</h3>
<p>NDIS issues an OID request of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-pnp-set-power">OID_PNP_SET_POWER</a> to the miniport driver before the underlying miniport adapter is transitioned to a low power state of D1, D2, or D3. When the driver handles this OID, it must prepare the miniport adapter for the transition to the lower power state and must not wait for the completion of pending receive packet indications.</p>
<p>In some cases, before NDIS issues the OID request of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-pnp-set-power">OID_PNP_SET_POWER</a> to the miniport driver, NDIS calls the miniport driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_pause">MiniportPause</a> function as described below:</p>
<ul>
<li>
If the <strong>NDIS_MINIPORT_ATTRIBUTES_NO_PAUSE_ON_SUSPEND</strong> flag is not set, NDIS calls the miniport driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_pause">MiniportPause</a> function before the OID request of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-pnp-set-power">OID_PNP_SET_POWER</a> is issued to the driver. Within the context of the <em>MiniportPause</em> call, the driver must wait for the completion of pending receive packet indications.
</li>
<li><p>If the <strong>NDIS_MINIPORT_ATTRIBUTES_NO_PAUSE_ON_SUSPEND</strong> flag is set, NDIS does not call the miniport driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_pause">MiniportPause</a> function before the OID request of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-pnp-set-power">OID_PNP_SET_POWER</a> is issued to the driver. When the miniport driver handles the OID request, it must not assume that it had been previously paused when preparing the miniport adapter for the transition to a low-power state.</p>
<p><strong>Note</strong> The exception to this occurs when a protocol or filter driver that supports NDIS 6.20 or earlier versions of NDIS is bound or attached to the miniport adapter. In this case, NDIS calls the miniport driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_pause">MiniportPause</a> function regardless of whether the miniport driver sets the <strong>NDIS_MINIPORT_ATTRIBUTES_NO_PAUSE_ON_SUSPEND</strong> flag.</p></li>
</ul>
<h2>See also</h2>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/miniport-adapter-check-for-hang-and-reset-operations">Miniport Adapter Check-for-Hang and Reset Operations</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_check_for_hang">MiniportCheckForHangEx</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_device_pnp_event_notify">MiniportDevicePnPEventNotify</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_halt">MiniportHaltEx</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_pause">MiniportPause</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_reset">MiniportResetEx</a></p>
<p><a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a></p>
<p><a href="ndismnetpnpevent" title="NDIS_STATUS NdisMNetPnPEvent(&#10;  [in] NDIS_HANDLE                 MiniportAdapterHandle,&#10;       PNET_PNP_EVENT_NOTIFICATION NetPnPEventNotification&#10;);">NdisMNetPnPEvent</a></p>
<p><a href="ndismsetminiportattributes" title="NDIS_STATUS NdisMSetMiniportAttributes(&#10;       NDIS_HANDLE                       NdisMiniportHandle,&#10;  [in] PNDIS_MINIPORT_ADAPTER_ATTRIBUTES MiniportAttributes&#10;);">NdisMSetMiniportAttributes</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-pnp-set-power">OID_PNP_SET_POWER</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/ns-ndis-_ndis_miniport_adapter_registration_attributes">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ndis/ns-ndis-_ndis_miniport_adapter_registration_attributes.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
