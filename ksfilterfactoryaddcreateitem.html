<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="KsFilterFactoryAddCreateItem - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>KsFilterFactoryAddCreateItem - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            KsFilterFactoryAddCreateItem - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ks.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">KSDDKAPI <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> KsFilterFactoryAddCreateItem(
  [in]           <a href="ksfilterfactory" title="typedef struct _KSFILTERFACTORY {&#10;  const KSFILTER_DESCRIPTOR *FilterDescriptor;&#10;  KSOBJECT_BAG              Bag;&#10;  PVOID                     Context;&#10;} KSFILTERFACTORY, *PKSFILTERFACTORY;">PKSFILTERFACTORY</a>     FilterFactory,
  [in]           PWSTR                RefString,
  [in, optional] PSECURITY_DESCRIPTOR SecurityDescriptor,
  [in]           <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                CreateItemFlags
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ks/nf-ks-ksfilterfactoryaddcreateitem">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ksfilterfactoryaddcreateitem.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ks-ksfilterfactoryaddcreateitem)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="ksfilterfactoryaddcreateitem-function">KsFilterFactoryAddCreateItem function</h1>

<h2 id="description">Description</h2>

<p>The <strong>KsFilterFactoryAddCreateItem</strong> function adds a new create item for the specified filter factory.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="filterfactory-in"><code>FilterFactory</code> [in]</h3>

<p>A pointer to a <a href="ksfilterfactory" title="typedef struct _KSFILTERFACTORY {&#10;  const KSFILTER_DESCRIPTOR *FilterDescriptor;&#10;  KSOBJECT_BAG              Bag;&#10;  PVOID                     Context;&#10;} KSFILTERFACTORY, *PKSFILTERFACTORY;">KSFILTERFACTORY</a> structure representing the filter factory to which to add a new create item.</p>

<h3 id="refstring-in"><code>RefString</code> [in]</h3>

<p>A pointer to a Unicode text string that identifies the create item.</p>

<h3 id="securitydescriptor-in-optional"><code>SecurityDescriptor</code> [in, optional]</h3>

<p>This parameter optionally contains a pointer to a <a href="pisecurity_descriptor" title="typedef struct _SECURITY_DESCRIPTOR {&#10;  UCHAR                       Revision;&#10;  UCHAR                       Sbz1;&#10;  SECURITY_DESCRIPTOR_CONTROL Control;&#10;  PSID                        Owner;&#10;  PSID                        Group;&#10;  PACL                        Sacl;&#10;  PACL                        Dacl;&#10;} SECURITY_DESCRIPTOR, *PISECURITY_DESCRIPTOR;">SECURITY_DESCRIPTOR</a> structure for this type of object. See the Microsoft Windows SDK For information about this structure. For related information, see <a href="ksobject_create_item" title="typedef struct {&#10;  PDRIVER_DISPATCH     Create;&#10;  PVOID                Context;&#10;  UNICODE_STRING       ObjectClass;&#10;  PSECURITY_DESCRIPTOR SecurityDescriptor;&#10;  ULONG                Flags;&#10;} KSOBJECT_CREATE_ITEM, *PKSOBJECT_CREATE_ITEM;">KSOBJECT_CREATE_ITEM</a>. If <strong>NULL</strong>, no descriptor is assigned.</p>

<h3 id="createitemflags-in"><code>CreateItemFlags</code> [in]</h3>

<p>See the table for the <strong>Flags</strong> member of <a href="ksobject_create_item" title="typedef struct {&#10;  PDRIVER_DISPATCH     Create;&#10;  PVOID                Context;&#10;  UNICODE_STRING       ObjectClass;&#10;  PSECURITY_DESCRIPTOR SecurityDescriptor;&#10;  ULONG                Flags;&#10;} KSOBJECT_CREATE_ITEM, *PKSOBJECT_CREATE_ITEM;">KSOBJECT_CREATE_ITEM</a>.</p>

<h2 id="return-value">Return value</h2>

<p><strong>KsFilterFactoryAddCreateItem</strong> returns success or failure of the attempt to add a new create item.</p>

<h2 id="remarks">Remarks</h2>

<p>Normally, only a single create item using the reference GUID supplied in the filter descriptor is added for the filter factory. This function allows the caller to add create items associated with the given filter factory.</p>

<p>For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/stream/initializing-an-avstream-minidriver">Initializing an AVStream Minidriver</a>.</p>

<h2 id="see-also">See also</h2>

<p><a href="ksobject_create_item" title="typedef struct {&#10;  PDRIVER_DISPATCH     Create;&#10;  PVOID                Context;&#10;  UNICODE_STRING       ObjectClass;&#10;  PSECURITY_DESCRIPTOR SecurityDescriptor;&#10;  ULONG                Flags;&#10;} KSOBJECT_CREATE_ITEM, *PKSOBJECT_CREATE_ITEM;">KSOBJECT_CREATE_ITEM</a></p>

<p><a href="ksaddobjectcreateitemtodeviceheader" title="KSDDKAPI NTSTATUS KsAddObjectCreateItemToDeviceHeader(&#10;  [in]           KSDEVICE_HEADER      Header,&#10;  [in]           PDRIVER_DISPATCH     Create,&#10;  [in]           PVOID                Context,&#10;  [in]           PWSTR                ObjectClass,&#10;  [in, optional] PSECURITY_DESCRIPTOR SecurityDescriptor&#10;);">KsAddObjectCreateItemToDeviceHeader</a></p>

<p><a href="ksaddobjectcreateitemtoobjectheader" title="KSDDKAPI NTSTATUS KsAddObjectCreateItemToObjectHeader(&#10;  [in]           KSOBJECT_HEADER      Header,&#10;  [in]           PDRIVER_DISPATCH     Create,&#10;  [in]           PVOID                Context,&#10;  [in]           PWSTR                ObjectClass,&#10;  [in, optional] PSECURITY_DESCRIPTOR SecurityDescriptor&#10;);">KsAddObjectCreateItemToObjectHeader</a></p>

<p><a href="ksallocateobjectcreateitem" title="KSDDKAPI NTSTATUS KsAllocateObjectCreateItem(&#10;  [in]           KSDEVICE_HEADER       Header,&#10;  [in]           PKSOBJECT_CREATE_ITEM CreateItem,&#10;  [in]           BOOLEAN               AllocateEntry,&#10;  [in, optional] PFNKSITEMFREECALLBACK ItemFreeCallback&#10;);">KsAllocateObjectCreateItem</a></p>

<p><a href="ksfreeobjectcreateitem" title="KSDDKAPI NTSTATUS KsFreeObjectCreateItem(&#10;  [in] KSDEVICE_HEADER Header,&#10;  [in] PUNICODE_STRING CreateItem&#10;);">KsFreeObjectCreateItem</a></p>

<p><a href="ksqueryobjectcreateitem" title="KSDDKAPI PKSOBJECT_CREATE_ITEM KsQueryObjectCreateItem(&#10;  [in] KSOBJECT_HEADER Header&#10;);">KsQueryObjectCreateItem</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ks/nf-ks-ksfilterfactoryaddcreateitem">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ks/nf-ks-ksfilterfactoryaddcreateitem.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
