<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="KeQuerySystemTimePrecise - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>KeQuerySystemTimePrecise - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github.ntdoc.min.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github-dark-dimmed.ntdoc.min.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            KeQuerySystemTimePrecise - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header language-cpp">// wdm.h

</span><span class="ntdoc-code-intro language-cpp"></span><span class="ntdoc-code-body language-cpp">VOID KeQuerySystemTimePrecise(
  [out] PLARGE_INTEGER CurrentTime
);</span><span class="ntdoc-code-footer language-cpp"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-kequerysystemtimeprecise">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/kequerysystemtimeprecise.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-wdm-kequerysystemtimeprecise)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>KeQuerySystemTimePrecise function</h1>
<h2>Description</h2>
<p>The <strong>KeQuerySystemTimePrecise</strong> routine retrieves the current <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/SysInfo/system-time">system time</a>, and is more precise than the <a href="kequerysystemtime" title="VOID KeQuerySystemTime(&#10;  [out] PLARGE_INTEGER CurrentTime&#10;);">KeQuerySystemTime</a> routine.</p>
<h2>Parameters</h2>
<h3><code>CurrentTime</code> [out]</h3>
<p>A pointer to a LARGE_INTEGER variable into which the routine writes the current system time.</p>
<h2>Remarks</h2>
<p>System time is a count of 100-nanosecond intervals since January 1, 1601. This value is computed for the GMT time zone. To adjust this value for the local time zone, call the <a href="exsystemtimetolocaltime" title="VOID ExSystemTimeToLocalTime(&#10;  [in]  PLARGE_INTEGER SystemTime,&#10;  [out] PLARGE_INTEGER LocalTime&#10;);">ExSystemTimeToLocalTime</a> routine.</p>
<p><strong>KeQuerySystemTimePrecise</strong> is similar to the <strong><a href="kequerysystemtime" title="VOID KeQuerySystemTime(&#10;  [out] PLARGE_INTEGER CurrentTime&#10;);">KeQuerySystemTime</a></strong> routine, but is more precise. The system time reported by <strong><a href="kequerysystemtime" title="VOID KeQuerySystemTime(&#10;  [out] PLARGE_INTEGER CurrentTime&#10;);">KeQuerySystemTime</a></strong> is based on the latest tick of the system clock timer. The clock timer is the hardware timer that periodically generates interrupts for the system clock. The uniform period between clock timer interrupts is referred to as a system clock tick, and is typically in the range of 500 microseconds to 15.625 milliseconds, depending on the hardware platform. The system time value retrieved by <strong><a href="kequerysystemtime" title="VOID KeQuerySystemTime(&#10;  [out] PLARGE_INTEGER CurrentTime&#10;);">KeQuerySystemTime</a></strong> is accurate within a system clock tick.</p>
<p>To provide a system time value that is more accurate than that of <strong><a href="kequerysystemtime" title="VOID KeQuerySystemTime(&#10;  [out] PLARGE_INTEGER CurrentTime&#10;);">KeQuerySystemTime</a></strong>, <strong>KeQuerySystemTimePrecise</strong> uses the system performance counter to measure the time elapsed since the last clock timer interrupt, and adds this time to the system clock time that it calculates from the clock timer count. The system time reported by <strong>KeQuerySystemTimePrecise</strong> is accurate to within a microsecond.</p>
<p>On some hardware platforms, a <strong>KeQuerySystemTimePrecise</strong> call might be slower than a <strong><a href="kequerysystemtime" title="VOID KeQuerySystemTime(&#10;  [out] PLARGE_INTEGER CurrentTime&#10;);">KeQuerySystemTime</a></strong> call. The reason is that <strong>KeQuerySystemTimePrecise</strong> reads the performance counter, which can introduce an additional delay. For more information, see <a href="kequeryperformancecounter" title="NTHALAPI LARGE_INTEGER KeQueryPerformanceCounter(&#10;  [out, optional] PLARGE_INTEGER PerformanceFrequency&#10;);">KeQueryPerformanceCounter</a>.</p>
<p>Call the <a href="kequerytimeincrement" title="ULONG KeQueryTimeIncrement();">KeQueryTimeIncrement</a> routine to determine the duration of a system clock tick.</p>
<h2>See also</h2>
<p><a href="exsystemtimetolocaltime" title="VOID ExSystemTimeToLocalTime(&#10;  [in]  PLARGE_INTEGER SystemTime,&#10;  [out] PLARGE_INTEGER LocalTime&#10;);">ExSystemTimeToLocalTime</a></p>
<p><a href="kequeryperformancecounter" title="NTHALAPI LARGE_INTEGER KeQueryPerformanceCounter(&#10;  [out, optional] PLARGE_INTEGER PerformanceFrequency&#10;);">KeQueryPerformanceCounter</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-kequerysystemtime~r1">KeQuerySystemTime</a></p>
<p><a href="kequerytickcount" title="VOID&#10;KeQueryTickCount (&#10;    _Out_ PLARGE_INTEGER CurrentCount&#10;    );">KeQueryTickCount</a></p>
<p><a href="kequerytimeincrement" title="ULONG KeQueryTimeIncrement();">KeQueryTimeIncrement</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-kequerysystemtimeprecise">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/nf-wdm-kequerysystemtimeprecise.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script src="modules/highlight.js/highlight.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
