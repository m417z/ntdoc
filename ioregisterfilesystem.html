<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="IoRegisterFileSystem - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>IoRegisterFileSystem - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            IoRegisterFileSystem - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntifs.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">VOID IoRegisterFileSystem(
  [in] __drv_aliasesMem <a href="device_object" title="typedef struct _DEVICE_OBJECT {&#10;  CSHORT                   Type;&#10;  USHORT                   Size;&#10;  LONG                     ReferenceCount;&#10;  struct _DRIVER_OBJECT    *DriverObject;&#10;  struct _DEVICE_OBJECT    *NextDevice;&#10;  struct _DEVICE_OBJECT    *AttachedDevice;&#10;  struct _IRP              *CurrentIrp;&#10;  PIO_TIMER                Timer;&#10;  ULONG                    Flags;&#10;  ULONG                    Characteristics;&#10;  __volatile PVPB          Vpb;&#10;  PVOID                    DeviceExtension;&#10;  DEVICE_TYPE              DeviceType;&#10;  CCHAR                    StackSize;&#10;  union {&#10;    LIST_ENTRY         ListEntry;&#10;    WAIT_CONTEXT_BLOCK Wcb;&#10;  } Queue;&#10;  ULONG                    AlignmentRequirement;&#10;...">PDEVICE_OBJECT</a> DeviceObject
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/nf-ntifs-ioregisterfilesystem">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ioregisterfilesystem.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ntifs-ioregisterfilesystem)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="ioregisterfilesystem-function">IoRegisterFileSystem function</h1>

<h2 id="description">Description</h2>

<p>The <strong>IoRegisterFileSystem</strong> routine adds a file system's control device object to the global file system queue.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="deviceobject-in"><code>DeviceObject</code> [in]</h3>

<p>Pointer to the control device object for the file system.</p>

<h2 id="remarks">Remarks</h2>

<p><strong>IoRegisterFileSystem</strong> registers a file system as an active file system by inserting the file system's control device object into the global file system queue, and increments the reference count on the file system's control device object.</p>

<p>The file system control device object's device type must be one of the following:</p>

<p>FILE_DEVICE_NETWORK_FILE_SYSTEM</p>

<p>FILE_DEVICE_CD_ROM_FILE_SYSTEM</p>

<p>FILE_DEVICE_DISK_FILE_SYSTEM</p>

<p>If the device type is not one of these values, the file system is not registered.</p>

<p>In addition, the file system control device object must be named. If it is not named, this does not cause the call to <strong>IoRegisterFileSystem</strong> to fail. However, file system filter drivers, as well as many system components and support routines, use this name to distinguish the file system's control device objects, which are always named, from its volume device objects, which are never named.</p>

<p>If the DO_LOW_PRIORITY_FILESYSTEM flag is set on the file system's control device object, the device object is inserted into the next-to-last position in the queue. (The RAW file system occupies the last position in the queue.) If this flag is not set, the device object is inserted at the head of the queue.</p>

<p><strong>IoRegisterFileSystem</strong> calls the notification routines of file system filter drivers that have registered for this notification by calling <a href="ioregisterfsregistrationchange" title="NTSTATUS IoRegisterFsRegistrationChange(&#10;  [in] PDRIVER_OBJECT          DriverObject,&#10;  [in] PDRIVER_FS_NOTIFICATION DriverNotificationRoutine&#10;);">IoRegisterFsRegistrationChange</a> or <a href="ioregisterfsregistrationchangeex" title="NTSTATUS IoRegisterFsRegistrationChangeEx(&#10;  [in] PDRIVER_OBJECT          DriverObject,&#10;  [in] PDRIVER_FS_NOTIFICATION DriverNotificationRoutine&#10;);">IoRegisterFsRegistrationChangeEx</a>.</p>

<p><strong>Note</strong> In Microsoft Windows XP and later, when a file system filter driver calls <a href="ioregisterfsregistrationchange" title="NTSTATUS IoRegisterFsRegistrationChange(&#10;  [in] PDRIVER_OBJECT          DriverObject,&#10;  [in] PDRIVER_FS_NOTIFICATION DriverNotificationRoutine&#10;);">IoRegisterFsRegistrationChange</a>, its notification routine is also called immediately for any file systems that have already called <strong>IoRegisterFileSystem</strong>.</p>

<h2 id="see-also">See also</h2>

<p><a href="ioregisterfsregistrationchange" title="NTSTATUS IoRegisterFsRegistrationChange(&#10;  [in] PDRIVER_OBJECT          DriverObject,&#10;  [in] PDRIVER_FS_NOTIFICATION DriverNotificationRoutine&#10;);">IoRegisterFsRegistrationChange</a></p>

<p><a href="ioregisterfsregistrationchangeex" title="NTSTATUS IoRegisterFsRegistrationChangeEx(&#10;  [in] PDRIVER_OBJECT          DriverObject,&#10;  [in] PDRIVER_FS_NOTIFICATION DriverNotificationRoutine&#10;);">IoRegisterFsRegistrationChangeEx</a></p>

<p><a href="iounregisterfilesystem" title="VOID IoUnregisterFileSystem(&#10;  [in] PDEVICE_OBJECT DeviceObject&#10;);">IoUnregisterFileSystem</a></p>

<p><a href="iounregisterfsregistrationchange" title="VOID IoUnregisterFsRegistrationChange(&#10;  [in] PDRIVER_OBJECT          DriverObject,&#10;  [in] PDRIVER_FS_NOTIFICATION DriverNotificationRoutine&#10;);">IoUnregisterFsRegistrationChange</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/nf-ntifs-ioregisterfilesystem">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntifs/nf-ntifs-ioregisterfilesystem.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
