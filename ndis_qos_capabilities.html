<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NDIS_QOS_CAPABILITIES - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NDIS_QOS_CAPABILITIES - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NDIS_QOS_CAPABILITIES - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _NDIS_QOS_CAPABILITIES {
  <a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a> Header;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>              Flags;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>              MaxNumTrafficClasses;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>              MaxNumEtsCapableTrafficClasses;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>              MaxNumPfcEnabledTrafficClasses;
} NDIS_QOS_CAPABILITIES, *PNDIS_QOS_CAPABILITIES;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddndis/ns-ntddndis-_ndis_qos_capabilities">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndis_qos_capabilities.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntddndis-_ndis_qos_capabilities)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_ndis_qos_capabilities-structure">_NDIS_QOS_CAPABILITIES structure</h1>

<h2 id="description">Description</h2>

<p>The <strong>NDIS_QOS_CAPABILITIES</strong> structure specifies the NDIS Quality of Service (QoS) capabilities of a network adapter that supports the IEEE 802.1 Data Center Bridging (DCB) interface.</p>

<h2 id="members">Members</h2>

<h3 id="header"><code>Header</code></h3>

<p>The type, revision, and size of the <strong>NDIS_QOS_CAPABILITIES</strong> structure. This member is formatted as an <a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a> structure.</p>

<p>The miniport driver must set the <strong>Type</strong> member of <strong>Header</strong> to NDIS_OBJECT_TYPE_QOS_CAPABILITIES. To specify the version of the <strong>NDIS_QOS_CAPABILITIES</strong> structure, the driver must set the <strong>Revision</strong> member of <strong>Header</strong> to the following value:</p>

<h4 id="ndis_qos_capabilities_revision_1">NDIS_QOS_CAPABILITIES_REVISION_1</h4>

<p>Original version for NDIS 6.30 and later.</p>

<p>Set the <strong>Size</strong> member to NDIS_SIZEOF_QOS_CAPABILITIES_REVISION_1.</p>

<h3 id="flags"><code>Flags</code></h3>

<p>A <strong><a href="ulong" title="typedef unsigned long ULONG;">ULONG</a></strong> value that contains a bitwise <strong>OR</strong> of flags that specify the NDIS QoS capabilities that a network adapter supports. The following flags are defined:</p>

<h4 id="ndis_qos_capabilities_strict_tsa_supported">NDIS_QOS_CAPABILITIES_STRICT_TSA_SUPPORTED</h4>

<p>If this flag is set, the network adapter supports the strict priority transmission selection algorithm (TSA). For more information about this algorithm, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/strict-priority-algorithm">Strict Priority Algorithm</a>.</p>

<p><strong>Note</strong> In order to be compliant with DCB, the network adapter must support the strict priority TSA.</p>

<h4 id="ndis_qos_capabilities_macsec_bypass_supported">NDIS_QOS_CAPABILITIES_MACSEC_BYPASS_SUPPORTED</h4>

<p>If this flag is set, the network adapter supports the ability to bypass media access control security (MACsec) processing. For more information about MACsec, refer to the 802.1AE-2006 standard.</p>

<h4 id="ndis_qos_capabilities_cee_dcbx_supported">NDIS_QOS_CAPABILITIES_CEE_DCBX_SUPPORTED</h4>

<p>If this flag is set, the network adapter and miniport driver supports the protocols that pre-date the IEEE 802.1Qaz Data Center Bridging Exchange (DCBX) protocol. These protocols include the Converged Enhanced Ethernet (CEE) suite of protocols.</p>

<h4 id="ndis_qos_capabilities_ieee_dcbx_supported">NDIS_QOS_CAPABILITIES_IEEE_DCBX_SUPPORTED</h4>

<p>If this flag is set, the network adapter and miniport driver supports the IEEE 802.1Qaz DCBX protocol. The DCBX protocol allows DCB parameters to be exchanged between two directly connected peers. This allows these peers to adapt and tune these parameters in order to optimize data transfer over the connection.
For more information about this protocol, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/overview-of-data-center-bridging">Overview of Data Center Bridging</a>.</p>

<p><strong>Note</strong> If this flag is set, the miniport driver must reject any send requests for DCBX packets.</p>

<h3 id="maxnumtrafficclasses"><code>MaxNumTrafficClasses</code></h3>

<p>A <strong><a href="ulong" title="typedef unsigned long ULONG;">ULONG</a></strong> value that specifies the maximum number of NDIS QoS traffic classes that the network adapter supports. For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/ndis-qos-traffic-classes">NDIS QoS Traffic Classes</a>.</p>

<p><strong>Note</strong> In order for the network adapter to support NDIS QoS for DCB, it must support at least three traffic classes.</p>

<h3 id="maxnumetscapabletrafficclasses"><code>MaxNumEtsCapableTrafficClasses</code></h3>

<p>A <strong><a href="ulong" title="typedef unsigned long ULONG;">ULONG</a></strong> value that specifies the maximum number of QoS traffic classes that the network adapter can use with the Enhanced Transmission Selection (ETS) algorithm. This value must be less than or equal to the value of the <strong>MaxNumTrafficClasses</strong> member.</p>

<p>For more information about ETS, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/enhanced-transmission-selection--ets--algorithm">Enhanced Transmission Selection (ETS) Algorithm</a>.</p>

<p><strong>Note</strong> In order for the network adapter to support NDIS QoS for DCB, it must support at least two ETS-capable traffic classes.</p>

<h3 id="maxnumpfcenabledtrafficclasses"><code>MaxNumPfcEnabledTrafficClasses</code></h3>

<p>A <strong><a href="ulong" title="typedef unsigned long ULONG;">ULONG</a></strong> value that specifies the maximum number of QoS traffic classes that the network adapter can use with the Priority-based Flow Control (PFC) algorithm. This value must be less than or equal to the value of the <strong>MaxNumTrafficClasses</strong> member.</p>

<p>For more information about PFC, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/priority-based-flow-control--pfc">Priority-based Flow Control (PFC)</a>.</p>

<p><strong>Note</strong> In order for the network adapter to support NDIS QoS for DCB, it must support at least one PFC-capable traffic class.</p>

<h2 id="remarks">Remarks</h2>

<p>The miniport driver registers the NDIS QoS capabilities of the underlying network adapter from the driver's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a> function by following these steps:</p>

<ol>
<li>The miniport driver initializes an <strong>NDIS_QOS_CAPABILITIES</strong> structure with the NDIS QoS capabilities of the network adapter.</li>
<li>The miniport driver initializes an <a href="ndis_miniport_adapter_hardware_assist_attributes" title="typedef struct _NDIS_MINIPORT_ADAPTER_HARDWARE_ASSIST_ATTRIBUTES {&#10;  NDIS_OBJECT_HEADER                Header;&#10;  PNDIS_HD_SPLIT_ATTRIBUTES         HDSplitAttributes;&#10;  PNDIS_RECEIVE_FILTER_CAPABILITIES HardwareReceiveFilterCapabilities;&#10;  PNDIS_RECEIVE_FILTER_CAPABILITIES CurrentReceiveFilterCapabilities;&#10;  PNDIS_NIC_SWITCH_CAPABILITIES     HardwareNicSwitchCapabilities;&#10;  PNDIS_NIC_SWITCH_CAPABILITIES     CurrentNicSwitchCapabilities;&#10;  PNDIS_SRIOV_CAPABILITIES          HardwareSriovCapabilities;&#10;  PNDIS_SRIOV_CAPABILITIES          CurrentSriovCapabilities;&#10;  PNDIS_QOS_CAPABILITIES            HardwareQosCapabilities;&#10;  PNDIS_QOS_CAPABILITIES            CurrentQosCapabilities;&#10;  PNDIS_GFT_OFFLOAD_CAPABILITIES    HardwareGftOffloadCapabilities;&#10;  PNDIS_GFT_OFFLOAD_CAPABILITIES    CurrentGftOffloadCapabilities;&#10;} NDIS_MINIPORT_ADAPTER_HARDWARE_ASSIST_ATTRIBUTES, *PNDIS_MINIPORT_ADAPTER_HARDWARE_ASSIST_ATTRIBUTES;">NDIS_MINIPORT_ADAPTER_HARDWARE_ASSIST_ATTRIBUTES</a>
structure with the other hardware-assisted capabilities of the network adapter. The driver sets the <strong>HardwareQosCapabilities</strong> member of the <strong><a href="ndis_miniport_adapter_hardware_assist_attributes" title="typedef struct _NDIS_MINIPORT_ADAPTER_HARDWARE_ASSIST_ATTRIBUTES {&#10;  NDIS_OBJECT_HEADER                Header;&#10;  PNDIS_HD_SPLIT_ATTRIBUTES         HDSplitAttributes;&#10;  PNDIS_RECEIVE_FILTER_CAPABILITIES HardwareReceiveFilterCapabilities;&#10;  PNDIS_RECEIVE_FILTER_CAPABILITIES CurrentReceiveFilterCapabilities;&#10;  PNDIS_NIC_SWITCH_CAPABILITIES     HardwareNicSwitchCapabilities;&#10;  PNDIS_NIC_SWITCH_CAPABILITIES     CurrentNicSwitchCapabilities;&#10;  PNDIS_SRIOV_CAPABILITIES          HardwareSriovCapabilities;&#10;  PNDIS_SRIOV_CAPABILITIES          CurrentSriovCapabilities;&#10;  PNDIS_QOS_CAPABILITIES            HardwareQosCapabilities;&#10;  PNDIS_QOS_CAPABILITIES            CurrentQosCapabilities;&#10;  PNDIS_GFT_OFFLOAD_CAPABILITIES    HardwareGftOffloadCapabilities;&#10;  PNDIS_GFT_OFFLOAD_CAPABILITIES    CurrentGftOffloadCapabilities;&#10;} NDIS_MINIPORT_ADAPTER_HARDWARE_ASSIST_ATTRIBUTES, *PNDIS_MINIPORT_ADAPTER_HARDWARE_ASSIST_ATTRIBUTES;">NDIS_MINIPORT_ADAPTER_HARDWARE_ASSIST_ATTRIBUTES</a></strong> structure to a pointer to the <strong>NDIS_QOS_CAPABILITIES</strong> structure.</li>
<li>The miniport driver calls <a href="ndismsetminiportattributes" title="NDIS_STATUS NdisMSetMiniportAttributes(&#10;       NDIS_HANDLE                       NdisMiniportHandle,&#10;  [in] PNDIS_MINIPORT_ADAPTER_ATTRIBUTES MiniportAttributes&#10;);">NdisMSetMiniportAttributes</a> and sets the <em>MiniportAttributes</em> parameter to
a pointer to the <a href="ndis_miniport_adapter_hardware_assist_attributes" title="typedef struct _NDIS_MINIPORT_ADAPTER_HARDWARE_ASSIST_ATTRIBUTES {&#10;  NDIS_OBJECT_HEADER                Header;&#10;  PNDIS_HD_SPLIT_ATTRIBUTES         HDSplitAttributes;&#10;  PNDIS_RECEIVE_FILTER_CAPABILITIES HardwareReceiveFilterCapabilities;&#10;  PNDIS_RECEIVE_FILTER_CAPABILITIES CurrentReceiveFilterCapabilities;&#10;  PNDIS_NIC_SWITCH_CAPABILITIES     HardwareNicSwitchCapabilities;&#10;  PNDIS_NIC_SWITCH_CAPABILITIES     CurrentNicSwitchCapabilities;&#10;  PNDIS_SRIOV_CAPABILITIES          HardwareSriovCapabilities;&#10;  PNDIS_SRIOV_CAPABILITIES          CurrentSriovCapabilities;&#10;  PNDIS_QOS_CAPABILITIES            HardwareQosCapabilities;&#10;  PNDIS_QOS_CAPABILITIES            CurrentQosCapabilities;&#10;  PNDIS_GFT_OFFLOAD_CAPABILITIES    HardwareGftOffloadCapabilities;&#10;  PNDIS_GFT_OFFLOAD_CAPABILITIES    CurrentGftOffloadCapabilities;&#10;} NDIS_MINIPORT_ADAPTER_HARDWARE_ASSIST_ATTRIBUTES, *PNDIS_MINIPORT_ADAPTER_HARDWARE_ASSIST_ATTRIBUTES;">NDIS_MINIPORT_ADAPTER_HARDWARE_ASSIST_ATTRIBUTES</a>
structure.</li>
</ol>

<p>The <strong>NDIS_QOS_CAPABILITIES</strong> structure is also returned in OID query requests of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-qos-current-capabilities">OID_QOS_CURRENT_CAPABILITIES</a> and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-qos-hardware-capabilities">OID_QOS_HARDWARE_CAPABILITIES</a>.</p>

<h2 id="see-also">See also</h2>

<p><a href="ndis_miniport_adapter_hardware_assist_attributes" title="typedef struct _NDIS_MINIPORT_ADAPTER_HARDWARE_ASSIST_ATTRIBUTES {&#10;  NDIS_OBJECT_HEADER                Header;&#10;  PNDIS_HD_SPLIT_ATTRIBUTES         HDSplitAttributes;&#10;  PNDIS_RECEIVE_FILTER_CAPABILITIES HardwareReceiveFilterCapabilities;&#10;  PNDIS_RECEIVE_FILTER_CAPABILITIES CurrentReceiveFilterCapabilities;&#10;  PNDIS_NIC_SWITCH_CAPABILITIES     HardwareNicSwitchCapabilities;&#10;  PNDIS_NIC_SWITCH_CAPABILITIES     CurrentNicSwitchCapabilities;&#10;  PNDIS_SRIOV_CAPABILITIES          HardwareSriovCapabilities;&#10;  PNDIS_SRIOV_CAPABILITIES          CurrentSriovCapabilities;&#10;  PNDIS_QOS_CAPABILITIES            HardwareQosCapabilities;&#10;  PNDIS_QOS_CAPABILITIES            CurrentQosCapabilities;&#10;  PNDIS_GFT_OFFLOAD_CAPABILITIES    HardwareGftOffloadCapabilities;&#10;  PNDIS_GFT_OFFLOAD_CAPABILITIES    CurrentGftOffloadCapabilities;&#10;} NDIS_MINIPORT_ADAPTER_HARDWARE_ASSIST_ATTRIBUTES, *PNDIS_MINIPORT_ADAPTER_HARDWARE_ASSIST_ATTRIBUTES;">NDIS_MINIPORT_ADAPTER_HARDWARE_ASSIST_ATTRIBUTES</a></p>

<p><a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a></p>

<p><a href="ndismsetminiportattributes" title="NDIS_STATUS NdisMSetMiniportAttributes(&#10;       NDIS_HANDLE                       NdisMiniportHandle,&#10;  [in] PNDIS_MINIPORT_ADAPTER_ATTRIBUTES MiniportAttributes&#10;);">NdisMSetMiniportAttributes</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-qos-current-capabilities">OID_QOS_CURRENT_CAPABILITIES</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-qos-hardware-capabilities">OID_QOS_HARDWARE_CAPABILITIES</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddndis/ns-ntddndis-_ndis_qos_capabilities">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddndis/ns-ntddndis-_ndis_qos_capabilities.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
