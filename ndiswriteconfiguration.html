<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NdisWriteConfiguration - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NdisWriteConfiguration - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NdisWriteConfiguration - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">VOID NdisWriteConfiguration(
  [out] PNDIS_STATUS                  Status,
  [in]  NDIS_HANDLE                   ConfigurationHandle,
  [in]  PNDIS_STRING                  Keyword,
  [in]  <a href="ndis_configuration_parameter" title="typedef struct _NDIS_CONFIGURATION_PARAMETER {&#10;  NDIS_PARAMETER_TYPE ParameterType;&#10;  union {&#10;    ULONG       IntegerData;&#10;    NDIS_STRING StringData;&#10;    BINARY_DATA BinaryData;&#10;  } ParameterData;&#10;} NDIS_CONFIGURATION_PARAMETER, *PNDIS_CONFIGURATION_PARAMETER;">PNDIS_CONFIGURATION_PARAMETER</a> ParameterValue
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndiswriteconfiguration">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndiswriteconfiguration.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ndis-ndiswriteconfiguration)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>NdisWriteConfiguration function</h1>
<h2>Description</h2>
<p>The
<strong>NdisWriteConfiguration</strong> function writes a caller-supplied value for a specified entry into the
registry. This function must be invoked serially with respect to itself and the <a href="ndisreadconfiguration" title="VOID NdisReadConfiguration(&#10;  [out] PNDIS_STATUS                  Status,&#10;  [out] PNDIS_CONFIGURATION_PARAMETER *ParameterValue,&#10;  [in]  NDIS_HANDLE                   ConfigurationHandle,&#10;  [in]  PNDIS_STRING                  Keyword,&#10;  [in]  NDIS_PARAMETER_TYPE           ParameterType&#10;);">NdisReadConfiguration</a> function.</p>
<h2>Parameters</h2>
<h3><code>Status</code> [out]</h3>
<p>A pointer to a caller-supplied variable in which this function returns the status of the call as
one of the following:</p>
<h4>NDIS_STATUS_SUCCESS</h4>
<p>The supplied value at
<em>ParameterValue</em> was written into the registry. If this is a new entry, the name at
<em>Keyword</em> also was written into the registry.</p>
<h4>NDIS_STATUS_NOT_SUPPORTED</h4>
<p>The supplied
<strong>ParameterType</strong> is invalid.</p>
<h4>NDIS_STATUS_RESOURCES</h4>
<p>NDIS could not allocate resources, usually enough memory, to transfer the requested information
to the registry.</p>
<h4>NDIS_STATUS_FAILURE</h4>
<p>The requested information could not be written.</p>
<h3><code>ConfigurationHandle</code> [in]</h3>
<p>The handle to a registry key that was returned by the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/ndis-ndisopenconfigurationex">NdisOpenConfigurationEx</a>,
<a href="ndisopenconfigurationkeybyindex" title="VOID NdisOpenConfigurationKeyByIndex(&#10;  [out] PNDIS_STATUS Status,&#10;  [in]  NDIS_HANDLE  ConfigurationHandle,&#10;  [in]  ULONG        Index,&#10;  [out] PNDIS_STRING KeyName,&#10;  [out] PNDIS_HANDLE KeyHandle&#10;);">NdisOpenConfigurationKeyByIndex</a>, or
<a href="ndisopenconfigurationkeybyname" title="VOID NdisOpenConfigurationKeyByName(&#10;  [out] PNDIS_STATUS Status,&#10;  [in]  NDIS_HANDLE  ConfigurationHandle,&#10;  [in]  PNDIS_STRING SubKeyName,&#10;  [out] PNDIS_HANDLE SubKeyHandle&#10;);">NdisOpenConfigurationKeyByName</a> function.</p>
<h3><code>Keyword</code> [in]</h3>
<p>A pointer to an NDIS_STRING type describing a caller-supplied counted string, in the
system-default character set, specifying the name of an entry for which to write the value. For
Microsoft Windows 2000 and later drivers, this string contains Unicode characters. That is, for Windows
2000 and later, NDIS defines the NDIS_STRING type as a
<a href="unicode_string" title="typedef struct _UNICODE_STRING&#10;{&#10;    USHORT Length;&#10;    USHORT MaximumLength;&#10;    _Field_size_bytes_part_opt_(MaximumLength, Length) PWCH Buffer;&#10;} UNICODE_STRING, *PUNICODE_STRING;">UNICODE_STRING</a> type.</p>
<h3><code>ParameterValue</code> [in]</h3>
<p>Pointer to a caller-supplied
<a href="ndis_configuration_parameter" title="typedef struct _NDIS_CONFIGURATION_PARAMETER {&#10;  NDIS_PARAMETER_TYPE ParameterType;&#10;  union {&#10;    ULONG       IntegerData;&#10;    NDIS_STRING StringData;&#10;    BINARY_DATA BinaryData;&#10;  } ParameterData;&#10;} NDIS_CONFIGURATION_PARAMETER, *PNDIS_CONFIGURATION_PARAMETER;">NDIS_CONFIGURATION_PARAMETER</a> structure.</p>
<h2>Remarks</h2>
<p>If an entry of the same name as at
<em>Keyword</em> already exists under the opened registry key,
<strong>NdisWriteConfiguration</strong> replaces its current value with the caller-supplied value. Otherwise,
<strong>NdisWriteConfiguration</strong> adds a new value entry with the given name and supplied value to the
registry.</p>
<p>In the configuration registry of Windows 2000 and later versions, an NDIS
<em>Keyword</em> is a synonym for a
<em>value entry name</em>. Such a name is a counted sequence of Unicode characters, terminated with a
null character.</p>
<p><strong>NdisWriteConfiguration</strong> buffers and copies the caller-supplied string at
<em>Keyword</em> and the caller-supplied data specified at
<em>ParameterValue</em> . This memory is freed when the driver releases the
<em>ConfigurationHandle</em> with the
<a href="ndiscloseconfiguration" title="VOID NdisCloseConfiguration(&#10;  [in] NDIS_HANDLE ConfigurationHandle&#10;);">NdisCloseConfiguration</a> function.
The caller of
<strong>NdisWriteConfiguration</strong> is responsible for releasing the buffered string at
<em>Keyword</em> and the memory allocated for the
<a href="ndis_configuration_parameter" title="typedef struct _NDIS_CONFIGURATION_PARAMETER {&#10;  NDIS_PARAMETER_TYPE ParameterType;&#10;  union {&#10;    ULONG       IntegerData;&#10;    NDIS_STRING StringData;&#10;    BINARY_DATA BinaryData;&#10;  } ParameterData;&#10;} NDIS_CONFIGURATION_PARAMETER, *PNDIS_CONFIGURATION_PARAMETER;">NDIS_CONFIGURATION_PARAMETER</a> structure.</p>
<p>As an alternative to calling
<strong>NdisWriteConfiguration</strong>, every NDIS driver can set up configuration information in the registry for
itself using the AddReg directive in the driver's INF file.</p>
<p>For more information about setup and installation files for Windows 2000 and later versions, see
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/install/overview-of-device-and-driver-installation">Device Installation
Overview</a>.</p>
<h2>See also</h2>
<p><a href="string" title="typedef struct _STRING&#10;{&#10;    USHORT Length;&#10;    USHORT MaximumLength;&#10;    _Field_size_bytes_part_opt_(MaximumLength, Length) PCHAR Buffer;&#10;} STRING, *PSTRING, ANSI_STRING, *PANSI_STRING, OEM_STRING, *POEM_STRING;">ANSI_STRING</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-miniport_initialize">MiniportInitializeEx</a></p>
<p><a href="ndis_configuration_parameter" title="typedef struct _NDIS_CONFIGURATION_PARAMETER {&#10;  NDIS_PARAMETER_TYPE ParameterType;&#10;  union {&#10;    ULONG       IntegerData;&#10;    NDIS_STRING StringData;&#10;    BINARY_DATA BinaryData;&#10;  } ParameterData;&#10;} NDIS_CONFIGURATION_PARAMETER, *PNDIS_CONFIGURATION_PARAMETER;">NDIS_CONFIGURATION_PARAMETER</a></p>
<p><a href="ndisansistringtounicodestring" title="void NdisAnsiStringToUnicodeString(&#10;  _us,&#10;  _as&#10;);">NdisAnsiStringToUnicodeString</a></p>
<p><a href="ndiscloseconfiguration" title="VOID NdisCloseConfiguration(&#10;  [in] NDIS_HANDLE ConfigurationHandle&#10;);">NdisCloseConfiguration</a></p>
<p><a href="ndisfreememory" title="VOID NdisFreeMemory(&#10;  [in] PVOID VirtualAddress,&#10;  [in] UINT  Length,&#10;  [in] UINT  MemoryFlags&#10;);">NdisFreeMemory</a></p>
<p><a href="ndisfreestring" title="void NdisFreeString(&#10;  [in] String&#10;);">NdisFreeString</a></p>
<p><a href="ndisinitansistring" title="void NdisInitAnsiString(&#10;  _as,&#10;  s&#10;);">NdisInitAnsiString</a></p>
<p><a href="ndisinitunicodestring" title="void NdisInitUnicodeString(&#10;  _us,&#10;  s&#10;);">NdisInitUnicodeString</a></p>
<p><a href="ndisinitializestring" title="VOID NdisInitializeString(&#10;  PNDIS_STRING Destination,&#10;  PUCHAR       Source&#10;);">NdisInitializeString</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/devtest/ndis-ndisopenconfigurationex">NdisOpenConfigurationEx</a></p>
<p><a href="ndisopenconfigurationkeybyindex" title="VOID NdisOpenConfigurationKeyByIndex(&#10;  [out] PNDIS_STATUS Status,&#10;  [in]  NDIS_HANDLE  ConfigurationHandle,&#10;  [in]  ULONG        Index,&#10;  [out] PNDIS_STRING KeyName,&#10;  [out] PNDIS_HANDLE KeyHandle&#10;);">NdisOpenConfigurationKeyByIndex</a></p>
<p><a href="ndisopenconfigurationkeybyname" title="VOID NdisOpenConfigurationKeyByName(&#10;  [out] PNDIS_STATUS Status,&#10;  [in]  NDIS_HANDLE  ConfigurationHandle,&#10;  [in]  PNDIS_STRING SubKeyName,&#10;  [out] PNDIS_HANDLE SubKeyHandle&#10;);">NdisOpenConfigurationKeyByName</a></p>
<p><a href="ndisreadconfiguration" title="VOID NdisReadConfiguration(&#10;  [out] PNDIS_STATUS                  Status,&#10;  [out] PNDIS_CONFIGURATION_PARAMETER *ParameterValue,&#10;  [in]  NDIS_HANDLE                   ConfigurationHandle,&#10;  [in]  PNDIS_STRING                  Keyword,&#10;  [in]  NDIS_PARAMETER_TYPE           ParameterType&#10;);">NdisReadConfiguration</a></p>
<p><a href="ndisunicodestringtoansistring" title="void NdisUnicodeStringToAnsiString(&#10;  _as,&#10;  _us&#10;);">NdisUnicodeStringToAnsiString</a></p>
<p><a href="unicode_string" title="typedef struct _UNICODE_STRING&#10;{&#10;    USHORT Length;&#10;    USHORT MaximumLength;&#10;    _Field_size_bytes_part_opt_(MaximumLength, Length) PWCH Buffer;&#10;} UNICODE_STRING, *PUNICODE_STRING;">UNICODE_STRING</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndiswriteconfiguration">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ndis/nf-ndis-ndiswriteconfiguration.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
