<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="PEP_REGISTER_DEVICE_V2 - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>PEP_REGISTER_DEVICE_V2 - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            PEP_REGISTER_DEVICE_V2 - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// pep_x.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _PEP_REGISTER_DEVICE_V2 {
  [in]  <a href="pcunicode_string" title="typedef const UNICODE_STRING *PCUNICODE_STRING;">PCUNICODE_STRING</a>           DeviceId;
  [in]  POHANDLE                   KernelHandle;
  [in]  <a href="pep_device_register_v2" title="typedef struct _PEP_DEVICE_REGISTER_V2 {&#10;  ULONGLONG         Flags;&#10;  ULONG             ComponentCount;&#10;  PPEP_COMPONENT_V2 Components[ANYSIZE_ARRAY];&#10;} PEP_DEVICE_REGISTER_V2, *PPEP_DEVICE_REGISTER_V2;">PPEP_DEVICE_REGISTER_V2</a>    Register;
  [out] PEPHANDLE                  DeviceHandle;
  [out] <a href="pep_device_acceptance_type" title="typedef enum _PEP_DEVICE_ACCEPTANCE_TYPE {&#10;  PepDeviceNotAccepted,&#10;  PepDeviceAccepted,&#10;  PepDeviceAceptedMax&#10;} PEP_DEVICE_ACCEPTANCE_TYPE, *PPEP_DEVICE_ACCEPTANCE_TYPE;">PEP_DEVICE_ACCEPTANCE_TYPE</a> DeviceAccepted;
} PEP_REGISTER_DEVICE_V2, *PPEP_REGISTER_DEVICE_V2;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pep_x/ns-pep_x-_pep_register_device_v2">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// pepfx.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _PEP_REGISTER_DEVICE_V2 {
  [in]  <a href="pcunicode_string" title="typedef const UNICODE_STRING *PCUNICODE_STRING;">PCUNICODE_STRING</a>           DeviceId;
  [in]  POHANDLE                   KernelHandle;
  [in]  <a href="pep_device_register_v2" title="typedef struct _PEP_DEVICE_REGISTER_V2 {&#10;  ULONGLONG         Flags;&#10;  ULONG             ComponentCount;&#10;  PPEP_COMPONENT_V2 Components[ANYSIZE_ARRAY];&#10;} PEP_DEVICE_REGISTER_V2, *PPEP_DEVICE_REGISTER_V2;">PPEP_DEVICE_REGISTER_V2</a>    Register;
  [out] PEPHANDLE                  DeviceHandle;
  [out] <a href="pep_device_acceptance_type" title="typedef enum _PEP_DEVICE_ACCEPTANCE_TYPE {&#10;  PepDeviceNotAccepted,&#10;  PepDeviceAccepted,&#10;  PepDeviceAceptedMax&#10;} PEP_DEVICE_ACCEPTANCE_TYPE, *PPEP_DEVICE_ACCEPTANCE_TYPE;">PEP_DEVICE_ACCEPTANCE_TYPE</a> DeviceAccepted;
} PEP_REGISTER_DEVICE_V2, *PPEP_REGISTER_DEVICE_V2;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pepfx/ns-pepfx-_pep_register_device_v2">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/pep_register_device_v2.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-pep_x-_pep_register_device_v2)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_pep_register_device_v2-structure-pep_xh">_PEP_REGISTER_DEVICE_V2 structure (pep_x.h)</h1>

<h2 id="description">Description</h2>

<p>The <strong>PEP_REGISTER_DEVICE_V2</strong> structure describes a device whose driver stack has just registered with the Windows <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/overview-of-the-power-management-framework">power management framework</a> (PoFx).</p>

<h2 id="members">Members</h2>

<h3 id="deviceid-in"><code>DeviceId</code> [in]</h3>

<p>A string that uniquely identifies the device. This member is a pointer to a <a rel="noopener" target="_blank" href="unicode_string">UNICODE_STRING</a> structure that contains a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/install/device-identification-strings">device identification string</a>.</p>

<h3 id="kernelhandle-in"><code>KernelHandle</code> [in]</h3>

<p>A POHANDLE value that represents the registration of the device with PoFx. The platform extension plug-in (PEP) previously received this handle from PoFx during the <a rel="noopener" target="_blank" href="pep_register_crashdump_device">PEP_DPM_REGISTER_DEVICE</a> notification that informed the PEP that the device's driver stack registered the device with PoFx.</p>

<h3 id="register-in"><code>Register</code> [in]</h3>

<p>A pointer to a <a rel="noopener" target="_blank" href="pep_device_register_v2">PEP_DEVICE_REGISTER_V2</a> structure that describes the power management attributes of all the components in the device. For more information, see Remarks.</p>

<h3 id="devicehandle-out"><code>DeviceHandle</code> [out]</h3>

<p>A PEPHANDLE value that the PEP creates to identify this device. PoFx will use this handle to identify the device in future <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/dpm-notifications">Device power management (DPM) notifications</a>.</p>

<h3 id="deviceaccepted-out"><code>DeviceAccepted</code> [out]</h3>

<p>A <a rel="noopener" target="_blank" href="pep_device_acceptance_type">PEP_DEVICE_ACCEPTANCE_TYPE</a> enumeration value that indicates whether the PEP claims ownership of the device. The PEP that claims ownership is responsible for handling DPM notifications for the device.</p>

<h2 id="remarks">Remarks</h2>

<p>This structure is used by the <a rel="noopener" target="_blank" href="pep_register_crashdump_device">PEP_DPM_REGISTER_DEVICE</a> notification. The first three members of this structure contain input values supplied by PoFx. The last two members contain output values that the PEP writes to the structure in response to this notification.</p>

<p>The <strong>Register</strong> member contains a pointer to an input buffer allocated by PoFx. PoFx writes the <a rel="noopener" target="_blank" href="pep_device_register_v2">PEP_DEVICE_REGISTER_V2</a> structure and associated data to this structure before sending the <a rel="noopener" target="_blank" href="pep_register_crashdump_device">PEP_DPM_REGISTER_DEVICE</a> notification to the PEP. The contents of this buffer remain valid only until the PEP finishes handling the notification and returns from the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pepfx/nc-pepfx-pepcallbacknotifydpm">AcceptDeviceNotification</a> callback.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pepfx/nc-pepfx-pepcallbacknotifydpm">AcceptDeviceNotification</a></p>

<p><a rel="noopener" target="_blank" href="pep_device_acceptance_type">PEP_DEVICE_ACCEPTANCE_TYPE</a></p>

<p><a rel="noopener" target="_blank" href="pep_device_register_v2">PEP_DEVICE_REGISTER_V2</a></p>

<p><a rel="noopener" target="_blank" href="pep_register_crashdump_device">PEP_DPM_REGISTER_DEVICE</a></p>

<p><a rel="noopener" target="_blank" href="unicode_string">UNICODE_STRING</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pep_x/ns-pep_x-_pep_register_device_v2">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/pep_x/ns-pep_x-_pep_register_device_v2.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-pepfx-_pep_register_device_v2)</h1>
</div>
<div class="ntdoc-description">
<h1>_PEP_REGISTER_DEVICE_V2 structure (pepfx.h)</h1>

<h2>Description</h2>

<p>The <strong>PEP_REGISTER_DEVICE_V2</strong> structure describes a device whose driver stack has just registered with the Windows <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/overview-of-the-power-management-framework">power management framework</a> (PoFx).</p>

<h2>Members</h2>

<h3><code>DeviceId</code> [in]</h3>

<p>A string that uniquely identifies the device. This member is a pointer to a <a rel="noopener" target="_blank" href="unicode_string">UNICODE_STRING</a> structure that contains a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/install/device-identification-strings">device identification string</a>.</p>

<h3><code>KernelHandle</code> [in]</h3>

<p>A POHANDLE value that represents the registration of the device with PoFx. The platform extension plug-in (PEP) previously received this handle from PoFx during the <a rel="noopener" target="_blank" href="pep_register_crashdump_device">PEP_DPM_REGISTER_DEVICE</a> notification that informed the PEP that the device's driver stack registered the device with PoFx.</p>

<h3><code>Register</code> [in]</h3>

<p>A pointer to a <a rel="noopener" target="_blank" href="pep_device_register_v2">PEP_DEVICE_REGISTER_V2</a> structure that describes the power management attributes of all the components in the device. For more information, see Remarks.</p>

<h3><code>DeviceHandle</code> [out]</h3>

<p>A PEPHANDLE value that the PEP creates to identify this device. PoFx will use this handle to identify the device in future <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/dpm-notifications">Device power management (DPM) notifications</a>.</p>

<h3><code>DeviceAccepted</code> [out]</h3>

<p>A <a rel="noopener" target="_blank" href="pep_device_acceptance_type">PEP_DEVICE_ACCEPTANCE_TYPE</a> enumeration value that indicates whether the PEP claims ownership of the device. The PEP that claims ownership is responsible for handling DPM notifications for the device.</p>

<h2>Remarks</h2>

<p>This structure is used by the <a rel="noopener" target="_blank" href="pep_register_crashdump_device">PEP_DPM_REGISTER_DEVICE</a> notification. The first three members of this structure contain input values supplied by PoFx. The last two members contain output values that the PEP writes to the structure in response to this notification.</p>

<p>The <strong>Register</strong> member contains a pointer to an input buffer allocated by PoFx. PoFx writes the <a rel="noopener" target="_blank" href="pep_device_register_v2">PEP_DEVICE_REGISTER_V2</a> structure and associated data to this structure before sending the <a rel="noopener" target="_blank" href="pep_register_crashdump_device">PEP_DPM_REGISTER_DEVICE</a> notification to the PEP. The contents of this buffer remain valid only until the PEP finishes handling the notification and returns from the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pepfx/nc-pepfx-pepcallbacknotifydpm">AcceptDeviceNotification</a> callback.</p>

<h2>See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pepfx/nc-pepfx-pepcallbacknotifydpm">AcceptDeviceNotification</a></p>

<p><a rel="noopener" target="_blank" href="pep_device_acceptance_type">PEP_DEVICE_ACCEPTANCE_TYPE</a></p>

<p><a rel="noopener" target="_blank" href="pep_device_register_v2">PEP_DEVICE_REGISTER_V2</a></p>

<p><a rel="noopener" target="_blank" href="pep_register_crashdump_device">PEP_DPM_REGISTER_DEVICE</a></p>

<p><a rel="noopener" target="_blank" href="unicode_string">UNICODE_STRING</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pepfx/ns-pepfx-_pep_register_device_v2">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/pepfx/ns-pepfx-_pep_register_device_v2.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
