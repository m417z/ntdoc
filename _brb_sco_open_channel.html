<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="_BRB_SCO_OPEN_CHANNEL - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>_BRB_SCO_OPEN_CHANNEL - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github.ntdoc.min.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github-dark-dimmed.ntdoc.min.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            _BRB_SCO_OPEN_CHANNEL - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// bthddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">struct _BRB_SCO_OPEN_CHANNEL {
  <a href="brb_header" title="typedef struct _BRB_HEADER {&#10;  LIST_ENTRY ListEntry;&#10;  ULONG      Length;&#10;  USHORT     Version;&#10;  USHORT     Type;&#10;  ULONG      BthportFlags;&#10;  NTSTATUS   Status;&#10;  BTHSTATUS  BtStatus;&#10;  PVOID      Context[BTHPORT_CONTEXT_SIZE];&#10;  PVOID      ClientContext[BTHPORT_CONTEXT_SIZE];&#10;  ULONG      Reserved[BTHPORT_RESERVED_FIELD_SIZE];&#10;} BRB_HEADER;">BRB_HEADER</a>                 Hdr;
  BTH_ADDR                   BtAddress;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                      TransmitBandwidth;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                      ReceiveBandwidth;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>                     MaxLatency;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>                     PacketType;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>                     ContentFormat;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>                     Reserved;
  <a href="sco_retransmission_effort" title="typedef enum _SCO_RETRANSMISSION_EFFORT {&#10;  SCO_RETRANSMISSION_NONE,&#10;  SCO_RETRANSMISSION_MIN1_POWER,&#10;  SCO_RETRANSMISSION_MIN1_QUALITY,&#10;  SCO_RETRANSMISSION_DONT_CARE&#10;} SCO_RETRANSMISSION_EFFORT, *PSCO_RETRANSMISSION_EFFORT;">SCO_RETRANSMISSION_EFFORT</a>  RetransmissionEffort;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                      ChannelFlags;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                      CallbackFlags;
  <a href="pfnsco_indication_callback" title="PFNSCO_INDICATION_CALLBACK PfnscoIndicationCallback;&#10;&#10;void PfnscoIndicationCallback(&#10;  [in] PVOID Context,&#10;  [in] SCO_INDICATION_CODE Indication,&#10;  [in] PSCO_INDICATION_PARAMETERS Parameters&#10;)&#10;{...}">PFNSCO_INDICATION_CALLBACK</a> Callback;
  PVOID                      CallbackContext;
  PVOID                      ReferenceObject;
  SCO_CHANNEL_HANDLE         ChannelHandle;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>                      Response;
};</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/bthddi/ns-bthddi-_brb_sco_open_channel">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/_brb_sco_open_channel.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-bthddi-_brb_sco_open_channel)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>_BRB_SCO_OPEN_CHANNEL structure</h1>
<h2>Description</h2>
<p>The _BRB_SCO_OPEN_CHANNEL structure describes a SCO channel to open to a remote device, or a response
from the profile driver accepting or rejecting an incoming SCO connection request that was initiated by a
remote device.</p>
<h2>Members</h2>
<h3><code>Hdr</code></h3>
<p>A
<a href="brb_header" title="typedef struct _BRB_HEADER {&#10;  LIST_ENTRY ListEntry;&#10;  ULONG      Length;&#10;  USHORT     Version;&#10;  USHORT     Type;&#10;  ULONG      BthportFlags;&#10;  NTSTATUS   Status;&#10;  BTHSTATUS  BtStatus;&#10;  PVOID      Context[BTHPORT_CONTEXT_SIZE];&#10;  PVOID      ClientContext[BTHPORT_CONTEXT_SIZE];&#10;  ULONG      Reserved[BTHPORT_RESERVED_FIELD_SIZE];&#10;} BRB_HEADER;">BRB_HEADER</a> structure that contains information
about the current <a href="brb" title="typedef struct _BRB {&#10;  union {&#10;#if ...&#10;    _BRB_HEADER                             BrbHeader;&#10;#else&#10;    struct _BRB_HEADER                      BrbHeader;&#10;#endif&#10;#if ...&#10;    _BRB_GET_DEVICE_INTERFACE_STRING        BrbGetDeviceInterfaceString;&#10;#else&#10;    struct _BRB_GET_DEVICE_INTERFACE_STRING BrbGetDeviceInterfaceString;&#10;#endif&#10;#if ...&#10;    _BRB_GET_LOCAL_BD_ADDR                  BrbGetLocalBdAddress;&#10;#else&#10;    struct _BRB_GET_LOCAL_BD_ADDR           BrbGetLocalBdAddress;&#10;#endif&#10;#if ...&#10;    _BRB_ACL_GET_MODE                       BrbAclGetMode;&#10;#else&#10;...">BRB</a>.</p>
<h3><code>BtAddress</code></h3>
<p>The Bluetooth address of the remote device to open a SCO channel to.</p>
<h3><code>TransmitBandwidth</code></h3>
<p>The transmission bandwidth, in bytes per second, to be assigned to the SCO channel.</p>
<h3><code>ReceiveBandwidth</code></h3>
<p>The reception bandwidth, in bytes per second, to be assigned to the SCO channel.</p>
<h3><code>MaxLatency</code></h3>
<p>A value that represents, in milliseconds, the upper limit of the sum of the synchronous interval
and the size of the (e)SCO window. Possible values are listed in the following table.</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Values</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td>0x0000 to 0x0003</td>
<td>Reserved for future use.</td>
</tr>
<tr>
<td>0x0004 to 0xFFFE</td>
<td>The range of possible <strong>MaxLatency</strong> values for the channel.</td>
</tr>
<tr>
<td>0xFFFF</td>
<td>The channel doesn't have a preferred <strong>MaxLatency</strong> setting.</td>
</tr>
</tbody>
</table>
<h3><code>PacketType</code></h3>
<p>A flag or combination of flags that indicate the type of data packets that the SCO connection
supports. These SCO packet types are defined by the Bluetooth SIG. See the Bluetooth specification for
more information about these flags. Possible values include:</p>
<h4>SCO_HV1</h4>
<h4>SCO_HV2</h4>
<h4>SCO_HV3</h4>
<h4>SCO_EV3</h4>
<h4>SCO_EV4</h4>
<h4>SCO_EV5</h4>
<h3><code>ContentFormat</code></h3>
<p>The audio voice settings for the channel. Use the following definitions to encode this member:</p>
<p>SCO_VS_AIR_CODING_DATA</p>
<p>SCO_VS_AIR_CODING_FORMAT_ALAW</p>
<p>SCO_VS_AIR_CODING_FORMAT_CVSD</p>
<p>SCO_VS_AIR_CODING_FORMAT_MASK</p>
<p>SCO_VS_AIR_CODING_FORMAT_MULAW</p>
<p>SCO_VS_IN_CODING_ALAW</p>
<p>SCO_VS_IN_CODING_LINEAR</p>
<p>SCO_VS_IN_CODING_MASK</p>
<p>SCO_VS_IN_CODING_MULAW</p>
<p>SCO_VS_IN_DATA_FORMAT_1C</p>
<p>SCO_VS_IN_DATA_FORMAT_2C</p>
<p>SCO_VS_IN_DATA_FORMAT_MASK</p>
<p>SCO_VS_IN_DATA_FORMAT_SM</p>
<p>SCO_VS_IN_DATA_FORMAT_US</p>
<p>SCO_VS_IN_SAMPLE_SIZE_8BIT</p>
<p>SCO_VS_IN_SAMPLE_SIZE_16BIT</p>
<p>SCO_VS_IN_SAMPLE_SIZE_MASK</p>
<p>SCO_VS_PCM_BIT_POS_MASK</p>
<p>SCO_VS_SETTING_DEFAULT</p>
<h3><code>Reserved</code></h3>
<p>Reserved for future use. Do not use.</p>
<h3><code>RetransmissionEffort</code></h3>
<p>A
<a href="sco_retransmission_effort" title="typedef enum _SCO_RETRANSMISSION_EFFORT {&#10;  SCO_RETRANSMISSION_NONE,&#10;  SCO_RETRANSMISSION_MIN1_POWER,&#10;  SCO_RETRANSMISSION_MIN1_QUALITY,&#10;  SCO_RETRANSMISSION_DONT_CARE&#10;} SCO_RETRANSMISSION_EFFORT, *PSCO_RETRANSMISSION_EFFORT;">SCO_RETRANSMISSION_EFFORT</a> enumeration value that determines the retransmission policies for the
channel.</p>
<h3><code>ChannelFlags</code></h3>
<p>Flags that specify the requirements for the channel to be opened. Valid flag values are listed in
the following table:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Flag</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td>SCO_CF_LINK_AUTHENTICATED</td>
<td>The link must be authenticated.</td>
</tr>
<tr>
<td>SCO_CF_LINK_ENCRYPTED</td>
<td>The link must be encrypted. Setting this flag also sets the SCO_CF_LINK_AUTHENTICATED flag.</td>
</tr>
<tr>
<td>SCO_CF_LINK_SUPPRESS_PIN</td>
<td>The profile driver indicates its preference that users not be prompted for a PIN.</td>
</tr>
</tbody>
</table>
<h3><code>CallbackFlags</code></h3>
<p>A flag that specifies when the function assigned to the
<strong>Callback</strong> member should be sent to the client. Currently, there is only one valid flag:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Flag</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td>SCO_CALLBACK_DISCONNECT</td>
<td>The profile driver should be notified when the remote device is disconnected.</td>
</tr>
</tbody>
</table>
<h3><code>Callback</code></h3>
<p>The
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/bthddi/nc-bthddi-pfnsco_indication_callback">SCO Callback Function</a> implemented by
the profile driver, that the Bluetooth driver stack should call to notify the profile driver about any
changes to the SCO connection.</p>
<h3><code>CallbackContext</code></h3>
<p>The context to pass to the callback function specified in the
<strong>Callback</strong> member. The profile driver defines this value.</p>
<h3><code>ReferenceObject</code></h3>
<p>A pointer to an object to pass to
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-obfreferenceobject">ObReferenceObject</a> and
<a href="obdereferenceobject" title="void ObDereferenceObject(&#10;  [in] a&#10;);">ObDereferenceObject</a> for which to
maintain a reference count of.</p>
<h3><code>ChannelHandle</code></h3>
<p>A handle to identify the SCO channel, if the open channel request completes successfully.</p>
<h3><code>Response</code></h3>
<p>A flag that indicates whether the local server will accept or reject an incoming SCO connection.
This member is used only when building and sending a <strong>BRB_SCO_OPEN_CHANNEL_RESPONSE</strong> request. Valid flag
values are listed in the following table.</p>
<table>
<thead>
<tr>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>SCO_CONNECT_RSP_RESPONSE_SUCCESS</td>
<td>The local server accepts the SCO connection request.</td>
</tr>
<tr>
<td>SCO_CONNECT_RSP_RESPONSE_NO_RESOURCES</td>
<td>The local server rejects the SCO connection request due to a lack of resources.</td>
</tr>
<tr>
<td>SCO_CONNECT_RSP_RESPONSE_SECURITY_BLOCK</td>
<td>The local server rejects the SCO connection request because the request does not meet security requirements.</td>
</tr>
<tr>
<td>SCO_CONNECT_RSP_RESPONSE_BAD_BD_ADDR</td>
<td>The local server rejects the SCO connection request because it does not accept connections from the specified Bluetooth device address.</td>
</tr>
</tbody>
</table>
<h2>Remarks</h2>
<p>To open a SCO channel, profile drivers should
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/ff536657(v=vs.85)">build and send</a> a
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/ff536626(v=vs.85)">BRB_SCO_OPEN_CHANNEL</a> request.</p>
<p>If the asynchronous connectionless link to the remote device does not exist prior to the request, the
Bluetooth driver stack creates one before it creates the SCO channel.</p>
<p>To accept or reject an incoming SCO connection request initiated by a remote device, profile drivers
should
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/ff536657(v=vs.85)">build and send</a> a
<a rel="noopener" target="_blank" href="https://social.msdn.microsoft.com/Forums/0a9a4323-d046-4d27-9d22-4974dbab30a4/home?forum=windows-bluetooth-sco-brbscoopenchannelresponse">BRB_SCO_OPEN_CHANNEL_RESPONSE</a> request.</p>
<p>A profile driver should build and send a <strong>BRB_SCO_OPEN_CHANNEL_RESPONSE</strong> request when the Bluetooth
driver stack calls the profile driver's
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/bthddi/nc-bthddi-pfnsco_indication_callback">SCO Callback Function</a> and passes
<strong>ScoIndicationRemoteConnect</strong> in the callback function's
<em>Indication</em> parameter.</p>
<p>The profile driver specifies whether the connection should be accepted by storing an appropriate value
in the
<strong>Response</strong> member of this structure. In this context, the local system is the server.</p>
<h2>See also</h2>
<p><a href="brb_header" title="typedef struct _BRB_HEADER {&#10;  LIST_ENTRY ListEntry;&#10;  ULONG      Length;&#10;  USHORT     Version;&#10;  USHORT     Type;&#10;  ULONG      BthportFlags;&#10;  NTSTATUS   Status;&#10;  BTHSTATUS  BtStatus;&#10;  PVOID      Context[BTHPORT_CONTEXT_SIZE];&#10;  PVOID      ClientContext[BTHPORT_CONTEXT_SIZE];&#10;  ULONG      Reserved[BTHPORT_RESERVED_FIELD_SIZE];&#10;} BRB_HEADER;">BRB_HEADER</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/ff536626(v=vs.85)">BRB_SCO_OPEN_CHANNEL</a></p>
<p><a rel="noopener" target="_blank" href="https://social.msdn.microsoft.com/Forums/0a9a4323-d046-4d27-9d22-4974dbab30a4/home?forum=windows-bluetooth-sco-brbscoopenchannelresponse">BRB_SCO_OPEN_CHANNEL_RESPONSE</a></p>
<p><a href="obdereferenceobject" title="void ObDereferenceObject(&#10;  [in] a&#10;);">ObDereferenceObject</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-obfreferenceobject">ObReferenceObject</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/bthddi/nc-bthddi-pfnsco_indication_callback">SCO Callback Function</a></p>
<p><a href="sco_retransmission_effort" title="typedef enum _SCO_RETRANSMISSION_EFFORT {&#10;  SCO_RETRANSMISSION_NONE,&#10;  SCO_RETRANSMISSION_MIN1_POWER,&#10;  SCO_RETRANSMISSION_MIN1_QUALITY,&#10;  SCO_RETRANSMISSION_DONT_CARE&#10;} SCO_RETRANSMISSION_EFFORT, *PSCO_RETRANSMISSION_EFFORT;">SCO_RETRANSMISSION_EFFORT</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/bthddi/ns-bthddi-_brb_sco_open_channel">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/bthddi/ns-bthddi-_brb_sco_open_channel.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script src="modules/highlight.js/highlight.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
