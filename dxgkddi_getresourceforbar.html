<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DXGKDDI_GETRESOURCEFORBAR - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DXGKDDI_GETRESOURCEFORBAR - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DXGKDDI_GETRESOURCEFORBAR - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// dispmprt.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">DXGKDDI_GETRESOURCEFORBAR DxgkddiGetresourceforbar;

<a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> DxgkddiGetresourceforbar(
  [in]      HANDLE Context,
  [in, out] <a href="dxgkarg_getresourceforbar" title="typedef struct _DXGKARG_GETRESOURCEFORBAR {&#10;  ULONG                           VirtualFunctionIndex;&#10;  ULONG                           BarIndex;&#10;  PCM_PARTIAL_RESOURCE_DESCRIPTOR pResource;&#10;} DXGKARG_GETRESOURCEFORBAR, *PDXGKARG_GETRESOURCEFORBAR;">DXGKARG_GETRESOURCEFORBAR</a> *pArgs
)
{...}</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_getresourceforbar">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/dxgkddi_getresourceforbar.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-dispmprt-dxgkddi_getresourceforbar)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="dxgkddi_getresourceforbar-callback-function">DXGKDDI_GETRESOURCEFORBAR callback function</h1>

<h2 id="description">Description</h2>

<p>If the driver does not support the GUID_DXGKDDI_FLEXIOV_DEVICE_INTERFACE interface, this routine returns the host partition base address of a single Virtual Function base address register. This host physical address should be the beginning of the MMIO (Memory management input output) space that the driver wants to be mapped as the GPU partitionâ€™s MMIO bar.</p>

<p>When the driver report that it does support the GUID_DXGKDDI_FLEXIOV_DEVICE_INTERFACE interface, this function will not be called.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="context-in"><code>Context</code> [in]</h3>

<p>The miniport context that is returned by the driver in the <a href="dxgkddi_sriov_interface" title="typedef struct _DXGKDDI_SRIOV_INTERFACE {&#10;  IN USHORT                                    Size;&#10;  IN USHORT                                    Version;&#10;  OUT PVOID                                    Context;&#10;  OUT PINTERFACE_REFERENCE                     InterfaceReference;&#10;  OUT PINTERFACE_DEREFERENCE                   InterfaceDereference;&#10;  OUT PDXGKDDI_READVIRTUALFUNCTIONCONFIG       DxgkDdiReadVirtualFunctionConfig;&#10;  OUT PDXGKDDI_WRITEVIRTUALFUNCTIONCONFIG      DxgkDdiWriteVirtualFunctionConfig;&#10;  OUT PDXGKDDI_READVIRTUALFUNCTIONCONFIGBLOCK  DxgkDdiReadVirtualFunctionConfigBlock;&#10;  OUT PDXGKDDI_WRITEVIRTUALFUNCTIONCONFIGBLOCK DxgkDdiWriteVirtualFunctionConfigBlock;&#10;  OUT PDXGKDDI_QUERYPROBEDBARS                 DxgkDdiQueryProbedBars;&#10;  OUT PDXGKDDI_GETVENDORANDDEVICE              DxgkDdiGetVendorAndDevice;&#10;  OUT PDXGKDDI_GETDEVICELOCATION               DxgkDdiGetDeviceLocation;&#10;  OUT PDXGKDDI_RESETVIRTUALFUNCTION            DxgkDdiResetVirtualFunction;&#10;  OUT PDXGKDDI_SETVIRTUALFUNCTIONPOWERSTATE    DxgkDdiSetVirtualFunctionPowerState;&#10;  OUT PDXGKDDI_GETRESOURCEFORBAR               DxgkDdiGetResourceForBar;&#10;  OUT PDXGKDDI_QUERYVIRTUALFUNCTIONLUID        DxgkDdiQueryVirtualFunctionLuid;&#10;} DXGKDDI_SRIOV_INTERFACE, *PDXGKDDI_SRIOV_INTERFACE;">DXGKDDI_SRIOV_INTERFACE</a> structure.</p>

<h3 id="pargs-in-out"><code>pArgs</code> [in, out]</h3>

<p>A pointer to the <a href="dxgkarg_getresourceforbar" title="typedef struct _DXGKARG_GETRESOURCEFORBAR {&#10;  ULONG                           VirtualFunctionIndex;&#10;  ULONG                           BarIndex;&#10;  PCM_PARTIAL_RESOURCE_DESCRIPTOR pResource;&#10;} DXGKARG_GETRESOURCEFORBAR, *PDXGKARG_GETRESOURCEFORBAR;">DXGKARG_GETRESOURCEFORBAR</a> that contains arguments for this function.</p>

<h2 id="return-value">Return value</h2>

<p>If the VF has resources at this BarIndex and can return the information correct, the statement <a href="nt_success" title="#define NT_SUCCESS(Status) (((NTSTATUS)(Status)) &gt;= 0)">NT_SUCCESS</a>(return value) will be true.</p>

<h2 id="prototype">Prototype</h2>

<p><!-- CODE_MARKER --></p>

<pre><code>//Declaration

DXGKDDI_GETRESOURCEFORBAR DxgkddiGetresourceforbar;

// Definition

<a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> DxgkddiGetresourceforbar
(
    HANDLE Context
    <a href="dxgkarg_getresourceforbar" title="typedef struct _DXGKARG_GETRESOURCEFORBAR {&#10;  ULONG                           VirtualFunctionIndex;&#10;  ULONG                           BarIndex;&#10;  PCM_PARTIAL_RESOURCE_DESCRIPTOR pResource;&#10;} DXGKARG_GETRESOURCEFORBAR, *PDXGKARG_GETRESOURCEFORBAR;">DXGKARG_GETRESOURCEFORBAR</a> * pArgs
)
{...}

</code></pre>

<h2 id="remarks">Remarks</h2>

<p>This routine can fail if the VF does not expose a BAR at BarIndex. This is expected and will not cause an immediate failure.</p>

<h2 id="see-also">See also</h2>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_getresourceforbar">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/dispmprt/nc-dispmprt-dxgkddi_getresourceforbar.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
