<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="TXFS_QUERY_RM_INFORMATION - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>TXFS_QUERY_RM_INFORMATION - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            TXFS_QUERY_RM_INFORMATION - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// winioctl.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _TXFS_QUERY_RM_INFORMATION {
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>         BytesRequired;
  <a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a>     TailLsn;
  <a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a>     CurrentLsn;
  <a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a>     ArchiveTailLsn;
  <a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a>     LogContainerSize;
  LARGE_INTEGER HighestVirtualClock;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>         LogContainerCount;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>         LogContainerCountMax;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>         LogContainerCountMin;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>         LogGrowthIncrement;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>         LogAutoShrinkPercentage;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>         Flags;
  <a href="word" title="typedef unsigned short WORD;">WORD</a>          LoggingMode;
  <a href="word" title="typedef unsigned short WORD;">WORD</a>          Reserved;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>         RmState;
  <a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a>     LogCapacity;
  <a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a>     LogFree;
  <a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a>     TopsSize;
  <a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a>     TopsUsed;
  <a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a>     TransactionCount;
  <a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a>     OnePCCount;
  <a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a>     TwoPCCount;
  <a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a>     NumberLogFileFull;
  <a href="dwordlong" title="typedef unsigned __int64 DWORDLONG;">DWORDLONG</a>     OldestTransactionAge;
  GUID          RMName;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>         TmLogPathOffset;
} TXFS_QUERY_RM_INFORMATION, *PTXFS_QUERY_RM_INFORMATION;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ns-winioctl-txfs_query_rm_information">View the official Win32 API reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/txfs_query_rm_information.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Win32 API reference (ns-winioctl-txfs_query_rm_information)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="txfs_query_rm_information-structure">TXFS_QUERY_RM_INFORMATION structure</h1>

<h2 id="description">Description</h2>

<p>[Microsoft strongly recommends developers utilize alternative means to achieve your
applicationâ€™s needs. Many scenarios that TxF was developed for can be achieved through simpler and more readily
available techniques. Furthermore, TxF may not be available in future versions of Microsoft Windows. For more
information, and alternatives to TxF, please see
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/FileIO/deprecation-of-txf">Alternatives to using Transactional NTFS</a>.]</p>

<p>Contains information about the resource manager (RM).</p>

<h2 id="members">Members</h2>

<h3 id="bytesrequired"><code>BytesRequired</code></h3>

<p>If <a href="fsctl_txfs_query_rm_information" title="// CTL_CODE(0x0009, 0x052, METHOD_BUFFERED, FILE_READ_ACCESS)&#10;#define FSCTL_TXFS_QUERY_RM_INFORMATION 0x00094148">FSCTL_TXFS_QUERY_RM_INFORMATION</a>
returns <strong>ERROR_BUFFER_TOO_SMALL</strong>, this member specifies the minimum number of bytes
needed to return the information requested, including the <strong>NULL</strong> terminating
character.</p>

<h3 id="taillsn"><code>TailLsn</code></h3>

<p>The oldest log sequence number (LSN) currently used by the RM.</p>

<h3 id="currentlsn"><code>CurrentLsn</code></h3>

<p>The LSN most recently used by the RM in its log.</p>

<h3 id="archivetaillsn"><code>ArchiveTailLsn</code></h3>

<p>The LSN of the archive tail of the log.</p>

<h3 id="logcontainersize"><code>LogContainerSize</code></h3>

<p>The actual size of a log container, in bytes.</p>

<h3 id="highestvirtualclock"><code>HighestVirtualClock</code></h3>

<p>The highest timestamp associated with a log record.</p>

<h3 id="logcontainercount"><code>LogContainerCount</code></h3>

<p>The number of log containers.</p>

<h3 id="logcontainercountmax"><code>LogContainerCountMax</code></h3>

<p>The maximum number of log containers.</p>

<h3 id="logcontainercountmin"><code>LogContainerCountMin</code></h3>

<p>The minimum number of containers allowed in the log.</p>

<h3 id="loggrowthincrement"><code>LogGrowthIncrement</code></h3>

<p>The amount the log will grow by, which is either a number of containers or percentage of the log size; the
growth type used is specified by the flags set in <strong>Flags</strong> member.</p>

<h3 id="logautoshrinkpercentage"><code>LogAutoShrinkPercentage</code></h3>

<p>If the auto-shrink policy is active, this member specifies the maximum allowable amount of free space in
the log. If this member is zero, the auto-shrink policy is not active.</p>

<h3 id="flags"><code>Flags</code></h3>

<p>This member can be one or more of the following values.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>TXFS_RM_FLAG_LOG_CONTAINER_COUNT_MIN</strong>&lt;br&gt;&lt;br&gt;0x00000008</td>
  <td>If the flag is set, the RM's log is allowed to shrink as far as possible. This flag is mutually exclusive with <strong>TXFS_RM_FLAG_LOG_NO_CONTAINER_COUNT_MAX</strong>.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_LOG_GROWTH_INCREMENT_NUM_CONTAINERS</strong>&lt;br&gt;&lt;br&gt;0x00000010</td>
  <td>Indicates the type of value in <strong>LogGrowthIncrement</strong>. If this flag is set, <strong>LogGrowthIncrement</strong> is a number of containers. This flag is mutually exclusive with <strong>TXFS_RM_FLAG_LOG_GROWTH_INCREMENT_PERCENT</strong>.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_LOG_GROWTH_INCREMENT_PERCENT</strong>&lt;br&gt;&lt;br&gt;0x00000020</td>
  <td>Indicates the type of value in <strong>LogGrowthIncrement</strong>. If this flag is set, <strong>LogGrowthIncrement</strong> is a percentage. This flag is mutually exclusive with <strong>TXFS_RM_FLAG_LOG_GROWTH_INCREMENT_NUM_CONTAINERS</strong>.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_LOG_NO_CONTAINER_COUNT_MAX</strong>&lt;br&gt;&lt;br&gt;0x00000080</td>
  <td>Indicates that the RM's log can grow without bounds. This flag is mutually exclusive with <strong>TXFS_RM_FLAG_LOG_NO_CONTAINER_COUNT_MIN</strong>.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_RESET_RM_AT_NEXT_START</strong>&lt;br&gt;&lt;br&gt;0x00004000</td>
  <td>Indicates the current state of the RM reset flag. If this is set, the RM will reset itself the next time it is started. This flag is only valid for default RMs, not secondary RMs. This flag is mutually exclusive with <strong>TXFS_RM_FLAG_DO_NOT_RESET_RM_AT_NEXT_START</strong>.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_DO_NOT_RESET_RM_AT_NEXT_START</strong>&lt;br&gt;&lt;br&gt;0x00008000</td>
  <td>Indicates the current state of the RM reset flag. If this is set, the RM will not reset itself the next time it is started. This flag is only valid for default RMs, not secondary RMs. This flag is mutually exclusive with <strong>TXFS_RM_FLAG_RESET_RM_AT_NEXT_START</strong>.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_PREFER_CONSISTENCY</strong>&lt;br&gt;&lt;br&gt;0x00010000</td>
  <td>Indicates that the RM is to prefer transaction <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/fileio/glossary">consistency</a> over system <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/fileio/glossary">availability</a>. This flag is mutually exclusive with <strong>TXFS_RM_FLAG_PREFER_AVAILABILITY</strong> and is not supported by the default RM on the system volume.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_FLAG_PREFER_AVAILABILITY</strong>&lt;br&gt;&lt;br&gt;0x00020000</td>
  <td>Indicates that the RM is to prefer system <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/fileio/glossary">availability</a> over transaction <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/fileio/glossary">consistency</a>. This flag is mutually exclusive with <strong>TXFS_RM_FLAG_PREFER_CONSISTENCY</strong> and is forced by the default RM on the system volume.</td>
</tr>
</tbody>
</table>

<h3 id="loggingmode"><code>LoggingMode</code></h3>

<p>The current logging mode.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td><em>*<strong>TXFS_LOGGING_MODE_SIMPLE</strong></em>*&lt;br&gt;&lt;br&gt;1</td>
  <td>Simple logging is used.</td>
</tr>
<tr>
  <td><em>*<strong>TXFS_LOGGING_MODE_FULL</strong></em>*&lt;br&gt;&lt;br&gt;2</td>
  <td>Full logging is used</td>
</tr>
</tbody>
</table>

<h3 id="reserved"><code>Reserved</code></h3>

<p>Reserved.</p>

<h3 id="rmstate"><code>RmState</code></h3>

<p>The state of the RM. Valid values are as follows.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>TXFS_RM_STATE_NOT_STARTED</strong>&lt;br&gt;&lt;br&gt;0</td>
  <td>The RM is not yet started.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_STATE_STARTING</strong>&lt;br&gt;&lt;br&gt;1</td>
  <td>The RM is starting.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_STATE_ACTIVE</strong>&lt;br&gt;&lt;br&gt;2</td>
  <td>The RM is active and ready to accept transactions.</td>
</tr>
<tr>
  <td><strong>TXFS_RM_STATE_SHUTTING_DOWN</strong>&lt;br&gt;&lt;br&gt;3</td>
  <td>The RM is shutting down.</td>
</tr>
</tbody>
</table>

<h3 id="logcapacity"><code>LogCapacity</code></h3>

<p>The total capacity of the log, in bytes.</p>

<h3 id="logfree"><code>LogFree</code></h3>

<p>The number of bytes free in the log.</p>

<h3 id="topssize"><code>TopsSize</code></h3>

<p>The size of the $Tops file, in bytes.</p>

<h3 id="topsused"><code>TopsUsed</code></h3>

<p>The amount of the $Tops file that is in use, in bytes.</p>

<h3 id="transactioncount"><code>TransactionCount</code></h3>

<p>The number of active transactions, at the time the query was issued.</p>

<h3 id="onepccount"><code>OnePCCount</code></h3>

<p>The number of single-phase commit operations that have occurred on this RM.</p>

<h3 id="twopccount"><code>TwoPCCount</code></h3>

<p>The number of two-phase commit operations that have occurred on this RM.</p>

<h3 id="numberlogfilefull"><code>NumberLogFileFull</code></h3>

<p>The number of times this RM's log has become full.</p>

<h3 id="oldesttransactionage"><code>OldestTransactionAge</code></h3>

<p>The length of the oldest active transaction, in milliseconds.</p>

<h3 id="rmname"><code>RMName</code></h3>

<p>The <strong>GUID</strong> that indicates the name of this RM.</p>

<h3 id="tmlogpathoffset"><code>TmLogPathOffset</code></h3>

<p>The offset from the beginning of this structure to a <strong>NULL</strong>-terminated Unicode
string that contains the path to the TM's log.</p>

<h2 id="see-also">See also</h2>

<p><a href="fsctl_txfs_query_rm_information" title="// CTL_CODE(0x0009, 0x052, METHOD_BUFFERED, FILE_READ_ACCESS)&#10;#define FSCTL_TXFS_QUERY_RM_INFORMATION 0x00094148">FSCTL_TXFS_QUERY_RM_INFORMATION</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/FileIO/transactional-ntfs-structures">TxF Structures</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ns-winioctl-txfs_query_rm_information">View the official Win32 API reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/sdk-api/blob/docs/sdk-api-src/content/winioctl/ns-winioctl-txfs_query_rm_information.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
