<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="KS_VIDEOINFO - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>KS_VIDEOINFO - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            KS_VIDEOINFO - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ksmedia.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct tagKS_VIDEOINFO {
  RECT                rcSource;
  RECT                rcTarget;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>               dwBitRate;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>               dwBitErrorRate;
  REFERENCE_TIME      AvgTimePerFrame;
  <a href="ks_bitmapinfoheader" title="typedef struct tagKS_BITMAPINFOHEADER {&#10;  DWORD biSize;&#10;  LONG  biWidth;&#10;  LONG  biHeight;&#10;  WORD  biPlanes;&#10;  WORD  biBitCount;&#10;  DWORD biCompression;&#10;  DWORD biSizeImage;&#10;  LONG  biXPelsPerMeter;&#10;  LONG  biYPelsPerMeter;&#10;  DWORD biClrUsed;&#10;  DWORD biClrImportant;&#10;} KS_BITMAPINFOHEADER, *PKS_BITMAPINFOHEADER;">KS_BITMAPINFOHEADER</a> bmiHeader;
  union {
    <a href="ks_rgbquad" title="typedef struct tagKS_RGBQUAD {&#10;  BYTE rgbBlue;&#10;  BYTE rgbGreen;&#10;  BYTE rgbRed;&#10;  BYTE rgbReserved;&#10;} KS_RGBQUAD, *PKS_RGBQUAD;">KS_RGBQUAD</a>       bmiColors[KS_iPALETTE_COLORS];
    <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>            dwBitMasks[KS_iMASK_COLORS];
    <a href="ks_truecolorinfo" title="typedef struct tag_KS_TRUECOLORINFO {&#10;  DWORD      dwBitMasks[KS_iMASK_COLORS];&#10;  KS_RGBQUAD bmiColors[KS_iPALETTE_COLORS];&#10;} KS_TRUECOLORINFO, *PKS_TRUECOLORINFO;">KS_TRUECOLORINFO</a> TrueColorInfo;
  };
} KS_VIDEOINFO, *PKS_VIDEOINFO;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ksmedia/ns-ksmedia-tagks_videoinfo">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ks_videoinfo.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ksmedia-tagks_videoinfo)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>tagKS_VIDEOINFO structure</h1>

<h2>Description</h2>

<p>The KS_VIDEOINFO structure describes the bitmap and color information for a video stream.</p>

<h2>Members</h2>

<h3><code>rcSource</code></h3>

<p>Specifies a clipping rectangle that selects the portion of the active video signal to use.</p>

<h3><code>rcTarget</code></h3>

<p>Specifies a rectangle that indicates which part of the target buffer to use.</p>

<h3><code>dwBitRate</code></h3>

<p>Specifies a value that indicates the video stream's approximate data rate, in bits per second.</p>

<h3><code>dwBitErrorRate</code></h3>

<p>Specifies a value that indicates the video stream's data error rate, in bit errors per second.</p>

<h3><code>AvgTimePerFrame</code></h3>

<p>Specifies the average time per frame in 100-nanosecond units.</p>

<h3><code>bmiHeader</code></h3>

<p>Describes a <a href="ks_bitmapinfoheader" title="typedef struct tagKS_BITMAPINFOHEADER {&#10;  DWORD biSize;&#10;  LONG  biWidth;&#10;  LONG  biHeight;&#10;  WORD  biPlanes;&#10;  WORD  biBitCount;&#10;  DWORD biCompression;&#10;  DWORD biSizeImage;&#10;  LONG  biXPelsPerMeter;&#10;  LONG  biYPelsPerMeter;&#10;  DWORD biClrUsed;&#10;  DWORD biClrImportant;&#10;} KS_BITMAPINFOHEADER, *PKS_BITMAPINFOHEADER;">KS_BITMAPINFOHEADER</a> structure that contains color and dimension information about the video image bitmap.</p>

<h3><code>bmiColors</code></h3>

<p>Array of <a href="ks_rgbquad" title="typedef struct tagKS_RGBQUAD {&#10;  BYTE rgbBlue;&#10;  BYTE rgbGreen;&#10;  BYTE rgbRed;&#10;  BYTE rgbReserved;&#10;} KS_RGBQUAD, *PKS_RGBQUAD;">KS_RGBQUAD</a> structures that specifies the video's color palette. Each structure represents a single color, which is a combination of red, green, and blue intensities.</p>

<h3><code>dwBitMasks</code></h3>

<p>Array of <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> values that specify true-color bitmasks.</p>

<h3><code>TrueColorInfo</code></h3>

<p><a href="ks_truecolorinfo" title="typedef struct tag_KS_TRUECOLORINFO {&#10;  DWORD      dwBitMasks[KS_iMASK_COLORS];&#10;  KS_RGBQUAD bmiColors[KS_iPALETTE_COLORS];&#10;} KS_TRUECOLORINFO, *PKS_TRUECOLORINFO;">KS_TRUECOLORINFO</a> structure that contains both a color palette and an array of color bitmasks.</p>

<h2>Remarks</h2>

<p>This structure must not be used unless the <strong>biSize</strong> member of the <a href="ks_bitmapinfoheader" title="typedef struct tagKS_BITMAPINFOHEADER {&#10;  DWORD biSize;&#10;  LONG  biWidth;&#10;  LONG  biHeight;&#10;  WORD  biPlanes;&#10;  WORD  biBitCount;&#10;  DWORD biCompression;&#10;  DWORD biSizeImage;&#10;  LONG  biXPelsPerMeter;&#10;  LONG  biYPelsPerMeter;&#10;  DWORD biClrUsed;&#10;  DWORD biClrImportant;&#10;} KS_BITMAPINFOHEADER, *PKS_BITMAPINFOHEADER;">KS_BITMAPINFOHEADER</a> member is set to <strong>sizeof</strong>(<a href="ks_bitmapinfoheader" title="typedef struct tagKS_BITMAPINFOHEADER {&#10;  DWORD biSize;&#10;  LONG  biWidth;&#10;  LONG  biHeight;&#10;  WORD  biPlanes;&#10;  WORD  biBitCount;&#10;  DWORD biCompression;&#10;  DWORD biSizeImage;&#10;  LONG  biXPelsPerMeter;&#10;  LONG  biYPelsPerMeter;&#10;  DWORD biClrUsed;&#10;  DWORD biClrImportant;&#10;} KS_BITMAPINFOHEADER, *PKS_BITMAPINFOHEADER;">KS_BITMAPINFOHEADER</a>).</p>

<p>A source filter can request that the sink filter take only a section of the video by providing values that effectively define a clipping rectangle in the <strong>rcSource</strong> member. However, if the sink filter does not check for the clipping rectangle on connection, the sink filter simply renders all of the video, effectively ignoring any clipping information passed from the source filter to the sink filter.</p>

<p>Ideally, a sink filter checks <strong>rcSource</strong> and if the sink filter does not support image extraction and the rectangle is <em>not</em> empty, then it rejects the connection. A filter should use the Win32 function <strong>SetRectEmpty</strong> to reset a rectangle to all zeros (and <strong>IsRectEmpty</strong> to later check the rectangle).</p>

<p>The <strong>rcTarget</strong> member specifies the destination rectangle for the video. Most source filters set this member to all zeros. A downstream filter can request that the video be placed in a particular area of the buffers it supplies. In this case, it calls the Win32 function <strong>QueryAccept</strong> with a nonempty target.</p>

<h2>See also</h2>

<p><a href="ks_bitmapinfoheader" title="typedef struct tagKS_BITMAPINFOHEADER {&#10;  DWORD biSize;&#10;  LONG  biWidth;&#10;  LONG  biHeight;&#10;  WORD  biPlanes;&#10;  WORD  biBitCount;&#10;  DWORD biCompression;&#10;  DWORD biSizeImage;&#10;  LONG  biXPelsPerMeter;&#10;  LONG  biYPelsPerMeter;&#10;  DWORD biClrUsed;&#10;  DWORD biClrImportant;&#10;} KS_BITMAPINFOHEADER, *PKS_BITMAPINFOHEADER;">KS_BITMAPINFOHEADER</a></p>

<p><a href="ks_rgbquad" title="typedef struct tagKS_RGBQUAD {&#10;  BYTE rgbBlue;&#10;  BYTE rgbGreen;&#10;  BYTE rgbRed;&#10;  BYTE rgbReserved;&#10;} KS_RGBQUAD, *PKS_RGBQUAD;">KS_RGBQUAD</a></p>

<p><a href="ks_truecolorinfo" title="typedef struct tag_KS_TRUECOLORINFO {&#10;  DWORD      dwBitMasks[KS_iMASK_COLORS];&#10;  KS_RGBQUAD bmiColors[KS_iPALETTE_COLORS];&#10;} KS_TRUECOLORINFO, *PKS_TRUECOLORINFO;">KS_TRUECOLORINFO</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ksmedia/ns-ksmedia-tagks_videoinfo">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ksmedia/ns-ksmedia-tagks_videoinfo.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
