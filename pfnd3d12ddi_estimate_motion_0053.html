<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="PFND3D12DDI_ESTIMATE_MOTION_0053 - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>PFND3D12DDI_ESTIMATE_MOTION_0053 - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            PFND3D12DDI_ESTIMATE_MOTION_0053 - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3d12umddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">PFND3D12DDI_ESTIMATE_MOTION_0053 Pfnd3d12ddiEstimateMotion0053;

VOID Pfnd3d12ddiEstimateMotion0053(
  D3D12DDI_HCOMMANDLIST hDrvCommandList,
  D3D12DDI_HVIDEOMOTIONESTIMATOR_0053 hDrvMotionEstimator,
  const <a href="d3d12ddi_video_motion_estimator_output_0053" title="typedef struct D3D12DDI_VIDEO_MOTION_ESTIMATOR_OUTPUT_0053 {&#10;  D3D12DDI_HVIDEOMOTIONVECTORHEAP_0053 hDrvMotionVectorHeap;&#10;} D3D12DDI_VIDEO_MOTION_ESTIMATOR_OUTPUT_0053;">D3D12DDI_VIDEO_MOTION_ESTIMATOR_OUTPUT_0053</a> *pOutputArguments,
  const <a href="d3d12ddi_video_motion_estimator_input_0053" title="typedef struct D3D12DDI_VIDEO_MOTION_ESTIMATOR_INPUT_0053 {&#10;  D3D12DDI_HRESOURCE                   hDrvInputTexture2D;&#10;  UINT                                 InputSubresourceIndex;&#10;  D3D12DDI_HRESOURCE                   hDrvReferenceTexture2D;&#10;  UINT                                 ReferenceSubresourceIndex;&#10;  D3D12DDI_HVIDEOMOTIONVECTORHEAP_0053 hDrvPreviousMotionVectorHeap;&#10;} D3D12DDI_VIDEO_MOTION_ESTIMATOR_INPUT_0053;">D3D12DDI_VIDEO_MOTION_ESTIMATOR_INPUT_0053</a> *pInputArguments
)
{...}</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/nc-d3d12umddi-pfnd3d12ddi_estimate_motion_0053">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/pfnd3d12ddi_estimate_motion_0053.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-d3d12umddi-pfnd3d12ddi_estimate_motion_0053)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="pfnd3d12ddi_estimate_motion_0053-callback-function">PFND3D12DDI_ESTIMATE_MOTION_0053 callback function</h1>

<h2 id="description">Description</h2>

<p>Performs the motion estimation operation.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="hdrvcommandlist"><code>hDrvCommandList</code></h3>

<p>Driver handle for a video encode command list.</p>

<h3 id="hdrvmotionestimator"><code>hDrvMotionEstimator</code></h3>

<p>Handle to the motion estimator context object.</p>

<h3 id="poutputarguments"><code>pOutputArguments</code></h3>

<p>Pointer to a <a href="d3d12ddi_video_motion_estimator_output_0053" title="typedef struct D3D12DDI_VIDEO_MOTION_ESTIMATOR_OUTPUT_0053 {&#10;  D3D12DDI_HVIDEOMOTIONVECTORHEAP_0053 hDrvMotionVectorHeap;&#10;} D3D12DDI_VIDEO_MOTION_ESTIMATOR_OUTPUT_0053;">D3D12DDI_VIDEO_MOTION_ESTIMATOR_OUTPUT_0053</a> structure that contains the output arguments for the motion estimation operation.</p>

<h3 id="pinputarguments"><code>pInputArguments</code></h3>

<p>Pointer to a <a href="d3d12ddi_video_motion_estimator_input_0053" title="typedef struct D3D12DDI_VIDEO_MOTION_ESTIMATOR_INPUT_0053 {&#10;  D3D12DDI_HRESOURCE                   hDrvInputTexture2D;&#10;  UINT                                 InputSubresourceIndex;&#10;  D3D12DDI_HRESOURCE                   hDrvReferenceTexture2D;&#10;  UINT                                 ReferenceSubresourceIndex;&#10;  D3D12DDI_HVIDEOMOTIONVECTORHEAP_0053 hDrvPreviousMotionVectorHeap;&#10;} D3D12DDI_VIDEO_MOTION_ESTIMATOR_INPUT_0053;">D3D12DDI_VIDEO_MOTION_ESTIMATOR_INPUT_0053</a> structure that contains the input arguments for the motion estimation operation.</p>

<h2 id="prototype">Prototype</h2>

<div class="codehilite">
<pre><span></span><code><span class="c1">//Declaration</span>

<span class="n">PFND3D12DDI_ESTIMATE_MOTION_0053</span><span class="w"> </span><span class="n">Pfnd3d12ddiEstimateMotion0053</span><span class="p">;</span>

<span class="c1">// Definition</span>

<span class="n">VOID</span><span class="w"> </span><span class="nf">Pfnd3d12ddiEstimateMotion0053</span>
<span class="p">(</span>
<span class="w">    </span><span class="n">D3D12DDI_HCOMMANDLIST</span><span class="w"> </span><span class="n">hDrvCommandList</span>
<span class="w">    </span><span class="n">D3D12DDI_HVIDEOMOTIONESTIMATOR_0053</span><span class="w"> </span><span class="n">hDrvMotionEstimator</span>
<span class="w">    </span><span class="n">CONST</span><span class="w"> </span><span class="n"><a href="d3d12ddi_video_motion_estimator_output_0053" title="typedef struct D3D12DDI_VIDEO_MOTION_ESTIMATOR_OUTPUT_0053 {&#10;  D3D12DDI_HVIDEOMOTIONVECTORHEAP_0053 hDrvMotionVectorHeap;&#10;} D3D12DDI_VIDEO_MOTION_ESTIMATOR_OUTPUT_0053;">D3D12DDI_VIDEO_MOTION_ESTIMATOR_OUTPUT_0053</a></span><span class="w"> </span><span class="o">*</span><span class="n">pOutputArguments</span>
<span class="w">    </span><span class="n">CONST</span><span class="w"> </span><span class="n"><a href="d3d12ddi_video_motion_estimator_input_0053" title="typedef struct D3D12DDI_VIDEO_MOTION_ESTIMATOR_INPUT_0053 {&#10;  D3D12DDI_HRESOURCE                   hDrvInputTexture2D;&#10;  UINT                                 InputSubresourceIndex;&#10;  D3D12DDI_HRESOURCE                   hDrvReferenceTexture2D;&#10;  UINT                                 ReferenceSubresourceIndex;&#10;  D3D12DDI_HVIDEOMOTIONVECTORHEAP_0053 hDrvPreviousMotionVectorHeap;&#10;} D3D12DDI_VIDEO_MOTION_ESTIMATOR_INPUT_0053;">D3D12DDI_VIDEO_MOTION_ESTIMATOR_INPUT_0053</a></span><span class="w"> </span><span class="o">*</span><span class="n">pInputArguments</span>
<span class="p">)</span>
<span class="p">{...}</span>
</code></pre>
</div>

<h2 id="remarks">Remarks</h2>

<p>The motion estimation operation has a context object to associate the lifetime of internal allocations needed to perform the operation. All allocations associated with his object should be allocated when the object is created and deallocated when the object is de-allocated. This should include any buffers used as temporary/scratch storage.</p>

<p>Operations against this object may be recorded to command lists in a different order than execution. No two API queue instances may be executing command lists containing this object at the same time and expect valid results. The application is responsible for synchronizing access across multiple queue instances.</p>

<p>This object must support <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/nc-d3d12umddi-pfnd3d12ddi_makeresident_cb">PFND3D12DDI_MAKERESIDENT</a>, <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/nc-d3d12umddi-pfnd3d12ddi_evict_cb">PFND3D12DDI_EVICT</a>, and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/nc-d3d12umddi-pfnd3d12ddi_get_debug_allocation_info_0012">PFND3D12DDI_GET_DEBUG_ALLOCATION_INFO</a>.</p>

<h2 id="see-also">See also</h2>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d12umddi/nc-d3d12umddi-pfnd3d12ddi_estimate_motion_0053">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3d12umddi/nc-d3d12umddi-pfnd3d12ddi_estimate_motion_0053.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
