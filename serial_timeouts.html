<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="SERIAL_TIMEOUTS - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>SERIAL_TIMEOUTS - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github.ntdoc.min.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github-dark-dimmed.ntdoc.min.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            SERIAL_TIMEOUTS - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddser.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _SERIAL_TIMEOUTS {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> ReadIntervalTimeout;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> ReadTotalTimeoutMultiplier;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> ReadTotalTimeoutConstant;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> WriteTotalTimeoutMultiplier;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> WriteTotalTimeoutConstant;
} SERIAL_TIMEOUTS, *PSERIAL_TIMEOUTS;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddser/ns-ntddser-_serial_timeouts">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/serial_timeouts.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntddser-_serial_timeouts)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>_SERIAL_TIMEOUTS structure</h1>
<h2>Description</h2>
<p>The <strong>SERIAL_TIMEOUTS</strong> structure specifies the time-out parameters for read and write operations by the serial port.</p>
<h2>Members</h2>
<h3><code>ReadIntervalTimeout</code></h3>
<p>The maximum amount of time, in milliseconds, that is allowed between two consecutive bytes in a read operation. A read operation that exceeds this maximum times out. This maximum does not apply to the time interval that precedes the reading of the first byte. A value of zero indicates that interval time-outs are not used. For more information, see Remarks.</p>
<h3><code>ReadTotalTimeoutMultiplier</code></h3>
<p>The maximum amount of time, in milliseconds, that is allowed per byte in a read operation. A read operation that exceeds this maximum times out. For more information, see Remarks.</p>
<h3><code>ReadTotalTimeoutConstant</code></h3>
<p>The maximum amount of additional time, in milliseconds, that is allowed per read operation. A read operation that exceeds this maximum times out. For more information, see Remarks.</p>
<h3><code>WriteTotalTimeoutMultiplier</code></h3>
<p>The maximum total time, in milliseconds, that is allowed per byte in a write operation. A write operation that exceeds this maximum times out. For more information, see Remarks.</p>
<h3><code>WriteTotalTimeoutConstant</code></h3>
<p>The maximum amount of additional time, in milliseconds, that is allowed per write operation. A write operation that exceeds this maximum times out. For more information, see Remarks.</p>
<h2>Remarks</h2>
<p>The <strong>SERIAL_TIMEOUTS</strong> structure is used by the <a href="ioctl_serial_set_timeouts" title="// CTL_CODE(0x001b, 0x007, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_SERIAL_SET_TIMEOUTS 0x001B001C">IOCTL_SERIAL_SET_TIMEOUTS</a> and <a href="ioctl_serial_get_timeouts" title="// CTL_CODE(0x001b, 0x008, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_SERIAL_GET_TIMEOUTS 0x001B0020">IOCTL_SERIAL_GET_TIMEOUTS</a> I/O control requests. An <strong><a href="ioctl_serial_set_timeouts" title="// CTL_CODE(0x001b, 0x007, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_SERIAL_SET_TIMEOUTS 0x001B001C">IOCTL_SERIAL_SET_TIMEOUTS</a></strong> I/O control request uses this structure to specify a set of time-out parameters for the serial port to use for read and write operations. An <strong><a href="ioctl_serial_get_timeouts" title="// CTL_CODE(0x001b, 0x008, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_SERIAL_GET_TIMEOUTS 0x001B0020">IOCTL_SERIAL_GET_TIMEOUTS</a></strong> I/O control request uses this structure to retrieve the time-out parameters that were set by the previous <strong><a href="ioctl_serial_set_timeouts" title="// CTL_CODE(0x001b, 0x007, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_SERIAL_SET_TIMEOUTS 0x001B001C">IOCTL_SERIAL_SET_TIMEOUTS</a></strong> request.</p>
<p>A read or write request successfully completes when either the specified number of bytes is transferred or the requested read or write operation times out. The request returns the <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> status code to indicate that the specified number of bytes was transferred. The request returns the STATUS_TIMEOUT status code to indicate that the operation timed out.</p>
<p>If an <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ifs/irp-mj-read">IRP_MJ_READ</a> request specifies a read operation that is Nₜₒₜₐₗ bytes in length, the maximum amount of time, Tₘₐₓ, that the serial port allows for the operation to complete is calculated as follows:</p>
<p>Tₘₐₓ = Nₜₒₜₐₗ * <strong>ReadTotalTimeoutMultiplier</strong> + <strong>ReadTotalTimeoutConstant</strong></p>
<p>A read request that exceeds this maximum completes when the time-out occurs, and returns the STATUS_TIMEOUT status code. The <strong>Information</strong> field of the I/O status block indicates the number of bytes successfully read before the time-out occurred.</p>
<p>If an <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mj-write">IRP_MJ_WRITE</a> request specifies a write operation that is Nₜₒₜₐₗ bytes in length, the maximum amount of time, Tₘₐₓ, that the serial port allows for the operation to complete is calculated as follows:</p>
<p>Tₘₐₓ = Nₜₒₜₐₗ * <strong>WriteTotalTimeoutMultiplier</strong> + <strong>WriteTotalTimeoutConstant</strong></p>
<p>A write request that exceeds this maximum completes when the time-out occurs, and returns the STATUS_TIMEOUT status code. The <strong>Information</strong> field of the I/O status block indicates the number of bytes successfully written before the time-out occurred.</p>
<p>The maximum time, Tₘₐₓ, that is allowed for a read or write operation to complete is always measured from when the serial port starts the requested operation, and not from when the client submits the request.</p>
<p>If <strong>ReadIntervalTimeout</strong>, <strong>ReadTotalTimeoutMultiplier</strong>, and <strong>ReadTotalTimeoutConstant</strong> are all zero, read operations never time out. If <strong>WriteTotalTimeoutMultiplier</strong> and <strong>WriteTotalTimeoutConstant</strong> are both zero, write operations never time out.</p>
<p>If <strong>ReadIntervalTimeout</strong> is zero, there is no maximum interval between consecutive bytes in read operations, and time-outs are based solely on the <strong>ReadTotalTimeoutMultiplier</strong> and <strong>ReadTotalTimeoutConstant</strong> members.</p>
<p>If both <strong>ReadTotalTimeoutMultiplier</strong> and <strong>ReadTotalTimeoutConstant</strong> are zero, and <strong>ReadIntervalTimeout</strong> is less than <a href="maxulong" title="#define MAXULONG 0xffffffff // winnt">MAXULONG</a> and greater than zero, a read operation times out only if the interval between a pair of consecutively received bytes exceeds <strong>ReadIntervalTimeout</strong>. If these three time-out values are used, and the serial port's input buffer is empty when a read request is sent to the port, this request never times out until after the port receives at least one byte of new data.</p>
<p>If <strong>ReadIntervalTimeout</strong> is set to <a href="maxulong" title="#define MAXULONG 0xffffffff // winnt">MAXULONG</a>, and both <strong>ReadTotalTimeoutConstant</strong> and <strong>ReadTotalTimeoutMultiplier</strong> are zero, a read request completes immediately with the bytes that have already been received, even if no bytes have been received. In this case, the read request returns the <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> status code.</p>
<p>If both <strong>ReadIntervalTimeout</strong> and <strong>ReadTotalTimeoutMultiplier</strong> are set to <a href="maxulong" title="#define MAXULONG 0xffffffff // winnt">MAXULONG</a>, and <strong>ReadTotalTimeoutConstant</strong> is set to a value greater than zero and less than <a href="maxulong" title="#define MAXULONG 0xffffffff // winnt">MAXULONG</a>, a read request behaves as follows:</p>
<ul>
<li>If there are any bytes in the serial port's input buffer, the read request completes immediately with the bytes that are in the buffer and returns the <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> status code.</li>
<li>If there are no bytes in the input buffer, the serial port waits until a byte arrives, and then immediately completes the read request with the one byte of data and returns the <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> status code.</li>
<li>If no bytes arrive within the time specified by <strong>ReadTotalTimeoutConstant</strong>, the read request times out, sets the <strong>Information</strong> field of the I/O status block to zero, and returns the STATUS_TIMEOUT status code.</li>
</ul>
<p>An <strong><a href="ioctl_serial_set_timeouts" title="// CTL_CODE(0x001b, 0x007, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_SERIAL_SET_TIMEOUTS 0x001B001C">IOCTL_SERIAL_SET_TIMEOUTS</a></strong> request fails and returns an INVALID_PARAMETER error status code if <strong>ReadIntervalTimeout</strong> and <strong>ReadTotalTimeoutConstant</strong> are both set to <a href="maxulong" title="#define MAXULONG 0xffffffff // winnt">MAXULONG</a>.</p>
<p>A read-interval time-out can be used to detect the end of an incoming data stream when the length of the data stream is not known in advance. If a read request uses this technique, a STATUS_TIMEOUT completion status code usually means that the request completed successfully.</p>
<p>A read-interval time-out occurs when the interval between incoming bytes exceeds the <strong>ReadIntervalTimeout</strong> value. Time-out intervals are measured relative to the system clock, and the accuracy of the time-out measurement is limited by the granularity of the system clock. As a result, a time-out can occur between one system clock tick earlier and one tick later than the specified time-out interval, depending on where exactly the start and end times of this interval fall between system clock ticks. Time-outs might occur even later if system clock interrupt processing is delayed by interrupt processing for other devices. If a specified time-out interval is close to or smaller than the period between system clock ticks, the time-out might occur immediately, with no delay.</p>
<p>A possible way to more accurately measure smaller time-out intervals is to decrease the time between system clock ticks, but doing so is likely to increase power consumption. In addition, reducing the system clock period might not reliably achieve a finer system clock granularity unless interrupt-related processing by the various drivers in the platform can be guaranteed not to delay the processing of system clock interrupts.</p>
<p>The <strong>SERIAL_TIMEOUTS</strong> structure is similar to the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/winbase/ns-winbase-commtimeouts">COMMTIMEOUTS</a> structure, which is used by the user-mode <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/winbase/nf-winbase-setcommtimeouts">SetCommTimeouts</a> and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/winbase/nf-winbase-getcommtimeouts">GetCommTimeouts</a> functions.</p>
<p>For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/ff547486(v=vs.85)">Setting Read and Write Timeouts for a Serial Device</a>.</p>
<h2>See also</h2>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/winbase/ns-winbase-commtimeouts">COMMTIMEOUTS</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/winbase/nf-winbase-getcommtimeouts">GetCommTimeouts</a></p>
<p><a href="ioctl_serial_set_timeouts" title="// CTL_CODE(0x001b, 0x007, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_SERIAL_SET_TIMEOUTS 0x001B001C">IOCTL_SERIAL_SET_TIMEOUTS</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ifs/irp-mj-read">IRP_MJ_READ</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mj-write">IRP_MJ_WRITE</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/sercx/nf-sercx-sercxgetreadintervaltimeout">SerCxGetReadIntervalTimeout</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/winbase/nf-winbase-setcommtimeouts">SetCommTimeouts</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddser/ns-ntddser-_serial_timeouts">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddser/ns-ntddser-_serial_timeouts.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script src="modules/highlight.js/highlight.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
