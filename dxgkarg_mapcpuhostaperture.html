<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DXGKARG_MAPCPUHOSTAPERTURE - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DXGKARG_MAPCPUHOSTAPERTURE - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DXGKARG_MAPCPUHOSTAPERTURE - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3dkmddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _DXGKARG_MAPCPUHOSTAPERTURE {
  HANDLE hAllocation;
  <a href="word" title="typedef unsigned short WORD;">WORD</a>   SegmentId;
  <a href="word" title="typedef unsigned short WORD;">WORD</a>   PhysicalAdapterIndex;
  <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a> NumberOfPages;
  <a href="uint32" title="typedef unsigned int UINT32;">UINT32</a> *pCpuHostAperturePages;
  <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a> *pMemorySegmentPages;
} DXGKARG_MAPCPUHOSTAPERTURE;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/ns-d3dkmddi-_dxgkarg_mapcpuhostaperture">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/dxgkarg_mapcpuhostaperture.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-d3dkmddi-_dxgkarg_mapcpuhostaperture)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>_DXGKARG_MAPCPUHOSTAPERTURE structure</h1>
<h2>Description</h2>
<p>The <strong>DXGKARG_MAPCPUHOSTAPERTURE</strong> structure is used to map an allocation, resident in a local memory segment, into the CPU host aperture in order to make it visible to the CPU.</p>
<h2>Members</h2>
<h3><code>hAllocation</code></h3>
<p>Specifies the allocation handle, associated with the allocation being mapped. This is the handle, returned by the kernel mode driver from <a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkddi_createallocation">DxgkDdiCreateAllocation</a> or passed in <a href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/nc-d3dkmddi-dxgkcb_createcontextallocation">DxgkCbCreateContextAllocation</a>. This parameter will be <strong>NULL</strong> for implicit allocations, such as a page table.</p>
<h3><code>SegmentId</code></h3>
<p>Specifies the segment identifier of the segment being accessed.</p>
<h3><code>PhysicalAdapterIndex</code></h3>
<p>A zero-based physical adapter index in a linked display adapter link.
The page size is equal to the segment page size, reported in <a href="dxgk_segmentflags" title="typedef struct _DXGK_SEGMENTFLAGS {&#10;  union {&#10;    struct {&#10;      UINT Aperture : 1;&#10;      UINT Agp : 1;&#10;      UINT CpuVisible : 1;&#10;      UINT UseBanking : 1;&#10;      UINT CacheCoherent : 1;&#10;      UINT PitchAlignment : 1;&#10;      UINT PopulatedFromSystemMemory : 1;&#10;      UINT PreservedDuringStandby : 1;&#10;      UINT PreservedDuringHibernate : 1;&#10;      UINT PartiallyPreservedDuringHibernate : 1;&#10;      UINT DirectFlip : 1;&#10;      UINT Use64KBPages : 1;&#10;      UINT ReservedSysMem : 1;&#10;      UINT SupportsCpuHostAperture : 1;&#10;      UINT SupportsCachedCpuHostAperture : 1;&#10;      UINT ApplicationTarget : 1;&#10;      UINT VprSupported : 1;&#10;...">DXGK_SEGMENTFLAGS</a>.</p>
<p><strong>Note</strong> The allocation itself might be aligned on 4KB page boundary. When the segment page size is 64 KB, CPU host aperture in this case will map more than the allocation size.</p>
<h3><code>NumberOfPages</code></h3>
<p>Specifies the number of pages being mapped.</p>
<h3><code>pCpuHostAperturePages</code></h3>
<p>Array of CPU Host Aperture pages to map. This is an array of page indices from the start of the CPU host aperture physical address.</p>
<h3><code>pMemorySegmentPages</code></h3>
<p><a href="mdl" title="typedef struct _MDL {&#10;  struct _MDL      *Next;&#10;  CSHORT           Size;&#10;  CSHORT           MdlFlags;&#10;  struct _EPROCESS *Process;&#10;  PVOID            MappedSystemVa;&#10;  PVOID            StartVa;&#10;  ULONG            ByteCount;&#10;  ULONG            ByteOffset;&#10;} MDL, *PMDL;">MDL</a>-style array of page indices to the allocation pages that need to be mapped into the CPU host aperture. The page indexes starting from 0.</p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/ns-d3dkmddi-_dxgkarg_mapcpuhostaperture">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3dkmddi/ns-d3dkmddi-_dxgkarg_mapcpuhostaperture.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
