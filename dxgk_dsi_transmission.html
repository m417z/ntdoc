<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DXGK_DSI_TRANSMISSION - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DXGK_DSI_TRANSMISSION - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DXGK_DSI_TRANSMISSION - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// dispmprt.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _DXGK_DSI_TRANSMISSION {
  <a href="uint" title="typedef unsigned int UINT;">UINT</a>            TotalBufferSize;
  <a href="byte" title="typedef unsigned char BYTE;">BYTE</a>            PacketCount;
  <a href="byte" title="typedef unsigned char BYTE;">BYTE</a>            FailedPacket;
  struct {
    <a href="word" title="typedef unsigned short WORD;">WORD</a> TransmissionMode : 2;
    <a href="word" title="typedef unsigned short WORD;">WORD</a> ReportMipiErrors : 1;
    <a href="word" title="typedef unsigned short WORD;">WORD</a> ClearMipiErrors : 1;
    <a href="word" title="typedef unsigned short WORD;">WORD</a> SecondaryPort : 1;
    <a href="word" title="typedef unsigned short WORD;">WORD</a> ManufacturingMode : 1;
    <a href="word" title="typedef unsigned short WORD;">WORD</a> Reserved : 10;
  };
  <a href="word" title="typedef unsigned short WORD;">WORD</a>            ReadWordCount;
  <a href="word" title="typedef unsigned short WORD;">WORD</a>            FinalCommandExtraPayload;
  <a href="word" title="typedef unsigned short WORD;">WORD</a>            MipiErrors;
  <a href="word" title="typedef unsigned short WORD;">WORD</a>            HostErrors;
  <a href="dxgk_dsi_packet" title="typedef struct _DXGK_DSI_PACKET {&#10;  union {&#10;    BYTE DataId;&#10;    struct {&#10;      BYTE DataType : 6;&#10;      BYTE VirtualChannel : 2;&#10;    };&#10;  };&#10;  union {&#10;    struct {&#10;      BYTE Data0;&#10;      BYTE Data1;&#10;    };&#10;    WORD LongWriteWordCount;&#10;  };&#10;  BYTE  EccFiller;&#10;  BYTE  Payload[DXGK_DSI_PACKET_EMBEDDED_PAYLOAD_SIZE];&#10;} DXGK_DSI_PACKET, *PDXGK_DSI_PACKET;">DXGK_DSI_PACKET</a> Packets[1];
} DXGK_DSI_TRANSMISSION, *PDXGK_DSI_TRANSMISSION;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/ns-dispmprt-dxgk_dsi_transmission">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/dxgk_dsi_transmission.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-dispmprt-dxgk_dsi_transmission)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="dxgk_dsi_transmission-structure">DXGK_DSI_TRANSMISSION structure</h1>

<h2 id="description">Description</h2>

<p>The DXGK_DSI_TRANSMISSION structure is used to transmit Display Serial Interface (DSI) packets to the bus driver (graphics kernel).</p>

<h2 id="members">Members</h2>

<h3 id="totalbuffersize"><code>TotalBufferSize</code></h3>

<p>Number of bytes in the entire structure including header, commands and payload.</p>

<h3 id="packetcount"><code>PacketCount</code></h3>

<p>Number of <a href="dxgk_dsi_packet" title="typedef struct _DXGK_DSI_PACKET {&#10;  union {&#10;    BYTE DataId;&#10;    struct {&#10;      BYTE DataType : 6;&#10;      BYTE VirtualChannel : 2;&#10;    };&#10;  };&#10;  union {&#10;    struct {&#10;      BYTE Data0;&#10;      BYTE Data1;&#10;    };&#10;    WORD LongWriteWordCount;&#10;  };&#10;  BYTE  EccFiller;&#10;  BYTE  Payload[DXGK_DSI_PACKET_EMBEDDED_PAYLOAD_SIZE];&#10;} DXGK_DSI_PACKET, *PDXGK_DSI_PACKET;">DXGK_DSI_PACKET</a> elements in the <strong>Packets</strong> array.</p>

<h3 id="failedpacket"><code>FailedPacket</code></h3>

<p>Index, when known, of <a href="dxgk_dsi_packet" title="typedef struct _DXGK_DSI_PACKET {&#10;  union {&#10;    BYTE DataId;&#10;    struct {&#10;      BYTE DataType : 6;&#10;      BYTE VirtualChannel : 2;&#10;    };&#10;  };&#10;  union {&#10;    struct {&#10;      BYTE Data0;&#10;      BYTE Data1;&#10;    };&#10;    WORD LongWriteWordCount;&#10;  };&#10;  BYTE  EccFiller;&#10;  BYTE  Payload[DXGK_DSI_PACKET_EMBEDDED_PAYLOAD_SIZE];&#10;} DXGK_DSI_PACKET, *PDXGK_DSI_PACKET;">DXGK_DSI_PACKET</a> in the Packets array that had an error. If not known or there is no detected packet error, the value DXGK_DSI_INVALID_PACKET_INDEX is set.</p>

<h3 id="transmissionmode"><code>TransmissionMode</code></h3>

<p>One of the DXGK_MIPI_CONTROL_TRANSMISSIONMODE values.</p>

<h3 id="reportmipierrors"><code>ReportMipiErrors</code></h3>

<p>If set, graphics driver should request any accumulated MIPI errors in the final command acknowledgement and report them in the MipiErrors field.</p>

<h3 id="clearmipierrors"><code>ClearMipiErrors</code></h3>

<p>If set and the graphics driver has sent any non-OEM panel initiated commands, the driver should ensure that any accumulated MIPI errors are cleared before starting to send this sequence.</p>

<h3 id="secondaryport"><code>SecondaryPort</code></h3>

<p>Set if the transmission should be sent to a secondary panel, not the primary.</p>

<h3 id="manufacturingmode"><code>ManufacturingMode</code></h3>

<p>Set to turn off OS validation of DCS commands when the system is in manufacturing mode.</p>

<h3 id="reserved"><code>Reserved</code></h3>

<p>Reserved.</p>

<h3 id="readwordcount"><code>ReadWordCount</code></h3>

<h3 id="finalcommandextrapayload"><code>FinalCommandExtraPayload</code></h3>

<h3 id="mipierrors"><code>MipiErrors</code></h3>

<p>A combination of the following possible error values, indicating the errors reported by communication with the peripheral.</p>

<table>
<thead>
<tr>
  <th>DXGK_MIPI_DSI_XXX Error</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td>DXGK_MIPI_DSI_SOT_ERROR</td>
  <td>Possible error in Start of High-Speed transmission leader sequence</td>
</tr>
<tr>
  <td>DXGK_MIPI_DSI_SOT_SYNC_ERROR</td>
  <td>Error in Start of High-Speed transmission leader sequence</td>
</tr>
<tr>
  <td>DXGK_MIPI_DSI_EOT_SYNC_ERROR</td>
  <td>Peripheral detected incomplete bytes in High-Speed transmission</td>
</tr>
<tr>
  <td>DXGK_MIPI_DSI_ESCAPE_MODE_ENTRY_COMMAND_ERROR</td>
  <td>Error or peripheral does not recognize escape sequence</td>
</tr>
<tr>
  <td>DXGK_MIPI_DSI_LOW_POWER_TRANSMIT_SYNC_ERROR</td>
  <td>Peripheral detected incomplete bytes in Low-Speed transmission</td>
</tr>
<tr>
  <td>DXGK_MIPI_DSI_FALSE_CONTROL_ERROR</td>
  <td>Peripheral detected error in escape sequence or turnaround sequence</td>
</tr>
<tr>
  <td>DXGK_MIPI_DSI_CONTENTION_DETECTED</td>
  <td>Contention detected</td>
</tr>
<tr>
  <td>DXGK_MIPI_DSI_CHECKSUM_ERROR_CORRECTED</td>
  <td>A checksum error was detected and corrected</td>
</tr>
<tr>
  <td>DXGK_MIPI_DSI_CHECKSUM_ERROR_NOT_CORRECTED</td>
  <td>A checksum error was detected but could not be corrected</td>
</tr>
<tr>
  <td>DXGK_MIPI_DSI_LONG_PACKET_PAYLOAD_CHECKSUM_ERROR</td>
  <td>The payload checksum was incorrect for a long packet</td>
</tr>
<tr>
  <td>DXGK_MIPI_DSI_DSI_DATA_TYPE_NOT_RECOGNIZED</td>
  <td>Peripheral does not recognize the data type sent to it</td>
</tr>
<tr>
  <td>DXGK_MIPI_DSI_DSI_VC_ID_INVALID</td>
  <td>Peripheral was sent a command for a virtual channel which it does not support</td>
</tr>
<tr>
  <td>DXGK_MIPI_DSI_INVALID_TRANSMISSION_LENGTH</td>
  <td>Peripheral detected that number of bytes transmitted does not match what was specified in the header</td>
</tr>
<tr>
  <td>DXGK_MIPI_DSI_DSI_PROTOCOL_VIOLATION</td>
  <td>Peripheral detected lack of EoTP on a transmission or host failed to signal bus turn-around for a read</td>
</tr>
</tbody>
</table>

<h3 id="hosterrors"><code>HostErrors</code></h3>

<p>A combination of DXGK_HOST_DSI_XXX errors indicating the errors reported by the graphics driver or OS.</p>

<table>
<thead>
<tr>
  <th>DXGK_HOST_DSI_XXX Error</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td>DXGK_HOST_DSI_DEVICE_NOT_READY</td>
  <td>Host detected that a request was made for a device which is not in the correct state to be able to receive the request.</td>
</tr>
<tr>
  <td>DXGK_HOST_DSI_INTERFACE_RESET</td>
  <td>The graphics driver detected an error which required a reset of the DSI interface with the panel. The panel driver should verify the device state before resuming normal transmissions.</td>
</tr>
<tr>
  <td>DXGK_HOST_DSI_DEVICE_RESET</td>
  <td>The graphics driver detected an error which required a reset of the panel and state should be assumed to have been lost. The panel driver should reapply any private device state before resuming normal transmissions.</td>
</tr>
<tr>
  <td>DXGK_HOST_DSI_TRANSMISSION_CANCELLED</td>
  <td>Host cancelled the transmission, which was in progress, because the bus was needed for higher priority transmissions, such as pixel refresh. The panel driver needs to ensure that whatever effects a partial transmission could have had are either undone or verified before proceeding with transmissions. If this error happens frequently, it may mean that the transmission is too large to be completed reliably and the panel driver should be changed to split it into multiple transmissions.</td>
</tr>
<tr>
  <td>DXGK_HOST_DSI_TRANSMISSION_DROPPED</td>
  <td>Host dropped the transmission before starting it because higher priority transmissions caused the transmission to be delayed beyond the allowed limit. The panel driver can try the same transmission again, if it is still relevant. This error indicates that the DSI link bandwidth is inadequate so should not occur in a retail environment. If the transmission is sufficiently large, this may indicate that the transmission needs to be split in order to succeed reliably.</td>
</tr>
<tr>
  <td>DXGK_HOST_DSI_TRANSMISSION_TIMEOUT</td>
  <td>Host detected a hardware timeout while communicating with the peripheral. The panel driver needs to ensure that whatever effects a partial transmission could have had are either undone or verified before proceeding with transmissions. Unless the transmission is causing the panel to enter a bad state, there is no mitigation for this in the panel driver, so it should back-off and attempt to resume.</td>
</tr>
<tr>
  <td>DXGK_HOST_DSI_INVALID_TRANSMISSION</td>
  <td>OS validation of the DXGK_DSI_TRANSMISSION buffer found errors so the transmission was cancelled without calling the graphics driver or checking for prohibited packets. This is caused by either an error in the OEM panel driver, or the OS validation. The <code>FailedPacket</code> field indicates the first bad packet if the error is specific to a packet.</td>
</tr>
<tr>
  <td>DXGK_HOST_DSI_OS_REJECTED_PACKET</td>
  <td>The OS found packets which are prohibited so the transmission was cancelled without calling the graphics driver. The <code>FailedPacket</code> field indicates the first bad packet.</td>
</tr>
<tr>
  <td>DXGK_HOST_DSI_DRIVER_REJECTED_PACKET</td>
  <td>The graphics driver found packets which it cannot process safely so the transmission was cancelled without any peripheral interaction. The <code>FailedPacket</code> field indicates the first bad packet.</td>
</tr>
<tr>
  <td>DXGK_HOST_DSI_BAD_TRANSMISSION_MODE</td>
  <td>The graphics driver was unable to use the <a href="dxgk_dsi_control_transmission_mode" title="typedef enum _DXGK_DSI_CONTROL_TRANSMISSION_MODE {&#10;  DXGK_DCT_DEFAULT,&#10;  DXGK_DCT_FORCE_LOW_POWER,&#10;  DXGK_DCT_FORCE_HIGH_SPEED&#10;} DXGK_DSI_CONTROL_TRANSMISSION_MODE;">DXGK_DSI_CONTROL_TRANSMISSION_MODE</a> specified. The <code>FailedPacket</code> field indicates the first packet incompatible with the transmission mode.</td>
</tr>
</tbody>
</table>

<h3 id="packets"><code>Packets</code></h3>

<p>Array of <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/ns-dispmprt-dxgk_dsi_packet"><strong>DSI_PACKET</strong></a> structures.</p>

<h2 id="remarks">Remarks</h2>

<p>A DXGK_DSI_TRANSMISSION structure is provided to a graphics driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/nc-dispmprt-dxgkddi_dsitransmission"><em>DxgkDsiTransmission</em></a> callback function.</p>

<h2 id="see-also">See also</h2>

<p><strong><a href="dxgk_dsi_packet" title="typedef struct _DXGK_DSI_PACKET {&#10;  union {&#10;    BYTE DataId;&#10;    struct {&#10;      BYTE DataType : 6;&#10;      BYTE VirtualChannel : 2;&#10;    };&#10;  };&#10;  union {&#10;    struct {&#10;      BYTE Data0;&#10;      BYTE Data1;&#10;    };&#10;    WORD LongWriteWordCount;&#10;  };&#10;  BYTE  EccFiller;&#10;  BYTE  Payload[DXGK_DSI_PACKET_EMBEDDED_PAYLOAD_SIZE];&#10;} DXGK_DSI_PACKET, *PDXGK_DSI_PACKET;">DXGK_DSI_PACKET</a></strong></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddvdeo/ni-ntddvdeo-ioctl_mipi_dsi_query_caps">**IOCTL_MIPI_DSI_QUERY_CAPS</a></p>

<p><strong><a href="ioctl_mipi_dsi_reset" title="// CTL_CODE(0x0023, 0x502, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_MIPI_DSI_RESET 0x00231408">IOCTL_MIPI_DSI_RESET</a></strong></p>

<p><strong><a href="ioctl_mipi_dsi_transmission" title="// CTL_CODE(0x0023, 0x501, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_MIPI_DSI_TRANSMISSION 0x00231404">IOCTL_MIPI_DSI_TRANSMISSION</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/dispmprt/ns-dispmprt-dxgk_dsi_transmission">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/dispmprt/ns-dispmprt-dxgk_dsi_transmission.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
