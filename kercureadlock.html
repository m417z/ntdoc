<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="KeRcuReadLock - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>KeRcuReadLock - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            KeRcuReadLock - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">VOID KeRcuReadLock();</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-kercureadlock">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/kercureadlock.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-wdm-kercureadlock)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>KeRcuReadLock</strong> function enters a RCU (Read-Copy-Update) read-side critical section in the default RCU domain. This function pins the calling thread to its current processor and prevents it from being preempted by the scheduler.</p>

<h2 id="remarks">Remarks</h2>

<p><strong>KeRcuReadLock</strong> provides low-cost synchronization for reading shared data structures without traditional locking overhead. It only accesses data local to the current CPU, making it extremely efficient.</p>

<p>RCU read-side critical sections allow multiple threads to concurrently access shared data structures while ensuring that writers can safely update the data using RCU protocols. RCU read-side critical sections can be nested.</p>

<p><strong>KeRcuReadLock</strong> must always be paired with a corresponding call to <strong><a href="kercureadunlock" title="VOID KeRcuReadUnlock();">KeRcuReadUnlock</a></strong>.</p>

<p>This function cannot fail and always succeeds.</p>

<p>Within a RCU read-side critical section:</p>

<ul>
<li>The calling thread is guaranteed that RCU-protected data structures won't be reclaimed.</li>
<li>Multiple readers can access the same data concurrently without blocking each other.</li>
<li>The thread should access only RCU-protected data structures using appropriate RCU dereference primitives.</li>
<li>The thread must not perform operations that could cause extended delays.</li>
</ul>

<p>This function can be called from any IRQL. If it's called below DISPATCH_LEVEL, the function automatically raises IRQL to DISPATCH_LEVEL. The original IRQL is restored when the corresponding <strong><a href="kercureadunlock" title="VOID KeRcuReadUnlock();">KeRcuReadUnlock</a></strong> is called</p>

<p>The calling thread is pinned to its current processor to maintain RCU semantics. If the processor is marked as idle, the function adjusts the idle state counters appropriately. The scheduler is prevented from preempting the thread while in the critical section.</p>

<p>The function uses the default RCU domain, making it suitable for simple RCU use cases. For more complex scenarios requiring custom synchronization domains, use <strong><a href="kesrcureadlock" title="VOID KeSrcuReadLock(&#10;  [in]  PKE_SRCU      Rcu,&#10;  [out] PKE_SRCU_LOCK Lock&#10;);">KeSrcuReadLock</a></strong> with an explicit SRCU partition.</p>

<h2 id="see-also">See also</h2>

<p><strong><a href="kercureadunlock" title="VOID KeRcuReadUnlock();">KeRcuReadUnlock</a></strong></p>

<p><strong><a href="kercusynchronize" title="VOID KeRcuSynchronize();">KeRcuSynchronize</a></strong></p>

<p><strong><a href="kesrcureadlock" title="VOID KeSrcuReadLock(&#10;  [in]  PKE_SRCU      Rcu,&#10;  [out] PKE_SRCU_LOCK Lock&#10;);">KeSrcuReadLock</a></strong></p>

<p><strong><a href="kesrcureadunlock" title="VOID KeSrcuReadUnlock(&#10;  [in] PKE_SRCU      Rcu,&#10;  [in] PKE_SRCU_LOCK Lock&#10;);">KeSrcuReadUnlock</a></strong></p>

<p><strong><a href="kesrcuallocate" title="PKE_SRCU KeSrcuAllocate(&#10;  [in] ULONG Tag&#10;);">KeSrcuAllocate</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-kercureadlock">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/nf-wdm-kercureadlock.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
