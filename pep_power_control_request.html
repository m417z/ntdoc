<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="PEP_POWER_CONTROL_REQUEST - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>PEP_POWER_CONTROL_REQUEST - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            PEP_POWER_CONTROL_REQUEST - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// pep_x.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _PEP_POWER_CONTROL_REQUEST {
  [in]  PEPHANDLE DeviceHandle;
  [in]  LPCGUID   PowerControlCode;
  [in]  PVOID     InBuffer;
  [in]  <a href="size_t-2" title="typedef ULONG_PTR SIZE_T;">SIZE_T</a>    InBufferSize;
  [in]  PVOID     OutBuffer;
  [in]  <a href="size_t-2" title="typedef ULONG_PTR SIZE_T;">SIZE_T</a>    OutBufferSize;
  [out] <a href="size_t-2" title="typedef ULONG_PTR SIZE_T;">SIZE_T</a>    BytesReturned;
  [out] <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a>  Status;
} PEP_POWER_CONTROL_REQUEST, *PPEP_POWER_CONTROL_REQUEST;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pep_x/ns-pep_x-_pep_power_control_request">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// pepfx.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _PEP_POWER_CONTROL_REQUEST {
  [in]  PEPHANDLE DeviceHandle;
  [in]  LPCGUID   PowerControlCode;
  [in]  PVOID     InBuffer;
  [in]  <a href="size_t-2" title="typedef ULONG_PTR SIZE_T;">SIZE_T</a>    InBufferSize;
  [in]  PVOID     OutBuffer;
  [in]  <a href="size_t-2" title="typedef ULONG_PTR SIZE_T;">SIZE_T</a>    OutBufferSize;
  [out] <a href="size_t-2" title="typedef ULONG_PTR SIZE_T;">SIZE_T</a>    BytesReturned;
  [out] <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a>  Status;
} PEP_POWER_CONTROL_REQUEST, *PPEP_POWER_CONTROL_REQUEST;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pepfx/ns-pepfx-_pep_power_control_request">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/pep_power_control_request.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-pep_x-_pep_power_control_request)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_pep_power_control_request-structure-pep_xh">_PEP_POWER_CONTROL_REQUEST structure (pep_x.h)</h1>

<h2 id="description">Description</h2>

<p>The <strong>PEP_POWER_CONTROL_REQUEST</strong> structure contains a request from a driver for a power control operation.</p>

<h2 id="members">Members</h2>

<h3 id="devicehandle-in"><code>DeviceHandle</code> [in]</h3>

<p>A PEPHANDLE value that identifies the device. The PEP supplied this handle in response to a previous <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pepfx/ns-pepfx-_pep_register_crashdump_device">PEP_DPM_REGISTER_DEVICE</a> notification.</p>

<h3 id="powercontrolcode-in"><code>PowerControlCode</code> [in]</h3>

<p>A pointer to a GUID value that specifies the power control operation to perform. This is the same value that the requesting driver supplied as the <em>PowerControlCode</em> parameter to the <a href="pofxpowercontrol" title="NTSTATUS PoFxPowerControl(&#10;  [in]            POHANDLE Handle,&#10;  [in]            LPCGUID  PowerControlCode,&#10;  [in, optional]  PVOID    InBuffer,&#10;  [in]            SIZE_T   InBufferSize,&#10;  [out, optional] PVOID    OutBuffer,&#10;  [in]            SIZE_T   OutBufferSize,&#10;  [out, optional] PSIZE_T  BytesReturned&#10;);">PoFxPowerControl</a> routine.</p>

<h3 id="inbuffer-in"><code>InBuffer</code> [in]</h3>

<p>A pointer to a driver-allocated input buffer that contains the input parameters for this power control operation. This is the same value that the requesting driver supplied as the <em>InBuffer</em> parameter to the <strong><a href="pofxpowercontrol" title="NTSTATUS PoFxPowerControl(&#10;  [in]            POHANDLE Handle,&#10;  [in]            LPCGUID  PowerControlCode,&#10;  [in, optional]  PVOID    InBuffer,&#10;  [in]            SIZE_T   InBufferSize,&#10;  [out, optional] PVOID    OutBuffer,&#10;  [in]            SIZE_T   OutBufferSize,&#10;  [out, optional] PSIZE_T  BytesReturned&#10;);">PoFxPowerControl</a></strong> routine.</p>

<h3 id="inbuffersize-in"><code>InBufferSize</code> [in]</h3>

<p>The size in bytes of the buffer pointed to by <strong>InBuffer</strong>. This is the same value that the requesting driver supplied as the <em>InBufferSize</em> parameter to the <strong><a href="pofxpowercontrol" title="NTSTATUS PoFxPowerControl(&#10;  [in]            POHANDLE Handle,&#10;  [in]            LPCGUID  PowerControlCode,&#10;  [in, optional]  PVOID    InBuffer,&#10;  [in]            SIZE_T   InBufferSize,&#10;  [out, optional] PVOID    OutBuffer,&#10;  [in]            SIZE_T   OutBufferSize,&#10;  [out, optional] PSIZE_T  BytesReturned&#10;);">PoFxPowerControl</a></strong> routine.</p>

<h3 id="outbuffer-in"><code>OutBuffer</code> [in]</h3>

<p>A pointer to a driver-allocated output buffer to which the PEP writes the results of this power control operation. This is the same value that the requesting driver supplied as the <em>OutBuffer</em> parameter to the <strong><a href="pofxpowercontrol" title="NTSTATUS PoFxPowerControl(&#10;  [in]            POHANDLE Handle,&#10;  [in]            LPCGUID  PowerControlCode,&#10;  [in, optional]  PVOID    InBuffer,&#10;  [in]            SIZE_T   InBufferSize,&#10;  [out, optional] PVOID    OutBuffer,&#10;  [in]            SIZE_T   OutBufferSize,&#10;  [out, optional] PSIZE_T  BytesReturned&#10;);">PoFxPowerControl</a></strong> routine.</p>

<h3 id="outbuffersize-in"><code>OutBufferSize</code> [in]</h3>

<p>The size in bytes of the buffer pointed to by <strong>OutBuffer</strong>.</p>

<h3 id="bytesreturned-out"><code>BytesReturned</code> [out]</h3>

<p>The number of bytes that the PEP wrote to the output buffer pointed to by <strong>OutBuffer</strong>.</p>

<h3 id="status-out"><code>Status</code> [out]</h3>

<p>The status of the requested power control operation. If the operation is successful, the PEP sets this member to <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a>. Otherwise, the PEP sets this member to an appropriate error status code.</p>

<h2 id="remarks">Remarks</h2>

<p>This structure is used by the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pepfx/ns-pepfx-_pep_power_control_request">PEP_DPM_POWER_CONTROL_REQUEST</a> notification. The first six members of the structure contain input values that are supplied by the Windows <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/overview-of-the-power-management-framework">power management Framework</a> (PoFx). The last two members contain values that the PEP writes to the structure in response to this notification. In addition, the PEP writes to the output buffer pointed to by the <strong>OutBuffer</strong> member.</p>

<p>If the output buffer is too small to receive all of the result data from the operation, the PEP sets the <strong>Status</strong> member of the structure to STATUS_INSUFFICIENT_RESOURCES, sets the <strong>BytesReturned</strong> member to the required size of the output buffer, and (typically) writes no data to the output buffer.</p>

<p>The driver for a device can call the <a href="pofxpowercontrol" title="NTSTATUS PoFxPowerControl(&#10;  [in]            POHANDLE Handle,&#10;  [in]            LPCGUID  PowerControlCode,&#10;  [in, optional]  PVOID    InBuffer,&#10;  [in]            SIZE_T   InBufferSize,&#10;  [out, optional] PVOID    OutBuffer,&#10;  [in]            SIZE_T   OutBufferSize,&#10;  [out, optional] PSIZE_T  BytesReturned&#10;);">PoFxPowerControl</a> routine to request a power control operation on the device. During this call, PoFx delegates the handling of this request to the PEP that owns the device. The <strong>PowerControlCode</strong> member of the <strong>PEP_POWER_CONTROL_REQUEST</strong> structure contains a custom control code whose meaning is understood by both the driver and the PEP for the device.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pepfx/ns-pepfx-_pep_power_control_request">PEP_DPM_POWER_CONTROL_REQUEST</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pepfx/ns-pepfx-_pep_register_crashdump_device">PEP_DPM_REGISTER_DEVICE</a></p>

<p><a href="pofxpowercontrol" title="NTSTATUS PoFxPowerControl(&#10;  [in]            POHANDLE Handle,&#10;  [in]            LPCGUID  PowerControlCode,&#10;  [in, optional]  PVOID    InBuffer,&#10;  [in]            SIZE_T   InBufferSize,&#10;  [out, optional] PVOID    OutBuffer,&#10;  [in]            SIZE_T   OutBufferSize,&#10;  [out, optional] PSIZE_T  BytesReturned&#10;);">PoFxPowerControl</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pep_x/ns-pep_x-_pep_power_control_request">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/pep_x/ns-pep_x-_pep_power_control_request.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-pepfx-_pep_power_control_request)</h1>
</div>
<div class="ntdoc-description">
<h1>_PEP_POWER_CONTROL_REQUEST structure (pepfx.h)</h1>

<h2>Description</h2>

<p>The <strong>PEP_POWER_CONTROL_REQUEST</strong> structure contains a request from a driver for a power control operation.</p>

<h2>Members</h2>

<h3><code>DeviceHandle</code> [in]</h3>

<p>A PEPHANDLE value that identifies the device. The PEP supplied this handle in response to a previous <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pepfx/ns-pepfx-_pep_register_crashdump_device">PEP_DPM_REGISTER_DEVICE</a> notification.</p>

<h3><code>PowerControlCode</code> [in]</h3>

<p>A pointer to a GUID value that specifies the power control operation to perform. This is the same value that the requesting driver supplied as the <em>PowerControlCode</em> parameter to the <a href="pofxpowercontrol" title="NTSTATUS PoFxPowerControl(&#10;  [in]            POHANDLE Handle,&#10;  [in]            LPCGUID  PowerControlCode,&#10;  [in, optional]  PVOID    InBuffer,&#10;  [in]            SIZE_T   InBufferSize,&#10;  [out, optional] PVOID    OutBuffer,&#10;  [in]            SIZE_T   OutBufferSize,&#10;  [out, optional] PSIZE_T  BytesReturned&#10;);">PoFxPowerControl</a> routine.</p>

<h3><code>InBuffer</code> [in]</h3>

<p>A pointer to a driver-allocated input buffer that contains the input parameters for this power control operation. This is the same value that the requesting driver supplied as the <em>InBuffer</em> parameter to the <strong><a href="pofxpowercontrol" title="NTSTATUS PoFxPowerControl(&#10;  [in]            POHANDLE Handle,&#10;  [in]            LPCGUID  PowerControlCode,&#10;  [in, optional]  PVOID    InBuffer,&#10;  [in]            SIZE_T   InBufferSize,&#10;  [out, optional] PVOID    OutBuffer,&#10;  [in]            SIZE_T   OutBufferSize,&#10;  [out, optional] PSIZE_T  BytesReturned&#10;);">PoFxPowerControl</a></strong> routine.</p>

<h3><code>InBufferSize</code> [in]</h3>

<p>The size in bytes of the buffer pointed to by <strong>InBuffer</strong>. This is the same value that the requesting driver supplied as the <em>InBufferSize</em> parameter to the <strong><a href="pofxpowercontrol" title="NTSTATUS PoFxPowerControl(&#10;  [in]            POHANDLE Handle,&#10;  [in]            LPCGUID  PowerControlCode,&#10;  [in, optional]  PVOID    InBuffer,&#10;  [in]            SIZE_T   InBufferSize,&#10;  [out, optional] PVOID    OutBuffer,&#10;  [in]            SIZE_T   OutBufferSize,&#10;  [out, optional] PSIZE_T  BytesReturned&#10;);">PoFxPowerControl</a></strong> routine.</p>

<h3><code>OutBuffer</code> [in]</h3>

<p>A pointer to a driver-allocated output buffer to which the PEP writes the results of this power control operation. This is the same value that the requesting driver supplied as the <em>OutBuffer</em> parameter to the <strong><a href="pofxpowercontrol" title="NTSTATUS PoFxPowerControl(&#10;  [in]            POHANDLE Handle,&#10;  [in]            LPCGUID  PowerControlCode,&#10;  [in, optional]  PVOID    InBuffer,&#10;  [in]            SIZE_T   InBufferSize,&#10;  [out, optional] PVOID    OutBuffer,&#10;  [in]            SIZE_T   OutBufferSize,&#10;  [out, optional] PSIZE_T  BytesReturned&#10;);">PoFxPowerControl</a></strong> routine.</p>

<h3><code>OutBufferSize</code> [in]</h3>

<p>The size in bytes of the buffer pointed to by <strong>OutBuffer</strong>.</p>

<h3><code>BytesReturned</code> [out]</h3>

<p>The number of bytes that the PEP wrote to the output buffer pointed to by <strong>OutBuffer</strong>.</p>

<h3><code>Status</code> [out]</h3>

<p>The status of the requested power control operation. If the operation is successful, the PEP sets this member to <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a>. Otherwise, the PEP sets this member to an appropriate error status code.</p>

<h2>Remarks</h2>

<p>This structure is used by the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pepfx/ns-pepfx-_pep_power_control_request">PEP_DPM_POWER_CONTROL_REQUEST</a> notification. The first six members of the structure contain input values that are supplied by the Windows <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/overview-of-the-power-management-framework">power management Framework</a> (PoFx). The last two members contain values that the PEP writes to the structure in response to this notification. In addition, the PEP writes to the output buffer pointed to by the <strong>OutBuffer</strong> member.</p>

<p>If the output buffer is too small to receive all of the result data from the operation, the PEP sets the <strong>Status</strong> member of the structure to STATUS_INSUFFICIENT_RESOURCES, sets the <strong>BytesReturned</strong> member to the required size of the output buffer, and (typically) writes no data to the output buffer.</p>

<p>The driver for a device can call the <a href="pofxpowercontrol" title="NTSTATUS PoFxPowerControl(&#10;  [in]            POHANDLE Handle,&#10;  [in]            LPCGUID  PowerControlCode,&#10;  [in, optional]  PVOID    InBuffer,&#10;  [in]            SIZE_T   InBufferSize,&#10;  [out, optional] PVOID    OutBuffer,&#10;  [in]            SIZE_T   OutBufferSize,&#10;  [out, optional] PSIZE_T  BytesReturned&#10;);">PoFxPowerControl</a> routine to request a power control operation on the device. During this call, PoFx delegates the handling of this request to the PEP that owns the device. The <strong>PowerControlCode</strong> member of the <strong>PEP_POWER_CONTROL_REQUEST</strong> structure contains a custom control code whose meaning is understood by both the driver and the PEP for the device.</p>

<h2>See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pepfx/ns-pepfx-_pep_power_control_request">PEP_DPM_POWER_CONTROL_REQUEST</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pepfx/ns-pepfx-_pep_register_crashdump_device">PEP_DPM_REGISTER_DEVICE</a></p>

<p><a href="pofxpowercontrol" title="NTSTATUS PoFxPowerControl(&#10;  [in]            POHANDLE Handle,&#10;  [in]            LPCGUID  PowerControlCode,&#10;  [in, optional]  PVOID    InBuffer,&#10;  [in]            SIZE_T   InBufferSize,&#10;  [out, optional] PVOID    OutBuffer,&#10;  [in]            SIZE_T   OutBufferSize,&#10;  [out, optional] PSIZE_T  BytesReturned&#10;);">PoFxPowerControl</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/pepfx/ns-pepfx-_pep_power_control_request">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/pepfx/ns-pepfx-_pep_power_control_request.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
