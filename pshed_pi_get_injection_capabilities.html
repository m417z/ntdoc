<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="PSHED_PI_GET_INJECTION_CAPABILITIES - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>PSHED_PI_GET_INJECTION_CAPABILITIES - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            PSHED_PI_GET_INJECTION_CAPABILITIES - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddk.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">PSHED_PI_GET_INJECTION_CAPABILITIES PshedPiGetInjectionCapabilities;

<a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> PshedPiGetInjectionCapabilities(
  [in, out, optional] PVOID PluginContext,
  [out]               <a href="whea_error_injection_capabilities" title="typedef union _WHEA_ERROR_INJECTION_CAPABILITIES {&#10;  struct {&#10;    ULONG ProcessorCorrectable : 1;&#10;    ULONG ProcessorUncorrectableNonFatal : 1;&#10;    ULONG ProcessorUncorrectableFatal : 1;&#10;    ULONG MemoryCorrectable : 1;&#10;    ULONG MemoryUncorrectableNonFatal : 1;&#10;    ULONG MemoryUncorrectableFatal : 1;&#10;    ULONG PCIExpressCorrectable : 1;&#10;    ULONG PCIExpressUncorrectableNonFatal : 1;&#10;    ULONG PCIExpressUncorrectableFatal : 1;&#10;    ULONG PlatformCorrectable : 1;&#10;    ULONG PlatformUncorrectableNonFatal : 1;&#10;    ULONG PlatformUncorrectableFatal : 1;&#10;    ULONG IA64Corrected : 1;&#10;    ULONG IA64Recoverable : 1;&#10;    ULONG IA64Fatal : 1;&#10;    ULONG IA64RecoverableCache : 1;&#10;    ULONG IA64RecoverableRegFile : 1;&#10;    ULONG Reserved : 15;&#10;...">PWHEA_ERROR_INJECTION_CAPABILITIES</a> Capabilities
)
{...}</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/nc-ntddk-pshed_pi_get_injection_capabilities">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/pshed_pi_get_injection_capabilities.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-ntddk-pshed_pi_get_injection_capabilities)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>A PSHED plug-in's <em>GetInjectionCapabilities</em> callback function returns an error injection capabilities union that describes the types of hardware errors that can be injected into the hardware platform.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="plugincontext-in-out-optional"><code>PluginContext</code> [in, out, optional]</h3>

<p>A pointer to the context area that was specified in the <strong>Context</strong> member of the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/ns-ntddk-_whea_pshed_plugin_registration_packet"><strong>WHEA_PSHED_PLUGIN_REGISTRATION_PACKET</strong></a> structure when the PSHED plug-in called the <a href="pshedregisterplugin" title="NTPSHEDAPI NTSTATUS PshedRegisterPlugin(&#10;  [in, out] PWHEA_PSHED_PLUGIN_REGISTRATION_PACKET Packet&#10;);">PshedRegisterPlugin</a> function to register itself with the PSHED.</p>

<h3 id="capabilities-out"><code>Capabilities</code> [out]</h3>

<p>A pointer to a <strong><a href="whea_error_injection_capabilities" title="typedef union _WHEA_ERROR_INJECTION_CAPABILITIES {&#10;  struct {&#10;    ULONG ProcessorCorrectable : 1;&#10;    ULONG ProcessorUncorrectableNonFatal : 1;&#10;    ULONG ProcessorUncorrectableFatal : 1;&#10;    ULONG MemoryCorrectable : 1;&#10;    ULONG MemoryUncorrectableNonFatal : 1;&#10;    ULONG MemoryUncorrectableFatal : 1;&#10;    ULONG PCIExpressCorrectable : 1;&#10;    ULONG PCIExpressUncorrectableNonFatal : 1;&#10;    ULONG PCIExpressUncorrectableFatal : 1;&#10;    ULONG PlatformCorrectable : 1;&#10;    ULONG PlatformUncorrectableNonFatal : 1;&#10;    ULONG PlatformUncorrectableFatal : 1;&#10;    ULONG IA64Corrected : 1;&#10;    ULONG IA64Recoverable : 1;&#10;    ULONG IA64Fatal : 1;&#10;    ULONG IA64RecoverableCache : 1;&#10;    ULONG IA64RecoverableRegFile : 1;&#10;    ULONG Reserved : 15;&#10;...">WHEA_ERROR_INJECTION_CAPABILITIES</a></strong> union. This union receives the data that describes the types of hardware errors that can be injected into the hardware platform.</p>

<h2 id="return-value">Return value</h2>

<p>A PSHED plug-in's <em>GetInjectionCapabilities</em> callback function returns one of the following <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> codes:</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong><a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a></strong></td>
  <td>The data that describes the types of hardware errors that can be injected into the hardware platform was successfully returned in the <strong><a href="whea_error_injection_capabilities" title="typedef union _WHEA_ERROR_INJECTION_CAPABILITIES {&#10;  struct {&#10;    ULONG ProcessorCorrectable : 1;&#10;    ULONG ProcessorUncorrectableNonFatal : 1;&#10;    ULONG ProcessorUncorrectableFatal : 1;&#10;    ULONG MemoryCorrectable : 1;&#10;    ULONG MemoryUncorrectableNonFatal : 1;&#10;    ULONG MemoryUncorrectableFatal : 1;&#10;    ULONG PCIExpressCorrectable : 1;&#10;    ULONG PCIExpressUncorrectableNonFatal : 1;&#10;    ULONG PCIExpressUncorrectableFatal : 1;&#10;    ULONG PlatformCorrectable : 1;&#10;    ULONG PlatformUncorrectableNonFatal : 1;&#10;    ULONG PlatformUncorrectableFatal : 1;&#10;    ULONG IA64Corrected : 1;&#10;    ULONG IA64Recoverable : 1;&#10;    ULONG IA64Fatal : 1;&#10;    ULONG IA64RecoverableCache : 1;&#10;    ULONG IA64RecoverableRegFile : 1;&#10;    ULONG Reserved : 15;&#10;...">WHEA_ERROR_INJECTION_CAPABILITIES</a></strong> union pointed to by the <em>Capabilities</em> parameter.</td>
</tr>
<tr>
  <td><strong>STATUS_UNSUCCESSFUL</strong></td>
  <td>An error occurred.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p>A PSHED plug-in that participates in error injection sets the <strong>Callbacks.GetInjectionCapabilities</strong> and <strong>Callbacks.InjectError</strong> members of the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/ns-ntddk-_whea_pshed_plugin_registration_packet"><strong>WHEA_PSHED_PLUGIN_REGISTRATION_PACKET</strong></a> structure to point to its <em>GetInjectionCapabilities</em> and <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/nc-ntddk-pshed_pi_inject_error">InjectError</a> callback functions when the plug-in calls the <a href="pshedregisterplugin" title="NTPSHEDAPI NTSTATUS PshedRegisterPlugin(&#10;  [in, out] PWHEA_PSHED_PLUGIN_REGISTRATION_PACKET Packet&#10;);">PshedRegisterPlugin</a> function to register itself with the PSHED. The PSHED plug-in must also set the <strong>PshedFAErrorInjection</strong> flag in the <strong>FunctionalAreaMask</strong> member of the <strong>WHEA_PSHED_PLUGIN_REGISTRATION_PACKET</strong> structure.</p>

<p>The Windows kernel calls into the PSHED to retrieve information about the types of hardware errors that can be injected into the hardware platform in response to an error injection capabilities inquiry by a WHEA management application. If a PSHED plug-in is registered to participate in error injection, the PSHED calls the PSHED plug-in's <em>GetInjectionCapabilities</em> callback function to retrieve information about additional types of hardware errors that can be injected into the hardware platform.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/nc-ntddk-pshed_pi_inject_error">InjectError</a></p>

<p><a href="pshedregisterplugin" title="NTPSHEDAPI NTSTATUS PshedRegisterPlugin(&#10;  [in, out] PWHEA_PSHED_PLUGIN_REGISTRATION_PACKET Packet&#10;);">PshedRegisterPlugin</a></p>

<p><strong><a href="whea_error_injection_capabilities" title="typedef union _WHEA_ERROR_INJECTION_CAPABILITIES {&#10;  struct {&#10;    ULONG ProcessorCorrectable : 1;&#10;    ULONG ProcessorUncorrectableNonFatal : 1;&#10;    ULONG ProcessorUncorrectableFatal : 1;&#10;    ULONG MemoryCorrectable : 1;&#10;    ULONG MemoryUncorrectableNonFatal : 1;&#10;    ULONG MemoryUncorrectableFatal : 1;&#10;    ULONG PCIExpressCorrectable : 1;&#10;    ULONG PCIExpressUncorrectableNonFatal : 1;&#10;    ULONG PCIExpressUncorrectableFatal : 1;&#10;    ULONG PlatformCorrectable : 1;&#10;    ULONG PlatformUncorrectableNonFatal : 1;&#10;    ULONG PlatformUncorrectableFatal : 1;&#10;    ULONG IA64Corrected : 1;&#10;    ULONG IA64Recoverable : 1;&#10;    ULONG IA64Fatal : 1;&#10;    ULONG IA64RecoverableCache : 1;&#10;    ULONG IA64RecoverableRegFile : 1;&#10;    ULONG Reserved : 15;&#10;...">WHEA_ERROR_INJECTION_CAPABILITIES</a></strong></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/ns-ntddk-_whea_pshed_plugin_registration_packet"><strong>WHEA_PSHED_PLUGIN_REGISTRATION_PACKET</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddk/nc-ntddk-pshed_pi_get_injection_capabilities">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddk/nc-ntddk-pshed_pi_get_injection_capabilities.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
