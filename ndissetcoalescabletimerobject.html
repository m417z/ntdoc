<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NdisSetCoalescableTimerObject - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NdisSetCoalescableTimerObject - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NdisSetCoalescableTimerObject - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">BOOLEAN NdisSetCoalescableTimerObject(
  [in]           NDIS_HANDLE   TimerObject,
  [in]           LARGE_INTEGER DueTime,
  [in, optional] <a href="long" title="typedef long LONG;">LONG</a>          MillisecondsPeriod,
  [in, optional] PVOID         FunctionContext,
  [in, optional] <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         Tolerance
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndissetcoalescabletimerobject">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndissetcoalescabletimerobject.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ndis-ndissetcoalescabletimerobject)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>NdisSetCoalescableTimerObject function</h1>
<h2>Description</h2>
<p>The
<strong>NdisSetCoalescableTimerObject</strong> function sets a timer object that the operating system coordinates with
other timers, typically to reduce power consumption, when the exact expiration of the timer is not
important to driver operation.</p>
<h2>Parameters</h2>
<h3><code>TimerObject</code> [in]</h3>
<p>A handle to a timer object that NDIS provides when a driver calls the
<a href="ndisallocatetimerobject" title="NDIS_STATUS NdisAllocateTimerObject(&#10;  [in]  NDIS_HANDLE                 NdisHandle,&#10;  [in]  PNDIS_TIMER_CHARACTERISTICS TimerCharacteristics,&#10;  [out] PNDIS_HANDLE                pTimerObject&#10;);">NdisAllocateTimerObject</a> function.</p>
<h3><code>DueTime</code> [in]</h3>
<p>The absolute or relative time at which the timer will expire. If the value of the
<em>DueTime</em> parameter is negative, the expiration time is relative to the current system time.
Otherwise, the expiration time is absolute. The expiration time is expressed in system time units
(100-nanosecond intervals). Absolute expiration times track any changes in the system time; relative
expiration times are not affected by system time changes.</p>
<h3><code>MillisecondsPeriod</code> [in, optional]</h3>
<p>The optional periodic time interval, in milliseconds, that elapses between every instance when the
timer fires and the next call to the
<em>NetTimerCallback</em> function, unless the timer is canceled. The value of this parameter must be less
than or equal to <a href="maxlong" title="#define MAXLONG 0x7fffffff // winnt">MAXLONG</a>. This parameter can be set to zero to indicate that the timer is
non-periodic.</p>
<h3><code>FunctionContext</code> [in, optional]</h3>
<p>A pointer to a caller-supplied context area that NDIS passes to the associated
<em>NetTimerCallback</em> function when a timer fires. If this parameter is <strong>NULL</strong>, NDIS uses the default
value that is specified in the
<a href="ndis_timer_characteristics" title="typedef struct _NDIS_TIMER_CHARACTERISTICS {&#10;  NDIS_OBJECT_HEADER   Header;&#10;  ULONG                AllocationTag;&#10;  PNDIS_TIMER_FUNCTION TimerFunction;&#10;  PVOID                FunctionContext;&#10;} NDIS_TIMER_CHARACTERISTICS, *PNDIS_TIMER_CHARACTERISTICS;">NDIS_TIMER_CHARACTERISTICS</a> structure.</p>
<h3><code>Tolerance</code> [in, optional]</h3>
<p>The tolerance, in milliseconds, between the timer period specified by
<em>MillisecondsPeriod</em> and the initial time interval specified by
<em>DueTime</em> . A periodic timer will first expire in the time interval between (
<em>DueTime</em> -
<em>Tolerance</em> ) and (
<em>DueTime</em> +
<em>Tolerance</em> ). The time interval between two later expirations of a periodic timer will be in the
range of (
<em>MillisecondsPeriod</em> -
<em>Tolerance</em> ) and (
<em>MillisecondsPeriod</em> +
<em>Tolerance</em> ).</p>
<h2>Return value</h2>
<p><strong>NdisSetCoalescableTimerObject</strong> returns <strong>TRUE</strong> if the timer object was already in the system timer
queue; otherwise, it returns <strong>FALSE</strong>.</p>
<h2>Remarks</h2>
<p>A timer object set by this function operates the same as a timer set by
<a href="ndissettimerobject" title="BOOLEAN NdisSetTimerObject(&#10;  [in]           NDIS_HANDLE   TimerObject,&#10;  [in]           LARGE_INTEGER DueTime,&#10;  [in, optional] LONG          MillisecondsPeriod,&#10;  [in, optional] PVOID         FunctionContext&#10;);">NdisSetTimerObject</a>, with an additional
tolerance value added to the expiration parameter
<em>DueTime</em> . The operating system uses this additional tolerance value to adjust the expiration time
of the timer to coincide with the expiration of other software timers. By doing this, the operating
system can reduce power consumption and improve energy efficiency.</p>
<p><strong><a href="ndissettimerobject" title="BOOLEAN NdisSetTimerObject(&#10;  [in]           NDIS_HANDLE   TimerObject,&#10;  [in]           LARGE_INTEGER DueTime,&#10;  [in, optional] LONG          MillisecondsPeriod,&#10;  [in, optional] PVOID         FunctionContext&#10;);">NdisSetTimerObject</a></strong> operates similarly to
<strong>NdisSetCoalescableTimerObject</strong> when
<em>Tolerance</em> is set to zero.</p>
<p>After a driver calls
<strong>NdisSetCoalescableTimerObject</strong>, the timer object is queued until expiration of an interval that is
in the range of (
<em>DueTime</em> -
<em>Tolerance</em> ) and (
<em>DueTime</em> +
<em>Tolerance</em> ). After the interval expires, the operating system removes the timer object from the
queue, and the caller-supplied
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-ndis_timer_function">NetTimerCallback</a> function is run one
time at IRQL = DISPATCH_LEVEL as soon as a processor becomes available.</p>
<p>If a nonzero value is specified in the
<em>MillisecondsPeriod</em> parameter, the timer object is queued again until an interval in the range of (
<em>MillisecondsPeriod</em> -
<em>Tolerance</em> ) and (
<em>MillisecondsPeriod</em> +
<em>Tolerance</em> ) expires. After this interval expires, the timer object is resubmitted to the queue, and
the caller-supplied
<em>NetTimerCallback</em> function is run one time at IRQL = DISPATCH_LEVEL as soon as a processor becomes
available.</p>
<p>To use timer coalescing effectively, a caller should specify a
<em>Tolerance</em> value of at least 32 milliseconds. This value equals approximately two default system
clock intervals of 15.6 milliseconds. Use a larger
<em>Tolerance</em> value if you can do this, such as 100 milliseconds.</p>
<p>We recommend that
<em>MillisecondsPeriod</em> and
<em>Tolerance</em> be set to multiples of 50 milliseconds. Typical
<em>MillisecondsPeriod</em> values are 50, 100, 250, 500, and 1000 milliseconds. Typical
<em>Tolerance</em> values are 50, 100, 150, and 250 milliseconds.</p>
<p>Typically, a timer with a large
<em>MillisecondsPeriod</em> value can use a proportionally large
<em>Tolerance</em> value. For example, a timer with
<em>MillisecondsPeriod</em> = 500 milliseconds might use
<em>Tolerance</em> = 50 milliseconds. But a timer with
<em>MillisecondsPeriod</em> = 10 seconds might use
<em>Tolerance</em> = 1 second.</p>
<p>For more information about timer behavior, see
<a href="kesettimerex" title="BOOLEAN KeSetTimerEx(&#10;  [in, out]      PKTIMER       Timer,&#10;  [in]           LARGE_INTEGER DueTime,&#10;  [in]           LONG          Period,&#10;  [in, optional] PKDPC         Dpc&#10;);">KeSetTimerEx</a>.</p>
<p>To cancel a timer, call the
<a href="ndiscanceltimerobject" title="BOOLEAN NdisCancelTimerObject(&#10;  [in] NDIS_HANDLE TimerObject&#10;);">NdisCancelTimerObject</a> function.</p>
<h2>See also</h2>
<p><a href="kesettimerex" title="BOOLEAN KeSetTimerEx(&#10;  [in, out]      PKTIMER       Timer,&#10;  [in]           LARGE_INTEGER DueTime,&#10;  [in]           LONG          Period,&#10;  [in, optional] PKDPC         Dpc&#10;);">KeSetTimerEx</a></p>
<p><a href="ndis_timer_characteristics" title="typedef struct _NDIS_TIMER_CHARACTERISTICS {&#10;  NDIS_OBJECT_HEADER   Header;&#10;  ULONG                AllocationTag;&#10;  PNDIS_TIMER_FUNCTION TimerFunction;&#10;  PVOID                FunctionContext;&#10;} NDIS_TIMER_CHARACTERISTICS, *PNDIS_TIMER_CHARACTERISTICS;">NDIS_TIMER_CHARACTERISTICS</a></p>
<p><a href="ndisallocatetimerobject" title="NDIS_STATUS NdisAllocateTimerObject(&#10;  [in]  NDIS_HANDLE                 NdisHandle,&#10;  [in]  PNDIS_TIMER_CHARACTERISTICS TimerCharacteristics,&#10;  [out] PNDIS_HANDLE                pTimerObject&#10;);">NdisAllocateTimerObject</a></p>
<p><a href="ndiscanceltimerobject" title="BOOLEAN NdisCancelTimerObject(&#10;  [in] NDIS_HANDLE TimerObject&#10;);">NdisCancelTimerObject</a></p>
<p><a href="ndissettimerobject" title="BOOLEAN NdisSetTimerObject(&#10;  [in]           NDIS_HANDLE   TimerObject,&#10;  [in]           LARGE_INTEGER DueTime,&#10;  [in, optional] LONG          MillisecondsPeriod,&#10;  [in, optional] PVOID         FunctionContext&#10;);">NdisSetTimerObject</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-ndis_timer_function">NetTimerCallback</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndissetcoalescabletimerobject">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ndis/nf-ndis-ndissetcoalescabletimerobject.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
