<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="WWAN_CONTEXT_STATE - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>WWAN_CONTEXT_STATE - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            WWAN_CONTEXT_STATE - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wwan.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _WWAN_CONTEXT_STATE {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                    uNwError;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                    ConnectionId;
  <a href="wwan_activation_state" title="typedef enum _WWAN_ACTIVATION_STATE {&#10;  WwanActivationStateUnknown,&#10;  WwanActivationStateActivated,&#10;  WwanActivationStateActivating,&#10;  WwanActivationStateDeactivated,&#10;  WwanActivationStateDeactivating,&#10;  WwanActivationStateMax&#10;} WWAN_ACTIVATION_STATE, *PWWAN_ACTIVATION_STATE;">WWAN_ACTIVATION_STATE</a>    ActivationState;
  <a href="wwan_voice_call_state" title="typedef enum _WWAN_VOICE_CALL_STATE {&#10;  WwanVoiceCallStateNone,&#10;  WwanVoiceCallStateInProgress,&#10;  WwanVoiceCallStateHangUp,&#10;  WwanVoiceCallStateMaximum&#10;} WWAN_VOICE_CALL_STATE, *PWWAN_VOICE_CALL_STATE;">WWAN_VOICE_CALL_STATE</a>    VoiceCallState;
  <a href="wwan_ip_type" title="typedef enum _WWAN_IP_TYPE {&#10;  WwanIPTypeDefault,&#10;  WwanIPTypeIPv4,&#10;  WwanIPTypeIPv6,&#10;  WwanIPTypeIpv4v6,&#10;  WwanIPTypeXlat,&#10;  WwanSessionTypeEthernet,&#10;  WwanSessionTypeUnstructured,&#10;  WwanSessionTypeMax&#10;} WWAN_IP_TYPE, *PWWAN_IP_TYPE;">WWAN_IP_TYPE</a>             IPType;
  WWAN_CONNECTION_MEDIA    ConnectionMedia;
  WCHAR                    AccessString[WWAN_ACCESSSTRING_LEN];
  <a href="wwan_single_nssai" title="typedef struct _WWAN_SINGLE_NSSAI {&#10;  UINT32 Bitmasks;&#10;  UINT16 SliceServiceType;&#10;  UINT16 MappedSliceServiceType;&#10;  UINT32 SliceDifferentiator;&#10;  UINT32 MappedSliceDifferentiator;&#10;} WWAN_SINGLE_NSSAI, *PWWAN_SINGLE_NSSAI;">WWAN_SINGLE_NSSAI</a>        Snssai;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                    FoundMatchingConnectionId;
  <a href="wwan_offset_size_element" title="typedef struct _WWAN_OFFSET_SIZE_ELEMENT {&#10;  ULONG Offset;&#10;  ULONG Size;&#10;} WWAN_OFFSET_SIZE_ELEMENT, *PWWAN_OFFSET_SIZE_ELEMENT;">WWAN_OFFSET_SIZE_ELEMENT</a> TrafficParameters;
} WWAN_CONTEXT_STATE, *PWWAN_CONTEXT_STATE;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wwan/ns-wwan-_wwan_context_state">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/wwan_context_state.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-wwan-_wwan_context_state)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_wwan_context_state-structure">_WWAN_CONTEXT_STATE structure</h1>

<h2 id="description">Description</h2>

<p>The WWAN_CONTEXT_STATE structure represents the Packet Data Protocol (PDP) context state of the MB
device.</p>

<h2 id="members">Members</h2>

<h3 id="unwerror"><code>uNwError</code></h3>

<p>A network-specific error. The following table shows the connection failure values as documented in
the
<em>3GPP TS 24.008 Specification</em>.</p>

<table>
<thead>
<tr>
  <th>3GPP 24.008 cause code</th>
  <th>Interpretation of cause code</th>
</tr>
</thead>
<tbody>
<tr>
  <td>8 - Operator determined barring</td>
  <td>Packet data service is blocked by the operator.</td>
</tr>
<tr>
  <td>26 - Insufficient resources</td>
  <td>Context cannot be activated because of insufficient resources on network.</td>
</tr>
<tr>
  <td>27 - Missing or unknown Access Point Name (APN)</td>
  <td>No APN or unknown APN is provided in the activation request.</td>
</tr>
<tr>
  <td>29 , 30, 31 - User authentication failed</td>
  <td>Wrong user name or password provided in the activation request.</td>
</tr>
<tr>
  <td>32 - Service option not supported</td>
  <td>GPRS is not supported by the network.</td>
</tr>
<tr>
  <td>33 - Requested service option is not subscribed</td>
  <td>Requested service (GPRS) is not subscribed by the user.</td>
</tr>
<tr>
  <td>34 - Service option is temporarily out of order</td>
  <td>Packet data service is temporarily out of order. User must retry later.</td>
</tr>
<tr>
  <td>43 - Unknown Packet Data Protocol (PDP) context</td>
  <td>No APN or unknown APN is provided in the activation request.</td>
</tr>
</tbody>
</table>

<h3 id="connectionid"><code>ConnectionId</code></h3>

<p>The MB Service specifies a value for this member at the time of the connect request by using
OID_WWAN_CONNECT. Miniport drivers must copy this value and use it when they notify the MB Service on
subsequent connection state changes.</p>

<h3 id="activationstate"><code>ActivationState</code></h3>

<p>The current activation state of the device.</p>

<h3 id="voicecallstate"><code>VoiceCallState</code></h3>

<p>The current voice call state of the device.</p>

<h3 id="iptype"><code>IPType</code></h3>

<p>A value from the <a href="wwan_ip_type" title="typedef enum _WWAN_IP_TYPE {&#10;  WwanIPTypeDefault,&#10;  WwanIPTypeIPv4,&#10;  WwanIPTypeIPv6,&#10;  WwanIPTypeIpv4v6,&#10;  WwanIPTypeXlat,&#10;  WwanSessionTypeEthernet,&#10;  WwanSessionTypeUnstructured,&#10;  WwanSessionTypeMax&#10;} WWAN_IP_TYPE, *PWWAN_IP_TYPE;">WWAN_IP_TYPE</a> enumeration that specifies the type of IP.</p>

<h3 id="connectionmedia"><code>ConnectionMedia</code></h3>

<p>The media type for an established context/session.</p>

<h3 id="accessstring"><code>AccessString</code></h3>

<p>The selected APN/DNN for an established context/session.</p>

<h3 id="snssai"><code>Snssai</code></h3>

<p>A <strong><a href="wwan_single_nssai" title="typedef struct _WWAN_SINGLE_NSSAI {&#10;  UINT32 Bitmasks;&#10;  UINT16 SliceServiceType;&#10;  UINT16 MappedSliceServiceType;&#10;  UINT32 SliceDifferentiator;&#10;  UINT32 MappedSliceDifferentiator;&#10;} WWAN_SINGLE_NSSAI, *PWWAN_SINGLE_NSSAI;">WWAN_SINGLE_NSSAI</a></strong> structure representing a single Network Slice Selection Assistance Information (NSSAI).</p>

<h3 id="foundmatchingconnectionid"><code>FoundMatchingConnectionId</code></h3>

<p>Only valid if the status is WWAN_STATUS_SESSION_ALREADY_EXISTS.</p>

<h3 id="trafficparameters"><code>TrafficParameters</code></h3>

<p>A <strong><a href="wwan_offset_size_element" title="typedef struct _WWAN_OFFSET_SIZE_ELEMENT {&#10;  ULONG Offset;&#10;  ULONG Size;&#10;} WWAN_OFFSET_SIZE_ELEMENT, *PWWAN_OFFSET_SIZE_ELEMENT;">WWAN_OFFSET_SIZE_ELEMENT</a></strong> structure. Only valid if the status is WWAN_STATUS_DESSOCIATION_NEEDED_FOR_APPLICATION.
The first 4 bytes are the offset to the DataBuffer containing the raw data of MBIM_TLV_TYPE_TRAFFIC_PARAMETERS, in bytes, calculated from the beginning of <a href="wwan_set_context_state" title="typedef struct _WWAN_SET_CONTEXT_STATE {&#10;  ULONG                     ConnectionId;&#10;  WWAN_ACTIVATION_COMMAND   ActivationCommand;&#10;  WCHAR                     AccessString[WWAN_ACCESSSTRING_LEN];&#10;  WCHAR                     UserName[WWAN_USERNAME_LEN];&#10;  WCHAR                     Password[WWAN_PASSWORD_LEN];&#10;  WWAN_COMPRESSION          Compression;&#10;  WWAN_AUTH_PROTOCOL        AuthType;&#10;  WWAN_IP_TYPE              IPType;&#10;  WWAN_PSMEDIA_PREFERENCE   MediaPreference;&#10;  WWAN_CONFIGURATION_SOURCE ConnectionMediaSource;&#10;  WWAN_ACTIVATION_OPTION    ActivationOption;&#10;  WWAN_SINGLE_NSSAI         Snssai;&#10;  WWAN_OFFSET_SIZE_ELEMENT  TrafficParameters;&#10;} WWAN_SET_CONTEXT_STATE, *PWWAN_SET_CONTEXT_STATE;">WWAN_SET_CONTEXT_STATE</a>. The second 4 bytes are the size of the raw data of MBIM_TLV_TYPE_TRAFFIC_PARAMETERS, in bytes.</p>

<h2 id="remarks">Remarks</h2>

<p><em>Set</em> OID requests as well as unsolicited status events use the
<strong>uNwError</strong> member. If there is no network specific error or the network specific error is not known,
miniport drivers should set this member to 0.</p>

<p>The following points provide guidelines on returning network specific error in different
scenarios:</p>

<ul>
<li>If a set request fails, miniport drivers should return the network specific error code. In this
case, the miniport driver should set the
<strong>uStatus</strong> member of the <a href="ndis_wwan_context_state" title="typedef struct _NDIS_WWAN_CONTEXT_STATE {&#10;  NDIS_OBJECT_HEADER Header;&#10;  WWAN_STATUS        uStatus;&#10;  WWAN_CONTEXT_STATE ContextState;&#10;} NDIS_WWAN_CONTEXT_STATE, *PNDIS_WWAN_CONTEXT_STATE;">NDIS_WWAN_CONTEXT_STATE</a> structure to WWAN_STATUS_FAILURE, or a more
specific error like WWAN_STAUS_INVALID_ACCESS_STRING or WWAN_STATUS_INVALID_USER_NAME_PWD, and set the
<strong>uNwError</strong> member to the network specific error code.</li>
<li>Whenever the device context activation state changes because of network initiated context deactivate
then unsolicited status events should include the network specific error. In this case, the miniport
driver should set the
<strong>uStatus</strong> member of the <a href="ndis_wwan_context_state" title="typedef struct _NDIS_WWAN_CONTEXT_STATE {&#10;  NDIS_OBJECT_HEADER Header;&#10;  WWAN_STATUS        uStatus;&#10;  WWAN_CONTEXT_STATE ContextState;&#10;} NDIS_WWAN_CONTEXT_STATE, *PNDIS_WWAN_CONTEXT_STATE;">NDIS_WWAN_CONTEXT_STATE</a> structure to WWAN_STATUS_SUCCESS, and set the
<strong>uNwError</strong> member to the network specific error code.</li>
</ul>

<p>Miniport drivers can provide additional error codes as defined by the GSM standards specification of
context activation error codes returned by the network. For example, miniport drivers can communicate the
3GPP specification TS 24.008 context activation error codes, such as error code 8 (Operator determined
barring), to the MB Service through the
<strong>uNwError</strong> member. There is no standard available for CDMA-based network specific error codes.
CDMA-based devices and networks can return network specific error code information using the
<strong>uNwError</strong> member.</p>

<p>In case of response to the <a href="ndis_wwan_set_context_state" title="typedef struct _NDIS_WWAN_SET_CONTEXT_STATE {&#10;  NDIS_OBJECT_HEADER     Header;&#10;  WWAN_SET_CONTEXT_STATE SetContextState;&#10;} NDIS_WWAN_SET_CONTEXT_STATE, *PNDIS_WWAN_SET_CONTEXT_STATE;">NDIS_WWAN_SET_CONTEXT_STATE</a>, use this member to provide additional error
codes returned by the network.</p>

<h2 id="see-also">See also</h2>

<p><a href="ndis_wwan_context_state" title="typedef struct _NDIS_WWAN_CONTEXT_STATE {&#10;  NDIS_OBJECT_HEADER Header;&#10;  WWAN_STATUS        uStatus;&#10;  WWAN_CONTEXT_STATE ContextState;&#10;} NDIS_WWAN_CONTEXT_STATE, *PNDIS_WWAN_CONTEXT_STATE;">NDIS_WWAN_CONTEXT_STATE</a></p>

<p><a href="wwan_activation_state" title="typedef enum _WWAN_ACTIVATION_STATE {&#10;  WwanActivationStateUnknown,&#10;  WwanActivationStateActivated,&#10;  WwanActivationStateActivating,&#10;  WwanActivationStateDeactivated,&#10;  WwanActivationStateDeactivating,&#10;  WwanActivationStateMax&#10;} WWAN_ACTIVATION_STATE, *PWWAN_ACTIVATION_STATE;">WWAN_ACTIVATION_STATE</a></p>

<p><a href="wwan_voice_call_state" title="typedef enum _WWAN_VOICE_CALL_STATE {&#10;  WwanVoiceCallStateNone,&#10;  WwanVoiceCallStateInProgress,&#10;  WwanVoiceCallStateHangUp,&#10;  WwanVoiceCallStateMaximum&#10;} WWAN_VOICE_CALL_STATE, *PWWAN_VOICE_CALL_STATE;">WWAN_VOICE_CALL_STATE</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wwan/ns-wwan-_wwan_context_state">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wwan/ns-wwan-_wwan_context_state.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
