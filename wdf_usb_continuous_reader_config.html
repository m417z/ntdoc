<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="WDF_USB_CONTINUOUS_READER_CONFIG - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>WDF_USB_CONTINUOUS_READER_CONFIG - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            WDF_USB_CONTINUOUS_READER_CONFIG - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdfusb.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _WDF_USB_CONTINUOUS_READER_CONFIG {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                                 Size;
  <a href="size_t" title="typedef unsigned __int64 size_t;">size_t</a>                                TransferLength;
  <a href="size_t" title="typedef unsigned __int64 size_t;">size_t</a>                                HeaderLength;
  <a href="size_t" title="typedef unsigned __int64 size_t;">size_t</a>                                TrailerLength;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>                                 NumPendingReads;
  <a href="wdf_object_attributes" title="typedef struct _WDF_OBJECT_ATTRIBUTES {&#10;  ULONG                          Size;&#10;  PFN_WDF_OBJECT_CONTEXT_CLEANUP EvtCleanupCallback;&#10;  PFN_WDF_OBJECT_CONTEXT_DESTROY EvtDestroyCallback;&#10;  WDF_EXECUTION_LEVEL            ExecutionLevel;&#10;  WDF_SYNCHRONIZATION_SCOPE      SynchronizationScope;&#10;  WDFOBJECT                      ParentObject;&#10;  size_t                         ContextSizeOverride;&#10;  PCWDF_OBJECT_CONTEXT_TYPE_INFO ContextTypeInfo;&#10;} WDF_OBJECT_ATTRIBUTES, *PWDF_OBJECT_ATTRIBUTES;">PWDF_OBJECT_ATTRIBUTES</a>                BufferAttributes;
  PFN_WDF_USB_READER_COMPLETION_ROUTINE EvtUsbTargetPipeReadComplete;
  WDFCONTEXT                            EvtUsbTargetPipeReadCompleteContext;
  PFN_WDF_USB_READERS_FAILED            EvtUsbTargetPipeReadersFailed;
} WDF_USB_CONTINUOUS_READER_CONFIG, *PWDF_USB_CONTINUOUS_READER_CONFIG;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfusb/ns-wdfusb-_wdf_usb_continuous_reader_config">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/wdf_usb_continuous_reader_config.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-wdfusb-_wdf_usb_continuous_reader_config)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_wdf_usb_continuous_reader_config-structure">_WDF_USB_CONTINUOUS_READER_CONFIG structure</h1>

<h2 id="description">Description</h2>

<p>[Applies to KMDF and UMDF]</p>

<p>The <strong>WDF_USB_CONTINUOUS_READER_CONFIG</strong> structure contains information that the framework uses to configure a continuous reader for a USB pipe.</p>

<h2 id="members">Members</h2>

<h3 id="size"><code>Size</code></h3>

<p>The size, in bytes, of this structure.</p>

<h3 id="transferlength"><code>TransferLength</code></h3>

<p>The maximum length, in bytes, of data that can be received from the device.</p>

<h3 id="headerlength"><code>HeaderLength</code></h3>

<p>An offset, in bytes, into the buffer that receives data from the device. The framework will store data from the device in a read buffer, beginning at the offset value. In other words, this space precedes the <strong>TransferLength</strong>-sized space in which the framework stores data from the device.</p>

<h3 id="trailerlength"><code>TrailerLength</code></h3>

<p>The length, in bytes, of a trailing buffer space. This space follows the <strong>TransferLength</strong>-sized space in which the framework stores data from the device.</p>

<h3 id="numpendingreads"><code>NumPendingReads</code></h3>

<p>The number of read requests that the framework will queue to receive data from the I/O target. If this value is zero, the framework uses a default number of read requests. If the specified value is greater than the permitted maximum, the framework uses the permitted maximum. For more information about the <strong>NumPendingReads</strong> member, see the following Remarks section.</p>

<h3 id="bufferattributes"><code>BufferAttributes</code></h3>

<p>A <a href="wdf_object_attributes" title="typedef struct _WDF_OBJECT_ATTRIBUTES {&#10;  ULONG                          Size;&#10;  PFN_WDF_OBJECT_CONTEXT_CLEANUP EvtCleanupCallback;&#10;  PFN_WDF_OBJECT_CONTEXT_DESTROY EvtDestroyCallback;&#10;  WDF_EXECUTION_LEVEL            ExecutionLevel;&#10;  WDF_SYNCHRONIZATION_SCOPE      SynchronizationScope;&#10;  WDFOBJECT                      ParentObject;&#10;  size_t                         ContextSizeOverride;&#10;  PCWDF_OBJECT_CONTEXT_TYPE_INFO ContextTypeInfo;&#10;} WDF_OBJECT_ATTRIBUTES, *PWDF_OBJECT_ATTRIBUTES;">WDF_OBJECT_ATTRIBUTES</a> structure that specifies object attributes for the framework memory object that the framework creates for each read request. This member can be <strong>NULL</strong>. You cannot set the <strong>ParentObject</strong> member of the <a href="wdf_object_attributes" title="typedef struct _WDF_OBJECT_ATTRIBUTES {&#10;  ULONG                          Size;&#10;  PFN_WDF_OBJECT_CONTEXT_CLEANUP EvtCleanupCallback;&#10;  PFN_WDF_OBJECT_CONTEXT_DESTROY EvtDestroyCallback;&#10;  WDF_EXECUTION_LEVEL            ExecutionLevel;&#10;  WDF_SYNCHRONIZATION_SCOPE      SynchronizationScope;&#10;  WDFOBJECT                      ParentObject;&#10;  size_t                         ContextSizeOverride;&#10;  PCWDF_OBJECT_CONTEXT_TYPE_INFO ContextTypeInfo;&#10;} WDF_OBJECT_ATTRIBUTES, *PWDF_OBJECT_ATTRIBUTES;">WDF_OBJECT_ATTRIBUTES</a> structure.</p>

<h3 id="evtusbtargetpipereadcomplete"><code>EvtUsbTargetPipeReadComplete</code></h3>

<p>A pointer to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfusb/nc-wdfusb-evt_wdf_usb_reader_completion_routine">EvtUsbTargetPipeReadComplete</a> callback function.</p>

<h3 id="evtusbtargetpipereadcompletecontext"><code>EvtUsbTargetPipeReadCompleteContext</code></h3>

<p>An untyped pointer to driver-defined context information that the framework passes to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfusb/nc-wdfusb-evt_wdf_usb_reader_completion_routine">EvtUsbTargetPipeReadComplete</a> callback function.</p>

<h3 id="evtusbtargetpipereadersfailed"><code>EvtUsbTargetPipeReadersFailed</code></h3>

<p>A pointer to the driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfusb/nc-wdfusb-evt_wdf_usb_readers_failed">EvtUsbTargetPipeReadersFailed</a> callback function. This pointer is optional and can be <strong>NULL</strong>. For more information about this parameter, see the Remarks section of <a href="wdfusbtargetpipeconfigcontinuousreader" title="NTSTATUS WdfUsbTargetPipeConfigContinuousReader(&#10;  [in] WDFUSBPIPE                        Pipe,&#10;  [in] PWDF_USB_CONTINUOUS_READER_CONFIG Config&#10;);">WdfUsbTargetPipeConfigContinuousReader</a>.</p>

<h2 id="remarks">Remarks</h2>

<p>The <strong>WDF_USB_CONTINUOUS_READER_CONFIG</strong> structure is used as input to the <a href="wdfusbtargetpipeconfigcontinuousreader" title="NTSTATUS WdfUsbTargetPipeConfigContinuousReader(&#10;  [in] WDFUSBPIPE                        Pipe,&#10;  [in] PWDF_USB_CONTINUOUS_READER_CONFIG Config&#10;);">WdfUsbTargetPipeConfigContinuousReader</a> method.</p>

<p>To initialize a WDF_USB_CONTINUOUS_READER_CONFIG structure, the driver must call <a href="wdf_usb_continuous_reader_config_init" title="VOID WDF_USB_CONTINUOUS_READER_CONFIG_INIT(&#10;  [out] PWDF_USB_CONTINUOUS_READER_CONFIG     Config,&#10;  [in]  PFN_WDF_USB_READER_COMPLETION_ROUTINE EvtUsbTargetPipeReadComplete,&#10;  [in]  WDFCONTEXT                            EvtUsbTargetPipeReadCompleteContext,&#10;  [in]  size_t                                TransferLength&#10;);">WDF_USB_CONTINUOUS_READER_CONFIG_INIT</a>.</p>

<p>Use the following guidelines when choosing a value for the <strong>NumPendingReads</strong> member:</p>

<ul>
<li><p>Set <strong>NumPendingReads</strong> to 0 if you want your driver to use the framework's default value.</p>

<p>The default value is greater than 1 and has been determined to provide reasonably good performance for many devices on many processor configurations.</p></li>
<li>Set <strong>NumPendingReads</strong> to 1 if it is important that your driver receive data buffers in the exact order that the device delivers the data.</li>
<li><p>Set <strong>NumPendingReads</strong> to a number that meets the performance requirements for your device, based on thorough performance measurements.</p>

<p>First, test your device with the default value (0) for <strong>NumPendingReads</strong>. Your tests should include various hardware configurations, including different types and numbers of processors and different USB host controllers and USB configurations. You can then experiment with higher values, using the same tests. A driver that might require a higher value is one for a device that has a high interrupt rate, where data can be lost if interrupts are not serviced rapidly.</p></li>
</ul>

<p>A <strong>NumPendingReads</strong> value that is too large can slow down a system's performance. You should use the lowest value that meets your performance requirements. Typically, values that are higher than 3 or 4 do not improve data throughput. But higher values might reduce latency, or the chance of missing data, on a high-frequency pipe.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfusb/nc-wdfusb-evt_wdf_usb_reader_completion_routine">EvtUsbTargetPipeReadComplete</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfusb/nc-wdfusb-evt_wdf_usb_readers_failed">EvtUsbTargetPipeReadersFailed</a></p>

<p><a href="wdf_object_attributes" title="typedef struct _WDF_OBJECT_ATTRIBUTES {&#10;  ULONG                          Size;&#10;  PFN_WDF_OBJECT_CONTEXT_CLEANUP EvtCleanupCallback;&#10;  PFN_WDF_OBJECT_CONTEXT_DESTROY EvtDestroyCallback;&#10;  WDF_EXECUTION_LEVEL            ExecutionLevel;&#10;  WDF_SYNCHRONIZATION_SCOPE      SynchronizationScope;&#10;  WDFOBJECT                      ParentObject;&#10;  size_t                         ContextSizeOverride;&#10;  PCWDF_OBJECT_CONTEXT_TYPE_INFO ContextTypeInfo;&#10;} WDF_OBJECT_ATTRIBUTES, *PWDF_OBJECT_ATTRIBUTES;">WDF_OBJECT_ATTRIBUTES</a></p>

<p><a href="wdf_usb_continuous_reader_config_init" title="VOID WDF_USB_CONTINUOUS_READER_CONFIG_INIT(&#10;  [out] PWDF_USB_CONTINUOUS_READER_CONFIG     Config,&#10;  [in]  PFN_WDF_USB_READER_COMPLETION_ROUTINE EvtUsbTargetPipeReadComplete,&#10;  [in]  WDFCONTEXT                            EvtUsbTargetPipeReadCompleteContext,&#10;  [in]  size_t                                TransferLength&#10;);">WDF_USB_CONTINUOUS_READER_CONFIG_INIT</a></p>

<p><a href="wdfusbtargetpipeconfigcontinuousreader" title="NTSTATUS WdfUsbTargetPipeConfigContinuousReader(&#10;  [in] WDFUSBPIPE                        Pipe,&#10;  [in] PWDF_USB_CONTINUOUS_READER_CONFIG Config&#10;);">WdfUsbTargetPipeConfigContinuousReader</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfusb/ns-wdfusb-_wdf_usb_continuous_reader_config">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdfusb/ns-wdfusb-_wdf_usb_continuous_reader_config.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
