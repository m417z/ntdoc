<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="STORAGE_ADAPTER_DESCRIPTOR - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>STORAGE_ADAPTER_DESCRIPTOR - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            STORAGE_ADAPTER_DESCRIPTOR - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddstor.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _STORAGE_ADAPTER_DESCRIPTOR {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>   Version;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>   Size;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>   MaximumTransferLength;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>   MaximumPhysicalPages;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>   AlignmentMask;
  BOOLEAN AdapterUsesPio;
  BOOLEAN AdapterScansDown;
  BOOLEAN CommandQueueing;
  BOOLEAN AcceleratedTransfer;
#if ...
  BOOLEAN BusType;
#else
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>   BusType;
#endif
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>  BusMajorVersion;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a>  BusMinorVersion;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>   SrbType;
  <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a>   AddressType;
} STORAGE_ADAPTER_DESCRIPTOR, *PSTORAGE_ADAPTER_DESCRIPTOR;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddstor/ns-ntddstor-_storage_adapter_descriptor">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// winioctl.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _STORAGE_ADAPTER_DESCRIPTOR {
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>   Version;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>   Size;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>   MaximumTransferLength;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>   MaximumPhysicalPages;
  <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>   AlignmentMask;
  BOOLEAN AdapterUsesPio;
  BOOLEAN AdapterScansDown;
  BOOLEAN CommandQueueing;
  BOOLEAN AcceleratedTransfer;
#if ...
  BOOLEAN BusType;
#else
  <a href="byte" title="typedef unsigned char BYTE;">BYTE</a>    BusType;
#endif
  <a href="word" title="typedef unsigned short WORD;">WORD</a>    BusMajorVersion;
  <a href="word" title="typedef unsigned short WORD;">WORD</a>    BusMinorVersion;
  <a href="byte" title="typedef unsigned char BYTE;">BYTE</a>    SrbType;
  <a href="byte" title="typedef unsigned char BYTE;">BYTE</a>    AddressType;
} STORAGE_ADAPTER_DESCRIPTOR, *PSTORAGE_ADAPTER_DESCRIPTOR;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ns-winioctl-storage_adapter_descriptor">View the official Win32 API reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/storage_adapter_descriptor.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntddstor-_storage_adapter_descriptor)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="storage_adapter_descriptor-structure">STORAGE_ADAPTER_DESCRIPTOR structure</h1>

<h2 id="description">Description</h2>

<p>The <strong>STORAGE_ADAPTER_DESCRIPTOR</strong> structure is used in conjunction with the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddstor/ni-ntddstor-ioctl_storage_query_property"><strong>IOCTL_STORAGE_QUERY_PROPERTY</strong></a> request to retrieve the storage adapter descriptor data for a device.</p>

<h2 id="members">Members</h2>

<h3 id="version"><code>Version</code></h3>

<p>Contains the version of the structure <strong>STORAGE_ADAPTER_DESCRIPTOR</strong>. The value of this member will change as members are added to the structure.</p>

<h3 id="size"><code>Size</code></h3>

<p>Specifies the total size of the descriptor, in bytes.</p>

<h3 id="maximumtransferlength"><code>MaximumTransferLength</code></h3>

<p>Specifies the maximum number of bytes the host bus adapter (HBA) can transfer in a single operation.</p>

<h3 id="maximumphysicalpages"><code>MaximumPhysicalPages</code></h3>

<p>Specifies the maximum number of discontinuous physical pages the HBA can manage in a single transfer (in other words, the extent of its scatter/gather support).</p>

<h3 id="alignmentmask"><code>AlignmentMask</code></h3>

<p>Specifies the HBA's alignment requirements for transfers. A storage class driver sets the <strong>AlignmentRequirement</strong> field in its device objects to this value. The alignment mask indicates alignment restrictions for buffers required by the HBA for transfer operations. The valid mask values are 0 (byte aligned), 1 (word aligned), 3 (<a href="dword" title="typedef unsigned long DWORD;">DWORD</a> aligned), and 7 (double <a href="dword" title="typedef unsigned long DWORD;">DWORD</a> aligned).</p>

<h3 id="adapterusespio"><code>AdapterUsesPio</code></h3>

<p>Indicates when <strong>TRUE</strong> that the HBA uses Programmed Input/Output (PIO) and requires the use of system-space virtual addresses mapped to physical memory for data buffers. When <strong>FALSE</strong>, the HBA does not use PIO.</p>

<h3 id="adapterscansdown"><code>AdapterScansDown</code></h3>

<p>Indicates when <strong>TRUE</strong> that the HBA scans down for BIOS devices, that is, the HBA begins scanning with the highest device number rather than the lowest. When <strong>FALSE</strong>, the HBA begins scanning with the lowest device number. This member is reserved for legacy miniport drivers.</p>

<h3 id="commandqueueing"><code>CommandQueueing</code></h3>

<p>Indicates when <strong>TRUE</strong> that the HBA supports SCSI-tagged queuing and/or per-logical-unit internal queues, or the non-SCSI equivalent. When <strong>FALSE</strong>, the HBA neither supports SCSI-tagged queuing nor per-logical-unit internal queues.</p>

<h3 id="acceleratedtransfer"><code>AcceleratedTransfer</code></h3>

<p>Indicates when <strong>TRUE</strong> that the HBA supports synchronous transfers as a way of speeding up I/O. When <strong>FALSE</strong>, the HBA does not support synchronous transfers as a way of speeding up I/O.</p>

<h3 id="bustype"><code>BusType</code></h3>

<p>Specifies a value of type <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddstor/ne-ntddstor-storage_bus_type"><strong>STORAGE_BUS_TYPE</strong></a> that indicates the type of bus to which the device is connected.</p>

<h3 id="busmajorversion"><code>BusMajorVersion</code></h3>

<p>Specifies the major version number, if any, of the HBA.</p>

<h3 id="busminorversion"><code>BusMinorVersion</code></h3>

<p>Specifies the minor version number, if any, of the HBA.</p>

<h3 id="srbtype"><code>SrbType</code></h3>

<p>Specifies the SCSI request block (SRB) type used by the HBA. This member is valid starting with Windows 8.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td>SRB_TYPE_SCSI_REQUEST_BLOCK</td>
  <td>The HBA uses SCSI request blocks.</td>
</tr>
<tr>
  <td>SRB_TYPE_STORAGE_REQUEST_BLOCK</td>
  <td>The HBA uses extended SCSI request blocks.</td>
</tr>
</tbody>
</table>

<h3 id="addresstype"><code>AddressType</code></h3>

<p>Specifies the address type of the HBA. This member is valid starting with Windows 8.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td>STORAGE_ADDRESS_TYPE_BTL8</td>
  <td>The HBA uses 8-bit bus, target, and LUN addressing.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p>Storage class drivers issue a device-control request with the I/O control code <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddstor/ni-ntddstor-ioctl_storage_query_property"><strong>IOCTL_STORAGE_QUERY_PROPERTY</strong></a> to retrieve this structure, which contains configuration information from the HBA for data transfer operations. The structure can be retrieved either from the device object for the bus or from a functional device object (FDO), which forwards the request to the underlying bus.</p>

<p>If excessive protocol errors occur on an HBA that supports synchronous transfers (<strong>AcceleratedTransfer</strong> is <strong>TRUE</strong>), the storage class driver can disable synchronous transfers by setting SRB_FLAGS_DISABLE_SYNCH_TRANSFER in SRBs.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddstor/ni-ntddstor-ioctl_storage_query_property"><strong>IOCTL_STORAGE_QUERY_PROPERTY</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iobuilddeviceiocontrolrequest"><strong>IoBuildDeviceIoControlRequest</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddstor/ns-ntddstor-_storage_adapter_descriptor"><strong>STORAGE_ADAPTER_DESCRIPTOR</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddstor/ne-ntddstor-storage_bus_type"><strong>STORAGE_BUS_TYPE</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddstor/ns-ntddstor-_storage_descriptor_header"><strong>STORAGE_DESCRIPTOR_HEADER</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddstor/ns-ntddstor-_storage_device_descriptor"><strong>STORAGE_DEVICE_DESCRIPTOR</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddstor/ns-ntddstor-_storage_device_id_descriptor"><strong>STORAGE_DEVICE_ID_DESCRIPTOR</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddstor/ns-ntddstor-_storage_adapter_descriptor">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddstor/ns-ntddstor-_storage_adapter_descriptor.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Win32 API reference (ns-winioctl-storage_adapter_descriptor)</h1>
</div>
<div class="ntdoc-description">
<h1>STORAGE_ADAPTER_DESCRIPTOR structure</h1>

<h2>Description</h2>

<p>Used with the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/winioctl/ni-winioctl-ioctl_storage_query_property">IOCTL_STORAGE_QUERY_PROPERTY</a> control code to
retrieve the storage adapter descriptor data for a device.</p>

<h2>Members</h2>

<h3><code>Version</code></h3>

<p>Contains the size of this structure, in bytes. The value of this member will change as members are added to
the structure.</p>

<h3><code>Size</code></h3>

<p>Specifies the total size of the data returned, in bytes. This may include data that follows this
structure.</p>

<h3><code>MaximumTransferLength</code></h3>

<p>Specifies the maximum number of bytes the storage adapter can transfer in a single operation.</p>

<h3><code>MaximumPhysicalPages</code></h3>

<p>Specifies the maximum number of discontinuous physical pages the storage adapter can manage in a single
transfer (in other words, the extent of its scatter/gather support).</p>

<h3><code>AlignmentMask</code></h3>

<p>Specifies the storage adapter's alignment requirements for transfers. The alignment mask indicates
alignment restrictions for buffers required by the storage adapter for transfer operations. Valid mask values
are also restricted by characteristics of the memory managers on different versions of Windows.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td>0</td>
  <td>Buffers must be aligned on <strong><a href="byte" title="typedef unsigned char BYTE;">BYTE</a></strong> boundaries.</td>
</tr>
<tr>
  <td>1</td>
  <td>Buffers must be aligned on <strong><a href="word" title="typedef unsigned short WORD;">WORD</a></strong> boundaries.</td>
</tr>
<tr>
  <td>3</td>
  <td>Buffers must be aligned on <strong>DWORD32</strong> boundaries.</td>
</tr>
<tr>
  <td>7</td>
  <td>Buffers must be aligned on <strong><a href="dword64" title="typedef unsigned __int64 DWORD64;">DWORD64</a></strong> boundaries.</td>
</tr>
</tbody>
</table>

<h3><code>AdapterUsesPio</code></h3>

<p>If this member is <strong>TRUE</strong>, the storage adapter uses programmed I/O (PIO) and
requires the use of system-space virtual addresses mapped to physical memory for data buffers. When this member
is <strong>FALSE</strong>, the storage adapter does not use PIO.</p>

<h3><code>AdapterScansDown</code></h3>

<p>If this member is <strong>TRUE</strong>, the storage adapter scans down for BIOS devices, that is,
the storage adapter begins scanning with the highest device number rather than the lowest. When this member is
<strong>FALSE</strong>, the storage adapter begins scanning with the lowest device number. This member
is reserved for legacy miniport drivers.</p>

<h3><code>CommandQueueing</code></h3>

<p>If this member is <strong>TRUE</strong>, the storage adapter supports SCSI tagged queuing and/or
per-logical-unit internal queues, or the non-SCSI equivalent. When this member is
<strong>FALSE</strong>, the storage adapter neither supports SCSI-tagged queuing nor per-logical-unit
internal queues.</p>

<h3><code>AcceleratedTransfer</code></h3>

<p>If this member is <strong>TRUE</strong>, the storage adapter supports synchronous transfers as a
way of speeding up I/O. When this member is <strong>FALSE</strong>, the storage adapter does not
support synchronous transfers as a way of speeding up I/O.</p>

<h3><code>BusType</code></h3>

<p>Specifies a value of type <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/winioctl/ne-winioctl-storage_bus_type">STORAGE_BUS_TYPE</a> that
indicates the type of the bus to which the device is connected.</p>

<h3><code>BusMajorVersion</code></h3>

<p>Specifies the major version number, if any, of the storage adapter.</p>

<h3><code>BusMinorVersion</code></h3>

<p>Specifies the minor version number, if any, of the storage adapter.</p>

<h3><code>SrbType</code></h3>

<p>Specifies the SCSI request block (SRB) type used by the HBA.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>SRB_TYPE_SCSI_REQUEST_BLOCK</strong></td>
  <td>The HBA uses SCSI request blocks.</td>
</tr>
<tr>
  <td><strong>SRB_TYPE_STORAGE_REQUEST_BLOCK</strong></td>
  <td>The HBA uses extended SCSI request blocks.</td>
</tr>
</tbody>
</table>

<p>This member is valid starting with Windows 8.</p>

<h3><code>AddressType</code></h3>

<p>Specifies the address type of the HBA.</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>STORAGE_ADDRESS_TYPE_BTL8</strong></td>
  <td>The HBA uses 8-bit bus, target, and LUN addressing.</td>
</tr>
</tbody>
</table>

<p>This member is valid starting with Windows 8.</p>

<h2>See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/FileIO/disk-management-structures">Disk Management Structures</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/winioctl/ni-winioctl-ioctl_storage_query_property">IOCTL_STORAGE_QUERY_PROPERTY</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/winioctl/ns-winioctl-storage_adapter_descriptor">STORAGE_ADAPTER_DESCRIPTOR</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/winioctl/ns-winioctl-storage_descriptor_header">STORAGE_DESCRIPTOR_HEADER</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/api/winioctl/ns-winioctl-storage_device_id_descriptor">STORAGE_DEVICE_ID_DESCRIPTOR</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ns-winioctl-storage_adapter_descriptor">View the official Win32 API reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/sdk-api/blob/docs/sdk-api-src/content/winioctl/ns-winioctl-storage_adapter_descriptor.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
