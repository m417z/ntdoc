<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="WdfRequestCreate - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>WdfRequestCreate - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            WdfRequestCreate - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdfrequest.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> WdfRequestCreate(
  [in, optional] <a href="wdf_object_attributes" title="typedef struct _WDF_OBJECT_ATTRIBUTES {&#10;  ULONG                          Size;&#10;  PFN_WDF_OBJECT_CONTEXT_CLEANUP EvtCleanupCallback;&#10;  PFN_WDF_OBJECT_CONTEXT_DESTROY EvtDestroyCallback;&#10;  WDF_EXECUTION_LEVEL            ExecutionLevel;&#10;  WDF_SYNCHRONIZATION_SCOPE      SynchronizationScope;&#10;  WDFOBJECT                      ParentObject;&#10;  size_t                         ContextSizeOverride;&#10;  PCWDF_OBJECT_CONTEXT_TYPE_INFO ContextTypeInfo;&#10;} WDF_OBJECT_ATTRIBUTES, *PWDF_OBJECT_ATTRIBUTES;">PWDF_OBJECT_ATTRIBUTES</a> RequestAttributes,
  [in, optional] WDFIOTARGET            IoTarget,
  [out]          WDFREQUEST             *Request
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfrequest/nf-wdfrequest-wdfrequestcreate">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/wdfrequestcreate.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-wdfrequest-wdfrequestcreate)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="wdfrequestcreate-function">WdfRequestCreate function</h1>

<h2 id="description">Description</h2>

<p>[Applies to KMDF and UMDF]</p>

<p>The <strong>WdfRequestCreate</strong> method creates an empty framework request object.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="requestattributes-in-optional"><code>RequestAttributes</code> [in, optional]</h3>

<p>A pointer to a caller-allocated <a rel="noopener" target="_blank" href="wdf_object_attributes">WDF_OBJECT_ATTRIBUTES</a> structure that specifies object attributes for the request object. This parameter is optional and can be WDF_NO_OBJECT_ATTRIBUTES.</p>

<h3 id="iotarget-in-optional"><code>IoTarget</code> [in, optional]</h3>

<p>A handle to a framework I/O target object. This parameter is optional and can be <strong>NULL</strong>. If non-<strong>NULL</strong>, <strong>WdfRequestCreate</strong> verifies that the driver can eventually send the request to the specified I/O target.</p>

<h3 id="request-out"><code>Request</code> [out]</h3>

<p>A pointer to a location that receives a handle to a framework request object.</p>

<h2 id="return-value">Return value</h2>

<p><strong>WdfRequestCreate</strong> returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if the operation succeeds. Otherwise, this method might return one of the following values:</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>STATUS_INVALID_PARAMETER</strong></td>
  <td>An input parameter is invalid.</td>
</tr>
<tr>
  <td><strong>STATUS_INSUFFICIENT_RESOURCES</strong></td>
  <td>There are insufficient system resources to complete the operation.</td>
</tr>
<tr>
  <td><strong>STATUS_REQUEST_NOT_ACCEPTED</strong></td>
  <td>The request's array of I/O stack locations is not large enough to allow the driver to send the request to the specified I/O target.</td>
</tr>
</tbody>
</table>

<p>For a list of additional return values, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/wdf/framework-object-creation-errors">Framework Object Creation Errors</a>.</p>

<p>This method might also return other <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/ntstatus-values">NTSTATUS values</a>.</p>

<h2 id="remarks">Remarks</h2>

<p>A framework-based driver can call <strong>WdfRequestCreate</strong> to create a new request that the driver subsequently passes to other framework functions for initialization. For example, a driver for a USB device might call <a rel="noopener" target="_blank" href="wdfusbtargetpipeformatrequestforread">WdfUsbTargetPipeFormatRequestForRead</a> to format a new read request.</p>

<p>A framework-based driver that communicates with WDM drivers might specify the contents of a request by calling <a rel="noopener" target="_blank" href="wdfrequestcreatefromirp">WdfRequestCreateFromIrp</a>.</p>

<p>If a driver calls <strong>WdfRequestCreate</strong> to create a request object, it must not call <a rel="noopener" target="_blank" href="wdfrequestcomplete">WdfRequestComplete</a> for the request object. Instead, the driver must call <a rel="noopener" target="_blank" href="wdfobjectdelete">WdfObjectDelete</a> when it has finished using the request object. For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/wdf/completing-i-o-requests">Completing I/O Requests</a>.</p>

<p>By default, the new request object's parent is the framework driver object that the <a rel="noopener" target="_blank" href="wdfdrivercreate">WdfDriverCreate</a> method created. You can use the <strong>ParentObject</strong> member of the <a rel="noopener" target="_blank" href="wdf_object_attributes">WDF_OBJECT_ATTRIBUTES</a> structure to specify a different parent. The framework deletes the request object when it deletes the parent object. If your driver does not change the default parent, the driver should delete the request object when it has finished using the object; otherwise, the request object will remain until the I/O manager unloads your driver.</p>

<p>For more information about calling <strong>WdfRequestCreate</strong>, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/wdf/creating-framework-request-objects">Creating Framework Request Objects</a>.</p>

<h4 id="examples">Examples</h4>

<p>The following code example creates an I/O target object, initializes a <a rel="noopener" target="_blank" href="wdf_object_attributes">WDF_OBJECT_ATTRIBUTES</a> structure, and calls <strong>WdfRequestCreate</strong>. The new request object's parent is the I/O target object.</p>

<div class="codehilite">
<pre><span></span><code><span class="n"><a href="wdf_object_attributes" title="typedef struct _WDF_OBJECT_ATTRIBUTES {&#10;  ULONG                          Size;&#10;  PFN_WDF_OBJECT_CONTEXT_CLEANUP EvtCleanupCallback;&#10;  PFN_WDF_OBJECT_CONTEXT_DESTROY EvtDestroyCallback;&#10;  WDF_EXECUTION_LEVEL            ExecutionLevel;&#10;  WDF_SYNCHRONIZATION_SCOPE      SynchronizationScope;&#10;  WDFOBJECT                      ParentObject;&#10;  size_t                         ContextSizeOverride;&#10;  PCWDF_OBJECT_CONTEXT_TYPE_INFO ContextTypeInfo;&#10;} WDF_OBJECT_ATTRIBUTES, *PWDF_OBJECT_ATTRIBUTES;">WDF_OBJECT_ATTRIBUTES</a></span><span class="w">  </span><span class="n">attributes</span><span class="p">;</span>
<span class="n">WDFREQUEST</span><span class="w"> </span><span class="n">newRequest</span><span class="p">;</span>
<span class="n">WDFIOTARGET</span><span class="w"> </span><span class="n">ioTarget</span><span class="p">;</span>
<span class="p">...</span>
<span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n"><a href="wdfiotargetcreate" title="NTSTATUS WdfIoTargetCreate(&#10;  [in]           WDFDEVICE              Device,&#10;  [in, optional] PWDF_OBJECT_ATTRIBUTES IoTargetAttributes,&#10;  [out]          WDFIOTARGET            *IoTarget&#10;);">WdfIoTargetCreate</a></span><span class="p">(</span>
<span class="w">                           </span><span class="n">Device</span><span class="p">,</span>
<span class="w">                           </span><span class="n">WDF_NO_OBJECT_ATTRIBUTES</span><span class="p">,</span>
<span class="w">                           </span><span class="o">&amp;</span><span class="n">ioTarget</span>
<span class="w">                           </span><span class="p">);</span>
<span class="w">  </span><span class="p">...</span>
<span class="n"><a href="wdf_object_attributes_init" title="VOID WDF_OBJECT_ATTRIBUTES_INIT(&#10;  [out] PWDF_OBJECT_ATTRIBUTES Attributes&#10;);">WDF_OBJECT_ATTRIBUTES_INIT</a></span><span class="p">(</span><span class="o">&amp;</span><span class="n">attributes</span><span class="p">);</span>
<span class="n">attributes</span><span class="p">.</span><span class="n">ParentObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ioTarget</span><span class="p">;</span>

<span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WdfRequestCreate</span><span class="p">(</span>
<span class="w">                          </span><span class="o">&amp;</span><span class="n">attributes</span><span class="p">,</span>
<span class="w">                          </span><span class="n">ioTarget</span><span class="p">,</span>
<span class="w">                          </span><span class="o">&amp;</span><span class="n">newRequest</span>
<span class="w">                          </span><span class="p">);</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n"><a href="nt_success" title="#define NT_SUCCESS(Status) (((NTSTATUS)(Status)) &gt;= 0)">NT_SUCCESS</a></span><span class="p">(</span><span class="n">status</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="wdf_object_attributes">WDF_OBJECT_ATTRIBUTES</a></p>

<p><a rel="noopener" target="_blank" href="wdf_object_attributes_init">WDF_OBJECT_ATTRIBUTES_INIT</a></p>

<p><a rel="noopener" target="_blank" href="wdfdeviceinitsetrequestattributes">WdfDeviceInitSetRequestAttributes</a></p>

<p><a rel="noopener" target="_blank" href="wdfdrivercreate">WdfDriverCreate</a></p>

<p><a rel="noopener" target="_blank" href="wdfrequestcreatefromirp">WdfRequestCreateFromIrp</a></p>

<p><a rel="noopener" target="_blank" href="wdfrequestreuse">WdfRequestReuse</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdfrequest/nf-wdfrequest-wdfrequestcreate">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdfrequest/nf-wdfrequest-wdfrequestcreate.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
