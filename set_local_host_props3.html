<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="SET_LOCAL_HOST_PROPS3 - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>SET_LOCAL_HOST_PROPS3 - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            SET_LOCAL_HOST_PROPS3 - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// 1394.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _SET_LOCAL_HOST_PROPS3 {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  fulFlags;
  HANDLE hCromData;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  nLength;
  <a href="mdl" title="typedef struct _MDL {&#10;  struct _MDL      *Next;&#10;  CSHORT           Size;&#10;  CSHORT           MdlFlags;&#10;  struct _EPROCESS *Process;&#10;  PVOID            MappedSystemVa;&#10;  PVOID            StartVa;&#10;  ULONG            ByteCount;&#10;  ULONG            ByteOffset;&#10;} MDL, *PMDL;">PMDL</a>   Mdl;
} SET_LOCAL_HOST_PROPS3, *PSET_LOCAL_HOST_PROPS3;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/1394/ns-1394-_set_local_host_props3">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/set_local_host_props3.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-1394-_set_local_host_props3)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_set_local_host_props3-structure">_SET_LOCAL_HOST_PROPS3 structure</h1>

<h2 id="description">Description</h2>

<p>SET_LOCAL_HOST_PROPS3 contains the data necessary for defining or identifying one or more unit directories in the Configuration ROM of a 1394 Host Controller.</p>

<h2 id="members">Members</h2>

<h3 id="fulflags"><code>fulFlags</code></h3>

<p>Specifies the action to be taken with the unit directory data contained in the SET_LOCAL_HOST_PROPS3 structure.</p>

<table>
<thead>
<tr>
  <th>Flag</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td>SLHP_FLAG_ADD_CROM_DATA</td>
  <td>Indicates that the data contained in the SET_LOCAL_HOST_PROPS3 structure is to be used to create a new unit directory in the Host Controller's Configuration ROM.</td>
</tr>
<tr>
  <td>SLHP_FLAG_REMOVE_CROM_DATA</td>
  <td>Indicates that the data contained in the SET_LOCAL_HOST_PROPS3 structure is to be used to identify and remove an existing unit directory in the Host Controller's Configuration ROM.</td>
</tr>
</tbody>
</table>

<h3 id="hcromdata"><code>hCromData</code></h3>

<p>Contains a handle that is returned after one or more unit directories have been created. Drivers must store this value and pass it to the bus driver when removing these unit directories. If the SLHP_FLAG_ADD_CROM_DATA flag is set, then this is an output parameter. If the SLHP_FLAG_REMOVE_CROM_DATA flag is set, then this is an input parameter.</p>

<h3 id="nlength"><code>nLength</code></h3>

<p>Contains length of the data buffer pointed to by <strong>Mdl</strong>.</p>

<h3 id="mdl"><code>Mdl</code></h3>

<p>Pointer to the data buffer containing the unit directory information.</p>

<h2 id="remarks">Remarks</h2>

<p>The SET_LOCAL_HOST_PROPS3 structure is sent to the bus driver in the <strong>u.SetLocalHostProperties.Information</strong> member of an <a href="irb" title="typedef struct _IRB {&#10;  ULONG     FunctionNumber;&#10;  ULONG     Flags;&#10;  ULONG_PTR BusReserved[IRB_BUS_RESERVED_SZ];&#10;  ULONG_PTR PortReserved[IRB_PORT_RESERVED_SZ];&#10;  union {&#10;    IRB_REQ_ASYNC_READ                          AsyncRead;&#10;    IRB_REQ_ASYNC_WRITE                         AsyncWrite;&#10;    IRB_REQ_ASYNC_LOCK                          AsyncLock;&#10;    IRB_REQ_ISOCH_ALLOCATE_BANDWIDTH            IsochAllocateBandwidth;&#10;    IRB_REQ_ISOCH_ALLOCATE_CHANNEL              IsochAllocateChannel;&#10;    IRB_REQ_ISOCH_ALLOCATE_RESOURCES            IsochAllocateResources;&#10;    IRB_REQ_ISOCH_ATTACH_BUFFERS                IsochAttachBuffers;&#10;    IRB_REQ_ISOCH_DETACH_BUFFERS                IsochDetachBuffers;&#10;    IRB_REQ_ISOCH_FREE_BANDWIDTH                IsochFreeBandwidth;&#10;    IRB_REQ_ISOCH_FREE_CHANNEL                  IsochFreeChannel;&#10;    IRB_REQ_ISOCH_FREE_RESOURCES                IsochFreeResources;&#10;    IRB_REQ_ISOCH_LISTEN                        IsochListen;&#10;    IRB_REQ_ISOCH_QUERY_CURRENT_CYCLE_TIME      IsochQueryCurrentCycleTime;&#10;    IRB_REQ_ISOCH_QUERY_RESOURCES               IsochQueryResources;&#10;...">IRB</a> during a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/1394/ni-1394-ioctl_1394_class">REQUEST_SET_LOCAL_HOST_PROPERTIES</a> request, with <strong>u.SetLocalHostProperties.nLevel=</strong> SET_LOCAL_HOST_PROPERTIES_MODIFY_CROM.</p>

<p>The first element of the buffer pointed to by <strong>Mdl</strong> must be a unit directory. This is followed by offsets to any other leafs or directories defined in the request. The offsets must be relative to the beginning of the buffer. If the request results in the creation of a new unit directory, the bus driver adds a pointer to the newly created directory in the root directory. The buffer pointed to by <strong>Mdl</strong> must be in big-endian data format. If a driver fails to remove its dynamically added Configuration ROM data when the driver is removed, the bus driver does so automatically, restoring the default contents of the Configuration ROM.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/previous-versions/ff537204(v=vs.85)">IEEE1394_API_REQUEST</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/1394/ni-1394-ioctl_1394_class">REQUEST_SET_LOCAL_HOST_PROPERTIES</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/1394/ns-1394-_set_local_host_props3">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/1394/ns-1394-_set_local_host_props3.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
