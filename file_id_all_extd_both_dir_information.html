<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="FILE_ID_ALL_EXTD_BOTH_DIR_INFORMATION - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>FILE_ID_ALL_EXTD_BOTH_DIR_INFORMATION - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            FILE_ID_ALL_EXTD_BOTH_DIR_INFORMATION - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">#ifndef _NTIOAPI_H

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">_Struct_size_bytes_(NextEntryOffset)
typedef struct _FILE_ID_ALL_EXTD_BOTH_DIR_INFORMATION
{
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> NextEntryOffset;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> FileIndex;
    LARGE_INTEGER CreationTime;
    LARGE_INTEGER LastAccessTime;
    LARGE_INTEGER LastWriteTime;
    LARGE_INTEGER ChangeTime;
    LARGE_INTEGER EndOfFile;
    LARGE_INTEGER AllocationSize;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> FileAttributes;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> FileNameLength;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> EaSize;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> ReparsePointTag;
    union
    {
        LARGE_INTEGER FileId;
        <a href="file_internal_information" title="typedef struct _FILE_INTERNAL_INFORMATION&#10;{&#10;    union&#10;    {&#10;        ULARGE_INTEGER IndexNumber;&#10;        struct&#10;        {&#10;            ULONGLONG MftRecordIndex : 48; // rev&#10;            ULONGLONG SequenceNumber : 16; // rev&#10;        };&#10;    };&#10;} FILE_INTERNAL_INFORMATION, *PFILE_INTERNAL_INFORMATION;">FILE_INTERNAL_INFORMATION</a> FileInternal; // rev
    };
    FILE_ID_128 FileId128;
    <a href="cchar" title="typedef char CCHAR;">CCHAR</a> ShortNameLength;
    WCHAR ShortName[12];
    _Field_size_bytes_(FileNameLength) WCHAR FileName[1];
} FILE_ID_ALL_EXTD_BOTH_DIR_INFORMATION, *PFILE_ID_ALL_EXTD_BOTH_DIR_INFORMATION;
</span><span class="ntdoc-code-footer">
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/d9393a49b3707fc786047a2ca5ae4afefd760b30/phnt/include/ntioapi.h#L1196">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntifs.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _FILE_ID_ALL_EXTD_BOTH_DIR_INFORMATION {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         NextEntryOffset;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         FileIndex;
  LARGE_INTEGER CreationTime;
  LARGE_INTEGER LastAccessTime;
  LARGE_INTEGER LastWriteTime;
  LARGE_INTEGER ChangeTime;
  LARGE_INTEGER EndOfFile;
  LARGE_INTEGER AllocationSize;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         FileAttributes;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         FileNameLength;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         EaSize;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         ReparsePointTag;
  LARGE_INTEGER FileId;
  FILE_ID_128   FileId128;
  <a href="cchar" title="typedef char CCHAR;">CCHAR</a>         ShortNameLength;
  WCHAR         ShortName[12];
  WCHAR         FileName[1];
} FILE_ID_ALL_EXTD_BOTH_DIR_INFORMATION, *PFILE_ID_ALL_EXTD_BOTH_DIR_INFORMATION;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/ns-ntifs-file_id_all_extd_both_dir_information">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/file_id_all_extd_both_dir_information.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntifs-file_id_all_extd_both_dir_information)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2>Description</h2>
<p>The <strong>FILE_ID_ALL_EXTD_BOTH_DIR_INFORMATION</strong> structure is used to query 64-bit and 128-bit file reference number information for the files in a directory.</p>
<h2>Members</h2>
<h3><code>NextEntryOffset</code></h3>
<p>Byte offset of the next <strong><a href="file_id_64_extd_both_dir_information" title="_Struct_size_bytes_(NextEntryOffset)&#10;typedef struct _FILE_ID_64_EXTD_BOTH_DIR_INFORMATION&#10;{&#10;    ULONG NextEntryOffset;&#10;    ULONG FileIndex;&#10;    LARGE_INTEGER CreationTime;&#10;    LARGE_INTEGER LastAccessTime;&#10;    LARGE_INTEGER LastWriteTime;&#10;    LARGE_INTEGER ChangeTime;&#10;    LARGE_INTEGER EndOfFile;&#10;    LARGE_INTEGER AllocationSize;&#10;    ULONG FileAttributes;&#10;    ULONG FileNameLength;&#10;    ULONG EaSize;&#10;    ULONG ReparsePointTag;&#10;    union&#10;    {&#10;        LARGE_INTEGER FileId;&#10;        FILE_INTERNAL_INFORMATION FileInternal; // rev&#10;    };&#10;...">FILE_ID_64_EXTD_BOTH_DIR_INFORMATION</a></strong> entry, if multiple entries are present in a buffer. This member is zero if no other entries follow this one.</p>
<h3><code>FileIndex</code></h3>
<p>Byte offset of the file within the parent directory. This member is undefined for file systems, such as NTFS, in which the position of a file within the parent directory is not fixed and can be changed at any time to maintain sort order.</p>
<h3><code>CreationTime</code></h3>
<p>Time when the file was created.</p>
<h3><code>LastAccessTime</code></h3>
<p>Last time the file was accessed.</p>
<h3><code>LastWriteTime</code></h3>
<p>Last time information was written to the file.</p>
<h3><code>ChangeTime</code></h3>
<p>Last time the file was changed.</p>
<h3><code>EndOfFile</code></h3>
<p>Absolute new end-of-file position as a byte offset from the start of the file. <strong>EndOfFile</strong> specifies the byte offset to the end of the file. Because this value is zero-based, it actually refers to the first free byte in the file. In other words, <strong>EndOfFile</strong> is the offset to the byte immediately following the last valid byte in the file.</p>
<h3><code>AllocationSize</code></h3>
<p>File allocation size, in bytes. Usually, this value is a multiple of the sector or cluster size of the underlying physical device.</p>
<h3><code>FileAttributes</code></h3>
<p>File attributes, which can be any valid combination of the following:</p>
<ul>
<li>

</li>
<li>

</li>
<li>

</li>
<li>

</li>
<li>

</li>
<li>

</li>
<li>

</li>
<li>

</li>
</ul>
<h3><code>FileNameLength</code></h3>
<p>Specifies the length of the file name string.</p>
<h3><code>EaSize</code></h3>
<p>Combined length, in bytes, of the extended attributes (EA) for the file.</p>
<h3><code>ReparsePointTag</code></h3>
<p>Tag value for the reparse point.</p>
<h3><code>FileId</code></h3>
<p>The 64-bit file reference number for the file. This number is generated and assigned to the file by the file system.</p>
<h3><code>FileId128</code></h3>
<p>The 128-bit file reference number for the file. This number is generated and assigned to the file by the file system.</p>
<h3><code>ShortNameLength</code></h3>
<p>Specifies the length of the short file name string.</p>
<h3><code>ShortName[12]</code></h3>
<p>Unicode string containing the short (8.3) name for the file.</p>
<h3><code>FileName[1]</code></h3>
<p>Specifies the first character of the file name string. This is followed in memory by the remainder of the string.</p>
<h2>Remarks</h2>
<p>This information can be queried in either of the following ways:</p>
<ul>
<li>

</li>
<li>

</li>
</ul>
<p>No specific access rights are required to query this information.</p>
<p>File reference numbers, also called file IDs, are guaranteed to be unique only within a static file system. They are not guaranteed to be unique over time, because file systems are free to reuse them. Nor are they guaranteed to remain constant. For example, the FAT file system generates the file reference number for a file from the byte offset of the file's directory entry record (DIRENT) on the disk. Defragmentation can change this byte offset. Thus a FAT file reference number can change over time.</p>
<p>All dates and times are in absolute system-time format. Absolute system time is the number of 100-nanosecond intervals since the start of the year 1601.</p>
<p>This structure must be aligned on a <a href="longlong" title="typedef __int64 LONGLONG;">LONGLONG</a> (8-byte) boundary. If a buffer contains two or more of these structures, the <strong>NextEntryOffset</strong> value in each entry, except the last, falls on an 8-byte boundary.</p>
<h2>See also</h2>
<p><strong><a href="file_information_class" title="typedef enum _FILE_INFORMATION_CLASS&#10;{&#10;    FileDirectoryInformation = 1,                   // q: FILE_DIRECTORY_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileFullDirectoryInformation,                   // q: FILE_FULL_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBothDirectoryInformation,                   // q: FILE_BOTH_DIR_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileBasicInformation,                           // qs: FILE_BASIC_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileStandardInformation,                        // q: FILE_STANDARD_INFORMATION, FILE_STANDARD_INFORMATION_EX&#10;    FileInternalInformation,                        // q: FILE_INTERNAL_INFORMATION&#10;    FileEaInformation,                              // q: FILE_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileAccessInformation,                          // q: FILE_ACCESS_INFORMATION&#10;    FileNameInformation,                            // q: FILE_NAME_INFORMATION&#10;    FileRenameInformation,                          // s: FILE_RENAME_INFORMATION (requires DELETE) // 10&#10;    FileLinkInformation,                            // s: FILE_LINK_INFORMATION&#10;    FileNamesInformation,                           // q: FILE_NAMES_INFORMATION (requires FILE_LIST_DIRECTORY) (NtQueryDirectoryFile[Ex])&#10;    FileDispositionInformation,                     // s: FILE_DISPOSITION_INFORMATION (requires DELETE)&#10;    FilePositionInformation,                        // qs: FILE_POSITION_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileFullEaInformation,                          // q: FILE_FULL_EA_INFORMATION (requires FILE_READ_EA)&#10;    FileModeInformation,                            // qs: FILE_MODE_INFORMATION (q: requires FILE_READ_ATTRIBUTES; s: requires FILE_WRITE_ATTRIBUTES)&#10;    FileAlignmentInformation,                       // q: FILE_ALIGNMENT_INFORMATION&#10;    FileAllInformation,                             // q: FILE_ALL_INFORMATION&#10;...">FILE_INFORMATION_CLASS</a></strong></p>
<p><strong><a href="fsrtlnotifyfullchangedirectory" title="VOID FsRtlNotifyFullChangeDirectory(&#10;  [in]           PNOTIFY_SYNC               NotifySync,&#10;  [in]           PLIST_ENTRY                NotifyList,&#10;  [in]           PVOID                      FsContext,&#10;  [in]           PSTRING                    FullDirectoryName,&#10;  [in]           BOOLEAN                    WatchTree,&#10;  [in]           BOOLEAN                    IgnoreBuffer,&#10;  [in]           ULONG                      CompletionFilter,&#10;  [in, optional] PIRP                       NotifyIrp,&#10;  [in, optional] PCHECK_FOR_TRAVERSE_ACCESS TraverseCallback,&#10;  [in, optional] PSECURITY_SUBJECT_CONTEXT  SubjectContext&#10;);">FsRtlNotifyFullChangeDirectory</a></strong></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ifs/irp-mj-directory-control">IRP_MJ_DIRECTORY_CONTROL</a></p>
<p><strong><a href="ntquerydirectoryfile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtQueryDirectoryFile(&#10;    _In_ HANDLE FileHandle,&#10;    _In_opt_ HANDLE Event,&#10;    _In_opt_ PIO_APC_ROUTINE ApcRoutine,&#10;    _In_opt_ PVOID ApcContext,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _Out_writes_bytes_(Length) PVOID FileInformation,&#10;    _In_ ULONG Length,&#10;    _In_ FILE_INFORMATION_CLASS FileInformationClass,&#10;    _In_ BOOLEAN ReturnSingleEntry,&#10;    _In_opt_ PCUNICODE_STRING FileName,&#10;    _In_ BOOLEAN RestartScan&#10;    );">ZwQueryDirectoryFile</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/ns-ntifs-file_id_all_extd_both_dir_information">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntifs/ns-ntifs-file_id_all_extd_both_dir_information.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
