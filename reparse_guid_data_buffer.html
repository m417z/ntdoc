<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="REPARSE_GUID_DATA_BUFFER - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>REPARSE_GUID_DATA_BUFFER - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            REPARSE_GUID_DATA_BUFFER - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntifs.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _REPARSE_GUID_DATA_BUFFER {
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>  ReparseTag;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> ReparseDataLength;
  <a href="ushort" title="typedef unsigned short USHORT;">USHORT</a> Reserved;
  GUID   ReparseGuid;
  struct {
    <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> DataBuffer[1];
  } GenericReparseBuffer;
} REPARSE_GUID_DATA_BUFFER, *PREPARSE_GUID_DATA_BUFFER;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/ns-ntifs-_reparse_guid_data_buffer">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/reparse_guid_data_buffer.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntifs-_reparse_guid_data_buffer)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="reparse_guid_data_buffer-structure">REPARSE_GUID_DATA_BUFFER structure</h1>

<h2 id="description">Description</h2>

<p>The REPARSE_GUID_DATA_BUFFER structure contains reparse point data for a reparse point.</p>

<h2 id="members">Members</h2>

<h3 id="reparsetag"><code>ReparseTag</code></h3>

<p>Reparse point tag that uniquely identifies the owner of the reparse point. (See the following <strong>Remarks</strong> section.)</p>

<h3 id="reparsedatalength"><code>ReparseDataLength</code></h3>

<p>Size, in bytes, of the reparse data in the <strong>DataBuffer</strong> member.</p>

<h3 id="reserved"><code>Reserved</code></h3>

<p>Reserved; do not use.</p>

<h3 id="reparseguid"><code>ReparseGuid</code></h3>

<p>GUID that uniquely identifies the owner of the reparse point. (See the following <strong>Remarks</strong> section.)</p>

<h3 id="genericreparsebuffer"><code>GenericReparseBuffer</code></h3>

<h3 id="genericreparsebufferdatabuffer"><code>GenericReparseBuffer.DataBuffer</code></h3>

<p>User-defined data for the reparse point. The format of this data is defined by the owner of the reparse point.</p>

<h2 id="remarks">Remarks</h2>

<p>The REPARSE_GUID_DATA_BUFFER structure is used by all third-party file systems, filters, and minifilters, as well as some Microsoft file systems, filters, and minifilters to store data for a reparse point. Each reparse point contains one REPARSE_GUID_DATA_BUFFER structure.</p>

<p>Microsoft reparse points can use the <a href="reparse_data_buffer" title="typedef struct _REPARSE_DATA_BUFFER&#10;{&#10;    ULONG ReparseTag;&#10;    USHORT ReparseDataLength;&#10;    USHORT Reserved;&#10;&#10;    _Field_size_bytes_(ReparseDataLength)&#10;    union&#10;    {&#10;        struct&#10;        {&#10;            USHORT SubstituteNameOffset;&#10;            USHORT SubstituteNameLength;&#10;            USHORT PrintNameOffset;&#10;            USHORT PrintNameLength;&#10;            ULONG Flags;&#10;            WCHAR PathBuffer[1];&#10;        } SymbolicLinkReparseBuffer;&#10;        struct&#10;        {&#10;...">REPARSE_DATA_BUFFER</a> structure instead of the REPARSE_GUID_DATA_BUFFER structure. However, third-party reparse points are required to use the REPARSE_GUID_DATA_BUFFER structure.</p>

<p>Reparse point tags are <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ifs/reparse-point-tag-request">assigned to third parties by Microsoft</a>. You may request more than one reparse point for use with a file system, file system filter driver, or minifilter driver.</p>

<p>Reparse point GUIDs are not assigned by Microsoft. However, you must choose one GUID to use with your assigned reparse point tag, and you must always use this GUID with the tag. To generate a GUID, you can use GUIDGen (<em>Guidgen.exe</em>), a tool that is included in the Microsoft Windows SDK.</p>

<p>Minifilters can set or delete a reparse point by calling <a href="flttagfile" title="NTSTATUS FLTAPI FltTagFile(&#10;  [in]           PFLT_INSTANCE InitiatingInstance,&#10;  [in]           PFILE_OBJECT  FileObject,&#10;  [in]           ULONG         FileTag,&#10;  [in, optional] GUID          *Guid,&#10;  [in]           PVOID         DataBuffer,&#10;  [in]           USHORT        DataBufferLength&#10;);">FltTagFile</a> or <a href="fltuntagfile" title="NTSTATUS FLTAPI FltUntagFile(&#10;  [in]           PFLT_INSTANCE InitiatingInstance,&#10;  [in]           PFILE_OBJECT  FileObject,&#10;  [in]           ULONG         FileTag,&#10;  [in, optional] GUID          *Guid&#10;);">FltUntagFile</a>. Minifilters can retrieve a reparse point by using the <a href="fsctl_get_reparse_point" title="// CTL_CODE(0x0009, 0x02a, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_GET_REPARSE_POINT 0x000900A8">FSCTL_GET_REPARSE_POINT</a> control code. This code can be sent to the file system by calling <a href="fltfscontrolfile" title="NTSTATUS FLTAPI FltFsControlFile(&#10;  [in]            PFLT_INSTANCE Instance,&#10;  [in]            PFILE_OBJECT  FileObject,&#10;  [in]            ULONG         FsControlCode,&#10;  [in, optional]  PVOID         InputBuffer,&#10;  [in]            ULONG         InputBufferLength,&#10;  [out, optional] PVOID         OutputBuffer,&#10;  [in]            ULONG         OutputBufferLength,&#10;  [out, optional] PULONG        LengthReturned&#10;);">FltFsControlFile</a>.</p>

<p>File systems and filter drivers can retrieve, set, or delete a reparse point by using the <a href="fsctl_get_reparse_point" title="// CTL_CODE(0x0009, 0x02a, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_GET_REPARSE_POINT 0x000900A8">FSCTL_GET_REPARSE_POINT</a>, <a href="fsctl_set_reparse_point" title="// CTL_CODE(0x0009, 0x029, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_SET_REPARSE_POINT 0x000900A4">FSCTL_SET_REPARSE_POINT</a>, and <a href="fsctl_delete_reparse_point" title="// CTL_CODE(0x0009, 0x02b, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_DELETE_REPARSE_POINT 0x000900AC">FSCTL_DELETE_REPARSE_POINT</a> control codes. These codes can be sent to the file system by calling <strong><a href="ntfscontrolfile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtFsControlFile(&#10;    _In_ HANDLE FileHandle,&#10;    _In_opt_ HANDLE Event,&#10;    _In_opt_ PIO_APC_ROUTINE ApcRoutine,&#10;    _In_opt_ PVOID ApcContext,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_ ULONG FsControlCode,&#10;    _In_reads_bytes_opt_(InputBufferLength) PVOID InputBuffer,&#10;    _In_ ULONG InputBufferLength,&#10;    _Out_writes_bytes_opt_(OutputBufferLength) PVOID OutputBuffer,&#10;    _In_ ULONG OutputBufferLength&#10;    );">ZwFsControlFile</a></strong>.</p>

<p>For more information about reparse points and reparse point tags, see the Windows SDK documentation.</p>

<h2 id="see-also">See also</h2>

<p><a href="file_reparse_point_information" title="typedef struct _FILE_REPARSE_POINT_INFORMATION&#10;{&#10;    LONGLONG FileReference;&#10;    ULONG Tag;&#10;} FILE_REPARSE_POINT_INFORMATION, *PFILE_REPARSE_POINT_INFORMATION;">FILE_REPARSE_POINT_INFORMATION</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ifs/flt-parameters-for-irp-mj-file-system-control">FLT_PARAMETERS for IRP_MJ_FILE_SYSTEM_CONTROL</a></p>

<p><a href="fsctl_delete_reparse_point" title="// CTL_CODE(0x0009, 0x02b, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_DELETE_REPARSE_POINT 0x000900AC">FSCTL_DELETE_REPARSE_POINT</a></p>

<p><a href="fsctl_get_reparse_point" title="// CTL_CODE(0x0009, 0x02a, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_GET_REPARSE_POINT 0x000900A8">FSCTL_GET_REPARSE_POINT</a></p>

<p><a href="fsctl_set_reparse_point" title="// CTL_CODE(0x0009, 0x029, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_SET_REPARSE_POINT 0x000900A4">FSCTL_SET_REPARSE_POINT</a></p>

<p><a href="fltfscontrolfile" title="NTSTATUS FLTAPI FltFsControlFile(&#10;  [in]            PFLT_INSTANCE Instance,&#10;  [in]            PFILE_OBJECT  FileObject,&#10;  [in]            ULONG         FsControlCode,&#10;  [in, optional]  PVOID         InputBuffer,&#10;  [in]            ULONG         InputBufferLength,&#10;  [out, optional] PVOID         OutputBuffer,&#10;  [in]            ULONG         OutputBufferLength,&#10;  [out, optional] PULONG        LengthReturned&#10;);">FltFsControlFile</a></p>

<p><a href="flttagfile" title="NTSTATUS FLTAPI FltTagFile(&#10;  [in]           PFLT_INSTANCE InitiatingInstance,&#10;  [in]           PFILE_OBJECT  FileObject,&#10;  [in]           ULONG         FileTag,&#10;  [in, optional] GUID          *Guid,&#10;  [in]           PVOID         DataBuffer,&#10;  [in]           USHORT        DataBufferLength&#10;);">FltTagFile</a></p>

<p><a href="flttagfileex" title="NTSTATUS FLTAPI FltTagFileEx(&#10;  PFLT_INSTANCE InitiatingInstance,&#10;  PFILE_OBJECT  FileObject,&#10;  ULONG         FileTag,&#10;  GUID          *Guid,&#10;  PVOID         DataBuffer,&#10;  USHORT        DataBufferLength,&#10;  ULONG         ExistingFileTag,&#10;  GUID          *ExistingGuid,&#10;  ULONG         Flags&#10;);">FltTagFileEx</a></p>

<p><a href="fltuntagfile" title="NTSTATUS FLTAPI FltUntagFile(&#10;  [in]           PFLT_INSTANCE InitiatingInstance,&#10;  [in]           PFILE_OBJECT  FileObject,&#10;  [in]           ULONG         FileTag,&#10;  [in, optional] GUID          *Guid&#10;);">FltUntagFile</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/irp-mj-file-system-control">IRP_MJ_FILE_SYSTEM_CONTROL</a></p>

<p><a href="isreparsetagmicrosoft" title="void IsReparseTagMicrosoft(&#10;  [in] _tag&#10;);">IsReparseTagMicrosoft</a></p>

<p><a href="isreparsetagnamesurrogate" title="void IsReparseTagNameSurrogate(&#10;  [in] _tag&#10;);">IsReparseTagNameSurrogate</a></p>

<p><a href="reparse_data_buffer" title="typedef struct _REPARSE_DATA_BUFFER&#10;{&#10;    ULONG ReparseTag;&#10;    USHORT ReparseDataLength;&#10;    USHORT Reserved;&#10;&#10;    _Field_size_bytes_(ReparseDataLength)&#10;    union&#10;    {&#10;        struct&#10;        {&#10;            USHORT SubstituteNameOffset;&#10;            USHORT SubstituteNameLength;&#10;            USHORT PrintNameOffset;&#10;            USHORT PrintNameLength;&#10;            ULONG Flags;&#10;            WCHAR PathBuffer[1];&#10;        } SymbolicLinkReparseBuffer;&#10;        struct&#10;        {&#10;...">REPARSE_DATA_BUFFER</a></p>

<p><a href="reparse_data_buffer_ex" title="typedef struct _REPARSE_DATA_BUFFER_EX&#10;{&#10;    ULONG Flags;&#10;&#10;    //&#10;    //  This is the existing reparse tag on the file if any,  if the&#10;    //  caller wants to replace the reparse tag too.&#10;    //&#10;    //    - To set the reparse data  along with the reparse tag that&#10;    //      could be different,  pass the current reparse tag of the&#10;    //      file.&#10;    //&#10;    //    - To update the reparse data while having the same reparse&#10;    //      tag,  the caller should give the existing reparse tag in&#10;    //      this ExistingReparseTag field.&#10;    //&#10;    //    - To set the reparse tag along with reparse data on a file&#10;    //      that doesn&#x27;t have a reparse tag yet, set this to zero.&#10;    //&#10;    //  If the ExistingReparseTag  does not match the reparse tag on&#10;...">REPARSE_DATA_BUFFER_EX</a></p>

<p><strong><a href="ntfscontrolfile" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtFsControlFile(&#10;    _In_ HANDLE FileHandle,&#10;    _In_opt_ HANDLE Event,&#10;    _In_opt_ PIO_APC_ROUTINE ApcRoutine,&#10;    _In_opt_ PVOID ApcContext,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_ ULONG FsControlCode,&#10;    _In_reads_bytes_opt_(InputBufferLength) PVOID InputBuffer,&#10;    _In_ ULONG InputBufferLength,&#10;    _Out_writes_bytes_opt_(OutputBufferLength) PVOID OutputBuffer,&#10;    _In_ ULONG OutputBufferLength&#10;    );">ZwFsControlFile</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntifs/ns-ntifs-_reparse_guid_data_buffer">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntifs/ns-ntifs-_reparse_guid_data_buffer.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
