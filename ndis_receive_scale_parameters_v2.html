<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NDIS_RECEIVE_SCALE_PARAMETERS_V2 - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NDIS_RECEIVE_SCALE_PARAMETERS_V2 - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NDIS_RECEIVE_SCALE_PARAMETERS_V2 - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ntddndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _NDIS_RECEIVE_SCALE_PARAMETERS_V2 {
  <a href="ndis_object_header" title="typedef struct _NDIS_OBJECT_HEADER {&#10;  UCHAR  Type;&#10;  UCHAR  Revision;&#10;  USHORT Size;&#10;} NDIS_OBJECT_HEADER, *PNDIS_OBJECT_HEADER;">NDIS_OBJECT_HEADER</a> Header;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>              Flags;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>              HashInformation;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>              HashSecretKeySize;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>              HashSecretKeyOffset;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>              NumberOfQueues;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>              NumberOfIndirectionTableEntries;
} NDIS_RECEIVE_SCALE_PARAMETERS_V2, *PNDIS_RECEIVE_SCALE_PARAMETERS_V2;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddndis/ns-ntddndis-_ndis_receive_scale_parameters_v2">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndis_receive_scale_parameters_v2.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-ntddndis-_ndis_receive_scale_parameters_v2)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_ndis_receive_scale_parameters_v2-structure">_NDIS_RECEIVE_SCALE_PARAMETERS_V2 structure</h1>

<h2 id="description">Description</h2>

<blockquote>
  <p>[!WARNING]
  Some information in this topic relates to prereleased product, which may be substantially modified before it's commercially released. Microsoft makes no warranties, express or implied, with respect to the information provided here.</p>
  
  <p>RSSv2 is preview only in Windows 10, version 1803.</p>
</blockquote>

<p>The <strong>NDIS_RECEIVE_SCALE_PARAMETERS_V2</strong> structure specifies the Receive Side Scaling (RSS) parameters for a miniport adapter that advertises support for <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/receive-side-scaling-version-2-rssv2-">RSS Version 2 (RSSv2)</a>. It is used in the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-gen-receive-scale-parameters-v2">OID_GEN_RECEIVE_SCALE_PARAMETERS_V2</a> OID.</p>

<h2 id="members">Members</h2>

<h3 id="header"><code>Header</code></h3>

<p>The
<a rel="noopener" target="_blank" href="ndis_object_header">NDIS_OBJECT_HEADER</a> structure for the
<strong>NDIS_RECEIVE_SCALE_PARAMETERS_V2</strong> structure. Set the
<strong>Type</strong> member of the structure that
<strong>Header</strong> specifies to <strong>NDIS_OBJECT_TYPE_RSS_PARAMETERS_V2</strong>.</p>

<p>For NDIS 6.80 and later drivers, set the
<strong>Revision</strong> member to <strong>NDIS_RECEIVE_SCALE_PARAMETERS_V2_REVISION_1</strong> and the
<strong>Size</strong> member to <strong>sizeof(NDIS_RECEIVE_SCALE_PARAMETERS_V2)</strong>.</p>

<h3 id="flags"><code>Flags</code></h3>

<p>A <strong><a href="ulong" title="typedef unsigned long ULONG;">ULONG</a></strong> value that indicates which parameters are being changed. The driver can use these flags to quickly determine which parameters have changed and update the RSS settings accordingly.</p>

<p>In a query request, set this member to zero.</p>

<p>In a set request, the flags are defined as follows:</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>NDIS_RECEIVE_SCALE_PARAM_ENABLE_RSS</strong></td>
  <td>A value of <strong>1</strong> indicates that RSS is enabled for the specified object. The miniport driver needs to look at other parameters.<br><br>A value of <strong>0</strong> indicates that RSS is disabled for the specified object. The <strong>NumberOfQueues</strong> and <strong>NumberOfIndirectionTableEntries</strong> parameters can change when RSS is disabled. Other parameters like <strong>HashInformation</strong> and <strong>HashKey</strong> should be ignored when RSS is disabled.</td>
</tr>
<tr>
  <td><strong>NDIS_RECEIVE_SCALE_PARAM_HASH_INFO_CHANGED</strong></td>
  <td>The value of the <strong>HashInformation</strong> parameter has changed.</td>
</tr>
<tr>
  <td><strong>NDIS_RECEIVE_SCALE_PARAM_HASH_KEY_CHANGED</strong></td>
  <td>The contents of the <strong>HashSecretKey</strong> member have changed.</td>
</tr>
<tr>
  <td><strong>NDIS_RECEIVE_SCALE_PARAM_NUMBER_OF_QUEUES_CHANGED</strong></td>
  <td>The number of queues per VPort has changed.</td>
</tr>
<tr>
  <td><strong>NDIS_RECEIVE_SCALE_PARAM_NUMBER_OF_ENTRIES_CHANGED</strong></td>
  <td>The number of entries in the indirection table has changed.</td>
</tr>
</tbody>
</table>

<h3 id="hashinformation"><code>HashInformation</code></h3>

<p>In a set request, this member is the hash type and hash function that the NIC should use to compute the hash
values for the incoming packets. If the hash function that is specified within the
<strong>HashInformation</strong> member is zero, RSS is disabled.</p>

<p>In a query request, this member is the hash type and hash function that the NIC is using.</p>

<p>Overlying drivers and NDIS can use the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/ndis-rss-hash-info-from-type-and-func">NDIS_RSS_HASH_INFO_FROM_TYPE_AND_FUNC</a> macro to combine the hash type and hash function into hash
information and set the
<strong>HashInformation</strong> member.</p>

<p>Miniport drivers can use the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/ndis-rss-hash-info-from-type-and-func">NDIS_RSS_HASH_TYPE_FROM_HASH_INFO</a> macro to get the hash type from
<strong>HashInformation</strong> and the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/ndis-rss-hash-info-from-type-and-func">NDIS_RSS_HASH_FUNC_FROM_HASH_INFO</a> macro to get the hash function.</p>

<p>This parameter can be changed at the same time that RSS is enabled, or afterward.</p>

<h3 id="hashsecretkeysize"><code>HashSecretKeySize</code></h3>

<p>The size of the secret key array of the hash function, in bytes. The size of the array is 40 bytes for <strong>NdisHashFunctionToeplitz</strong>.</p>

<p>This parameter can be changed at the same time that RSS is enabled, or afterward.</p>

<h3 id="hashsecretkeyoffset"><code>HashSecretKeyOffset</code></h3>

<p>The offset, in bytes, of the hash secret key.</p>

<p>This parameter can be changed at the same time that RSS is enabled, or afterward.</p>

<h3 id="numberofqueues"><code>NumberOfQueues</code></h3>

<p>The maximum number of queues for the scaling entity. This parameter is an alias for the NUM_QUEUE_PAIRS variable of the <a rel="noopener" target="_blank" href="ndis_nic_switch_vport_parameters">NDIS_NIC_SWITCH_VPORT_PARAMETERS</a> structure, which can also be queried or set through the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-nic-switch-vport-parameters">OID_NIC_SWITCH_VPORT_PARAMETERS</a> OID. It can be changed when RSS is enabled or disabled.</p>

<h3 id="numberofindirectiontableentries"><code>NumberOfIndirectionTableEntries</code></h3>

<p>The number of indirection table entries (ITEs) for the scaling entity. This value is a power of two and does not exceed the corresponding adapter's capabilities. It can be changed at the before RSS is enabled, or afterward.</p>

<p>New values for this parameter are also a power of two and do exceed adapter capabilities. When this number is increased, the miniport driver should clone the current indirection table into the new ITEs as many times as needed (this is possible because of the power-of-two restriction). When this number is decreased, the upper layer guarantees that the portion of the indirection table which is being removed contains exact replicas of the remaining portion.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="ndis_nic_switch_vport_parameters">NDIS_NIC_SWITCH_VPORT_PARAMETERS</a></p>

<p><a rel="noopener" target="_blank" href="ndis_object_header">NDIS_OBJECT_HEADER</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/ndis-rss-hash-info-from-type-and-func">NDIS_RSS_HASH_FUNC_FROM_HASH_INFO</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/ndis-rss-hash-info-from-type-and-func">NDIS_RSS_HASH_INFO_FROM_TYPE_AND_FUNC</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/ndis-rss-hash-info-from-type-and-func">NDIS_RSS_HASH_TYPE_FROM_HASH_INFO</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-gen-receive-scale-parameters-v2">OID_GEN_RECEIVE_SCALE_PARAMETERS_V2</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-nic-switch-vport-parameters">OID_NIC_SWITCH_VPORT_PARAMETERS</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/receive-side-scaling-version-2-rssv2-">RSS Version 2 (RSSv2)</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ntddndis/ns-ntddndis-_ndis_receive_scale_parameters_v2">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ntddndis/ns-ntddndis-_ndis_receive_scale_parameters_v2.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
