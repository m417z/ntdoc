<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="PFND3D10DDI_QUERYGETDATA - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>PFND3D10DDI_QUERYGETDATA - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            PFND3D10DDI_QUERYGETDATA - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3d10umddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">PFND3D10DDI_QUERYGETDATA Pfnd3d10ddiQuerygetdata;

VOID Pfnd3d10ddiQuerygetdata(
  D3D10DDI_HDEVICE unnamedParam1,
  D3D10DDI_HQUERY unnamedParam2,
  VOID *unnamedParam3,
  <a href="uint" title="typedef unsigned int UINT;">UINT</a> DataSize,
  <a href="uint" title="typedef unsigned int UINT;">UINT</a> unnamedParam5
)
{...}</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_querygetdata">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/pfnd3d10ddi_querygetdata.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nc-d3d10umddi-pfnd3d10ddi_querygetdata)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="pfnd3d10ddi_querygetdata-callback-function">PFND3D10DDI_QUERYGETDATA callback function</h1>

<h2 id="description">Description</h2>

<p>The <strong>QueryGetData</strong> function polls for the state of a query operation.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="unnamedparam1"><code>unnamedParam1</code></h3>

<p><em>hDevice</em> [in]: A handle to the display device (graphics context).</p>

<h3 id="unnamedparam2"><code>unnamedParam2</code></h3>

<p><em>hQuery</em> [in]: A handle to the query object to poll.</p>

<h3 id="unnamedparam3"><code>unnamedParam3</code></h3>

<p><em>pData</em> [out]: A pointer to a region of memory that receives the data from a query operation. The user-mode display driver can set <strong>pData</strong> to NULL and set the <strong>DataSize</strong> parameter to zero. If <strong>pData</strong> is NULL, <strong>QueryGetData</strong> can indicate the state of the query operation (for example, whether the query operation is finished).</p>

<h3 id="datasize"><code>DataSize</code></h3>

<p>[out] The size, in bytes, of the query data that the <strong>pData</strong> parameter points to. The user-mode display driver can set <strong>DataSize</strong> to zero and set <strong>pData</strong> to NULL. If <strong>DataSize</strong> is zero, <strong>QueryGetData</strong> can indicate the state of the query operation (for example, through return codes).</p>

<h3 id="unnamedparam5"><code>unnamedParam5</code></h3>

<p><em>Flags</em> [in]: D3D10_DDI_GET_DATA_FLAG flags.</p>

<h2 id="remarks">Remarks</h2>

<p>The driver can use the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_seterror_cb"><strong>pfnSetErrorCb</strong></a> callback function to set an error code.</p>

<p>After the Microsoft Direct3D runtime calls the user-mode display driver's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_queryend"><strong>QueryEnd</strong></a> function to transition a query operation to the "issued" state, the runtime can call <strong>QueryGetData</strong> to determine if the query operation is still in the "issued" state (DXGI_DDI_ERR_WASSTILLDRAWING) or has transitioned to the "signaled" state (S_OK). If the query operation is in the "signaled" state, <strong>QueryGetData</strong> can return the query data in the <strong>pData</strong> parameter; otherwise, <strong>pData</strong> is unchanged. The driver can call <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_seterror_cb"><strong>pfnSetErrorCb</strong></a> to indicate the state of the query operation.</p>

<p>The runtime cannot call <strong>QueryGetData</strong> with a predicate that was created with D3D10_QUERY_MISCFLAG_PREDICATEHINT through a call to the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_setpredication"><strong>SetPredication</strong></a> function.</p>

<p>If a query operation handles work that still resides in partial command buffers, by default, the driver should terminate and submit the partial command buffers. However, the driver should not terminate and submit the buffers if the runtime specified the D3D10_DDI_GET_DATA_DO_NOT_FLUSH flag in the <strong>Flags</strong> parameter. If the runtime passed the D3D10_DDI_GET_DATA_DO_NOT_FLUSH flag in the <strong>Flags</strong> parameter and if the query operation handles work that still resides in partial command buffers, the driver can call <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_seterror_cb"><strong>pfnSetErrorCb</strong></a> to set only the DXGI_DDI_ERR_WASSTILLDRAWING error code.</p>

<p>When the runtime calls <strong>QueryGetData</strong> to check for query completion, the driver can pass DXGI_DDI_ERR_WASSTILLDRAWING in a call to <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_seterror_cb"><strong>pfnSetErrorCb</strong></a> to indicate that the query is not finished yet. The driver can also pass D3DDDIERR_DEVICEREMOVED in a call to <strong>pfnSetErrorCb</strong>. The Direct3D runtime will determine that any other errors are critical.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_checkcounter"><strong>CheckCounter</strong></a></p>

<p><strong><a href="d3d10ddi_devicefuncs" title="typedef struct D3D10DDI_DEVICEFUNCS {&#10;  PFND3D10DDI_RESOURCEUPDATESUBRESOURCEUP               pfnDefaultConstantBufferUpdateSubresourceUP;&#10;  PFND3D10DDI_SETCONSTANTBUFFERS                        pfnVsSetConstantBuffers;&#10;  PFND3D10DDI_SETSHADERRESOURCES                        pfnPsSetShaderResources;&#10;  PFND3D10DDI_SETSHADER                                 pfnPsSetShader;&#10;  PFND3D10DDI_SETSAMPLERS                               pfnPsSetSamplers;&#10;  PFND3D10DDI_SETSHADER                                 pfnVsSetShader;&#10;  PFND3D10DDI_DRAWINDEXED                               pfnDrawIndexed;&#10;  PFND3D10DDI_DRAW                                      pfnDraw;&#10;  PFND3D10DDI_RESOURCEMAP                               pfnDynamicIABufferMapNoOverwrite;&#10;  PFND3D10DDI_RESOURCEUNMAP                             pfnDynamicIABufferUnmap;&#10;  PFND3D10DDI_RESOURCEMAP                               pfnDynamicConstantBufferMapDiscard;&#10;  PFND3D10DDI_RESOURCEMAP                               pfnDynamicIABufferMapDiscard;&#10;  PFND3D10DDI_RESOURCEUNMAP                             pfnDynamicConstantBufferUnmap;&#10;  PFND3D10DDI_SETCONSTANTBUFFERS                        pfnPsSetConstantBuffers;&#10;  PFND3D10DDI_SETINPUTLAYOUT                            pfnIaSetInputLayout;&#10;  PFND3D10DDI_IA_SETVERTEXBUFFERS                       pfnIaSetVertexBuffers;&#10;  PFND3D10DDI_IA_SETINDEXBUFFER                         pfnIaSetIndexBuffer;&#10;  PFND3D10DDI_DRAWINDEXEDINSTANCED                      pfnDrawIndexedInstanced;&#10;  PFND3D10DDI_DRAWINSTANCED                             pfnDrawInstanced;&#10;...">D3D10DDI_DEVICEFUNCS</a></strong></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_queryend"><strong>QueryEnd</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_setpredication"><strong>SetPredication</strong></a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_seterror_cb"><strong>pfnSetErrorCb</strong></a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_querygetdata">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3d10umddi/nc-d3d10umddi-pfnd3d10ddi_querygetdata.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
