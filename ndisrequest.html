<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NdisRequest - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NdisRequest - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NdisRequest - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// ndis.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">VOID NdisRequest(
  [out] PNDIS_STATUS  Status,
  [in]  NDIS_HANDLE   NdisBindingHandle,
  [in]  PNDIS_REQUEST NdisRequest
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisrequest">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndisrequest.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ndis-ndisrequest)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="ndisrequest-function">NdisRequest function</h1>

<h2 id="description">Description</h2>

<p><strong>Note</strong> NDIS 5. <em>x</em> has been deprecated and is superseded by NDIS 6. <em>x</em>. For new NDIS driver development, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/_netvista/">Network Drivers Starting with Windows Vista</a>. For information about porting NDIS 5. <em>x</em> drivers to NDIS 6. <em>x</em>, see <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/Ff570059">Porting NDIS 5.x Drivers to NDIS 6.0</a>.</p>

<p><strong>NdisRequest</strong> forwards a request to the underlying driver that it query the capabilities or status of its NIC or that it set the state of its NIC.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="status-out"><code>Status</code> [out]</h3>

<p>Pointer to a caller-supplied variable that is set on return from this function. The underlying driver determines which NDIS_STATUS_<em>XXX</em> is returned, but it is usually one of the following values:</p>

<ul>
<li><p>NDIS_STATUS_SUCCESS
The requested operation completed successfully.</p></li>
<li><p>NDIS_STATUS_PENDING
The request is being handled asynchronously, and the caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563254/(v=vs.85/)"><strong>ProtocolRequestComplete</strong></a> function will be called when it is completed.</p></li>
<li><p>NDIS_STATUS_INVALID_OID
The OID_<em>XXX</em> code specified in the <strong>Oid</strong> member of the NDIS_REQUEST-structured buffer at <em>NdisRequest</em> is invalid or unsupported by the underlying driver.</p></li>
<li><p>NDIS_STATUS_INVALID_LENGTH or NDIS_STATUS_BUFFER_TOO_SHORT
The value specified in the <strong>InformationBufferLength</strong> member of the NDIS_REQUEST-structured buffer at <em>NdisRequest</em> does not match the requirements for the given OID_<em>XXX</em> code. If the information buffer is too small, the <strong>BytesNeeded</strong> member contains the correct value for <strong>InformationBufferLength</strong> on return from <strong>NdisRequest</strong>.</p></li>
<li><p>NDIS_STATUS_INVALID_DATA
The data supplied at <strong>InformationBuffer</strong> in the given <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff557179/(v=vs.85/)"><strong>NDIS_REQUEST</strong></a> structure is invalid for the given OID_<em>XXX</em> code.</p></li>
<li><p>NDIS_STATUS_NOT_SUPPORTED or NDIS_STATUS_NOT_RECOGNIZED
The underlying driver does not support the requested operation.</p></li>
<li><p>NDIS_STATUS_RESOURCES
The request could not be satisfied due to a resource shortage. Usually, this return indicates that an attempt to allocate memory was unsuccessful, but it does not necessarily indicate that the same request, submitted later, will be failed for the same reason.</p></li>
<li><p>NDIS_STATUS_NOT_ACCEPTED
The underlying driver attempted the requested operation, usually a set, on its NIC but it was failed by the netcard. For example, an attempt to set too many multicast addresses might cause the return of this value.</p></li>
<li><p>NDIS_STATUS_CLOSING or NDIS_STATUS_CLOSING_INDICATING
The underlying driver failed the requested operation because a close is in progress.</p></li>
<li><p>NDIS_STATUS_RESET_IN_PROGRESS
The underlying NIC driver cannot satisfy the request at this time because it is currently resetting the netcard. The caller's <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563257/(v=vs.85/)"><strong>ProtocolStatus</strong></a> function was or will be called with NDIS_STATUS_RESET_START to indicate that a reset is in progress. This return value does not necessarily indicate that the same request, submitted later, will be failed for the same reason.</p></li>
<li><p>NDIS_STATUS_FAILURE
This value usually is a nonspecific default, returned when none of the more specific NDIS_STATUS_<em>XXX</em> caused the underlying driver to fail the request.</p></li>
</ul>

<h3 id="ndisbindinghandle-in"><code>NdisBindingHandle</code> [in]</h3>

<p>Specifies the handle returned by <strong><a href="ndisopenadapter" title="VOID NdisOpenAdapter(&#10;  [out]          PNDIS_STATUS Status,&#10;  [out]          PNDIS_STATUS OpenErrorStatus,&#10;  [out]          PNDIS_HANDLE NdisBindingHandle,&#10;  [out]          PUINT        SelectedMediumIndex,&#10;  [in]           PNDIS_MEDIUM MediumArray,&#10;  [in]           UINT         MediumArraySize,&#10;  [in]           NDIS_HANDLE  NdisProtocolHandle,&#10;  [in]           NDIS_HANDLE  ProtocolBindingContext,&#10;  [in]           PNDIS_STRING AdapterName,&#10;  [in]           UINT         OpenOptions,&#10;  [in, optional] PSTRING      AddressingInformation&#10;);">NdisOpenAdapter</a></strong> that identifies the target NIC or the virtual adapter of the next-lower driver to which the caller is bound.</p>

<h3 id="ndisrequest-in"><code>NdisRequest</code> [in]</h3>

<p>Pointer to a buffered structure specifying the operation requested with a given OID_ XXX code for either a query or a set.</p>

<h2 id="remarks">Remarks</h2>

<p>A protocol driver must allocate sufficient memory for the information buffer associated with the OID_<em>XXX</em> of the operation it will request. The driver also must allocate and set up the buffer at <em>NdisRequest</em> before it calls <strong>NdisRequest</strong>. Both buffers must be allocated from nonpaged pool because the underlying driver runs at raised IRQL while processing the request.</p>

<p>For callers layered above an intermediate NDIS driver, <strong>NdisRequest</strong> forwards a request to the next-lower driver that it return information about its own capabilities or directs that driver to handle specific functionality in a caller-determined manner. If the next-lower driver is an NDIS intermediate driver, it can call <strong>NdisRequest</strong> with an OID-specific request of its own before completing the request originally submitted by the higher-level protocol.</p>

<p>Some errors returned at <em>Status</em> are recoverable, including the following:</p>

<p>NDIS_STATUS_INVALID_OID</p>

<p>NDIS_STATUS_INVALID_LENGTH</p>

<p>NDIS_STATUS_BUFFER_TOO_SHORT</p>

<p>NDIS_STATUS_INVALID_DATA</p>

<p>NDIS_STATUS_RESOURCES</p>

<p>NDIS_STATUS_RESET_IN_PROGRESS</p>

<p>That is, a driver can modify the packet at <em>NdisRequest</em> appropriately to correct the OID_<em>XXX</em> code and/or the size or contents of the buffer at <strong>InformationBuffer</strong> and resubmit the request packet to <strong>NdisRequest</strong>. The same packet might be satisfied on resubmission to <strong>NdisRequest</strong> if the original call indicated a reset in progress or that a resource shortage, which might be temporary, prevented that request from being carried out.</p>

<p>The NDIS library maintains bindings for underlying miniport drivers. NDIS can return information for binding-specific queries if a given OID is associated with a system-defined medium type for which the system provides a filter library.</p>

<p>For more information about the general and media-specific OIDs and their respective associated information buffers, see <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff557081/(v=vs.85/)">NDIS Object Identifiers</a>.</p>

<ul>
<li>Target platform: <a rel="noopener" target="_blank" href="https://go.microsoft.com/fwlink/p/?linkid=531356">Universal</a></li>
<li>Version: Not supported for NDIS 6.0 drivers in Windows Vista. Use <a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/Ff563710"><strong>NdisOidRequest</strong></a>instead. Supported for NDIS 5.1 drivers in Windows Vista and Windows XP.</li>
</ul>

<h2 id="see-also">See also</h2>

<ul>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff550490/(v=vs.85/)"><strong>MiniportQueryInformation</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff550530/(v=vs.85/)"><strong>MiniportSetInformation</strong></a></li>
<li><strong><a href="ndisopenadapter" title="VOID NdisOpenAdapter(&#10;  [out]          PNDIS_STATUS Status,&#10;  [out]          PNDIS_STATUS OpenErrorStatus,&#10;  [out]          PNDIS_HANDLE NdisBindingHandle,&#10;  [out]          PUINT        SelectedMediumIndex,&#10;  [in]           PNDIS_MEDIUM MediumArray,&#10;  [in]           UINT         MediumArraySize,&#10;  [in]           NDIS_HANDLE  NdisProtocolHandle,&#10;  [in]           NDIS_HANDLE  ProtocolBindingContext,&#10;  [in]           PNDIS_STRING AdapterName,&#10;  [in]           UINT         OpenOptions,&#10;  [in, optional] PSTRING      AddressingInformation&#10;);">NdisOpenAdapter</a></strong></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff557179/(v=vs.85/)"><strong>NDIS_REQUEST</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563254/(v=vs.85/)"><strong>ProtocolRequestComplete</strong></a></li>
<li><a rel="noopener" target="_blank" href="https://msdn.microsoft.com/library/ff563257/(v=vs.85/)"><strong>ProtocolStatus</strong></a></li>
</ul>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisrequest">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ndis/nf-ndis-ndisrequest.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
