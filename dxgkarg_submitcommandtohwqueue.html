<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="DXGKARG_SUBMITCOMMANDTOHWQUEUE - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DXGKARG_SUBMITCOMMANDTOHWQUEUE - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            DXGKARG_SUBMITCOMMANDTOHWQUEUE - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3dkmddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _DXGKARG_SUBMITCOMMANDTOHWQUEUE {
  [in] HANDLE                  hHwQueue;
       <a href="uint64" title="typedef unsigned __int64 UINT64;">UINT64</a>                  HwQueueProgressFenceId;
       D3DGPU_VIRTUAL_ADDRESS  DmaBufferVirtualAddress;
       <a href="uint" title="typedef unsigned int UINT;">UINT</a>                    DmaBufferSize;
       <a href="uint" title="typedef unsigned int UINT;">UINT</a>                    DmaBufferPrivateDataSize;
       VOID                    *pDmaBufferPrivateData;
       <a href="dxgk_submitcommandflags" title="typedef struct _DXGK_SUBMITCOMMANDFLAGS {&#10;  union {&#10;    struct {&#10;      UINT Paging : 1;&#10;      UINT Present : 1;&#10;      UINT RedirectedPresent : 1;&#10;      UINT NullRendering : 1;&#10;      UINT Flip : 1;&#10;      UINT FlipWithNoWait : 1;&#10;      UINT ContextSwitch : 1;&#10;      UINT Resubmission : 1;&#10;      UINT VirtualMachineData : 1;&#10;#if ...&#10;      UINT Reserved : 23;&#10;#elif&#10;      UINT Reserved : 24;&#10;#elif&#10;      UINT Reserved : 25;&#10;#else&#10;      UINT Reserved : 26;&#10;...">DXGK_SUBMITCOMMANDFLAGS</a> Flags;
       D3DGPU_VIRTUAL_ADDRESS  HwQueueProgressFenceGpuVa;
       VOID                    *HwQueueProgressFenceCpuVa;
} DXGKARG_SUBMITCOMMANDTOHWQUEUE;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/ns-d3dkmddi-_dxgkarg_submitcommandtohwqueue">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/dxgkarg_submitcommandtohwqueue.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-d3dkmddi-_dxgkarg_submitcommandtohwqueue)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_dxgkarg_submitcommandtohwqueue-structure">_DXGKARG_SUBMITCOMMANDTOHWQUEUE structure</h1>

<h2 id="description">Description</h2>

<p>Arguments used to submit a command to the hardware queue.</p>

<h2 id="members">Members</h2>

<h3 id="hhwqueue-in"><code>hHwQueue</code> [in]</h3>

<p>Hardware queue being submitted to.</p>

<h3 id="hwqueueprogressfenceid"><code>HwQueueProgressFenceId</code></h3>

<p>Hardware queue progress fence ID that will be signaled when the Present Blt is done on the GPU.</p>

<h3 id="dmabuffervirtualaddress"><code>DmaBufferVirtualAddress</code></h3>

<p>The virtual address of the DMA buffer to be executed on the GPU.</p>

<h3 id="dmabuffersize"><code>DmaBufferSize</code></h3>

<p>The size of the DMA buffer to be executed on the GPU.</p>

<h3 id="dmabufferprivatedatasize"><code>DmaBufferPrivateDataSize</code></h3>

<p>The buffer's private data size.</p>

<h3 id="pdmabufferprivatedata"><code>pDmaBufferPrivateData</code></h3>

<p>Binary data that is passed by the user mode DDI callback pfnSubmitToHwQueueCb, for command submissions from user mode, or for kernel mode submissions such as Present Blt, private driver data buffer filled out by DdiPresent.</p>

<blockquote>
  <p>[!Important]
  The private driver data buffer will be freed upon the return from DxgkDdiSubmitCommandToHwQueue. This is different from WDDM 2.0-2.3, where the private driver data lifetime is extended until the command buffer completion on the GPU.</p>
</blockquote>

<h3 id="flags"><code>Flags</code></h3>

<p>These will be set to zero for user mode driver generated command buffers. Kernel mode driver DdiPresentToHwQueue generated command buffers will have Present flag set to 1.</p>

<h3 id="hwqueueprogressfencegpuva"><code>HwQueueProgressFenceGpuVa</code></h3>

<p>GPU VA (video acceleration) of the fence that will be signaled upon this DMA buffer completion.</p>

<h3 id="hwqueueprogressfencecpuva"><code>HwQueueProgressFenceCpuVa</code></h3>

<p>Kernel mode CPU VA of the fence that will be signaled upon this DMA buffer completion.</p>

<p>If the node being submitted to has <em>RingBufferFenceRelease</em> cap set to 0, the fence update is inserted by the user mode driver as the last instruction at the end of the DMA buffer, or for kernel submissions, by the kernel mode driver in response to DdiSignalMonitoredFence call.</p>

<p>If the node being submitted to has <em>RingBufferFenceRelease</em> cap set to 1, the fence update is performed after the DMA buffer is no longer in use by either GPU or CPU. Exact mechanics of the fence update are up to the KMD/GPU. As an example, it can be done by the context management processor hardware when retiring the DMA buffer, or by the KMD.</p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dkmddi/ns-d3dkmddi-_dxgkarg_submitcommandtohwqueue">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3dkmddi/ns-d3dkmddi-_dxgkarg_submitcommandtohwqueue.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
