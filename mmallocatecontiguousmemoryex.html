<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="MmAllocateContiguousMemoryEx - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>MmAllocateContiguousMemoryEx - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            MmAllocateContiguousMemoryEx - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> MmAllocateContiguousMemoryEx(
  [in]           PSIZE_T          NumberOfBytes,
  [in]           <a href="physical_address" title="typedef LARGE_INTEGER PHYSICAL_ADDRESS, *PPHYSICAL_ADDRESS;">PHYSICAL_ADDRESS</a> LowestAcceptableAddress,
  [in]           <a href="physical_address" title="typedef LARGE_INTEGER PHYSICAL_ADDRESS, *PPHYSICAL_ADDRESS;">PHYSICAL_ADDRESS</a> HighestAcceptableAddress,
  [in]           <a href="physical_address" title="typedef LARGE_INTEGER PHYSICAL_ADDRESS, *PPHYSICAL_ADDRESS;">PHYSICAL_ADDRESS</a> BoundaryAddressMultiple,
  [in]           NODE_REQUIREMENT PreferredNode,
  [in]           <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>            Protect,
  [in, optional] PVOID            PartitionObject,
  [in]           <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>            Tag,
  [in]           <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>            Flags,
  [out]          PVOID            *BaseAddress
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-mmallocatecontiguousmemoryex">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/mmallocatecontiguousmemoryex.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-wdm-mmallocatecontiguousmemoryex)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>MmAllocateContiguousMemoryEx</strong> function allocates a range of physically contiguous non-paged memory and returns its virtual address.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="numberofbytes-in"><code>NumberOfBytes</code> [in]</h3>

<p>On entry, supplies the number of bytes to allocate. On successful return, receives the amount allocated.</p>

<h3 id="lowestacceptableaddress-in"><code>LowestAcceptableAddress</code> [in]</h3>

<p>Supplies the lowest physical address which is valid for the allocation. For example, if the device can only reference physical memory in the 8M to 16MB range, this value would be set to 0x800000 (8Mb).</p>

<h3 id="highestacceptableaddress-in"><code>HighestAcceptableAddress</code> [in]</h3>

<p>Supplies the highest physical address which is valid for the allocation. For example, if the device can only reference physical memory below 16MB, this value would be set to 0xFFFFFF (16Mb - 1).</p>

<h3 id="boundaryaddressmultiple-in"><code>BoundaryAddressMultiple</code> [in]</h3>

<p>Supplies the physical address multiple this allocation must not cross.</p>

<h3 id="preferrednode-in"><code>PreferredNode</code> [in]</h3>

<p>Supplies the preferred node the allocation should be made from if pages are available on that node. MM_ANY_NODE_OK is used to signify no node preference.</p>

<h3 id="protect-in"><code>Protect</code> [in]</h3>

<p>Supplies the desired protection (including cache type) for the mapping.</p>

<h3 id="partitionobject-in-optional"><code>PartitionObject</code> [in, optional]</h3>

<p>If specified, supplies a partition object to allocate the physical memory from. If not specified, the memory will come from the system partition.</p>

<h3 id="tag-in"><code>Tag</code> [in]</h3>

<p>Supplies the tag for the allocation.</p>

<h3 id="flags-in"><code>Flags</code> [in]</h3>

<p>Various flags:</p>

<ul>
<li><strong>MM_ALLOCATE_CONTIGUOUS_MEMORY_FAST_ONLY</strong> - Allocate desired contiguous memory only if it can be satisfied quickly. Fail if prolonged physical memory searching and trading must take place to satisfy the allocation.</li>
</ul>

<h3 id="baseaddress-out"><code>BaseAddress</code> [out]</h3>

<p>On success, receives the base virtual address of the contiguous memory.</p>

<h2 id="return-value">Return value</h2>

<p>Returns an <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> code.</p>

<h2 id="remarks">Remarks</h2>

<p>This memory must be freed with <strong><a href="mmfreecontiguousmemory" title="VOID MmFreeContiguousMemory(&#10;  [in] PVOID BaseAddress&#10;);">MmFreeContiguousMemory</a></strong>.</p>

<h2 id="see-also">See also</h2>

<p><a href="mmfreecontiguousmemory" title="VOID MmFreeContiguousMemory(&#10;  [in] PVOID BaseAddress&#10;);">MmFreeContiguousMemory</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-mmallocatecontiguousmemoryex">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/nf-wdm-mmallocatecontiguousmemoryex.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
