<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="VideoPortLockPages - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>VideoPortLockPages - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            VideoPortLockPages - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// video.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">VIDEOPORT_DEPRECATED VIDEOPORT_API BOOLEAN VideoPortLockPages(
  [in]      IN PVOID                     HwDeviceExtension,
  [in, out] IN OUT <a href="video_request_packet" title="typedef struct _VIDEO_REQUEST_PACKET {&#10;  ULONG         IoControlCode;&#10;  PSTATUS_BLOCK StatusBlock;&#10;  PVOID         InputBuffer;&#10;  ULONG         InputBufferLength;&#10;  PVOID         OutputBuffer;&#10;  ULONG         OutputBufferLength;&#10;} VIDEO_REQUEST_PACKET, *PVIDEO_REQUEST_PACKET;">PVIDEO_REQUEST_PACKET</a> pVrp,
  [in]      IN <a href="pevent" title="typedef struct _ENG_EVENT {&#10;  PVOID pKEvent;&#10;  ULONG fFlags;&#10;} *PEVENT, ENG_EVENT, *PENG_EVENT;">PEVENT</a>                    pUEvent,
  [in]      IN <a href="pevent" title="typedef struct _ENG_EVENT {&#10;  PVOID pKEvent;&#10;  ULONG fFlags;&#10;} *PEVENT, ENG_EVENT, *PENG_EVENT;">PEVENT</a>                    pDisplayEvent,
  [in]      IN <a href="dma_flags" title="typedef enum {&#10;  VideoPortUnlockAfterDma,&#10;  VideoPortKeepPagesLocked,&#10;  VideoPortDmaInitOnly&#10;} DMA_FLAGS;">DMA_FLAGS</a>                 DmaFlags
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/nf-video-videoportlockpages">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/videoportlockpages.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-video-videoportlockpages)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>VideoPortLockPages function</h1>

<h2>Description</h2>

<p>The <strong>VideoPortLockPages</strong> function is <strong>obsolete</strong> in Windows 2000 and later. Use <a href="videoportlockbuffer" title="VIDEOPORT_DEPRECATED VIDEOPORT_API PVOID VideoPortLockBuffer(&#10;  [in] IN PVOID             HwDeviceExtension,&#10;  [in] IN PVOID             BaseAddress,&#10;  [in] IN ULONG             Length,&#10;  [in] IN VP_LOCK_OPERATION Operation&#10;);">VideoPortLockBuffer</a> in place of this function.</p>

<p><strong>VideoPortLockPages</strong> locks the specified virtual memory and possibly performs part or all of a DMA transfer.</p>

<h2>Parameters</h2>

<h3><code>HwDeviceExtension</code> [in]</h3>

<p>Pointer to the miniport driver's device extension.</p>

<h3><code>pVrp</code> [in, out]</h3>

<p>Pointer to a <a href="video_request_packet" title="typedef struct _VIDEO_REQUEST_PACKET {&#10;  ULONG         IoControlCode;&#10;  PSTATUS_BLOCK StatusBlock;&#10;  PVOID         InputBuffer;&#10;  ULONG         InputBufferLength;&#10;  PVOID         OutputBuffer;&#10;  ULONG         OutputBufferLength;&#10;} VIDEO_REQUEST_PACKET, *PVIDEO_REQUEST_PACKET;">VIDEO_REQUEST_PACKET</a> structure. The miniport driver must have set <strong>InputBuffer</strong> and <strong>InputBufferLength</strong> to contain the virtual address and the size in bytes, respectively, of the memory to be locked for the transfer. This memory was allocated by the display driver and passed to the miniport driver through an IOCTL. The video port returns a pointer to and the size in bytes of the scatter/gather list in <strong>OutputBuffer</strong> and <strong>OutputBufferLength</strong>, respectively.</p>

<h3><code>pUEvent</code> [in]</h3>

<p>Pointer to a mapped user event that is to be set by the miniport driver, or <strong>NULL</strong>. The user event was mapped by the display driver and passed to the miniport driver through an IOCTL.</p>

<h3><code>pDisplayEvent</code> [in]</h3>

<p>Pointer to an event that is to be set by the miniport driver, or <strong>NULL</strong>. This event was created by and received from the display driver through an IOCTL.</p>

<h3><code>DmaFlags</code> [in]</h3>

<p>Specifies the action to be performed. This parameter must be one of the following values:</p>

<table>
<thead>
<tr>
  <th>Value</th>
  <th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
  <td>VideoPortDmaInitOnly</td>
  <td>VideoPortLockPages locks the requested memory.</td>
</tr>
<tr>
  <td>VideoPortKeepPagesLocked</td>
  <td>VideoPortLockPages takes no action.</td>
</tr>
<tr>
  <td>VideoPortUnlockAfterDma</td>
  <td>VideoPortLockPages takes no action.</td>
</tr>
</tbody>
</table>

<h2>Return value</h2>

<p><strong>VideoPortLockPages</strong> returns <strong>TRUE</strong> upon successful completion of the action requested of it. It returns <strong>FALSE</strong> if the <em>DmaFlags</em> parameter is not equal to <strong>VideoPortDmaInitOnly</strong>.</p>

<h2>Remarks</h2>

<p>See <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/display/bus-master-dma-in-video-miniport-drivers">Bus-Master DMA in Video Miniport Drivers</a> for information about packet-based and common-buffer DMA transfers.</p>

<p><strong>VideoPortLockPages</strong> cannot be called from an ISR or DPC.</p>

<h2>See also</h2>

<p><a href="videoportlockbuffer" title="VIDEOPORT_DEPRECATED VIDEOPORT_API PVOID VideoPortLockBuffer(&#10;  [in] IN PVOID             HwDeviceExtension,&#10;  [in] IN PVOID             BaseAddress,&#10;  [in] IN ULONG             Length,&#10;  [in] IN VP_LOCK_OPERATION Operation&#10;);">VideoPortLockBuffer</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/video/nf-video-videoportlockpages">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/video/nf-video-videoportlockpages.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
