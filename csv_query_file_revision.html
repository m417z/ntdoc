<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="CSV_QUERY_FILE_REVISION - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>CSV_QUERY_FILE_REVISION - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            CSV_QUERY_FILE_REVISION - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// winioctl.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _CSV_QUERY_FILE_REVISION {
  <a href="longlong" title="typedef __int64 LONGLONG;">LONGLONG</a> FileId;
  <a href="longlong" title="typedef __int64 LONGLONG;">LONGLONG</a> FileRevision[3];
} CSV_QUERY_FILE_REVISION, *PCSV_QUERY_FILE_REVISION;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ns-winioctl-csv_query_file_revision">View the official Win32 API reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/csv_query_file_revision.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Win32 API reference (ns-winioctl-csv_query_file_revision)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>CSV_QUERY_FILE_REVISION structure</h1>
<h2>Description</h2>
<p>Contains information about whether files in a stream have been modified.</p>
<h2>Members</h2>
<h3><code>FileId</code></h3>
<p>The identifier of an NTFS file.</p>
<h3><code>FileRevision</code></h3>
<p>File revision tracking elements.</p>
<ul>
<li><strong>FileRevision</strong>[0] increases every time the CSV MDS stack is rebuilt and CSVFLT
loses its state.</li>
<li><strong>FileRevision</strong>[1] increases every time the CSV MDS stack purges the cached
revision number for the file.</li>
<li><strong>FileRevision</strong>[2] increases every time the CSV MDS observes that file sizes
might have changed or the file might have been written to. The element is also incremented whenever one of the
nodes performs the first direct input/output operation on a stream that is associated with this file after
opening this stream.</li>
</ul>
<p>If any of the numbers are 0, the function caller should assume that the file was modified.</p>
<h2>Remarks</h2>
<p>This structure is used if the <a href="fsctl_csv_control" title="// CTL_CODE(0x0009, 0x0b5, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_CSV_CONTROL 0x000902D4">FSCTL_CSV_CONTROL</a>
control code is called with a <a href="csv_control_op" title="typedef enum _CSV_CONTROL_OP {&#10;  CsvControlStartRedirectFile = 0x02,&#10;  CsvControlStopRedirectFile = 0x03,&#10;  CsvControlQueryRedirectState = 0x04,&#10;  CsvControlQueryFileRevision = 0x06,&#10;  CsvControlQueryMdsPath = 0x08,&#10;  CsvControlQueryFileRevisionFileId128 = 0x09,&#10;  CsvControlQueryVolumeRedirectState = 0x0a,&#10;  CsvControlEnableUSNRangeModificationTracking = 0x0d,&#10;  CsvControlMarkHandleLocalVolumeMount = 0x0e,&#10;  CsvControlUnmarkHandleLocalVolumeMount = 0x0f,&#10;  CsvControlGetCsvFsMdsPathV2 = 0x12,&#10;  CsvControlDisableCaching = 0x13,&#10;  CsvControlEnableCaching = 0x14,&#10;  CsvControlStartForceDFO = 0x15,&#10;  CsvControlStopForceDFO = 0x16,&#10;  CsvControlQueryMdsPathNoPause = 0x17,&#10;  CsvControlSetVolumeId = 0x18,&#10;  CsvControlQueryVolumeId = 0x19&#10;} CSV_CONTROL_OP, *PCSV_CONTROL_OP;">CSV_CONTROL_OP</a> enumeration
value of <strong>CsvControlQueryFileRevision</strong>, or if the control code is used with an
<a href="csv_control_param" title="typedef struct _CSV_CONTROL_PARAM {&#10;  CSV_CONTROL_OP Operation;&#10;  LONGLONG       Unused;&#10;} CSV_CONTROL_PARAM, *PCSV_CONTROL_PARAM;">CSV_CONTROL_PARAM</a> structure containing that
enumeration value.</p>
<p>Revision tracking is per file, not per stream, so the output changes whenever the stream changes.</p>
<h2>See also</h2>
<p><a href="csv_control_op" title="typedef enum _CSV_CONTROL_OP {&#10;  CsvControlStartRedirectFile = 0x02,&#10;  CsvControlStopRedirectFile = 0x03,&#10;  CsvControlQueryRedirectState = 0x04,&#10;  CsvControlQueryFileRevision = 0x06,&#10;  CsvControlQueryMdsPath = 0x08,&#10;  CsvControlQueryFileRevisionFileId128 = 0x09,&#10;  CsvControlQueryVolumeRedirectState = 0x0a,&#10;  CsvControlEnableUSNRangeModificationTracking = 0x0d,&#10;  CsvControlMarkHandleLocalVolumeMount = 0x0e,&#10;  CsvControlUnmarkHandleLocalVolumeMount = 0x0f,&#10;  CsvControlGetCsvFsMdsPathV2 = 0x12,&#10;  CsvControlDisableCaching = 0x13,&#10;  CsvControlEnableCaching = 0x14,&#10;  CsvControlStartForceDFO = 0x15,&#10;  CsvControlStopForceDFO = 0x16,&#10;  CsvControlQueryMdsPathNoPause = 0x17,&#10;  CsvControlSetVolumeId = 0x18,&#10;  CsvControlQueryVolumeId = 0x19&#10;} CSV_CONTROL_OP, *PCSV_CONTROL_OP;">CSV_CONTROL_OP</a></p>
<p><a href="csv_control_param" title="typedef struct _CSV_CONTROL_PARAM {&#10;  CSV_CONTROL_OP Operation;&#10;  LONGLONG       Unused;&#10;} CSV_CONTROL_PARAM, *PCSV_CONTROL_PARAM;">CSV_CONTROL_PARAM</a></p>
<p><a href="fsctl_csv_control" title="// CTL_CODE(0x0009, 0x0b5, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define FSCTL_CSV_CONTROL 0x000902D4">FSCTL_CSV_CONTROL</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/desktop/FileIO/file-management-structures">File Management Structures</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows/win32/api/winioctl/ns-winioctl-csv_query_file_revision">View the official Win32 API reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/sdk-api/blob/docs/sdk-api-src/content/winioctl/ns-winioctl-csv_query_file_revision.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
