<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NdisDirectOidRequest - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NdisDirectOidRequest - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github.ntdoc.min.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/highlight.js/styles/github-dark-dimmed.ntdoc.min.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NdisDirectOidRequest - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header language-cpp">// ndis.h

</span><span class="ntdoc-code-intro language-cpp"></span><span class="ntdoc-code-body language-cpp">NDIS_STATUS NdisDirectOidRequest(
  [in] NDIS_HANDLE       NdisBindingHandle,
  [in] <a href="ndis_oid_request" title="typedef struct _NDIS_OID_REQUEST {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  NDIS_REQUEST_TYPE        RequestType;&#10;  NDIS_PORT_NUMBER         PortNumber;&#10;  UINT                     Timeout;&#10;  PVOID                    RequestId;&#10;  NDIS_HANDLE              RequestHandle;&#10;  union {&#10;    NDIS_OID Oid;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;      UINT     BytesWritten;&#10;      UINT     BytesNeeded;&#10;    } QUERY_INFORMATION;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;...">PNDIS_OID_REQUEST</a> OidRequest
);</span><span class="ntdoc-code-footer language-cpp"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisdirectoidrequest">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ndisdirectoidrequest.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-ndis-ndisdirectoidrequest)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>NdisDirectOidRequest function</h1>
<h2>Description</h2>
<p>The
<strong>NdisDirectOidRequest</strong> function forwards a direct OID request to the underlying drivers to query the
capabilities or status of an adapter or set the state of an adapter.</p>
<h2>Parameters</h2>
<h3><code>NdisBindingHandle</code> [in]</h3>
<p>The handle that the
<a href="ndisopenadapterex" title="NDIS_STATUS NdisOpenAdapterEx(&#10;  [in]  NDIS_HANDLE           NdisProtocolHandle,&#10;  [in]  NDIS_HANDLE           ProtocolBindingContext,&#10;  [in]  PNDIS_OPEN_PARAMETERS OpenParameters,&#10;  [in]  NDIS_HANDLE           BindContext,&#10;  [out] PNDIS_HANDLE          NdisBindingHandle&#10;);">NdisOpenAdapterEx</a> function returns that
identifies the target miniport adapter on the binding.</p>
<h3><code>OidRequest</code> [in]</h3>
<p>A pointer to an
<a href="ndis_oid_request" title="typedef struct _NDIS_OID_REQUEST {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  NDIS_REQUEST_TYPE        RequestType;&#10;  NDIS_PORT_NUMBER         PortNumber;&#10;  UINT                     Timeout;&#10;  PVOID                    RequestId;&#10;  NDIS_HANDLE              RequestHandle;&#10;  union {&#10;    NDIS_OID Oid;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;      UINT     BytesWritten;&#10;      UINT     BytesNeeded;&#10;    } QUERY_INFORMATION;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;...">NDIS_OID_REQUEST</a> structure that specifies
the operation that is requested with a given OID___Xxx__ code to either query the status of an adapter or to set the state of an adapter.</p>
<h2>Return value</h2>
<p>The underlying driver determines which NDIS_STATUS___XXX__ code
<strong>NdisDirectOidRequest</strong> returns, but it is usually one of the following values:</p>
<table>
<thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>NDIS_STATUS_SUCCESS</strong></td>
<td>The request operation completed successfully.</td>
</tr>
<tr>
<td><strong>NDIS_STATUS_PENDING</strong></td>
<td>The request is being handled asynchronously, and NDIS will call the caller's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_direct_oid_request_complete">ProtocolDirectOidRequestComplete</a> function when the request is completed.</td>
</tr>
<tr>
<td><strong>NDIS_STATUS_INVALID_OID</strong></td>
<td>The OID___Xxx__ code that was specified in the <strong>Oid</strong> member of the <a href="ndis_oid_request" title="typedef struct _NDIS_OID_REQUEST {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  NDIS_REQUEST_TYPE        RequestType;&#10;  NDIS_PORT_NUMBER         PortNumber;&#10;  UINT                     Timeout;&#10;  PVOID                    RequestId;&#10;  NDIS_HANDLE              RequestHandle;&#10;  union {&#10;    NDIS_OID Oid;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;      UINT     BytesWritten;&#10;      UINT     BytesNeeded;&#10;    } QUERY_INFORMATION;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;...">NDIS_OID_REQUEST</a>-structured buffer at <strong>OidRequest</strong> was invalid or unsupported by the underlying driver.</td>
</tr>
<tr>
<td><strong>NDIS_STATUS_INVALID_LENGTH or NDIS_STATUS_BUFFER_TOO_SHORT</strong></td>
<td>The value that was specified in the <strong>InformationBufferLength</strong> member of the <a href="ndis_oid_request" title="typedef struct _NDIS_OID_REQUEST {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  NDIS_REQUEST_TYPE        RequestType;&#10;  NDIS_PORT_NUMBER         PortNumber;&#10;  UINT                     Timeout;&#10;  PVOID                    RequestId;&#10;  NDIS_HANDLE              RequestHandle;&#10;  union {&#10;    NDIS_OID Oid;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;      UINT     BytesWritten;&#10;      UINT     BytesNeeded;&#10;    } QUERY_INFORMATION;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;...">NDIS_OID_REQUEST</a>-structured buffer at <strong>OidRequest</strong> did not match the requirements for the given OID___Xxx__ code. If the information buffer was too small, the <strong>BytesNeeded</strong> member contains the correct value for <strong>InformationBufferLength</strong> on return from <strong>NdisDirectOidRequest</strong>.</td>
</tr>
<tr>
<td><strong>NDIS_STATUS_INVALID_DATA</strong></td>
<td>The data that was supplied at <strong>InformationBuffer</strong> in the given <a href="ndis_oid_request" title="typedef struct _NDIS_OID_REQUEST {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  NDIS_REQUEST_TYPE        RequestType;&#10;  NDIS_PORT_NUMBER         PortNumber;&#10;  UINT                     Timeout;&#10;  PVOID                    RequestId;&#10;  NDIS_HANDLE              RequestHandle;&#10;  union {&#10;    NDIS_OID Oid;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;      UINT     BytesWritten;&#10;      UINT     BytesNeeded;&#10;    } QUERY_INFORMATION;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;...">NDIS_OID_REQUEST</a> structure was invalid for the given OID___Xxx__ code.</td>
</tr>
<tr>
<td><strong>NDIS_STATUS_NOT_SUPPORTED or NDIS_STATUS_NOT_RECOGNIZED</strong></td>
<td>The underlying driver does not support the requested operation. For <strong>NdisDirectOidRequest</strong>, NDIS can also return this status if the calling driver has not registered a <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_direct_oid_request_complete">ProtocolDirectOidRequestComplete</a> function.</td>
</tr>
<tr>
<td><strong>NDIS_STATUS_RESOURCES</strong></td>
<td>The request could not be satisfied because of a resource shortage. Typically, this return value indicates that an attempt to allocate memory was unsuccessful, but it does not necessarily indicate that the same request, submitted later, will be failed for the same reason.</td>
</tr>
<tr>
<td><strong>NDIS_STATUS_NOT_ACCEPTED</strong></td>
<td>The underlying driver attempted the requested operation, typically a set on a NIC, but it failed. For example, an attempt to set too many multicast addresses might cause the return of this value.</td>
</tr>
<tr>
<td><strong>NDIS_STATUS_CLOSING or NDIS_STATUS_CLOSING_INDICATING</strong></td>
<td>The underlying driver failed the requested operation because a close operation is in progress.</td>
</tr>
<tr>
<td><strong>NDIS_STATUS_RESET_IN_PROGRESS</strong></td>
<td>The underlying miniport driver cannot satisfy the request at this time because it is currently resetting the affected NIC. The caller's <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_status_ex">ProtocolStatusEx</a> function was or will be called with NDIS_STATUS_RESET_START to indicate that a reset is in progress. This return value does not necessarily indicate that the same request, submitted later, will be failed for the same reason.</td>
</tr>
<tr>
<td><strong>NDIS_STATUS_FAILURE</strong></td>
<td>This value typically is a non-specific default, returned when none of the more specific NDIS_STATUS___Xxx__ values caused the underlying driver to fail the request.</td>
</tr>
</tbody>
</table>
<h2>Remarks</h2>
<p>The
<strong>NdisDirectOidRequest</strong> function cannot be used for general OID requests. For general OID requests,
use the
<a href="ndisoidrequest" title="NDIS_STATUS NdisOidRequest(&#10;  [in] NDIS_HANDLE       NdisBindingHandle,&#10;  [in] PNDIS_OID_REQUEST OidRequest&#10;);">NdisOidRequest</a> function instead.
<strong>NdisDirectOidRequest</strong> can be used only for OIDs that NDIS supports for use with the direct OID
interface. For example, the following OIDs can be used:</p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-tcp-task-ipsec-offload-v2-add-sa">OID_TCP_TASK_IPSEC_OFFLOAD_V2_ADD_SA</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-tcp-task-ipsec-offload-v2-delete-sa">OID_TCP_TASK_IPSEC_OFFLOAD_V2_DELETE_SA</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-tcp-task-ipsec-offload-v2-update-sa">OID_TCP_TASK_IPSEC_OFFLOAD_V2_UPDATE_SA</a></p>
<p>A protocol driver must allocate sufficient memory to hold the information buffer that is associated
with the specified OID. The driver must also allocate and set up the buffer at the
<strong>OidRequest</strong> parameter before it calls
<strong>NdisDirectOidRequest</strong>. Both buffers must be allocated from nonpaged pool because the underlying
driver runs at raised IRQL while processing the request.</p>
<p><strong>NdisDirectOidRequest</strong> forwards a request to underlying drivers or handles the request itself. If the
next-lower driver is an NDIS intermediate driver, the intermediate driver can call
<strong>NdisDirectOidRequest</strong> with an OID-specific request of its own before completing the request that the
higher-level driver originally submitted.</p>
<p>A driver that calls
<strong>NdisDirectOidRequest</strong> must register the
<a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_direct_oid_request_complete">ProtocolDirectOidRequestComplete</a> function.</p>
<p>The direct OID request interface is similar to the general OID request interface. For more information
about issuing general requests, see
<a href="ndisoidrequest" title="NDIS_STATUS NdisOidRequest(&#10;  [in] NDIS_HANDLE       NdisBindingHandle,&#10;  [in] PNDIS_OID_REQUEST OidRequest&#10;);">NdisOidRequest</a>.</p>
<p><strong>Note</strong> Although Direct OID requests are not generally serialized, NDIS itself may still pend a request with NDIS_STATUS_PENDING and queue the request for later completion. For example, NDIS may pend and queue a Direct OID request sent to a selective suspend miniport that is currently in a low power state. Protocols and filters must be prepared to handle an NDIS_STATUS_PENDING code, even if the underlying miniport would complete the request synchronously.</p>
<h2>See also</h2>
<p><a href="ndis_oid_request" title="typedef struct _NDIS_OID_REQUEST {&#10;  NDIS_OBJECT_HEADER       Header;&#10;  NDIS_REQUEST_TYPE        RequestType;&#10;  NDIS_PORT_NUMBER         PortNumber;&#10;  UINT                     Timeout;&#10;  PVOID                    RequestId;&#10;  NDIS_HANDLE              RequestHandle;&#10;  union {&#10;    NDIS_OID Oid;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;      UINT     BytesWritten;&#10;      UINT     BytesNeeded;&#10;    } QUERY_INFORMATION;&#10;    struct {&#10;      NDIS_OID Oid;&#10;      PVOID    InformationBuffer;&#10;      UINT     InformationBufferLength;&#10;...">NDIS_OID_REQUEST</a></p>
<p><a href="ndisoidrequest" title="NDIS_STATUS NdisOidRequest(&#10;  [in] NDIS_HANDLE       NdisBindingHandle,&#10;  [in] PNDIS_OID_REQUEST OidRequest&#10;);">NdisOidRequest</a></p>
<p><a href="ndisopenadapterex" title="NDIS_STATUS NdisOpenAdapterEx(&#10;  [in]  NDIS_HANDLE           NdisProtocolHandle,&#10;  [in]  NDIS_HANDLE           ProtocolBindingContext,&#10;  [in]  PNDIS_OPEN_PARAMETERS OpenParameters,&#10;  [in]  NDIS_HANDLE           BindContext,&#10;  [out] PNDIS_HANDLE          NdisBindingHandle&#10;);">NdisOpenAdapterEx</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-tcp-task-ipsec-offload-v2-add-sa">OID_TCP_TASK_IPSEC_OFFLOAD_V2_ADD_SA</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-tcp-task-ipsec-offload-v2-delete-sa">OID_TCP_TASK_IPSEC_OFFLOAD_V2_DELETE_SA</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/oid-tcp-task-ipsec-offload-v2-update-sa">OID_TCP_TASK_IPSEC_OFFLOAD_V2_UPDATE_SA</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_direct_oid_request_complete">ProtocolDirectOidRequestComplete</a></p>
<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nc-ndis-protocol_status_ex">ProtocolStatusEx</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/ndis/nf-ndis-ndisdirectoidrequest">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/ndis/nf-ndis-ndisdirectoidrequest.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script src="modules/highlight.js/highlight.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
