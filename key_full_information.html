<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="KEY_FULL_INFORMATION - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>KEY_FULL_INFORMATION - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            KEY_FULL_INFORMATION - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">#ifndef _NTREGAPI_H

</span><span class="ntdoc-code-intro">/**
 * The KEY_FULL_INFORMATION structure defines information available for a registry key, including subkeys, names and value entries.
 * \sa https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/wdm/ns-wdm-_key_full_information
 */
</span><span class="ntdoc-code-body">typedef struct _KEY_FULL_INFORMATION
{
    LARGE_INTEGER LastWriteTime;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> TitleIndex;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> ClassOffset;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> ClassLength;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> SubKeys;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> MaxNameLength;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> MaxClassLength;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> Values;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> MaxValueNameLength;
    <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> MaxValueDataLength;
    WCHAR Class[1];
} KEY_FULL_INFORMATION, *PKEY_FULL_INFORMATION;
</span><span class="ntdoc-code-footer">
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/addd49805cb586a891f7c6f31d88a43545cc1c80/phnt/include/ntregapi.h#L68">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _KEY_FULL_INFORMATION {
  LARGE_INTEGER LastWriteTime;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         TitleIndex;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         ClassOffset;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         ClassLength;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         SubKeys;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         MaxNameLen;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         MaxClassLen;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         Values;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         MaxValueNameLen;
  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>         MaxValueDataLen;
  WCHAR         Class[1];
} KEY_FULL_INFORMATION, *PKEY_FULL_INFORMATION;</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_key_full_information">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<p>This structure is <a rel="noopener" target="_blank" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/wdm/ns-wdm-_key_full_information">documented in Windows Driver Kit</a>.</p>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/key_full_information.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-wdm-_key_full_information)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_key_full_information-structure">_KEY_FULL_INFORMATION structure</h1>

<h2 id="description">Description</h2>

<p>The <strong>KEY_FULL_INFORMATION</strong> structure defines the information available for a registry key, including information about its subkeys and the maximum length for their names and value entries. This information can be used to size buffers to get the names of subkeys and their value entries.</p>

<h2 id="members">Members</h2>

<h3 id="lastwritetime"><code>LastWriteTime</code></h3>

<p>The last time this key or any of its values changed. This time value is expressed in absolute system time format. Absolute system time is the number of 100-nanosecond intervals since the start of the year 1601 in the Gregorian calendar.</p>

<h3 id="titleindex"><code>TitleIndex</code></h3>

<p>Device and intermediate drivers should ignore this member.</p>

<h3 id="classoffset"><code>ClassOffset</code></h3>

<p>The byte offset from the start of this structure to the <strong>Class</strong> member.</p>

<h3 id="classlength"><code>ClassLength</code></h3>

<p>The size, in bytes, of the key class name string in the <strong>Class</strong> array.</p>

<h3 id="subkeys"><code>SubKeys</code></h3>

<p>The number of subkeys for this key.</p>

<h3 id="maxnamelen"><code>MaxNameLen</code></h3>

<p>The maximum size, in bytes, of any name for a subkey.</p>

<h3 id="maxclasslen"><code>MaxClassLen</code></h3>

<p>The maximum size, in bytes, of a class name.</p>

<h3 id="values"><code>Values</code></h3>

<p>The number of value entries for this key.</p>

<h3 id="maxvaluenamelen"><code>MaxValueNameLen</code></h3>

<p>The maximum size, in bytes, of a value entry name.</p>

<h3 id="maxvaluedatalen"><code>MaxValueDataLen</code></h3>

<p>The maximum size, in bytes, of a value entry data field.</p>

<h3 id="class"><code>Class</code></h3>

<p>An array of wide characters that contains the name of the class of the key. This character string is not null-terminated. Only the first element in this array is included in the <strong>KEY_FULL_INFORMATION</strong> structure definition. The storage for the remaining elements in the array immediately follows this element.</p>

<h2 id="remarks">Remarks</h2>

<p>The <a href="ntenumeratekey" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtEnumerateKey(&#10;    _In_ HANDLE KeyHandle,&#10;    _In_ ULONG Index,&#10;    _In_ KEY_INFORMATION_CLASS KeyInformationClass,&#10;    _Out_writes_bytes_to_opt_(Length, *ResultLength) PVOID KeyInformation,&#10;    _In_ ULONG Length,&#10;    _Out_ PULONG ResultLength&#10;    );">ZwEnumerateKey</a> and <a href="ntquerykey" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtQueryKey(&#10;    _In_ HANDLE KeyHandle,&#10;    _In_ KEY_INFORMATION_CLASS KeyInformationClass,&#10;    _Out_writes_bytes_to_opt_(Length, *ResultLength) PVOID KeyInformation,&#10;    _In_ ULONG Length,&#10;    _Out_ PULONG ResultLength&#10;    );">ZwQueryKey</a> routines use the <strong>KEY_FULL_INFORMATION</strong> structure to contain the full information for a registry key. When the <em>KeyInformationClass</em> parameter of either routine is <strong>KeyFullInformation</strong>, the <em>KeyInformation</em> buffer is treated as a <strong>KEY_FULL_INFORMATION</strong> structure. For more information about the <strong>KeyFullInformation</strong> enumeration value, see <a href="key_information_class" title="typedef enum _KEY_INFORMATION_CLASS&#10;{&#10;    KeyBasicInformation, // KEY_BASIC_INFORMATION&#10;    KeyNodeInformation, // KEY_NODE_INFORMATION&#10;    KeyFullInformation, // KEY_FULL_INFORMATION&#10;    KeyNameInformation, // KEY_NAME_INFORMATION&#10;    KeyCachedInformation, // KEY_CACHED_INFORMATION&#10;    KeyFlagsInformation, // KEY_FLAGS_INFORMATION&#10;    KeyVirtualizationInformation, // KEY_VIRTUALIZATION_INFORMATION&#10;    KeyHandleTagsInformation, // KEY_HANDLE_TAGS_INFORMATION&#10;    KeyTrustInformation, // KEY_TRUST_INFORMATION&#10;    KeyLayerInformation, // KEY_LAYER_INFORMATION&#10;    MaxKeyInfoClass&#10;} KEY_INFORMATION_CLASS;">KEY_INFORMATION_CLASS</a>.</p>

<h2 id="see-also">See also</h2>

<p><a href="key_basic_information" title="typedef struct _KEY_BASIC_INFORMATION&#10;{&#10;    LARGE_INTEGER LastWriteTime;                    // Number of 100-nanosecond intervals since this key or any of its values changed.&#10;    ULONG TitleIndex;                               // Reserved // A legacy field originally intended for use with localization such as an index of a resource table.&#10;    ULONG NameLength;                               // The size, in bytes, of the key name string in the Name array.&#10;    _Field_size_bytes_(NameLength) WCHAR Name[1];   // The name of the registry key. This string is not null-terminated.&#10;} KEY_BASIC_INFORMATION, *PKEY_BASIC_INFORMATION;">KEY_BASIC_INFORMATION</a></p>

<p><a href="key_cached_information" title="typedef struct _KEY_CACHED_INFORMATION&#10;{&#10;    LARGE_INTEGER LastWriteTime;&#10;    ULONG TitleIndex;&#10;    ULONG SubKeys;&#10;    ULONG MaxNameLength;&#10;    ULONG Values;&#10;    ULONG MaxValueNameLength;&#10;    ULONG MaxValueDataLength;&#10;    ULONG NameLength;&#10;    _Field_size_bytes_(NameLength) WCHAR Name[1];&#10;} KEY_CACHED_INFORMATION, *PKEY_CACHED_INFORMATION;">KEY_CACHED_INFORMATION</a></p>

<p><a href="key_information_class" title="typedef enum _KEY_INFORMATION_CLASS&#10;{&#10;    KeyBasicInformation, // KEY_BASIC_INFORMATION&#10;    KeyNodeInformation, // KEY_NODE_INFORMATION&#10;    KeyFullInformation, // KEY_FULL_INFORMATION&#10;    KeyNameInformation, // KEY_NAME_INFORMATION&#10;    KeyCachedInformation, // KEY_CACHED_INFORMATION&#10;    KeyFlagsInformation, // KEY_FLAGS_INFORMATION&#10;    KeyVirtualizationInformation, // KEY_VIRTUALIZATION_INFORMATION&#10;    KeyHandleTagsInformation, // KEY_HANDLE_TAGS_INFORMATION&#10;    KeyTrustInformation, // KEY_TRUST_INFORMATION&#10;    KeyLayerInformation, // KEY_LAYER_INFORMATION&#10;    MaxKeyInfoClass&#10;} KEY_INFORMATION_CLASS;">KEY_INFORMATION_CLASS</a></p>

<p><a href="key_name_information" title="typedef struct _KEY_NAME_INFORMATION&#10;{&#10;    ULONG NameLength;                               // The size, in bytes, of the key name string in the Name array.&#10;    _Field_size_bytes_(NameLength) WCHAR Name[1];   // The name of the registry key. This string is not null-terminated.&#10;} KEY_NAME_INFORMATION, *PKEY_NAME_INFORMATION;">KEY_NAME_INFORMATION</a></p>

<p><a href="key_node_information" title="typedef struct _KEY_NODE_INFORMATION&#10;{&#10;    LARGE_INTEGER LastWriteTime;                    // Number of 100-nanosecond intervals since this key or any of its values changed.&#10;    ULONG TitleIndex;                               // Reserved // A legacy field originally intended for use with localization such as an index of a resource table.&#10;    ULONG ClassOffset;                              // The byte offset from the start of this structure to the class name string. This string is not null-terminated.&#10;    ULONG ClassLength;                              // The size, in bytes, in the class name string.&#10;    ULONG NameLength;                               // The size, in bytes, of the key name string contained in the Name array.&#10;    _Field_size_bytes_(NameLength) WCHAR Name[1];   // The name of the registry key. This string is not null-terminated.&#10;    // ...&#10;    // WCHAR Class[1];&#10;} KEY_NODE_INFORMATION, *PKEY_NODE_INFORMATION;">KEY_NODE_INFORMATION</a></p>

<p><a href="key_virtualization_information" title="typedef struct _KEY_VIRTUALIZATION_INFORMATION&#10;{&#10;    ULONG VirtualizationCandidate : 1;&#10;    ULONG VirtualizationEnabled : 1;&#10;    ULONG VirtualTarget : 1;&#10;    ULONG VirtualStore : 1;&#10;    ULONG VirtualSource : 1;&#10;    ULONG Reserved : 27;&#10;} KEY_VIRTUALIZATION_INFORMATION, *PKEY_VIRTUALIZATION_INFORMATION;">KEY_VIRTUALIZATION_INFORMATION</a></p>

<p><a href="ntenumeratekey" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtEnumerateKey(&#10;    _In_ HANDLE KeyHandle,&#10;    _In_ ULONG Index,&#10;    _In_ KEY_INFORMATION_CLASS KeyInformationClass,&#10;    _Out_writes_bytes_to_opt_(Length, *ResultLength) PVOID KeyInformation,&#10;    _In_ ULONG Length,&#10;    _Out_ PULONG ResultLength&#10;    );">ZwEnumerateKey</a></p>

<p><a href="ntquerykey" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtQueryKey(&#10;    _In_ HANDLE KeyHandle,&#10;    _In_ KEY_INFORMATION_CLASS KeyInformationClass,&#10;    _Out_writes_bytes_to_opt_(Length, *ResultLength) PVOID KeyInformation,&#10;    _In_ ULONG Length,&#10;    _Out_ PULONG ResultLength&#10;    );">ZwQueryKey</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_key_full_information">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/ns-wdm-_key_full_information.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
