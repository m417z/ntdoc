<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="UdecxWdfDeviceTryHandleUserIoctl - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>UdecxWdfDeviceTryHandleUserIoctl - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            UdecxWdfDeviceTryHandleUserIoctl - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// udecxwdfdevice.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">BOOLEAN UdecxWdfDeviceTryHandleUserIoctl(
       WDFDEVICE  UdecxWdfDevice,
  [in] WDFREQUEST Request
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/udecxwdfdevice/nf-udecxwdfdevice-udecxwdfdevicetryhandleuserioctl">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/udecxwdfdevicetryhandleuserioctl.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-udecxwdfdevice-udecxwdfdevicetryhandleuserioctl)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1>UdecxWdfDeviceTryHandleUserIoctl function</h1>
<h2>Description</h2>
<p>Attempts to handle an IOCTL request sent by a user-mode software.</p>
<h2>Parameters</h2>
<h3><code>UdecxWdfDevice</code></h3>
<p>A handle to a framework device object that represents the controller. The client driver initialized this object in the previous call to <strong><a href="udecxwdfdeviceaddusbdeviceemulation" title="NTSTATUS UdecxWdfDeviceAddUsbDeviceEmulation(&#10;       WDFDEVICE                WdfDevice,&#10;  [in] PUDECX_WDF_DEVICE_CONFIG Config&#10;);">UdecxWdfDeviceAddUsbDeviceEmulation</a></strong>.</p>
<h3><code>Request</code> [in]</h3>
<p>A handle to a framework request object that represents the IOCTL request.</p>
<h2>Return value</h2>
<p>TRUE indicates that USB device emulation class extension (UdeCx) recognized and completed the request (with success or failure). In this case, the client driver must
not complete the request. FALSE otherwise; the driver must complete the request.</p>
<h2>Remarks</h2>
<p>The UDE client driver presents itself to user-mode software as a host controller driver. The client driver registers and exposes the GUID_DEVINTERFACE_USB_HOST_CONTROLLER device interface GUID. User-mode software can open a handle to the device by specifying that GUID. By using that handle, the software can send IOCTL requests.</p>
<p><strong>Note</strong> Note that other interface's IOCTL codes may overlap with the USB host controller interface. If
such I/O reaches this function the IOCTL will not be handled correctly.</p>
<p>The client driver does not need to process the received IOCTL. It can send the request to the class extension by calling <strong>UdecxWdfDeviceTryHandleUserIoctl</strong>. If the class extension recognizes the request as a standard request, it completes it. Otherwise, the call fails and the client driver is then expected to complete the request. For a list of IOCTLs that must be handled, see <a href="https://learn.microsoft.com/windows/iot-core/learn-about-hardware/hardwarecompatlist">USB IOCTLs for applications and services</a>.</p>
<ul>
<li><a href="ioctl_get_hcd_driverkey_name" title="// CTL_CODE(0x0022, 0x109, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_GET_HCD_DRIVERKEY_NAME 0x00220424">IOCTL_GET_HCD_DRIVERKEY_NAME</a></li>
<li><a href="ioctl_usb_get_root_hub_name" title="// CTL_CODE(0x0022, 0x102, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_USB_GET_ROOT_HUB_NAME 0x00220408">IOCTL_USB_GET_ROOT_HUB_NAME</a></li>
<li><a href="ioctl_usb_user_request" title="// CTL_CODE(0x0022, 0x10e, METHOD_BUFFERED, FILE_ANY_ACCESS)&#10;#define IOCTL_USB_USER_REQUEST 0x00220438">IOCTL_USB_USER_REQUEST</a></li>
</ul>
<h2>See also</h2>
<p><a href="https://learn.microsoft.com/windows-hardware/drivers/usbcon/">Architecture: USB Device Emulation (UDE)</a></p>
<p><a href="https://learn.microsoft.com/windows-hardware/drivers/usbcon/">Write a UDE client driver</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/udecxwdfdevice/nf-udecxwdfdevice-udecxwdfdevicetryhandleuserioctl">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/udecxwdfdevice/nf-udecxwdfdevice-udecxwdfdevicetryhandleuserioctl.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
