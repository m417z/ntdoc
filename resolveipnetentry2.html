<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="ResolveIpNetEntry2 - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>ResolveIpNetEntry2 - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            ResolveIpNetEntry2 - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// netioapi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NETIOAPI_API ResolveIpNetEntry2(
  _Inout_        PMIB_IPNET_ROW2 Row,
  _In_opt_ const SOCKADDR_INET   *SourceAddress
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/resolveipnetentry2">View the official Windows hardware development documentation</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/resolveipnetentry2.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows hardware development documentation (resolveipnetentry2)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="resolveipnetentry2-function">ResolveIpNetEntry2 function</h1>

<p>The <strong>ResolveIpNetEntry2</strong> function resolves the physical address for a neighbor IP address entry on a local computer.</p>

<h2 id="parameters">Parameters</h2>

<ul>
<li><p><em>Row</em> [in, out]
A pointer to a <strong><a href="mib_ipnet_row2" title="typedef struct _MIB_IPNET_ROW2 {&#10;  SOCKADDR_INET     Address;&#10;  NET_IFINDEX       InterfaceIndex;&#10;  NET_LUID          InterfaceLuid;&#10;  UCHAR             PhysicalAddress[IF_MAX_PHYS_ADDRESS_LENGTH];&#10;  ULONG             PhysicalAddressLength;&#10;  NL_NEIGHBOR_STATE State;&#10;  union {&#10;    struct {&#10;      BOOLEAN IsRouter  :1;&#10;      BOOLEAN IsUnreachable  :1;&#10;    };&#10;    UCHAR  Flags;&#10;  };&#10;  union {&#10;    ULONG LastReachable;&#10;    ULONG LastUnreachable;&#10;  } ReachabilityTime;&#10;} MIB_IPNET_ROW2, *PMIB_IPNET_ROW2;">MIB_IPNET_ROW2</a></strong> structure entry for a neighbor IP address entry. On successful return, this structure is updated with the properties for neighbor IP address.</p></li>
<li><p><em>SourceAddress</em> [in, optional]
A pointer to an optional source IP address that is used to select the interface to send the requests on for the neighbor IP address entry.</p></li>
</ul>

<h2 id="return-value">Return value</h2>

<p><strong>ResolveIpNetEntry2</strong> returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> if the function succeeds.</p>

<p>If the function fails, <strong>ResolveIpNetEntry2</strong> returns one of the following error codes:</p>

<table>
<thead>
<tr>
  <th>Return code</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>STATUS_BAD_NETWORK_NAME</strong></td>
  <td>The network name cannot be found. This error is returned if the network with the neighbor IP address is unreachable.</td>
</tr>
<tr>
  <td><strong>STATUS_INVALID_PARAMETER</strong></td>
  <td>An invalid parameter was passed to the function. This error is returned if a <strong>NULL</strong> pointer is passed in the <em>Row</em> parameter, the <strong>Address</strong> member of the <strong><a href="mib_ipnet_row2" title="typedef struct _MIB_IPNET_ROW2 {&#10;  SOCKADDR_INET     Address;&#10;  NET_IFINDEX       InterfaceIndex;&#10;  NET_LUID          InterfaceLuid;&#10;  UCHAR             PhysicalAddress[IF_MAX_PHYS_ADDRESS_LENGTH];&#10;  ULONG             PhysicalAddressLength;&#10;  NL_NEIGHBOR_STATE State;&#10;  union {&#10;    struct {&#10;      BOOLEAN IsRouter  :1;&#10;      BOOLEAN IsUnreachable  :1;&#10;    };&#10;    UCHAR  Flags;&#10;  };&#10;  union {&#10;    ULONG LastReachable;&#10;    ULONG LastUnreachable;&#10;  } ReachabilityTime;&#10;} MIB_IPNET_ROW2, *PMIB_IPNET_ROW2;">MIB_IPNET_ROW2</a></strong> structure that the <em>Row</em> parameter points to was not set to a valid IPv4 or IPv6 address, or both <strong>InterfaceLuid</strong> and <strong>InterfaceIndex</strong> members of the <a href="mib_ipnet_row2" title="typedef struct _MIB_IPNET_ROW2 {&#10;  SOCKADDR_INET     Address;&#10;  NET_IFINDEX       InterfaceIndex;&#10;  NET_LUID          InterfaceLuid;&#10;  UCHAR             PhysicalAddress[IF_MAX_PHYS_ADDRESS_LENGTH];&#10;  ULONG             PhysicalAddressLength;&#10;  NL_NEIGHBOR_STATE State;&#10;  union {&#10;    struct {&#10;      BOOLEAN IsRouter  :1;&#10;      BOOLEAN IsUnreachable  :1;&#10;    };&#10;    UCHAR  Flags;&#10;  };&#10;  union {&#10;    ULONG LastReachable;&#10;    ULONG LastUnreachable;&#10;  } ReachabilityTime;&#10;} MIB_IPNET_ROW2, *PMIB_IPNET_ROW2;">MIB_IPNET_ROW2</a> structure were unspecified. This error is also returned if a loopback address was passed in the <strong>Address</strong> member.</td>
</tr>
<tr>
  <td><strong>STATUS_NOT_FOUND</strong></td>
  <td>The specified interface could not be found. This error is returned if the function cannot find the network interface that is specified by the <strong>InterfaceLuid</strong> or <strong>InterfaceIndex</strong> member of the <a href="mib_ipnet_row2" title="typedef struct _MIB_IPNET_ROW2 {&#10;  SOCKADDR_INET     Address;&#10;  NET_IFINDEX       InterfaceIndex;&#10;  NET_LUID          InterfaceLuid;&#10;  UCHAR             PhysicalAddress[IF_MAX_PHYS_ADDRESS_LENGTH];&#10;  ULONG             PhysicalAddressLength;&#10;  NL_NEIGHBOR_STATE State;&#10;  union {&#10;    struct {&#10;      BOOLEAN IsRouter  :1;&#10;      BOOLEAN IsUnreachable  :1;&#10;    };&#10;    UCHAR  Flags;&#10;  };&#10;  union {&#10;    ULONG LastReachable;&#10;    ULONG LastUnreachable;&#10;  } ReachabilityTime;&#10;} MIB_IPNET_ROW2, *PMIB_IPNET_ROW2;">MIB_IPNET_ROW2</a> structure that the <em>Row</em> parameter points to.</td>
</tr>
<tr>
  <td><strong>STATUS_NOT_SUPPORTED</strong></td>
  <td>The request is not supported. This error is returned if no IPv4 stack is located on the local computer and an IPv4 address was specified in the <strong>Address</strong> member of the <a href="mib_ipnet_row2" title="typedef struct _MIB_IPNET_ROW2 {&#10;  SOCKADDR_INET     Address;&#10;  NET_IFINDEX       InterfaceIndex;&#10;  NET_LUID          InterfaceLuid;&#10;  UCHAR             PhysicalAddress[IF_MAX_PHYS_ADDRESS_LENGTH];&#10;  ULONG             PhysicalAddressLength;&#10;  NL_NEIGHBOR_STATE State;&#10;  union {&#10;    struct {&#10;      BOOLEAN IsRouter  :1;&#10;      BOOLEAN IsUnreachable  :1;&#10;    };&#10;    UCHAR  Flags;&#10;  };&#10;  union {&#10;    ULONG LastReachable;&#10;    ULONG LastUnreachable;&#10;  } ReachabilityTime;&#10;} MIB_IPNET_ROW2, *PMIB_IPNET_ROW2;">MIB_IPNET_ROW2</a> structure that the <em>Row</em> parameter points to, or if no IPv6 stack is located on the local computer and an IPv6 address was specified in the <strong>Address</strong> member.</td>
</tr>
<tr>
  <td><strong>Other</strong></td>
  <td>Use the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows/win32/api/winbase/nf-winbase-formatmessage">FormatMessage</a> function to obtain the message string for the returned error.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p>The <strong>ResolveIpNetEntry2</strong> function is used to resolve the physical address for a neighbor IP address entry on a local computer. This function flushes any existing neighbor entry that matches the IP address on the interface and then resolves the physical address (MAC) address by sending ARP requests for an IPv4 address or Neighbor Solicitation (NS) requests for an IPv6 address. If the <em>SourceAddress</em> parameter is specified, <strong>ResolveIpNetEntry2</strong> selects the interface with this source IP address to send the requests on. If the <em>SourceAddress</em> parameter is not specified (<strong>NULL</strong> was passed in this parameter), <strong>ResolveIpNetEntry2</strong> automatically selects the best interface to send the requests on.</p>

<p>Your driver must initialize the following members of the <strong><a href="mib_ipnet_row2" title="typedef struct _MIB_IPNET_ROW2 {&#10;  SOCKADDR_INET     Address;&#10;  NET_IFINDEX       InterfaceIndex;&#10;  NET_LUID          InterfaceLuid;&#10;  UCHAR             PhysicalAddress[IF_MAX_PHYS_ADDRESS_LENGTH];&#10;  ULONG             PhysicalAddressLength;&#10;  NL_NEIGHBOR_STATE State;&#10;  union {&#10;    struct {&#10;      BOOLEAN IsRouter  :1;&#10;      BOOLEAN IsUnreachable  :1;&#10;    };&#10;    UCHAR  Flags;&#10;  };&#10;  union {&#10;    ULONG LastReachable;&#10;    ULONG LastUnreachable;&#10;  } ReachabilityTime;&#10;} MIB_IPNET_ROW2, *PMIB_IPNET_ROW2;">MIB_IPNET_ROW2</a></strong> structure that the <em>Row</em> parameter points to.</p>

<ul>
<li><p><strong>Address</strong>
Set to a valid IPv4 or IPv6 address and family.</p></li>
<li><p><strong>InterfaceLuid</strong> or <strong>InterfaceIndex</strong>
These members are used in the order that is listed earlier. So if <strong>InterfaceLuid</strong> is specified, this member is used to determine the interface. If no value was set for the <strong>InterfaceLuid</strong> member (the value of this member was set to zero), the <strong>InterfaceIndex</strong> member is next used to determine the interface.</p></li>
</ul>

<p>If the IP address that is passed in the <strong>Address</strong> member of the <a href="mib_ipnet_row2" title="typedef struct _MIB_IPNET_ROW2 {&#10;  SOCKADDR_INET     Address;&#10;  NET_IFINDEX       InterfaceIndex;&#10;  NET_LUID          InterfaceLuid;&#10;  UCHAR             PhysicalAddress[IF_MAX_PHYS_ADDRESS_LENGTH];&#10;  ULONG             PhysicalAddressLength;&#10;  NL_NEIGHBOR_STATE State;&#10;  union {&#10;    struct {&#10;      BOOLEAN IsRouter  :1;&#10;      BOOLEAN IsUnreachable  :1;&#10;    };&#10;    UCHAR  Flags;&#10;  };&#10;  union {&#10;    ULONG LastReachable;&#10;    ULONG LastUnreachable;&#10;  } ReachabilityTime;&#10;} MIB_IPNET_ROW2, *PMIB_IPNET_ROW2;">MIB_IPNET_ROW2</a> structure that the <em>Row</em> parameter points to is a duplicate of an existing neighbor IP address on the interface, the <strong>ResolveIpNetEntry2</strong> function flushes the existing entry before resolving the IP address.</p>

<p>On output, when the call is successful, <strong>ResolveIpNetEntry2</strong> retrieves the other properties for the neighbor IP address and fills in the <a href="mib_ipnet_row2" title="typedef struct _MIB_IPNET_ROW2 {&#10;  SOCKADDR_INET     Address;&#10;  NET_IFINDEX       InterfaceIndex;&#10;  NET_LUID          InterfaceLuid;&#10;  UCHAR             PhysicalAddress[IF_MAX_PHYS_ADDRESS_LENGTH];&#10;  ULONG             PhysicalAddressLength;&#10;  NL_NEIGHBOR_STATE State;&#10;  union {&#10;    struct {&#10;      BOOLEAN IsRouter  :1;&#10;      BOOLEAN IsUnreachable  :1;&#10;    };&#10;    UCHAR  Flags;&#10;  };&#10;  union {&#10;    ULONG LastReachable;&#10;    ULONG LastUnreachable;&#10;  } ReachabilityTime;&#10;} MIB_IPNET_ROW2, *PMIB_IPNET_ROW2;">MIB_IPNET_ROW2</a> structure that the <em>Row</em> parameter points to. The <strong>PhysicalAddress</strong> and <strong>PhysicalAddressLength</strong> members in the <a href="mib_ipnet_row2" title="typedef struct _MIB_IPNET_ROW2 {&#10;  SOCKADDR_INET     Address;&#10;  NET_IFINDEX       InterfaceIndex;&#10;  NET_LUID          InterfaceLuid;&#10;  UCHAR             PhysicalAddress[IF_MAX_PHYS_ADDRESS_LENGTH];&#10;  ULONG             PhysicalAddressLength;&#10;  NL_NEIGHBOR_STATE State;&#10;  union {&#10;    struct {&#10;      BOOLEAN IsRouter  :1;&#10;      BOOLEAN IsUnreachable  :1;&#10;    };&#10;    UCHAR  Flags;&#10;  };&#10;  union {&#10;    ULONG LastReachable;&#10;    ULONG LastUnreachable;&#10;  } ReachabilityTime;&#10;} MIB_IPNET_ROW2, *PMIB_IPNET_ROW2;">MIB_IPNET_ROW2</a> structure are initialized to a valid physical address.</p>

<h2 id="requirements">Requirements</h2>

<table>
<thead>
<tr>
  <th></th>
  <th></th>
</tr>
</thead>
<tbody>
<tr>
  <td>Target platform</td>
  <td><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/develop/target-platforms">Universal</a></td>
</tr>
<tr>
  <td>Version</td>
  <td>Available in Windows Vista and later versions of the Windows operating systems.</td>
</tr>
<tr>
  <td>Header</td>
  <td>Netioapi.h (include Netioapi.h)</td>
</tr>
<tr>
  <td>Library</td>
  <td>Netio.lib</td>
</tr>
<tr>
  <td>IRQL</td>
  <td>&lt; DISPATCH_LEVEL</td>
</tr>
</tbody>
</table>

<h2 id="see-also">See also</h2>

<p><strong><a href="createipnetentry2" title="NETIOAPI_API CreateIpNetEntry2(&#10;  _In_ const MIB_IPNET_ROW2 *Row&#10;);">CreateIpNetEntry2</a></strong></p>

<p><strong><a href="deleteipnetentry2" title="NETIOAPI_API DeleteIpNetEntry2(&#10;  _In_ const MIB_IPNET_ROW2 *Row&#10;);">DeleteIpNetEntry2</a></strong></p>

<p><strong><a href="flushipnettable2" title="NETIOAPI_API FlushIpNetTable2(&#10;  _In_ ADDRESS_FAMILY Family,&#10;  _In_ NET_IFINDEX    InterfaceIndex&#10;);">FlushIpNetTable2</a></strong></p>

<p><strong><a href="getipnetentry2" title="NETIOAPI_API GetIpNetEntry2(&#10;  _Inout_ PMIB_IPNET_ROW2 Row&#10;);">GetIpNetEntry2</a></strong></p>

<p><strong><a href="getipnettable2" title="NETIOAPI_API GetIpNetTable2(&#10;  _In_  ADDRESS_FAMILY    Family,&#10;  _Out_ PMIB_IPNET_TABLE2 *Table&#10;);">GetIpNetTable2</a></strong></p>

<p><strong><a href="mib_ipnet_row2" title="typedef struct _MIB_IPNET_ROW2 {&#10;  SOCKADDR_INET     Address;&#10;  NET_IFINDEX       InterfaceIndex;&#10;  NET_LUID          InterfaceLuid;&#10;  UCHAR             PhysicalAddress[IF_MAX_PHYS_ADDRESS_LENGTH];&#10;  ULONG             PhysicalAddressLength;&#10;  NL_NEIGHBOR_STATE State;&#10;  union {&#10;    struct {&#10;      BOOLEAN IsRouter  :1;&#10;      BOOLEAN IsUnreachable  :1;&#10;    };&#10;    UCHAR  Flags;&#10;  };&#10;  union {&#10;    ULONG LastReachable;&#10;    ULONG LastUnreachable;&#10;  } ReachabilityTime;&#10;} MIB_IPNET_ROW2, *PMIB_IPNET_ROW2;">MIB_IPNET_ROW2</a></strong></p>

<p><strong><a href="mib_ipnet_table2" title="typedef struct _MIB_IPNET_TABLE2 {&#10;  ULONG          NumEntries;&#10;  MIB_IPNET_ROW2 Table[ANY_SIZE];&#10;} MIB_IPNET_TABLE2, *PMIB_IPNET_TABLE2;">MIB_IPNET_TABLE2</a></strong></p>

<p><strong><a href="setipnetentry2" title="NETIOAPI_API SetIpNetEntry2(&#10;  _In_ PMIB_IPNET_ROW2 Row&#10;);">SetIpNetEntry2</a></strong></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/network/resolveipnetentry2">View the official Windows hardware development documentation</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs/blob/staging/windows-driver-docs-pr/network/resolveipnetentry2.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
