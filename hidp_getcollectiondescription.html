<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="HidP_GetCollectionDescription - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>HidP_GetCollectionDescription - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            HidP_GetCollectionDescription - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// hidpddi.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body"><a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> HidP_GetCollectionDescription(
  [in]  PHIDP_REPORT_DESCRIPTOR ReportDesc,
  [in]  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>                   DescLength,
  [in]  <a href="pool_type" title="typedef enum _POOL_TYPE {&#10;    NonPagedPool,&#10;    NonPagedPoolExecute = NonPagedPool,&#10;    PagedPool,&#10;    NonPagedPoolMustSucceed = NonPagedPool + 2,&#10;    DontUseThisType,&#10;    NonPagedPoolCacheAligned = NonPagedPool + 4,&#10;    PagedPoolCacheAligned,&#10;    NonPagedPoolCacheAlignedMustS = NonPagedPool + 6,&#10;    MaxPoolType,&#10;    NonPagedPoolBase = 0,&#10;    NonPagedPoolBaseMustSucceed = NonPagedPoolBase + 2,&#10;    NonPagedPoolBaseCacheAligned = NonPagedPoolBase + 4,&#10;    NonPagedPoolBaseCacheAlignedMustS = NonPagedPoolBase + 6,&#10;    NonPagedPoolSession = 32,&#10;    PagedPoolSession = NonPagedPoolSession + 1,&#10;    NonPagedPoolMustSucceedSession = PagedPoolSession + 1,&#10;    DontUseThisTypeSession = NonPagedPoolMustSucceedSession + 1,&#10;    NonPagedPoolCacheAlignedSession = DontUseThisTypeSession + 1,&#10;    PagedPoolCacheAlignedSession = NonPagedPoolCacheAlignedSession + 1,&#10;...">POOL_TYPE</a>               PoolType,
  [out] <a href="hidp_device_desc" title="typedef struct _HIDP_DEVICE_DESC {&#10;  PHIDP_COLLECTION_DESC CollectionDesc;&#10;  ULONG                 CollectionDescLength;&#10;  PHIDP_REPORT_IDS      ReportIDs;&#10;  ULONG                 ReportIDsLength;&#10;  HIDP_GETCOLDESC_DBG   Dbg;&#10;} HIDP_DEVICE_DESC, *PHIDP_DEVICE_DESC;">PHIDP_DEVICE_DESC</a>       DeviceDescription
);</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/hidpddi/nf-hidpddi-hidp_getcollectiondescription">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/hidp_getcollectiondescription.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-hidpddi-hidp_getcollectiondescription)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="hidp_getcollectiondescription-function">HidP_GetCollectionDescription function</h1>

<h2 id="description">Description</h2>

<p>Fills a device description
block with collection description and the corresponding
report ID information for the specified report descriptor.
A HID minidriver generally does not need to call this function. Instead, it returns the report descriptor to Hidclass driver in response to <a rel="noopener" target="_blank" href="ioctl_hid_get_report_descriptor">IOCTL_HID_GET_REPORT_DESCRIPTOR</a>.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="reportdesc-in"><code>ReportDesc</code> [in]</h3>

<p>A pointer to a <a href="uchar" title="typedef unsigned char UCHAR;">UCHAR</a> array that contains the raw report descriptor.</p>

<h3 id="desclength-in"><code>DescLength</code> [in]</h3>

<p>The length of the report descriptor array.</p>

<h3 id="pooltype-in"><code>PoolType</code> [in]</h3>

<p>A <a rel="noopener" target="_blank" href="pool_type">POOL_TYPE</a>-value that indicates the pool type from which memory for the linked list is allocated. This includes each <a rel="noopener" target="_blank" href="hidp_collection_desc">HIDP_COLLECTION_DESC</a> array element of <a rel="noopener" target="_blank" href="hidp_device_desc">HIDP_DEVICE_DESC</a>, each <a rel="noopener" target="_blank" href="hidd_getpreparseddata">HIDP_PREPARSED_DATA</a> in each **<a href="hidp_collection_desc" title="typedef struct _HIDP_COLLECTION_DESC {&#10;  USAGE                UsagePage;&#10;  USAGE                Usage;&#10;  UCHAR                CollectionNumber;&#10;  UCHAR                Reserved[15];&#10;  USHORT               InputLength;&#10;  USHORT               OutputLength;&#10;  USHORT               FeatureLength;&#10;  USHORT               PreparsedDataLength;&#10;  PHIDP_PREPARSED_DATA PreparsedData;&#10;} HIDP_COLLECTION_DESC, *PHIDP_COLLECTION_DESC;">HIDP_COLLECTION_DESC</a>**, each <a rel="noopener" target="_blank" href="hidp_report_ids">HIDP_REPORT_IDS</a> array element of <strong><a href="hidp_device_desc" title="typedef struct _HIDP_DEVICE_DESC {&#10;  PHIDP_COLLECTION_DESC CollectionDesc;&#10;  ULONG                 CollectionDescLength;&#10;  PHIDP_REPORT_IDS      ReportIDs;&#10;  ULONG                 ReportIDsLength;&#10;  HIDP_GETCOLDESC_DBG   Dbg;&#10;} HIDP_DEVICE_DESC, *PHIDP_DEVICE_DESC;">HIDP_DEVICE_DESC</a></strong>.</p>

<h3 id="devicedescription-out"><code>DeviceDescription</code> [out]</h3>

<p>A pointer to a <a rel="noopener" target="_blank" href="hidp_device_desc">HIDP_DEVICE_DESC</a> structure that is populated with device description block filled in
collection descriptors as linked lists. This is a caller-allocated structure. However, its <a rel="noopener" target="_blank" href="hidp_collection_desc">HIDP_COLLECTION_DESC</a> array elements and <a rel="noopener" target="_blank" href="hidp_report_ids">HIDP_REPORT_IDS</a> array elements are allocated by this function.</p>

<h2 id="return-value">Return value</h2>

<p><strong>HidP_GetCollectionDescription</strong> can return one of these values: <strong>TRUE</strong> if it successfully fills the device description block. Otherwise, it returns <strong>FALSE</strong>.</p>

<table>
<thead>
<tr>
  <th>Return value</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a></td>
  <td>Successfully parsed the report descriptor and allocated the memory blocks necessary to describe the device.</td>
</tr>
<tr>
  <td>STATUS_NO_DATA_DETECTED</td>
  <td>Failed to find top-level collections in the report descriptor.</td>
</tr>
<tr>
  <td>STATUS_COULD_NOT_INTERPRET</td>
  <td>An error was detected in the report descriptor. See the error code in <strong>Dbg</strong> field of the <a rel="noopener" target="_blank" href="hidp_device_desc">HIDP_DEVICE_DESC</a> structure.</td>
</tr>
<tr>
  <td>STATUS_BUFFER_TOO_SMALL</td>
  <td>Found the end of the report descriptor when it expected more data.</td>
</tr>
<tr>
  <td>STATUS_INSUFFICIENT_RESOURCES</td>
  <td>Failed to allocate memory.</td>
</tr>
<tr>
  <td>STATUS_ILLEGAL_INSTRUCTION</td>
  <td>Failed to parse an item in the report descriptor.</td>
</tr>
<tr>
  <td>HIDP_STATUS_INVALID_REPORT_TYPE</td>
  <td>Report ID of 0 was found in the descriptor.</td>
</tr>
</tbody>
</table>

<h2 id="remarks">Remarks</h2>

<p>For a raw report descriptor that is specified by the <em>ReportDesc</em> parameter, <em>HidP_GetCollectionDescription</em> fills in the <em>DeviceDescription</em>
block with a caller-allocated linked list of collection descriptors and the corresponding
Report ID information that is described by the given report descriptor.
The memory for the collection information and the ReportID information is
allocated based on the <em>PoolType</em> value.</p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/hidpddi/nf-hidpddi-hidp_getcollectiondescription">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/hidpddi/nf-hidpddi-hidp_getcollectiondescription.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
