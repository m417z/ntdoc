<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="NtCreateKey - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NtCreateKey - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            NtCreateKey - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">#ifndef _NTREGAPI_H

</span><span class="ntdoc-code-intro">/**
 * Creates a new registry key routine or opens an existing one.
 *
 * \param[out] KeyHandle A pointer to a handle that receives the key handle.
 * \param[in] DesiredAccess The access mask that specifies the desired access rights.
 * \param[in] ObjectAttributes A pointer to an <a href="object_attributes" title="typedef struct _OBJECT_ATTRIBUTES&#10;{&#10;    ULONG Length;&#10;    HANDLE RootDirectory;&#10;    PCUNICODE_STRING ObjectName;&#10;    ULONG Attributes;&#10;    PSECURITY_DESCRIPTOR SecurityDescriptor;&#10;    PSECURITY_QUALITY_OF_SERVICE SecurityQualityOfService;&#10;} OBJECT_ATTRIBUTES, *POBJECT_ATTRIBUTES;">OBJECT_ATTRIBUTES</a> structure that specifies the object attributes.
 * \param[in] TitleIndex Reserved.
 * \param[in, optional] Class A pointer to a <a href="unicode_string" title="typedef struct _UNICODE_STRING&#10;{&#10;    USHORT Length;&#10;    USHORT MaximumLength;&#10;    _Field_size_bytes_part_opt_(MaximumLength, Length) PWCH Buffer;&#10;} UNICODE_STRING, *PUNICODE_STRING;">UNICODE_STRING</a> structure that specifies the class of the key.
 * \param[in] CreateOptions The options to use when creating the key.
 * \param[out, optional] Disposition A pointer to a variable that receives the disposition value.
 * \return <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> Successful or errant status.
 */
</span><span class="ntdoc-code-body">NTSYSCALLAPI
<a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a>
NTAPI
NtCreateKey(
    _Out_ PHANDLE KeyHandle,
    _In_ ACCESS_MASK DesiredAccess,
    _In_ <a href="object_attributes" title="typedef struct _OBJECT_ATTRIBUTES&#10;{&#10;    ULONG Length;&#10;    HANDLE RootDirectory;&#10;    PCUNICODE_STRING ObjectName;&#10;    ULONG Attributes;&#10;    PSECURITY_DESCRIPTOR SecurityDescriptor;&#10;    PSECURITY_QUALITY_OF_SERVICE SecurityQualityOfService;&#10;} OBJECT_ATTRIBUTES, *POBJECT_ATTRIBUTES;">POBJECT_ATTRIBUTES</a> ObjectAttributes,
    _Reserved_ <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> TitleIndex,
    _In_opt_ <a href="pcunicode_string" title="typedef const UNICODE_STRING *PCUNICODE_STRING;">PCUNICODE_STRING</a> Class,
    _In_ <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> CreateOptions,
    _Out_opt_ PULONG Disposition
    );
</span><span class="ntdoc-code-footer">
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/d9393a49b3707fc786047a2ca5ae4afefd760b30/phnt/include/ntregapi.h#L701">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">#ifndef _NTZWAPI_H

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NTSYSCALLAPI
<a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a>
NTAPI
ZwCreateKey(
    _Out_ PHANDLE KeyHandle,
    _In_ ACCESS_MASK DesiredAccess,
    _In_ <a href="object_attributes" title="typedef struct _OBJECT_ATTRIBUTES&#10;{&#10;    ULONG Length;&#10;    HANDLE RootDirectory;&#10;    PCUNICODE_STRING ObjectName;&#10;    ULONG Attributes;&#10;    PSECURITY_DESCRIPTOR SecurityDescriptor;&#10;    PSECURITY_QUALITY_OF_SERVICE SecurityQualityOfService;&#10;} OBJECT_ATTRIBUTES, *POBJECT_ATTRIBUTES;">POBJECT_ATTRIBUTES</a> ObjectAttributes,
    _Reserved_ <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> TitleIndex,
    _In_opt_ <a href="pcunicode_string" title="typedef const UNICODE_STRING *PCUNICODE_STRING;">PCUNICODE_STRING</a> Class,
    _In_ <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a> CreateOptions,
    _Out_opt_ PULONG Disposition
    );
</span><span class="ntdoc-code-footer">
#endif
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://github.com/winsiderss/systeminformer/blob/d9393a49b3707fc786047a2ca5ae4afefd760b30/phnt/include/ntzwapi.h#L1083">View code on GitHub</a></span></code></pre></div>
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// wdm.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">NTSYSAPI <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> ZwCreateKey(
  [out]           PHANDLE            KeyHandle,
  [in]            ACCESS_MASK        DesiredAccess,
  [in]            <a href="object_attributes" title="typedef struct _OBJECT_ATTRIBUTES&#10;{&#10;    ULONG Length;&#10;    HANDLE RootDirectory;&#10;    PCUNICODE_STRING ObjectName;&#10;    ULONG Attributes;&#10;    PSECURITY_DESCRIPTOR SecurityDescriptor;&#10;    PSECURITY_QUALITY_OF_SERVICE SecurityQualityOfService;&#10;} OBJECT_ATTRIBUTES, *POBJECT_ATTRIBUTES;">POBJECT_ATTRIBUTES</a> ObjectAttributes,
                  <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>              TitleIndex,
  [in, optional]  <a href="unicode_string" title="typedef struct _UNICODE_STRING&#10;{&#10;    USHORT Length;&#10;    USHORT MaximumLength;&#10;    _Field_size_bytes_part_opt_(MaximumLength, Length) PWCH Buffer;&#10;} UNICODE_STRING, *PUNICODE_STRING;">PUNICODE_STRING</a>    Class,
  [in]            <a href="ulong" title="typedef unsigned long ULONG;">ULONG</a>              CreateOptions,
  [out, optional] PULONG             Disposition
);</span><span class="ntdoc-code-footer"></span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-zwcreatekey">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/ntcreatekey.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (nf-wdm-zwcreatekey)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h2 id="description">Description</h2>

<p>The <strong>ZwCreateKey</strong> routine creates a new registry key or opens an existing one.</p>

<h2 id="parameters">Parameters</h2>

<h3 id="keyhandle-out"><code>KeyHandle</code> [out]</h3>

<p>Pointer to a HANDLE variable that receives a handle to the key.</p>

<h3 id="desiredaccess-in"><code>DesiredAccess</code> [in]</h3>

<p>Specifies an <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/access-mask">ACCESS_MASK</a> value that determines the requested access to the object. In addition to the access rights that are defined for all types of objects (see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/access-mask">ACCESS_MASK</a>), the caller can specify one or more of the following access rights, which are specific to object directories:</p>

<table>
<thead>
<tr>
  <th><em>DesiredAccess</em> flag</th>
  <th>Allows caller to do this</th>
</tr>
</thead>
<tbody>
<tr>
  <td>KEY_QUERY_VALUE</td>
  <td>Read key values.</td>
</tr>
<tr>
  <td>KEY_SET_VALUE</td>
  <td>Write key values.</td>
</tr>
<tr>
  <td>KEY_CREATE_SUB_KEY</td>
  <td>Create subkeys for the key.</td>
</tr>
<tr>
  <td>KEY_ENUMERATE_SUB_KEYS</td>
  <td>Read the key's subkeys.</td>
</tr>
<tr>
  <td>KEY_CREATE_LINK</td>
  <td>Create a symbolic link to the key. This flag is not used by device and intermediate drivers.</td>
</tr>
<tr>
  <td>KEY_NOTIFY</td>
  <td>Ask to receive notification when the name, value, or attributes of the key change. For more information, see <a href="ntnotifychangekey" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtNotifyChangeKey(&#10;    _In_ HANDLE KeyHandle,&#10;    _In_opt_ HANDLE Event,&#10;    _In_opt_ PIO_APC_ROUTINE ApcRoutine,&#10;    _In_opt_ PVOID ApcContext,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_ ULONG CompletionFilter,&#10;    _In_ BOOLEAN WatchTree,&#10;    _Out_writes_bytes_opt_(BufferSize) PVOID Buffer,&#10;    _In_ ULONG BufferSize,&#10;    _In_ BOOLEAN Asynchronous&#10;    );">ZwNotifyChangeKey</a>.</td>
</tr>
</tbody>
</table>

<p>The caller can also specify one of the following constants, which combines several ACCESS_MASK flags.</p>

<table>
<thead>
<tr>
  <th>Constant</th>
  <th>Consists of these ACCESS_MASK flags</th>
</tr>
</thead>
<tbody>
<tr>
  <td>KEY_READ</td>
  <td>STANDARD_RIGHTS_READ, KEY_QUERY_VALUE, KEY_ENUMERATE_SUB_KEYS, and KEY_NOTIFY</td>
</tr>
<tr>
  <td>KEY_WRITE</td>
  <td>STANDARD_RIGHTS_WRITE, KEY_SET_VALUE, and KEY_CREATE_SUB_KEY</td>
</tr>
<tr>
  <td>KEY_EXECUTE</td>
  <td>Same as KEY_READ.</td>
</tr>
<tr>
  <td>KEY_ALL_ACCESS</td>
  <td>STANDARD_RIGHTS_ALL, KEY_QUERY_VALUE, KEY_SET_VALUE, KEY_CREATE_SUB_KEY, KEY_ENUMERATE_SUB_KEYS, KEY_NOTIFY, and KEY_CREATE_LINK</td>
</tr>
</tbody>
</table>

<h3 id="objectattributes-in"><code>ObjectAttributes</code> [in]</h3>

<p>Pointer to an <strong><a href="object_attributes" title="typedef struct _OBJECT_ATTRIBUTES&#10;{&#10;    ULONG Length;&#10;    HANDLE RootDirectory;&#10;    PCUNICODE_STRING ObjectName;&#10;    ULONG Attributes;&#10;    PSECURITY_DESCRIPTOR SecurityDescriptor;&#10;    PSECURITY_QUALITY_OF_SERVICE SecurityQualityOfService;&#10;} OBJECT_ATTRIBUTES, *POBJECT_ATTRIBUTES;">OBJECT_ATTRIBUTES</a></strong> structure that specifies the object name and other attributes. Use <a href="initializeobjectattributes" title="#define InitializeObjectAttributes(p, n, a, r, s) { \&#10;    (p)-&gt;Length = sizeof(OBJECT_ATTRIBUTES); \&#10;    (p)-&gt;RootDirectory = r; \&#10;    (p)-&gt;Attributes = a; \&#10;    (p)-&gt;ObjectName = n; \&#10;    (p)-&gt;SecurityDescriptor = s; \&#10;    (p)-&gt;SecurityQualityOfService = NULL; \&#10;    }">InitializeObjectAttributes</a> to initialize this structure. If the caller is not running in a system thread context, it must set the <a href="obj_kernel_handle" title="#define OBJ_KERNEL_HANDLE 0x00000200L">OBJ_KERNEL_HANDLE</a> attribute when it calls <strong><a href="initializeobjectattributes" title="#define InitializeObjectAttributes(p, n, a, r, s) { \&#10;    (p)-&gt;Length = sizeof(OBJECT_ATTRIBUTES); \&#10;    (p)-&gt;RootDirectory = r; \&#10;    (p)-&gt;Attributes = a; \&#10;    (p)-&gt;ObjectName = n; \&#10;    (p)-&gt;SecurityDescriptor = s; \&#10;    (p)-&gt;SecurityQualityOfService = NULL; \&#10;    }">InitializeObjectAttributes</a></strong>.</p>

<h3 id="titleindex"><code>TitleIndex</code></h3>

<p>Device and intermediate drivers set this parameter to zero.</p>

<h3 id="class-in-optional"><code>Class</code> [in, optional]</h3>

<p>Pointer to a Unicode string that contains the key's object class. This information is used by the configuration manager.</p>

<h3 id="createoptions-in"><code>CreateOptions</code> [in]</h3>

<p>Specifies the options to apply when creating or opening a key, specified as a compatible combination of the following flags.</p>

<table>
<thead>
<tr>
  <th><em>CreateOptions</em> flag</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><a href="reg_option_volatile" title="#define REG_OPTION_VOLATILE (0x00000001L) // Key is not preserved when system is rebooted">REG_OPTION_VOLATILE</a></td>
  <td>Key is not preserved when the system is rebooted.</td>
</tr>
<tr>
  <td><a href="reg_option_non_volatile" title="#define REG_OPTION_NON_VOLATILE (0x00000000L) // Key is preserved when system is rebooted.">REG_OPTION_NON_VOLATILE</a></td>
  <td>Key is preserved when the system is rebooted.</td>
</tr>
<tr>
  <td><a href="reg_option_create_link" title="#define REG_OPTION_CREATE_LINK (0x00000002L) // Created key is a symbolic link">REG_OPTION_CREATE_LINK</a></td>
  <td>The newly created key is a symbolic link. This flag is not used by device and intermediate drivers.</td>
</tr>
<tr>
  <td><a href="reg_option_backup_restore" title="#define REG_OPTION_BACKUP_RESTORE (0x00000004L) // open for backup or restore special access rules privilege required">REG_OPTION_BACKUP_RESTORE</a></td>
  <td>Key should be created or opened with special privileges that allow backup and restore operations. This flag is not used by device and intermediate drivers.</td>
</tr>
</tbody>
</table>

<h3 id="disposition-out-optional"><code>Disposition</code> [out, optional]</h3>

<p>Pointer to a variable that receives a value indicating whether a new key was created or an existing one opened.</p>

<table>
<thead>
<tr>
  <th><em>Disposition</em> value</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td><a href="reg_created_new_key" title="#define REG_CREATED_NEW_KEY (0x00000001L) // New Registry Key created">REG_CREATED_NEW_KEY</a></td>
  <td>A new key was created.</td>
</tr>
<tr>
  <td><a href="reg_opened_existing_key" title="#define REG_OPENED_EXISTING_KEY (0x00000002L) // Existing Key opened">REG_OPENED_EXISTING_KEY</a></td>
  <td>An existing key was opened.</td>
</tr>
</tbody>
</table>

<h2 id="return-value">Return value</h2>

<p><strong>ZwCreateKey</strong> returns <a href="status_success" title="#define STATUS_SUCCESS ((NTSTATUS)0x00000000L)">STATUS_SUCCESS</a> on success, or the appropriate <a href="ntstatus" title="typedef _Return_type_success_(return &gt;= 0) long NTSTATUS;">NTSTATUS</a> error code on failure.</p>

<h2 id="remarks">Remarks</h2>

<p><strong>ZwCreateKey</strong> supplies a handle that the caller can use to manipulate a registry key. For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/using-the-registry-in-a-driver">Using the Registry in a Driver</a>.</p>

<p>Once the handle pointed to by <em>KeyHandle</em> is no longer in use, the driver must call <a href="ntclose" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtClose(&#10;    _In_ _Post_ptr_invalid_ HANDLE Handle&#10;    );">ZwClose</a> to close it.</p>

<p>There are two alternate ways to specify the name of the file to be created or opened with <strong>ZwCreateKey</strong>:</p>

<ol>
<li><p>As a fully qualified pathname, supplied in the <strong>ObjectName</strong> member of the input <em>ObjectAttributes</em>. The pathnames of registry keys begin with <strong>\Registry</strong>.</p></li>
<li><p>As pathname relative to another registry key, represented by the handle in the <strong>RootDirectory</strong> member of the input <em>ObjectAttributes</em>.</p></li>
</ol>

<p>If the key specified by <em>ObjectAttributes</em> does not exist, the routine attempts to create the key. For this attempt to succeed, the new key must be a direct subkey of the key that is referred to by <strong>RootDirectory</strong>, and the key that <strong>RootDirectory</strong> refers to must have been opened for KEY_CREATE_SUB_KEY access.</p>

<p>If the specified key already exists, it is opened and its value is not affected in any way.</p>

<p>The security attributes specified by <em>ObjectAttributes</em> when a key is created determine whether the specified <em>DesiredAccess</em> is granted on subsequent calls to <strong>ZwCreateKey</strong> and <a href="ntopenkey" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtOpenKey(&#10;    _Out_ PHANDLE KeyHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ POBJECT_ATTRIBUTES ObjectAttributes&#10;    );">ZwOpenKey</a>.</p>

<p>If the caller is not running in a system thread context, it must ensure that any handles it creates are private handles. Otherwise, the handle can be accessed by the process in whose context the driver is running. For more information, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/object-handles">Object Handles</a>.</p>

<p>For more information about working with registry keys, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/using-the-registry-in-a-driver">Using the Registry in a Driver</a>.</p>

<p>If the call to this function occurs in user mode, you should use the name "<strong>NtCreateKey</strong>" instead of "<strong>ZwCreateKey</strong>".</p>

<p>The <strong>NtCreateKey</strong> routine in the Windows kernel is not directly accessible to kernel-mode drivers.</p>

<p>For calls from kernel-mode drivers, the <strong>Nt*Xxx</strong>* and <strong>Zw*Xxx</strong>* versions of a Windows Native System Services routine can behave differently in the way that they handle and interpret input parameters. For more information about the relationship between the <strong>Nt*Xxx</strong>* and <strong>Zw*Xxx</strong>* versions of a routine, see <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/using-nt-and-zw-versions-of-the-native-system-services-routines">Using Nt and Zw Versions of the Native System Services Routines</a>.</p>

<h2 id="see-also">See also</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/access-mask">ACCESS_MASK</a></p>

<p><a href="initializeobjectattributes" title="#define InitializeObjectAttributes(p, n, a, r, s) { \&#10;    (p)-&gt;Length = sizeof(OBJECT_ATTRIBUTES); \&#10;    (p)-&gt;RootDirectory = r; \&#10;    (p)-&gt;Attributes = a; \&#10;    (p)-&gt;ObjectName = n; \&#10;    (p)-&gt;SecurityDescriptor = s; \&#10;    (p)-&gt;SecurityQualityOfService = NULL; \&#10;    }">InitializeObjectAttributes</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/kernel/using-nt-and-zw-versions-of-the-native-system-services-routines">Using Nt and Zw Versions of the Native System Services Routines</a></p>

<p><a href="ntclose" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtClose(&#10;    _In_ _Post_ptr_invalid_ HANDLE Handle&#10;    );">ZwClose</a></p>

<p><a href="ntdeletekey" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtDeleteKey(&#10;    _In_ HANDLE KeyHandle&#10;    );">ZwDeleteKey</a></p>

<p><a href="ntenumeratekey" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtEnumerateKey(&#10;    _In_ HANDLE KeyHandle,&#10;    _In_ ULONG Index,&#10;    _In_ KEY_INFORMATION_CLASS KeyInformationClass,&#10;    _Out_writes_bytes_to_opt_(Length, *ResultLength) PVOID KeyInformation,&#10;    _In_ ULONG Length,&#10;    _Out_ PULONG ResultLength&#10;    );">ZwEnumerateKey</a></p>

<p><a href="ntenumeratevaluekey" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtEnumerateValueKey(&#10;    _In_ HANDLE KeyHandle,&#10;    _In_ ULONG Index,&#10;    _In_ KEY_VALUE_INFORMATION_CLASS KeyValueInformationClass,&#10;    _Out_writes_bytes_to_opt_(Length, *ResultLength) PVOID KeyValueInformation,&#10;    _In_ ULONG Length,&#10;    _Out_ PULONG ResultLength&#10;    );">ZwEnumerateValueKey</a></p>

<p><a href="ntflushkey" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtFlushKey(&#10;    _In_ HANDLE KeyHandle&#10;    );">ZwFlushKey</a></p>

<p><a href="ntnotifychangekey" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtNotifyChangeKey(&#10;    _In_ HANDLE KeyHandle,&#10;    _In_opt_ HANDLE Event,&#10;    _In_opt_ PIO_APC_ROUTINE ApcRoutine,&#10;    _In_opt_ PVOID ApcContext,&#10;    _Out_ PIO_STATUS_BLOCK IoStatusBlock,&#10;    _In_ ULONG CompletionFilter,&#10;    _In_ BOOLEAN WatchTree,&#10;    _Out_writes_bytes_opt_(BufferSize) PVOID Buffer,&#10;    _In_ ULONG BufferSize,&#10;    _In_ BOOLEAN Asynchronous&#10;    );">ZwNotifyChangeKey</a></p>

<p><a href="ntopenkey" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtOpenKey(&#10;    _Out_ PHANDLE KeyHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ POBJECT_ATTRIBUTES ObjectAttributes&#10;    );">ZwOpenKey</a></p>

<p><a href="ntqueryvaluekey" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtQueryValueKey(&#10;    _In_ HANDLE KeyHandle,&#10;    _In_ PCUNICODE_STRING ValueName,&#10;    _In_ KEY_VALUE_INFORMATION_CLASS KeyValueInformationClass,&#10;    _Out_writes_bytes_to_opt_(Length, *ResultLength) PVOID KeyValueInformation,&#10;    _In_ ULONG Length,&#10;    _Out_ PULONG ResultLength&#10;    );">ZwQueryValueKey</a></p>

<p><a href="ntsetvaluekey" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtSetValueKey(&#10;    _In_ HANDLE KeyHandle,&#10;    _In_ PCUNICODE_STRING ValueName,&#10;    _In_opt_ ULONG TitleIndex,&#10;    _In_ ULONG Type,&#10;    _In_reads_bytes_opt_(DataSize) PVOID Data,&#10;    _In_ ULONG DataSize&#10;    );">ZwSetValueKey</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-zwcreatekey">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/wdm/nf-wdm-zwcreatekey.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>NTinternals.net (undocumented.ntinternals.net)</h1>
</div>
<div class="ntdoc-description">
<p>This function is <a rel="noopener" target="_blank" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/wdm/nf-wdm-zwcreatekey">documented in Windows Driver Kit</a>.</p>

<hr />

<p>See <code>ZwCreateKey</code> in <em>NT DDK</em> or <em>2000 DDK</em> for detailed description.</p>

<h1>See also</h1>

<ul>
<li><code><a href="ntopenkey" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtOpenKey(&#10;    _Out_ PHANDLE KeyHandle,&#10;    _In_ ACCESS_MASK DesiredAccess,&#10;    _In_ POBJECT_ATTRIBUTES ObjectAttributes&#10;    );">NtOpenKey</a></code></li>
<li><code><a href="ntdeletekey" title="NTSYSCALLAPI&#10;NTSTATUS&#10;NTAPI&#10;NtDeleteKey(&#10;    _In_ HANDLE KeyHandle&#10;    );">NtDeleteKey</a></code></li>
</ul>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/undocumented.ntinternals.net/ntcreatekey.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
