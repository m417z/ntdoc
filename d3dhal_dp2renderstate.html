<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="D3DHAL_DP2RENDERSTATE - NtDoc, the native NT API online documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>D3DHAL_DP2RENDERSTATE - NtDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/site.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <noscript id="dark-mode-toggle-stylesheets">
        <link rel="stylesheet" href="modules/water-2.1.1-light.css" media="(prefers-color-scheme: light)">
        <link rel="stylesheet" href="modules/water-2.1.1-dark.css" media="(prefers-color-scheme: dark)">
    </noscript>
    <script src="dark-mode-toggle-stylesheets-loader.min.js"></script>
    <link rel="stylesheet" href="modules/virtual-select/virtual-select.css">
    <link rel="stylesheet" href="modules/pygments-css.css">
    <link rel="stylesheet" href="ntdoc.css">
    <noscript>
        <link rel="stylesheet" href="ntdoc-noscript.css">
    </noscript>
</head>
<body>
    <header>
        <a href="."><img class="ntdoc-title-logo" src="logo.png" alt="logo"></a>
        <h1 class="ntdoc-title">
            D3DHAL_DP2RENDERSTATE - NtDoc
        </h1>
        <div class="ntdoc-subtitle">
            Native API online documentation, based on the System Informer
            (formerly Process Hacker) <a target="_blank"
            href="https://github.com/winsiderss/systeminformer/tree/master/phnt">phnt
            headers</a>
        </div>
        <div id="ntdoc-search-select"></div>
    </header>
    <div class="ntdoc-code-elements">
<div class="ntdoc-code-element">
<pre class="ntdoc-code-pre"><code class="ntdoc-code"><span class="ntdoc-code-header">// d3dhal.h

</span><span class="ntdoc-code-intro"></span><span class="ntdoc-code-body">typedef struct _D3DHAL_DP2RENDERSTATE {
  <a href="d3drenderstatetype" title="typedef enum _D3DRENDERSTATETYPE {&#10;  D3DRS_ZENABLE,&#10;  D3DRS_FILLMODE,&#10;  D3DRS_SHADEMODE,&#10;  D3DRS_ZWRITEENABLE,&#10;  D3DRS_ALPHATESTENABLE,&#10;  D3DRS_LASTPIXEL,&#10;  D3DRS_SRCBLEND,&#10;  D3DRS_DESTBLEND,&#10;  D3DRS_CULLMODE,&#10;  D3DRS_ZFUNC,&#10;  D3DRS_ALPHAREF,&#10;  D3DRS_ALPHAFUNC,&#10;  D3DRS_DITHERENABLE,&#10;  D3DRS_ALPHABLENDENABLE,&#10;  D3DRS_FOGENABLE,&#10;  D3DRS_SPECULARENABLE,&#10;  D3DRS_FOGCOLOR,&#10;  D3DRS_FOGTABLEMODE,&#10;  D3DRS_FOGSTART,&#10;...">D3DRENDERSTATETYPE</a> RenderState;
  union {
    D3DVALUE dvState;
    <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>    dwState;
  };
} D3DHAL_DP2RENDERSTATE;</span><span class="ntdoc-code-footer">
</span><span class="ntdoc-code-links"><hr><a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dhal/ns-d3dhal-_d3dhal_dp2renderstate">View the official Windows Driver Kit DDI reference</a></span></code></pre></div>
</div>
<div class="ntdoc-descriptions">
<div class="ntdoc-description-title">
<h1>NtDoc</h1>
</div>
<div class="ntdoc-description">
<div class="ntdoc-description-none">
<p>No description available.</p>
</div>
<div class="ntdoc-description-links">
<a target="_blank" href="https://github.com/m417z/ntdoc/blob/main/descriptions/d3dhal_dp2renderstate.md">Edit description on GitHub</a>
</div>
</div>
<div class="ntdoc-description-title">
<h1>Windows Driver Kit DDI reference (ns-d3dhal-_d3dhal_dp2renderstate)</h1>
</div>
<div class="ntdoc-description ntdoc-description-selected">
<h1 id="_d3dhal_dp2renderstate-structure">_D3DHAL_DP2RENDERSTATE structure</h1>

<h2 id="description">Description</h2>

<p>One or more D3DHAL_DP2RENDERSTATE structures are parsed from the command buffer by the <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dhal/nc-d3dhal-lpd3dhal_drawprimitives2cb">D3dDrawPrimitives2</a> callback when the <a href="lpd3dhal_dp2command" title="typedef struct _D3DHAL_DP2COMMAND {&#10;  BYTE  bCommand;&#10;  BYTE  bReserved;&#10;  union {&#10;    WORD wPrimitiveCount;&#10;    WORD wStateCount;&#10;  };&#10;} D3DHAL_DP2COMMAND, *LPD3DHAL_DP2COMMAND;">D3DHAL_DP2COMMAND</a> structure's <strong>bCommand</strong> member is set to D3DDP2OP_RENDERSTATE, and are used to set the appropriate render state.</p>

<h2 id="members">Members</h2>

<h3 id="renderstate"><code>RenderState</code></h3>

<p>Specifies a <a href="d3drenderstatetype" title="typedef enum _D3DRENDERSTATETYPE {&#10;  D3DRS_ZENABLE,&#10;  D3DRS_FILLMODE,&#10;  D3DRS_SHADEMODE,&#10;  D3DRS_ZWRITEENABLE,&#10;  D3DRS_ALPHATESTENABLE,&#10;  D3DRS_LASTPIXEL,&#10;  D3DRS_SRCBLEND,&#10;  D3DRS_DESTBLEND,&#10;  D3DRS_CULLMODE,&#10;  D3DRS_ZFUNC,&#10;  D3DRS_ALPHAREF,&#10;  D3DRS_ALPHAFUNC,&#10;  D3DRS_DITHERENABLE,&#10;  D3DRS_ALPHABLENDENABLE,&#10;  D3DRS_FOGENABLE,&#10;  D3DRS_SPECULARENABLE,&#10;  D3DRS_FOGCOLOR,&#10;  D3DRS_FOGTABLEMODE,&#10;  D3DRS_FOGSTART,&#10;...">D3DRENDERSTATETYPE</a> enumerated type that indicates the render state to be updated. Render states that are requested at the application level are described in the DirectX SDK documentation. Render states that are exclusively used by drivers are described in <a href="d3drenderstatetype" title="typedef enum _D3DRENDERSTATETYPE {&#10;  D3DRS_ZENABLE,&#10;  D3DRS_FILLMODE,&#10;  D3DRS_SHADEMODE,&#10;  D3DRS_ZWRITEENABLE,&#10;  D3DRS_ALPHATESTENABLE,&#10;  D3DRS_LASTPIXEL,&#10;  D3DRS_SRCBLEND,&#10;  D3DRS_DESTBLEND,&#10;  D3DRS_CULLMODE,&#10;  D3DRS_ZFUNC,&#10;  D3DRS_ALPHAREF,&#10;  D3DRS_ALPHAFUNC,&#10;  D3DRS_DITHERENABLE,&#10;  D3DRS_ALPHABLENDENABLE,&#10;  D3DRS_FOGENABLE,&#10;  D3DRS_SPECULARENABLE,&#10;  D3DRS_FOGCOLOR,&#10;  D3DRS_FOGTABLEMODE,&#10;  D3DRS_FOGSTART,&#10;...">D3DRENDERSTATETYPE</a>.</p>

<h3 id="dvstate"><code>dvState</code></h3>

<p>Specifies the value that the driver should update the render state identified by the <strong>RenderState</strong> member with. This member is valid when <strong>RenderState</strong> requires a D3DVALUE.</p>

<h3 id="dwstate"><code>dwState</code></h3>

<p>Specifies the value that the driver should update the render state identified by <strong>RenderState</strong> to. This member is valid when <strong>RenderState</strong> requires a <a href="dword" title="typedef unsigned long DWORD;">DWORD</a>.</p>

<h2 id="remarks">Remarks</h2>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dhal/nc-d3dhal-lpd3dhal_drawprimitives2cb">D3dDrawPrimitives2</a> should process <strong>wStateCount</strong> D3DHAL_DP2RENDERSTATE structures from the command buffer. The value of <strong>wStateCount</strong> is specified in the <a href="lpd3dhal_dp2command" title="typedef struct _D3DHAL_DP2COMMAND {&#10;  BYTE  bCommand;&#10;  BYTE  bReserved;&#10;  union {&#10;    WORD wPrimitiveCount;&#10;    WORD wStateCount;&#10;  };&#10;} D3DHAL_DP2COMMAND, *LPD3DHAL_DP2COMMAND;">D3DHAL_DP2COMMAND</a> structure.</p>

<p>For each D3DHAL_DP2RENDERSTATE structure, <a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dhal/nc-d3dhal-lpd3dhal_drawprimitives2cb">D3dDrawPrimitives2</a> should update the driver's private render state and the render state array that the <strong>lpdwRStates</strong> member of <a href="d3dhal_drawprimitives2data" title="typedef struct _D3DHAL_DRAWPRIMITIVES2DATA {&#10;  ULONG_PTR                 dwhContext;&#10;  DWORD                     dwFlags;&#10;  DWORD                     dwVertexType;&#10;  LPDDRAWI_DDRAWSURFACE_LCL lpDDCommands;&#10;  DWORD                     dwCommandOffset;&#10;  DWORD                     dwCommandLength;&#10;  union {&#10;    LPDDRAWI_DDRAWSURFACE_LCL lpDDVertex;&#10;    LPVOID                    lpVertices;&#10;  };&#10;  DWORD                     dwVertexOffset;&#10;  DWORD                     dwVertexLength;&#10;  DWORD                     dwReqVertexBufSize;&#10;  DWORD                     dwReqCommandBufSize;&#10;  LPDWORD                   lpdwRStates;&#10;  union {&#10;    DWORD   dwVertexSize;&#10;    HRESULT ddrval;&#10;  };&#10;...">D3DHAL_DRAWPRIMITIVES2DATA</a> points to. The element to be updated in the public render state array is <strong>lpdwRStates[RenderState]</strong>.</p>

<p>The following figure shows a portion of a sample command buffer containing a D3DDP2OP_RENDERSTATE command and two D3DHAL_DP2RENDERSTATE structures. The driver should update <strong>lpdwRStates</strong>[D3DRENDERSTATE_FILLMODE] to be D3DFILL_SOLID and <strong>lpdwRStates</strong>[D3DRENDERSTATE_SHADEMODE] to be D3DSHADE_GOURAUD. The driver should also update its private state accordingly.</p>

<p><img src="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dhal/images/dp2rs.png" alt="Figure showing a command buffer with a D3DDP2OP_RENDERSTATE command and two D3DHAL_DP2RENDERSTATE structures" />
Although render states whose values are Boolean in type are documented as only accepting <strong>TRUE</strong>(1) and <strong>FALSE</strong>(0) the runtime does not validate this and accepts any subzero value as true. The sample driver interprets this strictly and does interpret values other than 1 as being <strong>TRUE</strong>. However, because the runtime does not offer validation, your driver should interpret 0 as <strong>FALSE</strong> and any other subzero value as <strong>TRUE</strong>. In this respect your driver should not mimic the behavior of the supplied sample driver.</p>

<h2 id="see-also">See also</h2>

<p>D3DDP2OP_RENDERSTATE</p>

<p><a href="lpd3dhal_dp2command" title="typedef struct _D3DHAL_DP2COMMAND {&#10;  BYTE  bCommand;&#10;  BYTE  bReserved;&#10;  union {&#10;    WORD wPrimitiveCount;&#10;    WORD wStateCount;&#10;  };&#10;} D3DHAL_DP2COMMAND, *LPD3DHAL_DP2COMMAND;">D3DHAL_DP2COMMAND</a></p>

<p><a href="d3dhal_drawprimitives2data" title="typedef struct _D3DHAL_DRAWPRIMITIVES2DATA {&#10;  ULONG_PTR                 dwhContext;&#10;  DWORD                     dwFlags;&#10;  DWORD                     dwVertexType;&#10;  LPDDRAWI_DDRAWSURFACE_LCL lpDDCommands;&#10;  DWORD                     dwCommandOffset;&#10;  DWORD                     dwCommandLength;&#10;  union {&#10;    LPDDRAWI_DDRAWSURFACE_LCL lpDDVertex;&#10;    LPVOID                    lpVertices;&#10;  };&#10;  DWORD                     dwVertexOffset;&#10;  DWORD                     dwVertexLength;&#10;  DWORD                     dwReqVertexBufSize;&#10;  DWORD                     dwReqCommandBufSize;&#10;  LPDWORD                   lpdwRStates;&#10;  union {&#10;    DWORD   dwVertexSize;&#10;    HRESULT ddrval;&#10;  };&#10;...">D3DHAL_DRAWPRIMITIVES2DATA</a></p>

<p><a href="d3drenderstatetype" title="typedef enum _D3DRENDERSTATETYPE {&#10;  D3DRS_ZENABLE,&#10;  D3DRS_FILLMODE,&#10;  D3DRS_SHADEMODE,&#10;  D3DRS_ZWRITEENABLE,&#10;  D3DRS_ALPHATESTENABLE,&#10;  D3DRS_LASTPIXEL,&#10;  D3DRS_SRCBLEND,&#10;  D3DRS_DESTBLEND,&#10;  D3DRS_CULLMODE,&#10;  D3DRS_ZFUNC,&#10;  D3DRS_ALPHAREF,&#10;  D3DRS_ALPHAFUNC,&#10;  D3DRS_DITHERENABLE,&#10;  D3DRS_ALPHABLENDENABLE,&#10;  D3DRS_FOGENABLE,&#10;  D3DRS_SPECULARENABLE,&#10;  D3DRS_FOGCOLOR,&#10;  D3DRS_FOGTABLEMODE,&#10;  D3DRS_FOGSTART,&#10;...">D3DRENDERSTATETYPE</a></p>

<p><a rel="noopener" target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dhal/nc-d3dhal-lpd3dhal_drawprimitives2cb">D3dDrawPrimitives2</a></p>
<hr>
<div class="ntdoc-description-links">
<p>
<a target="_blank" href="https://learn.microsoft.com/windows-hardware/drivers/ddi/d3dhal/ns-d3dhal-_d3dhal_dp2renderstate">View the official Windows Driver Kit DDI reference</a>
</p>
<a target="_blank" href="https://github.com/MicrosoftDocs/windows-driver-docs-ddi/blob/staging/wdk-ddi-src/content/d3dhal/ns-d3dhal-_d3dhal_dp2renderstate.md">Edit description on GitHub</a>
</div>
</div>
</div>

    <!-- For sticky footer: https://stackoverflow.com/a/34146411 -->
    <div class="spacer"></div>
    <footer>
        By <a href="https://m417z.com/" target="_blank" rel="noopener">m417z</a> &bull;
        content by <a href="https://github.com/diversenok" target="_blank" rel="noopener">diversenok</a> &bull;
        <a href="https://github.com/m417z/ntdoc" target="_blank" rel="noopener">GitHub repository</a> &bull;
        <dark-mode-toggle permanent></dark-mode-toggle>
    </footer>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YWF4NP61SX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YWF4NP61SX');
    </script>
    <script src="modules/jquery-3.7.0.min.js"></script>
    <script src="modules/q-1.5.1.js"></script>
    <script src="modules/virtual-select/virtual-select-jquery.min.js"></script>
    <script src="modules/popper-2.11.8.min.js"></script>
    <script src="modules/tippy-6.3.7.min.js"></script>
    <script src="modules/anchor-5.0.0.min.js"></script>
    <script type="module" src="modules/dark-mode-toggle-0.14.6.min.mjs"></script>
    <script src="ntdoc.js"></script>
</body>
</html>
